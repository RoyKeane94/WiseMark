var dx=r=>{throw TypeError(r)};var v1=(r,t,e)=>t.has(r)||dx("Cannot "+e);var hi=(r,t,e)=>(v1(r,t,"read from private field"),e?e.call(r):t.get(r)),Gl=(r,t,e)=>t.has(r)?dx("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),Xa=(r,t,e,n)=>(v1(r,t,"write to private field"),n?n.call(r,e):t.set(r,e),e),Vl=(r,t,e)=>(v1(r,t,"access private method"),e);var px=(r,t,e,n)=>({set _(i){Xa(r,t,i,e)},get _(){return hi(r,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();var zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function u3(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var b1={exports:{}},Sd={};var mx;function kT(){if(mx)return Sd;mx=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,i,s){var l=null;if(s!==void 0&&(l=""+s),i.key!==void 0&&(l=""+i.key),"key"in i){s={};for(var o in i)o!=="key"&&(s[o]=i[o])}else s=i;return i=s.ref,{$$typeof:r,type:n,key:l,ref:i!==void 0?i:null,props:s}}return Sd.Fragment=t,Sd.jsx=e,Sd.jsxs=e,Sd}var gx;function RT(){return gx||(gx=1,b1.exports=kT()),b1.exports}var Y=RT(),w1={exports:{}},Ln={};var yx;function LT(){if(yx)return Ln;yx=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),y=Symbol.iterator;function m($){return $===null||typeof $!="object"?null:($=y&&$[y]||$["@@iterator"],typeof $=="function"?$:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,_={};function v($,R,K){this.props=$,this.context=R,this.refs=_,this.updater=K||w}v.prototype.isReactComponent={},v.prototype.setState=function($,R){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,R,"setState")},v.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function A(){}A.prototype=v.prototype;function C($,R,K){this.props=$,this.context=R,this.refs=_,this.updater=K||w}var S=C.prototype=new A;S.constructor=C,b(S,v.prototype),S.isPureReactComponent=!0;var O=Array.isArray;function q(){}var H={H:null,A:null,T:null,S:null},Q=Object.prototype.hasOwnProperty;function I($,R,K){var rt=K.ref;return{$$typeof:r,type:$,key:R,ref:rt!==void 0?rt:null,props:K}}function dt($,R){return I($.type,R,$.props)}function nt($){return typeof $=="object"&&$!==null&&$.$$typeof===r}function B($){var R={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(K){return R[K]})}var Z=/\/+/g;function D($,R){return typeof $=="object"&&$!==null&&$.key!=null?B(""+$.key):R.toString(36)}function mt($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(q,q):($.status="pending",$.then(function(R){$.status==="pending"&&($.status="fulfilled",$.value=R)},function(R){$.status==="pending"&&($.status="rejected",$.reason=R)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function it($,R,K,rt,pt){var ct=typeof $;(ct==="undefined"||ct==="boolean")&&($=null);var F=!1;if($===null)F=!0;else switch(ct){case"bigint":case"string":case"number":F=!0;break;case"object":switch($.$$typeof){case r:case t:F=!0;break;case f:return F=$._init,it(F($._payload),R,K,rt,pt)}}if(F)return pt=pt($),F=rt===""?"."+D($,0):rt,O(pt)?(K="",F!=null&&(K=F.replace(Z,"$&/")+"/"),it(pt,R,K,"",function(ot){return ot})):pt!=null&&(nt(pt)&&(pt=dt(pt,K+(pt.key==null||$&&$.key===pt.key?"":(""+pt.key).replace(Z,"$&/")+"/")+F)),R.push(pt)),1;F=0;var j=rt===""?".":rt+":";if(O($))for(var ht=0;ht<$.length;ht++)rt=$[ht],ct=j+D(rt,ht),F+=it(rt,R,K,ct,pt);else if(ht=m($),typeof ht=="function")for($=ht.call($),ht=0;!(rt=$.next()).done;)rt=rt.value,ct=j+D(rt,ht++),F+=it(rt,R,K,ct,pt);else if(ct==="object"){if(typeof $.then=="function")return it(mt($),R,K,rt,pt);throw R=String($),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.")}return F}function st($,R,K){if($==null)return $;var rt=[],pt=0;return it($,rt,"","",function(ct){return R.call(K,ct,pt++)}),rt}function vt($){if($._status===-1){var R=$._result;R=R(),R.then(function(K){($._status===0||$._status===-1)&&($._status=1,$._result=K)},function(K){($._status===0||$._status===-1)&&($._status=2,$._result=K)}),$._status===-1&&($._status=0,$._result=R)}if($._status===1)return $._result.default;throw $._result}var wt=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var R=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(R))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)},Ft={map:st,forEach:function($,R,K){st($,function(){R.apply(this,arguments)},K)},count:function($){var R=0;return st($,function(){R++}),R},toArray:function($){return st($,function(R){return R})||[]},only:function($){if(!nt($))throw Error("React.Children.only expected to receive a single React element child.");return $}};return Ln.Activity=p,Ln.Children=Ft,Ln.Component=v,Ln.Fragment=e,Ln.Profiler=i,Ln.PureComponent=C,Ln.StrictMode=n,Ln.Suspense=c,Ln.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,Ln.__COMPILER_RUNTIME={__proto__:null,c:function($){return H.H.useMemoCache($)}},Ln.cache=function($){return function(){return $.apply(null,arguments)}},Ln.cacheSignal=function(){return null},Ln.cloneElement=function($,R,K){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var rt=b({},$.props),pt=$.key;if(R!=null)for(ct in R.key!==void 0&&(pt=""+R.key),R)!Q.call(R,ct)||ct==="key"||ct==="__self"||ct==="__source"||ct==="ref"&&R.ref===void 0||(rt[ct]=R[ct]);var ct=arguments.length-2;if(ct===1)rt.children=K;else if(1<ct){for(var F=Array(ct),j=0;j<ct;j++)F[j]=arguments[j+2];rt.children=F}return I($.type,pt,rt)},Ln.createContext=function($){return $={$$typeof:l,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:s,_context:$},$},Ln.createElement=function($,R,K){var rt,pt={},ct=null;if(R!=null)for(rt in R.key!==void 0&&(ct=""+R.key),R)Q.call(R,rt)&&rt!=="key"&&rt!=="__self"&&rt!=="__source"&&(pt[rt]=R[rt]);var F=arguments.length-2;if(F===1)pt.children=K;else if(1<F){for(var j=Array(F),ht=0;ht<F;ht++)j[ht]=arguments[ht+2];pt.children=j}if($&&$.defaultProps)for(rt in F=$.defaultProps,F)pt[rt]===void 0&&(pt[rt]=F[rt]);return I($,ct,pt)},Ln.createRef=function(){return{current:null}},Ln.forwardRef=function($){return{$$typeof:o,render:$}},Ln.isValidElement=nt,Ln.lazy=function($){return{$$typeof:f,_payload:{_status:-1,_result:$},_init:vt}},Ln.memo=function($,R){return{$$typeof:h,type:$,compare:R===void 0?null:R}},Ln.startTransition=function($){var R=H.T,K={};H.T=K;try{var rt=$(),pt=H.S;pt!==null&&pt(K,rt),typeof rt=="object"&&rt!==null&&typeof rt.then=="function"&&rt.then(q,wt)}catch(ct){wt(ct)}finally{R!==null&&K.types!==null&&(R.types=K.types),H.T=R}},Ln.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},Ln.use=function($){return H.H.use($)},Ln.useActionState=function($,R,K){return H.H.useActionState($,R,K)},Ln.useCallback=function($,R){return H.H.useCallback($,R)},Ln.useContext=function($){return H.H.useContext($)},Ln.useDebugValue=function(){},Ln.useDeferredValue=function($,R){return H.H.useDeferredValue($,R)},Ln.useEffect=function($,R){return H.H.useEffect($,R)},Ln.useEffectEvent=function($){return H.H.useEffectEvent($)},Ln.useId=function(){return H.H.useId()},Ln.useImperativeHandle=function($,R,K){return H.H.useImperativeHandle($,R,K)},Ln.useInsertionEffect=function($,R){return H.H.useInsertionEffect($,R)},Ln.useLayoutEffect=function($,R){return H.H.useLayoutEffect($,R)},Ln.useMemo=function($,R){return H.H.useMemo($,R)},Ln.useOptimistic=function($,R){return H.H.useOptimistic($,R)},Ln.useReducer=function($,R,K){return H.H.useReducer($,R,K)},Ln.useRef=function($){return H.H.useRef($)},Ln.useState=function($){return H.H.useState($)},Ln.useSyncExternalStore=function($,R,K){return H.H.useSyncExternalStore($,R,K)},Ln.useTransition=function(){return H.H.useTransition()},Ln.version="19.2.4",Ln}var vx;function $b(){return vx||(vx=1,w1.exports=LT()),w1.exports}var Lt=$b();const dm=u3(Lt);var x1={exports:{}},Ed={},_1={exports:{}},A1={};var bx;function OT(){return bx||(bx=1,(function(r){function t(it,st){var vt=it.length;it.push(st);t:for(;0<vt;){var wt=vt-1>>>1,Ft=it[wt];if(0<i(Ft,st))it[wt]=st,it[vt]=Ft,vt=wt;else break t}}function e(it){return it.length===0?null:it[0]}function n(it){if(it.length===0)return null;var st=it[0],vt=it.pop();if(vt!==st){it[0]=vt;t:for(var wt=0,Ft=it.length,$=Ft>>>1;wt<$;){var R=2*(wt+1)-1,K=it[R],rt=R+1,pt=it[rt];if(0>i(K,vt))rt<Ft&&0>i(pt,K)?(it[wt]=pt,it[rt]=vt,wt=rt):(it[wt]=K,it[R]=vt,wt=R);else if(rt<Ft&&0>i(pt,vt))it[wt]=pt,it[rt]=vt,wt=rt;else break t}}return st}function i(it,st){var vt=it.sortIndex-st.sortIndex;return vt!==0?vt:it.id-st.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();r.unstable_now=function(){return l.now()-o}}var c=[],h=[],f=1,p=null,y=3,m=!1,w=!1,b=!1,_=!1,v=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function S(it){for(var st=e(h);st!==null;){if(st.callback===null)n(h);else if(st.startTime<=it)n(h),st.sortIndex=st.expirationTime,t(c,st);else break;st=e(h)}}function O(it){if(b=!1,S(it),!w)if(e(c)!==null)w=!0,q||(q=!0,B());else{var st=e(h);st!==null&&mt(O,st.startTime-it)}}var q=!1,H=-1,Q=5,I=-1;function dt(){return _?!0:!(r.unstable_now()-I<Q)}function nt(){if(_=!1,q){var it=r.unstable_now();I=it;var st=!0;try{t:{w=!1,b&&(b=!1,A(H),H=-1),m=!0;var vt=y;try{e:{for(S(it),p=e(c);p!==null&&!(p.expirationTime>it&&dt());){var wt=p.callback;if(typeof wt=="function"){p.callback=null,y=p.priorityLevel;var Ft=wt(p.expirationTime<=it);if(it=r.unstable_now(),typeof Ft=="function"){p.callback=Ft,S(it),st=!0;break e}p===e(c)&&n(c),S(it)}else n(c);p=e(c)}if(p!==null)st=!0;else{var $=e(h);$!==null&&mt(O,$.startTime-it),st=!1}}break t}finally{p=null,y=vt,m=!1}st=void 0}}finally{st?B():q=!1}}}var B;if(typeof C=="function")B=function(){C(nt)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,D=Z.port2;Z.port1.onmessage=nt,B=function(){D.postMessage(null)}}else B=function(){v(nt,0)};function mt(it,st){H=v(function(){it(r.unstable_now())},st)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(it){it.callback=null},r.unstable_forceFrameRate=function(it){0>it||125<it?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<it?Math.floor(1e3/it):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_next=function(it){switch(y){case 1:case 2:case 3:var st=3;break;default:st=y}var vt=y;y=st;try{return it()}finally{y=vt}},r.unstable_requestPaint=function(){_=!0},r.unstable_runWithPriority=function(it,st){switch(it){case 1:case 2:case 3:case 4:case 5:break;default:it=3}var vt=y;y=it;try{return st()}finally{y=vt}},r.unstable_scheduleCallback=function(it,st,vt){var wt=r.unstable_now();switch(typeof vt=="object"&&vt!==null?(vt=vt.delay,vt=typeof vt=="number"&&0<vt?wt+vt:wt):vt=wt,it){case 1:var Ft=-1;break;case 2:Ft=250;break;case 5:Ft=1073741823;break;case 4:Ft=1e4;break;default:Ft=5e3}return Ft=vt+Ft,it={id:f++,callback:st,priorityLevel:it,startTime:vt,expirationTime:Ft,sortIndex:-1},vt>wt?(it.sortIndex=vt,t(h,it),e(c)===null&&it===e(h)&&(b?(A(H),H=-1):b=!0,mt(O,vt-wt))):(it.sortIndex=Ft,t(c,it),w||m||(w=!0,q||(q=!0,B()))),it},r.unstable_shouldYield=dt,r.unstable_wrapCallback=function(it){var st=y;return function(){var vt=y;y=st;try{return it.apply(this,arguments)}finally{y=vt}}}})(A1)),A1}var wx;function DT(){return wx||(wx=1,_1.exports=OT()),_1.exports}var S1={exports:{}},aa={};var xx;function PT(){if(xx)return aa;xx=1;var r=$b();function t(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(c,h,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:c,containerInfo:h,implementation:f}}var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return aa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,aa.createPortal=function(c,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return s(c,h,null,f)},aa.flushSync=function(c){var h=l.T,f=n.p;try{if(l.T=null,n.p=2,c)return c()}finally{l.T=h,n.p=f,n.d.f()}},aa.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(c,h))},aa.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},aa.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var f=h.as,p=o(f,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,m=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;f==="style"?n.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:m}):f==="script"&&n.d.X(c,{crossOrigin:p,integrity:y,fetchPriority:m,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},aa.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var f=o(h.as,h.crossOrigin);n.d.M(c,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(c)},aa.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var f=h.as,p=o(f,h.crossOrigin);n.d.L(c,f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},aa.preloadModule=function(c,h){if(typeof c=="string")if(h){var f=o(h.as,h.crossOrigin);n.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(c)},aa.requestFormReset=function(c){n.d.r(c)},aa.unstable_batchedUpdates=function(c,h){return c(h)},aa.useFormState=function(c,h,f){return l.H.useFormState(c,h,f)},aa.useFormStatus=function(){return l.H.useHostTransitionStatus()},aa.version="19.2.4",aa}var _x;function c3(){if(_x)return S1.exports;_x=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),S1.exports=PT(),S1.exports}var Ax;function MT(){if(Ax)return Ed;Ax=1;var r=DT(),t=$b(),e=c3();function n(a){var u="https://react.dev/errors/"+a;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var u=a,d=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do u=a,(u.flags&4098)!==0&&(d=u.return),a=u.return;while(a)}return u.tag===3?d:null}function l(a){if(a.tag===13){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function o(a){if(a.tag===31){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function c(a){if(s(a)!==a)throw Error(n(188))}function h(a){var u=a.alternate;if(!u){if(u=s(a),u===null)throw Error(n(188));return u!==a?null:a}for(var d=a,g=u;;){var T=d.return;if(T===null)break;var L=T.alternate;if(L===null){if(g=T.return,g!==null){d=g;continue}break}if(T.child===L.child){for(L=T.child;L;){if(L===d)return c(T),a;if(L===g)return c(T),u;L=L.sibling}throw Error(n(188))}if(d.return!==g.return)d=T,g=L;else{for(var at=!1,St=T.child;St;){if(St===d){at=!0,d=T,g=L;break}if(St===g){at=!0,g=T,d=L;break}St=St.sibling}if(!at){for(St=L.child;St;){if(St===d){at=!0,d=L,g=T;break}if(St===g){at=!0,g=L,d=T;break}St=St.sibling}if(!at)throw Error(n(189))}}if(d.alternate!==g)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?a:u}function f(a){var u=a.tag;if(u===5||u===26||u===27||u===6)return a;for(a=a.child;a!==null;){if(u=f(a),u!==null)return u;a=a.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),C=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),dt=Symbol.for("react.memo_cache_sentinel"),nt=Symbol.iterator;function B(a){return a===null||typeof a!="object"?null:(a=nt&&a[nt]||a["@@iterator"],typeof a=="function"?a:null)}var Z=Symbol.for("react.client.reference");function D(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===Z?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case b:return"Fragment";case v:return"Profiler";case _:return"StrictMode";case O:return"Suspense";case q:return"SuspenseList";case I:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case w:return"Portal";case C:return a.displayName||"Context";case A:return(a._context.displayName||"Context")+".Consumer";case S:var u=a.render;return a=a.displayName,a||(a=u.displayName||u.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case H:return u=a.displayName||null,u!==null?u:D(a.type)||"Memo";case Q:u=a._payload,a=a._init;try{return D(a(u))}catch{}}return null}var mt=Array.isArray,it=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,st=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vt={pending:!1,data:null,method:null,action:null},wt=[],Ft=-1;function $(a){return{current:a}}function R(a){0>Ft||(a.current=wt[Ft],wt[Ft]=null,Ft--)}function K(a,u){Ft++,wt[Ft]=a.current,a.current=u}var rt=$(null),pt=$(null),ct=$(null),F=$(null);function j(a,u){switch(K(ct,u),K(pt,a),K(rt,null),u.nodeType){case 9:case 11:a=(a=u.documentElement)&&(a=a.namespaceURI)?F5(a):0;break;default:if(a=u.tagName,u=u.namespaceURI)u=F5(u),a=B5(u,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}R(rt),K(rt,a)}function ht(){R(rt),R(pt),R(ct)}function ot(a){a.memoizedState!==null&&K(F,a);var u=rt.current,d=B5(u,a.type);u!==d&&(K(pt,a),K(rt,d))}function lt(a){pt.current===a&&(R(rt),R(pt)),F.current===a&&(R(F),wd._currentValue=vt)}var ft,Mt;function W(a){if(ft===void 0)try{throw Error()}catch(d){var u=d.stack.trim().match(/\n( *(at )?)/);ft=u&&u[1]||"",Mt=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ft+a+Mt}var tt=!1;function X(a,u){if(!a||tt)return"";tt=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(he){var ue=he}Reflect.construct(a,[],xe)}else{try{xe.call()}catch(he){ue=he}a.call(xe.prototype)}}else{try{throw Error()}catch(he){ue=he}(xe=a())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(he){if(he&&ue&&typeof he.stack=="string")return[he.stack,ue.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var L=g.DetermineComponentFrameRoot(),at=L[0],St=L[1];if(at&&St){var jt=at.split(`
`),oe=St.split(`
`);for(T=g=0;g<jt.length&&!jt[g].includes("DetermineComponentFrameRoot");)g++;for(;T<oe.length&&!oe[T].includes("DetermineComponentFrameRoot");)T++;if(g===jt.length||T===oe.length)for(g=jt.length-1,T=oe.length-1;1<=g&&0<=T&&jt[g]!==oe[T];)T--;for(;1<=g&&0<=T;g--,T--)if(jt[g]!==oe[T]){if(g!==1||T!==1)do if(g--,T--,0>T||jt[g]!==oe[T]){var ye=`
`+jt[g].replace(" at new "," at ");return a.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",a.displayName)),ye}while(1<=g&&0<=T);break}}}finally{tt=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:"")?W(d):""}function P(a,u){switch(a.tag){case 26:case 27:case 5:return W(a.type);case 16:return W("Lazy");case 13:return a.child!==u&&u!==null?W("Suspense Fallback"):W("Suspense");case 19:return W("SuspenseList");case 0:case 15:return X(a.type,!1);case 11:return X(a.type.render,!1);case 1:return X(a.type,!0);case 31:return W("Activity");default:return""}}function k(a){try{var u="",d=null;do u+=P(a,d),d=a,a=a.return;while(a);return u}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var z=Object.prototype.hasOwnProperty,_t=r.unstable_scheduleCallback,kt=r.unstable_cancelCallback,Ct=r.unstable_shouldYield,$t=r.unstable_requestPaint,le=r.unstable_now,re=r.unstable_getCurrentPriorityLevel,fe=r.unstable_ImmediatePriority,Ce=r.unstable_UserBlockingPriority,De=r.unstable_NormalPriority,Fe=r.unstable_LowPriority,ln=r.unstable_IdlePriority,Ue=r.log,Xn=r.unstable_setDisableYieldValue,Xe=null,rn=null;function sn(a){if(typeof Ue=="function"&&Xn(a),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(Xe,a)}catch{}}var Ee=Math.clz32?Math.clz32:un,Je=Math.log,Gn=Math.LN2;function un(a){return a>>>=0,a===0?32:31-(Je(a)/Gn|0)|0}var ve=256,Jn=262144,gn=4194304;function Ke(a){var u=a&42;if(u!==0)return u;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Vn(a,u,d){var g=a.pendingLanes;if(g===0)return 0;var T=0,L=a.suspendedLanes,at=a.pingedLanes;a=a.warmLanes;var St=g&134217727;return St!==0?(g=St&~L,g!==0?T=Ke(g):(at&=St,at!==0?T=Ke(at):d||(d=St&~a,d!==0&&(T=Ke(d))))):(St=g&~L,St!==0?T=Ke(St):at!==0?T=Ke(at):d||(d=g&~a,d!==0&&(T=Ke(d)))),T===0?0:u!==0&&u!==T&&(u&L)===0&&(L=T&-T,d=u&-u,L>=d||L===32&&(d&4194048)!==0)?u:T}function Ms(a,u){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&u)===0}function $i(a,u){switch(a){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function La(){var a=gn;return gn<<=1,(gn&62914560)===0&&(gn=4194304),a}function Fi(a){for(var u=[],d=0;31>d;d++)u.push(a);return u}function nn(a,u){a.pendingLanes|=u,u!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function fa(a,u,d,g,T,L){var at=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=d,a.entangledLanes&=d,a.errorRecoveryDisabledLanes&=d,a.shellSuspendCounter=0;var St=a.entanglements,jt=a.expirationTimes,oe=a.hiddenUpdates;for(d=at&~d;0<d;){var ye=31-Ee(d),xe=1<<ye;St[ye]=0,jt[ye]=-1;var ue=oe[ye];if(ue!==null)for(oe[ye]=null,ye=0;ye<ue.length;ye++){var he=ue[ye];he!==null&&(he.lane&=-536870913)}d&=~xe}g!==0&&Fs(a,g,0),L!==0&&T===0&&a.tag!==0&&(a.suspendedLanes|=L&~(at&~u))}function Fs(a,u,d){a.pendingLanes|=u,a.suspendedLanes&=~u;var g=31-Ee(u);a.entangledLanes|=u,a.entanglements[g]=a.entanglements[g]|1073741824|d&261930}function Bn(a,u){var d=a.entangledLanes|=u;for(a=a.entanglements;d;){var g=31-Ee(d),T=1<<g;T&u|a[g]&u&&(a[g]|=u),d&=~T}}function sr(a,u){var d=u&-u;return d=(d&42)!==0?1:Or(d),(d&(a.suspendedLanes|u))!==0?0:d}function Or(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function qr(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Jr(){var a=st.p;return a!==0?a:(a=window.event,a===void 0?32:ax(a.type))}function da(a,u){var d=st.p;try{return st.p=a,u()}finally{st.p=d}}var as=Math.random().toString(36).slice(2),Wn="__reactFiber$"+as,dr="__reactProps$"+as,Hr="__reactContainer$"+as,Xi="__reactEvents$"+as,Xs="__reactListeners$"+as,xs="__reactHandles$"+as,Ys="__reactResources$"+as,Bi="__reactMarker$"+as;function no(a){delete a[Wn],delete a[dr],delete a[Xi],delete a[Xs],delete a[xs]}function Bs(a){var u=a[Wn];if(u)return u;for(var d=a.parentNode;d;){if(u=d[Hr]||d[Wn]){if(d=u.alternate,u.child!==null||d!==null&&d.child!==null)for(a=G5(a);a!==null;){if(d=a[Wn])return d;a=G5(a)}return u}a=d,d=a.parentNode}return null}function nr(a){if(a=a[Wn]||a[Hr]){var u=a.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return a}return null}function Is(a){var u=a.tag;if(u===5||u===26||u===27||u===6)return a.stateNode;throw Error(n(33))}function Ai(a){var u=a[Ys];return u||(u=a[Ys]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Xr(a){a[Bi]=!0}var Oa=new Set,Yi={};function js(a,u){pa(a,u),pa(a+"Capture",u)}function pa(a,u){for(Yi[a]=u,a=0;a<u.length;a++)Oa.add(u[a])}var ma=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_l={},Co={};function fu(a){return z.call(Co,a)?!0:z.call(_l,a)?!1:ma.test(a)?Co[a]=!0:(_l[a]=!0,!1)}function vn(a,u,d){if(fu(u))if(d===null)a.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":a.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){a.removeAttribute(u);return}}a.setAttribute(u,""+d)}}function Da(a,u,d){if(d===null)a.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttribute(u,""+d)}}function Qs(a,u,d,g){if(g===null)a.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(d);return}a.setAttributeNS(u,d,""+g)}}function Kn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function ro(a){var u=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function ga(a,u,d){var g=Object.getOwnPropertyDescriptor(a.constructor.prototype,u);if(!a.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var T=g.get,L=g.set;return Object.defineProperty(a,u,{configurable:!0,get:function(){return T.call(this)},set:function(at){d=""+at,L.call(this,at)}}),Object.defineProperty(a,u,{enumerable:g.enumerable}),{getValue:function(){return d},setValue:function(at){d=""+at},stopTracking:function(){a._valueTracker=null,delete a[u]}}}}function io(a){if(!a._valueTracker){var u=ro(a)?"checked":"value";a._valueTracker=ga(a,u,""+a[u])}}function Al(a){if(!a)return!1;var u=a._valueTracker;if(!u)return!0;var d=u.getValue(),g="";return a&&(g=ro(a)?a.checked?"true":"false":a.value),a=g,a!==d?(u.setValue(a),!0):!1}function kn(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Gr=/[\n"\\]/g;function Dr(a){return a.replace(Gr,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function ya(a,u,d,g,T,L,at,St){a.name="",at!=null&&typeof at!="function"&&typeof at!="symbol"&&typeof at!="boolean"?a.type=at:a.removeAttribute("type"),u!=null?at==="number"?(u===0&&a.value===""||a.value!=u)&&(a.value=""+Kn(u)):a.value!==""+Kn(u)&&(a.value=""+Kn(u)):at!=="submit"&&at!=="reset"||a.removeAttribute("value"),u!=null?Ko(a,at,Kn(u)):d!=null?Ko(a,at,Kn(d)):g!=null&&a.removeAttribute("value"),T==null&&L!=null&&(a.defaultChecked=!!L),T!=null&&(a.checked=T&&typeof T!="function"&&typeof T!="symbol"),St!=null&&typeof St!="function"&&typeof St!="symbol"&&typeof St!="boolean"?a.name=""+Kn(St):a.removeAttribute("name")}function Sl(a,u,d,g,T,L,at,St){if(L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(a.type=L),u!=null||d!=null){if(!(L!=="submit"&&L!=="reset"||u!=null)){io(a);return}d=d!=null?""+Kn(d):"",u=u!=null?""+Kn(u):d,St||u===a.value||(a.value=u),a.defaultValue=u}g=g??T,g=typeof g!="function"&&typeof g!="symbol"&&!!g,a.checked=St?a.checked:!!g,a.defaultChecked=!!g,at!=null&&typeof at!="function"&&typeof at!="symbol"&&typeof at!="boolean"&&(a.name=at),io(a)}function Ko(a,u,d){u==="number"&&kn(a.ownerDocument)===a||a.defaultValue===""+d||(a.defaultValue=""+d)}function Si(a,u,d,g){if(a=a.options,u){u={};for(var T=0;T<d.length;T++)u["$"+d[T]]=!0;for(d=0;d<a.length;d++)T=u.hasOwnProperty("$"+a[d].value),a[d].selected!==T&&(a[d].selected=T),T&&g&&(a[d].defaultSelected=!0)}else{for(d=""+Kn(d),u=null,T=0;T<a.length;T++){if(a[T].value===d){a[T].selected=!0,g&&(a[T].defaultSelected=!0);return}u!==null||a[T].disabled||(u=a[T])}u!==null&&(u.selected=!0)}}function El(a,u,d){if(u!=null&&(u=""+Kn(u),u!==a.value&&(a.value=u),d==null)){a.defaultValue!==u&&(a.defaultValue=u);return}a.defaultValue=d!=null?""+Kn(d):""}function To(a,u,d,g){if(u==null){if(g!=null){if(d!=null)throw Error(n(92));if(mt(g)){if(1<g.length)throw Error(n(93));g=g[0]}d=g}d==null&&(d=""),u=d}d=Kn(u),a.defaultValue=d,g=a.textContent,g===d&&g!==""&&g!==null&&(a.value=g),io(a)}function Zs(a,u){if(u){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=u;return}}a.textContent=u}var $o=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zn(a,u,d){var g=u.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?g?a.setProperty(u,""):u==="float"?a.cssFloat="":a[u]="":g?a.setProperty(u,d):typeof d!="number"||d===0||$o.has(u)?u==="float"?a.cssFloat=d:a[u]=(""+d).trim():a[u]=d+"px"}function du(a,u,d){if(u!=null&&typeof u!="object")throw Error(n(62));if(a=a.style,d!=null){for(var g in d)!d.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?a.setProperty(g,""):g==="float"?a.cssFloat="":a[g]="");for(var T in u)g=u[T],u.hasOwnProperty(T)&&d[T]!==g&&zn(a,T,g)}else for(var L in u)u.hasOwnProperty(L)&&zn(a,L,u[L])}function pu(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gi(a){return Qi.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function _s(){}var Zi=null;function No(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var so=null,He=null;function Us(a){var u=nr(a);if(u&&(a=u.stateNode)){var d=a[dr]||null;t:switch(a=u.stateNode,u.type){case"input":if(ya(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),u=d.name,d.type==="radio"&&u!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Dr(""+u)+'"][type="radio"]'),u=0;u<d.length;u++){var g=d[u];if(g!==a&&g.form===a.form){var T=g[dr]||null;if(!T)throw Error(n(90));ya(g,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(u=0;u<d.length;u++)g=d[u],g.form===a.form&&Al(g)}break t;case"textarea":El(a,d.value,d.defaultValue);break t;case"select":u=d.value,u!=null&&Si(a,!!d.multiple,u,!1)}}}var ao=!1;function ko(a,u,d){if(ao)return a(u,d);ao=!0;try{var g=a(u);return g}finally{if(ao=!1,(so!==null||He!==null)&&(Vp(),so&&(u=so,a=He,He=so=null,Us(u),a)))for(u=0;u<a.length;u++)Us(a[u])}}function os(a,u){var d=a.stateNode;if(d===null)return null;var g=d[dr]||null;if(g===null)return null;d=g[u];t:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break t;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(n(231,u,typeof d));return d}var Pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gu=!1;if(Pr)try{var Ji={};Object.defineProperty(Ji,"passive",{get:function(){gu=!0}}),window.addEventListener("test",Ji,Ji),window.removeEventListener("test",Ji,Ji)}catch{gu=!1}var ls=null,Ro=null,Js=null;function Lo(){if(Js)return Js;var a,u=Ro,d=u.length,g,T="value"in ls?ls.value:ls.textContent,L=T.length;for(a=0;a<d&&u[a]===T[a];a++);var at=d-a;for(g=1;g<=at&&u[d-g]===T[L-g];g++);return Js=T.slice(a,1<g?1-g:void 0)}function As(a){var u=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&u===13&&(a=13)):a=u,a===10&&(a=13),32<=a||a===13?a:0}function Xo(){return!0}function Cl(){return!1}function Yr(a){function u(d,g,T,L,at){this._reactName=d,this._targetInst=T,this.type=g,this.nativeEvent=L,this.target=at,this.currentTarget=null;for(var St in a)a.hasOwnProperty(St)&&(d=a[St],this[St]=d?d(L):L[St]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?Xo:Cl,this.isPropagationStopped=Cl,this}return p(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Xo)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Xo)},persist:function(){},isPersistent:Xo}),u}var Pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ta=Yr(Pa),ea=p({},Pa,{view:0,detail:0}),oo=Yr(ea),lo,uo,co,Yo=p({},ea,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hn,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==co&&(co&&a.type==="mousemove"?(lo=a.screenX-co.screenX,uo=a.screenY-co.screenY):uo=lo=0,co=a),lo)},movementY:function(a){return"movementY"in a?a.movementY:uo}}),Qo=Yr(Yo),va=p({},Yo,{dataTransfer:0}),Ma=Yr(va),Zo=p({},ea,{relatedTarget:0}),na=Yr(Zo),Jo=p({},Pa,{animationName:0,elapsedTime:0,pseudoElement:0}),U=Yr(Jo),gt=p({},Pa,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Ot=Yr(gt),qt=p({},Pa,{data:0}),Qt=Yr(qt),ge={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Se={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},je={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $e(a){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(a):(a=je[a])?!!u[a]:!1}function hn(){return $e}var _n=p({},ea,{key:function(a){if(a.key){var u=ge[a.key]||a.key;if(u!=="Unidentified")return u}return a.type==="keypress"?(a=As(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Se[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hn,charCode:function(a){return a.type==="keypress"?As(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?As(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),In=Yr(_n),Mr=p({},Yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qr=Yr(Mr),hr=p({},ea,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hn}),ti=Yr(hr),Tr=p({},Pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),yi=Yr(Tr),ba=p({},Yo,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Ss=Yr(ba),wa=p({},Pa,{newState:0,oldState:0}),Tl=Yr(wa),Nl=[9,13,27,32],ra=Pr&&"CompositionEvent"in window,Es=null;Pr&&"documentMode"in document&&(Es=document.documentMode);var tl=Pr&&"TextEvent"in window&&!Es,xa=Pr&&(!ra||Es&&8<Es&&11>=Es),ai=" ",Oo=!1;function ho(a,u){switch(a){case"keyup":return Nl.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kl(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var _a=!1;function ts(a,u){switch(a){case"compositionend":return kl(u);case"keypress":return u.which!==32?null:(Oo=!0,ai);case"textInput":return a=u.data,a===ai&&Oo?null:a;default:return null}}function fo(a,u){if(_a)return a==="compositionend"||!ra&&ho(a,u)?(a=Lo(),Js=Ro=ls=null,_a=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return xa&&u.locale!=="ko"?null:u.data;default:return null}}var el={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nl(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u==="input"?!!el[a.type]:u==="textarea"}function Cs(a,u,d,g){so?He?He.push(g):He=[g]:so=g,u=Zp(u,"onChange"),0<u.length&&(d=new ta("onChange","change",null,d,g),a.push({event:d,listeners:u}))}var ia=null,po=null;function yu(a){R5(a,0)}function Aa(a){var u=Is(a);if(Al(u))return a}function Sa(a,u){if(a==="change")return u}var Zr=!1;if(Pr){var qn;if(Pr){var zs="oninput"in document;if(!zs){var us=document.createElement("div");us.setAttribute("oninput","return;"),zs=typeof us.oninput=="function"}qn=zs}else qn=!1;Zr=qn&&(!document.documentMode||9<document.documentMode)}function mo(){ia&&(ia.detachEvent("onpropertychange",Do),po=ia=null)}function Do(a){if(a.propertyName==="value"&&Aa(po)){var u=[];Cs(u,po,a,No(a)),ko(yu,u)}}function rl(a,u,d){a==="focusin"?(mo(),ia=u,po=d,ia.attachEvent("onpropertychange",Do)):a==="focusout"&&mo()}function yr(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Aa(po)}function Rl(a,u){if(a==="click")return Aa(u)}function cs(a,u){if(a==="input"||a==="change")return Aa(u)}function Ii(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var Ei=typeof Object.is=="function"?Object.is:Ii;function E(a,u){if(Ei(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var d=Object.keys(a),g=Object.keys(u);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var T=d[g];if(!z.call(u,T)||!Ei(a[T],u[T]))return!1}return!0}function M(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function V(a,u){var d=M(a);a=0;for(var g;d;){if(d.nodeType===3){if(g=a+d.textContent.length,a<=u&&g>=u)return{node:d,offset:u-a};a=g}t:{for(;d;){if(d.nextSibling){d=d.nextSibling;break t}d=d.parentNode}d=void 0}d=M(d)}}function J(a,u){return a&&u?a===u?!0:a&&a.nodeType===3?!1:u&&u.nodeType===3?J(a,u.parentNode):"contains"in a?a.contains(u):a.compareDocumentPosition?!!(a.compareDocumentPosition(u)&16):!1:!1}function ut(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var u=kn(a.document);u instanceof a.HTMLIFrameElement;){try{var d=typeof u.contentWindow.location.href=="string"}catch{d=!1}if(d)a=u.contentWindow;else break;u=kn(a.document)}return u}function bt(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u&&(u==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||u==="textarea"||a.contentEditable==="true")}var Tt=Pr&&"documentMode"in document&&11>=document.documentMode,Rt=null,Vt=null,Yt=null,Ht=!1;function Bt(a,u,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Ht||Rt==null||Rt!==kn(g)||(g=Rt,"selectionStart"in g&&bt(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Yt&&E(Yt,g)||(Yt=g,g=Zp(Vt,"onSelect"),0<g.length&&(u=new ta("onSelect","select",null,u,d),a.push({event:u,listeners:g}),u.target=Rt)))}function It(a,u){var d={};return d[a.toLowerCase()]=u.toLowerCase(),d["Webkit"+a]="webkit"+u,d["Moz"+a]="moz"+u,d}var zt={animationend:It("Animation","AnimationEnd"),animationiteration:It("Animation","AnimationIteration"),animationstart:It("Animation","AnimationStart"),transitionrun:It("Transition","TransitionRun"),transitionstart:It("Transition","TransitionStart"),transitioncancel:It("Transition","TransitionCancel"),transitionend:It("Transition","TransitionEnd")},Ut={},Gt={};Pr&&(Gt=document.createElement("div").style,"AnimationEvent"in window||(delete zt.animationend.animation,delete zt.animationiteration.animation,delete zt.animationstart.animation),"TransitionEvent"in window||delete zt.transitionend.transition);function te(a){if(Ut[a])return Ut[a];if(!zt[a])return a;var u=zt[a],d;for(d in u)if(u.hasOwnProperty(d)&&d in Gt)return Ut[a]=u[d];return a}var ie=te("animationend"),Zt=te("animationiteration"),me=te("animationstart"),Te=te("transitionrun"),Pe=te("transitionstart"),Me=te("transitioncancel"),Ne=te("transitionend"),ze=new Map,Be="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Be.push("scrollEnd");function ke(a,u){ze.set(a,u),js(u,[a])}var qe=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},wn=[],Mn=0,on=0;function An(){for(var a=Mn,u=on=Mn=0;u<a;){var d=wn[u];wn[u++]=null;var g=wn[u];wn[u++]=null;var T=wn[u];wn[u++]=null;var L=wn[u];if(wn[u++]=null,g!==null&&T!==null){var at=g.pending;at===null?T.next=T:(T.next=at.next,at.next=T),g.pending=T}L!==0&&Ea(d,T,L)}}function vr(a,u,d,g){wn[Mn++]=a,wn[Mn++]=u,wn[Mn++]=d,wn[Mn++]=g,on|=g,a.lanes|=g,a=a.alternate,a!==null&&(a.lanes|=g)}function hs(a,u,d,g){return vr(a,u,d,g),Ci(a)}function ar(a,u){return vr(a,null,null,u),Ci(a)}function Ea(a,u,d){a.lanes|=d;var g=a.alternate;g!==null&&(g.lanes|=d);for(var T=!1,L=a.return;L!==null;)L.childLanes|=d,g=L.alternate,g!==null&&(g.childLanes|=d),L.tag===22&&(a=L.stateNode,a===null||a._visibility&1||(T=!0)),a=L,L=L.return;return a.tag===3?(L=a.stateNode,T&&u!==null&&(T=31-Ee(d),a=L.hiddenUpdates,g=a[T],g===null?a[T]=[u]:g.push(u),u.lane=d|536870912),L):null}function Ci(a){if(50<dd)throw dd=0,q0=null,Error(n(185));for(var u=a.return;u!==null;)a=u,u=a.return;return a.tag===3?a.stateNode:null}var fs={};function wh(a,u,d,g){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ts(a,u,d,g){return new wh(a,u,d,g)}function xh(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Fa(a,u){var d=a.alternate;return d===null?(d=Ts(a.tag,u,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=u,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,u=a.dependencies,d.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function Pc(a,u){a.flags&=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=u,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,u=d.dependencies,a.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),a}function Xu(a,u,d,g,T,L){var at=0;if(g=a,typeof a=="function")xh(a)&&(at=1);else if(typeof a=="string")at=yT(a,d,rt.current)?26:a==="html"||a==="head"||a==="body"?27:5;else t:switch(a){case I:return a=Ts(31,d,u,T),a.elementType=I,a.lanes=L,a;case b:return Ll(d.children,T,L,u);case _:at=8,T|=24;break;case v:return a=Ts(12,d,u,T|2),a.elementType=v,a.lanes=L,a;case O:return a=Ts(13,d,u,T),a.elementType=O,a.lanes=L,a;case q:return a=Ts(19,d,u,T),a.elementType=q,a.lanes=L,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case C:at=10;break t;case A:at=9;break t;case S:at=11;break t;case H:at=14;break t;case Q:at=16,g=null;break t}at=29,d=Error(n(130,a===null?"null":typeof a,"")),g=null}return u=Ts(at,d,u,T),u.elementType=a,u.type=g,u.lanes=L,u}function Ll(a,u,d,g){return a=Ts(7,a,g,u),a.lanes=d,a}function Mc(a,u,d){return a=Ts(6,a,null,u),a.lanes=d,a}function _h(a){var u=Ts(18,null,null,0);return u.stateNode=a,u}function Yu(a,u,d){return u=Ts(4,a.children!==null?a.children:[],a.key,u),u.lanes=d,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}var Ah=new WeakMap;function Ba(a,u){if(typeof a=="object"&&a!==null){var d=Ah.get(a);return d!==void 0?d:(u={value:a,source:u,stack:k(u)},Ah.set(a,u),u)}return{value:a,source:u,stack:k(u)}}var Qu=[],vu=0,Sh=null,Fc=0,Ia=[],ja=0,Ol=null,Ua=1,za="";function Ca(a,u){Qu[vu++]=Fc,Qu[vu++]=Sh,Sh=a,Fc=u}function Sp(a,u,d){Ia[ja++]=Ua,Ia[ja++]=za,Ia[ja++]=Ol,Ol=a;var g=Ua;a=za;var T=32-Ee(g)-1;g&=~(1<<T),d+=1;var L=32-Ee(u)+T;if(30<L){var at=T-T%5;L=(g&(1<<at)-1).toString(32),g>>=at,T-=at,Ua=1<<32-Ee(u)+T|d<<T|g,za=L+a}else Ua=1<<L|d<<T|g,za=a}function Wf(a){a.return!==null&&(Ca(a,1),Sp(a,1,0))}function Eh(a){for(;a===Sh;)Sh=Qu[--vu],Qu[vu]=null,Fc=Qu[--vu],Qu[vu]=null;for(;a===Ol;)Ol=Ia[--ja],Ia[ja]=null,za=Ia[--ja],Ia[ja]=null,Ua=Ia[--ja],Ia[ja]=null}function Ep(a,u){Ia[ja++]=Ua,Ia[ja++]=za,Ia[ja++]=Ol,Ua=u.id,za=u.overflow,Ol=a}var ds=null,Vr=null,Yn=!1,qs=null,oi=!1,go=Error(n(519));function Dl(a){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zu(Ba(u,a)),go}function Kf(a){var u=a.stateNode,d=a.type,g=a.memoizedProps;switch(u[Wn]=a,u[dr]=g,d){case"dialog":Zn("cancel",u),Zn("close",u);break;case"iframe":case"object":case"embed":Zn("load",u);break;case"video":case"audio":for(d=0;d<md.length;d++)Zn(md[d],u);break;case"source":Zn("error",u);break;case"img":case"image":case"link":Zn("error",u),Zn("load",u);break;case"details":Zn("toggle",u);break;case"input":Zn("invalid",u),Sl(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Zn("invalid",u);break;case"textarea":Zn("invalid",u),To(u,g.value,g.defaultValue,g.children)}d=g.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||u.textContent===""+d||g.suppressHydrationWarning===!0||P5(u.textContent,d)?(g.popover!=null&&(Zn("beforetoggle",u),Zn("toggle",u)),g.onScroll!=null&&Zn("scroll",u),g.onScrollEnd!=null&&Zn("scrollend",u),g.onClick!=null&&(u.onclick=_s),u=!0):u=!1,u||Dl(a,!0)}function il(a){for(ds=a.return;ds;)switch(ds.tag){case 5:case 31:case 13:oi=!1;return;case 27:case 3:oi=!0;return;default:ds=ds.return}}function ps(a){if(a!==ds)return!1;if(!Yn)return il(a),Yn=!0,!1;var u=a.tag,d;if((d=u!==3&&u!==27)&&((d=u===5)&&(d=a.type,d=!(d!=="form"&&d!=="button")||r1(a.type,a.memoizedProps)),d=!d),d&&Vr&&Dl(a),il(a),u===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));Vr=H5(a)}else if(u===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));Vr=H5(a)}else u===27?(u=Vr,fc(a.type)?(a=l1,l1=null,Vr=a):Vr=u):Vr=ds?Bo(a.stateNode.nextSibling):null;return!0}function bu(){Vr=ds=null,Yn=!1}function $f(){var a=qs;return a!==null&&(Ka===null?Ka=a:Ka.push.apply(Ka,a),qs=null),a}function Zu(a){qs===null?qs=[a]:qs.push(a)}var Ch=$(null),Pl=null,Po=null;function Ml(a,u,d){K(Ch,u._currentValue),u._currentValue=d}function qa(a){a._currentValue=Ch.current,R(Ch)}function Ju(a,u,d){for(;a!==null;){var g=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),a===d)break;a=a.return}}function wu(a,u,d,g){var T=a.child;for(T!==null&&(T.return=a);T!==null;){var L=T.dependencies;if(L!==null){var at=T.child;L=L.firstContext;t:for(;L!==null;){var St=L;L=T;for(var jt=0;jt<u.length;jt++)if(St.context===u[jt]){L.lanes|=d,St=L.alternate,St!==null&&(St.lanes|=d),Ju(L.return,d,a),g||(at=null);break t}L=St.next}}else if(T.tag===18){if(at=T.return,at===null)throw Error(n(341));at.lanes|=d,L=at.alternate,L!==null&&(L.lanes|=d),Ju(at,d,a),at=null}else at=T.child;if(at!==null)at.return=T;else for(at=T;at!==null;){if(at===a){at=null;break}if(T=at.sibling,T!==null){T.return=at.return,at=T;break}at=at.return}T=at}}function Fl(a,u,d,g){a=null;for(var T=u,L=!1;T!==null;){if(!L){if((T.flags&524288)!==0)L=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var at=T.alternate;if(at===null)throw Error(n(387));if(at=at.memoizedProps,at!==null){var St=T.type;Ei(T.pendingProps.value,at.value)||(a!==null?a.push(St):a=[St])}}else if(T===F.current){if(at=T.alternate,at===null)throw Error(n(387));at.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(a!==null?a.push(wd):a=[wd])}T=T.return}a!==null&&wu(u,a,d,g),u.flags|=262144}function Th(a){for(a=a.firstContext;a!==null;){if(!Ei(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Bl(a){Pl=a,Po=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function ms(a){return Cp(Pl,a)}function Nh(a,u){return Pl===null&&Bl(a),Cp(a,u)}function Cp(a,u){var d=u._currentValue;if(u={context:u,memoizedValue:d,next:null},Po===null){if(a===null)throw Error(n(308));Po=u,a.dependencies={lanes:0,firstContext:u},a.flags|=524288}else Po=Po.next=u;return d}var o0=typeof AbortController<"u"?AbortController:function(){var a=[],u=this.signal={aborted:!1,addEventListener:function(d,g){a.push(g)}};this.abort=function(){u.aborted=!0,a.forEach(function(d){return d()})}},l0=r.unstable_scheduleCallback,u0=r.unstable_NormalPriority,vi={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tc(){return{controller:new o0,data:new Map,refCount:0}}function Bc(a){a.refCount--,a.refCount===0&&l0(u0,function(){a.controller.abort()})}var Ic=null,kh=0,x=0,N=null;function G(a,u){if(Ic===null){var d=Ic=[];kh=0,x=$0(),N={status:"pending",value:void 0,then:function(g){d.push(g)}}}return kh++,u.then(et,et),u}function et(){if(--kh===0&&Ic!==null){N!==null&&(N.status="fulfilled");var a=Ic;Ic=null,x=0,N=null;for(var u=0;u<a.length;u++)(0,a[u])()}}function yt(a,u){var d=[],g={status:"pending",value:null,reason:null,then:function(T){d.push(T)}};return a.then(function(){g.status="fulfilled",g.value=u;for(var T=0;T<d.length;T++)(0,d[T])(u)},function(T){for(g.status="rejected",g.reason=T,T=0;T<d.length;T++)(0,d[T])(void 0)}),g}var xt=it.S;it.S=function(a,u){i5=le(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&G(a,u),xt!==null&&xt(a,u)};var At=$(null);function Et(){var a=At.current;return a!==null?a:Kr.pooledCache}function Nt(a,u){u===null?K(At,At.current):K(At,u.pool)}function Pt(){var a=Et();return a===null?null:{parent:vi._currentValue,pool:a}}var Wt=Error(n(460)),se=Error(n(474)),Dt=Error(n(542)),Xt={then:function(){}};function ee(a){return a=a.status,a==="fulfilled"||a==="rejected"}function pe(a,u,d){switch(d=a[d],d===void 0?a.push(u):d!==u&&(u.then(_s,_s),u=d),u.status){case"fulfilled":return u.value;case"rejected":throw a=u.reason,Oe(a),a;default:if(typeof u.status=="string")u.then(_s,_s);else{if(a=Kr,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=u,a.status="pending",a.then(function(g){if(u.status==="pending"){var T=u;T.status="fulfilled",T.value=g}},function(g){if(u.status==="pending"){var T=u;T.status="rejected",T.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw a=u.reason,Oe(a),a}throw de=u,Wt}}function ne(a){try{var u=a._init;return u(a._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(de=d,Wt):d}}var de=null;function be(){if(de===null)throw Error(n(459));var a=de;return de=null,a}function Oe(a){if(a===Wt||a===Dt)throw Error(n(483))}var Ae=null,tn=0;function Ve(a){var u=tn;return tn+=1,Ae===null&&(Ae=[]),pe(Ae,a,u)}function Sn(a,u){u=u.props.ref,a.ref=u!==void 0?u:null}function Ye(a,u){throw u.$$typeof===y?Error(n(525)):(a=Object.prototype.toString.call(u),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a)))}function $n(a){function u(Jt,Kt){if(a){var ae=Jt.deletions;ae===null?(Jt.deletions=[Kt],Jt.flags|=16):ae.push(Kt)}}function d(Jt,Kt){if(!a)return null;for(;Kt!==null;)u(Jt,Kt),Kt=Kt.sibling;return null}function g(Jt){for(var Kt=new Map;Jt!==null;)Jt.key!==null?Kt.set(Jt.key,Jt):Kt.set(Jt.index,Jt),Jt=Jt.sibling;return Kt}function T(Jt,Kt){return Jt=Fa(Jt,Kt),Jt.index=0,Jt.sibling=null,Jt}function L(Jt,Kt,ae){return Jt.index=ae,a?(ae=Jt.alternate,ae!==null?(ae=ae.index,ae<Kt?(Jt.flags|=67108866,Kt):ae):(Jt.flags|=67108866,Kt)):(Jt.flags|=1048576,Kt)}function at(Jt){return a&&Jt.alternate===null&&(Jt.flags|=67108866),Jt}function St(Jt,Kt,ae,we){return Kt===null||Kt.tag!==6?(Kt=Mc(ae,Jt.mode,we),Kt.return=Jt,Kt):(Kt=T(Kt,ae),Kt.return=Jt,Kt)}function jt(Jt,Kt,ae,we){var pn=ae.type;return pn===b?ye(Jt,Kt,ae.props.children,we,ae.key):Kt!==null&&(Kt.elementType===pn||typeof pn=="object"&&pn!==null&&pn.$$typeof===Q&&ne(pn)===Kt.type)?(Kt=T(Kt,ae.props),Sn(Kt,ae),Kt.return=Jt,Kt):(Kt=Xu(ae.type,ae.key,ae.props,null,Jt.mode,we),Sn(Kt,ae),Kt.return=Jt,Kt)}function oe(Jt,Kt,ae,we){return Kt===null||Kt.tag!==4||Kt.stateNode.containerInfo!==ae.containerInfo||Kt.stateNode.implementation!==ae.implementation?(Kt=Yu(ae,Jt.mode,we),Kt.return=Jt,Kt):(Kt=T(Kt,ae.children||[]),Kt.return=Jt,Kt)}function ye(Jt,Kt,ae,we,pn){return Kt===null||Kt.tag!==7?(Kt=Ll(ae,Jt.mode,we,pn),Kt.return=Jt,Kt):(Kt=T(Kt,ae),Kt.return=Jt,Kt)}function xe(Jt,Kt,ae){if(typeof Kt=="string"&&Kt!==""||typeof Kt=="number"||typeof Kt=="bigint")return Kt=Mc(""+Kt,Jt.mode,ae),Kt.return=Jt,Kt;if(typeof Kt=="object"&&Kt!==null){switch(Kt.$$typeof){case m:return ae=Xu(Kt.type,Kt.key,Kt.props,null,Jt.mode,ae),Sn(ae,Kt),ae.return=Jt,ae;case w:return Kt=Yu(Kt,Jt.mode,ae),Kt.return=Jt,Kt;case Q:return Kt=ne(Kt),xe(Jt,Kt,ae)}if(mt(Kt)||B(Kt))return Kt=Ll(Kt,Jt.mode,ae,null),Kt.return=Jt,Kt;if(typeof Kt.then=="function")return xe(Jt,Ve(Kt),ae);if(Kt.$$typeof===C)return xe(Jt,Nh(Jt,Kt),ae);Ye(Jt,Kt)}return null}function ue(Jt,Kt,ae,we){var pn=Kt!==null?Kt.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return pn!==null?null:St(Jt,Kt,""+ae,we);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case m:return ae.key===pn?jt(Jt,Kt,ae,we):null;case w:return ae.key===pn?oe(Jt,Kt,ae,we):null;case Q:return ae=ne(ae),ue(Jt,Kt,ae,we)}if(mt(ae)||B(ae))return pn!==null?null:ye(Jt,Kt,ae,we,null);if(typeof ae.then=="function")return ue(Jt,Kt,Ve(ae),we);if(ae.$$typeof===C)return ue(Jt,Kt,Nh(Jt,ae),we);Ye(Jt,ae)}return null}function he(Jt,Kt,ae,we,pn){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return Jt=Jt.get(ae)||null,St(Kt,Jt,""+we,pn);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case m:return Jt=Jt.get(we.key===null?ae:we.key)||null,jt(Kt,Jt,we,pn);case w:return Jt=Jt.get(we.key===null?ae:we.key)||null,oe(Kt,Jt,we,pn);case Q:return we=ne(we),he(Jt,Kt,ae,we,pn)}if(mt(we)||B(we))return Jt=Jt.get(ae)||null,ye(Kt,Jt,we,pn,null);if(typeof we.then=="function")return he(Jt,Kt,ae,Ve(we),pn);if(we.$$typeof===C)return he(Jt,Kt,ae,Nh(Kt,we),pn);Ye(Kt,we)}return null}function Ze(Jt,Kt,ae,we){for(var pn=null,pr=null,an=Kt,Fn=Kt=0,er=null;an!==null&&Fn<ae.length;Fn++){an.index>Fn?(er=an,an=null):er=an.sibling;var mr=ue(Jt,an,ae[Fn],we);if(mr===null){an===null&&(an=er);break}a&&an&&mr.alternate===null&&u(Jt,an),Kt=L(mr,Kt,Fn),pr===null?pn=mr:pr.sibling=mr,pr=mr,an=er}if(Fn===ae.length)return d(Jt,an),Yn&&Ca(Jt,Fn),pn;if(an===null){for(;Fn<ae.length;Fn++)an=xe(Jt,ae[Fn],we),an!==null&&(Kt=L(an,Kt,Fn),pr===null?pn=an:pr.sibling=an,pr=an);return Yn&&Ca(Jt,Fn),pn}for(an=g(an);Fn<ae.length;Fn++)er=he(an,Jt,Fn,ae[Fn],we),er!==null&&(a&&er.alternate!==null&&an.delete(er.key===null?Fn:er.key),Kt=L(er,Kt,Fn),pr===null?pn=er:pr.sibling=er,pr=er);return a&&an.forEach(function(yc){return u(Jt,yc)}),Yn&&Ca(Jt,Fn),pn}function bn(Jt,Kt,ae,we){if(ae==null)throw Error(n(151));for(var pn=null,pr=null,an=Kt,Fn=Kt=0,er=null,mr=ae.next();an!==null&&!mr.done;Fn++,mr=ae.next()){an.index>Fn?(er=an,an=null):er=an.sibling;var yc=ue(Jt,an,mr.value,we);if(yc===null){an===null&&(an=er);break}a&&an&&yc.alternate===null&&u(Jt,an),Kt=L(yc,Kt,Fn),pr===null?pn=yc:pr.sibling=yc,pr=yc,an=er}if(mr.done)return d(Jt,an),Yn&&Ca(Jt,Fn),pn;if(an===null){for(;!mr.done;Fn++,mr=ae.next())mr=xe(Jt,mr.value,we),mr!==null&&(Kt=L(mr,Kt,Fn),pr===null?pn=mr:pr.sibling=mr,pr=mr);return Yn&&Ca(Jt,Fn),pn}for(an=g(an);!mr.done;Fn++,mr=ae.next())mr=he(an,Jt,Fn,mr.value,we),mr!==null&&(a&&mr.alternate!==null&&an.delete(mr.key===null?Fn:mr.key),Kt=L(mr,Kt,Fn),pr===null?pn=mr:pr.sibling=mr,pr=mr);return a&&an.forEach(function(NT){return u(Jt,NT)}),Yn&&Ca(Jt,Fn),pn}function jr(Jt,Kt,ae,we){if(typeof ae=="object"&&ae!==null&&ae.type===b&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case m:t:{for(var pn=ae.key;Kt!==null;){if(Kt.key===pn){if(pn=ae.type,pn===b){if(Kt.tag===7){d(Jt,Kt.sibling),we=T(Kt,ae.props.children),we.return=Jt,Jt=we;break t}}else if(Kt.elementType===pn||typeof pn=="object"&&pn!==null&&pn.$$typeof===Q&&ne(pn)===Kt.type){d(Jt,Kt.sibling),we=T(Kt,ae.props),Sn(we,ae),we.return=Jt,Jt=we;break t}d(Jt,Kt);break}else u(Jt,Kt);Kt=Kt.sibling}ae.type===b?(we=Ll(ae.props.children,Jt.mode,we,ae.key),we.return=Jt,Jt=we):(we=Xu(ae.type,ae.key,ae.props,null,Jt.mode,we),Sn(we,ae),we.return=Jt,Jt=we)}return at(Jt);case w:t:{for(pn=ae.key;Kt!==null;){if(Kt.key===pn)if(Kt.tag===4&&Kt.stateNode.containerInfo===ae.containerInfo&&Kt.stateNode.implementation===ae.implementation){d(Jt,Kt.sibling),we=T(Kt,ae.children||[]),we.return=Jt,Jt=we;break t}else{d(Jt,Kt);break}else u(Jt,Kt);Kt=Kt.sibling}we=Yu(ae,Jt.mode,we),we.return=Jt,Jt=we}return at(Jt);case Q:return ae=ne(ae),jr(Jt,Kt,ae,we)}if(mt(ae))return Ze(Jt,Kt,ae,we);if(B(ae)){if(pn=B(ae),typeof pn!="function")throw Error(n(150));return ae=pn.call(ae),bn(Jt,Kt,ae,we)}if(typeof ae.then=="function")return jr(Jt,Kt,Ve(ae),we);if(ae.$$typeof===C)return jr(Jt,Kt,Nh(Jt,ae),we);Ye(Jt,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,Kt!==null&&Kt.tag===6?(d(Jt,Kt.sibling),we=T(Kt,ae),we.return=Jt,Jt=we):(d(Jt,Kt),we=Mc(ae,Jt.mode,we),we.return=Jt,Jt=we),at(Jt)):d(Jt,Kt)}return function(Jt,Kt,ae,we){try{tn=0;var pn=jr(Jt,Kt,ae,we);return Ae=null,pn}catch(an){if(an===Wt||an===Dt)throw an;var pr=Ts(29,an,null,Jt.mode);return pr.lanes=we,pr.return=Jt,pr}}}var Wr=$n(!0),Rn=$n(!1),We=!1;function Ie(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ei(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function yn(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Dn(a,u,d){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(xr&2)!==0){var T=g.pending;return T===null?u.next=u:(u.next=T.next,T.next=u),g.pending=u,u=Ci(a),Ea(a,null,d),u}return vr(a,g,u,d),Ci(a)}function br(a,u,d){if(u=u.updateQueue,u!==null&&(u=u.shared,(d&4194048)!==0)){var g=u.lanes;g&=a.pendingLanes,d|=g,u.lanes=d,Bn(a,d)}}function ji(a,u){var d=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var T=null,L=null;if(d=d.firstBaseUpdate,d!==null){do{var at={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};L===null?T=L=at:L=L.next=at,d=d.next}while(d!==null);L===null?T=L=u:L=L.next=u}else T=L=u;d={baseState:g.baseState,firstBaseUpdate:T,lastBaseUpdate:L,shared:g.shared,callbacks:g.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=u}var gs=!1;function Fr(){if(gs){var a=N;if(a!==null)throw a}}function Ti(a,u,d,g){gs=!1;var T=a.updateQueue;We=!1;var L=T.firstBaseUpdate,at=T.lastBaseUpdate,St=T.shared.pending;if(St!==null){T.shared.pending=null;var jt=St,oe=jt.next;jt.next=null,at===null?L=oe:at.next=oe,at=jt;var ye=a.alternate;ye!==null&&(ye=ye.updateQueue,St=ye.lastBaseUpdate,St!==at&&(St===null?ye.firstBaseUpdate=oe:St.next=oe,ye.lastBaseUpdate=jt))}if(L!==null){var xe=T.baseState;at=0,ye=oe=jt=null,St=L;do{var ue=St.lane&-536870913,he=ue!==St.lane;if(he?(tr&ue)===ue:(g&ue)===ue){ue!==0&&ue===x&&(gs=!0),ye!==null&&(ye=ye.next={lane:0,tag:St.tag,payload:St.payload,callback:null,next:null});t:{var Ze=a,bn=St;ue=u;var jr=d;switch(bn.tag){case 1:if(Ze=bn.payload,typeof Ze=="function"){xe=Ze.call(jr,xe,ue);break t}xe=Ze;break t;case 3:Ze.flags=Ze.flags&-65537|128;case 0:if(Ze=bn.payload,ue=typeof Ze=="function"?Ze.call(jr,xe,ue):Ze,ue==null)break t;xe=p({},xe,ue);break t;case 2:We=!0}}ue=St.callback,ue!==null&&(a.flags|=64,he&&(a.flags|=8192),he=T.callbacks,he===null?T.callbacks=[ue]:he.push(ue))}else he={lane:ue,tag:St.tag,payload:St.payload,callback:St.callback,next:null},ye===null?(oe=ye=he,jt=xe):ye=ye.next=he,at|=ue;if(St=St.next,St===null){if(St=T.shared.pending,St===null)break;he=St,St=he.next,he.next=null,T.lastBaseUpdate=he,T.shared.pending=null}}while(!0);ye===null&&(jt=xe),T.baseState=jt,T.firstBaseUpdate=oe,T.lastBaseUpdate=ye,L===null&&(T.shared.lanes=0),oc|=at,a.lanes=at,a.memoizedState=xe}}function Ns(a,u){if(typeof a!="function")throw Error(n(191,a));a.call(u)}function Ni(a,u){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a<d.length;a++)Ns(d[a],u)}var jn=$(null),or=$(0);function ni(a,u){a=Ru,K(or,a),K(jn,u),Ru=a|u.baseLanes}function fr(){K(or,Ru),K(jn,jn.current)}function Ui(){Ru=or.current,R(jn),R(or)}var ri=$(null),lr=null;function bi(a){var u=a.alternate;K(rr,rr.current&1),K(ri,a),lr===null&&(u===null||jn.current!==null||u.memoizedState!==null)&&(lr=a)}function wr(a){K(rr,rr.current),K(ri,a),lr===null&&(lr=a)}function ki(a){a.tag===22?(K(rr,rr.current),K(ri,a),lr===null&&(lr=a)):Ri()}function Ri(){K(rr,rr.current),K(ri,ri.current)}function Nr(a){R(ri),lr===a&&(lr=null),R(rr)}var rr=$(0);function ks(a){for(var u=a;u!==null;){if(u.tag===13){var d=u.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||a1(d)||o1(d)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var li=0,fn=null,dn=null,ur=null,sa=!1,Ha=!1,Hs=!1,Li=0,Il=0,jl=null,Rh=0;function Br(){throw Error(n(321))}function Xf(a,u){if(u===null)return!1;for(var d=0;d<u.length&&d<a.length;d++)if(!Ei(a[d],u[d]))return!1;return!0}function Yf(a,u,d,g,T,L){return li=L,fn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,it.H=a===null||a.memoizedState===null?mw:y0,Hs=!1,L=d(g,T),Hs=!1,Ha&&(L=sl(u,d,g,T)),Lh(a),L}function Lh(a){it.H=id;var u=dn!==null&&dn.next!==null;if(li=0,ur=dn=fn=null,sa=!1,Il=0,jl=null,u)throw Error(n(300));a===null||ns||(a=a.dependencies,a!==null&&Th(a)&&(ns=!0))}function sl(a,u,d,g){fn=a;var T=0;do{if(Ha&&(jl=null),Il=0,Ha=!1,25<=T)throw Error(n(301));if(T+=1,ur=dn=null,a.updateQueue!=null){var L=a.updateQueue;L.lastEffect=null,L.events=null,L.stores=null,L.memoCache!=null&&(L.memoCache.index=0)}it.H=gw,L=u(d,g)}while(Ha);return L}function c0(){var a=it.H,u=a.useState()[0];return u=typeof u.then=="function"?Ul(u):u,a=a.useState()[0],(dn!==null?dn.memoizedState:null)!==a&&(fn.flags|=1024),u}function Qf(){var a=Li!==0;return Li=0,a}function Zf(a,u,d){u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~d}function Oh(a){if(sa){for(a=a.memoizedState;a!==null;){var u=a.queue;u!==null&&(u.pending=null),a=a.next}sa=!1}li=0,ur=dn=fn=null,Ha=!1,Il=Li=0,jl=null}function es(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ur===null?fn.memoizedState=ur=a:ur=ur.next=a,ur}function ui(){if(dn===null){var a=fn.alternate;a=a!==null?a.memoizedState:null}else a=dn.next;var u=ur===null?fn.memoizedState:ur.next;if(u!==null)ur=u,dn=a;else{if(a===null)throw fn.alternate===null?Error(n(467)):Error(n(310));dn=a,a={memoizedState:dn.memoizedState,baseState:dn.baseState,baseQueue:dn.baseQueue,queue:dn.queue,next:null},ur===null?fn.memoizedState=ur=a:ur=ur.next=a}return ur}function jc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(a){var u=Il;return Il+=1,jl===null&&(jl=[]),a=pe(jl,a,u),u=fn,(ur===null?u.memoizedState:ur.next)===null&&(u=u.alternate,it.H=u===null||u.memoizedState===null?mw:y0),a}function ec(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Ul(a);if(a.$$typeof===C)return ms(a)}throw Error(n(438,String(a)))}function xu(a){var u=null,d=fn.updateQueue;if(d!==null&&(u=d.memoCache),u==null){var g=fn.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(T){return T.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),d===null&&(d=jc(),fn.updateQueue=d),d.memoCache=u,d=u.data[u.index],d===void 0)for(d=u.data[u.index]=Array(a),g=0;g<a;g++)d[g]=dt;return u.index++,d}function Mo(a,u){return typeof u=="function"?u(a):u}function Dh(a){var u=ui();return nc(u,dn,a)}function nc(a,u,d){var g=a.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=d;var T=a.baseQueue,L=g.pending;if(L!==null){if(T!==null){var at=T.next;T.next=L.next,L.next=at}u.baseQueue=T=L,g.pending=null}if(L=a.baseState,T===null)a.memoizedState=L;else{u=T.next;var St=at=null,jt=null,oe=u,ye=!1;do{var xe=oe.lane&-536870913;if(xe!==oe.lane?(tr&xe)===xe:(li&xe)===xe){var ue=oe.revertLane;if(ue===0)jt!==null&&(jt=jt.next={lane:0,revertLane:0,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),xe===x&&(ye=!0);else if((li&ue)===ue){oe=oe.next,ue===x&&(ye=!0);continue}else xe={lane:0,revertLane:oe.revertLane,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},jt===null?(St=jt=xe,at=L):jt=jt.next=xe,fn.lanes|=ue,oc|=ue;xe=oe.action,Hs&&d(L,xe),L=oe.hasEagerState?oe.eagerState:d(L,xe)}else ue={lane:xe,revertLane:oe.revertLane,gesture:oe.gesture,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},jt===null?(St=jt=ue,at=L):jt=jt.next=ue,fn.lanes|=xe,oc|=xe;oe=oe.next}while(oe!==null&&oe!==u);if(jt===null?at=L:jt.next=St,!Ei(L,a.memoizedState)&&(ns=!0,ye&&(d=N,d!==null)))throw d;a.memoizedState=L,a.baseState=at,a.baseQueue=jt,g.lastRenderedState=L}return T===null&&(g.lanes=0),[a.memoizedState,g.dispatch]}function Ph(a){var u=ui(),d=u.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=a;var g=d.dispatch,T=d.pending,L=u.memoizedState;if(T!==null){d.pending=null;var at=T=T.next;do L=a(L,at.action),at=at.next;while(at!==T);Ei(L,u.memoizedState)||(ns=!0),u.memoizedState=L,u.baseQueue===null&&(u.baseState=L),d.lastRenderedState=L}return[L,g]}function Mh(a,u,d){var g=fn,T=ui(),L=Yn;if(L){if(d===void 0)throw Error(n(407));d=d()}else d=u();var at=!Ei((dn||T).memoizedState,d);if(at&&(T.memoizedState=d,ns=!0),T=T.queue,h0(td.bind(null,g,T,a),[a]),T.getSnapshot!==u||at||ur!==null&&ur.memoizedState.tag&1){if(g.flags|=2048,Au(9,{destroy:void 0},Jf.bind(null,g,T,d,u),null),Kr===null)throw Error(n(349));L||(li&127)!==0||al(g,u,d)}return d}function al(a,u,d){a.flags|=16384,a={getSnapshot:u,value:d},u=fn.updateQueue,u===null?(u=jc(),fn.updateQueue=u,u.stores=[a]):(d=u.stores,d===null?u.stores=[a]:d.push(a))}function Jf(a,u,d,g){u.value=d,u.getSnapshot=g,Tp(u)&&ed(a)}function td(a,u,d){return d(function(){Tp(u)&&ed(a)})}function Tp(a){var u=a.getSnapshot;a=a.value;try{var d=u();return!Ei(a,d)}catch{return!0}}function ed(a){var u=ar(a,2);u!==null&&$a(u,a,2)}function zl(a){var u=es();if(typeof a=="function"){var d=a;if(a=d(),Hs){sn(!0);try{d()}finally{sn(!1)}}}return u.memoizedState=u.baseState=a,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:a},u}function Np(a,u,d,g){return a.baseState=d,nc(a,dn,typeof g=="function"?g:Mo)}function kp(a,u,d,g,T){if(Dp(a))throw Error(n(485));if(a=u.action,a!==null){var L={payload:T,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(at){L.listeners.push(at)}};it.T!==null?d(!0):L.isTransition=!1,g(L),d=u.pending,d===null?(L.next=u.pending=L,Rp(u,L)):(L.next=d.next,u.pending=d.next=L)}}function Rp(a,u){var d=u.action,g=u.payload,T=a.state;if(u.isTransition){var L=it.T,at={};it.T=at;try{var St=d(T,g),jt=it.S;jt!==null&&jt(at,St),nd(a,u,St)}catch(oe){_u(a,u,oe)}finally{L!==null&&at.types!==null&&(L.types=at.types),it.T=L}}else try{L=d(T,g),nd(a,u,L)}catch(oe){_u(a,u,oe)}}function nd(a,u,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(g){Lp(a,u,g)},function(g){return _u(a,u,g)}):Lp(a,u,d)}function Lp(a,u,d){u.status="fulfilled",u.value=d,Fh(u),a.state=d,u=a.pending,u!==null&&(d=u.next,d===u?a.pending=null:(d=d.next,u.next=d,Rp(a,d)))}function _u(a,u,d){var g=a.pending;if(a.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=d,Fh(u),u=u.next;while(u!==g)}a.action=null}function Fh(a){a=a.listeners;for(var u=0;u<a.length;u++)(0,a[u])()}function Uc(a,u){return u}function Fo(a,u){if(Yn){var d=Kr.formState;if(d!==null){t:{var g=fn;if(Yn){if(Vr){e:{for(var T=Vr,L=oi;T.nodeType!==8;){if(!L){T=null;break e}if(T=Bo(T.nextSibling),T===null){T=null;break e}}L=T.data,T=L==="F!"||L==="F"?T:null}if(T){Vr=Bo(T.nextSibling),g=T.data==="F!";break t}}Dl(g)}g=!1}g&&(u=d[0])}}return d=es(),d.memoizedState=d.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uc,lastRenderedState:u},d.queue=g,d=fw.bind(null,fn,g),g.dispatch=d,g=zl(!1),L=g0.bind(null,fn,!1,g.queue),g=es(),T={state:u,dispatch:null,action:a,pending:null},g.queue=T,d=kp.bind(null,fn,T,L,d),T.dispatch=d,g.memoizedState=a,[u,d,!1]}function ol(a){var u=ui();return ll(u,dn,a)}function ll(a,u,d){if(u=nc(a,u,Uc)[0],a=Dh(Mo)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var g=Ul(u)}catch(at){throw at===Wt?Dt:at}else g=u;u=ui();var T=u.queue,L=T.dispatch;return d!==u.memoizedState&&(fn.flags|=2048,Au(9,{destroy:void 0},Bh.bind(null,T,d),null)),[g,L,a]}function Bh(a,u){a.action=u}function Ih(a){var u=ui(),d=dn;if(d!==null)return ll(u,d,a);ui(),u=u.memoizedState,d=ui();var g=d.queue.dispatch;return d.memoizedState=a,[u,g,!1]}function Au(a,u,d,g){return a={tag:a,create:d,deps:g,inst:u,next:null},u=fn.updateQueue,u===null&&(u=jc(),fn.updateQueue=u),d=u.lastEffect,d===null?u.lastEffect=a.next=a:(g=d.next,d.next=a,a.next=g,u.lastEffect=a),a}function Op(){return ui().memoizedState}function rc(a,u,d,g){var T=es();fn.flags|=a,T.memoizedState=Au(1|u,{destroy:void 0},d,g===void 0?null:g)}function ic(a,u,d,g){var T=ui();g=g===void 0?null:g;var L=T.memoizedState.inst;dn!==null&&g!==null&&Xf(g,dn.memoizedState.deps)?T.memoizedState=Au(u,L,d,g):(fn.flags|=a,T.memoizedState=Au(1|u,L,d,g))}function Z2(a,u){rc(8390656,8,a,u)}function h0(a,u){ic(2048,8,a,u)}function _C(a){fn.flags|=4;var u=fn.updateQueue;if(u===null)u=jc(),fn.updateQueue=u,u.events=[a];else{var d=u.events;d===null?u.events=[a]:d.push(a)}}function J2(a){var u=ui().memoizedState;return _C({ref:u,nextImpl:a}),function(){if((xr&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function tw(a,u){return ic(4,2,a,u)}function ew(a,u){return ic(4,4,a,u)}function nw(a,u){if(typeof u=="function"){a=a();var d=u(a);return function(){typeof d=="function"?d():u(null)}}if(u!=null)return a=a(),u.current=a,function(){u.current=null}}function rw(a,u,d){d=d!=null?d.concat([a]):null,ic(4,4,nw.bind(null,u,a),d)}function f0(){}function iw(a,u){var d=ui();u=u===void 0?null:u;var g=d.memoizedState;return u!==null&&Xf(u,g[1])?g[0]:(d.memoizedState=[a,u],a)}function sw(a,u){var d=ui();u=u===void 0?null:u;var g=d.memoizedState;if(u!==null&&Xf(u,g[1]))return g[0];if(g=a(),Hs){sn(!0);try{a()}finally{sn(!1)}}return d.memoizedState=[g,u],g}function d0(a,u,d){return d===void 0||(li&1073741824)!==0&&(tr&261930)===0?a.memoizedState=u:(a.memoizedState=d,a=a5(),fn.lanes|=a,oc|=a,d)}function aw(a,u,d,g){return Ei(d,u)?d:jn.current!==null?(a=d0(a,d,g),Ei(a,u)||(ns=!0),a):(li&42)===0||(li&1073741824)!==0&&(tr&261930)===0?(ns=!0,a.memoizedState=d):(a=a5(),fn.lanes|=a,oc|=a,u)}function ow(a,u,d,g,T){var L=st.p;st.p=L!==0&&8>L?L:8;var at=it.T,St={};it.T=St,g0(a,!1,u,d);try{var jt=T(),oe=it.S;if(oe!==null&&oe(St,jt),jt!==null&&typeof jt=="object"&&typeof jt.then=="function"){var ye=yt(jt,g);rd(a,u,ye,bo(a))}else rd(a,u,g,bo(a))}catch(xe){rd(a,u,{then:function(){},status:"rejected",reason:xe},bo())}finally{st.p=L,at!==null&&St.types!==null&&(at.types=St.types),it.T=at}}function AC(){}function p0(a,u,d,g){if(a.tag!==5)throw Error(n(476));var T=lw(a).queue;ow(a,T,u,vt,d===null?AC:function(){return uw(a),d(g)})}function lw(a){var u=a.memoizedState;if(u!==null)return u;u={memoizedState:vt,baseState:vt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:vt},next:null};var d={};return u.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:d},next:null},a.memoizedState=u,a=a.alternate,a!==null&&(a.memoizedState=u),u}function uw(a){var u=lw(a);u.next===null&&(u=a.alternate.memoizedState),rd(a,u.next.queue,{},bo())}function m0(){return ms(wd)}function cw(){return ui().memoizedState}function hw(){return ui().memoizedState}function SC(a){for(var u=a.return;u!==null;){switch(u.tag){case 24:case 3:var d=bo();a=yn(d);var g=Dn(u,a,d);g!==null&&($a(g,u,d),br(g,u,d)),u={cache:tc()},a.payload=u;return}u=u.return}}function EC(a,u,d){var g=bo();d={lane:g,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Dp(a)?dw(u,d):(d=hs(a,u,d,g),d!==null&&($a(d,a,g),pw(d,u,g)))}function fw(a,u,d){var g=bo();rd(a,u,d,g)}function rd(a,u,d,g){var T={lane:g,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(Dp(a))dw(u,T);else{var L=a.alternate;if(a.lanes===0&&(L===null||L.lanes===0)&&(L=u.lastRenderedReducer,L!==null))try{var at=u.lastRenderedState,St=L(at,d);if(T.hasEagerState=!0,T.eagerState=St,Ei(St,at))return vr(a,u,T,0),Kr===null&&An(),!1}catch{}if(d=hs(a,u,T,g),d!==null)return $a(d,a,g),pw(d,u,g),!0}return!1}function g0(a,u,d,g){if(g={lane:2,revertLane:$0(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Dp(a)){if(u)throw Error(n(479))}else u=hs(a,d,g,2),u!==null&&$a(u,a,2)}function Dp(a){var u=a.alternate;return a===fn||u!==null&&u===fn}function dw(a,u){Ha=sa=!0;var d=a.pending;d===null?u.next=u:(u.next=d.next,d.next=u),a.pending=u}function pw(a,u,d){if((d&4194048)!==0){var g=u.lanes;g&=a.pendingLanes,d|=g,u.lanes=d,Bn(a,d)}}var id={readContext:ms,use:ec,useCallback:Br,useContext:Br,useEffect:Br,useImperativeHandle:Br,useLayoutEffect:Br,useInsertionEffect:Br,useMemo:Br,useReducer:Br,useRef:Br,useState:Br,useDebugValue:Br,useDeferredValue:Br,useTransition:Br,useSyncExternalStore:Br,useId:Br,useHostTransitionStatus:Br,useFormState:Br,useActionState:Br,useOptimistic:Br,useMemoCache:Br,useCacheRefresh:Br};id.useEffectEvent=Br;var mw={readContext:ms,use:ec,useCallback:function(a,u){return es().memoizedState=[a,u===void 0?null:u],a},useContext:ms,useEffect:Z2,useImperativeHandle:function(a,u,d){d=d!=null?d.concat([a]):null,rc(4194308,4,nw.bind(null,u,a),d)},useLayoutEffect:function(a,u){return rc(4194308,4,a,u)},useInsertionEffect:function(a,u){rc(4,2,a,u)},useMemo:function(a,u){var d=es();u=u===void 0?null:u;var g=a();if(Hs){sn(!0);try{a()}finally{sn(!1)}}return d.memoizedState=[g,u],g},useReducer:function(a,u,d){var g=es();if(d!==void 0){var T=d(u);if(Hs){sn(!0);try{d(u)}finally{sn(!1)}}}else T=u;return g.memoizedState=g.baseState=T,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:T},g.queue=a,a=a.dispatch=EC.bind(null,fn,a),[g.memoizedState,a]},useRef:function(a){var u=es();return a={current:a},u.memoizedState=a},useState:function(a){a=zl(a);var u=a.queue,d=fw.bind(null,fn,u);return u.dispatch=d,[a.memoizedState,d]},useDebugValue:f0,useDeferredValue:function(a,u){var d=es();return d0(d,a,u)},useTransition:function(){var a=zl(!1);return a=ow.bind(null,fn,a.queue,!0,!1),es().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,u,d){var g=fn,T=es();if(Yn){if(d===void 0)throw Error(n(407));d=d()}else{if(d=u(),Kr===null)throw Error(n(349));(tr&127)!==0||al(g,u,d)}T.memoizedState=d;var L={value:d,getSnapshot:u};return T.queue=L,Z2(td.bind(null,g,L,a),[a]),g.flags|=2048,Au(9,{destroy:void 0},Jf.bind(null,g,L,d,u),null),d},useId:function(){var a=es(),u=Kr.identifierPrefix;if(Yn){var d=za,g=Ua;d=(g&~(1<<32-Ee(g)-1)).toString(32)+d,u="_"+u+"R_"+d,d=Li++,0<d&&(u+="H"+d.toString(32)),u+="_"}else d=Rh++,u="_"+u+"r_"+d.toString(32)+"_";return a.memoizedState=u},useHostTransitionStatus:m0,useFormState:Fo,useActionState:Fo,useOptimistic:function(a){var u=es();u.memoizedState=u.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=d,u=g0.bind(null,fn,!0,d),d.dispatch=u,[a,u]},useMemoCache:xu,useCacheRefresh:function(){return es().memoizedState=SC.bind(null,fn)},useEffectEvent:function(a){var u=es(),d={impl:a};return u.memoizedState=d,function(){if((xr&2)!==0)throw Error(n(440));return d.impl.apply(void 0,arguments)}}},y0={readContext:ms,use:ec,useCallback:iw,useContext:ms,useEffect:h0,useImperativeHandle:rw,useInsertionEffect:tw,useLayoutEffect:ew,useMemo:sw,useReducer:Dh,useRef:Op,useState:function(){return Dh(Mo)},useDebugValue:f0,useDeferredValue:function(a,u){var d=ui();return aw(d,dn.memoizedState,a,u)},useTransition:function(){var a=Dh(Mo)[0],u=ui().memoizedState;return[typeof a=="boolean"?a:Ul(a),u]},useSyncExternalStore:Mh,useId:cw,useHostTransitionStatus:m0,useFormState:ol,useActionState:ol,useOptimistic:function(a,u){var d=ui();return Np(d,dn,a,u)},useMemoCache:xu,useCacheRefresh:hw};y0.useEffectEvent=J2;var gw={readContext:ms,use:ec,useCallback:iw,useContext:ms,useEffect:h0,useImperativeHandle:rw,useInsertionEffect:tw,useLayoutEffect:ew,useMemo:sw,useReducer:Ph,useRef:Op,useState:function(){return Ph(Mo)},useDebugValue:f0,useDeferredValue:function(a,u){var d=ui();return dn===null?d0(d,a,u):aw(d,dn.memoizedState,a,u)},useTransition:function(){var a=Ph(Mo)[0],u=ui().memoizedState;return[typeof a=="boolean"?a:Ul(a),u]},useSyncExternalStore:Mh,useId:cw,useHostTransitionStatus:m0,useFormState:Ih,useActionState:Ih,useOptimistic:function(a,u){var d=ui();return dn!==null?Np(d,dn,a,u):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:xu,useCacheRefresh:hw};gw.useEffectEvent=J2;function v0(a,u,d,g){u=a.memoizedState,d=d(g,u),d=d==null?u:p({},u,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var b0={enqueueSetState:function(a,u,d){a=a._reactInternals;var g=bo(),T=yn(g);T.payload=u,d!=null&&(T.callback=d),u=Dn(a,T,g),u!==null&&($a(u,a,g),br(u,a,g))},enqueueReplaceState:function(a,u,d){a=a._reactInternals;var g=bo(),T=yn(g);T.tag=1,T.payload=u,d!=null&&(T.callback=d),u=Dn(a,T,g),u!==null&&($a(u,a,g),br(u,a,g))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var d=bo(),g=yn(d);g.tag=2,u!=null&&(g.callback=u),u=Dn(a,g,d),u!==null&&($a(u,a,d),br(u,a,d))}};function yw(a,u,d,g,T,L,at){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,L,at):u.prototype&&u.prototype.isPureReactComponent?!E(d,g)||!E(T,L):!0}function vw(a,u,d,g){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(d,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(d,g),u.state!==a&&b0.enqueueReplaceState(u,u.state,null)}function zc(a,u){var d=u;if("ref"in u){d={};for(var g in u)g!=="ref"&&(d[g]=u[g])}if(a=a.defaultProps){d===u&&(d=p({},d));for(var T in a)d[T]===void 0&&(d[T]=a[T])}return d}function bw(a){qe(a)}function ww(a){console.error(a)}function xw(a){qe(a)}function Pp(a,u){try{var d=a.onUncaughtError;d(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function _w(a,u,d){try{var g=a.onCaughtError;g(d.value,{componentStack:d.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function w0(a,u,d){return d=yn(d),d.tag=3,d.payload={element:null},d.callback=function(){Pp(a,u)},d}function Aw(a){return a=yn(a),a.tag=3,a}function Sw(a,u,d,g){var T=d.type.getDerivedStateFromError;if(typeof T=="function"){var L=g.value;a.payload=function(){return T(L)},a.callback=function(){_w(u,d,g)}}var at=d.stateNode;at!==null&&typeof at.componentDidCatch=="function"&&(a.callback=function(){_w(u,d,g),typeof T!="function"&&(lc===null?lc=new Set([this]):lc.add(this));var St=g.stack;this.componentDidCatch(g.value,{componentStack:St!==null?St:""})})}function CC(a,u,d,g,T){if(d.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=d.alternate,u!==null&&Fl(u,d,T,!0),d=ri.current,d!==null){switch(d.tag){case 31:case 13:return lr===null?Wp():d.alternate===null&&Oi===0&&(Oi=3),d.flags&=-257,d.flags|=65536,d.lanes=T,g===Xt?d.flags|=16384:(u=d.updateQueue,u===null?d.updateQueue=new Set([g]):u.add(g),V0(a,g,T)),!1;case 22:return d.flags|=65536,g===Xt?d.flags|=16384:(u=d.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},d.updateQueue=u):(d=u.retryQueue,d===null?u.retryQueue=new Set([g]):d.add(g)),V0(a,g,T)),!1}throw Error(n(435,d.tag))}return V0(a,g,T),Wp(),!1}if(Yn)return u=ri.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=T,g!==go&&(a=Error(n(422),{cause:g}),Zu(Ba(a,d)))):(g!==go&&(u=Error(n(423),{cause:g}),Zu(Ba(u,d))),a=a.current.alternate,a.flags|=65536,T&=-T,a.lanes|=T,g=Ba(g,d),T=w0(a.stateNode,g,T),ji(a,T),Oi!==4&&(Oi=2)),!1;var L=Error(n(520),{cause:g});if(L=Ba(L,d),fd===null?fd=[L]:fd.push(L),Oi!==4&&(Oi=2),u===null)return!0;g=Ba(g,d),d=u;do{switch(d.tag){case 3:return d.flags|=65536,a=T&-T,d.lanes|=a,a=w0(d.stateNode,g,a),ji(d,a),!1;case 1:if(u=d.type,L=d.stateNode,(d.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(lc===null||!lc.has(L))))return d.flags|=65536,T&=-T,d.lanes|=T,T=Aw(T),Sw(T,a,d,g),ji(d,T),!1}d=d.return}while(d!==null);return!1}var x0=Error(n(461)),ns=!1;function Gs(a,u,d,g){u.child=a===null?Rn(u,null,d,g):Wr(u,a.child,d,g)}function Ew(a,u,d,g,T){d=d.render;var L=u.ref;if("ref"in g){var at={};for(var St in g)St!=="ref"&&(at[St]=g[St])}else at=g;return Bl(u),g=Yf(a,u,d,at,L,T),St=Qf(),a!==null&&!ns?(Zf(a,u,T),Su(a,u,T)):(Yn&&St&&Wf(u),u.flags|=1,Gs(a,u,g,T),u.child)}function Cw(a,u,d,g,T){if(a===null){var L=d.type;return typeof L=="function"&&!xh(L)&&L.defaultProps===void 0&&d.compare===null?(u.tag=15,u.type=L,Tw(a,u,L,g,T)):(a=Xu(d.type,null,g,u,u.mode,T),a.ref=u.ref,a.return=u,u.child=a)}if(L=a.child,!k0(a,T)){var at=L.memoizedProps;if(d=d.compare,d=d!==null?d:E,d(at,g)&&a.ref===u.ref)return Su(a,u,T)}return u.flags|=1,a=Fa(L,g),a.ref=u.ref,a.return=u,u.child=a}function Tw(a,u,d,g,T){if(a!==null){var L=a.memoizedProps;if(E(L,g)&&a.ref===u.ref)if(ns=!1,u.pendingProps=g=L,k0(a,T))(a.flags&131072)!==0&&(ns=!0);else return u.lanes=a.lanes,Su(a,u,T)}return _0(a,u,d,g,T)}function Nw(a,u,d,g){var T=g.children,L=a!==null?a.memoizedState:null;if(a===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((u.flags&128)!==0){if(L=L!==null?L.baseLanes|d:d,a!==null){for(g=u.child=a.child,T=0;g!==null;)T=T|g.lanes|g.childLanes,g=g.sibling;g=T&~L}else g=0,u.child=null;return kw(a,u,L,d,g)}if((d&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},a!==null&&Nt(u,L!==null?L.cachePool:null),L!==null?ni(u,L):fr(),ki(u);else return g=u.lanes=536870912,kw(a,u,L!==null?L.baseLanes|d:d,d,g)}else L!==null?(Nt(u,L.cachePool),ni(u,L),Ri(),u.memoizedState=null):(a!==null&&Nt(u,null),fr(),Ri());return Gs(a,u,T,d),u.child}function sd(a,u){return a!==null&&a.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function kw(a,u,d,g,T){var L=Et();return L=L===null?null:{parent:vi._currentValue,pool:L},u.memoizedState={baseLanes:d,cachePool:L},a!==null&&Nt(u,null),fr(),ki(u),a!==null&&Fl(a,u,g,!0),u.childLanes=T,null}function Mp(a,u){return u=Bp({mode:u.mode,children:u.children},a.mode),u.ref=a.ref,a.child=u,u.return=a,u}function Rw(a,u,d){return Wr(u,a.child,null,d),a=Mp(u,u.pendingProps),a.flags|=2,Nr(u),u.memoizedState=null,a}function TC(a,u,d){var g=u.pendingProps,T=(u.flags&128)!==0;if(u.flags&=-129,a===null){if(Yn){if(g.mode==="hidden")return a=Mp(u,g),u.lanes=536870912,sd(null,a);if(wr(u),(a=Vr)?(a=q5(a,oi),a=a!==null&&a.data==="&"?a:null,a!==null&&(u.memoizedState={dehydrated:a,treeContext:Ol!==null?{id:Ua,overflow:za}:null,retryLane:536870912,hydrationErrors:null},d=_h(a),d.return=u,u.child=d,ds=u,Vr=null)):a=null,a===null)throw Dl(u);return u.lanes=536870912,null}return Mp(u,g)}var L=a.memoizedState;if(L!==null){var at=L.dehydrated;if(wr(u),T)if(u.flags&256)u.flags&=-257,u=Rw(a,u,d);else if(u.memoizedState!==null)u.child=a.child,u.flags|=128,u=null;else throw Error(n(558));else if(ns||Fl(a,u,d,!1),T=(d&a.childLanes)!==0,ns||T){if(g=Kr,g!==null&&(at=sr(g,d),at!==0&&at!==L.retryLane))throw L.retryLane=at,ar(a,at),$a(g,a,at),x0;Wp(),u=Rw(a,u,d)}else a=L.treeContext,Vr=Bo(at.nextSibling),ds=u,Yn=!0,qs=null,oi=!1,a!==null&&Ep(u,a),u=Mp(u,g),u.flags|=4096;return u}return a=Fa(a.child,{mode:g.mode,children:g.children}),a.ref=u.ref,u.child=a,a.return=u,a}function Fp(a,u){var d=u.ref;if(d===null)a!==null&&a.ref!==null&&(u.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(n(284));(a===null||a.ref!==d)&&(u.flags|=4194816)}}function _0(a,u,d,g,T){return Bl(u),d=Yf(a,u,d,g,void 0,T),g=Qf(),a!==null&&!ns?(Zf(a,u,T),Su(a,u,T)):(Yn&&g&&Wf(u),u.flags|=1,Gs(a,u,d,T),u.child)}function Lw(a,u,d,g,T,L){return Bl(u),u.updateQueue=null,d=sl(u,g,d,T),Lh(a),g=Qf(),a!==null&&!ns?(Zf(a,u,L),Su(a,u,L)):(Yn&&g&&Wf(u),u.flags|=1,Gs(a,u,d,L),u.child)}function Ow(a,u,d,g,T){if(Bl(u),u.stateNode===null){var L=fs,at=d.contextType;typeof at=="object"&&at!==null&&(L=ms(at)),L=new d(g,L),u.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,L.updater=b0,u.stateNode=L,L._reactInternals=u,L=u.stateNode,L.props=g,L.state=u.memoizedState,L.refs={},Ie(u),at=d.contextType,L.context=typeof at=="object"&&at!==null?ms(at):fs,L.state=u.memoizedState,at=d.getDerivedStateFromProps,typeof at=="function"&&(v0(u,d,at,g),L.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(at=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),at!==L.state&&b0.enqueueReplaceState(L,L.state,null),Ti(u,g,L,T),Fr(),L.state=u.memoizedState),typeof L.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(a===null){L=u.stateNode;var St=u.memoizedProps,jt=zc(d,St);L.props=jt;var oe=L.context,ye=d.contextType;at=fs,typeof ye=="object"&&ye!==null&&(at=ms(ye));var xe=d.getDerivedStateFromProps;ye=typeof xe=="function"||typeof L.getSnapshotBeforeUpdate=="function",St=u.pendingProps!==St,ye||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(St||oe!==at)&&vw(u,L,g,at),We=!1;var ue=u.memoizedState;L.state=ue,Ti(u,g,L,T),Fr(),oe=u.memoizedState,St||ue!==oe||We?(typeof xe=="function"&&(v0(u,d,xe,g),oe=u.memoizedState),(jt=We||yw(u,d,jt,g,ue,oe,at))?(ye||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(u.flags|=4194308)):(typeof L.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=oe),L.props=g,L.state=oe,L.context=at,g=jt):(typeof L.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{L=u.stateNode,ei(a,u),at=u.memoizedProps,ye=zc(d,at),L.props=ye,xe=u.pendingProps,ue=L.context,oe=d.contextType,jt=fs,typeof oe=="object"&&oe!==null&&(jt=ms(oe)),St=d.getDerivedStateFromProps,(oe=typeof St=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(at!==xe||ue!==jt)&&vw(u,L,g,jt),We=!1,ue=u.memoizedState,L.state=ue,Ti(u,g,L,T),Fr();var he=u.memoizedState;at!==xe||ue!==he||We||a!==null&&a.dependencies!==null&&Th(a.dependencies)?(typeof St=="function"&&(v0(u,d,St,g),he=u.memoizedState),(ye=We||yw(u,d,ye,g,ue,he,jt)||a!==null&&a.dependencies!==null&&Th(a.dependencies))?(oe||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(g,he,jt),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(g,he,jt)),typeof L.componentDidUpdate=="function"&&(u.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof L.componentDidUpdate!="function"||at===a.memoizedProps&&ue===a.memoizedState||(u.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||at===a.memoizedProps&&ue===a.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=he),L.props=g,L.state=he,L.context=jt,g=ye):(typeof L.componentDidUpdate!="function"||at===a.memoizedProps&&ue===a.memoizedState||(u.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||at===a.memoizedProps&&ue===a.memoizedState||(u.flags|=1024),g=!1)}return L=g,Fp(a,u),g=(u.flags&128)!==0,L||g?(L=u.stateNode,d=g&&typeof d.getDerivedStateFromError!="function"?null:L.render(),u.flags|=1,a!==null&&g?(u.child=Wr(u,a.child,null,T),u.child=Wr(u,null,d,T)):Gs(a,u,d,T),u.memoizedState=L.state,a=u.child):a=Su(a,u,T),a}function Dw(a,u,d,g){return bu(),u.flags|=256,Gs(a,u,d,g),u.child}var A0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function S0(a){return{baseLanes:a,cachePool:Pt()}}function E0(a,u,d){return a=a!==null?a.childLanes&~d:0,u&&(a|=vo),a}function Pw(a,u,d){var g=u.pendingProps,T=!1,L=(u.flags&128)!==0,at;if((at=L)||(at=a!==null&&a.memoizedState===null?!1:(rr.current&2)!==0),at&&(T=!0,u.flags&=-129),at=(u.flags&32)!==0,u.flags&=-33,a===null){if(Yn){if(T?bi(u):Ri(),(a=Vr)?(a=q5(a,oi),a=a!==null&&a.data!=="&"?a:null,a!==null&&(u.memoizedState={dehydrated:a,treeContext:Ol!==null?{id:Ua,overflow:za}:null,retryLane:536870912,hydrationErrors:null},d=_h(a),d.return=u,u.child=d,ds=u,Vr=null)):a=null,a===null)throw Dl(u);return o1(a)?u.lanes=32:u.lanes=536870912,null}var St=g.children;return g=g.fallback,T?(Ri(),T=u.mode,St=Bp({mode:"hidden",children:St},T),g=Ll(g,T,d,null),St.return=u,g.return=u,St.sibling=g,u.child=St,g=u.child,g.memoizedState=S0(d),g.childLanes=E0(a,at,d),u.memoizedState=A0,sd(null,g)):(bi(u),C0(u,St))}var jt=a.memoizedState;if(jt!==null&&(St=jt.dehydrated,St!==null)){if(L)u.flags&256?(bi(u),u.flags&=-257,u=T0(a,u,d)):u.memoizedState!==null?(Ri(),u.child=a.child,u.flags|=128,u=null):(Ri(),St=g.fallback,T=u.mode,g=Bp({mode:"visible",children:g.children},T),St=Ll(St,T,d,null),St.flags|=2,g.return=u,St.return=u,g.sibling=St,u.child=g,Wr(u,a.child,null,d),g=u.child,g.memoizedState=S0(d),g.childLanes=E0(a,at,d),u.memoizedState=A0,u=sd(null,g));else if(bi(u),o1(St)){if(at=St.nextSibling&&St.nextSibling.dataset,at)var oe=at.dgst;at=oe,g=Error(n(419)),g.stack="",g.digest=at,Zu({value:g,source:null,stack:null}),u=T0(a,u,d)}else if(ns||Fl(a,u,d,!1),at=(d&a.childLanes)!==0,ns||at){if(at=Kr,at!==null&&(g=sr(at,d),g!==0&&g!==jt.retryLane))throw jt.retryLane=g,ar(a,g),$a(at,a,g),x0;a1(St)||Wp(),u=T0(a,u,d)}else a1(St)?(u.flags|=192,u.child=a.child,u=null):(a=jt.treeContext,Vr=Bo(St.nextSibling),ds=u,Yn=!0,qs=null,oi=!1,a!==null&&Ep(u,a),u=C0(u,g.children),u.flags|=4096);return u}return T?(Ri(),St=g.fallback,T=u.mode,jt=a.child,oe=jt.sibling,g=Fa(jt,{mode:"hidden",children:g.children}),g.subtreeFlags=jt.subtreeFlags&65011712,oe!==null?St=Fa(oe,St):(St=Ll(St,T,d,null),St.flags|=2),St.return=u,g.return=u,g.sibling=St,u.child=g,sd(null,g),g=u.child,St=a.child.memoizedState,St===null?St=S0(d):(T=St.cachePool,T!==null?(jt=vi._currentValue,T=T.parent!==jt?{parent:jt,pool:jt}:T):T=Pt(),St={baseLanes:St.baseLanes|d,cachePool:T}),g.memoizedState=St,g.childLanes=E0(a,at,d),u.memoizedState=A0,sd(a.child,g)):(bi(u),d=a.child,a=d.sibling,d=Fa(d,{mode:"visible",children:g.children}),d.return=u,d.sibling=null,a!==null&&(at=u.deletions,at===null?(u.deletions=[a],u.flags|=16):at.push(a)),u.child=d,u.memoizedState=null,d)}function C0(a,u){return u=Bp({mode:"visible",children:u},a.mode),u.return=a,a.child=u}function Bp(a,u){return a=Ts(22,a,null,u),a.lanes=0,a}function T0(a,u,d){return Wr(u,a.child,null,d),a=C0(u,u.pendingProps.children),a.flags|=2,u.memoizedState=null,a}function Mw(a,u,d){a.lanes|=u;var g=a.alternate;g!==null&&(g.lanes|=u),Ju(a.return,u,d)}function N0(a,u,d,g,T,L){var at=a.memoizedState;at===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:T,treeForkCount:L}:(at.isBackwards=u,at.rendering=null,at.renderingStartTime=0,at.last=g,at.tail=d,at.tailMode=T,at.treeForkCount=L)}function Fw(a,u,d){var g=u.pendingProps,T=g.revealOrder,L=g.tail;g=g.children;var at=rr.current,St=(at&2)!==0;if(St?(at=at&1|2,u.flags|=128):at&=1,K(rr,at),Gs(a,u,g,d),g=Yn?Fc:0,!St&&a!==null&&(a.flags&128)!==0)t:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Mw(a,d,u);else if(a.tag===19)Mw(a,d,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break t;for(;a.sibling===null;){if(a.return===null||a.return===u)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(T){case"forwards":for(d=u.child,T=null;d!==null;)a=d.alternate,a!==null&&ks(a)===null&&(T=d),d=d.sibling;d=T,d===null?(T=u.child,u.child=null):(T=d.sibling,d.sibling=null),N0(u,!1,T,d,L,g);break;case"backwards":case"unstable_legacy-backwards":for(d=null,T=u.child,u.child=null;T!==null;){if(a=T.alternate,a!==null&&ks(a)===null){u.child=T;break}a=T.sibling,T.sibling=d,d=T,T=a}N0(u,!0,d,null,L,g);break;case"together":N0(u,!1,null,null,void 0,g);break;default:u.memoizedState=null}return u.child}function Su(a,u,d){if(a!==null&&(u.dependencies=a.dependencies),oc|=u.lanes,(d&u.childLanes)===0)if(a!==null){if(Fl(a,u,d,!1),(d&u.childLanes)===0)return null}else return null;if(a!==null&&u.child!==a.child)throw Error(n(153));if(u.child!==null){for(a=u.child,d=Fa(a,a.pendingProps),u.child=d,d.return=u;a.sibling!==null;)a=a.sibling,d=d.sibling=Fa(a,a.pendingProps),d.return=u;d.sibling=null}return u.child}function k0(a,u){return(a.lanes&u)!==0?!0:(a=a.dependencies,!!(a!==null&&Th(a)))}function NC(a,u,d){switch(u.tag){case 3:j(u,u.stateNode.containerInfo),Ml(u,vi,a.memoizedState.cache),bu();break;case 27:case 5:ot(u);break;case 4:j(u,u.stateNode.containerInfo);break;case 10:Ml(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,wr(u),null;break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(bi(u),u.flags|=128,null):(d&u.child.childLanes)!==0?Pw(a,u,d):(bi(u),a=Su(a,u,d),a!==null?a.sibling:null);bi(u);break;case 19:var T=(a.flags&128)!==0;if(g=(d&u.childLanes)!==0,g||(Fl(a,u,d,!1),g=(d&u.childLanes)!==0),T){if(g)return Fw(a,u,d);u.flags|=128}if(T=u.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),K(rr,rr.current),g)break;return null;case 22:return u.lanes=0,Nw(a,u,d,u.pendingProps);case 24:Ml(u,vi,a.memoizedState.cache)}return Su(a,u,d)}function Bw(a,u,d){if(a!==null)if(a.memoizedProps!==u.pendingProps)ns=!0;else{if(!k0(a,d)&&(u.flags&128)===0)return ns=!1,NC(a,u,d);ns=(a.flags&131072)!==0}else ns=!1,Yn&&(u.flags&1048576)!==0&&Sp(u,Fc,u.index);switch(u.lanes=0,u.tag){case 16:t:{var g=u.pendingProps;if(a=ne(u.elementType),u.type=a,typeof a=="function")xh(a)?(g=zc(a,g),u.tag=1,u=Ow(null,u,a,g,d)):(u.tag=0,u=_0(null,u,a,g,d));else{if(a!=null){var T=a.$$typeof;if(T===S){u.tag=11,u=Ew(null,u,a,g,d);break t}else if(T===H){u.tag=14,u=Cw(null,u,a,g,d);break t}}throw u=D(a)||a,Error(n(306,u,""))}}return u;case 0:return _0(a,u,u.type,u.pendingProps,d);case 1:return g=u.type,T=zc(g,u.pendingProps),Ow(a,u,g,T,d);case 3:t:{if(j(u,u.stateNode.containerInfo),a===null)throw Error(n(387));g=u.pendingProps;var L=u.memoizedState;T=L.element,ei(a,u),Ti(u,g,null,d);var at=u.memoizedState;if(g=at.cache,Ml(u,vi,g),g!==L.cache&&wu(u,[vi],d,!0),Fr(),g=at.element,L.isDehydrated)if(L={element:g,isDehydrated:!1,cache:at.cache},u.updateQueue.baseState=L,u.memoizedState=L,u.flags&256){u=Dw(a,u,g,d);break t}else if(g!==T){T=Ba(Error(n(424)),u),Zu(T),u=Dw(a,u,g,d);break t}else for(a=u.stateNode.containerInfo,a.nodeType===9?a=a.body:a=a.nodeName==="HTML"?a.ownerDocument.body:a,Vr=Bo(a.firstChild),ds=u,Yn=!0,qs=null,oi=!0,d=Rn(u,null,g,d),u.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(bu(),g===T){u=Su(a,u,d);break t}Gs(a,u,g,d)}u=u.child}return u;case 26:return Fp(a,u),a===null?(d=$5(u.type,null,u.pendingProps,null))?u.memoizedState=d:Yn||(d=u.type,a=u.pendingProps,g=Jp(ct.current).createElement(d),g[Wn]=u,g[dr]=a,Vs(g,d,a),Xr(g),u.stateNode=g):u.memoizedState=$5(u.type,a.memoizedProps,u.pendingProps,a.memoizedState),null;case 27:return ot(u),a===null&&Yn&&(g=u.stateNode=V5(u.type,u.pendingProps,ct.current),ds=u,oi=!0,T=Vr,fc(u.type)?(l1=T,Vr=Bo(g.firstChild)):Vr=T),Gs(a,u,u.pendingProps.children,d),Fp(a,u),a===null&&(u.flags|=4194304),u.child;case 5:return a===null&&Yn&&((T=g=Vr)&&(g=iT(g,u.type,u.pendingProps,oi),g!==null?(u.stateNode=g,ds=u,Vr=Bo(g.firstChild),oi=!1,T=!0):T=!1),T||Dl(u)),ot(u),T=u.type,L=u.pendingProps,at=a!==null?a.memoizedProps:null,g=L.children,r1(T,L)?g=null:at!==null&&r1(T,at)&&(u.flags|=32),u.memoizedState!==null&&(T=Yf(a,u,c0,null,null,d),wd._currentValue=T),Fp(a,u),Gs(a,u,g,d),u.child;case 6:return a===null&&Yn&&((a=d=Vr)&&(d=sT(d,u.pendingProps,oi),d!==null?(u.stateNode=d,ds=u,Vr=null,a=!0):a=!1),a||Dl(u)),null;case 13:return Pw(a,u,d);case 4:return j(u,u.stateNode.containerInfo),g=u.pendingProps,a===null?u.child=Wr(u,null,g,d):Gs(a,u,g,d),u.child;case 11:return Ew(a,u,u.type,u.pendingProps,d);case 7:return Gs(a,u,u.pendingProps,d),u.child;case 8:return Gs(a,u,u.pendingProps.children,d),u.child;case 12:return Gs(a,u,u.pendingProps.children,d),u.child;case 10:return g=u.pendingProps,Ml(u,u.type,g.value),Gs(a,u,g.children,d),u.child;case 9:return T=u.type._context,g=u.pendingProps.children,Bl(u),T=ms(T),g=g(T),u.flags|=1,Gs(a,u,g,d),u.child;case 14:return Cw(a,u,u.type,u.pendingProps,d);case 15:return Tw(a,u,u.type,u.pendingProps,d);case 19:return Fw(a,u,d);case 31:return TC(a,u,d);case 22:return Nw(a,u,d,u.pendingProps);case 24:return Bl(u),g=ms(vi),a===null?(T=Et(),T===null&&(T=Kr,L=tc(),T.pooledCache=L,L.refCount++,L!==null&&(T.pooledCacheLanes|=d),T=L),u.memoizedState={parent:g,cache:T},Ie(u),Ml(u,vi,T)):((a.lanes&d)!==0&&(ei(a,u),Ti(u,null,null,d),Fr()),T=a.memoizedState,L=u.memoizedState,T.parent!==g?(T={parent:g,cache:g},u.memoizedState=T,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=T),Ml(u,vi,g)):(g=L.cache,Ml(u,vi,g),g!==T.cache&&wu(u,[vi],d,!0))),Gs(a,u,u.pendingProps.children,d),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function Eu(a){a.flags|=4}function R0(a,u,d,g,T){if((u=(a.mode&32)!==0)&&(u=!1),u){if(a.flags|=16777216,(T&335544128)===T)if(a.stateNode.complete)a.flags|=8192;else if(c5())a.flags|=8192;else throw de=Xt,se}else a.flags&=-16777217}function Iw(a,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!J5(u))if(c5())a.flags|=8192;else throw de=Xt,se}function Ip(a,u){u!==null&&(a.flags|=4),a.flags&16384&&(u=a.tag!==22?La():536870912,a.lanes|=u,qh|=u)}function ad(a,u){if(!Yn)switch(a.tailMode){case"hidden":u=a.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function ii(a){var u=a.alternate!==null&&a.alternate.child===a.child,d=0,g=0;if(u)for(var T=a.child;T!==null;)d|=T.lanes|T.childLanes,g|=T.subtreeFlags&65011712,g|=T.flags&65011712,T.return=a,T=T.sibling;else for(T=a.child;T!==null;)d|=T.lanes|T.childLanes,g|=T.subtreeFlags,g|=T.flags,T.return=a,T=T.sibling;return a.subtreeFlags|=g,a.childLanes=d,u}function kC(a,u,d){var g=u.pendingProps;switch(Eh(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ii(u),null;case 1:return ii(u),null;case 3:return d=u.stateNode,g=null,a!==null&&(g=a.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),qa(vi),ht(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(ps(u)?Eu(u):a===null||a.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,$f())),ii(u),null;case 26:var T=u.type,L=u.memoizedState;return a===null?(Eu(u),L!==null?(ii(u),Iw(u,L)):(ii(u),R0(u,T,null,g,d))):L?L!==a.memoizedState?(Eu(u),ii(u),Iw(u,L)):(ii(u),u.flags&=-16777217):(a=a.memoizedProps,a!==g&&Eu(u),ii(u),R0(u,T,a,g,d)),null;case 27:if(lt(u),d=ct.current,T=u.type,a!==null&&u.stateNode!=null)a.memoizedProps!==g&&Eu(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return ii(u),null}a=rt.current,ps(u)?Kf(u):(a=V5(T,g,d),u.stateNode=a,Eu(u))}return ii(u),null;case 5:if(lt(u),T=u.type,a!==null&&u.stateNode!=null)a.memoizedProps!==g&&Eu(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return ii(u),null}if(L=rt.current,ps(u))Kf(u);else{var at=Jp(ct.current);switch(L){case 1:L=at.createElementNS("http://www.w3.org/2000/svg",T);break;case 2:L=at.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;default:switch(T){case"svg":L=at.createElementNS("http://www.w3.org/2000/svg",T);break;case"math":L=at.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;case"script":L=at.createElement("div"),L.innerHTML="<script><\/script>",L=L.removeChild(L.firstChild);break;case"select":L=typeof g.is=="string"?at.createElement("select",{is:g.is}):at.createElement("select"),g.multiple?L.multiple=!0:g.size&&(L.size=g.size);break;default:L=typeof g.is=="string"?at.createElement(T,{is:g.is}):at.createElement(T)}}L[Wn]=u,L[dr]=g;t:for(at=u.child;at!==null;){if(at.tag===5||at.tag===6)L.appendChild(at.stateNode);else if(at.tag!==4&&at.tag!==27&&at.child!==null){at.child.return=at,at=at.child;continue}if(at===u)break t;for(;at.sibling===null;){if(at.return===null||at.return===u)break t;at=at.return}at.sibling.return=at.return,at=at.sibling}u.stateNode=L;t:switch(Vs(L,T,g),T){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break t;case"img":g=!0;break t;default:g=!1}g&&Eu(u)}}return ii(u),R0(u,u.type,a===null?null:a.memoizedProps,u.pendingProps,d),null;case 6:if(a&&u.stateNode!=null)a.memoizedProps!==g&&Eu(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(n(166));if(a=ct.current,ps(u)){if(a=u.stateNode,d=u.memoizedProps,g=null,T=ds,T!==null)switch(T.tag){case 27:case 5:g=T.memoizedProps}a[Wn]=u,a=!!(a.nodeValue===d||g!==null&&g.suppressHydrationWarning===!0||P5(a.nodeValue,d)),a||Dl(u,!0)}else a=Jp(a).createTextNode(g),a[Wn]=u,u.stateNode=a}return ii(u),null;case 31:if(d=u.memoizedState,a===null||a.memoizedState!==null){if(g=ps(u),d!==null){if(a===null){if(!g)throw Error(n(318));if(a=u.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(557));a[Wn]=u}else bu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;ii(u),a=!1}else d=$f(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=d),a=!0;if(!a)return u.flags&256?(Nr(u),u):(Nr(u),null);if((u.flags&128)!==0)throw Error(n(558))}return ii(u),null;case 13:if(g=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(T=ps(u),g!==null&&g.dehydrated!==null){if(a===null){if(!T)throw Error(n(318));if(T=u.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(n(317));T[Wn]=u}else bu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;ii(u),T=!1}else T=$f(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=T),T=!0;if(!T)return u.flags&256?(Nr(u),u):(Nr(u),null)}return Nr(u),(u.flags&128)!==0?(u.lanes=d,u):(d=g!==null,a=a!==null&&a.memoizedState!==null,d&&(g=u.child,T=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(T=g.alternate.memoizedState.cachePool.pool),L=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(L=g.memoizedState.cachePool.pool),L!==T&&(g.flags|=2048)),d!==a&&d&&(u.child.flags|=8192),Ip(u,u.updateQueue),ii(u),null);case 4:return ht(),a===null&&Z0(u.stateNode.containerInfo),ii(u),null;case 10:return qa(u.type),ii(u),null;case 19:if(R(rr),g=u.memoizedState,g===null)return ii(u),null;if(T=(u.flags&128)!==0,L=g.rendering,L===null)if(T)ad(g,!1);else{if(Oi!==0||a!==null&&(a.flags&128)!==0)for(a=u.child;a!==null;){if(L=ks(a),L!==null){for(u.flags|=128,ad(g,!1),a=L.updateQueue,u.updateQueue=a,Ip(u,a),u.subtreeFlags=0,a=d,d=u.child;d!==null;)Pc(d,a),d=d.sibling;return K(rr,rr.current&1|2),Yn&&Ca(u,g.treeForkCount),u.child}a=a.sibling}g.tail!==null&&le()>Hp&&(u.flags|=128,T=!0,ad(g,!1),u.lanes=4194304)}else{if(!T)if(a=ks(L),a!==null){if(u.flags|=128,T=!0,a=a.updateQueue,u.updateQueue=a,Ip(u,a),ad(g,!0),g.tail===null&&g.tailMode==="hidden"&&!L.alternate&&!Yn)return ii(u),null}else 2*le()-g.renderingStartTime>Hp&&d!==536870912&&(u.flags|=128,T=!0,ad(g,!1),u.lanes=4194304);g.isBackwards?(L.sibling=u.child,u.child=L):(a=g.last,a!==null?a.sibling=L:u.child=L,g.last=L)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=le(),a.sibling=null,d=rr.current,K(rr,T?d&1|2:d&1),Yn&&Ca(u,g.treeForkCount),a):(ii(u),null);case 22:case 23:return Nr(u),Ui(),g=u.memoizedState!==null,a!==null?a.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(d&536870912)!==0&&(u.flags&128)===0&&(ii(u),u.subtreeFlags&6&&(u.flags|=8192)):ii(u),d=u.updateQueue,d!==null&&Ip(u,d.retryQueue),d=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==d&&(u.flags|=2048),a!==null&&R(At),null;case 24:return d=null,a!==null&&(d=a.memoizedState.cache),u.memoizedState.cache!==d&&(u.flags|=2048),qa(vi),ii(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function RC(a,u){switch(Eh(u),u.tag){case 1:return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 3:return qa(vi),ht(),a=u.flags,(a&65536)!==0&&(a&128)===0?(u.flags=a&-65537|128,u):null;case 26:case 27:case 5:return lt(u),null;case 31:if(u.memoizedState!==null){if(Nr(u),u.alternate===null)throw Error(n(340));bu()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 13:if(Nr(u),a=u.memoizedState,a!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(n(340));bu()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 19:return R(rr),null;case 4:return ht(),null;case 10:return qa(u.type),null;case 22:case 23:return Nr(u),Ui(),a!==null&&R(At),a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 24:return qa(vi),null;case 25:return null;default:return null}}function jw(a,u){switch(Eh(u),u.tag){case 3:qa(vi),ht();break;case 26:case 27:case 5:lt(u);break;case 4:ht();break;case 31:u.memoizedState!==null&&Nr(u);break;case 13:Nr(u);break;case 19:R(rr);break;case 10:qa(u.type);break;case 22:case 23:Nr(u),Ui(),a!==null&&R(At);break;case 24:qa(vi)}}function od(a,u){try{var d=u.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var T=g.next;d=T;do{if((d.tag&a)===a){g=void 0;var L=d.create,at=d.inst;g=L(),at.destroy=g}d=d.next}while(d!==T)}}catch(St){Rr(u,u.return,St)}}function sc(a,u,d){try{var g=u.updateQueue,T=g!==null?g.lastEffect:null;if(T!==null){var L=T.next;g=L;do{if((g.tag&a)===a){var at=g.inst,St=at.destroy;if(St!==void 0){at.destroy=void 0,T=u;var jt=d,oe=St;try{oe()}catch(ye){Rr(T,jt,ye)}}}g=g.next}while(g!==L)}}catch(ye){Rr(u,u.return,ye)}}function Uw(a){var u=a.updateQueue;if(u!==null){var d=a.stateNode;try{Ni(u,d)}catch(g){Rr(a,a.return,g)}}}function zw(a,u,d){d.props=zc(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(g){Rr(a,u,g)}}function ld(a,u){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var g=a.stateNode;break;case 30:g=a.stateNode;break;default:g=a.stateNode}typeof d=="function"?a.refCleanup=d(g):d.current=g}}catch(T){Rr(a,u,T)}}function ql(a,u){var d=a.ref,g=a.refCleanup;if(d!==null)if(typeof g=="function")try{g()}catch(T){Rr(a,u,T)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(T){Rr(a,u,T)}else d.current=null}function qw(a){var u=a.type,d=a.memoizedProps,g=a.stateNode;try{t:switch(u){case"button":case"input":case"select":case"textarea":d.autoFocus&&g.focus();break t;case"img":d.src?g.src=d.src:d.srcSet&&(g.srcset=d.srcSet)}}catch(T){Rr(a,a.return,T)}}function L0(a,u,d){try{var g=a.stateNode;ZC(g,a.type,d,u),g[dr]=u}catch(T){Rr(a,a.return,T)}}function Hw(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&fc(a.type)||a.tag===4}function O0(a){t:for(;;){for(;a.sibling===null;){if(a.return===null||Hw(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&fc(a.type)||a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function D0(a,u,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,u?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(a,u):(u=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,u.appendChild(a),d=d._reactRootContainer,d!=null||u.onclick!==null||(u.onclick=_s));else if(g!==4&&(g===27&&fc(a.type)&&(d=a.stateNode,u=null),a=a.child,a!==null))for(D0(a,u,d),a=a.sibling;a!==null;)D0(a,u,d),a=a.sibling}function jp(a,u,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,u?d.insertBefore(a,u):d.appendChild(a);else if(g!==4&&(g===27&&fc(a.type)&&(d=a.stateNode),a=a.child,a!==null))for(jp(a,u,d),a=a.sibling;a!==null;)jp(a,u,d),a=a.sibling}function Gw(a){var u=a.stateNode,d=a.memoizedProps;try{for(var g=a.type,T=u.attributes;T.length;)u.removeAttributeNode(T[0]);Vs(u,g,d),u[Wn]=a,u[dr]=d}catch(L){Rr(a,a.return,L)}}var Cu=!1,rs=!1,P0=!1,Vw=typeof WeakSet=="function"?WeakSet:Set,Rs=null;function LC(a,u){if(a=a.containerInfo,e1=am,a=ut(a),bt(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else t:{d=(d=a.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var T=g.anchorOffset,L=g.focusNode;g=g.focusOffset;try{d.nodeType,L.nodeType}catch{d=null;break t}var at=0,St=-1,jt=-1,oe=0,ye=0,xe=a,ue=null;e:for(;;){for(var he;xe!==d||T!==0&&xe.nodeType!==3||(St=at+T),xe!==L||g!==0&&xe.nodeType!==3||(jt=at+g),xe.nodeType===3&&(at+=xe.nodeValue.length),(he=xe.firstChild)!==null;)ue=xe,xe=he;for(;;){if(xe===a)break e;if(ue===d&&++oe===T&&(St=at),ue===L&&++ye===g&&(jt=at),(he=xe.nextSibling)!==null)break;xe=ue,ue=xe.parentNode}xe=he}d=St===-1||jt===-1?null:{start:St,end:jt}}else d=null}d=d||{start:0,end:0}}else d=null;for(n1={focusedElem:a,selectionRange:d},am=!1,Rs=u;Rs!==null;)if(u=Rs,a=u.child,(u.subtreeFlags&1028)!==0&&a!==null)a.return=u,Rs=a;else for(;Rs!==null;){switch(u=Rs,L=u.alternate,a=u.flags,u.tag){case 0:if((a&4)!==0&&(a=u.updateQueue,a=a!==null?a.events:null,a!==null))for(d=0;d<a.length;d++)T=a[d],T.ref.impl=T.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&L!==null){a=void 0,d=u,T=L.memoizedProps,L=L.memoizedState,g=d.stateNode;try{var Ze=zc(d.type,T);a=g.getSnapshotBeforeUpdate(Ze,L),g.__reactInternalSnapshotBeforeUpdate=a}catch(bn){Rr(d,d.return,bn)}}break;case 3:if((a&1024)!==0){if(a=u.stateNode.containerInfo,d=a.nodeType,d===9)s1(a);else if(d===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":s1(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=u.sibling,a!==null){a.return=u.return,Rs=a;break}Rs=u.return}}function Ww(a,u,d){var g=d.flags;switch(d.tag){case 0:case 11:case 15:Nu(a,d),g&4&&od(5,d);break;case 1:if(Nu(a,d),g&4)if(a=d.stateNode,u===null)try{a.componentDidMount()}catch(at){Rr(d,d.return,at)}else{var T=zc(d.type,u.memoizedProps);u=u.memoizedState;try{a.componentDidUpdate(T,u,a.__reactInternalSnapshotBeforeUpdate)}catch(at){Rr(d,d.return,at)}}g&64&&Uw(d),g&512&&ld(d,d.return);break;case 3:if(Nu(a,d),g&64&&(a=d.updateQueue,a!==null)){if(u=null,d.child!==null)switch(d.child.tag){case 27:case 5:u=d.child.stateNode;break;case 1:u=d.child.stateNode}try{Ni(a,u)}catch(at){Rr(d,d.return,at)}}break;case 27:u===null&&g&4&&Gw(d);case 26:case 5:Nu(a,d),u===null&&g&4&&qw(d),g&512&&ld(d,d.return);break;case 12:Nu(a,d);break;case 31:Nu(a,d),g&4&&Xw(a,d);break;case 13:Nu(a,d),g&4&&Yw(a,d),g&64&&(a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(d=UC.bind(null,d),aT(a,d))));break;case 22:if(g=d.memoizedState!==null||Cu,!g){u=u!==null&&u.memoizedState!==null||rs,T=Cu;var L=rs;Cu=g,(rs=u)&&!L?ku(a,d,(d.subtreeFlags&8772)!==0):Nu(a,d),Cu=T,rs=L}break;case 30:break;default:Nu(a,d)}}function Kw(a){var u=a.alternate;u!==null&&(a.alternate=null,Kw(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode,u!==null&&no(u)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var ci=null,Ga=!1;function Tu(a,u,d){for(d=d.child;d!==null;)$w(a,u,d),d=d.sibling}function $w(a,u,d){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Xe,d)}catch{}switch(d.tag){case 26:rs||ql(d,u),Tu(a,u,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:rs||ql(d,u);var g=ci,T=Ga;fc(d.type)&&(ci=d.stateNode,Ga=!1),Tu(a,u,d),yd(d.stateNode),ci=g,Ga=T;break;case 5:rs||ql(d,u);case 6:if(g=ci,T=Ga,ci=null,Tu(a,u,d),ci=g,Ga=T,ci!==null)if(Ga)try{(ci.nodeType===9?ci.body:ci.nodeName==="HTML"?ci.ownerDocument.body:ci).removeChild(d.stateNode)}catch(L){Rr(d,u,L)}else try{ci.removeChild(d.stateNode)}catch(L){Rr(d,u,L)}break;case 18:ci!==null&&(Ga?(a=ci,U5(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,d.stateNode),Yh(a)):U5(ci,d.stateNode));break;case 4:g=ci,T=Ga,ci=d.stateNode.containerInfo,Ga=!0,Tu(a,u,d),ci=g,Ga=T;break;case 0:case 11:case 14:case 15:sc(2,d,u),rs||sc(4,d,u),Tu(a,u,d);break;case 1:rs||(ql(d,u),g=d.stateNode,typeof g.componentWillUnmount=="function"&&zw(d,u,g)),Tu(a,u,d);break;case 21:Tu(a,u,d);break;case 22:rs=(g=rs)||d.memoizedState!==null,Tu(a,u,d),rs=g;break;default:Tu(a,u,d)}}function Xw(a,u){if(u.memoizedState===null&&(a=u.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Yh(a)}catch(d){Rr(u,u.return,d)}}}function Yw(a,u){if(u.memoizedState===null&&(a=u.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Yh(a)}catch(d){Rr(u,u.return,d)}}function OC(a){switch(a.tag){case 31:case 13:case 19:var u=a.stateNode;return u===null&&(u=a.stateNode=new Vw),u;case 22:return a=a.stateNode,u=a._retryCache,u===null&&(u=a._retryCache=new Vw),u;default:throw Error(n(435,a.tag))}}function Up(a,u){var d=OC(a);u.forEach(function(g){if(!d.has(g)){d.add(g);var T=zC.bind(null,a,g);g.then(T,T)}})}function Va(a,u){var d=u.deletions;if(d!==null)for(var g=0;g<d.length;g++){var T=d[g],L=a,at=u,St=at;t:for(;St!==null;){switch(St.tag){case 27:if(fc(St.type)){ci=St.stateNode,Ga=!1;break t}break;case 5:ci=St.stateNode,Ga=!1;break t;case 3:case 4:ci=St.stateNode.containerInfo,Ga=!0;break t}St=St.return}if(ci===null)throw Error(n(160));$w(L,at,T),ci=null,Ga=!1,L=T.alternate,L!==null&&(L.return=null),T.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)Qw(u,a),u=u.sibling}var ul=null;function Qw(a,u){var d=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Va(u,a),Wa(a),g&4&&(sc(3,a,a.return),od(3,a),sc(5,a,a.return));break;case 1:Va(u,a),Wa(a),g&512&&(rs||d===null||ql(d,d.return)),g&64&&Cu&&(a=a.updateQueue,a!==null&&(g=a.callbacks,g!==null&&(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?g:d.concat(g))));break;case 26:var T=ul;if(Va(u,a),Wa(a),g&512&&(rs||d===null||ql(d,d.return)),g&4){var L=d!==null?d.memoizedState:null;if(g=a.memoizedState,d===null)if(g===null)if(a.stateNode===null){t:{g=a.type,d=a.memoizedProps,T=T.ownerDocument||T;e:switch(g){case"title":L=T.getElementsByTagName("title")[0],(!L||L[Bi]||L[Wn]||L.namespaceURI==="http://www.w3.org/2000/svg"||L.hasAttribute("itemprop"))&&(L=T.createElement(g),T.head.insertBefore(L,T.querySelector("head > title"))),Vs(L,g,d),L[Wn]=a,Xr(L),g=L;break t;case"link":var at=Q5("link","href",T).get(g+(d.href||""));if(at){for(var St=0;St<at.length;St++)if(L=at[St],L.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&L.getAttribute("rel")===(d.rel==null?null:d.rel)&&L.getAttribute("title")===(d.title==null?null:d.title)&&L.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){at.splice(St,1);break e}}L=T.createElement(g),Vs(L,g,d),T.head.appendChild(L);break;case"meta":if(at=Q5("meta","content",T).get(g+(d.content||""))){for(St=0;St<at.length;St++)if(L=at[St],L.getAttribute("content")===(d.content==null?null:""+d.content)&&L.getAttribute("name")===(d.name==null?null:d.name)&&L.getAttribute("property")===(d.property==null?null:d.property)&&L.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&L.getAttribute("charset")===(d.charSet==null?null:d.charSet)){at.splice(St,1);break e}}L=T.createElement(g),Vs(L,g,d),T.head.appendChild(L);break;default:throw Error(n(468,g))}L[Wn]=a,Xr(L),g=L}a.stateNode=g}else Z5(T,a.type,a.stateNode);else a.stateNode=Y5(T,g,a.memoizedProps);else L!==g?(L===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):L.count--,g===null?Z5(T,a.type,a.stateNode):Y5(T,g,a.memoizedProps)):g===null&&a.stateNode!==null&&L0(a,a.memoizedProps,d.memoizedProps)}break;case 27:Va(u,a),Wa(a),g&512&&(rs||d===null||ql(d,d.return)),d!==null&&g&4&&L0(a,a.memoizedProps,d.memoizedProps);break;case 5:if(Va(u,a),Wa(a),g&512&&(rs||d===null||ql(d,d.return)),a.flags&32){T=a.stateNode;try{Zs(T,"")}catch(Ze){Rr(a,a.return,Ze)}}g&4&&a.stateNode!=null&&(T=a.memoizedProps,L0(a,T,d!==null?d.memoizedProps:T)),g&1024&&(P0=!0);break;case 6:if(Va(u,a),Wa(a),g&4){if(a.stateNode===null)throw Error(n(162));g=a.memoizedProps,d=a.stateNode;try{d.nodeValue=g}catch(Ze){Rr(a,a.return,Ze)}}break;case 3:if(nm=null,T=ul,ul=tm(u.containerInfo),Va(u,a),ul=T,Wa(a),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Yh(u.containerInfo)}catch(Ze){Rr(a,a.return,Ze)}P0&&(P0=!1,Zw(a));break;case 4:g=ul,ul=tm(a.stateNode.containerInfo),Va(u,a),Wa(a),ul=g;break;case 12:Va(u,a),Wa(a);break;case 31:Va(u,a),Wa(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Up(a,g)));break;case 13:Va(u,a),Wa(a),a.child.flags&8192&&a.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(qp=le()),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Up(a,g)));break;case 22:T=a.memoizedState!==null;var jt=d!==null&&d.memoizedState!==null,oe=Cu,ye=rs;if(Cu=oe||T,rs=ye||jt,Va(u,a),rs=ye,Cu=oe,Wa(a),g&8192)t:for(u=a.stateNode,u._visibility=T?u._visibility&-2:u._visibility|1,T&&(d===null||jt||Cu||rs||qc(a)),d=null,u=a;;){if(u.tag===5||u.tag===26){if(d===null){jt=d=u;try{if(L=jt.stateNode,T)at=L.style,typeof at.setProperty=="function"?at.setProperty("display","none","important"):at.display="none";else{St=jt.stateNode;var xe=jt.memoizedProps.style,ue=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;St.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(Ze){Rr(jt,jt.return,Ze)}}}else if(u.tag===6){if(d===null){jt=u;try{jt.stateNode.nodeValue=T?"":jt.memoizedProps}catch(Ze){Rr(jt,jt.return,Ze)}}}else if(u.tag===18){if(d===null){jt=u;try{var he=jt.stateNode;T?z5(he,!0):z5(jt.stateNode,!1)}catch(Ze){Rr(jt,jt.return,Ze)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===a)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break t;for(;u.sibling===null;){if(u.return===null||u.return===a)break t;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=a.updateQueue,g!==null&&(d=g.retryQueue,d!==null&&(g.retryQueue=null,Up(a,d))));break;case 19:Va(u,a),Wa(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Up(a,g)));break;case 30:break;case 21:break;default:Va(u,a),Wa(a)}}function Wa(a){var u=a.flags;if(u&2){try{for(var d,g=a.return;g!==null;){if(Hw(g)){d=g;break}g=g.return}if(d==null)throw Error(n(160));switch(d.tag){case 27:var T=d.stateNode,L=O0(a);jp(a,L,T);break;case 5:var at=d.stateNode;d.flags&32&&(Zs(at,""),d.flags&=-33);var St=O0(a);jp(a,St,at);break;case 3:case 4:var jt=d.stateNode.containerInfo,oe=O0(a);D0(a,oe,jt);break;default:throw Error(n(161))}}catch(ye){Rr(a,a.return,ye)}a.flags&=-3}u&4096&&(a.flags&=-4097)}function Zw(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var u=a;Zw(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),a=a.sibling}}function Nu(a,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)Ww(a,u.alternate,u),u=u.sibling}function qc(a){for(a=a.child;a!==null;){var u=a;switch(u.tag){case 0:case 11:case 14:case 15:sc(4,u,u.return),qc(u);break;case 1:ql(u,u.return);var d=u.stateNode;typeof d.componentWillUnmount=="function"&&zw(u,u.return,d),qc(u);break;case 27:yd(u.stateNode);case 26:case 5:ql(u,u.return),qc(u);break;case 22:u.memoizedState===null&&qc(u);break;case 30:qc(u);break;default:qc(u)}a=a.sibling}}function ku(a,u,d){for(d=d&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,T=a,L=u,at=L.flags;switch(L.tag){case 0:case 11:case 15:ku(T,L,d),od(4,L);break;case 1:if(ku(T,L,d),g=L,T=g.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(oe){Rr(g,g.return,oe)}if(g=L,T=g.updateQueue,T!==null){var St=g.stateNode;try{var jt=T.shared.hiddenCallbacks;if(jt!==null)for(T.shared.hiddenCallbacks=null,T=0;T<jt.length;T++)Ns(jt[T],St)}catch(oe){Rr(g,g.return,oe)}}d&&at&64&&Uw(L),ld(L,L.return);break;case 27:Gw(L);case 26:case 5:ku(T,L,d),d&&g===null&&at&4&&qw(L),ld(L,L.return);break;case 12:ku(T,L,d);break;case 31:ku(T,L,d),d&&at&4&&Xw(T,L);break;case 13:ku(T,L,d),d&&at&4&&Yw(T,L);break;case 22:L.memoizedState===null&&ku(T,L,d),ld(L,L.return);break;case 30:break;default:ku(T,L,d)}u=u.sibling}}function M0(a,u){var d=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),a=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(a=u.memoizedState.cachePool.pool),a!==d&&(a!=null&&a.refCount++,d!=null&&Bc(d))}function F0(a,u){a=null,u.alternate!==null&&(a=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==a&&(u.refCount++,a!=null&&Bc(a))}function cl(a,u,d,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Jw(a,u,d,g),u=u.sibling}function Jw(a,u,d,g){var T=u.flags;switch(u.tag){case 0:case 11:case 15:cl(a,u,d,g),T&2048&&od(9,u);break;case 1:cl(a,u,d,g);break;case 3:cl(a,u,d,g),T&2048&&(a=null,u.alternate!==null&&(a=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==a&&(u.refCount++,a!=null&&Bc(a)));break;case 12:if(T&2048){cl(a,u,d,g),a=u.stateNode;try{var L=u.memoizedProps,at=L.id,St=L.onPostCommit;typeof St=="function"&&St(at,u.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(jt){Rr(u,u.return,jt)}}else cl(a,u,d,g);break;case 31:cl(a,u,d,g);break;case 13:cl(a,u,d,g);break;case 23:break;case 22:L=u.stateNode,at=u.alternate,u.memoizedState!==null?L._visibility&2?cl(a,u,d,g):ud(a,u):L._visibility&2?cl(a,u,d,g):(L._visibility|=2,jh(a,u,d,g,(u.subtreeFlags&10256)!==0||!1)),T&2048&&M0(at,u);break;case 24:cl(a,u,d,g),T&2048&&F0(u.alternate,u);break;default:cl(a,u,d,g)}}function jh(a,u,d,g,T){for(T=T&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var L=a,at=u,St=d,jt=g,oe=at.flags;switch(at.tag){case 0:case 11:case 15:jh(L,at,St,jt,T),od(8,at);break;case 23:break;case 22:var ye=at.stateNode;at.memoizedState!==null?ye._visibility&2?jh(L,at,St,jt,T):ud(L,at):(ye._visibility|=2,jh(L,at,St,jt,T)),T&&oe&2048&&M0(at.alternate,at);break;case 24:jh(L,at,St,jt,T),T&&oe&2048&&F0(at.alternate,at);break;default:jh(L,at,St,jt,T)}u=u.sibling}}function ud(a,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var d=a,g=u,T=g.flags;switch(g.tag){case 22:ud(d,g),T&2048&&M0(g.alternate,g);break;case 24:ud(d,g),T&2048&&F0(g.alternate,g);break;default:ud(d,g)}u=u.sibling}}var cd=8192;function Uh(a,u,d){if(a.subtreeFlags&cd)for(a=a.child;a!==null;)t5(a,u,d),a=a.sibling}function t5(a,u,d){switch(a.tag){case 26:Uh(a,u,d),a.flags&cd&&a.memoizedState!==null&&vT(d,ul,a.memoizedState,a.memoizedProps);break;case 5:Uh(a,u,d);break;case 3:case 4:var g=ul;ul=tm(a.stateNode.containerInfo),Uh(a,u,d),ul=g;break;case 22:a.memoizedState===null&&(g=a.alternate,g!==null&&g.memoizedState!==null?(g=cd,cd=16777216,Uh(a,u,d),cd=g):Uh(a,u,d));break;default:Uh(a,u,d)}}function e5(a){var u=a.alternate;if(u!==null&&(a=u.child,a!==null)){u.child=null;do u=a.sibling,a.sibling=null,a=u;while(a!==null)}}function hd(a){var u=a.deletions;if((a.flags&16)!==0){if(u!==null)for(var d=0;d<u.length;d++){var g=u[d];Rs=g,r5(g,a)}e5(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)n5(a),a=a.sibling}function n5(a){switch(a.tag){case 0:case 11:case 15:hd(a),a.flags&2048&&sc(9,a,a.return);break;case 3:hd(a);break;case 12:hd(a);break;case 22:var u=a.stateNode;a.memoizedState!==null&&u._visibility&2&&(a.return===null||a.return.tag!==13)?(u._visibility&=-3,zp(a)):hd(a);break;default:hd(a)}}function zp(a){var u=a.deletions;if((a.flags&16)!==0){if(u!==null)for(var d=0;d<u.length;d++){var g=u[d];Rs=g,r5(g,a)}e5(a)}for(a=a.child;a!==null;){switch(u=a,u.tag){case 0:case 11:case 15:sc(8,u,u.return),zp(u);break;case 22:d=u.stateNode,d._visibility&2&&(d._visibility&=-3,zp(u));break;default:zp(u)}a=a.sibling}}function r5(a,u){for(;Rs!==null;){var d=Rs;switch(d.tag){case 0:case 11:case 15:sc(8,d,u);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var g=d.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Bc(d.memoizedState.cache)}if(g=d.child,g!==null)g.return=d,Rs=g;else t:for(d=a;Rs!==null;){g=Rs;var T=g.sibling,L=g.return;if(Kw(g),g===d){Rs=null;break t}if(T!==null){T.return=L,Rs=T;break t}Rs=L}}}var DC={getCacheForType:function(a){var u=ms(vi),d=u.data.get(a);return d===void 0&&(d=a(),u.data.set(a,d)),d},cacheSignal:function(){return ms(vi).controller.signal}},PC=typeof WeakMap=="function"?WeakMap:Map,xr=0,Kr=null,Qn=null,tr=0,kr=0,yo=null,ac=!1,zh=!1,B0=!1,Ru=0,Oi=0,oc=0,Hc=0,I0=0,vo=0,qh=0,fd=null,Ka=null,j0=!1,qp=0,i5=0,Hp=1/0,Gp=null,lc=null,ys=0,uc=null,Hh=null,Lu=0,U0=0,z0=null,s5=null,dd=0,q0=null;function bo(){return(xr&2)!==0&&tr!==0?tr&-tr:it.T!==null?$0():Jr()}function a5(){if(vo===0)if((tr&536870912)===0||Yn){var a=Jn;Jn<<=1,(Jn&3932160)===0&&(Jn=262144),vo=a}else vo=536870912;return a=ri.current,a!==null&&(a.flags|=32),vo}function $a(a,u,d){(a===Kr&&(kr===2||kr===9)||a.cancelPendingCommit!==null)&&(Gh(a,0),cc(a,tr,vo,!1)),nn(a,d),((xr&2)===0||a!==Kr)&&(a===Kr&&((xr&2)===0&&(Hc|=d),Oi===4&&cc(a,tr,vo,!1)),Hl(a))}function o5(a,u,d){if((xr&6)!==0)throw Error(n(327));var g=!d&&(u&127)===0&&(u&a.expiredLanes)===0||Ms(a,u),T=g?BC(a,u):G0(a,u,!0),L=g;do{if(T===0){zh&&!g&&cc(a,u,0,!1);break}else{if(d=a.current.alternate,L&&!MC(d)){T=G0(a,u,!1),L=!1;continue}if(T===2){if(L=u,a.errorRecoveryDisabledLanes&L)var at=0;else at=a.pendingLanes&-536870913,at=at!==0?at:at&536870912?536870912:0;if(at!==0){u=at;t:{var St=a;T=fd;var jt=St.current.memoizedState.isDehydrated;if(jt&&(Gh(St,at).flags|=256),at=G0(St,at,!1),at!==2){if(B0&&!jt){St.errorRecoveryDisabledLanes|=L,Hc|=L,T=4;break t}L=Ka,Ka=T,L!==null&&(Ka===null?Ka=L:Ka.push.apply(Ka,L))}T=at}if(L=!1,T!==2)continue}}if(T===1){Gh(a,0),cc(a,u,0,!0);break}t:{switch(g=a,L=T,L){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:cc(g,u,vo,!ac);break t;case 2:Ka=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(T=qp+300-le(),10<T)){if(cc(g,u,vo,!ac),Vn(g,0,!0)!==0)break t;Lu=u,g.timeoutHandle=I5(l5.bind(null,g,d,Ka,Gp,j0,u,vo,Hc,qh,ac,L,"Throttled",-0,0),T);break t}l5(g,d,Ka,Gp,j0,u,vo,Hc,qh,ac,L,null,-0,0)}}break}while(!0);Hl(a)}function l5(a,u,d,g,T,L,at,St,jt,oe,ye,xe,ue,he){if(a.timeoutHandle=-1,xe=u.subtreeFlags,xe&8192||(xe&16785408)===16785408){xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_s},t5(u,L,xe);var Ze=(L&62914560)===L?qp-le():(L&4194048)===L?i5-le():0;if(Ze=bT(xe,Ze),Ze!==null){Lu=L,a.cancelPendingCommit=Ze(g5.bind(null,a,u,L,d,g,T,at,St,jt,ye,xe,null,ue,he)),cc(a,L,at,!oe);return}}g5(a,u,L,d,g,T,at,St,jt)}function MC(a){for(var u=a;;){var d=u.tag;if((d===0||d===11||d===15)&&u.flags&16384&&(d=u.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var g=0;g<d.length;g++){var T=d[g],L=T.getSnapshot;T=T.value;try{if(!Ei(L(),T))return!1}catch{return!1}}if(d=u.child,u.subtreeFlags&16384&&d!==null)d.return=u,u=d;else{if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function cc(a,u,d,g){u&=~I0,u&=~Hc,a.suspendedLanes|=u,a.pingedLanes&=~u,g&&(a.warmLanes|=u),g=a.expirationTimes;for(var T=u;0<T;){var L=31-Ee(T),at=1<<L;g[L]=-1,T&=~at}d!==0&&Fs(a,d,u)}function Vp(){return(xr&6)===0?(pd(0),!1):!0}function H0(){if(Qn!==null){if(kr===0)var a=Qn.return;else a=Qn,Po=Pl=null,Oh(a),Ae=null,tn=0,a=Qn;for(;a!==null;)jw(a.alternate,a),a=a.return;Qn=null}}function Gh(a,u){var d=a.timeoutHandle;d!==-1&&(a.timeoutHandle=-1,eT(d)),d=a.cancelPendingCommit,d!==null&&(a.cancelPendingCommit=null,d()),Lu=0,H0(),Kr=a,Qn=d=Fa(a.current,null),tr=u,kr=0,yo=null,ac=!1,zh=Ms(a,u),B0=!1,qh=vo=I0=Hc=oc=Oi=0,Ka=fd=null,j0=!1,(u&8)!==0&&(u|=u&32);var g=a.entangledLanes;if(g!==0)for(a=a.entanglements,g&=u;0<g;){var T=31-Ee(g),L=1<<T;u|=a[T],g&=~L}return Ru=u,An(),d}function u5(a,u){fn=null,it.H=id,u===Wt||u===Dt?(u=be(),kr=3):u===se?(u=be(),kr=4):kr=u===x0?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,yo=u,Qn===null&&(Oi=1,Pp(a,Ba(u,a.current)))}function c5(){var a=ri.current;return a===null?!0:(tr&4194048)===tr?lr===null:(tr&62914560)===tr||(tr&536870912)!==0?a===lr:!1}function h5(){var a=it.H;return it.H=id,a===null?id:a}function f5(){var a=it.A;return it.A=DC,a}function Wp(){Oi=4,ac||(tr&4194048)!==tr&&ri.current!==null||(zh=!0),(oc&134217727)===0&&(Hc&134217727)===0||Kr===null||cc(Kr,tr,vo,!1)}function G0(a,u,d){var g=xr;xr|=2;var T=h5(),L=f5();(Kr!==a||tr!==u)&&(Gp=null,Gh(a,u)),u=!1;var at=Oi;t:do try{if(kr!==0&&Qn!==null){var St=Qn,jt=yo;switch(kr){case 8:H0(),at=6;break t;case 3:case 2:case 9:case 6:ri.current===null&&(u=!0);var oe=kr;if(kr=0,yo=null,Vh(a,St,jt,oe),d&&zh){at=0;break t}break;default:oe=kr,kr=0,yo=null,Vh(a,St,jt,oe)}}FC(),at=Oi;break}catch(ye){u5(a,ye)}while(!0);return u&&a.shellSuspendCounter++,Po=Pl=null,xr=g,it.H=T,it.A=L,Qn===null&&(Kr=null,tr=0,An()),at}function FC(){for(;Qn!==null;)d5(Qn)}function BC(a,u){var d=xr;xr|=2;var g=h5(),T=f5();Kr!==a||tr!==u?(Gp=null,Hp=le()+500,Gh(a,u)):zh=Ms(a,u);t:do try{if(kr!==0&&Qn!==null){u=Qn;var L=yo;e:switch(kr){case 1:kr=0,yo=null,Vh(a,u,L,1);break;case 2:case 9:if(ee(L)){kr=0,yo=null,p5(u);break}u=function(){kr!==2&&kr!==9||Kr!==a||(kr=7),Hl(a)},L.then(u,u);break t;case 3:kr=7;break t;case 4:kr=5;break t;case 7:ee(L)?(kr=0,yo=null,p5(u)):(kr=0,yo=null,Vh(a,u,L,7));break;case 5:var at=null;switch(Qn.tag){case 26:at=Qn.memoizedState;case 5:case 27:var St=Qn;if(at?J5(at):St.stateNode.complete){kr=0,yo=null;var jt=St.sibling;if(jt!==null)Qn=jt;else{var oe=St.return;oe!==null?(Qn=oe,Kp(oe)):Qn=null}break e}}kr=0,yo=null,Vh(a,u,L,5);break;case 6:kr=0,yo=null,Vh(a,u,L,6);break;case 8:H0(),Oi=6;break t;default:throw Error(n(462))}}IC();break}catch(ye){u5(a,ye)}while(!0);return Po=Pl=null,it.H=g,it.A=T,xr=d,Qn!==null?0:(Kr=null,tr=0,An(),Oi)}function IC(){for(;Qn!==null&&!Ct();)d5(Qn)}function d5(a){var u=Bw(a.alternate,a,Ru);a.memoizedProps=a.pendingProps,u===null?Kp(a):Qn=u}function p5(a){var u=a,d=u.alternate;switch(u.tag){case 15:case 0:u=Lw(d,u,u.pendingProps,u.type,void 0,tr);break;case 11:u=Lw(d,u,u.pendingProps,u.type.render,u.ref,tr);break;case 5:Oh(u);default:jw(d,u),u=Qn=Pc(u,Ru),u=Bw(d,u,Ru)}a.memoizedProps=a.pendingProps,u===null?Kp(a):Qn=u}function Vh(a,u,d,g){Po=Pl=null,Oh(u),Ae=null,tn=0;var T=u.return;try{if(CC(a,T,u,d,tr)){Oi=1,Pp(a,Ba(d,a.current)),Qn=null;return}}catch(L){if(T!==null)throw Qn=T,L;Oi=1,Pp(a,Ba(d,a.current)),Qn=null;return}u.flags&32768?(Yn||g===1?a=!0:zh||(tr&536870912)!==0?a=!1:(ac=a=!0,(g===2||g===9||g===3||g===6)&&(g=ri.current,g!==null&&g.tag===13&&(g.flags|=16384))),m5(u,a)):Kp(u)}function Kp(a){var u=a;do{if((u.flags&32768)!==0){m5(u,ac);return}a=u.return;var d=kC(u.alternate,u,Ru);if(d!==null){Qn=d;return}if(u=u.sibling,u!==null){Qn=u;return}Qn=u=a}while(u!==null);Oi===0&&(Oi=5)}function m5(a,u){do{var d=RC(a.alternate,a);if(d!==null){d.flags&=32767,Qn=d;return}if(d=a.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!u&&(a=a.sibling,a!==null)){Qn=a;return}Qn=a=d}while(a!==null);Oi=6,Qn=null}function g5(a,u,d,g,T,L,at,St,jt){a.cancelPendingCommit=null;do $p();while(ys!==0);if((xr&6)!==0)throw Error(n(327));if(u!==null){if(u===a.current)throw Error(n(177));if(L=u.lanes|u.childLanes,L|=on,fa(a,d,L,at,St,jt),a===Kr&&(Qn=Kr=null,tr=0),Hh=u,uc=a,Lu=d,U0=L,z0=T,s5=g,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,qC(De,function(){return x5(),null})):(a.callbackNode=null,a.callbackPriority=0),g=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||g){g=it.T,it.T=null,T=st.p,st.p=2,at=xr,xr|=4;try{LC(a,u,d)}finally{xr=at,st.p=T,it.T=g}}ys=1,y5(),v5(),b5()}}function y5(){if(ys===1){ys=0;var a=uc,u=Hh,d=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||d){d=it.T,it.T=null;var g=st.p;st.p=2;var T=xr;xr|=4;try{Qw(u,a);var L=n1,at=ut(a.containerInfo),St=L.focusedElem,jt=L.selectionRange;if(at!==St&&St&&St.ownerDocument&&J(St.ownerDocument.documentElement,St)){if(jt!==null&&bt(St)){var oe=jt.start,ye=jt.end;if(ye===void 0&&(ye=oe),"selectionStart"in St)St.selectionStart=oe,St.selectionEnd=Math.min(ye,St.value.length);else{var xe=St.ownerDocument||document,ue=xe&&xe.defaultView||window;if(ue.getSelection){var he=ue.getSelection(),Ze=St.textContent.length,bn=Math.min(jt.start,Ze),jr=jt.end===void 0?bn:Math.min(jt.end,Ze);!he.extend&&bn>jr&&(at=jr,jr=bn,bn=at);var Jt=V(St,bn),Kt=V(St,jr);if(Jt&&Kt&&(he.rangeCount!==1||he.anchorNode!==Jt.node||he.anchorOffset!==Jt.offset||he.focusNode!==Kt.node||he.focusOffset!==Kt.offset)){var ae=xe.createRange();ae.setStart(Jt.node,Jt.offset),he.removeAllRanges(),bn>jr?(he.addRange(ae),he.extend(Kt.node,Kt.offset)):(ae.setEnd(Kt.node,Kt.offset),he.addRange(ae))}}}}for(xe=[],he=St;he=he.parentNode;)he.nodeType===1&&xe.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof St.focus=="function"&&St.focus(),St=0;St<xe.length;St++){var we=xe[St];we.element.scrollLeft=we.left,we.element.scrollTop=we.top}}am=!!e1,n1=e1=null}finally{xr=T,st.p=g,it.T=d}}a.current=u,ys=2}}function v5(){if(ys===2){ys=0;var a=uc,u=Hh,d=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||d){d=it.T,it.T=null;var g=st.p;st.p=2;var T=xr;xr|=4;try{Ww(a,u.alternate,u)}finally{xr=T,st.p=g,it.T=d}}ys=3}}function b5(){if(ys===4||ys===3){ys=0,$t();var a=uc,u=Hh,d=Lu,g=s5;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?ys=5:(ys=0,Hh=uc=null,w5(a,a.pendingLanes));var T=a.pendingLanes;if(T===0&&(lc=null),qr(d),u=u.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Xe,u,void 0,(u.current.flags&128)===128)}catch{}if(g!==null){u=it.T,T=st.p,st.p=2,it.T=null;try{for(var L=a.onRecoverableError,at=0;at<g.length;at++){var St=g[at];L(St.value,{componentStack:St.stack})}}finally{it.T=u,st.p=T}}(Lu&3)!==0&&$p(),Hl(a),T=a.pendingLanes,(d&261930)!==0&&(T&42)!==0?a===q0?dd++:(dd=0,q0=a):dd=0,pd(0)}}function w5(a,u){(a.pooledCacheLanes&=u)===0&&(u=a.pooledCache,u!=null&&(a.pooledCache=null,Bc(u)))}function $p(){return y5(),v5(),b5(),x5()}function x5(){if(ys!==5)return!1;var a=uc,u=U0;U0=0;var d=qr(Lu),g=it.T,T=st.p;try{st.p=32>d?32:d,it.T=null,d=z0,z0=null;var L=uc,at=Lu;if(ys=0,Hh=uc=null,Lu=0,(xr&6)!==0)throw Error(n(331));var St=xr;if(xr|=4,n5(L.current),Jw(L,L.current,at,d),xr=St,pd(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Xe,L)}catch{}return!0}finally{st.p=T,it.T=g,w5(a,u)}}function _5(a,u,d){u=Ba(d,u),u=w0(a.stateNode,u,2),a=Dn(a,u,2),a!==null&&(nn(a,2),Hl(a))}function Rr(a,u,d){if(a.tag===3)_5(a,a,d);else for(;u!==null;){if(u.tag===3){_5(u,a,d);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(lc===null||!lc.has(g))){a=Ba(d,a),d=Aw(2),g=Dn(u,d,2),g!==null&&(Sw(d,g,u,a),nn(g,2),Hl(g));break}}u=u.return}}function V0(a,u,d){var g=a.pingCache;if(g===null){g=a.pingCache=new PC;var T=new Set;g.set(u,T)}else T=g.get(u),T===void 0&&(T=new Set,g.set(u,T));T.has(d)||(B0=!0,T.add(d),a=jC.bind(null,a,u,d),u.then(a,a))}function jC(a,u,d){var g=a.pingCache;g!==null&&g.delete(u),a.pingedLanes|=a.suspendedLanes&d,a.warmLanes&=~d,Kr===a&&(tr&d)===d&&(Oi===4||Oi===3&&(tr&62914560)===tr&&300>le()-qp?(xr&2)===0&&Gh(a,0):I0|=d,qh===tr&&(qh=0)),Hl(a)}function A5(a,u){u===0&&(u=La()),a=ar(a,u),a!==null&&(nn(a,u),Hl(a))}function UC(a){var u=a.memoizedState,d=0;u!==null&&(d=u.retryLane),A5(a,d)}function zC(a,u){var d=0;switch(a.tag){case 31:case 13:var g=a.stateNode,T=a.memoizedState;T!==null&&(d=T.retryLane);break;case 19:g=a.stateNode;break;case 22:g=a.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(u),A5(a,d)}function qC(a,u){return _t(a,u)}var Xp=null,Wh=null,W0=!1,Yp=!1,K0=!1,hc=0;function Hl(a){a!==Wh&&a.next===null&&(Wh===null?Xp=Wh=a:Wh=Wh.next=a),Yp=!0,W0||(W0=!0,GC())}function pd(a,u){if(!K0&&Yp){K0=!0;do for(var d=!1,g=Xp;g!==null;){if(a!==0){var T=g.pendingLanes;if(T===0)var L=0;else{var at=g.suspendedLanes,St=g.pingedLanes;L=(1<<31-Ee(42|a)+1)-1,L&=T&~(at&~St),L=L&201326741?L&201326741|1:L?L|2:0}L!==0&&(d=!0,T5(g,L))}else L=tr,L=Vn(g,g===Kr?L:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(L&3)===0||Ms(g,L)||(d=!0,T5(g,L));g=g.next}while(d);K0=!1}}function HC(){S5()}function S5(){Yp=W0=!1;var a=0;hc!==0&&tT()&&(a=hc);for(var u=le(),d=null,g=Xp;g!==null;){var T=g.next,L=E5(g,u);L===0?(g.next=null,d===null?Xp=T:d.next=T,T===null&&(Wh=d)):(d=g,(a!==0||(L&3)!==0)&&(Yp=!0)),g=T}ys!==0&&ys!==5||pd(a),hc!==0&&(hc=0)}function E5(a,u){for(var d=a.suspendedLanes,g=a.pingedLanes,T=a.expirationTimes,L=a.pendingLanes&-62914561;0<L;){var at=31-Ee(L),St=1<<at,jt=T[at];jt===-1?((St&d)===0||(St&g)!==0)&&(T[at]=$i(St,u)):jt<=u&&(a.expiredLanes|=St),L&=~St}if(u=Kr,d=tr,d=Vn(a,a===u?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g=a.callbackNode,d===0||a===u&&(kr===2||kr===9)||a.cancelPendingCommit!==null)return g!==null&&g!==null&&kt(g),a.callbackNode=null,a.callbackPriority=0;if((d&3)===0||Ms(a,d)){if(u=d&-d,u===a.callbackPriority)return u;switch(g!==null&&kt(g),qr(d)){case 2:case 8:d=Ce;break;case 32:d=De;break;case 268435456:d=ln;break;default:d=De}return g=C5.bind(null,a),d=_t(d,g),a.callbackPriority=u,a.callbackNode=d,u}return g!==null&&g!==null&&kt(g),a.callbackPriority=2,a.callbackNode=null,2}function C5(a,u){if(ys!==0&&ys!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if($p()&&a.callbackNode!==d)return null;var g=tr;return g=Vn(a,a===Kr?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g===0?null:(o5(a,g,u),E5(a,le()),a.callbackNode!=null&&a.callbackNode===d?C5.bind(null,a):null)}function T5(a,u){if($p())return null;o5(a,u,!0)}function GC(){nT(function(){(xr&6)!==0?_t(fe,HC):S5()})}function $0(){if(hc===0){var a=x;a===0&&(a=ve,ve<<=1,(ve&261888)===0&&(ve=256)),hc=a}return hc}function N5(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:gi(""+a)}function k5(a,u){var d=u.ownerDocument.createElement("input");return d.name=u.name,d.value=u.value,a.id&&d.setAttribute("form",a.id),u.parentNode.insertBefore(d,u),a=new FormData(a),d.parentNode.removeChild(d),a}function VC(a,u,d,g,T){if(u==="submit"&&d&&d.stateNode===T){var L=N5((T[dr]||null).action),at=g.submitter;at&&(u=(u=at[dr]||null)?N5(u.formAction):at.getAttribute("formAction"),u!==null&&(L=u,at=null));var St=new ta("action","action",null,g,T);a.push({event:St,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(hc!==0){var jt=at?k5(T,at):new FormData(T);p0(d,{pending:!0,data:jt,method:T.method,action:L},null,jt)}}else typeof L=="function"&&(St.preventDefault(),jt=at?k5(T,at):new FormData(T),p0(d,{pending:!0,data:jt,method:T.method,action:L},L,jt))},currentTarget:T}]})}}for(var X0=0;X0<Be.length;X0++){var Y0=Be[X0],WC=Y0.toLowerCase(),KC=Y0[0].toUpperCase()+Y0.slice(1);ke(WC,"on"+KC)}ke(ie,"onAnimationEnd"),ke(Zt,"onAnimationIteration"),ke(me,"onAnimationStart"),ke("dblclick","onDoubleClick"),ke("focusin","onFocus"),ke("focusout","onBlur"),ke(Te,"onTransitionRun"),ke(Pe,"onTransitionStart"),ke(Me,"onTransitionCancel"),ke(Ne,"onTransitionEnd"),pa("onMouseEnter",["mouseout","mouseover"]),pa("onMouseLeave",["mouseout","mouseover"]),pa("onPointerEnter",["pointerout","pointerover"]),pa("onPointerLeave",["pointerout","pointerover"]),js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),js("onBeforeInput",["compositionend","keypress","textInput","paste"]),js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var md="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$C=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(md));function R5(a,u){u=(u&4)!==0;for(var d=0;d<a.length;d++){var g=a[d],T=g.event;g=g.listeners;t:{var L=void 0;if(u)for(var at=g.length-1;0<=at;at--){var St=g[at],jt=St.instance,oe=St.currentTarget;if(St=St.listener,jt!==L&&T.isPropagationStopped())break t;L=St,T.currentTarget=oe;try{L(T)}catch(ye){qe(ye)}T.currentTarget=null,L=jt}else for(at=0;at<g.length;at++){if(St=g[at],jt=St.instance,oe=St.currentTarget,St=St.listener,jt!==L&&T.isPropagationStopped())break t;L=St,T.currentTarget=oe;try{L(T)}catch(ye){qe(ye)}T.currentTarget=null,L=jt}}}}function Zn(a,u){var d=u[Xi];d===void 0&&(d=u[Xi]=new Set);var g=a+"__bubble";d.has(g)||(L5(u,a,2,!1),d.add(g))}function Q0(a,u,d){var g=0;u&&(g|=4),L5(d,a,g,u)}var Qp="_reactListening"+Math.random().toString(36).slice(2);function Z0(a){if(!a[Qp]){a[Qp]=!0,Oa.forEach(function(d){d!=="selectionchange"&&($C.has(d)||Q0(d,!1,a),Q0(d,!0,a))});var u=a.nodeType===9?a:a.ownerDocument;u===null||u[Qp]||(u[Qp]=!0,Q0("selectionchange",!1,u))}}function L5(a,u,d,g){switch(ax(u)){case 2:var T=_T;break;case 8:T=AT;break;default:T=d1}d=T.bind(null,u,d,a),T=void 0,!gu||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(T=!0),g?T!==void 0?a.addEventListener(u,d,{capture:!0,passive:T}):a.addEventListener(u,d,!0):T!==void 0?a.addEventListener(u,d,{passive:T}):a.addEventListener(u,d,!1)}function J0(a,u,d,g,T){var L=g;if((u&1)===0&&(u&2)===0&&g!==null)t:for(;;){if(g===null)return;var at=g.tag;if(at===3||at===4){var St=g.stateNode.containerInfo;if(St===T)break;if(at===4)for(at=g.return;at!==null;){var jt=at.tag;if((jt===3||jt===4)&&at.stateNode.containerInfo===T)return;at=at.return}for(;St!==null;){if(at=Bs(St),at===null)return;if(jt=at.tag,jt===5||jt===6||jt===26||jt===27){g=L=at;continue t}St=St.parentNode}}g=g.return}ko(function(){var oe=L,ye=No(d),xe=[];t:{var ue=ze.get(a);if(ue!==void 0){var he=ta,Ze=a;switch(a){case"keypress":if(As(d)===0)break t;case"keydown":case"keyup":he=In;break;case"focusin":Ze="focus",he=na;break;case"focusout":Ze="blur",he=na;break;case"beforeblur":case"afterblur":he=na;break;case"click":if(d.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Qo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Ma;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=ti;break;case ie:case Zt:case me:he=U;break;case Ne:he=yi;break;case"scroll":case"scrollend":he=oo;break;case"wheel":he=Ss;break;case"copy":case"cut":case"paste":he=Ot;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Qr;break;case"toggle":case"beforetoggle":he=Tl}var bn=(u&4)!==0,jr=!bn&&(a==="scroll"||a==="scrollend"),Jt=bn?ue!==null?ue+"Capture":null:ue;bn=[];for(var Kt=oe,ae;Kt!==null;){var we=Kt;if(ae=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||ae===null||Jt===null||(we=os(Kt,Jt),we!=null&&bn.push(gd(Kt,we,ae))),jr)break;Kt=Kt.return}0<bn.length&&(ue=new he(ue,Ze,null,d,ye),xe.push({event:ue,listeners:bn}))}}if((u&7)===0){t:{if(ue=a==="mouseover"||a==="pointerover",he=a==="mouseout"||a==="pointerout",ue&&d!==Zi&&(Ze=d.relatedTarget||d.fromElement)&&(Bs(Ze)||Ze[Hr]))break t;if((he||ue)&&(ue=ye.window===ye?ye:(ue=ye.ownerDocument)?ue.defaultView||ue.parentWindow:window,he?(Ze=d.relatedTarget||d.toElement,he=oe,Ze=Ze?Bs(Ze):null,Ze!==null&&(jr=s(Ze),bn=Ze.tag,Ze!==jr||bn!==5&&bn!==27&&bn!==6)&&(Ze=null)):(he=null,Ze=oe),he!==Ze)){if(bn=Qo,we="onMouseLeave",Jt="onMouseEnter",Kt="mouse",(a==="pointerout"||a==="pointerover")&&(bn=Qr,we="onPointerLeave",Jt="onPointerEnter",Kt="pointer"),jr=he==null?ue:Is(he),ae=Ze==null?ue:Is(Ze),ue=new bn(we,Kt+"leave",he,d,ye),ue.target=jr,ue.relatedTarget=ae,we=null,Bs(ye)===oe&&(bn=new bn(Jt,Kt+"enter",Ze,d,ye),bn.target=ae,bn.relatedTarget=jr,we=bn),jr=we,he&&Ze)e:{for(bn=XC,Jt=he,Kt=Ze,ae=0,we=Jt;we;we=bn(we))ae++;we=0;for(var pn=Kt;pn;pn=bn(pn))we++;for(;0<ae-we;)Jt=bn(Jt),ae--;for(;0<we-ae;)Kt=bn(Kt),we--;for(;ae--;){if(Jt===Kt||Kt!==null&&Jt===Kt.alternate){bn=Jt;break e}Jt=bn(Jt),Kt=bn(Kt)}bn=null}else bn=null;he!==null&&O5(xe,ue,he,bn,!1),Ze!==null&&jr!==null&&O5(xe,jr,Ze,bn,!0)}}t:{if(ue=oe?Is(oe):window,he=ue.nodeName&&ue.nodeName.toLowerCase(),he==="select"||he==="input"&&ue.type==="file")var pr=Sa;else if(nl(ue))if(Zr)pr=cs;else{pr=yr;var an=rl}else he=ue.nodeName,!he||he.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?oe&&pu(oe.elementType)&&(pr=Sa):pr=Rl;if(pr&&(pr=pr(a,oe))){Cs(xe,pr,d,ye);break t}an&&an(a,ue,oe),a==="focusout"&&oe&&ue.type==="number"&&oe.memoizedProps.value!=null&&Ko(ue,"number",ue.value)}switch(an=oe?Is(oe):window,a){case"focusin":(nl(an)||an.contentEditable==="true")&&(Rt=an,Vt=oe,Yt=null);break;case"focusout":Yt=Vt=Rt=null;break;case"mousedown":Ht=!0;break;case"contextmenu":case"mouseup":case"dragend":Ht=!1,Bt(xe,d,ye);break;case"selectionchange":if(Tt)break;case"keydown":case"keyup":Bt(xe,d,ye)}var Fn;if(ra)t:{switch(a){case"compositionstart":var er="onCompositionStart";break t;case"compositionend":er="onCompositionEnd";break t;case"compositionupdate":er="onCompositionUpdate";break t}er=void 0}else _a?ho(a,d)&&(er="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(er="onCompositionStart");er&&(xa&&d.locale!=="ko"&&(_a||er!=="onCompositionStart"?er==="onCompositionEnd"&&_a&&(Fn=Lo()):(ls=ye,Ro="value"in ls?ls.value:ls.textContent,_a=!0)),an=Zp(oe,er),0<an.length&&(er=new Qt(er,a,null,d,ye),xe.push({event:er,listeners:an}),Fn?er.data=Fn:(Fn=kl(d),Fn!==null&&(er.data=Fn)))),(Fn=tl?ts(a,d):fo(a,d))&&(er=Zp(oe,"onBeforeInput"),0<er.length&&(an=new Qt("onBeforeInput","beforeinput",null,d,ye),xe.push({event:an,listeners:er}),an.data=Fn)),VC(xe,a,oe,d,ye)}R5(xe,u)})}function gd(a,u,d){return{instance:a,listener:u,currentTarget:d}}function Zp(a,u){for(var d=u+"Capture",g=[];a!==null;){var T=a,L=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||L===null||(T=os(a,d),T!=null&&g.unshift(gd(a,T,L)),T=os(a,u),T!=null&&g.push(gd(a,T,L))),a.tag===3)return g;a=a.return}return[]}function XC(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function O5(a,u,d,g,T){for(var L=u._reactName,at=[];d!==null&&d!==g;){var St=d,jt=St.alternate,oe=St.stateNode;if(St=St.tag,jt!==null&&jt===g)break;St!==5&&St!==26&&St!==27||oe===null||(jt=oe,T?(oe=os(d,L),oe!=null&&at.unshift(gd(d,oe,jt))):T||(oe=os(d,L),oe!=null&&at.push(gd(d,oe,jt)))),d=d.return}at.length!==0&&a.push({event:u,listeners:at})}var YC=/\r\n?/g,QC=/\u0000|\uFFFD/g;function D5(a){return(typeof a=="string"?a:""+a).replace(YC,`
`).replace(QC,"")}function P5(a,u){return u=D5(u),D5(a)===u}function Ir(a,u,d,g,T,L){switch(d){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||Zs(a,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&Zs(a,""+g);break;case"className":Da(a,"class",g);break;case"tabIndex":Da(a,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Da(a,d,g);break;case"style":du(a,g,L);break;case"data":if(u!=="object"){Da(a,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||d!=="href")){a.removeAttribute(d);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(d);break}g=gi(""+g),a.setAttribute(d,g);break;case"action":case"formAction":if(typeof g=="function"){a.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof L=="function"&&(d==="formAction"?(u!=="input"&&Ir(a,u,"name",T.name,T,null),Ir(a,u,"formEncType",T.formEncType,T,null),Ir(a,u,"formMethod",T.formMethod,T,null),Ir(a,u,"formTarget",T.formTarget,T,null)):(Ir(a,u,"encType",T.encType,T,null),Ir(a,u,"method",T.method,T,null),Ir(a,u,"target",T.target,T,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(d);break}g=gi(""+g),a.setAttribute(d,g);break;case"onClick":g!=null&&(a.onclick=_s);break;case"onScroll":g!=null&&Zn("scroll",a);break;case"onScrollEnd":g!=null&&Zn("scrollend",a);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(d=g.__html,d!=null){if(T.children!=null)throw Error(n(60));a.innerHTML=d}}break;case"multiple":a.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":a.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){a.removeAttribute("xlink:href");break}d=gi(""+g),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(d,""+g):a.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(d,""):a.removeAttribute(d);break;case"capture":case"download":g===!0?a.setAttribute(d,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(d,g):a.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?a.setAttribute(d,g):a.removeAttribute(d);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?a.removeAttribute(d):a.setAttribute(d,g);break;case"popover":Zn("beforetoggle",a),Zn("toggle",a),vn(a,"popover",g);break;case"xlinkActuate":Qs(a,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Qs(a,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Qs(a,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Qs(a,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Qs(a,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Qs(a,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Qs(a,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Qs(a,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Qs(a,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":vn(a,"is",g);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=mu.get(d)||d,vn(a,d,g))}}function t1(a,u,d,g,T,L){switch(d){case"style":du(a,g,L);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(d=g.__html,d!=null){if(T.children!=null)throw Error(n(60));a.innerHTML=d}}break;case"children":typeof g=="string"?Zs(a,g):(typeof g=="number"||typeof g=="bigint")&&Zs(a,""+g);break;case"onScroll":g!=null&&Zn("scroll",a);break;case"onScrollEnd":g!=null&&Zn("scrollend",a);break;case"onClick":g!=null&&(a.onclick=_s);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yi.hasOwnProperty(d))t:{if(d[0]==="o"&&d[1]==="n"&&(T=d.endsWith("Capture"),u=d.slice(2,T?d.length-7:void 0),L=a[dr]||null,L=L!=null?L[d]:null,typeof L=="function"&&a.removeEventListener(u,L,T),typeof g=="function")){typeof L!="function"&&L!==null&&(d in a?a[d]=null:a.hasAttribute(d)&&a.removeAttribute(d)),a.addEventListener(u,g,T);break t}d in a?a[d]=g:g===!0?a.setAttribute(d,""):vn(a,d,g)}}}function Vs(a,u,d){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Zn("error",a),Zn("load",a);var g=!1,T=!1,L;for(L in d)if(d.hasOwnProperty(L)){var at=d[L];if(at!=null)switch(L){case"src":g=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:Ir(a,u,L,at,d,null)}}T&&Ir(a,u,"srcSet",d.srcSet,d,null),g&&Ir(a,u,"src",d.src,d,null);return;case"input":Zn("invalid",a);var St=L=at=T=null,jt=null,oe=null;for(g in d)if(d.hasOwnProperty(g)){var ye=d[g];if(ye!=null)switch(g){case"name":T=ye;break;case"type":at=ye;break;case"checked":jt=ye;break;case"defaultChecked":oe=ye;break;case"value":L=ye;break;case"defaultValue":St=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(n(137,u));break;default:Ir(a,u,g,ye,d,null)}}Sl(a,L,St,jt,oe,at,T,!1);return;case"select":Zn("invalid",a),g=at=L=null;for(T in d)if(d.hasOwnProperty(T)&&(St=d[T],St!=null))switch(T){case"value":L=St;break;case"defaultValue":at=St;break;case"multiple":g=St;default:Ir(a,u,T,St,d,null)}u=L,d=at,a.multiple=!!g,u!=null?Si(a,!!g,u,!1):d!=null&&Si(a,!!g,d,!0);return;case"textarea":Zn("invalid",a),L=T=g=null;for(at in d)if(d.hasOwnProperty(at)&&(St=d[at],St!=null))switch(at){case"value":g=St;break;case"defaultValue":T=St;break;case"children":L=St;break;case"dangerouslySetInnerHTML":if(St!=null)throw Error(n(91));break;default:Ir(a,u,at,St,d,null)}To(a,g,T,L);return;case"option":for(jt in d)d.hasOwnProperty(jt)&&(g=d[jt],g!=null)&&(jt==="selected"?a.selected=g&&typeof g!="function"&&typeof g!="symbol":Ir(a,u,jt,g,d,null));return;case"dialog":Zn("beforetoggle",a),Zn("toggle",a),Zn("cancel",a),Zn("close",a);break;case"iframe":case"object":Zn("load",a);break;case"video":case"audio":for(g=0;g<md.length;g++)Zn(md[g],a);break;case"image":Zn("error",a),Zn("load",a);break;case"details":Zn("toggle",a);break;case"embed":case"source":case"link":Zn("error",a),Zn("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in d)if(d.hasOwnProperty(oe)&&(g=d[oe],g!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:Ir(a,u,oe,g,d,null)}return;default:if(pu(u)){for(ye in d)d.hasOwnProperty(ye)&&(g=d[ye],g!==void 0&&t1(a,u,ye,g,d,void 0));return}}for(St in d)d.hasOwnProperty(St)&&(g=d[St],g!=null&&Ir(a,u,St,g,d,null))}function ZC(a,u,d,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,L=null,at=null,St=null,jt=null,oe=null,ye=null;for(he in d){var xe=d[he];if(d.hasOwnProperty(he)&&xe!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":jt=xe;default:g.hasOwnProperty(he)||Ir(a,u,he,null,g,xe)}}for(var ue in g){var he=g[ue];if(xe=d[ue],g.hasOwnProperty(ue)&&(he!=null||xe!=null))switch(ue){case"type":L=he;break;case"name":T=he;break;case"checked":oe=he;break;case"defaultChecked":ye=he;break;case"value":at=he;break;case"defaultValue":St=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(n(137,u));break;default:he!==xe&&Ir(a,u,ue,he,g,xe)}}ya(a,at,St,jt,oe,ye,L,T);return;case"select":he=at=St=ue=null;for(L in d)if(jt=d[L],d.hasOwnProperty(L)&&jt!=null)switch(L){case"value":break;case"multiple":he=jt;default:g.hasOwnProperty(L)||Ir(a,u,L,null,g,jt)}for(T in g)if(L=g[T],jt=d[T],g.hasOwnProperty(T)&&(L!=null||jt!=null))switch(T){case"value":ue=L;break;case"defaultValue":St=L;break;case"multiple":at=L;default:L!==jt&&Ir(a,u,T,L,g,jt)}u=St,d=at,g=he,ue!=null?Si(a,!!d,ue,!1):!!g!=!!d&&(u!=null?Si(a,!!d,u,!0):Si(a,!!d,d?[]:"",!1));return;case"textarea":he=ue=null;for(St in d)if(T=d[St],d.hasOwnProperty(St)&&T!=null&&!g.hasOwnProperty(St))switch(St){case"value":break;case"children":break;default:Ir(a,u,St,null,g,T)}for(at in g)if(T=g[at],L=d[at],g.hasOwnProperty(at)&&(T!=null||L!=null))switch(at){case"value":ue=T;break;case"defaultValue":he=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(n(91));break;default:T!==L&&Ir(a,u,at,T,g,L)}El(a,ue,he);return;case"option":for(var Ze in d)ue=d[Ze],d.hasOwnProperty(Ze)&&ue!=null&&!g.hasOwnProperty(Ze)&&(Ze==="selected"?a.selected=!1:Ir(a,u,Ze,null,g,ue));for(jt in g)ue=g[jt],he=d[jt],g.hasOwnProperty(jt)&&ue!==he&&(ue!=null||he!=null)&&(jt==="selected"?a.selected=ue&&typeof ue!="function"&&typeof ue!="symbol":Ir(a,u,jt,ue,g,he));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var bn in d)ue=d[bn],d.hasOwnProperty(bn)&&ue!=null&&!g.hasOwnProperty(bn)&&Ir(a,u,bn,null,g,ue);for(oe in g)if(ue=g[oe],he=d[oe],g.hasOwnProperty(oe)&&ue!==he&&(ue!=null||he!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(n(137,u));break;default:Ir(a,u,oe,ue,g,he)}return;default:if(pu(u)){for(var jr in d)ue=d[jr],d.hasOwnProperty(jr)&&ue!==void 0&&!g.hasOwnProperty(jr)&&t1(a,u,jr,void 0,g,ue);for(ye in g)ue=g[ye],he=d[ye],!g.hasOwnProperty(ye)||ue===he||ue===void 0&&he===void 0||t1(a,u,ye,ue,g,he);return}}for(var Jt in d)ue=d[Jt],d.hasOwnProperty(Jt)&&ue!=null&&!g.hasOwnProperty(Jt)&&Ir(a,u,Jt,null,g,ue);for(xe in g)ue=g[xe],he=d[xe],!g.hasOwnProperty(xe)||ue===he||ue==null&&he==null||Ir(a,u,xe,ue,g,he)}function M5(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function JC(){if(typeof performance.getEntriesByType=="function"){for(var a=0,u=0,d=performance.getEntriesByType("resource"),g=0;g<d.length;g++){var T=d[g],L=T.transferSize,at=T.initiatorType,St=T.duration;if(L&&St&&M5(at)){for(at=0,St=T.responseEnd,g+=1;g<d.length;g++){var jt=d[g],oe=jt.startTime;if(oe>St)break;var ye=jt.transferSize,xe=jt.initiatorType;ye&&M5(xe)&&(jt=jt.responseEnd,at+=ye*(jt<St?1:(St-oe)/(jt-oe)))}if(--g,u+=8*(L+at)/(T.duration/1e3),a++,10<a)break}}if(0<a)return u/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var e1=null,n1=null;function Jp(a){return a.nodeType===9?a:a.ownerDocument}function F5(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function B5(a,u){if(a===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&u==="foreignObject"?0:a}function r1(a,u){return a==="textarea"||a==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var i1=null;function tT(){var a=window.event;return a&&a.type==="popstate"?a===i1?!1:(i1=a,!0):(i1=null,!1)}var I5=typeof setTimeout=="function"?setTimeout:void 0,eT=typeof clearTimeout=="function"?clearTimeout:void 0,j5=typeof Promise=="function"?Promise:void 0,nT=typeof queueMicrotask=="function"?queueMicrotask:typeof j5<"u"?function(a){return j5.resolve(null).then(a).catch(rT)}:I5;function rT(a){setTimeout(function(){throw a})}function fc(a){return a==="head"}function U5(a,u){var d=u,g=0;do{var T=d.nextSibling;if(a.removeChild(d),T&&T.nodeType===8)if(d=T.data,d==="/$"||d==="/&"){if(g===0){a.removeChild(T),Yh(u);return}g--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")g++;else if(d==="html")yd(a.ownerDocument.documentElement);else if(d==="head"){d=a.ownerDocument.head,yd(d);for(var L=d.firstChild;L;){var at=L.nextSibling,St=L.nodeName;L[Bi]||St==="SCRIPT"||St==="STYLE"||St==="LINK"&&L.rel.toLowerCase()==="stylesheet"||d.removeChild(L),L=at}}else d==="body"&&yd(a.ownerDocument.body);d=T}while(d);Yh(u)}function z5(a,u){var d=a;a=0;do{var g=d.nextSibling;if(d.nodeType===1?u?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(u?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),g&&g.nodeType===8)if(d=g.data,d==="/$"){if(a===0)break;a--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||a++;d=g}while(d)}function s1(a){var u=a.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var d=u;switch(u=u.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":s1(d),no(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}a.removeChild(d)}}function iT(a,u,d,g){for(;a.nodeType===1;){var T=d;if(a.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(g){if(!a[Bi])switch(u){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(L=a.getAttribute("rel"),L==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(L!==T.rel||a.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||a.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||a.getAttribute("title")!==(T.title==null?null:T.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(L=a.getAttribute("src"),(L!==(T.src==null?null:T.src)||a.getAttribute("type")!==(T.type==null?null:T.type)||a.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&L&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(u==="input"&&a.type==="hidden"){var L=T.name==null?null:""+T.name;if(T.type==="hidden"&&a.getAttribute("name")===L)return a}else return a;if(a=Bo(a.nextSibling),a===null)break}return null}function sT(a,u,d){if(u==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!d||(a=Bo(a.nextSibling),a===null))return null;return a}function q5(a,u){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=Bo(a.nextSibling),a===null))return null;return a}function a1(a){return a.data==="$?"||a.data==="$~"}function o1(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function aT(a,u){var d=a.ownerDocument;if(a.data==="$~")a._reactRetry=u;else if(a.data!=="$?"||d.readyState!=="loading")u();else{var g=function(){u(),d.removeEventListener("DOMContentLoaded",g)};d.addEventListener("DOMContentLoaded",g),a._reactRetry=g}}function Bo(a){for(;a!=null;a=a.nextSibling){var u=a.nodeType;if(u===1||u===3)break;if(u===8){if(u=a.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return a}var l1=null;function H5(a){a=a.nextSibling;for(var u=0;a;){if(a.nodeType===8){var d=a.data;if(d==="/$"||d==="/&"){if(u===0)return Bo(a.nextSibling);u--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||u++}a=a.nextSibling}return null}function G5(a){a=a.previousSibling;for(var u=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(u===0)return a;u--}else d!=="/$"&&d!=="/&"||u++}a=a.previousSibling}return null}function V5(a,u,d){switch(u=Jp(d),a){case"html":if(a=u.documentElement,!a)throw Error(n(452));return a;case"head":if(a=u.head,!a)throw Error(n(453));return a;case"body":if(a=u.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function yd(a){for(var u=a.attributes;u.length;)a.removeAttributeNode(u[0]);no(a)}var Io=new Map,W5=new Set;function tm(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Ou=st.d;st.d={f:oT,r:lT,D:uT,C:cT,L:hT,m:fT,X:pT,S:dT,M:mT};function oT(){var a=Ou.f(),u=Vp();return a||u}function lT(a){var u=nr(a);u!==null&&u.tag===5&&u.type==="form"?uw(u):Ou.r(a)}var Kh=typeof document>"u"?null:document;function K5(a,u,d){var g=Kh;if(g&&typeof u=="string"&&u){var T=Dr(u);T='link[rel="'+a+'"][href="'+T+'"]',typeof d=="string"&&(T+='[crossorigin="'+d+'"]'),W5.has(T)||(W5.add(T),a={rel:a,crossOrigin:d,href:u},g.querySelector(T)===null&&(u=g.createElement("link"),Vs(u,"link",a),Xr(u),g.head.appendChild(u)))}}function uT(a){Ou.D(a),K5("dns-prefetch",a,null)}function cT(a,u){Ou.C(a,u),K5("preconnect",a,u)}function hT(a,u,d){Ou.L(a,u,d);var g=Kh;if(g&&a&&u){var T='link[rel="preload"][as="'+Dr(u)+'"]';u==="image"&&d&&d.imageSrcSet?(T+='[imagesrcset="'+Dr(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(T+='[imagesizes="'+Dr(d.imageSizes)+'"]')):T+='[href="'+Dr(a)+'"]';var L=T;switch(u){case"style":L=$h(a);break;case"script":L=Xh(a)}Io.has(L)||(a=p({rel:"preload",href:u==="image"&&d&&d.imageSrcSet?void 0:a,as:u},d),Io.set(L,a),g.querySelector(T)!==null||u==="style"&&g.querySelector(vd(L))||u==="script"&&g.querySelector(bd(L))||(u=g.createElement("link"),Vs(u,"link",a),Xr(u),g.head.appendChild(u)))}}function fT(a,u){Ou.m(a,u);var d=Kh;if(d&&a){var g=u&&typeof u.as=="string"?u.as:"script",T='link[rel="modulepreload"][as="'+Dr(g)+'"][href="'+Dr(a)+'"]',L=T;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":L=Xh(a)}if(!Io.has(L)&&(a=p({rel:"modulepreload",href:a},u),Io.set(L,a),d.querySelector(T)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(bd(L)))return}g=d.createElement("link"),Vs(g,"link",a),Xr(g),d.head.appendChild(g)}}}function dT(a,u,d){Ou.S(a,u,d);var g=Kh;if(g&&a){var T=Ai(g).hoistableStyles,L=$h(a);u=u||"default";var at=T.get(L);if(!at){var St={loading:0,preload:null};if(at=g.querySelector(vd(L)))St.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":u},d),(d=Io.get(L))&&u1(a,d);var jt=at=g.createElement("link");Xr(jt),Vs(jt,"link",a),jt._p=new Promise(function(oe,ye){jt.onload=oe,jt.onerror=ye}),jt.addEventListener("load",function(){St.loading|=1}),jt.addEventListener("error",function(){St.loading|=2}),St.loading|=4,em(at,u,g)}at={type:"stylesheet",instance:at,count:1,state:St},T.set(L,at)}}}function pT(a,u){Ou.X(a,u);var d=Kh;if(d&&a){var g=Ai(d).hoistableScripts,T=Xh(a),L=g.get(T);L||(L=d.querySelector(bd(T)),L||(a=p({src:a,async:!0},u),(u=Io.get(T))&&c1(a,u),L=d.createElement("script"),Xr(L),Vs(L,"link",a),d.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},g.set(T,L))}}function mT(a,u){Ou.M(a,u);var d=Kh;if(d&&a){var g=Ai(d).hoistableScripts,T=Xh(a),L=g.get(T);L||(L=d.querySelector(bd(T)),L||(a=p({src:a,async:!0,type:"module"},u),(u=Io.get(T))&&c1(a,u),L=d.createElement("script"),Xr(L),Vs(L,"link",a),d.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},g.set(T,L))}}function $5(a,u,d,g){var T=(T=ct.current)?tm(T):null;if(!T)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(u=$h(d.href),d=Ai(T).hoistableStyles,g=d.get(u),g||(g={type:"style",instance:null,count:0,state:null},d.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){a=$h(d.href);var L=Ai(T).hoistableStyles,at=L.get(a);if(at||(T=T.ownerDocument||T,at={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},L.set(a,at),(L=T.querySelector(vd(a)))&&!L._p&&(at.instance=L,at.state.loading=5),Io.has(a)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Io.set(a,d),L||gT(T,a,d,at.state))),u&&g===null)throw Error(n(528,""));return at}if(u&&g!==null)throw Error(n(529,""));return null;case"script":return u=d.async,d=d.src,typeof d=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Xh(d),d=Ai(T).hoistableScripts,g=d.get(u),g||(g={type:"script",instance:null,count:0,state:null},d.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function $h(a){return'href="'+Dr(a)+'"'}function vd(a){return'link[rel="stylesheet"]['+a+"]"}function X5(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function gT(a,u,d,g){a.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=a.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),Vs(u,"link",d),Xr(u),a.head.appendChild(u))}function Xh(a){return'[src="'+Dr(a)+'"]'}function bd(a){return"script[async]"+a}function Y5(a,u,d){if(u.count++,u.instance===null)switch(u.type){case"style":var g=a.querySelector('style[data-href~="'+Dr(d.href)+'"]');if(g)return u.instance=g,Xr(g),g;var T=p({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return g=(a.ownerDocument||a).createElement("style"),Xr(g),Vs(g,"style",T),em(g,d.precedence,a),u.instance=g;case"stylesheet":T=$h(d.href);var L=a.querySelector(vd(T));if(L)return u.state.loading|=4,u.instance=L,Xr(L),L;g=X5(d),(T=Io.get(T))&&u1(g,T),L=(a.ownerDocument||a).createElement("link"),Xr(L);var at=L;return at._p=new Promise(function(St,jt){at.onload=St,at.onerror=jt}),Vs(L,"link",g),u.state.loading|=4,em(L,d.precedence,a),u.instance=L;case"script":return L=Xh(d.src),(T=a.querySelector(bd(L)))?(u.instance=T,Xr(T),T):(g=d,(T=Io.get(L))&&(g=p({},d),c1(g,T)),a=a.ownerDocument||a,T=a.createElement("script"),Xr(T),Vs(T,"link",g),a.head.appendChild(T),u.instance=T);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,em(g,d.precedence,a));return u.instance}function em(a,u,d){for(var g=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=g.length?g[g.length-1]:null,L=T,at=0;at<g.length;at++){var St=g[at];if(St.dataset.precedence===u)L=St;else if(L!==T)break}L?L.parentNode.insertBefore(a,L.nextSibling):(u=d.nodeType===9?d.head:d,u.insertBefore(a,u.firstChild))}function u1(a,u){a.crossOrigin==null&&(a.crossOrigin=u.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=u.referrerPolicy),a.title==null&&(a.title=u.title)}function c1(a,u){a.crossOrigin==null&&(a.crossOrigin=u.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=u.referrerPolicy),a.integrity==null&&(a.integrity=u.integrity)}var nm=null;function Q5(a,u,d){if(nm===null){var g=new Map,T=nm=new Map;T.set(d,g)}else T=nm,g=T.get(d),g||(g=new Map,T.set(d,g));if(g.has(a))return g;for(g.set(a,null),d=d.getElementsByTagName(a),T=0;T<d.length;T++){var L=d[T];if(!(L[Bi]||L[Wn]||a==="link"&&L.getAttribute("rel")==="stylesheet")&&L.namespaceURI!=="http://www.w3.org/2000/svg"){var at=L.getAttribute(u)||"";at=a+at;var St=g.get(at);St?St.push(L):g.set(at,[L])}}return g}function Z5(a,u,d){a=a.ownerDocument||a,a.head.insertBefore(d,u==="title"?a.querySelector("head > title"):null)}function yT(a,u,d){if(d===1||u.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;return u.rel==="stylesheet"?(a=u.disabled,typeof u.precedence=="string"&&a==null):!0;case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function J5(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function vT(a,u,d,g){if(d.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var T=$h(g.href),L=u.querySelector(vd(T));if(L){u=L._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(a.count++,a=rm.bind(a),u.then(a,a)),d.state.loading|=4,d.instance=L,Xr(L);return}L=u.ownerDocument||u,g=X5(g),(T=Io.get(T))&&u1(g,T),L=L.createElement("link"),Xr(L);var at=L;at._p=new Promise(function(St,jt){at.onload=St,at.onerror=jt}),Vs(L,"link",g),d.instance=L}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(d,u),(u=d.state.preload)&&(d.state.loading&3)===0&&(a.count++,d=rm.bind(a),u.addEventListener("load",d),u.addEventListener("error",d))}}var h1=0;function bT(a,u){return a.stylesheets&&a.count===0&&sm(a,a.stylesheets),0<a.count||0<a.imgCount?function(d){var g=setTimeout(function(){if(a.stylesheets&&sm(a,a.stylesheets),a.unsuspend){var L=a.unsuspend;a.unsuspend=null,L()}},6e4+u);0<a.imgBytes&&h1===0&&(h1=62500*JC());var T=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&sm(a,a.stylesheets),a.unsuspend)){var L=a.unsuspend;a.unsuspend=null,L()}},(a.imgBytes>h1?50:800)+u);return a.unsuspend=d,function(){a.unsuspend=null,clearTimeout(g),clearTimeout(T)}}:null}function rm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sm(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var im=null;function sm(a,u){a.stylesheets=null,a.unsuspend!==null&&(a.count++,im=new Map,u.forEach(wT,a),im=null,rm.call(a))}function wT(a,u){if(!(u.state.loading&4)){var d=im.get(a);if(d)var g=d.get(null);else{d=new Map,im.set(a,d);for(var T=a.querySelectorAll("link[data-precedence],style[data-precedence]"),L=0;L<T.length;L++){var at=T[L];(at.nodeName==="LINK"||at.getAttribute("media")!=="not all")&&(d.set(at.dataset.precedence,at),g=at)}g&&d.set(null,g)}T=u.instance,at=T.getAttribute("data-precedence"),L=d.get(at)||g,L===g&&d.set(null,T),d.set(at,T),this.count++,g=rm.bind(this),T.addEventListener("load",g),T.addEventListener("error",g),L?L.parentNode.insertBefore(T,L.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(T,a.firstChild)),u.state.loading|=4}}var wd={$$typeof:C,Provider:null,Consumer:null,_currentValue:vt,_currentValue2:vt,_threadCount:0};function xT(a,u,d,g,T,L,at,St,jt){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fi(0),this.hiddenUpdates=Fi(null),this.identifierPrefix=g,this.onUncaughtError=T,this.onCaughtError=L,this.onRecoverableError=at,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=jt,this.incompleteTransitions=new Map}function tx(a,u,d,g,T,L,at,St,jt,oe,ye,xe){return a=new xT(a,u,d,at,jt,oe,ye,xe,St),u=1,L===!0&&(u|=24),L=Ts(3,null,null,u),a.current=L,L.stateNode=a,u=tc(),u.refCount++,a.pooledCache=u,u.refCount++,L.memoizedState={element:g,isDehydrated:d,cache:u},Ie(L),a}function ex(a){return a?(a=fs,a):fs}function nx(a,u,d,g,T,L){T=ex(T),g.context===null?g.context=T:g.pendingContext=T,g=yn(u),g.payload={element:d},L=L===void 0?null:L,L!==null&&(g.callback=L),d=Dn(a,g,u),d!==null&&($a(d,a,u),br(d,a,u))}function rx(a,u){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<u?d:u}}function f1(a,u){rx(a,u),(a=a.alternate)&&rx(a,u)}function ix(a){if(a.tag===13||a.tag===31){var u=ar(a,67108864);u!==null&&$a(u,a,67108864),f1(a,67108864)}}function sx(a){if(a.tag===13||a.tag===31){var u=bo();u=Or(u);var d=ar(a,u);d!==null&&$a(d,a,u),f1(a,u)}}var am=!0;function _T(a,u,d,g){var T=it.T;it.T=null;var L=st.p;try{st.p=2,d1(a,u,d,g)}finally{st.p=L,it.T=T}}function AT(a,u,d,g){var T=it.T;it.T=null;var L=st.p;try{st.p=8,d1(a,u,d,g)}finally{st.p=L,it.T=T}}function d1(a,u,d,g){if(am){var T=p1(g);if(T===null)J0(a,u,g,om,d),ox(a,g);else if(ET(T,a,u,d,g))g.stopPropagation();else if(ox(a,g),u&4&&-1<ST.indexOf(a)){for(;T!==null;){var L=nr(T);if(L!==null)switch(L.tag){case 3:if(L=L.stateNode,L.current.memoizedState.isDehydrated){var at=Ke(L.pendingLanes);if(at!==0){var St=L;for(St.pendingLanes|=2,St.entangledLanes|=2;at;){var jt=1<<31-Ee(at);St.entanglements[1]|=jt,at&=~jt}Hl(L),(xr&6)===0&&(Hp=le()+500,pd(0))}}break;case 31:case 13:St=ar(L,2),St!==null&&$a(St,L,2),Vp(),f1(L,2)}if(L=p1(g),L===null&&J0(a,u,g,om,d),L===T)break;T=L}T!==null&&g.stopPropagation()}else J0(a,u,g,null,d)}}function p1(a){return a=No(a),m1(a)}var om=null;function m1(a){if(om=null,a=Bs(a),a!==null){var u=s(a);if(u===null)a=null;else{var d=u.tag;if(d===13){if(a=l(u),a!==null)return a;a=null}else if(d===31){if(a=o(u),a!==null)return a;a=null}else if(d===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;a=null}else u!==a&&(a=null)}}return om=a,null}function ax(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(re()){case fe:return 2;case Ce:return 8;case De:case Fe:return 32;case ln:return 268435456;default:return 32}default:return 32}}var g1=!1,dc=null,pc=null,mc=null,xd=new Map,_d=new Map,gc=[],ST="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ox(a,u){switch(a){case"focusin":case"focusout":dc=null;break;case"dragenter":case"dragleave":pc=null;break;case"mouseover":case"mouseout":mc=null;break;case"pointerover":case"pointerout":xd.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":_d.delete(u.pointerId)}}function Ad(a,u,d,g,T,L){return a===null||a.nativeEvent!==L?(a={blockedOn:u,domEventName:d,eventSystemFlags:g,nativeEvent:L,targetContainers:[T]},u!==null&&(u=nr(u),u!==null&&ix(u)),a):(a.eventSystemFlags|=g,u=a.targetContainers,T!==null&&u.indexOf(T)===-1&&u.push(T),a)}function ET(a,u,d,g,T){switch(u){case"focusin":return dc=Ad(dc,a,u,d,g,T),!0;case"dragenter":return pc=Ad(pc,a,u,d,g,T),!0;case"mouseover":return mc=Ad(mc,a,u,d,g,T),!0;case"pointerover":var L=T.pointerId;return xd.set(L,Ad(xd.get(L)||null,a,u,d,g,T)),!0;case"gotpointercapture":return L=T.pointerId,_d.set(L,Ad(_d.get(L)||null,a,u,d,g,T)),!0}return!1}function lx(a){var u=Bs(a.target);if(u!==null){var d=s(u);if(d!==null){if(u=d.tag,u===13){if(u=l(d),u!==null){a.blockedOn=u,da(a.priority,function(){sx(d)});return}}else if(u===31){if(u=o(d),u!==null){a.blockedOn=u,da(a.priority,function(){sx(d)});return}}else if(u===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function lm(a){if(a.blockedOn!==null)return!1;for(var u=a.targetContainers;0<u.length;){var d=p1(a.nativeEvent);if(d===null){d=a.nativeEvent;var g=new d.constructor(d.type,d);Zi=g,d.target.dispatchEvent(g),Zi=null}else return u=nr(d),u!==null&&ix(u),a.blockedOn=d,!1;u.shift()}return!0}function ux(a,u,d){lm(a)&&d.delete(u)}function CT(){g1=!1,dc!==null&&lm(dc)&&(dc=null),pc!==null&&lm(pc)&&(pc=null),mc!==null&&lm(mc)&&(mc=null),xd.forEach(ux),_d.forEach(ux)}function um(a,u){a.blockedOn===u&&(a.blockedOn=null,g1||(g1=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,CT)))}var cm=null;function cx(a){cm!==a&&(cm=a,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){cm===a&&(cm=null);for(var u=0;u<a.length;u+=3){var d=a[u],g=a[u+1],T=a[u+2];if(typeof g!="function"){if(m1(g||d)===null)continue;break}var L=nr(d);L!==null&&(a.splice(u,3),u-=3,p0(L,{pending:!0,data:T,method:d.method,action:g},g,T))}}))}function Yh(a){function u(jt){return um(jt,a)}dc!==null&&um(dc,a),pc!==null&&um(pc,a),mc!==null&&um(mc,a),xd.forEach(u),_d.forEach(u);for(var d=0;d<gc.length;d++){var g=gc[d];g.blockedOn===a&&(g.blockedOn=null)}for(;0<gc.length&&(d=gc[0],d.blockedOn===null);)lx(d),d.blockedOn===null&&gc.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(g=0;g<d.length;g+=3){var T=d[g],L=d[g+1],at=T[dr]||null;if(typeof L=="function")at||cx(d);else if(at){var St=null;if(L&&L.hasAttribute("formAction")){if(T=L,at=L[dr]||null)St=at.formAction;else if(m1(T)!==null)continue}else St=at.action;typeof St=="function"?d[g+1]=St:(d.splice(g,3),g-=3),cx(d)}}}function hx(){function a(L){L.canIntercept&&L.info==="react-transition"&&L.intercept({handler:function(){return new Promise(function(at){return T=at})},focusReset:"manual",scroll:"manual"})}function u(){T!==null&&(T(),T=null),g||setTimeout(d,20)}function d(){if(!g&&!navigation.transition){var L=navigation.currentEntry;L&&L.url!=null&&navigation.navigate(L.url,{state:L.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,T=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(d,100),function(){g=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),T!==null&&(T(),T=null)}}}function y1(a){this._internalRoot=a}hm.prototype.render=y1.prototype.render=function(a){var u=this._internalRoot;if(u===null)throw Error(n(409));var d=u.current,g=bo();nx(d,g,a,u,null,null)},hm.prototype.unmount=y1.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var u=a.containerInfo;nx(a.current,2,null,a,null,null),Vp(),u[Hr]=null}};function hm(a){this._internalRoot=a}hm.prototype.unstable_scheduleHydration=function(a){if(a){var u=Jr();a={blockedOn:null,target:a,priority:u};for(var d=0;d<gc.length&&u!==0&&u<gc[d].priority;d++);gc.splice(d,0,a),d===0&&lx(a)}};var fx=t.version;if(fx!=="19.2.4")throw Error(n(527,fx,"19.2.4"));st.findDOMNode=function(a){var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=h(u),a=a!==null?f(a):null,a=a===null?null:a.stateNode,a};var TT={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:it,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fm.isDisabled&&fm.supportsFiber)try{Xe=fm.inject(TT),rn=fm}catch{}}return Ed.createRoot=function(a,u){if(!i(a))throw Error(n(299));var d=!1,g="",T=bw,L=ww,at=xw;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(T=u.onUncaughtError),u.onCaughtError!==void 0&&(L=u.onCaughtError),u.onRecoverableError!==void 0&&(at=u.onRecoverableError)),u=tx(a,1,!1,null,null,d,g,null,T,L,at,hx),a[Hr]=u.current,Z0(a),new y1(u)},Ed.hydrateRoot=function(a,u,d){if(!i(a))throw Error(n(299));var g=!1,T="",L=bw,at=ww,St=xw,jt=null;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onUncaughtError!==void 0&&(L=d.onUncaughtError),d.onCaughtError!==void 0&&(at=d.onCaughtError),d.onRecoverableError!==void 0&&(St=d.onRecoverableError),d.formState!==void 0&&(jt=d.formState)),u=tx(a,1,!0,u,d??null,g,T,jt,L,at,St,hx),u.context=ex(null),d=u.current,g=bo(),g=Or(g),T=yn(g),T.callback=null,Dn(d,T,g),d=g,u.current.lanes=d,nn(u,d),Hl(u),a[Hr]=u.current,Z0(a),new hm(u)},Ed.version="19.2.4",Ed}var Sx;function FT(){if(Sx)return x1.exports;Sx=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),x1.exports=MT(),x1.exports}var BT=FT();var Ex="popstate";function IT(r={}){function t(n,i){let{pathname:s,search:l,hash:o}=n.location;return Jv("",{pathname:s,search:l,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function e(n,i){return typeof i=="string"?i:Qd(i)}return UT(t,e,null,r)}function pi(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function gl(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function jT(){return Math.random().toString(36).substring(2,10)}function Cx(r,t){return{usr:r.state,key:r.key,idx:t}}function Jv(r,t,e=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof t=="string"?jf(t):t,state:e,key:t&&t.key||n||jT()}}function Qd({pathname:r="/",search:t="",hash:e=""}){return t&&t!=="?"&&(r+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(r+=e.charAt(0)==="#"?e:"#"+e),r}function jf(r){let t={};if(r){let e=r.indexOf("#");e>=0&&(t.hash=r.substring(e),r=r.substring(0,e));let n=r.indexOf("?");n>=0&&(t.search=r.substring(n),r=r.substring(0,n)),r&&(t.pathname=r)}return t}function UT(r,t,e,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,l=i.history,o="POP",c=null,h=f();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function f(){return(l.state||{idx:null}).idx}function p(){o="POP";let _=f(),v=_==null?null:_-h;h=_,c&&c({action:o,location:b.location,delta:v})}function y(_,v){o="PUSH";let A=Jv(b.location,_,v);h=f()+1;let C=Cx(A,h),S=b.createHref(A);try{l.pushState(C,"",S)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(S)}s&&c&&c({action:o,location:b.location,delta:1})}function m(_,v){o="REPLACE";let A=Jv(b.location,_,v);h=f();let C=Cx(A,h),S=b.createHref(A);l.replaceState(C,"",S),s&&c&&c({action:o,location:b.location,delta:0})}function w(_){return zT(_)}let b={get action(){return o},get location(){return r(i,l)},listen(_){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Ex,p),c=_,()=>{i.removeEventListener(Ex,p),c=null}},createHref(_){return t(i,_)},createURL:w,encodeLocation(_){let v=w(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:y,replace:m,go(_){return l.go(_)}};return b}function zT(r,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),pi(e,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:Qd(r);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function h3(r,t,e="/"){return qT(r,t,e,!1)}function qT(r,t,e,n){let i=typeof t=="string"?jf(t):t,s=Vu(i.pathname||"/",e);if(s==null)return null;let l=f3(r);HT(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let h=tN(s);o=ZT(l[c],h,n)}return o}function f3(r,t=[],e=[],n="",i=!1){let s=(l,o,c=i,h)=>{let f={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&c)return;pi(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let p=Hu([n,f.relativePath]),y=e.concat(f);l.children&&l.children.length>0&&(pi(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),f3(l.children,t,y,p,c)),!(l.path==null&&!l.index)&&t.push({path:p,score:YT(p,l.index),routesMeta:y})};return r.forEach((l,o)=>{if(l.path===""||!l.path?.includes("?"))s(l,o);else for(let c of d3(l.path))s(l,o,!0,c)}),t}function d3(r){let t=r.split("/");if(t.length===0)return[];let[e,...n]=t,i=e.endsWith("?"),s=e.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let l=d3(n.join("/")),o=[];return o.push(...l.map(c=>c===""?s:[s,c].join("/"))),i&&o.push(...l),o.map(c=>r.startsWith("/")&&c===""?"/":c)}function HT(r){r.sort((t,e)=>t.score!==e.score?e.score-t.score:QT(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var GT=/^:[\w-]+$/,VT=3,WT=2,KT=1,$T=10,XT=-2,Tx=r=>r==="*";function YT(r,t){let e=r.split("/"),n=e.length;return e.some(Tx)&&(n+=XT),t&&(n+=WT),e.filter(i=>!Tx(i)).reduce((i,s)=>i+(GT.test(s)?VT:s===""?KT:$T),n)}function QT(r,t){return r.length===t.length&&r.slice(0,-1).every((n,i)=>n===t[i])?r[r.length-1]-t[t.length-1]:0}function ZT(r,t,e=!1){let{routesMeta:n}=r,i={},s="/",l=[];for(let o=0;o<n.length;++o){let c=n[o],h=o===n.length-1,f=s==="/"?t:t.slice(s.length)||"/",p=ug({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},f),y=c.route;if(!p&&h&&e&&!n[n.length-1].route.index&&(p=ug({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),l.push({params:i,pathname:Hu([s,p.pathname]),pathnameBase:iN(Hu([s,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(s=Hu([s,p.pathnameBase]))}return l}function ug(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[e,n]=JT(r.path,r.caseSensitive,r.end),i=t.match(e);if(!i)return null;let s=i[0],l=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((h,{paramName:f,isOptional:p},y)=>{if(f==="*"){let w=o[y]||"";l=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const m=o[y];return p&&!m?h[f]=void 0:h[f]=(m||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:l,pattern:r}}function JT(r,t=!1,e=!0){gl(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function tN(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return gl(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),r}}function Vu(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=r.charAt(e);return n&&n!=="/"?null:r.slice(e)||"/"}var eN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function nN(r,t="/"){let{pathname:e,search:n="",hash:i=""}=typeof r=="string"?jf(r):r,s;return e?(e=e.replace(/\/\/+/g,"/"),e.startsWith("/")?s=Nx(e.substring(1),"/"):s=Nx(e,t)):s=t,{pathname:s,search:sN(n),hash:aN(i)}}function Nx(r,t){let e=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?e.length>1&&e.pop():i!=="."&&e.push(i)}),e.length>1?e.join("/"):"/"}function E1(r,t,e,n){return`Cannot include a '${r}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rN(r){return r.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function Xb(r){let t=rN(r);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function Yb(r,t,e,n=!1){let i;typeof r=="string"?i=jf(r):(i={...r},pi(!i.pathname||!i.pathname.includes("?"),E1("?","pathname","search",i)),pi(!i.pathname||!i.pathname.includes("#"),E1("#","pathname","hash",i)),pi(!i.search||!i.search.includes("#"),E1("#","search","hash",i)));let s=r===""||i.pathname==="",l=s?"/":i.pathname,o;if(l==null)o=e;else{let p=t.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),p-=1;i.pathname=y.join("/")}o=p>=0?t[p]:"/"}let c=nN(i,o),h=l&&l!=="/"&&l.endsWith("/"),f=(s||l===".")&&e.endsWith("/");return!c.pathname.endsWith("/")&&(h||f)&&(c.pathname+="/"),c}var Hu=r=>r.join("/").replace(/\/\/+/g,"/"),iN=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),sN=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,aN=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,oN=class{constructor(r,t,e,n=!1){this.status=r,this.statusText=t||"",this.internal=n,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function lN(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function uN(r){return r.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var p3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function m3(r,t){let e=r;if(typeof e!="string"||!eN.test(e))return{absoluteURL:void 0,isExternal:!1,to:e};let n=e,i=!1;if(p3)try{let s=new URL(window.location.href),l=e.startsWith("//")?new URL(s.protocol+e):new URL(e),o=Vu(l.pathname,t);l.origin===s.origin&&o!=null?e=o+l.search+l.hash:i=!0}catch{gl(!1,`<Link to="${e}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:i,to:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var g3=["POST","PUT","PATCH","DELETE"];new Set(g3);var cN=["GET",...g3];new Set(cN);var Uf=Lt.createContext(null);Uf.displayName="DataRouter";var Tg=Lt.createContext(null);Tg.displayName="DataRouterState";var hN=Lt.createContext(!1),y3=Lt.createContext({isTransitioning:!1});y3.displayName="ViewTransition";var fN=Lt.createContext(new Map);fN.displayName="Fetchers";var dN=Lt.createContext(null);dN.displayName="Await";var Eo=Lt.createContext(null);Eo.displayName="Navigation";var op=Lt.createContext(null);op.displayName="Location";var vl=Lt.createContext({outlet:null,matches:[],isDataRoute:!1});vl.displayName="Route";var Qb=Lt.createContext(null);Qb.displayName="RouteError";var v3="REACT_ROUTER_ERROR",pN="REDIRECT",mN="ROUTE_ERROR_RESPONSE";function gN(r){if(r.startsWith(`${v3}:${pN}:{`))try{let t=JSON.parse(r.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function yN(r){if(r.startsWith(`${v3}:${mN}:{`))try{let t=JSON.parse(r.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new oN(t.status,t.statusText,t.data)}catch{}}function vN(r,{relative:t}={}){pi(zf(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=Lt.useContext(Eo),{hash:i,pathname:s,search:l}=lp(r,{relative:t}),o=s;return e!=="/"&&(o=s==="/"?e:Hu([e,s])),n.createHref({pathname:o,search:l,hash:i})}function zf(){return Lt.useContext(op)!=null}function Rc(){return pi(zf(),"useLocation() may be used only in the context of a <Router> component."),Lt.useContext(op).location}var b3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function w3(r){Lt.useContext(Eo).static||Lt.useLayoutEffect(r)}function Wu(){let{isDataRoute:r}=Lt.useContext(vl);return r?LN():bN()}function bN(){pi(zf(),"useNavigate() may be used only in the context of a <Router> component.");let r=Lt.useContext(Uf),{basename:t,navigator:e}=Lt.useContext(Eo),{matches:n}=Lt.useContext(vl),{pathname:i}=Rc(),s=JSON.stringify(Xb(n)),l=Lt.useRef(!1);return w3(()=>{l.current=!0}),Lt.useCallback((c,h={})=>{if(gl(l.current,b3),!l.current)return;if(typeof c=="number"){e.go(c);return}let f=Yb(c,JSON.parse(s),i,h.relative==="path");r==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Hu([t,f.pathname])),(h.replace?e.replace:e.push)(f,h.state,h)},[t,e,s,i,r])}Lt.createContext(null);function Zb(){let{matches:r}=Lt.useContext(vl),t=r[r.length-1];return t?t.params:{}}function lp(r,{relative:t}={}){let{matches:e}=Lt.useContext(vl),{pathname:n}=Rc(),i=JSON.stringify(Xb(e));return Lt.useMemo(()=>Yb(r,JSON.parse(i),n,t==="path"),[r,i,n,t])}function wN(r,t){return x3(r,t)}function x3(r,t,e,n,i){pi(zf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=Lt.useContext(Eo),{matches:l}=Lt.useContext(vl),o=l[l.length-1],c=o?o.params:{},h=o?o.pathname:"/",f=o?o.pathnameBase:"/",p=o&&o.route;{let A=p&&p.path||"";A3(h,!p||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let y=Rc(),m;if(t){let A=typeof t=="string"?jf(t):t;pi(f==="/"||A.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${A.pathname}" was given in the \`location\` prop.`),m=A}else m=y;let w=m.pathname||"/",b=w;if(f!=="/"){let A=f.replace(/^\//,"").split("/");b="/"+w.replace(/^\//,"").split("/").slice(A.length).join("/")}let _=h3(r,{pathname:b});gl(p||_!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),gl(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=EN(_&&_.map(A=>Object.assign({},A,{params:Object.assign({},c,A.params),pathname:Hu([f,s.encodeLocation?s.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?f:Hu([f,s.encodeLocation?s.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),l,e,n,i);return t&&v?Lt.createElement(op.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},v):v}function xN(){let r=RN(),t=lN(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),e=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",r),l=Lt.createElement(Lt.Fragment,null,Lt.createElement("p",null," Hey developer "),Lt.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Lt.createElement("code",{style:s},"ErrorBoundary")," or"," ",Lt.createElement("code",{style:s},"errorElement")," prop on your route.")),Lt.createElement(Lt.Fragment,null,Lt.createElement("h2",null,"Unexpected Application Error!"),Lt.createElement("h3",{style:{fontStyle:"italic"}},t),e?Lt.createElement("pre",{style:i},e):null,l)}var _N=Lt.createElement(xN,null),_3=class extends Lt.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,t){return t.location!==r.location||t.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:t.error,location:t.location,revalidation:r.revalidation||t.revalidation}}componentDidCatch(r,t){this.props.onError?this.props.onError(r,t):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const e=yN(r.digest);e&&(r=e)}let t=r!==void 0?Lt.createElement(vl.Provider,{value:this.props.routeContext},Lt.createElement(Qb.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?Lt.createElement(AN,{error:r},t):t}};_3.contextType=hN;var C1=new WeakMap;function AN({children:r,error:t}){let{basename:e}=Lt.useContext(Eo);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=gN(t.digest);if(n){let i=C1.get(t);if(i)throw i;let s=m3(n.location,e);if(p3&&!C1.get(t))if(s.isExternal||n.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:n.replace}));throw C1.set(t,l),l}return Lt.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return r}function SN({routeContext:r,match:t,children:e}){let n=Lt.useContext(Uf);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),Lt.createElement(vl.Provider,{value:r},e)}function EN(r,t=[],e=null,n=null,i=null){if(r==null){if(!e)return null;if(e.errors)r=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)r=e.matches;else return null}let s=r,l=e?.errors;if(l!=null){let f=s.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);pi(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let o=!1,c=-1;if(e)for(let f=0;f<s.length;f++){let p=s[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=f),p.route.id){let{loaderData:y,errors:m}=e,w=p.route.loader&&!y.hasOwnProperty(p.route.id)&&(!m||m[p.route.id]===void 0);if(p.route.lazy||w){o=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}let h=e&&n?(f,p)=>{n(f,{location:e.location,params:e.matches?.[0]?.params??{},unstable_pattern:uN(e.matches),errorInfo:p})}:void 0;return s.reduceRight((f,p,y)=>{let m,w=!1,b=null,_=null;e&&(m=l&&p.route.id?l[p.route.id]:void 0,b=p.route.errorElement||_N,o&&(c<0&&y===0?(A3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,_=null):c===y&&(w=!0,_=p.route.hydrateFallbackElement||null)));let v=t.concat(s.slice(0,y+1)),A=()=>{let C;return m?C=b:w?C=_:p.route.Component?C=Lt.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=f,Lt.createElement(SN,{match:p,routeContext:{outlet:f,matches:v,isDataRoute:e!=null},children:C})};return e&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?Lt.createElement(_3,{location:e.location,revalidation:e.revalidation,component:b,error:m,children:A(),routeContext:{outlet:null,matches:v,isDataRoute:!0},onError:h}):A()},null)}function Jb(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function CN(r){let t=Lt.useContext(Uf);return pi(t,Jb(r)),t}function TN(r){let t=Lt.useContext(Tg);return pi(t,Jb(r)),t}function NN(r){let t=Lt.useContext(vl);return pi(t,Jb(r)),t}function t2(r){let t=NN(r),e=t.matches[t.matches.length-1];return pi(e.route.id,`${r} can only be used on routes that contain a unique "id"`),e.route.id}function kN(){return t2("useRouteId")}function RN(){let r=Lt.useContext(Qb),t=TN("useRouteError"),e=t2("useRouteError");return r!==void 0?r:t.errors?.[e]}function LN(){let{router:r}=CN("useNavigate"),t=t2("useNavigate"),e=Lt.useRef(!1);return w3(()=>{e.current=!0}),Lt.useCallback(async(i,s={})=>{gl(e.current,b3),e.current&&(typeof i=="number"?await r.navigate(i):await r.navigate(i,{fromRouteId:t,...s}))},[r,t])}var kx={};function A3(r,t,e){!t&&!kx[r]&&(kx[r]=!0,gl(!1,e))}Lt.memo(ON);function ON({routes:r,future:t,state:e,onError:n}){return x3(r,void 0,e,n,t)}function cg({to:r,replace:t,state:e,relative:n}){pi(zf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=Lt.useContext(Eo);gl(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=Lt.useContext(vl),{pathname:l}=Rc(),o=Wu(),c=Yb(r,Xb(s),l,n==="path"),h=JSON.stringify(c);return Lt.useEffect(()=>{o(JSON.parse(h),{replace:t,state:e,relative:n})},[o,h,n,t,e]),null}function Ql(r){pi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function DN({basename:r="/",children:t=null,location:e,navigationType:n="POP",navigator:i,static:s=!1,unstable_useTransitions:l}){pi(!zf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=r.replace(/^\/*/,"/"),c=Lt.useMemo(()=>({basename:o,navigator:i,static:s,unstable_useTransitions:l,future:{}}),[o,i,s,l]);typeof e=="string"&&(e=jf(e));let{pathname:h="/",search:f="",hash:p="",state:y=null,key:m="default"}=e,w=Lt.useMemo(()=>{let b=Vu(h,o);return b==null?null:{location:{pathname:b,search:f,hash:p,state:y,key:m},navigationType:n}},[o,h,f,p,y,m,n]);return gl(w!=null,`<Router basename="${o}"> is not able to match the URL "${h}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:Lt.createElement(Eo.Provider,{value:c},Lt.createElement(op.Provider,{children:t,value:w}))}function PN({children:r,location:t}){return wN(tb(r),t)}function tb(r,t=[]){let e=[];return Lt.Children.forEach(r,(n,i)=>{if(!Lt.isValidElement(n))return;let s=[...t,i];if(n.type===Lt.Fragment){e.push.apply(e,tb(n.props.children,s));return}pi(n.type===Ql,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pi(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=tb(n.props.children,s)),e.push(l)}),e}var Wm="get",Km="application/x-www-form-urlencoded";function Ng(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function MN(r){return Ng(r)&&r.tagName.toLowerCase()==="button"}function FN(r){return Ng(r)&&r.tagName.toLowerCase()==="form"}function BN(r){return Ng(r)&&r.tagName.toLowerCase()==="input"}function IN(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function jN(r,t){return r.button===0&&(!t||t==="_self")&&!IN(r)}var pm=null;function UN(){if(pm===null)try{new FormData(document.createElement("form"),0),pm=!1}catch{pm=!0}return pm}var zN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function T1(r){return r!=null&&!zN.has(r)?(gl(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Km}"`),null):r}function qN(r,t){let e,n,i,s,l;if(FN(r)){let o=r.getAttribute("action");n=o?Vu(o,t):null,e=r.getAttribute("method")||Wm,i=T1(r.getAttribute("enctype"))||Km,s=new FormData(r)}else if(MN(r)||BN(r)&&(r.type==="submit"||r.type==="image")){let o=r.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=r.getAttribute("formaction")||o.getAttribute("action");if(n=c?Vu(c,t):null,e=r.getAttribute("formmethod")||o.getAttribute("method")||Wm,i=T1(r.getAttribute("formenctype"))||T1(o.getAttribute("enctype"))||Km,s=new FormData(o,r),!UN()){let{name:h,type:f,value:p}=r;if(f==="image"){let y=h?`${h}.`:"";s.append(`${y}x`,"0"),s.append(`${y}y`,"0")}else h&&s.append(h,p)}}else{if(Ng(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Wm,n=null,i=Km,l=r}return s&&i==="text/plain"&&(l=s,s=void 0),{action:n,method:e.toLowerCase(),encType:i,formData:s,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function e2(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function HN(r,t,e,n){let i=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${n}`:i.pathname=`${i.pathname}.${n}`:i.pathname==="/"?i.pathname=`_root.${n}`:t&&Vu(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function GN(r,t){if(r.id in t)return t[r.id];try{let e=await import(r.module);return t[r.id]=e,e}catch(e){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function VN(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function WN(r,t,e){let n=await Promise.all(r.map(async i=>{let s=t.routes[i.route.id];if(s){let l=await GN(s,e);return l.links?l.links():[]}return[]}));return YN(n.flat(1).filter(VN).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Rx(r,t,e,n,i,s){let l=(c,h)=>e[h]?c.route.id!==e[h].route.id:!0,o=(c,h)=>e[h].pathname!==c.pathname||e[h].route.path?.endsWith("*")&&e[h].params["*"]!==c.params["*"];return s==="assets"?t.filter((c,h)=>l(c,h)||o(c,h)):s==="data"?t.filter((c,h)=>{let f=n.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(l(c,h)||o(c,h))return!0;if(c.route.shouldRevalidate){let p=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function KN(r,t,{includeHydrateFallback:e}={}){return $N(r.map(n=>{let i=t.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),e&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function $N(r){return[...new Set(r)]}function XN(r){let t={},e=Object.keys(r).sort();for(let n of e)t[n]=r[n];return t}function YN(r,t){let e=new Set;return new Set(t),r.reduce((n,i)=>{let s=JSON.stringify(XN(i));return e.has(s)||(e.add(s),n.push({key:s,link:i})),n},[])}function S3(){let r=Lt.useContext(Uf);return e2(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function QN(){let r=Lt.useContext(Tg);return e2(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var n2=Lt.createContext(void 0);n2.displayName="FrameworkContext";function E3(){let r=Lt.useContext(n2);return e2(r,"You must render this element inside a <HydratedRouter> element"),r}function ZN(r,t){let e=Lt.useContext(n2),[n,i]=Lt.useState(!1),[s,l]=Lt.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:h,onMouseLeave:f,onTouchStart:p}=t,y=Lt.useRef(null);Lt.useEffect(()=>{if(r==="render"&&l(!0),r==="viewport"){let b=v=>{v.forEach(A=>{l(A.isIntersecting)})},_=new IntersectionObserver(b,{threshold:.5});return y.current&&_.observe(y.current),()=>{_.disconnect()}}},[r]),Lt.useEffect(()=>{if(n){let b=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(b)}}},[n]);let m=()=>{i(!0)},w=()=>{i(!1),l(!1)};return e?r!=="intent"?[s,y,{}]:[s,y,{onFocus:Cd(o,m),onBlur:Cd(c,w),onMouseEnter:Cd(h,m),onMouseLeave:Cd(f,w),onTouchStart:Cd(p,m)}]:[!1,y,{}]}function Cd(r,t){return e=>{r&&r(e),e.defaultPrevented||t(e)}}function JN({page:r,...t}){let{router:e}=S3(),n=Lt.useMemo(()=>h3(e.routes,r,e.basename),[e.routes,r,e.basename]);return n?Lt.createElement(ek,{page:r,matches:n,...t}):null}function tk(r){let{manifest:t,routeModules:e}=E3(),[n,i]=Lt.useState([]);return Lt.useEffect(()=>{let s=!1;return WN(r,t,e).then(l=>{s||i(l)}),()=>{s=!0}},[r,t,e]),n}function ek({page:r,matches:t,...e}){let n=Rc(),{future:i,manifest:s,routeModules:l}=E3(),{basename:o}=S3(),{loaderData:c,matches:h}=QN(),f=Lt.useMemo(()=>Rx(r,t,h,s,n,"data"),[r,t,h,s,n]),p=Lt.useMemo(()=>Rx(r,t,h,s,n,"assets"),[r,t,h,s,n]),y=Lt.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let b=new Set,_=!1;if(t.forEach(A=>{let C=s.routes[A.route.id];!C||!C.hasLoader||(!f.some(S=>S.route.id===A.route.id)&&A.route.id in c&&l[A.route.id]?.shouldRevalidate||C.hasClientLoader?_=!0:b.add(A.route.id))}),b.size===0)return[];let v=HN(r,o,i.unstable_trailingSlashAwareDataRequests,"data");return _&&b.size>0&&v.searchParams.set("_routes",t.filter(A=>b.has(A.route.id)).map(A=>A.route.id).join(",")),[v.pathname+v.search]},[o,i.unstable_trailingSlashAwareDataRequests,c,n,s,f,t,r,l]),m=Lt.useMemo(()=>KN(p,s),[p,s]),w=tk(p);return Lt.createElement(Lt.Fragment,null,y.map(b=>Lt.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...e})),m.map(b=>Lt.createElement("link",{key:b,rel:"modulepreload",href:b,...e})),w.map(({key:b,link:_})=>Lt.createElement("link",{key:b,nonce:e.nonce,..._,crossOrigin:_.crossOrigin??e.crossOrigin})))}function nk(...r){return t=>{r.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var rk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rk&&(window.__reactRouterVersion="7.13.0")}catch{}function ik({basename:r,children:t,unstable_useTransitions:e,window:n}){let i=Lt.useRef();i.current==null&&(i.current=IT({window:n,v5Compat:!0}));let s=i.current,[l,o]=Lt.useState({action:s.action,location:s.location}),c=Lt.useCallback(h=>{e===!1?o(h):Lt.startTransition(()=>o(h))},[e]);return Lt.useLayoutEffect(()=>s.listen(c),[s,c]),Lt.createElement(DN,{basename:r,children:t,location:l.location,navigationType:l.action,navigator:s,unstable_useTransitions:e})}var C3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kg=Lt.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:i,reloadDocument:s,replace:l,state:o,target:c,to:h,preventScrollReset:f,viewTransition:p,unstable_defaultShouldRevalidate:y,...m},w){let{basename:b,unstable_useTransitions:_}=Lt.useContext(Eo),v=typeof h=="string"&&C3.test(h),A=m3(h,b);h=A.to;let C=vN(h,{relative:i}),[S,O,q]=ZN(n,m),H=lk(h,{replace:l,state:o,target:c,preventScrollReset:f,relative:i,viewTransition:p,unstable_defaultShouldRevalidate:y,unstable_useTransitions:_});function Q(dt){t&&t(dt),dt.defaultPrevented||H(dt)}let I=Lt.createElement("a",{...m,...q,href:A.absoluteURL||C,onClick:A.isExternal||s?t:Q,ref:nk(w,O),target:c,"data-discover":!v&&e==="render"?"true":void 0});return S&&!v?Lt.createElement(Lt.Fragment,null,I,Lt.createElement(JN,{page:C})):I});kg.displayName="Link";var sk=Lt.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:i=!1,style:s,to:l,viewTransition:o,children:c,...h},f){let p=lp(l,{relative:h.relative}),y=Rc(),m=Lt.useContext(Tg),{navigator:w,basename:b}=Lt.useContext(Eo),_=m!=null&&dk(p)&&o===!0,v=w.encodeLocation?w.encodeLocation(p).pathname:p.pathname,A=y.pathname,C=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;e||(A=A.toLowerCase(),C=C?C.toLowerCase():null,v=v.toLowerCase()),C&&b&&(C=Vu(C,b)||C);const S=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let O=A===v||!i&&A.startsWith(v)&&A.charAt(S)==="/",q=C!=null&&(C===v||!i&&C.startsWith(v)&&C.charAt(v.length)==="/"),H={isActive:O,isPending:q,isTransitioning:_},Q=O?t:void 0,I;typeof n=="function"?I=n(H):I=[n,O?"active":null,q?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let dt=typeof s=="function"?s(H):s;return Lt.createElement(kg,{...h,"aria-current":Q,className:I,ref:f,style:dt,to:l,viewTransition:o},typeof c=="function"?c(H):c)});sk.displayName="NavLink";var ak=Lt.forwardRef(({discover:r="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:i,state:s,method:l=Wm,action:o,onSubmit:c,relative:h,preventScrollReset:f,viewTransition:p,unstable_defaultShouldRevalidate:y,...m},w)=>{let{unstable_useTransitions:b}=Lt.useContext(Eo),_=hk(),v=fk(o,{relative:h}),A=l.toLowerCase()==="get"?"get":"post",C=typeof o=="string"&&C3.test(o),S=O=>{if(c&&c(O),O.defaultPrevented)return;O.preventDefault();let q=O.nativeEvent.submitter,H=q?.getAttribute("formmethod")||l,Q=()=>_(q||O.currentTarget,{fetcherKey:t,method:H,navigate:e,replace:i,state:s,relative:h,preventScrollReset:f,viewTransition:p,unstable_defaultShouldRevalidate:y});b&&e!==!1?Lt.startTransition(()=>Q()):Q()};return Lt.createElement("form",{ref:w,method:A,action:v,onSubmit:n?c:S,...m,"data-discover":!C&&r==="render"?"true":void 0})});ak.displayName="Form";function ok(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function T3(r){let t=Lt.useContext(Uf);return pi(t,ok(r)),t}function lk(r,{target:t,replace:e,state:n,preventScrollReset:i,relative:s,viewTransition:l,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}={}){let h=Wu(),f=Rc(),p=lp(r,{relative:s});return Lt.useCallback(y=>{if(jN(y,t)){y.preventDefault();let m=e!==void 0?e:Qd(f)===Qd(p),w=()=>h(r,{replace:m,state:n,preventScrollReset:i,relative:s,viewTransition:l,unstable_defaultShouldRevalidate:o});c?Lt.startTransition(()=>w()):w()}},[f,h,p,e,n,t,r,i,s,l,o,c])}var uk=0,ck=()=>`__${String(++uk)}__`;function hk(){let{router:r}=T3("useSubmit"),{basename:t}=Lt.useContext(Eo),e=kN(),n=r.fetch,i=r.navigate;return Lt.useCallback(async(s,l={})=>{let{action:o,method:c,encType:h,formData:f,body:p}=qN(s,t);if(l.navigate===!1){let y=l.fetcherKey||ck();await n(y,e,l.action||o,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:f,body:p,formMethod:l.method||c,formEncType:l.encType||h,flushSync:l.flushSync})}else await i(l.action||o,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:f,body:p,formMethod:l.method||c,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:e,flushSync:l.flushSync,viewTransition:l.viewTransition})},[n,i,t,e])}function fk(r,{relative:t}={}){let{basename:e}=Lt.useContext(Eo),n=Lt.useContext(vl);pi(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={...lp(r||".",{relative:t})},l=Rc();if(r==null){s.search=l.search;let o=new URLSearchParams(s.search),c=o.getAll("index");if(c.some(f=>f==="")){o.delete("index"),c.filter(p=>p).forEach(p=>o.append("index",p));let f=o.toString();s.search=f?`?${f}`:""}}return(!r||r===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(s.pathname=s.pathname==="/"?e:Hu([e,s.pathname])),Qd(s)}function dk(r,{relative:t}={}){let e=Lt.useContext(y3);pi(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=T3("useViewTransitionState"),i=lp(r,{relative:t});if(!e.isTransitioning)return!1;let s=Vu(e.currentLocation.pathname,n)||e.currentLocation.pathname,l=Vu(e.nextLocation.pathname,n)||e.nextLocation.pathname;return ug(i.pathname,l)!=null||ug(i.pathname,s)!=null}var pk=c3(),qf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},mk={setTimeout:(r,t)=>setTimeout(r,t),clearTimeout:r=>clearTimeout(r),setInterval:(r,t)=>setInterval(r,t),clearInterval:r=>clearInterval(r)},gk=class{#t=mk;#e=!1;setTimeoutProvider(r){this.#t=r}setTimeout(r,t){return this.#t.setTimeout(r,t)}clearTimeout(r){this.#t.clearTimeout(r)}setInterval(r,t){return this.#t.setInterval(r,t)}clearInterval(r){this.#t.clearInterval(r)}},Xc=new gk;function yk(r){setTimeout(r,0)}var ah=typeof window>"u"||"Deno"in globalThis;function Na(){}function vk(r,t){return typeof r=="function"?r(t):r}function eb(r){return typeof r=="number"&&r>=0&&r!==1/0}function N3(r,t){return Math.max(r+(t||0)-Date.now(),0)}function Ec(r,t){return typeof r=="function"?r(t):r}function Ho(r,t){return typeof r=="function"?r(t):r}function Lx(r,t){const{type:e="all",exact:n,fetchStatus:i,predicate:s,queryKey:l,stale:o}=r;if(l){if(n){if(t.queryHash!==r2(l,t.options))return!1}else if(!Zd(t.queryKey,l))return!1}if(e!=="all"){const c=t.isActive();if(e==="active"&&!c||e==="inactive"&&c)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||i&&i!==t.state.fetchStatus||s&&!s(t))}function Ox(r,t){const{exact:e,status:n,predicate:i,mutationKey:s}=r;if(s){if(!t.options.mutationKey)return!1;if(e){if(oh(t.options.mutationKey)!==oh(s))return!1}else if(!Zd(t.options.mutationKey,s))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function r2(r,t){return(t?.queryKeyHashFn||oh)(r)}function oh(r){return JSON.stringify(r,(t,e)=>nb(e)?Object.keys(e).sort().reduce((n,i)=>(n[i]=e[i],n),{}):e)}function Zd(r,t){return r===t?!0:typeof r!=typeof t?!1:r&&t&&typeof r=="object"&&typeof t=="object"?Object.keys(t).every(e=>Zd(r[e],t[e])):!1}var bk=Object.prototype.hasOwnProperty;function k3(r,t,e=0){if(r===t)return r;if(e>500)return t;const n=Dx(r)&&Dx(t);if(!n&&!(nb(r)&&nb(t)))return t;const s=(n?r:Object.keys(r)).length,l=n?t:Object.keys(t),o=l.length,c=n?new Array(o):{};let h=0;for(let f=0;f<o;f++){const p=n?f:l[f],y=r[p],m=t[p];if(y===m){c[p]=y,(n?f<s:bk.call(r,p))&&h++;continue}if(y===null||m===null||typeof y!="object"||typeof m!="object"){c[p]=m;continue}const w=k3(y,m,e+1);c[p]=w,w===y&&h++}return s===o&&h===s?r:c}function hg(r,t){if(!t||Object.keys(r).length!==Object.keys(t).length)return!1;for(const e in r)if(r[e]!==t[e])return!1;return!0}function Dx(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function nb(r){if(!Px(r))return!1;const t=r.constructor;if(t===void 0)return!0;const e=t.prototype;return!(!Px(e)||!e.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function Px(r){return Object.prototype.toString.call(r)==="[object Object]"}function wk(r){return new Promise(t=>{Xc.setTimeout(t,r)})}function rb(r,t,e){return typeof e.structuralSharing=="function"?e.structuralSharing(r,t):e.structuralSharing!==!1?k3(r,t):t}function xk(r,t,e=0){const n=[...r,t];return e&&n.length>e?n.slice(1):n}function _k(r,t,e=0){const n=[t,...r];return e&&n.length>e?n.slice(0,-1):n}var i2=Symbol();function R3(r,t){return!r.queryFn&&t?.initialPromise?()=>t.initialPromise:!r.queryFn||r.queryFn===i2?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}function s2(r,t){return typeof r=="function"?r(...t):!!r}function Ak(r,t,e){let n=!1,i;return Object.defineProperty(r,"signal",{enumerable:!0,get:()=>(i??=t(),n||(n=!0,i.aborted?e():i.addEventListener("abort",e,{once:!0})),i)}),r}var Sk=class extends qf{#t;#e;#r;constructor(){super(),this.#r=r=>{if(!ah&&window.addEventListener){const t=()=>r();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#e||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(r){this.#r=r,this.#e?.(),this.#e=r(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(r){this.#t!==r&&(this.#t=r,this.onFocus())}onFocus(){const r=this.isFocused();this.listeners.forEach(t=>{t(r)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},a2=new Sk;function ib(){let r,t;const e=new Promise((i,s)=>{r=i,t=s});e.status="pending",e.catch(()=>{});function n(i){Object.assign(e,i),delete e.resolve,delete e.reject}return e.resolve=i=>{n({status:"fulfilled",value:i}),r(i)},e.reject=i=>{n({status:"rejected",reason:i}),t(i)},e}var Ek=yk;function Ck(){let r=[],t=0,e=o=>{o()},n=o=>{o()},i=Ek;const s=o=>{t?r.push(o):i(()=>{e(o)})},l=()=>{const o=r;r=[],o.length&&i(()=>{n(()=>{o.forEach(c=>{e(c)})})})};return{batch:o=>{let c;t++;try{c=o()}finally{t--,t||l()}return c},batchCalls:o=>(...c)=>{s(()=>{o(...c)})},schedule:s,setNotifyFunction:o=>{e=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{i=o}}}var bs=Ck(),Tk=class extends qf{#t=!0;#e;#r;constructor(){super(),this.#r=r=>{if(!ah&&window.addEventListener){const t=()=>r(!0),e=()=>r(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",e,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",e)}}}}onSubscribe(){this.#e||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(r){this.#r=r,this.#e?.(),this.#e=r(this.setOnline.bind(this))}setOnline(r){this.#t!==r&&(this.#t=r,this.listeners.forEach(e=>{e(r)}))}isOnline(){return this.#t}},fg=new Tk;function Nk(r){return Math.min(1e3*2**r,3e4)}function L3(r){return(r??"online")==="online"?fg.isOnline():!0}var sb=class extends Error{constructor(r){super("CancelledError"),this.revert=r?.revert,this.silent=r?.silent}};function O3(r){let t=!1,e=0,n;const i=ib(),s=()=>i.status!=="pending",l=b=>{if(!s()){const _=new sb(b);y(_),r.onCancel?.(_)}},o=()=>{t=!0},c=()=>{t=!1},h=()=>a2.isFocused()&&(r.networkMode==="always"||fg.isOnline())&&r.canRun(),f=()=>L3(r.networkMode)&&r.canRun(),p=b=>{s()||(n?.(),i.resolve(b))},y=b=>{s()||(n?.(),i.reject(b))},m=()=>new Promise(b=>{n=_=>{(s()||h())&&b(_)},r.onPause?.()}).then(()=>{n=void 0,s()||r.onContinue?.()}),w=()=>{if(s())return;let b;const _=e===0?r.initialPromise:void 0;try{b=_??r.fn()}catch(v){b=Promise.reject(v)}Promise.resolve(b).then(p).catch(v=>{if(s())return;const A=r.retry??(ah?0:3),C=r.retryDelay??Nk,S=typeof C=="function"?C(e,v):C,O=A===!0||typeof A=="number"&&e<A||typeof A=="function"&&A(e,v);if(t||!O){y(v);return}e++,r.onFail?.(e,v),wk(S).then(()=>h()?void 0:m()).then(()=>{t?y(v):w()})})};return{promise:i,status:()=>i.status,cancel:l,continue:()=>(n?.(),i),cancelRetry:o,continueRetry:c,canStart:f,start:()=>(f()?w():m().then(w),i)}}var D3=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),eb(this.gcTime)&&(this.#t=Xc.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(ah?1/0:300*1e3))}clearGcTimeout(){this.#t&&(Xc.clearTimeout(this.#t),this.#t=void 0)}},kk=class extends D3{#t;#e;#r;#n;#i;#a;#s;constructor(r){super(),this.#s=!1,this.#a=r.defaultOptions,this.setOptions(r.options),this.observers=[],this.#n=r.client,this.#r=this.#n.getQueryCache(),this.queryKey=r.queryKey,this.queryHash=r.queryHash,this.#t=Fx(this.options),this.state=r.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(r){if(this.options={...this.#a,...r},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=Fx(this.options);t.data!==void 0&&(this.setState(Mx(t.data,t.dataUpdatedAt)),this.#t=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(r,t){const e=rb(this.state.data,r,this.options);return this.#o({data:e,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),e}setState(r,t){this.#o({type:"setState",state:r,setStateOptions:t})}cancel(r){const t=this.#i?.promise;return this.#i?.cancel(r),t?t.then(Na).catch(Na):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(r=>Ho(r.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===i2||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(r=>Ec(r.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(r=>r.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(r=0){return this.state.data===void 0?!0:r==="static"?!1:this.state.isInvalidated?!0:!N3(this.state.dataUpdatedAt,r)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(r){this.observers.includes(r)||(this.observers.push(r),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:r}))}removeObserver(r){this.observers.includes(r)&&(this.observers=this.observers.filter(t=>t!==r),this.observers.length||(this.#i&&(this.#s?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:r}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}async fetch(r,t){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(r&&this.setOptions(r),!this.options.queryFn){const o=this.observers.find(c=>c.options.queryFn);o&&this.setOptions(o.options)}const e=new AbortController,n=o=>{Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(this.#s=!0,e.signal)})},i=()=>{const o=R3(this.options,t),h=(()=>{const f={client:this.#n,queryKey:this.queryKey,meta:this.meta};return n(f),f})();return this.#s=!1,this.options.persister?this.options.persister(o,h,this):o(h)},l=(()=>{const o={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:i};return n(o),o})();this.options.behavior?.onFetch(l,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#o({type:"fetch",meta:l.fetchOptions?.meta}),this.#i=O3({initialPromise:t?.initialPromise,fn:l.fetchFn,onCancel:o=>{o instanceof sb&&o.revert&&this.setState({...this.#e,fetchStatus:"idle"}),e.abort()},onFail:(o,c)=>{this.#o({type:"failed",failureCount:o,error:c})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const o=await this.#i.start();if(o===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(o),this.#r.config.onSuccess?.(o,this),this.#r.config.onSettled?.(o,this.state.error,this),o}catch(o){if(o instanceof sb){if(o.silent)return this.#i.promise;if(o.revert){if(this.state.data===void 0)throw o;return this.state.data}}throw this.#o({type:"error",error:o}),this.#r.config.onError?.(o,this),this.#r.config.onSettled?.(this.state.data,o,this),o}finally{this.scheduleGc()}}#o(r){const t=e=>{switch(r.type){case"failed":return{...e,fetchFailureCount:r.failureCount,fetchFailureReason:r.error};case"pause":return{...e,fetchStatus:"paused"};case"continue":return{...e,fetchStatus:"fetching"};case"fetch":return{...e,...P3(e.data,this.options),fetchMeta:r.meta??null};case"success":const n={...e,...Mx(r.data,r.dataUpdatedAt),dataUpdateCount:e.dataUpdateCount+1,...!r.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#e=r.manual?n:void 0,n;case"error":const i=r.error;return{...e,error:i,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...e,isInvalidated:!0};case"setState":return{...e,...r.state}}};this.state=t(this.state),bs.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:r})})}};function P3(r,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:L3(t.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function Mx(r,t){return{data:r,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Fx(r){const t=typeof r.initialData=="function"?r.initialData():r.initialData,e=t!==void 0,n=e?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:e?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:e?"success":"pending",fetchStatus:"idle"}}var Rk=class extends qf{constructor(r,t){super(),this.options=t,this.#t=r,this.#o=null,this.#s=ib(),this.bindMethods(),this.setOptions(t)}#t;#e=void 0;#r=void 0;#n=void 0;#i;#a;#s;#o;#u;#l;#f;#h;#d;#g;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),Bx(this.#e,this.options)?this.#c():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ab(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ab(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#S(),this.#A(),this.#e.removeObserver(this)}setOptions(r){const t=this.options,e=this.#e;if(this.options=this.#t.defaultQueryOptions(r),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ho(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#e.setOptions(this.options),t._defaulted&&!hg(this.options,t)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const n=this.hasListeners();n&&Ix(this.#e,e,this.options,t)&&this.#c(),this.updateResult(),n&&(this.#e!==e||Ho(this.options.enabled,this.#e)!==Ho(t.enabled,this.#e)||Ec(this.options.staleTime,this.#e)!==Ec(t.staleTime,this.#e))&&this.#p();const i=this.#y();n&&(this.#e!==e||Ho(this.options.enabled,this.#e)!==Ho(t.enabled,this.#e)||i!==this.#g)&&this.#b(i)}getOptimisticResult(r){const t=this.#t.getQueryCache().build(this.#t,r),e=this.createResult(t,r);return Ok(this,e)&&(this.#n=e,this.#a=this.options,this.#i=this.#e.state),e}getCurrentResult(){return this.#n}trackResult(r,t){return new Proxy(r,{get:(e,n)=>(this.trackProp(n),t?.(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#s.status==="pending"&&this.#s.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,n))})}trackProp(r){this.#m.add(r)}getCurrentQuery(){return this.#e}refetch({...r}={}){return this.fetch({...r})}fetchOptimistic(r){const t=this.#t.defaultQueryOptions(r),e=this.#t.getQueryCache().build(this.#t,t);return e.fetch().then(()=>this.createResult(e,t))}fetch(r){return this.#c({...r,cancelRefetch:r.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#c(r){this.#w();let t=this.#e.fetch(this.options,r);return r?.throwOnError||(t=t.catch(Na)),t}#p(){this.#S();const r=Ec(this.options.staleTime,this.#e);if(ah||this.#n.isStale||!eb(r))return;const e=N3(this.#n.dataUpdatedAt,r)+1;this.#h=Xc.setTimeout(()=>{this.#n.isStale||this.updateResult()},e)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#b(r){this.#A(),this.#g=r,!(ah||Ho(this.options.enabled,this.#e)===!1||!eb(this.#g)||this.#g===0)&&(this.#d=Xc.setInterval(()=>{(this.options.refetchIntervalInBackground||a2.isFocused())&&this.#c()},this.#g))}#v(){this.#p(),this.#b(this.#y())}#S(){this.#h&&(Xc.clearTimeout(this.#h),this.#h=void 0)}#A(){this.#d&&(Xc.clearInterval(this.#d),this.#d=void 0)}createResult(r,t){const e=this.#e,n=this.options,i=this.#n,s=this.#i,l=this.#a,c=r!==e?r.state:this.#r,{state:h}=r;let f={...h},p=!1,y;if(t._optimisticResults){const Q=this.hasListeners(),I=!Q&&Bx(r,t),dt=Q&&Ix(r,e,t,n);(I||dt)&&(f={...f,...P3(h.data,r.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:m,errorUpdatedAt:w,status:b}=f;y=f.data;let _=!1;if(t.placeholderData!==void 0&&y===void 0&&b==="pending"){let Q;i?.isPlaceholderData&&t.placeholderData===l?.placeholderData?(Q=i.data,_=!0):Q=typeof t.placeholderData=="function"?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,Q!==void 0&&(b="success",y=rb(i?.data,Q,t),p=!0)}if(t.select&&y!==void 0&&!_)if(i&&y===s?.data&&t.select===this.#u)y=this.#l;else try{this.#u=t.select,y=t.select(y),y=rb(i?.data,y,t),this.#l=y,this.#o=null}catch(Q){this.#o=Q}this.#o&&(m=this.#o,y=this.#l,w=Date.now(),b="error");const v=f.fetchStatus==="fetching",A=b==="pending",C=b==="error",S=A&&v,O=y!==void 0,H={status:b,fetchStatus:f.fetchStatus,isPending:A,isSuccess:b==="success",isError:C,isInitialLoading:S,isLoading:S,data:y,dataUpdatedAt:f.dataUpdatedAt,error:m,errorUpdatedAt:w,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>c.dataUpdateCount||f.errorUpdateCount>c.errorUpdateCount,isFetching:v,isRefetching:v&&!A,isLoadingError:C&&!O,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:C&&O,isStale:o2(r,t),refetch:this.refetch,promise:this.#s,isEnabled:Ho(t.enabled,r)!==!1};if(this.options.experimental_prefetchInRender){const Q=H.data!==void 0,I=H.status==="error"&&!Q,dt=Z=>{I?Z.reject(H.error):Q&&Z.resolve(H.data)},nt=()=>{const Z=this.#s=H.promise=ib();dt(Z)},B=this.#s;switch(B.status){case"pending":r.queryHash===e.queryHash&&dt(B);break;case"fulfilled":(I||H.data!==B.value)&&nt();break;case"rejected":(!I||H.error!==B.reason)&&nt();break}}return H}updateResult(){const r=this.#n,t=this.createResult(this.#e,this.options);if(this.#i=this.#e.state,this.#a=this.options,this.#i.data!==void 0&&(this.#f=this.#e),hg(t,r))return;this.#n=t;const e=()=>{if(!r)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!this.#m.size)return!0;const s=new Set(i??this.#m);return this.options.throwOnError&&s.add("error"),Object.keys(this.#n).some(l=>{const o=l;return this.#n[o]!==r[o]&&s.has(o)})};this.#C({listeners:e()})}#w(){const r=this.#t.getQueryCache().build(this.#t,this.options);if(r===this.#e)return;const t=this.#e;this.#e=r,this.#r=r.state,this.hasListeners()&&(t?.removeObserver(this),r.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#C(r){bs.batch(()=>{r.listeners&&this.listeners.forEach(t=>{t(this.#n)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function Lk(r,t){return Ho(t.enabled,r)!==!1&&r.state.data===void 0&&!(r.state.status==="error"&&t.retryOnMount===!1)}function Bx(r,t){return Lk(r,t)||r.state.data!==void 0&&ab(r,t,t.refetchOnMount)}function ab(r,t,e){if(Ho(t.enabled,r)!==!1&&Ec(t.staleTime,r)!=="static"){const n=typeof e=="function"?e(r):e;return n==="always"||n!==!1&&o2(r,t)}return!1}function Ix(r,t,e,n){return(r!==t||Ho(n.enabled,r)===!1)&&(!e.suspense||r.state.status!=="error")&&o2(r,e)}function o2(r,t){return Ho(t.enabled,r)!==!1&&r.isStaleByTime(Ec(t.staleTime,r))}function Ok(r,t){return!hg(r.getCurrentResult(),t)}function jx(r){return{onFetch:(t,e)=>{const n=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,s=t.state.data?.pages||[],l=t.state.data?.pageParams||[];let o={pages:[],pageParams:[]},c=0;const h=async()=>{let f=!1;const p=w=>{Ak(w,()=>t.signal,()=>f=!0)},y=R3(t.options,t.fetchOptions),m=async(w,b,_)=>{if(f)return Promise.reject();if(b==null&&w.pages.length)return Promise.resolve(w);const A=(()=>{const q={client:t.client,queryKey:t.queryKey,pageParam:b,direction:_?"backward":"forward",meta:t.options.meta};return p(q),q})(),C=await y(A),{maxPages:S}=t.options,O=_?_k:xk;return{pages:O(w.pages,C,S),pageParams:O(w.pageParams,b,S)}};if(i&&s.length){const w=i==="backward",b=w?Dk:Ux,_={pages:s,pageParams:l},v=b(n,_);o=await m(_,v,w)}else{const w=r??s.length;do{const b=c===0?l[0]??n.initialPageParam:Ux(n,o);if(c>0&&b==null)break;o=await m(o,b),c++}while(c<w)}return o};t.options.persister?t.fetchFn=()=>t.options.persister?.(h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},e):t.fetchFn=h}}}function Ux(r,{pages:t,pageParams:e}){const n=t.length-1;return t.length>0?r.getNextPageParam(t[n],t,e[n],e):void 0}function Dk(r,{pages:t,pageParams:e}){return t.length>0?r.getPreviousPageParam?.(t[0],t,e[0],e):void 0}var Pk=class extends D3{#t;#e;#r;#n;constructor(r){super(),this.#t=r.client,this.mutationId=r.mutationId,this.#r=r.mutationCache,this.#e=[],this.state=r.state||M3(),this.setOptions(r.options),this.scheduleGc()}setOptions(r){this.options=r,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(r){this.#e.includes(r)||(this.#e.push(r),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:r}))}removeObserver(r){this.#e=this.#e.filter(t=>t!==r),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:r})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(r){const t=()=>{this.#i({type:"continue"})},e={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#n=O3({fn:()=>this.options.mutationFn?this.options.mutationFn(r,e):Promise.reject(new Error("No mutationFn found")),onFail:(s,l)=>{this.#i({type:"failed",failureCount:s,error:l})},onPause:()=>{this.#i({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const n=this.state.status==="pending",i=!this.#n.canStart();try{if(n)t();else{this.#i({type:"pending",variables:r,isPaused:i}),this.#r.config.onMutate&&await this.#r.config.onMutate(r,this,e);const l=await this.options.onMutate?.(r,e);l!==this.state.context&&this.#i({type:"pending",context:l,variables:r,isPaused:i})}const s=await this.#n.start();return await this.#r.config.onSuccess?.(s,r,this.state.context,this,e),await this.options.onSuccess?.(s,r,this.state.context,e),await this.#r.config.onSettled?.(s,null,this.state.variables,this.state.context,this,e),await this.options.onSettled?.(s,null,r,this.state.context,e),this.#i({type:"success",data:s}),s}catch(s){try{await this.#r.config.onError?.(s,r,this.state.context,this,e)}catch(l){Promise.reject(l)}try{await this.options.onError?.(s,r,this.state.context,e)}catch(l){Promise.reject(l)}try{await this.#r.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this,e)}catch(l){Promise.reject(l)}try{await this.options.onSettled?.(void 0,s,r,this.state.context,e)}catch(l){Promise.reject(l)}throw this.#i({type:"error",error:s}),s}finally{this.#r.runNext(this)}}#i(r){const t=e=>{switch(r.type){case"failed":return{...e,failureCount:r.failureCount,failureReason:r.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:r.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:r.isPaused,status:"pending",variables:r.variables,submittedAt:Date.now()};case"success":return{...e,data:r.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:r.error,failureCount:e.failureCount+1,failureReason:r.error,isPaused:!1,status:"error"}}};this.state=t(this.state),bs.batch(()=>{this.#e.forEach(e=>{e.onMutationUpdate(r)}),this.#r.notify({mutation:this,type:"updated",action:r})})}};function M3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Mk=class extends qf{constructor(r={}){super(),this.config=r,this.#t=new Set,this.#e=new Map,this.#r=0}#t;#e;#r;build(r,t,e){const n=new Pk({client:r,mutationCache:this,mutationId:++this.#r,options:r.defaultMutationOptions(t),state:e});return this.add(n),n}add(r){this.#t.add(r);const t=mm(r);if(typeof t=="string"){const e=this.#e.get(t);e?e.push(r):this.#e.set(t,[r])}this.notify({type:"added",mutation:r})}remove(r){if(this.#t.delete(r)){const t=mm(r);if(typeof t=="string"){const e=this.#e.get(t);if(e)if(e.length>1){const n=e.indexOf(r);n!==-1&&e.splice(n,1)}else e[0]===r&&this.#e.delete(t)}}this.notify({type:"removed",mutation:r})}canRun(r){const t=mm(r);if(typeof t=="string"){const n=this.#e.get(t)?.find(i=>i.state.status==="pending");return!n||n===r}else return!0}runNext(r){const t=mm(r);return typeof t=="string"?this.#e.get(t)?.find(n=>n!==r&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){bs.batch(()=>{this.#t.forEach(r=>{this.notify({type:"removed",mutation:r})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(r){const t={exact:!0,...r};return this.getAll().find(e=>Ox(t,e))}findAll(r={}){return this.getAll().filter(t=>Ox(r,t))}notify(r){bs.batch(()=>{this.listeners.forEach(t=>{t(r)})})}resumePausedMutations(){const r=this.getAll().filter(t=>t.state.isPaused);return bs.batch(()=>Promise.all(r.map(t=>t.continue().catch(Na))))}};function mm(r){return r.options.scope?.id}var Fk=class extends qf{#t;#e=void 0;#r;#n;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const e=this.options;this.options=this.#t.defaultMutationOptions(t),hg(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),e?.mutationKey&&this.options.mutationKey&&oh(e.mutationKey)!==oh(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#i(),this.#a(t)}getCurrentResult(){return this.#e}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#i(),this.#a()}mutate(t,e){return this.#n=e,this.#r?.removeObserver(this),this.#r=this.#t.getMutationCache().build(this.#t,this.options),this.#r.addObserver(this),this.#r.execute(t)}#i(){const t=this.#r?.state??M3();this.#e={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#a(t){bs.batch(()=>{if(this.#n&&this.hasListeners()){const e=this.#e.variables,n=this.#e.context,i={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#n.onSuccess?.(t.data,e,n,i)}catch(s){Promise.reject(s)}try{this.#n.onSettled?.(t.data,null,e,n,i)}catch(s){Promise.reject(s)}}else if(t?.type==="error"){try{this.#n.onError?.(t.error,e,n,i)}catch(s){Promise.reject(s)}try{this.#n.onSettled?.(void 0,t.error,e,n,i)}catch(s){Promise.reject(s)}}}this.listeners.forEach(e=>{e(this.#e)})})}},Bk=class extends qf{constructor(r={}){super(),this.config=r,this.#t=new Map}#t;build(r,t,e){const n=t.queryKey,i=t.queryHash??r2(n,t);let s=this.get(i);return s||(s=new kk({client:r,queryKey:n,queryHash:i,options:r.defaultQueryOptions(t),state:e,defaultOptions:r.getQueryDefaults(n)}),this.add(s)),s}add(r){this.#t.has(r.queryHash)||(this.#t.set(r.queryHash,r),this.notify({type:"added",query:r}))}remove(r){const t=this.#t.get(r.queryHash);t&&(r.destroy(),t===r&&this.#t.delete(r.queryHash),this.notify({type:"removed",query:r}))}clear(){bs.batch(()=>{this.getAll().forEach(r=>{this.remove(r)})})}get(r){return this.#t.get(r)}getAll(){return[...this.#t.values()]}find(r){const t={exact:!0,...r};return this.getAll().find(e=>Lx(t,e))}findAll(r={}){const t=this.getAll();return Object.keys(r).length>0?t.filter(e=>Lx(r,e)):t}notify(r){bs.batch(()=>{this.listeners.forEach(t=>{t(r)})})}onFocus(){bs.batch(()=>{this.getAll().forEach(r=>{r.onFocus()})})}onOnline(){bs.batch(()=>{this.getAll().forEach(r=>{r.onOnline()})})}},Ik=class{#t;#e;#r;#n;#i;#a;#s;#o;constructor(r={}){this.#t=r.queryCache||new Bk,this.#e=r.mutationCache||new Mk,this.#r=r.defaultOptions||{},this.#n=new Map,this.#i=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#s=a2.subscribe(async r=>{r&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#o=fg.subscribe(async r=>{r&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#s?.(),this.#s=void 0,this.#o?.(),this.#o=void 0)}isFetching(r){return this.#t.findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return this.#e.findAll({...r,status:"pending"}).length}getQueryData(r){const t=this.defaultQueryOptions({queryKey:r});return this.#t.get(t.queryHash)?.state.data}ensureQueryData(r){const t=this.defaultQueryOptions(r),e=this.#t.build(this,t),n=e.state.data;return n===void 0?this.fetchQuery(r):(r.revalidateIfStale&&e.isStaleByTime(Ec(t.staleTime,e))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(r){return this.#t.findAll(r).map(({queryKey:t,state:e})=>{const n=e.data;return[t,n]})}setQueryData(r,t,e){const n=this.defaultQueryOptions({queryKey:r}),s=this.#t.get(n.queryHash)?.state.data,l=vk(t,s);if(l!==void 0)return this.#t.build(this,n).setData(l,{...e,manual:!0})}setQueriesData(r,t,e){return bs.batch(()=>this.#t.findAll(r).map(({queryKey:n})=>[n,this.setQueryData(n,t,e)]))}getQueryState(r){const t=this.defaultQueryOptions({queryKey:r});return this.#t.get(t.queryHash)?.state}removeQueries(r){const t=this.#t;bs.batch(()=>{t.findAll(r).forEach(e=>{t.remove(e)})})}resetQueries(r,t){const e=this.#t;return bs.batch(()=>(e.findAll(r).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...r},t)))}cancelQueries(r,t={}){const e={revert:!0,...t},n=bs.batch(()=>this.#t.findAll(r).map(i=>i.cancel(e)));return Promise.all(n).then(Na).catch(Na)}invalidateQueries(r,t={}){return bs.batch(()=>(this.#t.findAll(r).forEach(e=>{e.invalidate()}),r?.refetchType==="none"?Promise.resolve():this.refetchQueries({...r,type:r?.refetchType??r?.type??"active"},t)))}refetchQueries(r,t={}){const e={...t,cancelRefetch:t.cancelRefetch??!0},n=bs.batch(()=>this.#t.findAll(r).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,e);return e.throwOnError||(s=s.catch(Na)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(Na)}fetchQuery(r){const t=this.defaultQueryOptions(r);t.retry===void 0&&(t.retry=!1);const e=this.#t.build(this,t);return e.isStaleByTime(Ec(t.staleTime,e))?e.fetch(t):Promise.resolve(e.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(Na).catch(Na)}fetchInfiniteQuery(r){return r.behavior=jx(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(Na).catch(Na)}ensureInfiniteQueryData(r){return r.behavior=jx(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return fg.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#r}setDefaultOptions(r){this.#r=r}setQueryDefaults(r,t){this.#n.set(oh(r),{queryKey:r,defaultOptions:t})}getQueryDefaults(r){const t=[...this.#n.values()],e={};return t.forEach(n=>{Zd(r,n.queryKey)&&Object.assign(e,n.defaultOptions)}),e}setMutationDefaults(r,t){this.#i.set(oh(r),{mutationKey:r,defaultOptions:t})}getMutationDefaults(r){const t=[...this.#i.values()],e={};return t.forEach(n=>{Zd(r,n.mutationKey)&&Object.assign(e,n.defaultOptions)}),e}defaultQueryOptions(r){if(r._defaulted)return r;const t={...this.#r.queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return t.queryHash||(t.queryHash=r2(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===i2&&(t.enabled=!1),t}defaultMutationOptions(r){return r?._defaulted?r:{...this.#r.mutations,...r?.mutationKey&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},F3=Lt.createContext(void 0),Lc=r=>{const t=Lt.useContext(F3);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},jk=({client:r,children:t})=>(Lt.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),Y.jsx(F3.Provider,{value:r,children:t})),B3=Lt.createContext(!1),Uk=()=>Lt.useContext(B3);B3.Provider;function zk(){let r=!1;return{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r}}var qk=Lt.createContext(zk()),Hk=()=>Lt.useContext(qk),Gk=(r,t,e)=>{const n=e?.state.error&&typeof r.throwOnError=="function"?s2(r.throwOnError,[e.state.error,e]):r.throwOnError;(r.suspense||r.experimental_prefetchInRender||n)&&(t.isReset()||(r.retryOnMount=!1))},Vk=r=>{Lt.useEffect(()=>{r.clearReset()},[r])},Wk=({result:r,errorResetBoundary:t,throwOnError:e,query:n,suspense:i})=>r.isError&&!t.isReset()&&!r.isFetching&&n&&(i&&r.data===void 0||s2(e,[r.error,n])),Kk=r=>{if(r.suspense){const e=i=>i==="static"?i:Math.max(i??1e3,1e3),n=r.staleTime;r.staleTime=typeof n=="function"?(...i)=>e(n(...i)):e(n),typeof r.gcTime=="number"&&(r.gcTime=Math.max(r.gcTime,1e3))}},$k=(r,t)=>r.isLoading&&r.isFetching&&!t,Xk=(r,t)=>r?.suspense&&t.isPending,zx=(r,t,e)=>t.fetchOptimistic(r).catch(()=>{e.clearReset()});function Yk(r,t,e){const n=Uk(),i=Hk(),s=Lc(),l=s.defaultQueryOptions(r);s.getDefaultOptions().queries?._experimental_beforeQuery?.(l);const o=s.getQueryCache().get(l.queryHash);l._optimisticResults=n?"isRestoring":"optimistic",Kk(l),Gk(l,i,o),Vk(i);const c=!s.getQueryCache().get(l.queryHash),[h]=Lt.useState(()=>new t(s,l)),f=h.getOptimisticResult(l),p=!n&&r.subscribed!==!1;if(Lt.useSyncExternalStore(Lt.useCallback(y=>{const m=p?h.subscribe(bs.batchCalls(y)):Na;return h.updateResult(),m},[h,p]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),Lt.useEffect(()=>{h.setOptions(l)},[l,h]),Xk(l,f))throw zx(l,h,i);if(Wk({result:f,errorResetBoundary:i,throwOnError:l.throwOnError,query:o,suspense:l.suspense}))throw f.error;return s.getDefaultOptions().queries?._experimental_afterQuery?.(l,f),l.experimental_prefetchInRender&&!ah&&$k(f,n)&&(c?zx(l,h,i):o?.promise)?.catch(Na).finally(()=>{h.updateResult()}),l.notifyOnChangeProps?f:h.trackResult(f)}function Go(r,t){return Yk(r,Rk)}function ka(r,t){const e=Lc(),[n]=Lt.useState(()=>new Fk(e,r));Lt.useEffect(()=>{n.setOptions(r)},[n,r]);const i=Lt.useSyncExternalStore(Lt.useCallback(l=>n.subscribe(bs.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=Lt.useCallback((l,o)=>{n.mutate(l,o).catch(Na)},[n]);if(i.error&&s2(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}const qx=r=>{let t;const e=new Set,n=(h,f)=>{const p=typeof h=="function"?h(t):h;if(!Object.is(p,t)){const y=t;t=f??(typeof p!="object"||p===null)?p:Object.assign({},t,p),e.forEach(m=>m(t,y))}},i=()=>t,o={setState:n,getState:i,getInitialState:()=>c,subscribe:h=>(e.add(h),()=>e.delete(h))},c=t=r(n,i,o);return o},Qk=(r=>r?qx(r):qx),Zk=r=>r;function Jk(r,t=Zk){const e=dm.useSyncExternalStore(r.subscribe,dm.useCallback(()=>t(r.getState()),[r,t]),dm.useCallback(()=>t(r.getInitialState()),[r,t]));return dm.useDebugValue(e),e}const Hx=r=>{const t=Qk(r),e=n=>Jk(t,n);return Object.assign(e,t),e},t8=(r=>r?Hx(r):Hx);function e8(r,t){let e;try{e=r()}catch{return}return{getItem:i=>{var s;const l=c=>c===null?null:JSON.parse(c,void 0),o=(s=e.getItem(i))!=null?s:null;return o instanceof Promise?o.then(l):l(o)},setItem:(i,s)=>e.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>e.removeItem(i)}}const ob=r=>t=>{try{const e=r(t);return e instanceof Promise?e:{then(n){return ob(n)(e)},catch(n){return this}}}catch(e){return{then(n){return this},catch(n){return ob(n)(e)}}}},n8=(r,t)=>(e,n,i)=>{let s={storage:e8(()=>window.localStorage),partialize:_=>_,version:0,merge:(_,v)=>({...v,..._}),...t},l=!1,o=0;const c=new Set,h=new Set;let f=s.storage;if(!f)return r((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),e(..._)},n,i);const p=()=>{const _=s.partialize({...n()});return f.setItem(s.name,{state:_,version:s.version})},y=i.setState;i.setState=(_,v)=>(y(_,v),p());const m=r((..._)=>(e(..._),p()),n,i);i.getInitialState=()=>m;let w;const b=()=>{var _,v;if(!f)return;const A=++o;l=!1,c.forEach(S=>{var O;return S((O=n())!=null?O:m)});const C=((v=s.onRehydrateStorage)==null?void 0:v.call(s,(_=n())!=null?_:m))||void 0;return ob(f.getItem.bind(f))(s.name).then(S=>{if(S)if(typeof S.version=="number"&&S.version!==s.version){if(s.migrate){const O=s.migrate(S.state,S.version);return O instanceof Promise?O.then(q=>[!0,q]):[!0,O]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,S.state];return[!1,void 0]}).then(S=>{var O;if(A!==o)return;const[q,H]=S;if(w=s.merge(H,(O=n())!=null?O:m),e(w,!0),q)return p()}).then(()=>{A===o&&(C?.(w,void 0),w=n(),l=!0,h.forEach(S=>S(w)))}).catch(S=>{A===o&&C?.(void 0,S)})};return i.persist={setOptions:_=>{s={...s,..._},_.storage&&(f=_.storage)},clearStorage:()=>{f?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>b(),hasHydrated:()=>l,onHydrate:_=>(c.add(_),()=>{c.delete(_)}),onFinishHydration:_=>(h.add(_),()=>{h.delete(_)})},s.skipHydration||b(),w||m},r8=n8,Ku=t8(r8(r=>({token:null,setToken:t=>r({token:t}),logout:()=>r({token:null})}),{name:"wisemark-auth",partialize:r=>({token:r.token})}));function I3(r,t){return function(){return r.apply(t,arguments)}}const{toString:i8}=Object.prototype,{getPrototypeOf:l2}=Object,{iterator:Rg,toStringTag:j3}=Symbol,Lg=(r=>t=>{const e=i8.call(t);return r[e]||(r[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),bl=r=>(r=r.toLowerCase(),t=>Lg(t)===r),Og=r=>t=>typeof t===r,{isArray:Hf}=Array,Nf=Og("undefined");function up(r){return r!==null&&!Nf(r)&&r.constructor!==null&&!Nf(r.constructor)&&Za(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const U3=bl("ArrayBuffer");function s8(r){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(r):t=r&&r.buffer&&U3(r.buffer),t}const a8=Og("string"),Za=Og("function"),z3=Og("number"),cp=r=>r!==null&&typeof r=="object",o8=r=>r===!0||r===!1,$m=r=>{if(Lg(r)!=="object")return!1;const t=l2(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(j3 in r)&&!(Rg in r)},l8=r=>{if(!cp(r)||up(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},u8=bl("Date"),c8=bl("File"),h8=bl("Blob"),f8=bl("FileList"),d8=r=>cp(r)&&Za(r.pipe),p8=r=>{let t;return r&&(typeof FormData=="function"&&r instanceof FormData||Za(r.append)&&((t=Lg(r))==="formdata"||t==="object"&&Za(r.toString)&&r.toString()==="[object FormData]"))},m8=bl("URLSearchParams"),[g8,y8,v8,b8]=["ReadableStream","Request","Response","Headers"].map(bl),w8=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function hp(r,t,{allOwnKeys:e=!1}={}){if(r===null||typeof r>"u")return;let n,i;if(typeof r!="object"&&(r=[r]),Hf(r))for(n=0,i=r.length;n<i;n++)t.call(null,r[n],n,r);else{if(up(r))return;const s=e?Object.getOwnPropertyNames(r):Object.keys(r),l=s.length;let o;for(n=0;n<l;n++)o=s[n],t.call(null,r[o],o,r)}}function q3(r,t){if(up(r))return null;t=t.toLowerCase();const e=Object.keys(r);let n=e.length,i;for(;n-- >0;)if(i=e[n],t===i.toLowerCase())return i;return null}const Yc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,H3=r=>!Nf(r)&&r!==Yc;function lb(){const{caseless:r,skipUndefined:t}=H3(this)&&this||{},e={},n=(i,s)=>{if(s==="__proto__"||s==="constructor"||s==="prototype")return;const l=r&&q3(e,s)||s;$m(e[l])&&$m(i)?e[l]=lb(e[l],i):$m(i)?e[l]=lb({},i):Hf(i)?e[l]=i.slice():(!t||!Nf(i))&&(e[l]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&hp(arguments[i],n);return e}const x8=(r,t,e,{allOwnKeys:n}={})=>(hp(t,(i,s)=>{e&&Za(i)?Object.defineProperty(r,s,{value:I3(i,e),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(r,s,{value:i,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:n}),r),_8=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),A8=(r,t,e,n)=>{r.prototype=Object.create(t.prototype,n),Object.defineProperty(r.prototype,"constructor",{value:r,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(r,"super",{value:t.prototype}),e&&Object.assign(r.prototype,e)},S8=(r,t,e,n)=>{let i,s,l;const o={};if(t=t||{},r==null)return t;do{for(i=Object.getOwnPropertyNames(r),s=i.length;s-- >0;)l=i[s],(!n||n(l,r,t))&&!o[l]&&(t[l]=r[l],o[l]=!0);r=e!==!1&&l2(r)}while(r&&(!e||e(r,t))&&r!==Object.prototype);return t},E8=(r,t,e)=>{r=String(r),(e===void 0||e>r.length)&&(e=r.length),e-=t.length;const n=r.indexOf(t,e);return n!==-1&&n===e},C8=r=>{if(!r)return null;if(Hf(r))return r;let t=r.length;if(!z3(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=r[t];return e},T8=(r=>t=>r&&t instanceof r)(typeof Uint8Array<"u"&&l2(Uint8Array)),N8=(r,t)=>{const n=(r&&r[Rg]).call(r);let i;for(;(i=n.next())&&!i.done;){const s=i.value;t.call(r,s[0],s[1])}},k8=(r,t)=>{let e;const n=[];for(;(e=r.exec(t))!==null;)n.push(e);return n},R8=bl("HTMLFormElement"),L8=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,i){return n.toUpperCase()+i}),Gx=(({hasOwnProperty:r})=>(t,e)=>r.call(t,e))(Object.prototype),O8=bl("RegExp"),G3=(r,t)=>{const e=Object.getOwnPropertyDescriptors(r),n={};hp(e,(i,s)=>{let l;(l=t(i,s,r))!==!1&&(n[s]=l||i)}),Object.defineProperties(r,n)},D8=r=>{G3(r,(t,e)=>{if(Za(r)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=r[e];if(Za(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},P8=(r,t)=>{const e={},n=i=>{i.forEach(s=>{e[s]=!0})};return Hf(r)?n(r):n(String(r).split(t)),e},M8=()=>{},F8=(r,t)=>r!=null&&Number.isFinite(r=+r)?r:t;function B8(r){return!!(r&&Za(r.append)&&r[j3]==="FormData"&&r[Rg])}const I8=r=>{const t=new Array(10),e=(n,i)=>{if(cp(n)){if(t.indexOf(n)>=0)return;if(up(n))return n;if(!("toJSON"in n)){t[i]=n;const s=Hf(n)?[]:{};return hp(n,(l,o)=>{const c=e(l,i+1);!Nf(c)&&(s[o]=c)}),t[i]=void 0,s}}return n};return e(r,0)},j8=bl("AsyncFunction"),U8=r=>r&&(cp(r)||Za(r))&&Za(r.then)&&Za(r.catch),V3=((r,t)=>r?setImmediate:t?((e,n)=>(Yc.addEventListener("message",({source:i,data:s})=>{i===Yc&&s===e&&n.length&&n.shift()()},!1),i=>{n.push(i),Yc.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",Za(Yc.postMessage)),z8=typeof queueMicrotask<"u"?queueMicrotask.bind(Yc):typeof process<"u"&&process.nextTick||V3,q8=r=>r!=null&&Za(r[Rg]),ce={isArray:Hf,isArrayBuffer:U3,isBuffer:up,isFormData:p8,isArrayBufferView:s8,isString:a8,isNumber:z3,isBoolean:o8,isObject:cp,isPlainObject:$m,isEmptyObject:l8,isReadableStream:g8,isRequest:y8,isResponse:v8,isHeaders:b8,isUndefined:Nf,isDate:u8,isFile:c8,isBlob:h8,isRegExp:O8,isFunction:Za,isStream:d8,isURLSearchParams:m8,isTypedArray:T8,isFileList:f8,forEach:hp,merge:lb,extend:x8,trim:w8,stripBOM:_8,inherits:A8,toFlatObject:S8,kindOf:Lg,kindOfTest:bl,endsWith:E8,toArray:C8,forEachEntry:N8,matchAll:k8,isHTMLForm:R8,hasOwnProperty:Gx,hasOwnProp:Gx,reduceDescriptors:G3,freezeMethods:D8,toObjectSet:P8,toCamelCase:L8,noop:M8,toFiniteNumber:F8,findKey:q3,global:Yc,isContextDefined:H3,isSpecCompliantForm:B8,toJSONObject:I8,isAsyncFn:j8,isThenable:U8,setImmediate:V3,asap:z8,isIterable:q8};let xn=class W3 extends Error{static from(t,e,n,i,s,l){const o=new W3(t.message,e||t.code,n,i,s);return o.cause=t,o.name=t.name,l&&Object.assign(o,l),o}constructor(t,e,n,i,s){super(t),this.name="AxiosError",this.isAxiosError=!0,e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s,this.status=s.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ce.toJSONObject(this.config),code:this.code,status:this.status}}};xn.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";xn.ERR_BAD_OPTION="ERR_BAD_OPTION";xn.ECONNABORTED="ECONNABORTED";xn.ETIMEDOUT="ETIMEDOUT";xn.ERR_NETWORK="ERR_NETWORK";xn.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";xn.ERR_DEPRECATED="ERR_DEPRECATED";xn.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";xn.ERR_BAD_REQUEST="ERR_BAD_REQUEST";xn.ERR_CANCELED="ERR_CANCELED";xn.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";xn.ERR_INVALID_URL="ERR_INVALID_URL";const H8=null;function ub(r){return ce.isPlainObject(r)||ce.isArray(r)}function K3(r){return ce.endsWith(r,"[]")?r.slice(0,-2):r}function Vx(r,t,e){return r?r.concat(t).map(function(i,s){return i=K3(i),!e&&s?"["+i+"]":i}).join(e?".":""):t}function G8(r){return ce.isArray(r)&&!r.some(ub)}const V8=ce.toFlatObject(ce,{},null,function(t){return/^is[A-Z]/.test(t)});function Dg(r,t,e){if(!ce.isObject(r))throw new TypeError("target must be an object");t=t||new FormData,e=ce.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,_){return!ce.isUndefined(_[b])});const n=e.metaTokens,i=e.visitor||f,s=e.dots,l=e.indexes,c=(e.Blob||typeof Blob<"u"&&Blob)&&ce.isSpecCompliantForm(t);if(!ce.isFunction(i))throw new TypeError("visitor must be a function");function h(w){if(w===null)return"";if(ce.isDate(w))return w.toISOString();if(ce.isBoolean(w))return w.toString();if(!c&&ce.isBlob(w))throw new xn("Blob is not supported. Use a Buffer instead.");return ce.isArrayBuffer(w)||ce.isTypedArray(w)?c&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function f(w,b,_){let v=w;if(w&&!_&&typeof w=="object"){if(ce.endsWith(b,"{}"))b=n?b:b.slice(0,-2),w=JSON.stringify(w);else if(ce.isArray(w)&&G8(w)||(ce.isFileList(w)||ce.endsWith(b,"[]"))&&(v=ce.toArray(w)))return b=K3(b),v.forEach(function(C,S){!(ce.isUndefined(C)||C===null)&&t.append(l===!0?Vx([b],S,s):l===null?b:b+"[]",h(C))}),!1}return ub(w)?!0:(t.append(Vx(_,b,s),h(w)),!1)}const p=[],y=Object.assign(V8,{defaultVisitor:f,convertValue:h,isVisitable:ub});function m(w,b){if(!ce.isUndefined(w)){if(p.indexOf(w)!==-1)throw Error("Circular reference detected in "+b.join("."));p.push(w),ce.forEach(w,function(v,A){(!(ce.isUndefined(v)||v===null)&&i.call(t,v,ce.isString(A)?A.trim():A,b,y))===!0&&m(v,b?b.concat(A):[A])}),p.pop()}}if(!ce.isObject(r))throw new TypeError("data must be an object");return m(r),t}function Wx(r){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function u2(r,t){this._pairs=[],r&&Dg(r,this,t)}const $3=u2.prototype;$3.append=function(t,e){this._pairs.push([t,e])};$3.toString=function(t){const e=t?function(n){return t.call(this,n,Wx)}:Wx;return this._pairs.map(function(i){return e(i[0])+"="+e(i[1])},"").join("&")};function W8(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function X3(r,t,e){if(!t)return r;const n=e&&e.encode||W8,i=ce.isFunction(e)?{serialize:e}:e,s=i&&i.serialize;let l;if(s?l=s(t,i):l=ce.isURLSearchParams(t)?t.toString():new u2(t,i).toString(n),l){const o=r.indexOf("#");o!==-1&&(r=r.slice(0,o)),r+=(r.indexOf("?")===-1?"?":"&")+l}return r}class Kx{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ce.forEach(this.handlers,function(n){n!==null&&t(n)})}}const c2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},K8=typeof URLSearchParams<"u"?URLSearchParams:u2,$8=typeof FormData<"u"?FormData:null,X8=typeof Blob<"u"?Blob:null,Y8={isBrowser:!0,classes:{URLSearchParams:K8,FormData:$8,Blob:X8},protocols:["http","https","file","blob","url","data"]},h2=typeof window<"u"&&typeof document<"u",cb=typeof navigator=="object"&&navigator||void 0,Q8=h2&&(!cb||["ReactNative","NativeScript","NS"].indexOf(cb.product)<0),Z8=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",J8=h2&&window.location.href||"http://localhost",tR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:h2,hasStandardBrowserEnv:Q8,hasStandardBrowserWebWorkerEnv:Z8,navigator:cb,origin:J8},Symbol.toStringTag,{value:"Module"})),ha={...tR,...Y8};function eR(r,t){return Dg(r,new ha.classes.URLSearchParams,{visitor:function(e,n,i,s){return ha.isNode&&ce.isBuffer(e)?(this.append(n,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function nR(r){return ce.matchAll(/\w+|\[(\w*)]/g,r).map(t=>t[0]==="[]"?"":t[1]||t[0])}function rR(r){const t={},e=Object.keys(r);let n;const i=e.length;let s;for(n=0;n<i;n++)s=e[n],t[s]=r[s];return t}function Y3(r){function t(e,n,i,s){let l=e[s++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),c=s>=e.length;return l=!l&&ce.isArray(i)?i.length:l,c?(ce.hasOwnProp(i,l)?i[l]=[i[l],n]:i[l]=n,!o):((!i[l]||!ce.isObject(i[l]))&&(i[l]=[]),t(e,n,i[l],s)&&ce.isArray(i[l])&&(i[l]=rR(i[l])),!o)}if(ce.isFormData(r)&&ce.isFunction(r.entries)){const e={};return ce.forEachEntry(r,(n,i)=>{t(nR(n),i,e,0)}),e}return null}function iR(r,t,e){if(ce.isString(r))try{return(t||JSON.parse)(r),ce.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(r)}const fp={transitional:c2,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",i=n.indexOf("application/json")>-1,s=ce.isObject(t);if(s&&ce.isHTMLForm(t)&&(t=new FormData(t)),ce.isFormData(t))return i?JSON.stringify(Y3(t)):t;if(ce.isArrayBuffer(t)||ce.isBuffer(t)||ce.isStream(t)||ce.isFile(t)||ce.isBlob(t)||ce.isReadableStream(t))return t;if(ce.isArrayBufferView(t))return t.buffer;if(ce.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return eR(t,this.formSerializer).toString();if((o=ce.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Dg(o?{"files[]":t}:t,c&&new c,this.formSerializer)}}return s||i?(e.setContentType("application/json",!1),iR(t)):t}],transformResponse:[function(t){const e=this.transitional||fp.transitional,n=e&&e.forcedJSONParsing,i=this.responseType==="json";if(ce.isResponse(t)||ce.isReadableStream(t))return t;if(t&&ce.isString(t)&&(n&&!this.responseType||i)){const l=!(e&&e.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(o){if(l)throw o.name==="SyntaxError"?xn.from(o,xn.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ha.classes.FormData,Blob:ha.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ce.forEach(["delete","get","head","post","put","patch"],r=>{fp.headers[r]={}});const sR=ce.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),aR=r=>{const t={};let e,n,i;return r&&r.split(`
`).forEach(function(l){i=l.indexOf(":"),e=l.substring(0,i).trim().toLowerCase(),n=l.substring(i+1).trim(),!(!e||t[e]&&sR[e])&&(e==="set-cookie"?t[e]?t[e].push(n):t[e]=[n]:t[e]=t[e]?t[e]+", "+n:n)}),t},$x=Symbol("internals");function Td(r){return r&&String(r).trim().toLowerCase()}function Xm(r){return r===!1||r==null?r:ce.isArray(r)?r.map(Xm):String(r)}function oR(r){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(r);)t[n[1]]=n[2];return t}const lR=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function N1(r,t,e,n,i){if(ce.isFunction(n))return n.call(this,t,e);if(i&&(t=e),!!ce.isString(t)){if(ce.isString(n))return t.indexOf(n)!==-1;if(ce.isRegExp(n))return n.test(t)}}function uR(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function cR(r,t){const e=ce.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+e,{value:function(i,s,l){return this[n].call(this,t,i,s,l)},configurable:!0})})}let Ja=class{constructor(t){t&&this.set(t)}set(t,e,n){const i=this;function s(o,c,h){const f=Td(c);if(!f)throw new Error("header name must be a non-empty string");const p=ce.findKey(i,f);(!p||i[p]===void 0||h===!0||h===void 0&&i[p]!==!1)&&(i[p||c]=Xm(o))}const l=(o,c)=>ce.forEach(o,(h,f)=>s(h,f,c));if(ce.isPlainObject(t)||t instanceof this.constructor)l(t,e);else if(ce.isString(t)&&(t=t.trim())&&!lR(t))l(aR(t),e);else if(ce.isObject(t)&&ce.isIterable(t)){let o={},c,h;for(const f of t){if(!ce.isArray(f))throw TypeError("Object iterator must return a key-value pair");o[h=f[0]]=(c=o[h])?ce.isArray(c)?[...c,f[1]]:[c,f[1]]:f[1]}l(o,e)}else t!=null&&s(e,t,n);return this}get(t,e){if(t=Td(t),t){const n=ce.findKey(this,t);if(n){const i=this[n];if(!e)return i;if(e===!0)return oR(i);if(ce.isFunction(e))return e.call(this,i,n);if(ce.isRegExp(e))return e.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Td(t),t){const n=ce.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||N1(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let i=!1;function s(l){if(l=Td(l),l){const o=ce.findKey(n,l);o&&(!e||N1(n,n[o],o,e))&&(delete n[o],i=!0)}}return ce.isArray(t)?t.forEach(s):s(t),i}clear(t){const e=Object.keys(this);let n=e.length,i=!1;for(;n--;){const s=e[n];(!t||N1(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const e=this,n={};return ce.forEach(this,(i,s)=>{const l=ce.findKey(n,s);if(l){e[l]=Xm(i),delete e[s];return}const o=t?uR(s):String(s).trim();o!==s&&delete e[s],e[o]=Xm(i),n[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return ce.forEach(this,(n,i)=>{n!=null&&n!==!1&&(e[i]=t&&ce.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[$x]=this[$x]={accessors:{}}).accessors,i=this.prototype;function s(l){const o=Td(l);n[o]||(cR(i,l),n[o]=!0)}return ce.isArray(t)?t.forEach(s):s(t),this}};Ja.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ce.reduceDescriptors(Ja.prototype,({value:r},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(n){this[e]=n}}});ce.freezeMethods(Ja);function k1(r,t){const e=this||fp,n=t||e,i=Ja.from(n.headers);let s=n.data;return ce.forEach(r,function(o){s=o.call(e,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function Q3(r){return!!(r&&r.__CANCEL__)}let dp=class extends xn{constructor(t,e,n){super(t??"canceled",xn.ERR_CANCELED,e,n),this.name="CanceledError",this.__CANCEL__=!0}};function Z3(r,t,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?r(e):t(new xn("Request failed with status code "+e.status,[xn.ERR_BAD_REQUEST,xn.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function hR(r){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return t&&t[1]||""}function fR(r,t){r=r||10;const e=new Array(r),n=new Array(r);let i=0,s=0,l;return t=t!==void 0?t:1e3,function(c){const h=Date.now(),f=n[s];l||(l=h),e[i]=c,n[i]=h;let p=s,y=0;for(;p!==i;)y+=e[p++],p=p%r;if(i=(i+1)%r,i===s&&(s=(s+1)%r),h-l<t)return;const m=f&&h-f;return m?Math.round(y*1e3/m):void 0}}function dR(r,t){let e=0,n=1e3/t,i,s;const l=(h,f=Date.now())=>{e=f,i=null,s&&(clearTimeout(s),s=null),r(...h)};return[(...h)=>{const f=Date.now(),p=f-e;p>=n?l(h,f):(i=h,s||(s=setTimeout(()=>{s=null,l(i)},n-p)))},()=>i&&l(i)]}const dg=(r,t,e=3)=>{let n=0;const i=fR(50,250);return dR(s=>{const l=s.loaded,o=s.lengthComputable?s.total:void 0,c=l-n,h=i(c),f=l<=o;n=l;const p={loaded:l,total:o,progress:o?l/o:void 0,bytes:c,rate:h||void 0,estimated:h&&o&&f?(o-l)/h:void 0,event:s,lengthComputable:o!=null,[t?"download":"upload"]:!0};r(p)},e)},Xx=(r,t)=>{const e=r!=null;return[n=>t[0]({lengthComputable:e,total:r,loaded:n}),t[1]]},Yx=r=>(...t)=>ce.asap(()=>r(...t)),pR=ha.hasStandardBrowserEnv?((r,t)=>e=>(e=new URL(e,ha.origin),r.protocol===e.protocol&&r.host===e.host&&(t||r.port===e.port)))(new URL(ha.origin),ha.navigator&&/(msie|trident)/i.test(ha.navigator.userAgent)):()=>!0,mR=ha.hasStandardBrowserEnv?{write(r,t,e,n,i,s,l){if(typeof document>"u")return;const o=[`${r}=${encodeURIComponent(t)}`];ce.isNumber(e)&&o.push(`expires=${new Date(e).toUTCString()}`),ce.isString(n)&&o.push(`path=${n}`),ce.isString(i)&&o.push(`domain=${i}`),s===!0&&o.push("secure"),ce.isString(l)&&o.push(`SameSite=${l}`),document.cookie=o.join("; ")},read(r){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+r+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(r){this.write(r,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function gR(r){return typeof r!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function yR(r,t){return t?r.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):r}function J3(r,t,e){let n=!gR(t);return r&&(n||e==!1)?yR(r,t):t}const Qx=r=>r instanceof Ja?{...r}:r;function lh(r,t){t=t||{};const e={};function n(h,f,p,y){return ce.isPlainObject(h)&&ce.isPlainObject(f)?ce.merge.call({caseless:y},h,f):ce.isPlainObject(f)?ce.merge({},f):ce.isArray(f)?f.slice():f}function i(h,f,p,y){if(ce.isUndefined(f)){if(!ce.isUndefined(h))return n(void 0,h,p,y)}else return n(h,f,p,y)}function s(h,f){if(!ce.isUndefined(f))return n(void 0,f)}function l(h,f){if(ce.isUndefined(f)){if(!ce.isUndefined(h))return n(void 0,h)}else return n(void 0,f)}function o(h,f,p){if(p in t)return n(h,f);if(p in r)return n(void 0,h)}const c={url:s,method:s,data:s,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(h,f,p)=>i(Qx(h),Qx(f),p,!0)};return ce.forEach(Object.keys({...r,...t}),function(f){if(f==="__proto__"||f==="constructor"||f==="prototype")return;const p=ce.hasOwnProp(c,f)?c[f]:i,y=p(r[f],t[f],f);ce.isUndefined(y)&&p!==o||(e[f]=y)}),e}const t4=r=>{const t=lh({},r);let{data:e,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:l,auth:o}=t;if(t.headers=l=Ja.from(l),t.url=X3(J3(t.baseURL,t.url,t.allowAbsoluteUrls),r.params,r.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),ce.isFormData(e)){if(ha.hasStandardBrowserEnv||ha.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(ce.isFunction(e.getHeaders)){const c=e.getHeaders(),h=["content-type","content-length"];Object.entries(c).forEach(([f,p])=>{h.includes(f.toLowerCase())&&l.set(f,p)})}}if(ha.hasStandardBrowserEnv&&(n&&ce.isFunction(n)&&(n=n(t)),n||n!==!1&&pR(t.url))){const c=i&&s&&mR.read(s);c&&l.set(i,c)}return t},vR=typeof XMLHttpRequest<"u",bR=vR&&function(r){return new Promise(function(e,n){const i=t4(r);let s=i.data;const l=Ja.from(i.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:h}=i,f,p,y,m,w;function b(){m&&m(),w&&w(),i.cancelToken&&i.cancelToken.unsubscribe(f),i.signal&&i.signal.removeEventListener("abort",f)}let _=new XMLHttpRequest;_.open(i.method.toUpperCase(),i.url,!0),_.timeout=i.timeout;function v(){if(!_)return;const C=Ja.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),O={data:!o||o==="text"||o==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:C,config:r,request:_};Z3(function(H){e(H),b()},function(H){n(H),b()},O),_=null}"onloadend"in _?_.onloadend=v:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(v)},_.onabort=function(){_&&(n(new xn("Request aborted",xn.ECONNABORTED,r,_)),_=null)},_.onerror=function(S){const O=S&&S.message?S.message:"Network Error",q=new xn(O,xn.ERR_NETWORK,r,_);q.event=S||null,n(q),_=null},_.ontimeout=function(){let S=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const O=i.transitional||c2;i.timeoutErrorMessage&&(S=i.timeoutErrorMessage),n(new xn(S,O.clarifyTimeoutError?xn.ETIMEDOUT:xn.ECONNABORTED,r,_)),_=null},s===void 0&&l.setContentType(null),"setRequestHeader"in _&&ce.forEach(l.toJSON(),function(S,O){_.setRequestHeader(O,S)}),ce.isUndefined(i.withCredentials)||(_.withCredentials=!!i.withCredentials),o&&o!=="json"&&(_.responseType=i.responseType),h&&([y,w]=dg(h,!0),_.addEventListener("progress",y)),c&&_.upload&&([p,m]=dg(c),_.upload.addEventListener("progress",p),_.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(f=C=>{_&&(n(!C||C.type?new dp(null,r,_):C),_.abort(),_=null)},i.cancelToken&&i.cancelToken.subscribe(f),i.signal&&(i.signal.aborted?f():i.signal.addEventListener("abort",f)));const A=hR(i.url);if(A&&ha.protocols.indexOf(A)===-1){n(new xn("Unsupported protocol "+A+":",xn.ERR_BAD_REQUEST,r));return}_.send(s||null)})},wR=(r,t)=>{const{length:e}=r=r?r.filter(Boolean):[];if(t||e){let n=new AbortController,i;const s=function(h){if(!i){i=!0,o();const f=h instanceof Error?h:this.reason;n.abort(f instanceof xn?f:new dp(f instanceof Error?f.message:f))}};let l=t&&setTimeout(()=>{l=null,s(new xn(`timeout of ${t}ms exceeded`,xn.ETIMEDOUT))},t);const o=()=>{r&&(l&&clearTimeout(l),l=null,r.forEach(h=>{h.unsubscribe?h.unsubscribe(s):h.removeEventListener("abort",s)}),r=null)};r.forEach(h=>h.addEventListener("abort",s));const{signal:c}=n;return c.unsubscribe=()=>ce.asap(o),c}},xR=function*(r,t){let e=r.byteLength;if(e<t){yield r;return}let n=0,i;for(;n<e;)i=n+t,yield r.slice(n,i),n=i},_R=async function*(r,t){for await(const e of AR(r))yield*xR(e,t)},AR=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const t=r.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Zx=(r,t,e,n)=>{const i=_R(r,t);let s=0,l,o=c=>{l||(l=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:h,value:f}=await i.next();if(h){o(),c.close();return}let p=f.byteLength;if(e){let y=s+=p;e(y)}c.enqueue(new Uint8Array(f))}catch(h){throw o(h),h}},cancel(c){return o(c),i.return()}},{highWaterMark:2})},Jx=64*1024,{isFunction:gm}=ce,SR=(({Request:r,Response:t})=>({Request:r,Response:t}))(ce.global),{ReadableStream:t_,TextEncoder:e_}=ce.global,n_=(r,...t)=>{try{return!!r(...t)}catch{return!1}},ER=r=>{r=ce.merge.call({skipUndefined:!0},SR,r);const{fetch:t,Request:e,Response:n}=r,i=t?gm(t):typeof fetch=="function",s=gm(e),l=gm(n);if(!i)return!1;const o=i&&gm(t_),c=i&&(typeof e_=="function"?(w=>b=>w.encode(b))(new e_):async w=>new Uint8Array(await new e(w).arrayBuffer())),h=s&&o&&n_(()=>{let w=!1;const b=new e(ha.origin,{body:new t_,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!b}),f=l&&o&&n_(()=>ce.isReadableStream(new n("").body)),p={stream:f&&(w=>w.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!p[w]&&(p[w]=(b,_)=>{let v=b&&b[w];if(v)return v.call(b);throw new xn(`Response type '${w}' is not supported`,xn.ERR_NOT_SUPPORT,_)})});const y=async w=>{if(w==null)return 0;if(ce.isBlob(w))return w.size;if(ce.isSpecCompliantForm(w))return(await new e(ha.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if(ce.isArrayBufferView(w)||ce.isArrayBuffer(w))return w.byteLength;if(ce.isURLSearchParams(w)&&(w=w+""),ce.isString(w))return(await c(w)).byteLength},m=async(w,b)=>{const _=ce.toFiniteNumber(w.getContentLength());return _??y(b)};return async w=>{let{url:b,method:_,data:v,signal:A,cancelToken:C,timeout:S,onDownloadProgress:O,onUploadProgress:q,responseType:H,headers:Q,withCredentials:I="same-origin",fetchOptions:dt}=t4(w),nt=t||fetch;H=H?(H+"").toLowerCase():"text";let B=wR([A,C&&C.toAbortSignal()],S),Z=null;const D=B&&B.unsubscribe&&(()=>{B.unsubscribe()});let mt;try{if(q&&h&&_!=="get"&&_!=="head"&&(mt=await m(Q,v))!==0){let $=new e(b,{method:"POST",body:v,duplex:"half"}),R;if(ce.isFormData(v)&&(R=$.headers.get("content-type"))&&Q.setContentType(R),$.body){const[K,rt]=Xx(mt,dg(Yx(q)));v=Zx($.body,Jx,K,rt)}}ce.isString(I)||(I=I?"include":"omit");const it=s&&"credentials"in e.prototype,st={...dt,signal:B,method:_.toUpperCase(),headers:Q.normalize().toJSON(),body:v,duplex:"half",credentials:it?I:void 0};Z=s&&new e(b,st);let vt=await(s?nt(Z,dt):nt(b,st));const wt=f&&(H==="stream"||H==="response");if(f&&(O||wt&&D)){const $={};["status","statusText","headers"].forEach(pt=>{$[pt]=vt[pt]});const R=ce.toFiniteNumber(vt.headers.get("content-length")),[K,rt]=O&&Xx(R,dg(Yx(O),!0))||[];vt=new n(Zx(vt.body,Jx,K,()=>{rt&&rt(),D&&D()}),$)}H=H||"text";let Ft=await p[ce.findKey(p,H)||"text"](vt,w);return!wt&&D&&D(),await new Promise(($,R)=>{Z3($,R,{data:Ft,headers:Ja.from(vt.headers),status:vt.status,statusText:vt.statusText,config:w,request:Z})})}catch(it){throw D&&D(),it&&it.name==="TypeError"&&/Load failed|fetch/i.test(it.message)?Object.assign(new xn("Network Error",xn.ERR_NETWORK,w,Z,it&&it.response),{cause:it.cause||it}):xn.from(it,it&&it.code,w,Z,it&&it.response)}}},CR=new Map,e4=r=>{let t=r&&r.env||{};const{fetch:e,Request:n,Response:i}=t,s=[n,i,e];let l=s.length,o=l,c,h,f=CR;for(;o--;)c=s[o],h=f.get(c),h===void 0&&f.set(c,h=o?new Map:ER(t)),f=h;return h};e4();const f2={http:H8,xhr:bR,fetch:{get:e4}};ce.forEach(f2,(r,t)=>{if(r){try{Object.defineProperty(r,"name",{value:t})}catch{}Object.defineProperty(r,"adapterName",{value:t})}});const r_=r=>`- ${r}`,TR=r=>ce.isFunction(r)||r===null||r===!1;function NR(r,t){r=ce.isArray(r)?r:[r];const{length:e}=r;let n,i;const s={};for(let l=0;l<e;l++){n=r[l];let o;if(i=n,!TR(n)&&(i=f2[(o=String(n)).toLowerCase()],i===void 0))throw new xn(`Unknown adapter '${o}'`);if(i&&(ce.isFunction(i)||(i=i.get(t))))break;s[o||"#"+l]=i}if(!i){const l=Object.entries(s).map(([c,h])=>`adapter ${c} `+(h===!1?"is not supported by the environment":"is not available in the build"));let o=e?l.length>1?`since :
`+l.map(r_).join(`
`):" "+r_(l[0]):"as no adapter specified";throw new xn("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i}const n4={getAdapter:NR,adapters:f2};function R1(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new dp(null,r)}function i_(r){return R1(r),r.headers=Ja.from(r.headers),r.data=k1.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),n4.getAdapter(r.adapter||fp.adapter,r)(r).then(function(n){return R1(r),n.data=k1.call(r,r.transformResponse,n),n.headers=Ja.from(n.headers),n},function(n){return Q3(n)||(R1(r),n&&n.response&&(n.response.data=k1.call(r,r.transformResponse,n.response),n.response.headers=Ja.from(n.response.headers))),Promise.reject(n)})}const r4="1.13.5",Pg={};["object","boolean","number","function","string","symbol"].forEach((r,t)=>{Pg[r]=function(n){return typeof n===r||"a"+(t<1?"n ":" ")+r}});const s_={};Pg.transitional=function(t,e,n){function i(s,l){return"[Axios v"+r4+"] Transitional option '"+s+"'"+l+(n?". "+n:"")}return(s,l,o)=>{if(t===!1)throw new xn(i(l," has been removed"+(e?" in "+e:"")),xn.ERR_DEPRECATED);return e&&!s_[l]&&(s_[l]=!0,console.warn(i(l," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(s,l,o):!0}};Pg.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function kR(r,t,e){if(typeof r!="object")throw new xn("options must be an object",xn.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let i=n.length;for(;i-- >0;){const s=n[i],l=t[s];if(l){const o=r[s],c=o===void 0||l(o,s,r);if(c!==!0)throw new xn("option "+s+" must be "+c,xn.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new xn("Unknown option "+s,xn.ERR_BAD_OPTION)}}const Ym={assertOptions:kR,validators:Pg},jo=Ym.validators;let rh=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Kx,response:new Kx}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=lh(this.defaults,e);const{transitional:n,paramsSerializer:i,headers:s}=e;n!==void 0&&Ym.assertOptions(n,{silentJSONParsing:jo.transitional(jo.boolean),forcedJSONParsing:jo.transitional(jo.boolean),clarifyTimeoutError:jo.transitional(jo.boolean),legacyInterceptorReqResOrdering:jo.transitional(jo.boolean)},!1),i!=null&&(ce.isFunction(i)?e.paramsSerializer={serialize:i}:Ym.assertOptions(i,{encode:jo.function,serialize:jo.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Ym.assertOptions(e,{baseUrl:jo.spelling("baseURL"),withXsrfToken:jo.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let l=s&&ce.merge(s.common,s[e.method]);s&&ce.forEach(["delete","get","head","post","put","patch","common"],w=>{delete s[w]}),e.headers=Ja.concat(l,s);const o=[];let c=!0;this.interceptors.request.forEach(function(b){if(typeof b.runWhen=="function"&&b.runWhen(e)===!1)return;c=c&&b.synchronous;const _=e.transitional||c2;_&&_.legacyInterceptorReqResOrdering?o.unshift(b.fulfilled,b.rejected):o.push(b.fulfilled,b.rejected)});const h=[];this.interceptors.response.forEach(function(b){h.push(b.fulfilled,b.rejected)});let f,p=0,y;if(!c){const w=[i_.bind(this),void 0];for(w.unshift(...o),w.push(...h),y=w.length,f=Promise.resolve(e);p<y;)f=f.then(w[p++],w[p++]);return f}y=o.length;let m=e;for(;p<y;){const w=o[p++],b=o[p++];try{m=w(m)}catch(_){b.call(this,_);break}}try{f=i_.call(this,m)}catch(w){return Promise.reject(w)}for(p=0,y=h.length;p<y;)f=f.then(h[p++],h[p++]);return f}getUri(t){t=lh(this.defaults,t);const e=J3(t.baseURL,t.url,t.allowAbsoluteUrls);return X3(e,t.params,t.paramsSerializer)}};ce.forEach(["delete","get","head","options"],function(t){rh.prototype[t]=function(e,n){return this.request(lh(n||{},{method:t,url:e,data:(n||{}).data}))}});ce.forEach(["post","put","patch"],function(t){function e(n){return function(s,l,o){return this.request(lh(o||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:l}))}}rh.prototype[t]=e(),rh.prototype[t+"Form"]=e(!0)});let RR=class i4{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(s){e=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const l=new Promise(o=>{n.subscribe(o),s=o}).then(i);return l.cancel=function(){n.unsubscribe(s)},l},t(function(s,l,o){n.reason||(n.reason=new dp(s,l,o),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=n=>{t.abort(n)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new i4(function(i){t=i}),cancel:t}}};function LR(r){return function(e){return r.apply(null,e)}}function OR(r){return ce.isObject(r)&&r.isAxiosError===!0}const hb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(hb).forEach(([r,t])=>{hb[t]=r});function s4(r){const t=new rh(r),e=I3(rh.prototype.request,t);return ce.extend(e,rh.prototype,t,{allOwnKeys:!0}),ce.extend(e,t,null,{allOwnKeys:!0}),e.create=function(i){return s4(lh(r,i))},e}const Vi=s4(fp);Vi.Axios=rh;Vi.CanceledError=dp;Vi.CancelToken=RR;Vi.isCancel=Q3;Vi.VERSION=r4;Vi.toFormData=Dg;Vi.AxiosError=xn;Vi.Cancel=Vi.CanceledError;Vi.all=function(t){return Promise.all(t)};Vi.spread=LR;Vi.isAxiosError=OR;Vi.mergeConfig=lh;Vi.AxiosHeaders=Ja;Vi.formToJSON=r=>Y3(ce.isHTMLForm(r)?new FormData(r):r);Vi.getAdapter=n4.getAdapter;Vi.HttpStatusCode=hb;Vi.default=Vi;const{Axios:I9,AxiosError:j9,CanceledError:U9,isCancel:z9,CancelToken:q9,VERSION:H9,all:G9,Cancel:V9,isAxiosError:W9,spread:K9,toFormData:$9,AxiosHeaders:X9,HttpStatusCode:Y9,formToJSON:Q9,getAdapter:Z9,mergeConfig:J9}=Vi,gr=Vi.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});gr.interceptors.request.use(r=>{const t=Ku.getState().token;return t&&(r.headers.Authorization=`Token ${t}`),r.data instanceof FormData&&delete r.headers["Content-Type"],r});gr.interceptors.response.use(r=>r,r=>(r.response?.status===401&&Ku.getState().logout(),Promise.reject(r)));const kf={login:(r,t)=>gr.post("/auth/login/",{email:r,password:t}),register:r=>gr.post("/auth/register/",r),logout:()=>gr.post("/auth/logout/"),me:()=>gr.get("/auth/me/"),deleteAccount:()=>gr.post("/auth/me/delete/")},Vd={list:()=>gr.get("/projects/"),get:r=>gr.get(`/projects/${r}/`),create:r=>gr.post("/projects/",r),update:(r,t)=>gr.patch(`/projects/${r}/`,t),delete:r=>gr.delete(`/projects/${r}/`)},pl={list:()=>gr.get("/presets/"),get:r=>gr.get(`/presets/${r}/`),create:r=>gr.post("/presets/",r),update:(r,t)=>gr.patch(`/presets/${r}/`,t),delete:r=>gr.delete(`/presets/${r}/`),addColor:(r,t)=>gr.post(`/presets/${r}/colors/`,t),updateColor:(r,t,e)=>gr.patch(`/presets/${r}/colors/${t}/`,e),removeColor:(r,t)=>gr.delete(`/presets/${r}/colors/${t}/`)},Ds={list:r=>gr.get("/documents/",{params:r}),get:r=>gr.get(`/documents/${r}/`),create:r=>gr.post("/documents/",r),createWithFile:r=>gr.post("/documents/",r),getPdf:r=>gr.get(`/documents/${r}/pdf/`,{responseType:"arraybuffer"}),uploadPdf:(r,t)=>gr.post(`/documents/${r}/upload_pdf/`,t),update:(r,t)=>gr.patch(`/documents/${r}/`,t),delete:r=>gr.delete(`/documents/${r}/`),highlights:r=>gr.get(`/documents/${r}/highlights/`),createHighlight:(r,t)=>gr.post(`/documents/${r}/highlights/`,t),updateHighlight:(r,t,e)=>gr.patch(`/documents/${r}/highlights/${t}/`,e),deleteHighlight:(r,t)=>gr.delete(`/documents/${r}/highlights/${t}/`)},DR={page:"bg-slate-50",surface:"bg-white",muted:"bg-slate-100"},Un={body:"text-slate-800",heading:"text-slate-900",secondary:"text-slate-600",muted:"text-slate-500"},Ac={default:"border-slate-200"},Wd="min-h-screen p-6",PR="bg-white border-b border-slate-200",pg="bg-slate-800 text-white rounded-lg px-4 py-2 text-sm font-medium hover:bg-slate-700 cursor-pointer",ym="p-2 rounded-lg text-slate-600 hover:bg-slate-100 cursor-pointer",a_="w-px h-6 bg-slate-200",ih=DR;function MR(){const r=Wu(),t=Ku(p=>p.setToken),[e,n]=Lt.useState(""),[i,s]=Lt.useState(""),[l,o]=Lt.useState(""),[c,h]=Lt.useState(!1),f=async p=>{p.preventDefault(),o(""),h(!0);try{const{data:y}=await kf.login(e,i);t(y.token),r("/",{replace:!0})}catch(y){o(y.response?.data?.detail||y.response?.data?.email?.[0]||"Login failed")}finally{h(!1)}};return Y.jsx("div",{className:`${Wd} ${ih.page} flex items-center justify-center`,children:Y.jsxs("div",{className:"w-full max-w-sm",children:[Y.jsx("h1",{className:`text-2xl font-semibold ${Un.heading} mb-6`,children:"Sign in"}),Y.jsxs("form",{onSubmit:f,className:"flex flex-col gap-4",children:[l&&Y.jsx("p",{className:"text-sm text-red-600",children:l}),Y.jsxs("label",{className:"flex flex-col gap-1",children:[Y.jsx("span",{className:`text-sm ${Un.secondary}`,children:"Email"}),Y.jsx("input",{type:"email",value:e,onChange:p=>n(p.target.value),className:"border border-slate-200 rounded-lg px-3 py-2 text-slate-900",required:!0,autoComplete:"email"})]}),Y.jsxs("label",{className:"flex flex-col gap-1",children:[Y.jsx("span",{className:`text-sm ${Un.secondary}`,children:"Password"}),Y.jsx("input",{type:"password",value:i,onChange:p=>s(p.target.value),className:"border border-slate-200 rounded-lg px-3 py-2 text-slate-900",required:!0,autoComplete:"current-password"})]}),Y.jsx("button",{type:"submit",disabled:c,className:pg,children:c?"Signing in...":"Sign in"})]}),Y.jsxs("p",{className:`mt-4 text-sm ${Un.muted}`,children:["No account? ",Y.jsx(kg,{to:"/register",className:"text-slate-700 underline",children:"Register"})]})]})})}function FR(){const r=Wu(),t=Ku(p=>p.setToken),[e,n]=Lt.useState(""),[i,s]=Lt.useState(""),[l,o]=Lt.useState(""),[c,h]=Lt.useState(!1),f=async p=>{p.preventDefault(),o(""),h(!0);try{await kf.register({email:e,password:i});const{data:y}=await kf.login(e,i);t(y.token),r("/",{replace:!0})}catch(y){const m=y.response?.data;o(m?.email?.[0]||m?.password?.[0]||"Registration failed")}finally{h(!1)}};return Y.jsx("div",{className:`${Wd} ${ih.page} flex items-center justify-center`,children:Y.jsxs("div",{className:"w-full max-w-sm",children:[Y.jsx("h1",{className:`text-2xl font-semibold ${Un.heading} mb-6`,children:"Create account"}),Y.jsxs("form",{onSubmit:f,className:"flex flex-col gap-4",children:[l&&Y.jsx("p",{className:"text-sm text-red-600",children:l}),Y.jsxs("label",{className:"flex flex-col gap-1",children:[Y.jsx("span",{className:`text-sm ${Un.secondary}`,children:"Email"}),Y.jsx("input",{type:"email",value:e,onChange:p=>n(p.target.value),className:"border border-slate-200 rounded-lg px-3 py-2 text-slate-900",required:!0,autoComplete:"email"})]}),Y.jsxs("label",{className:"flex flex-col gap-1",children:[Y.jsx("span",{className:`text-sm ${Un.secondary}`,children:"Password"}),Y.jsx("input",{type:"password",value:i,onChange:p=>s(p.target.value),className:"border border-slate-200 rounded-lg px-3 py-2 text-slate-900",required:!0,autoComplete:"new-password"})]}),Y.jsx("button",{type:"submit",disabled:c,className:pg,children:c?"Creating account...":"Register"})]}),Y.jsxs("p",{className:`mt-4 text-sm ${Un.muted}`,children:["Already have an account? ",Y.jsx(kg,{to:"/login",className:"text-slate-700 underline",children:"Sign in"})]})]})})}const a4=(...r)=>r.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim();const BR=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const IR=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase());const o_=r=>{const t=IR(r);return t.charAt(0).toUpperCase()+t.slice(1)};var jR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const UR=r=>{for(const t in r)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const zR=Lt.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:l,...o},c)=>Lt.createElement("svg",{ref:c,...jR,width:t,height:t,stroke:r,strokeWidth:n?Number(e)*24/Number(t):e,className:a4("lucide",i),...!s&&!UR(o)&&{"aria-hidden":"true"},...o},[...l.map(([h,f])=>Lt.createElement(h,f)),...Array.isArray(s)?s:[s]]));const mi=(r,t)=>{const e=Lt.forwardRef(({className:n,...i},s)=>Lt.createElement(zR,{ref:s,iconNode:t,className:a4(`lucide-${BR(o_(r))}`,`lucide-${r}`,n),...i}));return e.displayName=o_(r),e};const qR=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Mg=mi("arrow-left",qR);const HR=[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]],GR=mi("braces",HR);const VR=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],mg=mi("check",VR);const WR=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],KR=mi("chevron-down",WR);const $R=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],fb=mi("chevron-right",$R);const XR=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],YR=mi("copy",XR);const QR=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ZR=mi("download",QR);const JR=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],tL=mi("file-down",JR);const eL=[["path",{d:"M11 21a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1",key:"likhh7"}],["path",{d:"M16 16a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1",key:"17ky3x"}],["path",{d:"M21 6a2 2 0 0 0-.586-1.414l-2-2A2 2 0 0 0 17 2h-3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1z",key:"1hyeo0"}]],nL=mi("file-stack",eL);const rL=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],d2=mi("file-text",rL);const iL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],su=mi("loader-circle",iL);const sL=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],p2=mi("log-out",sL);const aL=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],oL=mi("palette",aL);const lL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],uL=mi("panel-right-close",lL);const cL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],hL=mi("panel-right-open",cL);const fL=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],gg=mi("pencil",fL);const dL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],l_=mi("plus",dL);const pL=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],o4=mi("search",pL);const mL=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],gL=mi("settings-2",mL);const yL=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Jd=mi("trash-2",yL);const vL=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],db=mi("upload",vL);const bL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Rf=mi("x",bL);const wL=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],xL=mi("zoom-in",wL);const _L=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],AL=mi("zoom-out",_L),zu=["#f59e0b","#3b82f6","#10b981","#ef4444","#8b5cf6","#ec4899","#06b6d4","#f97316"];function SL(r){if(!r)return"";const t=new Date(r);if(Number.isNaN(t.getTime()))return"";const e=new Date,n=e-t,i=Math.floor(n/6e4),s=Math.floor(n/36e5),l=Math.floor(n/864e5);return i<1?"Just now":i<60?`${i} min ago`:s<24?`${s} hour${s===1?"":"s"} ago`:l===1?"Yesterday":l<7?`${l} days ago`:t.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:t.getFullYear()!==e.getFullYear()?"numeric":void 0})}function EL({project:r,onOpen:t}){const[e,n]=Lt.useState(!1),i=r.document_count??0,s=r.annotation_count??0,l=r.color&&zu.includes(r.color)?r.color:zu[r.id%zu.length];return Y.jsxs("div",{onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onClick:()=>t(r.id),role:"button",tabIndex:0,onKeyDown:o=>o.key==="Enter"&&t(r.id),className:"flex items-center gap-4 rounded-xl border border-slate-200 bg-white px-5 py-5 cursor-pointer transition-all duration-200",style:{boxShadow:e?"0 4px 12px rgba(71,85,105,0.08)":"0 1px 3px rgba(0,0,0,0.04)",transform:e?"translateY(-1px)":"none",background:e?"#f8fafc":"#fff"},children:[Y.jsx("div",{className:"shrink-0 rounded-sm",style:{width:4,height:48,background:l}}),Y.jsxs("div",{className:"flex-1 min-w-0",children:[Y.jsx("div",{className:"text-base font-normal text-slate-900 truncate",style:{fontFamily:"'Instrument Serif', serif"},children:r.name}),Y.jsxs("div",{className:"flex items-center gap-3 mt-1 text-[13px] text-slate-400",style:{fontFamily:"'JetBrains Mono', monospace"},children:[Y.jsxs("span",{className:"flex items-center gap-1",children:[Y.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-slate-400",children:[Y.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),Y.jsx("polyline",{points:"14 2 14 8 20 8"})]}),i," ",i===1?"doc":"docs"]}),Y.jsx("span",{className:"w-0.5 h-0.5 rounded-full bg-slate-300"}),Y.jsxs("span",{className:"flex items-center gap-1",children:[Y.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-slate-400",children:[Y.jsx("path",{d:"M12 20h9"}),Y.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})]}),s," ",s===1?"annotation":"annotations"]})]})]}),Y.jsx("div",{className:"text-[13px] text-slate-400 whitespace-nowrap shrink-0",style:{fontFamily:"'JetBrains Mono', monospace"},children:SL(r.updated_at)}),Y.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:e?"#475569":"#cbd5e1",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"shrink-0 transition-colors",children:Y.jsx("polyline",{points:"9 18 15 12 9 6"})})]})}function CL({onClose:r,onCreate:t,isPending:e,defaultColorIndex:n=0}){const[i,s]=Lt.useState(""),[l,o]=Lt.useState(zu[n%zu.length]),c=()=>{const h=i.trim();h&&(t(h,l),s(""),o(zu[n%zu.length]))};return Y.jsx("div",{className:"fixed inset-0 bg-slate-950/40 backdrop-blur-sm flex items-center justify-center z-1000",onClick:r,children:Y.jsxs("div",{className:"bg-white rounded-xl p-8 w-full max-w-[420px] shadow-xl mx-4",onClick:h=>h.stopPropagation(),children:[Y.jsx("h2",{className:"m-0 text-xl font-normal text-slate-900",style:{fontFamily:"'Instrument Serif', serif"},children:"New project"}),Y.jsx("p",{className:"mt-2 mb-6 text-sm text-slate-500",style:{fontFamily:"'DM Sans', sans-serif"},children:"Group related deal documents together."}),Y.jsx("label",{className:"block text-[13px] font-medium text-slate-600 mb-1.5 uppercase tracking-wider",style:{fontFamily:"'JetBrains Mono', monospace"},children:"Project name"}),Y.jsx("input",{type:"text",value:i,onChange:h=>s(h.target.value),placeholder:"e.g. Meridian Healthcare CIM",autoFocus:!0,className:"w-full px-3.5 py-2.5 text-[15px] border border-slate-200 rounded-lg outline-none text-slate-800 focus:border-slate-600 transition-colors box-border",style:{fontFamily:"'DM Sans', sans-serif"}}),Y.jsx("label",{className:"block text-[13px] font-medium text-slate-600 mt-5 mb-2 uppercase tracking-wider",style:{fontFamily:"'JetBrains Mono', monospace"},children:"Colour"}),Y.jsx("div",{className:"flex gap-2",children:zu.map(h=>Y.jsx("button",{type:"button",onClick:()=>o(h),className:"w-7 h-7 rounded-full shrink-0 transition-all border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2",style:{background:h,borderColor:l===h?"#1e293b":"transparent",outline:l===h?"2px solid #fff":"none",outlineOffset:-4}},h))}),Y.jsxs("div",{className:"flex justify-end gap-2.5 mt-7",style:{fontFamily:"'DM Sans', sans-serif"},children:[Y.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium border border-slate-200 rounded-lg bg-white text-slate-500 hover:bg-slate-50",children:"Cancel"}),Y.jsx("button",{type:"button",onClick:c,disabled:!i.trim()||e,className:"px-4 py-2 text-sm font-medium rounded-lg text-white transition-colors disabled:bg-slate-300 disabled:cursor-default hover:bg-slate-700",style:{background:i.trim()&&!e?"#1e293b":"#cbd5e1"},children:e?"Creating":"Create project"})]})]})})}function TL(){const r=Wu(),t=Lc(),e=Ku(A=>A.logout),[n,i]=Lt.useState(!1),[s,l]=Lt.useState(""),{data:o}=Go({queryKey:["me"],queryFn:async()=>{const{data:A}=await kf.me();return A}}),{data:c,isLoading:h}=Go({queryKey:["projects"],queryFn:async()=>{const{data:A}=await Vd.list();return A}}),f=Array.isArray(c)?c:c?.results??[],p=f.filter(A=>A.name.toLowerCase().includes(s.toLowerCase())),y=f.reduce((A,C)=>A+(C.document_count??0),0),m=f.reduce((A,C)=>A+(C.annotation_count??0),0),w=ka({mutationFn:({name:A,color:C})=>Vd.create({name:A.trim(),color:C}),onSuccess:()=>{t.invalidateQueries({queryKey:["projects"]}),i(!1)}}),b=(A,C)=>{w.mutate({name:A,color:C})},_=()=>{e(),r("/login",{replace:!0})},v=(o?.email?.[0]||o?.username?.[0]||"?").toUpperCase();return Y.jsxs("div",{className:"min-h-screen bg-slate-50 antialiased",style:{fontFamily:"'DM Sans', sans-serif",color:"#1e293b"},children:[Y.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=DM+Sans:ital,wght@0,400;0,500;0,600;1,400&family=JetBrains+Mono:wght@400;500&display=swap",rel:"stylesheet"}),Y.jsxs("header",{className:"bg-white/92 backdrop-blur-md border-b border-slate-200 py-4 px-10 flex items-center justify-between",children:[Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx("div",{className:"w-6 h-6 rounded-md bg-slate-700 flex items-center justify-center text-white text-xs font-semibold",style:{fontFamily:"'DM Sans', sans-serif"},children:"W"}),Y.jsx("span",{className:"text-[1.05rem] font-semibold text-slate-900",style:{fontFamily:"'Instrument Serif', serif"},children:"WiseMark"})]}),Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx("button",{type:"button",onClick:_,className:"p-2 rounded-lg text-slate-500 hover:text-slate-700 hover:bg-slate-100",title:"Sign out",children:Y.jsx(p2,{className:"w-4 h-4"})}),Y.jsx("button",{type:"button",onClick:()=>r("/app/settings"),className:"w-8 h-8 rounded-full bg-slate-700 text-white flex items-center justify-center text-[13px] font-semibold hover:bg-slate-600 transition-colors cursor-pointer",style:{fontFamily:"'DM Sans', sans-serif"},title:"Account settings",children:v})]})]}),Y.jsxs("div",{className:"max-w-[720px] mx-auto px-6 py-10",style:{fontFamily:"'DM Sans', sans-serif"},children:[Y.jsxs("div",{className:"flex items-start justify-between mb-2",children:[Y.jsx("h1",{className:"m-0 text-[28px] text-slate-950",style:{fontFamily:"'Instrument Serif', serif",fontWeight:700,letterSpacing:"0.01em"},children:"Projects"}),Y.jsxs("button",{type:"button",onClick:()=>i(!0),className:"flex items-center gap-1.5 px-4 py-2 text-sm font-medium rounded-lg text-white transition-colors hover:bg-slate-700",style:{background:"#1e293b",fontFamily:"'DM Sans', sans-serif"},children:[Y.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[Y.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),Y.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"New project"]})]}),Y.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-400 mb-6 uppercase",style:{fontFamily:"'JetBrains Mono', monospace",letterSpacing:"0.08em"},children:[Y.jsxs("span",{children:[f.length," project",f.length!==1?"s":""]}),Y.jsx("span",{className:"w-0.5 h-0.5 rounded-full bg-slate-300"}),Y.jsxs("span",{children:[y," document",y!==1?"s":""]}),Y.jsx("span",{className:"w-0.5 h-0.5 rounded-full bg-slate-300"}),Y.jsxs("span",{children:[m," annotation",m!==1?"s":""]})]}),f.length>3&&Y.jsxs("div",{className:"relative mb-4",children:[Y.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#94a3b8",strokeWidth:"2",className:"absolute left-3 top-1/2 -translate-y-1/2",children:[Y.jsx("circle",{cx:"11",cy:"11",r:"8"}),Y.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Y.jsx("input",{type:"text",placeholder:"Search projects",value:s,onChange:A=>l(A.target.value),className:"w-full py-2.5 pl-9 pr-3.5 text-sm border border-slate-200 rounded-lg outline-none text-slate-800 bg-white box-border",style:{fontFamily:"'DM Sans', sans-serif"}})]}),h?Y.jsxs("div",{className:"flex items-center gap-2 text-slate-500 py-12",style:{fontFamily:"'DM Sans', sans-serif"},children:[Y.jsx(su,{className:"w-5 h-5 animate-spin"}),"Loading projects"]}):Y.jsx("div",{className:"flex flex-col gap-2",children:p.map(A=>Y.jsx(EL,{project:A,onOpen:C=>r(`/project/${C}`)},A.id))}),!h&&p.length===0&&s&&Y.jsxs("div",{className:"text-center py-12 text-slate-500 text-sm",style:{fontFamily:"'DM Sans', sans-serif"},children:['No projects match "',s,'"']}),!h&&f.length===0&&Y.jsxs("div",{className:"text-center py-16 text-slate-500",style:{fontFamily:"'DM Sans', sans-serif"},children:[Y.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#cbd5e1",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"mx-auto mb-4",children:Y.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),Y.jsx("div",{className:"text-base font-medium text-slate-600 mb-1.5",children:"No projects yet"}),Y.jsx("div",{className:"text-sm text-slate-500",children:"Create a project to start organising your deal documents."})]})]}),n&&Y.jsx(CL,{onClose:()=>i(!1),onCreate:b,isPending:w.isPending,defaultColorIndex:f.length%zu.length})]})}var Qm={exports:{}},NL=Qm.exports,u_;function kL(){return u_||(u_=1,(function(r,t){((e,n)=>{r.exports=n()})(NL,function(){var e=function(E,M){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(V,J){V.__proto__=J}:function(V,J){for(var ut in J)Object.prototype.hasOwnProperty.call(J,ut)&&(V[ut]=J[ut])}))(E,M)},n=function(){return(n=Object.assign||function(E){for(var M,V=1,J=arguments.length;V<J;V++)for(var ut in M=arguments[V])Object.prototype.hasOwnProperty.call(M,ut)&&(E[ut]=M[ut]);return E}).apply(this,arguments)};function i(E,M,V){for(var J,ut=0,bt=M.length;ut<bt;ut++)!J&&ut in M||((J=J||Array.prototype.slice.call(M,0,ut))[ut]=M[ut]);return E.concat(J||Array.prototype.slice.call(M))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:zd,l=Object.keys,o=Array.isArray;function c(E,M){return typeof M=="object"&&l(M).forEach(function(V){E[V]=M[V]}),E}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var h=Object.getPrototypeOf,f={}.hasOwnProperty;function p(E,M){return f.call(E,M)}function y(E,M){typeof M=="function"&&(M=M(h(E))),(typeof Reflect>"u"?l:Reflect.ownKeys)(M).forEach(function(V){w(E,V,M[V])})}var m=Object.defineProperty;function w(E,M,V,J){m(E,M,c(V&&p(V,"get")&&typeof V.get=="function"?{get:V.get,set:V.set,configurable:!0}:{value:V,configurable:!0,writable:!0},J))}function b(E){return{from:function(M){return E.prototype=Object.create(M.prototype),w(E.prototype,"constructor",E),{extend:y.bind(null,E.prototype)}}}}var _=Object.getOwnPropertyDescriptor,v=[].slice;function A(E,M,V){return v.call(E,M,V)}function C(E,M){return M(E)}function S(E){if(!E)throw new Error("Assertion Failed")}function O(E){s.setImmediate?setImmediate(E):setTimeout(E,0)}function q(E,M){if(typeof M=="string"&&p(E,M))return E[M];if(!M)return E;if(typeof M!="string"){for(var V=[],J=0,ut=M.length;J<ut;++J){var bt=q(E,M[J]);V.push(bt)}return V}var Tt,Rt=M.indexOf(".");return Rt===-1||(Tt=E[M.substr(0,Rt)])==null?void 0:q(Tt,M.substr(Rt+1))}function H(E,M,V){if(E&&M!==void 0&&!("isFrozen"in Object&&Object.isFrozen(E)))if(typeof M!="string"&&"length"in M){S(typeof V!="string"&&"length"in V);for(var J=0,ut=M.length;J<ut;++J)H(E,M[J],V[J])}else{var bt,Tt,Rt=M.indexOf(".");Rt!==-1?(bt=M.substr(0,Rt),(Rt=M.substr(Rt+1))===""?V===void 0?o(E)&&!isNaN(parseInt(bt))?E.splice(bt,1):delete E[bt]:E[bt]=V:H(Tt=(Tt=E[bt])&&p(E,bt)?Tt:E[bt]={},Rt,V)):V===void 0?o(E)&&!isNaN(parseInt(M))?E.splice(M,1):delete E[M]:E[M]=V}}function Q(E){var M,V={};for(M in E)p(E,M)&&(V[M]=E[M]);return V}var I=[].concat;function dt(E){return I.apply([],E)}var R="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(dt([8,16,32,64].map(function(E){return["Int","Uint","Float"].map(function(M){return M+E+"Array"})}))).filter(function(E){return s[E]}),nt=new Set(R.map(function(E){return s[E]})),B=null;function Z(E){return B=new WeakMap,E=(function M(V){if(!V||typeof V!="object")return V;var J=B.get(V);if(J)return J;if(o(V)){J=[],B.set(V,J);for(var ut=0,bt=V.length;ut<bt;++ut)J.push(M(V[ut]))}else if(nt.has(V.constructor))J=V;else{var Tt,Rt=h(V);for(Tt in J=Rt===Object.prototype?{}:Object.create(Rt),B.set(V,J),V)p(V,Tt)&&(J[Tt]=M(V[Tt]))}return J})(E),B=null,E}var D={}.toString;function mt(E){return D.call(E).slice(8,-1)}var it=typeof Symbol<"u"?Symbol.iterator:"@@iterator",st=typeof it=="symbol"?function(E){var M;return E!=null&&(M=E[it])&&M.apply(E)}:function(){return null};function vt(E,M){M=E.indexOf(M),0<=M&&E.splice(M,1)}var wt={};function Ft(E){var M,V,J,ut;if(arguments.length===1){if(o(E))return E.slice();if(this===wt&&typeof E=="string")return[E];if(ut=st(E))for(V=[];!(J=ut.next()).done;)V.push(J.value);else{if(E==null)return[E];if(typeof(M=E.length)!="number")return[E];for(V=new Array(M);M--;)V[M]=E[M]}}else for(M=arguments.length,V=new Array(M);M--;)V[M]=arguments[M];return V}var $=typeof Symbol<"u"?function(E){return E[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},R=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],fe=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(R),K={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function rt(E,M){this.name=E,this.message=M}function pt(E,M){return E+". Errors: "+Object.keys(M).map(function(V){return M[V].toString()}).filter(function(V,J,ut){return ut.indexOf(V)===J}).join(`
`)}function ct(E,M,V,J){this.failures=M,this.failedKeys=J,this.successCount=V,this.message=pt(E,M)}function F(E,M){this.name="BulkError",this.failures=Object.keys(M).map(function(V){return M[V]}),this.failuresByPos=M,this.message=pt(E,this.failures)}b(rt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),b(ct).from(rt),b(F).from(rt);var j=fe.reduce(function(E,M){return E[M]=M+"Error",E},{}),ht=rt,ot=fe.reduce(function(E,M){var V=M+"Error";function J(ut,bt){this.name=V,ut?typeof ut=="string"?(this.message="".concat(ut).concat(bt?`
 `+bt:""),this.inner=bt||null):typeof ut=="object"&&(this.message="".concat(ut.name," ").concat(ut.message),this.inner=ut):(this.message=K[M]||V,this.inner=null)}return b(J).from(ht),E[M]=J,E},{}),lt=(ot.Syntax=SyntaxError,ot.Type=TypeError,ot.Range=RangeError,R.reduce(function(E,M){return E[M+"Error"]=ot[M],E},{}));R=fe.reduce(function(E,M){return["Syntax","Type","Range"].indexOf(M)===-1&&(E[M+"Error"]=ot[M]),E},{});function ft(){}function Mt(E){return E}function W(E,M){return E==null||E===Mt?M:function(V){return M(E(V))}}function tt(E,M){return function(){E.apply(this,arguments),M.apply(this,arguments)}}function X(E,M){return E===ft?M:function(){var V=E.apply(this,arguments),J=(V!==void 0&&(arguments[0]=V),this.onsuccess),ut=this.onerror,bt=(this.onsuccess=null,this.onerror=null,M.apply(this,arguments));return J&&(this.onsuccess=this.onsuccess?tt(J,this.onsuccess):J),ut&&(this.onerror=this.onerror?tt(ut,this.onerror):ut),bt!==void 0?bt:V}}function P(E,M){return E===ft?M:function(){E.apply(this,arguments);var V=this.onsuccess,J=this.onerror;this.onsuccess=this.onerror=null,M.apply(this,arguments),V&&(this.onsuccess=this.onsuccess?tt(V,this.onsuccess):V),J&&(this.onerror=this.onerror?tt(J,this.onerror):J)}}function k(E,M){return E===ft?M:function(ut){var J=E.apply(this,arguments),ut=(c(ut,J),this.onsuccess),bt=this.onerror,Tt=(this.onsuccess=null,this.onerror=null,M.apply(this,arguments));return ut&&(this.onsuccess=this.onsuccess?tt(ut,this.onsuccess):ut),bt&&(this.onerror=this.onerror?tt(bt,this.onerror):bt),J===void 0?Tt===void 0?void 0:Tt:c(J,Tt)}}function z(E,M){return E===ft?M:function(){return M.apply(this,arguments)!==!1&&E.apply(this,arguments)}}function _t(E,M){return E===ft?M:function(){var V=E.apply(this,arguments);if(V&&typeof V.then=="function"){for(var J=this,ut=arguments.length,bt=new Array(ut);ut--;)bt[ut]=arguments[ut];return V.then(function(){return M.apply(J,bt)})}return M.apply(this,arguments)}}R.ModifyError=ct,R.DexieError=rt,R.BulkError=F;var kt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ct(E){kt=E}var $t={},le=100,re=typeof Promise>"u"?[]:(fe=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[re=crypto.subtle.digest("SHA-512",new Uint8Array([0])),h(re),fe]:[fe,h(fe),fe]),fe=re[0],us=re[1],us=us&&us.then,Ce=fe&&fe.constructor,De=!!re[2],Fe=function(E,M){Je.push([E,M]),Ue&&(queueMicrotask(La),Ue=!1)},ln=!0,Ue=!0,Xn=[],Xe=[],rn=Mt,sn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ft,pgp:!1,env:{},finalize:ft},Ee=sn,Je=[],Gn=0,un=[];function ve(E){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var M=this._PSD=Ee;if(typeof E!="function"){if(E!==$t)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Ke(this,this._value)}else this._state=null,this._value=null,++M.ref,(function V(J,ut){try{ut(function(bt){if(J._state===null){if(bt===J)throw new TypeError("A promise cannot be resolved with itself.");var Tt=J._lib&&Fi();bt&&typeof bt.then=="function"?V(J,function(Rt,Vt){bt instanceof ve?bt._then(Rt,Vt):bt.then(Rt,Vt)}):(J._state=!0,J._value=bt,Vn(J)),Tt&&nn()}},Ke.bind(null,J))}catch(bt){Ke(J,bt)}})(this,E)}var Jn={get:function(){var E=Ee,M=da;function V(J,ut){var bt=this,Tt=!E.global&&(E!==Ee||M!==da),Rt=Tt&&!Hr(),Vt=new ve(function(Yt,Ht){Ms(bt,new gn(no(J,E,Tt,Rt),no(ut,E,Tt,Rt),Yt,Ht,E))});return this._consoleTask&&(Vt._consoleTask=this._consoleTask),Vt}return V.prototype=$t,V},set:function(E){w(this,"then",E&&E.prototype===$t?Jn:{get:function(){return E},set:Jn.set})}};function gn(E,M,V,J,ut){this.onFulfilled=typeof E=="function"?E:null,this.onRejected=typeof M=="function"?M:null,this.resolve=V,this.reject=J,this.psd=ut}function Ke(E,M){var V,J;Xe.push(M),E._state===null&&(V=E._lib&&Fi(),M=rn(M),E._state=!1,E._value=M,J=E,Xn.some(function(ut){return ut._value===J._value})||Xn.push(J),Vn(E),V)&&nn()}function Vn(E){var M=E._listeners;E._listeners=[];for(var V=0,J=M.length;V<J;++V)Ms(E,M[V]);var ut=E._PSD;--ut.ref||ut.finalize(),Gn===0&&(++Gn,Fe(function(){--Gn==0&&fa()},[]))}function Ms(E,M){if(E._state===null)E._listeners.push(M);else{var V=E._state?M.onFulfilled:M.onRejected;if(V===null)return(E._state?M.resolve:M.reject)(E._value);++M.psd.ref,++Gn,Fe($i,[V,E,M])}}function $i(E,M,V){try{var J,ut=M._value;!M._state&&Xe.length&&(Xe=[]),J=kt&&M._consoleTask?M._consoleTask.run(function(){return E(ut)}):E(ut),M._state||Xe.indexOf(ut)!==-1||(bt=>{for(var Tt=Xn.length;Tt;)if(Xn[--Tt]._value===bt._value)return Xn.splice(Tt,1)})(M),V.resolve(J)}catch(bt){V.reject(bt)}finally{--Gn==0&&fa(),--V.psd.ref||V.psd.finalize()}}function La(){Bi(sn,function(){Fi()&&nn()})}function Fi(){var E=ln;return Ue=ln=!1,E}function nn(){var E,M,V;do for(;0<Je.length;)for(E=Je,Je=[],V=E.length,M=0;M<V;++M){var J=E[M];J[0].apply(null,J[1])}while(0<Je.length);Ue=ln=!0}function fa(){for(var E=Xn,M=(Xn=[],E.forEach(function(J){J._PSD.onunhandled.call(null,J._value,J)}),un.slice(0)),V=M.length;V;)M[--V]()}function Fs(E){return new ve($t,!1,E)}function Bn(E,M){var V=Ee;return function(){var J=Fi(),ut=Ee;try{return xs(V,!0),E.apply(this,arguments)}catch(bt){M&&M(bt)}finally{xs(ut,!1),J&&nn()}}}y(ve.prototype,{then:Jn,_then:function(E,M){Ms(this,new gn(null,null,E,M,Ee))},catch:function(E){var M,V;return arguments.length===1?this.then(null,E):(M=E,V=arguments[1],typeof M=="function"?this.then(null,function(J){return(J instanceof M?V:Fs)(J)}):this.then(null,function(J){return(J&&J.name===M?V:Fs)(J)}))},finally:function(E){return this.then(function(M){return ve.resolve(E()).then(function(){return M})},function(M){return ve.resolve(E()).then(function(){return Fs(M)})})},timeout:function(E,M){var V=this;return E<1/0?new ve(function(J,ut){var bt=setTimeout(function(){return ut(new ot.Timeout(M))},E);V.then(J,ut).finally(clearTimeout.bind(null,bt))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&w(ve.prototype,Symbol.toStringTag,"Dexie.Promise"),sn.env=Ys(),y(ve,{all:function(){var E=Ft.apply(null,arguments).map(Xi);return new ve(function(M,V){E.length===0&&M([]);var J=E.length;E.forEach(function(ut,bt){return ve.resolve(ut).then(function(Tt){E[bt]=Tt,--J||M(E)},V)})})},resolve:function(E){return E instanceof ve?E:E&&typeof E.then=="function"?new ve(function(M,V){E.then(M,V)}):new ve($t,!0,E)},reject:Fs,race:function(){var E=Ft.apply(null,arguments).map(Xi);return new ve(function(M,V){E.map(function(J){return ve.resolve(J).then(M,V)})})},PSD:{get:function(){return Ee},set:function(E){return Ee=E}},totalEchoes:{get:function(){return da}},newPSD:Wn,usePSD:Bi,scheduler:{get:function(){return Fe},set:function(E){Fe=E}},rejectionMapper:{get:function(){return rn},set:function(E){rn=E}},follow:function(E,M){return new ve(function(V,J){return Wn(function(ut,bt){var Tt=Ee;Tt.unhandleds=[],Tt.onunhandled=bt,Tt.finalize=tt(function(){var Rt,Vt=this;Rt=function(){Vt.unhandleds.length===0?ut():bt(Vt.unhandleds[0])},un.push(function Yt(){Rt(),un.splice(un.indexOf(Yt),1)}),++Gn,Fe(function(){--Gn==0&&fa()},[])},Tt.finalize),E()},M,V,J)})}}),Ce&&(Ce.allSettled&&w(ve,"allSettled",function(){var E=Ft.apply(null,arguments).map(Xi);return new ve(function(M){E.length===0&&M([]);var V=E.length,J=new Array(V);E.forEach(function(ut,bt){return ve.resolve(ut).then(function(Tt){return J[bt]={status:"fulfilled",value:Tt}},function(Tt){return J[bt]={status:"rejected",reason:Tt}}).then(function(){return--V||M(J)})})})}),Ce.any&&typeof AggregateError<"u"&&w(ve,"any",function(){var E=Ft.apply(null,arguments).map(Xi);return new ve(function(M,V){E.length===0&&V(new AggregateError([]));var J=E.length,ut=new Array(J);E.forEach(function(bt,Tt){return ve.resolve(bt).then(function(Rt){return M(Rt)},function(Rt){ut[Tt]=Rt,--J||V(new AggregateError(ut))})})})}),Ce.withResolvers)&&(ve.withResolvers=Ce.withResolvers);var sr={awaits:0,echoes:0,id:0},Or=0,qr=[],Jr=0,da=0,as=0;function Wn(E,Tt,V,J){var ut=Ee,bt=Object.create(ut),Tt=(bt.parent=ut,bt.ref=0,bt.global=!1,bt.id=++as,sn.env,bt.env=De?{Promise:ve,PromiseProp:{value:ve,configurable:!0,writable:!0},all:ve.all,race:ve.race,allSettled:ve.allSettled,any:ve.any,resolve:ve.resolve,reject:ve.reject}:{},Tt&&c(bt,Tt),++ut.ref,bt.finalize=function(){--this.parent.ref||this.parent.finalize()},Bi(bt,E,V,J));return bt.ref===0&&bt.finalize(),Tt}function dr(){return sr.id||(sr.id=++Or),++sr.awaits,sr.echoes+=le,sr.id}function Hr(){return!!sr.awaits&&(--sr.awaits==0&&(sr.id=0),sr.echoes=sr.awaits*le,!0)}function Xi(E){return sr.echoes&&E&&E.constructor===Ce?(dr(),E.then(function(M){return Hr(),M},function(M){return Hr(),nr(M)})):E}function Xs(){var E=qr[qr.length-1];qr.pop(),xs(E,!1)}function xs(E,M){var V,J,ut=Ee;(M?!sr.echoes||Jr++&&E===Ee:!Jr||--Jr&&E===Ee)||queueMicrotask(M?(function(bt){++da,sr.echoes&&--sr.echoes!=0||(sr.echoes=sr.awaits=sr.id=0),qr.push(Ee),xs(bt,!0)}).bind(null,E):Xs),E!==Ee&&(Ee=E,ut===sn&&(sn.env=Ys()),De)&&(V=sn.env.Promise,J=E.env,ut.global||E.global)&&(Object.defineProperty(s,"Promise",J.PromiseProp),V.all=J.all,V.race=J.race,V.resolve=J.resolve,V.reject=J.reject,J.allSettled&&(V.allSettled=J.allSettled),J.any)&&(V.any=J.any)}function Ys(){var E=s.Promise;return De?{Promise:E,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:E.all,race:E.race,allSettled:E.allSettled,any:E.any,resolve:E.resolve,reject:E.reject}:{}}function Bi(E,M,V,J,ut){var bt=Ee;try{return xs(E,!0),M(V,J,ut)}finally{xs(bt,!1)}}function no(E,M,V,J){return typeof E!="function"?E:function(){var ut=Ee;V&&dr(),xs(M,!0);try{return E.apply(this,arguments)}finally{xs(ut,!1),J&&queueMicrotask(Hr)}}}function Bs(E){Promise===Ce&&sr.echoes===0?Jr===0?E():enqueueNativeMicroTask(E):setTimeout(E,0)}(""+us).indexOf("[native code]")===-1&&(dr=Hr=ft);var nr=ve.reject,Is="",Ai="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Xr="String expected.",Oa=[],Yi="__dbnames",js="readonly",pa="readwrite";function ma(E,M){return E?M?function(){return E.apply(this,arguments)&&M.apply(this,arguments)}:E:M}var _l={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Co(E){return typeof E!="string"||/\./.test(E)?function(M){return M}:function(M){return M[E]===void 0&&E in M&&delete(M=Z(M))[E],M}}function fu(){throw ot.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function vn(E,M){try{var V=Da(E),J=Da(M);if(V!==J)return V==="Array"?1:J==="Array"?-1:V==="binary"?1:J==="binary"?-1:V==="string"?1:J==="string"?-1:V==="Date"?1:J!=="Date"?NaN:-1;switch(V){case"number":case"Date":case"string":return M<E?1:E<M?-1:0;case"binary":for(var ut=Qs(E),bt=Qs(M),Tt=ut.length,Rt=bt.length,Vt=Tt<Rt?Tt:Rt,Yt=0;Yt<Vt;++Yt)if(ut[Yt]!==bt[Yt])return ut[Yt]<bt[Yt]?-1:1;return Tt===Rt?0:Tt<Rt?-1:1;case"Array":for(var Ht=E,Bt=M,It=Ht.length,zt=Bt.length,Ut=It<zt?It:zt,Gt=0;Gt<Ut;++Gt){var te=vn(Ht[Gt],Bt[Gt]);if(te!==0)return te}return It===zt?0:It<zt?-1:1}}catch{}return NaN}function Da(E){var M=typeof E;return M=="object"&&(ArrayBuffer.isView(E)||(M=mt(E))==="ArrayBuffer")?"binary":M}function Qs(E){return E instanceof Uint8Array?E:ArrayBuffer.isView(E)?new Uint8Array(E.buffer,E.byteOffset,E.byteLength):new Uint8Array(E)}function Kn(E,M,V){var J=E.schema.yProps;return J?(M&&0<V.numFailures&&(M=M.filter(function(ut,bt){return!V.failures[bt]})),Promise.all(J.map(function(ut){return ut=ut.updatesTable,M?E.db.table(ut).where("k").anyOf(M).delete():E.db.table(ut).clear()})).then(function(){return V})):V}ga.prototype.execute=function(E){var M=this["@@propmod"];if(M.add!==void 0){var V=M.add;if(o(V))return i(i([],o(E)?E:[],!0),V).sort();if(typeof V=="number")return(Number(E)||0)+V;if(typeof V=="bigint")try{return BigInt(E)+V}catch{return BigInt(0)+V}throw new TypeError("Invalid term ".concat(V))}if(M.remove!==void 0){var J=M.remove;if(o(J))return o(E)?E.filter(function(ut){return!J.includes(ut)}).sort():[];if(typeof J=="number")return Number(E)-J;if(typeof J=="bigint")try{return BigInt(E)-J}catch{return BigInt(0)-J}throw new TypeError("Invalid subtrahend ".concat(J))}return V=(V=M.replacePrefix)==null?void 0:V[0],V&&typeof E=="string"&&E.startsWith(V)?M.replacePrefix[1]+E.substring(V.length):E};var ro=ga;function ga(E){this["@@propmod"]=E}function io(E,M){for(var V=l(M),J=V.length,ut=!1,bt=0;bt<J;++bt){var Tt=V[bt],Rt=M[Tt],Vt=q(E,Tt);Rt instanceof ro?(H(E,Tt,Rt.execute(Vt)),ut=!0):Vt!==Rt&&(H(E,Tt,Rt),ut=!0)}return ut}kn.prototype._trans=function(E,M,V){var J=this._tx||Ee.trans,ut=this.name,bt=kt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(E==="readonly"?"read":"write"," ").concat(this.name));function Tt(Yt,Ht,Bt){if(Bt.schema[ut])return M(Bt.idbtrans,Bt);throw new ot.NotFound("Table "+ut+" not part of transaction")}var Rt=Fi();try{var Vt=J&&J.db._novip===this.db._novip?J===Ee.trans?J._promise(E,Tt,V):Wn(function(){return J._promise(E,Tt,V)},{trans:J,transless:Ee.transless||Ee}):(function Yt(Ht,Bt,It,zt){if(Ht.idbdb&&(Ht._state.openComplete||Ee.letThrough||Ht._vip)){var Ut=Ht._createTransaction(Bt,It,Ht._dbSchema);try{Ut.create(),Ht._state.PR1398_maxLoop=3}catch(Gt){return Gt.name===j.InvalidState&&Ht.isOpen()&&0<--Ht._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Ht.close({disableAutoOpen:!1}),Ht.open().then(function(){return Yt(Ht,Bt,It,zt)})):nr(Gt)}return Ut._promise(Bt,function(Gt,te){return Wn(function(){return Ee.trans=Ut,zt(Gt,te,Ut)})}).then(function(Gt){if(Bt==="readwrite")try{Ut.idbtrans.commit()}catch{}return Bt==="readonly"?Gt:Ut._completion.then(function(){return Gt})})}if(Ht._state.openComplete)return nr(new ot.DatabaseClosed(Ht._state.dbOpenError));if(!Ht._state.isBeingOpened){if(!Ht._state.autoOpen)return nr(new ot.DatabaseClosed);Ht.open().catch(ft)}return Ht._state.dbReadyPromise.then(function(){return Yt(Ht,Bt,It,zt)})})(this.db,E,[this.name],Tt);return bt&&(Vt._consoleTask=bt,Vt=Vt.catch(function(Yt){return console.trace(Yt),nr(Yt)})),Vt}finally{Rt&&nn()}},kn.prototype.get=function(E,M){var V=this;return E&&E.constructor===Object?this.where(E).first(M):E==null?nr(new ot.Type("Invalid argument to Table.get()")):this._trans("readonly",function(J){return V.core.get({trans:J,key:E}).then(function(ut){return V.hook.reading.fire(ut)})}).then(M)},kn.prototype.where=function(E){if(typeof E=="string")return new this.db.WhereClause(this,E);if(o(E))return new this.db.WhereClause(this,"[".concat(E.join("+"),"]"));var M=l(E);if(M.length===1)return this.where(M[0]).equals(E[M[0]]);var V=this.schema.indexes.concat(this.schema.primKey).filter(function(Rt){if(Rt.compound&&M.every(function(Yt){return 0<=Rt.keyPath.indexOf(Yt)})){for(var Vt=0;Vt<M.length;++Vt)if(M.indexOf(Rt.keyPath[Vt])===-1)return!1;return!0}return!1}).sort(function(Rt,Vt){return Rt.keyPath.length-Vt.keyPath.length})[0];if(V&&this.db._maxKey!==Is)return Tt=V.keyPath.slice(0,M.length),this.where(Tt).equals(Tt.map(function(Rt){return E[Rt]}));!V&&kt&&console.warn("The query ".concat(JSON.stringify(E)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(M.join("+"),"]"));var J=this.schema.idxByName;function ut(Rt,Vt){return vn(Rt,Vt)===0}var Tt=M.reduce(function(Ht,Vt){var Yt=Ht[0],Ht=Ht[1],Bt=J[Vt],It=E[Vt];return[Yt||Bt,Yt||!Bt?ma(Ht,Bt&&Bt.multi?function(zt){return zt=q(zt,Vt),o(zt)&&zt.some(function(Ut){return ut(It,Ut)})}:function(zt){return ut(It,q(zt,Vt))}):Ht]},[null,null]),bt=Tt[0],Tt=Tt[1];return bt?this.where(bt.name).equals(E[bt.keyPath]).filter(Tt):V?this.filter(Tt):this.where(M).equals("")},kn.prototype.filter=function(E){return this.toCollection().and(E)},kn.prototype.count=function(E){return this.toCollection().count(E)},kn.prototype.offset=function(E){return this.toCollection().offset(E)},kn.prototype.limit=function(E){return this.toCollection().limit(E)},kn.prototype.each=function(E){return this.toCollection().each(E)},kn.prototype.toArray=function(E){return this.toCollection().toArray(E)},kn.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},kn.prototype.orderBy=function(E){return new this.db.Collection(new this.db.WhereClause(this,o(E)?"[".concat(E.join("+"),"]"):E))},kn.prototype.reverse=function(){return this.toCollection().reverse()},kn.prototype.mapToClass=function(E){for(var M=this.db,V=this.name,J=((this.schema.mappedClass=E).prototype instanceof fu&&(E=(Tt=>{var Rt=Ht,Vt=Tt;if(typeof Vt!="function"&&Vt!==null)throw new TypeError("Class extends value "+String(Vt)+" is not a constructor or null");function Yt(){this.constructor=Rt}function Ht(){return Tt!==null&&Tt.apply(this,arguments)||this}return e(Rt,Vt),Rt.prototype=Vt===null?Object.create(Vt):(Yt.prototype=Vt.prototype,new Yt),Object.defineProperty(Ht.prototype,"db",{get:function(){return M},enumerable:!1,configurable:!0}),Ht.prototype.table=function(){return V},Ht})(E)),new Set),ut=E.prototype;ut;ut=h(ut))Object.getOwnPropertyNames(ut).forEach(function(Tt){return J.add(Tt)});function bt(Tt){if(!Tt)return Tt;var Rt,Vt=Object.create(E.prototype);for(Rt in Tt)if(!J.has(Rt))try{Vt[Rt]=Tt[Rt]}catch{}return Vt}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=bt,this.hook("reading",bt),E},kn.prototype.defineClass=function(){return this.mapToClass(function(E){c(this,E)})},kn.prototype.add=function(E,M){var V=this,J=this.schema.primKey,ut=J.auto,bt=J.keyPath,Tt=E;return bt&&ut&&(Tt=Co(bt)(E)),this._trans("readwrite",function(Rt){return V.core.mutate({trans:Rt,type:"add",keys:M!=null?[M]:null,values:[Tt]})}).then(function(Rt){return Rt.numFailures?ve.reject(Rt.failures[0]):Rt.lastResult}).then(function(Rt){if(bt)try{H(E,bt,Rt)}catch{}return Rt})},kn.prototype.upsert=function(E,M){var V=this,J=this.schema.primKey.keyPath;return this._trans("readwrite",function(ut){return V.core.get({trans:ut,key:E}).then(function(bt){var Tt=bt??{};return io(Tt,M),J&&H(Tt,J,E),V.core.mutate({trans:ut,type:"put",values:[Tt],keys:[E],upsert:!0,updates:{keys:[E],changeSpecs:[M]}}).then(function(Rt){return Rt.numFailures?ve.reject(Rt.failures[0]):!!bt})})})},kn.prototype.update=function(E,M){return typeof E!="object"||o(E)?this.where(":id").equals(E).modify(M):(E=q(E,this.schema.primKey.keyPath))===void 0?nr(new ot.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(E).modify(M)},kn.prototype.put=function(E,M){var V=this,J=this.schema.primKey,ut=J.auto,bt=J.keyPath,Tt=E;return bt&&ut&&(Tt=Co(bt)(E)),this._trans("readwrite",function(Rt){return V.core.mutate({trans:Rt,type:"put",values:[Tt],keys:M!=null?[M]:null})}).then(function(Rt){return Rt.numFailures?ve.reject(Rt.failures[0]):Rt.lastResult}).then(function(Rt){if(bt)try{H(E,bt,Rt)}catch{}return Rt})},kn.prototype.delete=function(E){var M=this;return this._trans("readwrite",function(V){return M.core.mutate({trans:V,type:"delete",keys:[E]}).then(function(J){return Kn(M,[E],J)}).then(function(J){return J.numFailures?ve.reject(J.failures[0]):void 0})})},kn.prototype.clear=function(){var E=this;return this._trans("readwrite",function(M){return E.core.mutate({trans:M,type:"deleteRange",range:_l}).then(function(V){return Kn(E,null,V)})}).then(function(M){return M.numFailures?ve.reject(M.failures[0]):void 0})},kn.prototype.bulkGet=function(E){var M=this;return this._trans("readonly",function(V){return M.core.getMany({keys:E,trans:V}).then(function(J){return J.map(function(ut){return M.hook.reading.fire(ut)})})})},kn.prototype.bulkAdd=function(E,M,V){var J=this,ut=Array.isArray(M)?M:void 0,bt=(V=V||(ut?void 0:M))?V.allKeys:void 0;return this._trans("readwrite",function(Tt){var Rt=J.schema.primKey,Yt=Rt.auto,Rt=Rt.keyPath;if(Rt&&ut)throw new ot.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(ut&&ut.length!==E.length)throw new ot.InvalidArgument("Arguments objects and keys must have the same length");var Vt=E.length,Yt=Rt&&Yt?E.map(Co(Rt)):E;return J.core.mutate({trans:Tt,type:"add",keys:ut,values:Yt,wantResults:bt}).then(function(Ht){var Bt=Ht.numFailures,It=Ht.failures;if(Bt===0)return bt?Ht.results:Ht.lastResult;throw new F("".concat(J.name,".bulkAdd(): ").concat(Bt," of ").concat(Vt," operations failed"),It)})})},kn.prototype.bulkPut=function(E,M,V){var J=this,ut=Array.isArray(M)?M:void 0,bt=(V=V||(ut?void 0:M))?V.allKeys:void 0;return this._trans("readwrite",function(Tt){var Rt=J.schema.primKey,Yt=Rt.auto,Rt=Rt.keyPath;if(Rt&&ut)throw new ot.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(ut&&ut.length!==E.length)throw new ot.InvalidArgument("Arguments objects and keys must have the same length");var Vt=E.length,Yt=Rt&&Yt?E.map(Co(Rt)):E;return J.core.mutate({trans:Tt,type:"put",keys:ut,values:Yt,wantResults:bt}).then(function(Ht){var Bt=Ht.numFailures,It=Ht.failures;if(Bt===0)return bt?Ht.results:Ht.lastResult;throw new F("".concat(J.name,".bulkPut(): ").concat(Bt," of ").concat(Vt," operations failed"),It)})})},kn.prototype.bulkUpdate=function(E){var M=this,V=this.core,J=E.map(function(Tt){return Tt.key}),ut=E.map(function(Tt){return Tt.changes}),bt=[];return this._trans("readwrite",function(Tt){return V.getMany({trans:Tt,keys:J,cache:"clone"}).then(function(Rt){var Vt=[],Yt=[],Ht=(E.forEach(function(Bt,It){var zt=Bt.key,Ut=Bt.changes,Gt=Rt[It];if(Gt){for(var te=0,ie=Object.keys(Ut);te<ie.length;te++){var Zt=ie[te],me=Ut[Zt];if(Zt===M.schema.primKey.keyPath){if(vn(me,zt)!==0)throw new ot.Constraint("Cannot update primary key in bulkUpdate()")}else H(Gt,Zt,me)}bt.push(It),Vt.push(zt),Yt.push(Gt)}}),Vt.length);return V.mutate({trans:Tt,type:"put",keys:Vt,values:Yt,updates:{keys:J,changeSpecs:ut}}).then(function(Bt){var It=Bt.numFailures,zt=Bt.failures;if(It===0)return Ht;for(var Ut=0,Gt=Object.keys(zt);Ut<Gt.length;Ut++){var te,ie=Gt[Ut],Zt=bt[Number(ie)];Zt!=null&&(te=zt[ie],delete zt[ie],zt[Zt]=te)}throw new F("".concat(M.name,".bulkUpdate(): ").concat(It," of ").concat(Ht," operations failed"),zt)})})})},kn.prototype.bulkDelete=function(E){var M=this,V=E.length;return this._trans("readwrite",function(J){return M.core.mutate({trans:J,type:"delete",keys:E}).then(function(ut){return Kn(M,E,ut)})}).then(function(J){var ut=J.numFailures,bt=J.failures;if(ut===0)return J.lastResult;throw new F("".concat(M.name,".bulkDelete(): ").concat(ut," of ").concat(V," operations failed"),bt)})};var Al=kn;function kn(){}function Gr(E){function M(Tt,Rt){if(Rt){for(var Vt=arguments.length,Yt=new Array(Vt-1);--Vt;)Yt[Vt-1]=arguments[Vt];return V[Tt].subscribe.apply(null,Yt),E}if(typeof Tt=="string")return V[Tt]}var V={};M.addEventType=bt;for(var J=1,ut=arguments.length;J<ut;++J)bt(arguments[J]);return M;function bt(Tt,Rt,Vt){var Yt,Ht;if(typeof Tt!="object")return Rt=Rt||z,Ht={subscribers:[],fire:Vt=Vt||ft,subscribe:function(Bt){Ht.subscribers.indexOf(Bt)===-1&&(Ht.subscribers.push(Bt),Ht.fire=Rt(Ht.fire,Bt))},unsubscribe:function(Bt){Ht.subscribers=Ht.subscribers.filter(function(It){return It!==Bt}),Ht.fire=Ht.subscribers.reduce(Rt,Vt)}},V[Tt]=M[Tt]=Ht;l(Yt=Tt).forEach(function(Bt){var It=Yt[Bt];if(o(It))bt(Bt,Yt[Bt][0],Yt[Bt][1]);else{if(It!=="asap")throw new ot.InvalidArgument("Invalid event config");var zt=bt(Bt,Mt,function(){for(var Ut=arguments.length,Gt=new Array(Ut);Ut--;)Gt[Ut]=arguments[Ut];zt.subscribers.forEach(function(te){O(function(){te.apply(null,Gt)})})})}})}}function Dr(E,M){return b(M).from({prototype:E}),M}function ya(E,M){return!(E.filter||E.algorithm||E.or)&&(M?E.justLimit:!E.replayFilter)}function Sl(E,M){E.filter=ma(E.filter,M)}function Ko(E,M,V){var J=E.replayFilter;E.replayFilter=J?function(){return ma(J(),M())}:M,E.justLimit=V&&!J}function Si(E,M){if(E.isPrimKey)return M.primaryKey;var V=M.getIndexByKeyPath(E.index);if(V)return V;throw new ot.Schema("KeyPath "+E.index+" on object store "+M.name+" is not indexed")}function El(E,M,V){var J=Si(E,M.schema);return M.openCursor({trans:V,values:!E.keysOnly,reverse:E.dir==="prev",unique:!!E.unique,query:{index:J,range:E.range}})}function To(E,M,V,J){var ut,bt,Tt=E.replayFilter?ma(E.filter,E.replayFilter()):E.filter;return E.or?(ut={},bt=function(Rt,Vt,Yt){var Ht,Bt;Tt&&!Tt(Vt,Yt,function(It){return Vt.stop(It)},function(It){return Vt.fail(It)})||((Bt=""+(Ht=Vt.primaryKey))=="[object ArrayBuffer]"&&(Bt=""+new Uint8Array(Ht)),p(ut,Bt))||(ut[Bt]=!0,M(Rt,Vt,Yt))},Promise.all([E.or._iterate(bt,V),Zs(El(E,J,V),E.algorithm,bt,!E.keysOnly&&E.valueMapper)])):Zs(El(E,J,V),ma(E.algorithm,Tt),M,!E.keysOnly&&E.valueMapper)}function Zs(E,M,V,J){var ut=Bn(J?function(bt,Tt,Rt){return V(J(bt),Tt,Rt)}:V);return E.then(function(bt){if(bt)return bt.start(function(){var Tt=function(){return bt.continue()};M&&!M(bt,function(Rt){return Tt=Rt},function(Rt){bt.stop(Rt),Tt=ft},function(Rt){bt.fail(Rt),Tt=ft})||ut(bt.value,bt,function(Rt){return Tt=Rt}),Tt()})})}zn.prototype._read=function(E,M){var V=this._ctx;return V.error?V.table._trans(null,nr.bind(null,V.error)):V.table._trans("readonly",E).then(M)},zn.prototype._write=function(E){var M=this._ctx;return M.error?M.table._trans(null,nr.bind(null,M.error)):M.table._trans("readwrite",E,"locked")},zn.prototype._addAlgorithm=function(E){var M=this._ctx;M.algorithm=ma(M.algorithm,E)},zn.prototype._iterate=function(E,M){return To(this._ctx,E,M,this._ctx.table.core)},zn.prototype.clone=function(E){var M=Object.create(this.constructor.prototype),V=Object.create(this._ctx);return E&&c(V,E),M._ctx=V,M},zn.prototype.raw=function(){return this._ctx.valueMapper=null,this},zn.prototype.each=function(E){var M=this._ctx;return this._read(function(V){return To(M,E,V,M.table.core)})},zn.prototype.count=function(E){var M=this;return this._read(function(V){var J,ut=M._ctx,bt=ut.table.core;return ya(ut,!0)?bt.count({trans:V,query:{index:Si(ut,bt.schema),range:ut.range}}).then(function(Tt){return Math.min(Tt,ut.limit)}):(J=0,To(ut,function(){return++J,!1},V,bt).then(function(){return J}))}).then(E)},zn.prototype.sortBy=function(E,M){var V=E.split(".").reverse(),J=V[0],ut=V.length-1;function bt(Vt,Yt){return Yt?bt(Vt[V[Yt]],Yt-1):Vt[J]}var Tt=this._ctx.dir==="next"?1:-1;function Rt(Vt,Yt){return vn(bt(Vt,ut),bt(Yt,ut))*Tt}return this.toArray(function(Vt){return Vt.sort(Rt)}).then(M)},zn.prototype.toArray=function(E){var M=this;return this._read(function(V){var J,ut,bt,Tt=M._ctx;return Tt.dir==="next"&&ya(Tt,!0)&&0<Tt.limit?(J=Tt.valueMapper,ut=Si(Tt,Tt.table.core.schema),Tt.table.core.query({trans:V,limit:Tt.limit,values:!0,query:{index:ut,range:Tt.range}}).then(function(Rt){return Rt=Rt.result,J?Rt.map(J):Rt})):(bt=[],To(Tt,function(Rt){return bt.push(Rt)},V,Tt.table.core).then(function(){return bt}))},E)},zn.prototype.offset=function(E){var M=this._ctx;return E<=0||(M.offset+=E,ya(M)?Ko(M,function(){var V=E;return function(J,ut){return V===0||(V===1?--V:ut(function(){J.advance(V),V=0}),!1)}}):Ko(M,function(){var V=E;return function(){return--V<0}})),this},zn.prototype.limit=function(E){return this._ctx.limit=Math.min(this._ctx.limit,E),Ko(this._ctx,function(){var M=E;return function(V,J,ut){return--M<=0&&J(ut),0<=M}},!0),this},zn.prototype.until=function(E,M){return Sl(this._ctx,function(V,J,ut){return!E(V.value)||(J(ut),M)}),this},zn.prototype.first=function(E){return this.limit(1).toArray(function(M){return M[0]}).then(E)},zn.prototype.last=function(E){return this.reverse().first(E)},zn.prototype.filter=function(E){var M;return Sl(this._ctx,function(V){return E(V.value)}),(M=this._ctx).isMatch=ma(M.isMatch,E),this},zn.prototype.and=function(E){return this.filter(E)},zn.prototype.or=function(E){return new this.db.WhereClause(this._ctx.table,E,this)},zn.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},zn.prototype.desc=function(){return this.reverse()},zn.prototype.eachKey=function(E){var M=this._ctx;return M.keysOnly=!M.isMatch,this.each(function(V,J){E(J.key,J)})},zn.prototype.eachUniqueKey=function(E){return this._ctx.unique="unique",this.eachKey(E)},zn.prototype.eachPrimaryKey=function(E){var M=this._ctx;return M.keysOnly=!M.isMatch,this.each(function(V,J){E(J.primaryKey,J)})},zn.prototype.keys=function(E){var M=this._ctx,V=(M.keysOnly=!M.isMatch,[]);return this.each(function(J,ut){V.push(ut.key)}).then(function(){return V}).then(E)},zn.prototype.primaryKeys=function(E){var M=this._ctx;if(M.dir==="next"&&ya(M,!0)&&0<M.limit)return this._read(function(J){var ut=Si(M,M.table.core.schema);return M.table.core.query({trans:J,values:!1,limit:M.limit,query:{index:ut,range:M.range}})}).then(function(J){return J.result}).then(E);M.keysOnly=!M.isMatch;var V=[];return this.each(function(J,ut){V.push(ut.primaryKey)}).then(function(){return V}).then(E)},zn.prototype.uniqueKeys=function(E){return this._ctx.unique="unique",this.keys(E)},zn.prototype.firstKey=function(E){return this.limit(1).keys(function(M){return M[0]}).then(E)},zn.prototype.lastKey=function(E){return this.reverse().firstKey(E)},zn.prototype.distinct=function(){var E,M=this._ctx,M=M.index&&M.table.schema.idxByName[M.index];return M&&M.multi&&(E={},Sl(this._ctx,function(J){var J=J.primaryKey.toString(),ut=p(E,J);return E[J]=!0,!ut})),this},zn.prototype.modify=function(E){var M=this,V=this._ctx;return this._write(function(J){function ut(Gt,te){var ie=te.failures;It+=Gt-te.numFailures;for(var Zt=0,me=l(ie);Zt<me.length;Zt++){var Te=me[Zt];Bt.push(ie[Te])}}var bt=typeof E=="function"?E:function(Gt){return io(Gt,E)},Tt=V.table.core,Ht=Tt.schema.primaryKey,Rt=Ht.outbound,Vt=Ht.extractKey,Yt=200,Ht=M.db._options.modifyChunkSize,Bt=(Ht&&(Yt=typeof Ht=="object"?Ht[Tt.name]||Ht["*"]||200:Ht),[]),It=0,zt=[],Ut=E===du;return M.clone().primaryKeys().then(function(Gt){function te(Zt){var me=Math.min(Yt,Gt.length-Zt),Te=Gt.slice(Zt,Zt+me);return(Ut?Promise.resolve([]):Tt.getMany({trans:J,keys:Te,cache:"immutable"})).then(function(Pe){var Me=[],Ne=[],ze=Rt?[]:null,Be=Ut?Te:[];if(!Ut)for(var ke=0;ke<me;++ke){var qe=Pe[ke],wn={value:Z(qe),primKey:Gt[Zt+ke]};bt.call(wn,wn.value,wn)!==!1&&(wn.value==null?Be.push(Gt[Zt+ke]):Rt||vn(Vt(qe),Vt(wn.value))===0?(Ne.push(wn.value),Rt&&ze.push(Gt[Zt+ke])):(Be.push(Gt[Zt+ke]),Me.push(wn.value)))}return Promise.resolve(0<Me.length&&Tt.mutate({trans:J,type:"add",values:Me}).then(function(Mn){for(var on in Mn.failures)Be.splice(parseInt(on),1);ut(Me.length,Mn)})).then(function(){return(0<Ne.length||ie&&typeof E=="object")&&Tt.mutate({trans:J,type:"put",keys:ze,values:Ne,criteria:ie,changeSpec:typeof E!="function"&&E,isAdditionalChunk:0<Zt}).then(function(Mn){return ut(Ne.length,Mn)})}).then(function(){return(0<Be.length||ie&&Ut)&&Tt.mutate({trans:J,type:"delete",keys:Be,criteria:ie,isAdditionalChunk:0<Zt}).then(function(Mn){return Kn(V.table,Be,Mn)}).then(function(Mn){return ut(Be.length,Mn)})}).then(function(){return Gt.length>Zt+me&&te(Zt+Yt)})})}var ie=ya(V)&&V.limit===1/0&&(typeof E!="function"||Ut)&&{index:V.index,range:V.range};return te(0).then(function(){if(0<Bt.length)throw new ct("Error modifying one or more objects",Bt,It,zt);return Gt.length})})})},zn.prototype.delete=function(){var E=this._ctx,M=E.range;return!ya(E)||E.table.schema.yProps||!E.isPrimKey&&M.type!==3?this.modify(du):this._write(function(V){var J=E.table.core.schema.primaryKey,ut=M;return E.table.core.count({trans:V,query:{index:J,range:ut}}).then(function(bt){return E.table.core.mutate({trans:V,type:"deleteRange",range:ut}).then(function(Vt){var Rt=Vt.failures,Vt=Vt.numFailures;if(Vt)throw new ct("Could not delete some values",Object.keys(Rt).map(function(Yt){return Rt[Yt]}),bt-Vt);return bt-Vt})})})};var $o=zn;function zn(){}var du=function(E,M){return M.value=null};function pu(E,M){return E<M?-1:E===M?0:1}function mu(E,M){return M<E?-1:E===M?0:1}function Qi(E,M,V){return E=E instanceof so?new E.Collection(E):E,E._ctx.error=new(V||TypeError)(M),E}function gi(E){return new E.Collection(E,function(){return No("")}).limit(0)}function _s(zt,M,V,J){var ut,bt,Tt,Rt,Vt,Yt,Ht,Bt=V.length;if(!V.every(function(Gt){return typeof Gt=="string"}))return Qi(zt,Xr);function It(Gt){ut=Gt==="next"?function(ie){return ie.toUpperCase()}:function(ie){return ie.toLowerCase()},bt=Gt==="next"?function(ie){return ie.toLowerCase()}:function(ie){return ie.toUpperCase()},Tt=Gt==="next"?pu:mu;var te=V.map(function(ie){return{lower:bt(ie),upper:ut(ie)}}).sort(function(ie,Zt){return Tt(ie.lower,Zt.lower)});Rt=te.map(function(ie){return ie.upper}),Vt=te.map(function(ie){return ie.lower}),Ht=(Yt=Gt)==="next"?"":J}It("next");var zt=new zt.Collection(zt,function(){return Zi(Rt[0],Vt[Bt-1]+J)}),Ut=(zt._ondirectionchange=function(Gt){It(Gt)},0);return zt._addAlgorithm(function(Gt,te,ie){var Zt=Gt.key;if(typeof Zt=="string"){var me=bt(Zt);if(M(me,Vt,Ut))return!0;for(var Te=null,Pe=Ut;Pe<Bt;++Pe){var Me=((Ne,ze,Be,ke,qe,wn)=>{for(var Mn=Math.min(Ne.length,ke.length),on=-1,An=0;An<Mn;++An){var vr=ze[An];if(vr!==ke[An])return qe(Ne[An],Be[An])<0?Ne.substr(0,An)+Be[An]+Be.substr(An+1):qe(Ne[An],ke[An])<0?Ne.substr(0,An)+ke[An]+Be.substr(An+1):0<=on?Ne.substr(0,on)+ze[on]+Be.substr(on+1):null;qe(Ne[An],vr)<0&&(on=An)}return Mn<ke.length&&wn==="next"?Ne+Be.substr(Ne.length):Mn<Ne.length&&wn==="prev"?Ne.substr(0,Be.length):on<0?null:Ne.substr(0,on)+ke[on]+Be.substr(on+1)})(Zt,me,Rt[Pe],Vt[Pe],Tt,Yt);Me===null&&Te===null?Ut=Pe+1:(Te===null||0<Tt(Te,Me))&&(Te=Me)}te(Te!==null?function(){Gt.continue(Te+Ht)}:ie)}return!1}),zt}function Zi(E,M,V,J){return{type:2,lower:E,upper:M,lowerOpen:V,upperOpen:J}}function No(E){return{type:1,lower:E,upper:E}}Object.defineProperty(He.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),He.prototype.between=function(E,M,V,J){V=V!==!1,J=J===!0;try{return 0<this._cmp(E,M)||this._cmp(E,M)===0&&(V||J)&&(!V||!J)?gi(this):new this.Collection(this,function(){return Zi(E,M,!V,!J)})}catch{return Qi(this,Ai)}},He.prototype.equals=function(E){return E==null?Qi(this,Ai):new this.Collection(this,function(){return No(E)})},He.prototype.above=function(E){return E==null?Qi(this,Ai):new this.Collection(this,function(){return Zi(E,void 0,!0)})},He.prototype.aboveOrEqual=function(E){return E==null?Qi(this,Ai):new this.Collection(this,function(){return Zi(E,void 0,!1)})},He.prototype.below=function(E){return E==null?Qi(this,Ai):new this.Collection(this,function(){return Zi(void 0,E,!1,!0)})},He.prototype.belowOrEqual=function(E){return E==null?Qi(this,Ai):new this.Collection(this,function(){return Zi(void 0,E)})},He.prototype.startsWith=function(E){return typeof E!="string"?Qi(this,Xr):this.between(E,E+Is,!0,!0)},He.prototype.startsWithIgnoreCase=function(E){return E===""?this.startsWith(E):_s(this,function(M,V){return M.indexOf(V[0])===0},[E],Is)},He.prototype.equalsIgnoreCase=function(E){return _s(this,function(M,V){return M===V[0]},[E],"")},He.prototype.anyOfIgnoreCase=function(){var E=Ft.apply(wt,arguments);return E.length===0?gi(this):_s(this,function(M,V){return V.indexOf(M)!==-1},E,"")},He.prototype.startsWithAnyOfIgnoreCase=function(){var E=Ft.apply(wt,arguments);return E.length===0?gi(this):_s(this,function(M,V){return V.some(function(J){return M.indexOf(J)===0})},E,Is)},He.prototype.anyOf=function(){var E,M,V=this,J=Ft.apply(wt,arguments),ut=this._cmp;try{J.sort(ut)}catch{return Qi(this,Ai)}return J.length===0?gi(this):((E=new this.Collection(this,function(){return Zi(J[0],J[J.length-1])}))._ondirectionchange=function(bt){ut=bt==="next"?V._ascending:V._descending,J.sort(ut)},M=0,E._addAlgorithm(function(bt,Tt,Rt){for(var Vt=bt.key;0<ut(Vt,J[M]);)if(++M===J.length)return Tt(Rt),!1;return ut(Vt,J[M])===0||(Tt(function(){bt.continue(J[M])}),!1)}),E)},He.prototype.notEqual=function(E){return this.inAnyRange([[-1/0,E],[E,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},He.prototype.noneOf=function(){var E=Ft.apply(wt,arguments);if(E.length===0)return new this.Collection(this);try{E.sort(this._ascending)}catch{return Qi(this,Ai)}var M=E.reduce(function(V,J){return V?V.concat([[V[V.length-1][1],J]]):[[-1/0,J]]},null);return M.push([E[E.length-1],this.db._maxKey]),this.inAnyRange(M,{includeLowers:!1,includeUppers:!1})},He.prototype.inAnyRange=function(E,ie){var V=this,J=this._cmp,ut=this._ascending,bt=this._descending,Tt=this._min,Rt=this._max;if(E.length===0)return gi(this);if(!E.every(function(Zt){return Zt[0]!==void 0&&Zt[1]!==void 0&&ut(Zt[0],Zt[1])<=0}))return Qi(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ot.InvalidArgument);var Vt=!ie||ie.includeLowers!==!1,Yt=ie&&ie.includeUppers===!0,Ht,Bt=ut;function It(Zt,me){return Bt(Zt[0],me[0])}try{(Ht=E.reduce(function(Zt,me){for(var Te=0,Pe=Zt.length;Te<Pe;++Te){var Me=Zt[Te];if(J(me[0],Me[1])<0&&0<J(me[1],Me[0])){Me[0]=Tt(Me[0],me[0]),Me[1]=Rt(Me[1],me[1]);break}}return Te===Pe&&Zt.push(me),Zt},[])).sort(It)}catch{return Qi(this,Ai)}var zt=0,Ut=Yt?function(Zt){return 0<ut(Zt,Ht[zt][1])}:function(Zt){return 0<=ut(Zt,Ht[zt][1])},Gt=Vt?function(Zt){return 0<bt(Zt,Ht[zt][0])}:function(Zt){return 0<=bt(Zt,Ht[zt][0])},te=Ut,ie=new this.Collection(this,function(){return Zi(Ht[0][0],Ht[Ht.length-1][1],!Vt,!Yt)});return ie._ondirectionchange=function(Zt){Bt=Zt==="next"?(te=Ut,ut):(te=Gt,bt),Ht.sort(It)},ie._addAlgorithm(function(Zt,me,Te){for(var Pe,Me=Zt.key;te(Me);)if(++zt===Ht.length)return me(Te),!1;return!Ut(Pe=Me)&&!Gt(Pe)||(V._cmp(Me,Ht[zt][1])===0||V._cmp(Me,Ht[zt][0])===0||me(function(){Bt===ut?Zt.continue(Ht[zt][0]):Zt.continue(Ht[zt][1])}),!1)}),ie},He.prototype.startsWithAnyOf=function(){var E=Ft.apply(wt,arguments);return E.every(function(M){return typeof M=="string"})?E.length===0?gi(this):this.inAnyRange(E.map(function(M){return[M,M+Is]})):Qi(this,"startsWithAnyOf() only works with strings")};var so=He;function He(){}function Us(E){return Bn(function(M){return ao(M),E(M.target.error),!1})}function ao(E){E.stopPropagation&&E.stopPropagation(),E.preventDefault&&E.preventDefault()}var ko="storagemutated",os="x-storagemutated-1",Pr=Gr(null,ko),gu=(Ji.prototype._lock=function(){return S(!Ee.global),++this._reculock,this._reculock!==1||Ee.global||(Ee.lockOwnerFor=this),this},Ji.prototype._unlock=function(){if(S(!Ee.global),--this._reculock==0)for(Ee.global||(Ee.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var E=this._blockedFuncs.shift();try{Bi(E[1],E[0])}catch{}}return this},Ji.prototype._locked=function(){return this._reculock&&Ee.lockOwnerFor!==this},Ji.prototype.create=function(E){var M=this;if(this.mode){var V=this.db.idbdb,J=this.db._state.dbOpenError;if(S(!this.idbtrans),!E&&!V)switch(J&&J.name){case"DatabaseClosedError":throw new ot.DatabaseClosed(J);case"MissingAPIError":throw new ot.MissingAPI(J.message,J);default:throw new ot.OpenFailed(J)}if(!this.active)throw new ot.TransactionInactive;S(this._completion._state===null),(E=this.idbtrans=E||(this.db.core||V).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Bn(function(ut){ao(ut),M._reject(E.error)}),E.onabort=Bn(function(ut){ao(ut),M.active&&M._reject(new ot.Abort(E.error)),M.active=!1,M.on("abort").fire(ut)}),E.oncomplete=Bn(function(){M.active=!1,M._resolve(),"mutatedParts"in E&&Pr.storagemutated.fire(E.mutatedParts)})}return this},Ji.prototype._promise=function(E,M,V){var J,ut=this;return E==="readwrite"&&this.mode!=="readwrite"?nr(new ot.ReadOnly("Transaction is readonly")):this.active?this._locked()?new ve(function(bt,Tt){ut._blockedFuncs.push([function(){ut._promise(E,M,V).then(bt,Tt)},Ee])}):V?Wn(function(){var bt=new ve(function(Tt,Rt){ut._lock();var Vt=M(Tt,Rt,ut);Vt&&Vt.then&&Vt.then(Tt,Rt)});return bt.finally(function(){return ut._unlock()}),bt._lib=!0,bt}):((J=new ve(function(bt,Tt){var Rt=M(bt,Tt,ut);Rt&&Rt.then&&Rt.then(bt,Tt)}))._lib=!0,J):nr(new ot.TransactionInactive)},Ji.prototype._root=function(){return this.parent?this.parent._root():this},Ji.prototype.waitFor=function(E){var M,V=this._root(),J=ve.resolve(E),ut=(V._waitingFor?V._waitingFor=V._waitingFor.then(function(){return J}):(V._waitingFor=J,V._waitingQueue=[],M=V.idbtrans.objectStore(V.storeNames[0]),(function bt(){for(++V._spinCount;V._waitingQueue.length;)V._waitingQueue.shift()();V._waitingFor&&(M.get(-1/0).onsuccess=bt)})()),V._waitingFor);return new ve(function(bt,Tt){J.then(function(Rt){return V._waitingQueue.push(Bn(bt.bind(null,Rt)))},function(Rt){return V._waitingQueue.push(Bn(Tt.bind(null,Rt)))}).finally(function(){V._waitingFor===ut&&(V._waitingFor=null)})})},Ji.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ot.Abort))},Ji.prototype.table=function(E){var M=this._memoizedTables||(this._memoizedTables={});if(p(M,E))return M[E];var V=this.schema[E];if(V)return(V=new this.db.Table(E,V,this)).core=this.db.core.table(E),M[E]=V;throw new ot.NotFound("Table "+E+" not part of transaction")},Ji);function Ji(){}function ls(E,M,V,J,ut,bt,Tt,Rt){return{name:E,keyPath:M,unique:V,multi:J,auto:ut,compound:bt,src:(V&&!Tt?"&":"")+(J?"*":"")+(ut?"++":"")+Ro(M),type:Rt}}function Ro(E){return typeof E=="string"?E:E?"["+[].join.call(E,"+")+"]":""}function Js(E,M,V){return{name:E,primKey:M,indexes:V,mappedClass:null,idxByName:(J=function(ut){return[ut.name,ut]},V.reduce(function(ut,bt,Tt){return bt=J(bt,Tt),bt&&(ut[bt[0]]=bt[1]),ut},{}))};var J}var Lo=function(E){try{return E.only([[]]),Lo=function(){return[[]]},[[]]}catch{return Lo=function(){return Is},Is}};function As(E){return E==null?function(){}:typeof E=="string"?(M=E).split(".").length===1?function(V){return V[M]}:function(V){return q(V,M)}:function(V){return q(V,E)};var M}function Xo(E){return[].slice.call(E)}var Cl=0;function Yr(E){return E==null?":id":typeof E=="string"?E:"[".concat(E.join("+"),"]")}function Pa(E,M,Vt){function J(Ut){if(Ut.type===3)return null;if(Ut.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Bt=Ut.lower,It=Ut.upper,zt=Ut.lowerOpen,Ut=Ut.upperOpen;return Bt===void 0?It===void 0?null:M.upperBound(It,!!Ut):It===void 0?M.lowerBound(Bt,!!zt):M.bound(Bt,It,!!zt,!!Ut)}function ut(Ht){var Bt,It=Ht.name;return{name:It,schema:Ht,mutate:function(zt){var Ut=zt.trans,Gt=zt.type,te=zt.keys,ie=zt.values,Zt=zt.range;return new Promise(function(me,Te){me=Bn(me);var Pe=Ut.objectStore(It),Me=Pe.keyPath==null,Ne=Gt==="put"||Gt==="add";if(!Ne&&Gt!=="delete"&&Gt!=="deleteRange")throw new Error("Invalid operation type: "+Gt);var ze,Be=(te||ie||{length:1}).length;if(te&&ie&&te.length!==ie.length)throw new Error("Given keys array must have same length as given values array.");if(Be===0)return me({numFailures:0,failures:{},results:[],lastResult:void 0});function ke(ar){++Mn,ao(ar)}var qe=[],wn=[],Mn=0;if(Gt==="deleteRange"){if(Zt.type===4)return me({numFailures:Mn,failures:wn,results:[],lastResult:void 0});Zt.type===3?qe.push(ze=Pe.clear()):qe.push(ze=Pe.delete(J(Zt)))}else{var Me=Ne?Me?[ie,te]:[ie,null]:[te,null],on=Me[0],An=Me[1];if(Ne)for(var vr=0;vr<Be;++vr)qe.push(ze=An&&An[vr]!==void 0?Pe[Gt](on[vr],An[vr]):Pe[Gt](on[vr])),ze.onerror=ke;else for(vr=0;vr<Be;++vr)qe.push(ze=Pe[Gt](on[vr])),ze.onerror=ke}function hs(ar){ar=ar.target.result,qe.forEach(function(Ea,Ci){return Ea.error!=null&&(wn[Ci]=Ea.error)}),me({numFailures:Mn,failures:wn,results:Gt==="delete"?te:qe.map(function(Ea){return Ea.result}),lastResult:ar})}ze.onerror=function(ar){ke(ar),hs(ar)},ze.onsuccess=hs})},getMany:function(zt){var Ut=zt.trans,Gt=zt.keys;return new Promise(function(te,ie){te=Bn(te);for(var Zt,me=Ut.objectStore(It),Te=Gt.length,Pe=new Array(Te),Me=0,Ne=0,ze=function(qe){qe=qe.target,Pe[qe._pos]=qe.result,++Ne===Me&&te(Pe)},Be=Us(ie),ke=0;ke<Te;++ke)Gt[ke]!=null&&((Zt=me.get(Gt[ke]))._pos=ke,Zt.onsuccess=ze,Zt.onerror=Be,++Me);Me===0&&te(Pe)})},get:function(zt){var Ut=zt.trans,Gt=zt.key;return new Promise(function(te,ie){te=Bn(te);var Zt=Ut.objectStore(It).get(Gt);Zt.onsuccess=function(me){return te(me.target.result)},Zt.onerror=Us(ie)})},query:(Bt=Rt,function(zt){return new Promise(function(Ut,Gt){Ut=Bn(Ut);var te,ie,Zt,Ne=zt.trans,me=zt.values,Te=zt.limit,Me=zt.query,Pe=Te===1/0?void 0:Te,ze=Me.index,Me=Me.range,Ne=Ne.objectStore(It),Ne=ze.isPrimaryKey?Ne:Ne.index(ze.name),ze=J(Me);if(Te===0)return Ut({result:[]});Bt?((Me=me?Ne.getAll(ze,Pe):Ne.getAllKeys(ze,Pe)).onsuccess=function(Be){return Ut({result:Be.target.result})},Me.onerror=Us(Gt)):(te=0,ie=!me&&"openKeyCursor"in Ne?Ne.openKeyCursor(ze):Ne.openCursor(ze),Zt=[],ie.onsuccess=function(Be){var ke=ie.result;return!ke||(Zt.push(me?ke.value:ke.primaryKey),++te===Te)?Ut({result:Zt}):void ke.continue()},ie.onerror=Us(Gt))})}),openCursor:function(zt){var Ut=zt.trans,Gt=zt.values,te=zt.query,ie=zt.reverse,Zt=zt.unique;return new Promise(function(me,Te){me=Bn(me);var Ne=te.index,Pe=te.range,Me=Ut.objectStore(It),Me=Ne.isPrimaryKey?Me:Me.index(Ne.name),Ne=ie?Zt?"prevunique":"prev":Zt?"nextunique":"next",ze=!Gt&&"openKeyCursor"in Me?Me.openKeyCursor(J(Pe),Ne):Me.openCursor(J(Pe),Ne);ze.onerror=Us(Te),ze.onsuccess=Bn(function(Be){var ke,qe,wn,Mn,on=ze.result;on?(on.___id=++Cl,on.done=!1,ke=on.continue.bind(on),qe=(qe=on.continuePrimaryKey)&&qe.bind(on),wn=on.advance.bind(on),Mn=function(){throw new Error("Cursor not stopped")},on.trans=Ut,on.stop=on.continue=on.continuePrimaryKey=on.advance=function(){throw new Error("Cursor not started")},on.fail=Bn(Te),on.next=function(){var An=this,vr=1;return this.start(function(){return vr--?An.continue():An.stop()}).then(function(){return An})},on.start=function(An){function vr(){if(ze.result)try{An()}catch(ar){on.fail(ar)}else on.done=!0,on.start=function(){throw new Error("Cursor behind last entry")},on.stop()}var hs=new Promise(function(ar,Ea){ar=Bn(ar),ze.onerror=Us(Ea),on.fail=Ea,on.stop=function(Ci){on.stop=on.continue=on.continuePrimaryKey=on.advance=Mn,ar(Ci)}});return ze.onsuccess=Bn(function(ar){ze.onsuccess=vr,vr()}),on.continue=ke,on.continuePrimaryKey=qe,on.advance=wn,vr(),hs},me(on)):me(null)},Te)})},count:function(zt){var Ut=zt.query,Gt=zt.trans,te=Ut.index,ie=Ut.range;return new Promise(function(Zt,me){var Te=Gt.objectStore(It),Te=te.isPrimaryKey?Te:Te.index(te.name),Pe=J(ie),Pe=Pe?Te.count(Pe):Te.count();Pe.onsuccess=Bn(function(Me){return Zt(Me.target.result)}),Pe.onerror=Us(me)})}}}bt=Vt,Tt=Xo((Vt=E).objectStoreNames);var bt,Vt={schema:{name:Vt.name,tables:Tt.map(function(Ht){return bt.objectStore(Ht)}).map(function(Ht){var Bt=Ht.keyPath,It=Ht.autoIncrement,Ut=o(Bt),zt={},Ut={name:Ht.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Bt==null,compound:Ut,keyPath:Bt,autoIncrement:It,unique:!0,extractKey:As(Bt)},indexes:Xo(Ht.indexNames).map(function(Gt){return Ht.index(Gt)}).map(function(Zt){var me=Zt.name,te=Zt.unique,ie=Zt.multiEntry,Zt=Zt.keyPath,me={name:me,compound:o(Zt),keyPath:Zt,unique:te,multiEntry:ie,extractKey:As(Zt)};return zt[Yr(Zt)]=me}),getIndexByKeyPath:function(Gt){return zt[Yr(Gt)]}};return zt[":id"]=Ut.primaryKey,Bt!=null&&(zt[Yr(Bt)]=Ut.primaryKey),Ut})},hasGetAll:0<Tt.length&&"getAll"in bt.objectStore(Tt[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},Tt=Vt.schema,Rt=Vt.hasGetAll,Vt=Tt.tables.map(ut),Yt={};return Vt.forEach(function(Ht){return Yt[Ht.name]=Ht}),{stack:"dbcore",transaction:E.transaction.bind(E),table:function(Ht){if(Yt[Ht])return Yt[Ht];throw new Error("Table '".concat(Ht,"' not found"))},MIN_KEY:-1/0,MAX_KEY:Lo(M),schema:Tt}}function ta(E,M,V,J){return V=V.IDBKeyRange,M=Pa(M,V,J),{dbcore:E.dbcore.reduce(function(ut,bt){return bt=bt.create,n(n({},ut),bt(ut))},M)}}function ea(E,M){var V=M.db,V=ta(E._middlewares,V,E._deps,M);E.core=V.dbcore,E.tables.forEach(function(J){var ut=J.name;E.core.schema.tables.some(function(bt){return bt.name===ut})&&(J.core=E.core.table(ut),E[ut]instanceof E.Table)&&(E[ut].core=J.core)})}function oo(E,M,V,J){V.forEach(function(ut){var bt=J[ut];M.forEach(function(Tt){var Rt=(function Vt(Yt,Ht){return _(Yt,Ht)||(Yt=h(Yt))&&Vt(Yt,Ht)})(Tt,ut);(!Rt||"value"in Rt&&Rt.value===void 0)&&(Tt===E.Transaction.prototype||Tt instanceof E.Transaction?w(Tt,ut,{get:function(){return this.table(ut)},set:function(Vt){m(this,ut,{value:Vt,writable:!0,configurable:!0,enumerable:!0})}}):Tt[ut]=new E.Table(ut,bt))})})}function lo(E,M){M.forEach(function(V){for(var J in V)V[J]instanceof E.Table&&delete V[J]})}function uo(E,M){return E._cfg.version-M._cfg.version}function co(E,M,V,J){var ut=E._dbSchema,bt=(V.objectStoreNames.contains("$meta")&&!ut.$meta&&(ut.$meta=Js("$meta",U("")[0],[]),E._storeNames.push("$meta")),E._createTransaction("readwrite",E._storeNames,ut)),Tt=(bt.create(V),bt._completion.catch(J),bt._reject.bind(bt)),Rt=Ee.transless||Ee;Wn(function(){if(Ee.trans=bt,Ee.transless=Rt,M!==0)return ea(E,V),Yt=M,((Vt=bt).storeNames.includes("$meta")?Vt.table("$meta").get("version").then(function(Ht){return Ht??Yt}):ve.resolve(Yt)).then(function(te){var Bt=E,It=te,zt=bt,Ut=V,Gt=[],te=Bt._versions,ie=Bt._dbSchema=na(0,Bt.idbdb,Ut);return(te=te.filter(function(Zt){return Zt._cfg.version>=It})).length===0?ve.resolve():(te.forEach(function(Zt){Gt.push(function(){var me,Te,Pe,Me=ie,Ne=Zt._cfg.dbschema,ze=(Jo(Bt,Me,Ut),Jo(Bt,Ne,Ut),ie=Bt._dbSchema=Ne,Qo(Me,Ne)),Be=(ze.add.forEach(function(ke){va(Ut,ke[0],ke[1].primKey,ke[1].indexes)}),ze.change.forEach(function(ke){if(ke.recreate)throw new ot.Upgrade("Not yet support for changing primary key");var qe=Ut.objectStore(ke.name);ke.add.forEach(function(wn){return Zo(qe,wn)}),ke.change.forEach(function(wn){qe.deleteIndex(wn.name),Zo(qe,wn)}),ke.del.forEach(function(wn){return qe.deleteIndex(wn)})}),Zt._cfg.contentUpgrade);if(Be&&Zt._cfg.version>It)return ea(Bt,Ut),zt._memoizedTables={},me=Q(Ne),ze.del.forEach(function(ke){me[ke]=Me[ke]}),lo(Bt,[Bt.Transaction.prototype]),oo(Bt,[Bt.Transaction.prototype],l(me),me),zt.schema=me,(Te=$(Be))&&dr(),Ne=ve.follow(function(){var ke;(Pe=Be(zt))&&Te&&(ke=Hr.bind(null,null),Pe.then(ke,ke))}),Pe&&typeof Pe.then=="function"?ve.resolve(Pe):Ne.then(function(){return Pe})}),Gt.push(function(me){var Te,Pe,Me=Zt._cfg.dbschema;Te=Me,Pe=me,[].slice.call(Pe.db.objectStoreNames).forEach(function(Ne){return Te[Ne]==null&&Pe.db.deleteObjectStore(Ne)}),lo(Bt,[Bt.Transaction.prototype]),oo(Bt,[Bt.Transaction.prototype],Bt._storeNames,Bt._dbSchema),zt.schema=Bt._dbSchema}),Gt.push(function(me){Bt.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(Bt.idbdb.version/10)===Zt._cfg.version?(Bt.idbdb.deleteObjectStore("$meta"),delete Bt._dbSchema.$meta,Bt._storeNames=Bt._storeNames.filter(function(Te){return Te!=="$meta"})):me.objectStore("$meta").put(Zt._cfg.version,"version"))})}),(function Zt(){return Gt.length?ve.resolve(Gt.shift()(zt.idbtrans)).then(Zt):ve.resolve()})().then(function(){Ma(ie,Ut)}))}).catch(Tt);var Vt,Yt;l(ut).forEach(function(Ht){va(V,Ht,ut[Ht].primKey,ut[Ht].indexes)}),ea(E,V),ve.follow(function(){return E.on.populate.fire(bt)}).catch(Tt)})}function Yo(E,M){Ma(E._dbSchema,M),M.db.version%10!=0||M.objectStoreNames.contains("$meta")||M.db.createObjectStore("$meta").add(Math.ceil(M.db.version/10-1),"version");var V=na(0,E.idbdb,M);Jo(E,E._dbSchema,M);for(var J=0,ut=Qo(V,E._dbSchema).change;J<ut.length;J++){var bt=(Tt=>{if(Tt.change.length||Tt.recreate)return console.warn("Unable to patch indexes of table ".concat(Tt.name," because it has changes on the type of index or primary key.")),{value:void 0};var Rt=M.objectStore(Tt.name);Tt.add.forEach(function(Vt){kt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Tt.name,".").concat(Vt.src)),Zo(Rt,Vt)})})(ut[J]);if(typeof bt=="object")return bt.value}}function Qo(E,M){var V,J={del:[],add:[],change:[]};for(V in E)M[V]||J.del.push(V);for(V in M){var ut=E[V],bt=M[V];if(ut){var Tt={name:V,def:bt,recreate:!1,del:[],add:[],change:[]};if(""+(ut.primKey.keyPath||"")!=""+(bt.primKey.keyPath||"")||ut.primKey.auto!==bt.primKey.auto)Tt.recreate=!0,J.change.push(Tt);else{var Rt=ut.idxByName,Vt=bt.idxByName,Yt=void 0;for(Yt in Rt)Vt[Yt]||Tt.del.push(Yt);for(Yt in Vt){var Ht=Rt[Yt],Bt=Vt[Yt];Ht?Ht.src!==Bt.src&&Tt.change.push(Bt):Tt.add.push(Bt)}(0<Tt.del.length||0<Tt.add.length||0<Tt.change.length)&&J.change.push(Tt)}}else J.add.push([V,bt])}return J}function va(E,M,V,J){var ut=E.db.createObjectStore(M,V.keyPath?{keyPath:V.keyPath,autoIncrement:V.auto}:{autoIncrement:V.auto});J.forEach(function(bt){return Zo(ut,bt)})}function Ma(E,M){l(E).forEach(function(V){M.db.objectStoreNames.contains(V)||(kt&&console.debug("Dexie: Creating missing table",V),va(M,V,E[V].primKey,E[V].indexes))})}function Zo(E,M){E.createIndex(M.name,M.keyPath,{unique:M.unique,multiEntry:M.multi})}function na(E,M,V){var J={};return A(M.objectStoreNames,0).forEach(function(ut){for(var bt=V.objectStore(ut),Tt=ls(Ro(Yt=bt.keyPath),Yt||"",!0,!1,!!bt.autoIncrement,Yt&&typeof Yt!="string",!0),Rt=[],Vt=0;Vt<bt.indexNames.length;++Vt){var Ht=bt.index(bt.indexNames[Vt]),Yt=Ht.keyPath,Ht=ls(Ht.name,Yt,!!Ht.unique,!!Ht.multiEntry,!1,Yt&&typeof Yt!="string",!1);Rt.push(Ht)}J[ut]=Js(ut,Tt,Rt)}),J}function Jo(E,M,V){for(var J=V.db.objectStoreNames,ut=0;ut<J.length;++ut){var bt=J[ut],Tt=V.objectStore(bt);E._hasGetAll="getAll"in Tt;for(var Rt=0;Rt<Tt.indexNames.length;++Rt){var Vt,Yt=Tt.indexNames[Rt],Ht=Tt.index(Yt).keyPath,Ht=typeof Ht=="string"?Ht:"["+A(Ht).join("+")+"]";M[bt]&&(Vt=M[bt].idxByName[Ht])&&(Vt.name=Yt,delete M[bt].idxByName[Ht],M[bt].idxByName[Yt]=Vt)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(E._hasGetAll=!1)}function U(E){return E.split(",").map(function(M,V){var ut=M.split(":"),J=(J=ut[1])==null?void 0:J.trim(),ut=(M=ut[0].trim()).replace(/([&*]|\+\+)/g,""),bt=/^\[/.test(ut)?ut.match(/^\[(.*)\]$/)[1].split("+"):ut;return ls(ut,bt||null,/\&/.test(M),/\*/.test(M),/\+\+/.test(M),o(bt),V===0,J)})}Ot.prototype._createTableSchema=Js,Ot.prototype._parseIndexSyntax=U,Ot.prototype._parseStoresSpec=function(E,M){var V=this;l(E).forEach(function(J){if(E[J]!==null){var ut=V._parseIndexSyntax(E[J]),bt=ut.shift();if(!bt)throw new ot.Schema("Invalid schema for table "+J+": "+E[J]);if(bt.unique=!0,bt.multi)throw new ot.Schema("Primary key cannot be multiEntry*");ut.forEach(function(Tt){if(Tt.auto)throw new ot.Schema("Only primary key can be marked as autoIncrement (++)");if(!Tt.keyPath)throw new ot.Schema("Index must have a name and cannot be an empty string")}),bt=V._createTableSchema(J,bt,ut),M[J]=bt}})},Ot.prototype.stores=function(V){var M=this.db,V=(this._cfg.storesSource=this._cfg.storesSource?c(this._cfg.storesSource,V):V,M._versions),J={},ut={};return V.forEach(function(bt){c(J,bt._cfg.storesSource),ut=bt._cfg.dbschema={},bt._parseStoresSpec(J,ut)}),M._dbSchema=ut,lo(M,[M._allTables,M,M.Transaction.prototype]),oo(M,[M._allTables,M,M.Transaction.prototype,this._cfg.tables],l(ut),ut),M._storeNames=l(ut),this},Ot.prototype.upgrade=function(E){return this._cfg.contentUpgrade=_t(this._cfg.contentUpgrade||ft,E),this};var gt=Ot;function Ot(){}function qt(E,M){var V=E._dbNamesDB;return V||(V=E._dbNamesDB=new Zr(Yi,{addons:[],indexedDB:E,IDBKeyRange:M})).version(1).stores({dbnames:"name"}),V.table("dbnames")}function Qt(E){return E&&typeof E.databases=="function"}function ge(E){return Wn(function(){return Ee.letThrough=!0,E()})}function Se(E){return!("from"in E)}var je=function(E,M){var V;if(!this)return V=new je,E&&"d"in E&&c(V,E),V;c(this,arguments.length?{d:1,from:E,to:1<arguments.length?M:E}:{d:0})};function $e(E,M,V){var J=vn(M,V);if(!isNaN(J)){if(0<J)throw RangeError();if(Se(E))return c(E,{from:M,to:V,d:1});var J=E.l,ut=E.r;if(vn(V,E.from)<0)return J?$e(J,M,V):E.l={from:M,to:V,d:1,l:null,r:null},Mr(E);if(0<vn(M,E.to))return ut?$e(ut,M,V):E.r={from:M,to:V,d:1,l:null,r:null},Mr(E);vn(M,E.from)<0&&(E.from=M,E.l=null,E.d=ut?ut.d+1:1),0<vn(V,E.to)&&(E.to=V,E.r=null,E.d=E.l?E.l.d+1:1),M=!E.r,J&&!E.l&&hn(E,J),ut&&M&&hn(E,ut)}}function hn(E,M){Se(M)||(function V(J,ut){var bt=ut.from,Tt=ut.l,Rt=ut.r;$e(J,bt,ut.to),Tt&&V(J,Tt),Rt&&V(J,Rt)})(E,M)}function _n(E,M){var V=In(M),J=V.next();if(!J.done)for(var ut=J.value,bt=In(E),Tt=bt.next(ut.from),Rt=Tt.value;!J.done&&!Tt.done;){if(vn(Rt.from,ut.to)<=0&&0<=vn(Rt.to,ut.from))return!0;vn(ut.from,Rt.from)<0?ut=(J=V.next(Rt.from)).value:Rt=(Tt=bt.next(ut.from)).value}return!1}function In(E){var M=Se(E)?null:{s:0,n:E};return{next:function(V){for(var J=0<arguments.length;M;)switch(M.s){case 0:if(M.s=1,J)for(;M.n.l&&vn(V,M.n.from)<0;)M={up:M,n:M.n.l,s:1};else for(;M.n.l;)M={up:M,n:M.n.l,s:1};case 1:if(M.s=2,!J||vn(V,M.n.to)<=0)return{value:M.n,done:!1};case 2:if(M.n.r){M.s=3,M={up:M,n:M.n.r,s:0};continue}case 3:M=M.up}return{done:!0}}}}function Mr(E){var M,V,J,ut=(((ut=E.r)==null?void 0:ut.d)||0)-(((ut=E.l)==null?void 0:ut.d)||0),ut=1<ut?"r":ut<-1?"l":"";ut&&(M=ut=="r"?"l":"r",V=n({},E),J=E[ut],E.from=J.from,E.to=J.to,E[ut]=J[ut],V[ut]=J[M],(E[M]=V).d=Qr(V)),E.d=Qr(E)}function Qr(V){var M=V.r,V=V.l;return(M?V?Math.max(M.d,V.d):M.d:V?V.d:0)+1}function hr(E,M){return l(M).forEach(function(V){E[V]?hn(E[V],M[V]):E[V]=(function J(ut){var bt,Tt,Rt={};for(bt in ut)p(ut,bt)&&(Tt=ut[bt],Rt[bt]=!Tt||typeof Tt!="object"||nt.has(Tt.constructor)?Tt:J(Tt));return Rt})(M[V])}),E}function ti(E,M){return E.all||M.all||Object.keys(E).some(function(V){return M[V]&&_n(M[V],E[V])})}y(je.prototype,((fe={add:function(E){return hn(this,E),this},addKey:function(E){return $e(this,E,E),this},addKeys:function(E){var M=this;return E.forEach(function(V){return $e(M,V,V)}),this},hasKey:function(E){var M=In(this).next(E).value;return M&&vn(M.from,E)<=0&&0<=vn(M.to,E)}})[it]=function(){return In(this)},fe));var Tr={},yi={},ba=!1;function Ss(E){hr(yi,E),ba||(ba=!0,setTimeout(function(){ba=!1,wa(yi,!(yi={}))},0))}function wa(E,M){M===void 0&&(M=!1);var V=new Set;if(E.all)for(var J=0,ut=Object.values(Tr);J<ut.length;J++)Tl(Rt=ut[J],E,V,M);else for(var bt in E){var Tt,Rt,bt=/^idb\:\/\/(.*)\/(.*)\//.exec(bt);bt&&(Tt=bt[1],bt=bt[2],Rt=Tr["idb://".concat(Tt,"/").concat(bt)])&&Tl(Rt,E,V,M)}V.forEach(function(Vt){return Vt()})}function Tl(E,M,V,J){for(var ut=[],bt=0,Tt=Object.entries(E.queries.query);bt<Tt.length;bt++){for(var Rt=Tt[bt],Vt=Rt[0],Yt=[],Ht=0,Bt=Rt[1];Ht<Bt.length;Ht++){var It=Bt[Ht];ti(M,It.obsSet)?It.subscribers.forEach(function(te){return V.add(te)}):J&&Yt.push(It)}J&&ut.push([Vt,Yt])}if(J)for(var zt=0,Ut=ut;zt<Ut.length;zt++){var Gt=Ut[zt],Vt=Gt[0],Yt=Gt[1];E.queries.query[Vt]=Yt}}function Nl(E){var M=E._state,V=E._deps.indexedDB;if(M.isBeingOpened||E.idbdb)return M.dbReadyPromise.then(function(){return M.dbOpenError?nr(M.dbOpenError):E});M.isBeingOpened=!0,M.dbOpenError=null,M.openComplete=!1;var J=M.openCanceller,ut=Math.round(10*E.verno),bt=!1;function Tt(){if(M.openCanceller!==J)throw new ot.DatabaseClosed("db.open() was cancelled")}function Rt(){return new ve(function(It,zt){if(Tt(),!V)throw new ot.MissingAPI;var Ut=E.name,Gt=M.autoSchema||!ut?V.open(Ut):V.open(Ut,ut);if(!Gt)throw new ot.MissingAPI;Gt.onerror=Us(zt),Gt.onblocked=Bn(E._fireOnBlocked),Gt.onupgradeneeded=Bn(function(te){var ie;Ht=Gt.transaction,M.autoSchema&&!E._options.allowEmptyDB?(Gt.onerror=ao,Ht.abort(),Gt.result.close(),(ie=V.deleteDatabase(Ut)).onsuccess=ie.onerror=Bn(function(){zt(new ot.NoSuchDatabase("Database ".concat(Ut," doesnt exist")))})):(Ht.onerror=Us(zt),ie=te.oldVersion>Math.pow(2,62)?0:te.oldVersion,Bt=ie<1,E.idbdb=Gt.result,bt&&Yo(E,Ht),co(E,ie/10,Ht,zt))},zt),Gt.onsuccess=Bn(function(){Ht=null;var te,ie,Zt,me,Te,Pe,Me=E.idbdb=Gt.result,Ne=A(Me.objectStoreNames);if(0<Ne.length)try{var ze=Me.transaction((Te=Ne).length===1?Te[0]:Te,"readonly");if(M.autoSchema)Pe=Me,me=ze,(Zt=E).verno=Pe.version/10,me=Zt._dbSchema=na(0,Pe,me),Zt._storeNames=A(Pe.objectStoreNames,0),oo(Zt,[Zt._allTables],l(me),me);else if(Jo(E,E._dbSchema,ze),ie=ze,((ie=Qo(na(0,(te=E).idbdb,ie),te._dbSchema)).add.length||ie.change.some(function(Be){return Be.add.length||Be.change.length}))&&!bt)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Me.close(),ut=Me.version+1,bt=!0,It(Rt());ea(E,ze)}catch{}Oa.push(E),Me.onversionchange=Bn(function(Be){M.vcFired=!0,E.on("versionchange").fire(Be)}),Me.onclose=Bn(function(){E.close({disableAutoOpen:!1})}),Bt&&(Ne=E._deps,Te=Ut,Qt(Pe=Ne.indexedDB)||Te===Yi||qt(Pe,Ne.IDBKeyRange).put({name:Te}).catch(ft)),It()},zt)}).catch(function(It){switch(It?.name){case"UnknownError":if(0<M.PR1398_maxLoop)return M.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),Rt();break;case"VersionError":if(0<ut)return ut=0,Rt()}return ve.reject(It)})}var Vt,Yt=M.dbReadyResolve,Ht=null,Bt=!1;return ve.race([J,(typeof navigator>"u"?ve.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(It){function zt(){return indexedDB.databases().finally(It)}Vt=setInterval(zt,100),zt()}).finally(function(){return clearInterval(Vt)}):Promise.resolve()).then(Rt)]).then(function(){return Tt(),M.onReadyBeingFired=[],ve.resolve(ge(function(){return E.on.ready.fire(E.vip)})).then(function It(){var zt;if(0<M.onReadyBeingFired.length)return zt=M.onReadyBeingFired.reduce(_t,ft),M.onReadyBeingFired=[],ve.resolve(ge(function(){return zt(E.vip)})).then(It)})}).finally(function(){M.openCanceller===J&&(M.onReadyBeingFired=null,M.isBeingOpened=!1)}).catch(function(It){M.dbOpenError=It;try{Ht&&Ht.abort()}catch{}return J===M.openCanceller&&E._close(),nr(It)}).finally(function(){M.openComplete=!0,Yt()}).then(function(){var It;return Bt&&(It={},E.tables.forEach(function(zt){zt.schema.indexes.forEach(function(Ut){Ut.name&&(It["idb://".concat(E.name,"/").concat(zt.name,"/").concat(Ut.name)]=new je(-1/0,[[[]]]))}),It["idb://".concat(E.name,"/").concat(zt.name,"/")]=It["idb://".concat(E.name,"/").concat(zt.name,"/:dels")]=new je(-1/0,[[[]]])}),Pr(ko).fire(It),wa(It,!0)),E})}function ra(E){function M(bt){return E.next(bt)}var V=ut(M),J=ut(function(bt){return E.throw(bt)});function ut(bt){return function(Rt){var Rt=bt(Rt),Vt=Rt.value;return Rt.done?Vt:Vt&&typeof Vt.then=="function"?Vt.then(V,J):o(Vt)?Promise.all(Vt).then(V,J):V(Vt)}}return ut(M)()}function Es(E,M,V){for(var J=o(E)?E.slice():[E],ut=0;ut<V;++ut)J.push(M);return J}var tl={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(E){return n(n({},E),{table:function(J){var V=E.table(J),J=V.schema,ut={},bt=[];function Tt(It,zt,Ut){var Zt=Yr(It),Gt=ut[Zt]=ut[Zt]||[],te=It==null?0:typeof It=="string"?1:It.length,ie=0<zt,Zt=n(n({},Ut),{name:ie?"".concat(Zt,"(virtual-from:").concat(Ut.name,")"):Ut.name,lowLevelIndex:Ut,isVirtual:ie,keyTail:zt,keyLength:te,extractKey:As(It),unique:!ie&&Ut.unique});return Gt.push(Zt),Zt.isPrimaryKey||bt.push(Zt),1<te&&Tt(te===2?It[0]:It.slice(0,te-1),zt+1,Ut),Gt.sort(function(me,Te){return me.keyTail-Te.keyTail}),Zt}var Rt=Tt(J.primaryKey.keyPath,0,J.primaryKey);ut[":id"]=[Rt];for(var Vt=0,Yt=J.indexes;Vt<Yt.length;Vt++){var Ht=Yt[Vt];Tt(Ht.keyPath,0,Ht)}function Bt(It){var zt,Ut=It.query.index;return Ut.isVirtual?n(n({},It),{query:{index:Ut.lowLevelIndex,range:(zt=It.query.range,Ut=Ut.keyTail,{type:zt.type===1?2:zt.type,lower:Es(zt.lower,zt.lowerOpen?E.MAX_KEY:E.MIN_KEY,Ut),lowerOpen:!0,upper:Es(zt.upper,zt.upperOpen?E.MIN_KEY:E.MAX_KEY,Ut),upperOpen:!0})}}):It}return n(n({},V),{schema:n(n({},J),{primaryKey:Rt,indexes:bt,getIndexByKeyPath:function(It){return(It=ut[Yr(It)])&&It[0]}}),count:function(It){return V.count(Bt(It))},query:function(It){return V.query(Bt(It))},openCursor:function(It){var zt=It.query.index,Ut=zt.keyTail,Gt=zt.keyLength;return zt.isVirtual?V.openCursor(Bt(It)).then(function(ie){return ie&&te(ie)}):V.openCursor(It);function te(ie){return Object.create(ie,{continue:{value:function(Zt){Zt!=null?ie.continue(Es(Zt,It.reverse?E.MAX_KEY:E.MIN_KEY,Ut)):It.unique?ie.continue(ie.key.slice(0,Gt).concat(It.reverse?E.MIN_KEY:E.MAX_KEY,Ut)):ie.continue()}},continuePrimaryKey:{value:function(Zt,me){ie.continuePrimaryKey(Es(Zt,E.MAX_KEY,Ut),me)}},primaryKey:{get:function(){return ie.primaryKey}},key:{get:function(){var Zt=ie.key;return Gt===1?Zt[0]:Zt.slice(0,Gt)}},value:{get:function(){return ie.value}}})}}})}})}};function xa(E,M,V,J){return V=V||{},J=J||"",l(E).forEach(function(ut){var bt,Tt,Rt;p(M,ut)?(bt=E[ut],Tt=M[ut],typeof bt=="object"&&typeof Tt=="object"&&bt&&Tt?(Rt=mt(bt))!==mt(Tt)?V[J+ut]=M[ut]:Rt==="Object"?xa(bt,Tt,V,J+ut+"."):bt!==Tt&&(V[J+ut]=M[ut]):bt!==Tt&&(V[J+ut]=M[ut])):V[J+ut]=void 0}),l(M).forEach(function(ut){p(E,ut)||(V[J+ut]=M[ut])}),V}function ai(E,M){return M.type==="delete"?M.keys:M.keys||M.values.map(E.extractKey)}var Oo={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(E){return n(n({},E),{table:function(M){var V=E.table(M),J=V.schema.primaryKey;return n(n({},V),{mutate:function(ut){var bt=Ee.trans,Tt=bt.table(M).hook,Rt=Tt.deleting,Vt=Tt.creating,Yt=Tt.updating;switch(ut.type){case"add":if(Vt.fire===ft)break;return bt._promise("readwrite",function(){return Ht(ut)},!0);case"put":if(Vt.fire===ft&&Yt.fire===ft)break;return bt._promise("readwrite",function(){return Ht(ut)},!0);case"delete":if(Rt.fire===ft)break;return bt._promise("readwrite",function(){return Ht(ut)},!0);case"deleteRange":if(Rt.fire===ft)break;return bt._promise("readwrite",function(){return(function Bt(It,zt,Ut){return V.query({trans:It,values:!1,query:{index:J,range:zt},limit:Ut}).then(function(Gt){var te=Gt.result;return Ht({type:"delete",keys:te,trans:It}).then(function(ie){return 0<ie.numFailures?Promise.reject(ie.failures[0]):te.length<Ut?{failures:[],numFailures:0,lastResult:void 0}:Bt(It,n(n({},zt),{lower:te[te.length-1],lowerOpen:!0}),Ut)})})})(ut.trans,ut.range,1e4)},!0)}return V.mutate(ut);function Ht(Bt){var It,zt,Ut,Gt=Ee.trans,te=Bt.keys||ai(J,Bt);if(te)return(Bt=Bt.type==="add"||Bt.type==="put"?n(n({},Bt),{keys:te}):n({},Bt)).type!=="delete"&&(Bt.values=i([],Bt.values)),Bt.keys&&(Bt.keys=i([],Bt.keys)),It=V,Ut=te,((zt=Bt).type==="add"?Promise.resolve([]):It.getMany({trans:zt.trans,keys:Ut,cache:"immutable"})).then(function(ie){var Zt=te.map(function(me,Te){var Pe,Me,Ne,ze=ie[Te],Be={onerror:null,onsuccess:null};return Bt.type==="delete"?Rt.fire.call(Be,me,ze,Gt):Bt.type==="add"||ze===void 0?(Pe=Vt.fire.call(Be,me,Bt.values[Te],Gt),me==null&&Pe!=null&&(Bt.keys[Te]=me=Pe,J.outbound||H(Bt.values[Te],J.keyPath,me))):(Pe=xa(ze,Bt.values[Te]),(Me=Yt.fire.call(Be,Pe,me,ze,Gt))&&(Ne=Bt.values[Te],Object.keys(Me).forEach(function(ke){p(Ne,ke)?Ne[ke]=Me[ke]:H(Ne,ke,Me[ke])}))),Be});return V.mutate(Bt).then(function(me){for(var Te=me.failures,Pe=me.results,Me=me.numFailures,me=me.lastResult,Ne=0;Ne<te.length;++Ne){var ze=(Pe||te)[Ne],Be=Zt[Ne];ze==null?Be.onerror&&Be.onerror(Te[Ne]):Be.onsuccess&&Be.onsuccess(Bt.type==="put"&&ie[Ne]?Bt.values[Ne]:ze)}return{failures:Te,results:Pe,numFailures:Me,lastResult:me}}).catch(function(me){return Zt.forEach(function(Te){return Te.onerror&&Te.onerror(me)}),Promise.reject(me)})});throw new Error("Keys missing")}}})}})}};function ho(E,M,V){try{if(!M||M.keys.length<E.length)return null;for(var J=[],ut=0,bt=0;ut<M.keys.length&&bt<E.length;++ut)vn(M.keys[ut],E[bt])===0&&(J.push(V?Z(M.values[ut]):M.values[ut]),++bt);return J.length===E.length?J:null}catch{return null}}var kl={stack:"dbcore",level:-1,create:function(E){return{table:function(M){var V=E.table(M);return n(n({},V),{getMany:function(J){var ut;return J.cache?(ut=ho(J.keys,J.trans._cache,J.cache==="clone"))?ve.resolve(ut):V.getMany(J).then(function(bt){return J.trans._cache={keys:J.keys,values:J.cache==="clone"?Z(bt):bt},bt}):V.getMany(J)},mutate:function(J){return J.type!=="add"&&(J.trans._cache=null),V.mutate(J)}})}}}};function _a(E,M){return E.trans.mode==="readonly"&&!!E.subscr&&!E.trans.explicit&&E.trans.db._options.cache!=="disabled"&&!M.schema.primaryKey.outbound}function ts(E,M){switch(E){case"query":return M.values&&!M.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var fo={stack:"dbcore",level:0,name:"Observability",create:function(E){var M=E.schema.name,V=new je(E.MIN_KEY,E.MAX_KEY);return n(n({},E),{transaction:function(J,ut,bt){if(Ee.subscr&&ut!=="readonly")throw new ot.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ee.querier));return E.transaction(J,ut,bt)},table:function(J){function ut(te){var Gt,te=te.query;return[Gt=te.index,new je((Gt=(te=te.range).lower)!=null?Gt:E.MIN_KEY,(Gt=te.upper)!=null?Gt:E.MAX_KEY)]}var bt=E.table(J),Tt=bt.schema,Rt=Tt.primaryKey,Vt=Tt.indexes,Yt=Rt.extractKey,Ht=Rt.outbound,Bt=Rt.autoIncrement&&Vt.filter(function(Ut){return Ut.compound&&Ut.keyPath.includes(Rt.keyPath)}),It=n(n({},bt),{mutate:function(Ut){function Gt(qe){return qe="idb://".concat(M,"/").concat(J,"/").concat(qe),Te[qe]||(Te[qe]=new je)}var te,ie,Zt,me=Ut.trans,Te=Ut.mutatedParts||(Ut.mutatedParts={}),Pe=Gt(""),Me=Gt(":dels"),Ne=Ut.type,Be=Ut.type==="deleteRange"?[Ut.range]:Ut.type==="delete"?[Ut.keys]:Ut.values.length<50?[ai(Rt,Ut).filter(function(qe){return qe}),Ut.values]:[],ze=Be[0],Be=Be[1],ke=Ut.trans._cache;return o(ze)?(Pe.addKeys(ze),(Ne=Ne==="delete"||ze.length===Be.length?ho(ze,ke):null)||Me.addKeys(ze),(Ne||Be)&&(te=Gt,ie=Ne,Zt=Be,Tt.indexes.forEach(function(qe){var wn=te(qe.name||"");function Mn(An){return An!=null?qe.extractKey(An):null}function on(An){qe.multiEntry&&o(An)?An.forEach(function(vr){return wn.addKey(vr)}):wn.addKey(An)}(ie||Zt).forEach(function(An,ar){var hs=ie&&Mn(ie[ar]),ar=Zt&&Mn(Zt[ar]);vn(hs,ar)!==0&&(hs!=null&&on(hs),ar!=null)&&on(ar)})}))):ze?(Be={from:(ke=ze.lower)!=null?ke:E.MIN_KEY,to:(Ne=ze.upper)!=null?Ne:E.MAX_KEY},Me.add(Be),Pe.add(Be)):(Pe.add(V),Me.add(V),Tt.indexes.forEach(function(qe){return Gt(qe.name).add(V)})),bt.mutate(Ut).then(function(qe){return!ze||Ut.type!=="add"&&Ut.type!=="put"||(Pe.addKeys(qe.results),Bt&&Bt.forEach(function(wn){for(var Mn=Ut.values.map(function(hs){return wn.extractKey(hs)}),on=wn.keyPath.findIndex(function(hs){return hs===Rt.keyPath}),An=0,vr=qe.results.length;An<vr;++An)Mn[An][on]=qe.results[An];Gt(wn.name).addKeys(Mn)})),me.mutatedParts=hr(me.mutatedParts||{},Te),qe})}}),zt={get:function(Ut){return[Rt,new je(Ut.key)]},getMany:function(Ut){return[Rt,new je().addKeys(Ut.keys)]},count:ut,query:ut,openCursor:ut};return l(zt).forEach(function(Ut){It[Ut]=function(Gt){var te=Ee.subscr,ie=!!te,Zt=_a(Ee,bt)&&ts(Ut,Gt)?Gt.obsSet={}:te;if(ie){var me,te=function(Be){return Be="idb://".concat(M,"/").concat(J,"/").concat(Be),Zt[Be]||(Zt[Be]=new je)},Te=te(""),Pe=te(":dels"),ie=zt[Ut](Gt),Me=ie[0],ie=ie[1];if((Ut==="query"&&Me.isPrimaryKey&&!Gt.values?Pe:te(Me.name||"")).add(ie),!Me.isPrimaryKey){if(Ut!=="count")return me=Ut==="query"&&Ht&&Gt.values&&bt.query(n(n({},Gt),{values:!1})),bt[Ut].apply(this,arguments).then(function(Be){if(Ut==="query"){if(Ht&&Gt.values)return me.then(function(Mn){return Mn=Mn.result,Te.addKeys(Mn),Be});var ke=Gt.values?Be.result.map(Yt):Be.result;(Gt.values?Te:Pe).addKeys(ke)}else{var qe,wn;if(Ut==="openCursor")return wn=Gt.values,(qe=Be)&&Object.create(qe,{key:{get:function(){return Pe.addKey(qe.primaryKey),qe.key}},primaryKey:{get:function(){var Mn=qe.primaryKey;return Pe.addKey(Mn),Mn}},value:{get:function(){return wn&&Te.addKey(qe.primaryKey),qe.value}}})}return Be});Pe.add(V)}}return bt[Ut].apply(this,arguments)}}),It}})}};function el(E,M,V){var J;return V.numFailures===0?M:M.type==="deleteRange"||(J=M.keys?M.keys.length:"values"in M&&M.values?M.values.length:1,V.numFailures===J)?null:(J=n({},M),o(J.keys)&&(J.keys=J.keys.filter(function(ut,bt){return!(bt in V.failures)})),"values"in J&&o(J.values)&&(J.values=J.values.filter(function(ut,bt){return!(bt in V.failures)})),J)}function nl(E,M){return V=E,((J=M).lower===void 0||(J.lowerOpen?0<vn(V,J.lower):0<=vn(V,J.lower)))&&(V=E,(J=M).upper===void 0||(J.upperOpen?vn(V,J.upper)<0:vn(V,J.upper)<=0));var V,J}function Cs(E,M,V,J,ut,bt){var Tt,Rt,Vt,Yt,Ht,Bt;return!V||V.length===0||(Tt=M.query.index,Rt=Tt.multiEntry,Vt=M.query.range,Yt=J.schema.primaryKey.extractKey,Ht=Tt.extractKey,Bt=(Tt.lowLevelIndex||Tt).extractKey,(J=V.reduce(function(It,zt){var Ut=It,Gt=[];if(zt.type==="add"||zt.type==="put")for(var te=new je,ie=zt.values.length-1;0<=ie;--ie){var Zt,me=zt.values[ie],Te=Yt(me);!te.hasKey(Te)&&(Zt=Ht(me),Rt&&o(Zt)?Zt.some(function(Be){return nl(Be,Vt)}):nl(Zt,Vt))&&(te.addKey(Te),Gt.push(me))}switch(zt.type){case"add":var Pe=new je().addKeys(M.values?It.map(function(ke){return Yt(ke)}):It),Ut=It.concat(M.values?Gt.filter(function(ke){return ke=Yt(ke),!Pe.hasKey(ke)&&(Pe.addKey(ke),!0)}):Gt.map(function(ke){return Yt(ke)}).filter(function(ke){return!Pe.hasKey(ke)&&(Pe.addKey(ke),!0)}));break;case"put":var Me=new je().addKeys(zt.values.map(function(ke){return Yt(ke)}));Ut=It.filter(function(ke){return!Me.hasKey(M.values?Yt(ke):ke)}).concat(M.values?Gt:Gt.map(function(ke){return Yt(ke)}));break;case"delete":var Ne=new je().addKeys(zt.keys);Ut=It.filter(function(ke){return!Ne.hasKey(M.values?Yt(ke):ke)});break;case"deleteRange":var ze=zt.range;Ut=It.filter(function(ke){return!nl(Yt(ke),ze)})}return Ut},E))===E)?E:(J.sort(function(It,zt){return vn(Bt(It),Bt(zt))||vn(Yt(It),Yt(zt))}),M.limit&&M.limit<1/0&&(J.length>M.limit?J.length=M.limit:E.length===M.limit&&J.length<M.limit&&(ut.dirty=!0)),bt?Object.freeze(J):J)}function ia(E,M){return vn(E.lower,M.lower)===0&&vn(E.upper,M.upper)===0&&!!E.lowerOpen==!!M.lowerOpen&&!!E.upperOpen==!!M.upperOpen}function po(E,M){return((V,J,ut,bt)=>{if(V===void 0)return J!==void 0?-1:0;if(J===void 0)return 1;if((V=vn(V,J))===0){if(ut&&bt)return 0;if(ut)return 1;if(bt)return-1}return V})(E.lower,M.lower,E.lowerOpen,M.lowerOpen)<=0&&0<=((V,J,ut,bt)=>{if(V===void 0)return J!==void 0?1:0;if(J===void 0)return-1;if((V=vn(V,J))===0){if(ut&&bt)return 0;if(ut)return-1;if(bt)return 1}return V})(E.upper,M.upper,E.upperOpen,M.upperOpen)}function yu(E,M,V,J){E.subscribers.add(V),J.addEventListener("abort",function(){var ut,bt;E.subscribers.delete(V),E.subscribers.size===0&&(ut=E,bt=M,setTimeout(function(){ut.subscribers.size===0&&vt(bt,ut)},3e3))})}var Aa={stack:"dbcore",level:0,name:"Cache",create:function(E){var M=E.schema.name;return n(n({},E),{transaction:function(V,J,ut){var bt,Tt,Rt=E.transaction(V,J,ut);return J==="readwrite"&&(ut=(bt=new AbortController).signal,Rt.addEventListener("abort",(Tt=function(Vt){return function(){if(bt.abort(),J==="readwrite"){for(var Yt=new Set,Ht=0,Bt=V;Ht<Bt.length;Ht++){var It=Bt[Ht],zt=Tr["idb://".concat(M,"/").concat(It)];if(zt){var Ut=E.table(It),Gt=zt.optimisticOps.filter(function(qe){return qe.trans===Rt});if(Rt._explicit&&Vt&&Rt.mutatedParts)for(var te=0,ie=Object.values(zt.queries.query);te<ie.length;te++)for(var Zt=0,me=(Me=ie[te]).slice();Zt<me.length;Zt++)ti((Ne=me[Zt]).obsSet,Rt.mutatedParts)&&(vt(Me,Ne),Ne.subscribers.forEach(function(qe){return Yt.add(qe)}));else if(0<Gt.length){zt.optimisticOps=zt.optimisticOps.filter(function(qe){return qe.trans!==Rt});for(var Te=0,Pe=Object.values(zt.queries.query);Te<Pe.length;Te++)for(var Me,Ne,ze,Be=0,ke=(Me=Pe[Te]).slice();Be<ke.length;Be++)(Ne=ke[Be]).res!=null&&Rt.mutatedParts&&(Vt&&!Ne.dirty?(ze=Object.isFrozen(Ne.res),ze=Cs(Ne.res,Ne.req,Gt,Ut,Ne,ze),Ne.dirty?(vt(Me,Ne),Ne.subscribers.forEach(function(qe){return Yt.add(qe)})):ze!==Ne.res&&(Ne.res=ze,Ne.promise=ve.resolve({result:ze}))):(Ne.dirty&&vt(Me,Ne),Ne.subscribers.forEach(function(qe){return Yt.add(qe)})))}}}Yt.forEach(function(qe){return qe()})}}})(!1),{signal:ut}),Rt.addEventListener("error",Tt(!1),{signal:ut}),Rt.addEventListener("complete",Tt(!0),{signal:ut})),Rt},table:function(V){var J=E.table(V),ut=J.schema.primaryKey;return n(n({},J),{mutate:function(bt){var Tt,Rt=Ee.trans;return!ut.outbound&&Rt.db._options.cache!=="disabled"&&!Rt.explicit&&Rt.idbtrans.mode==="readwrite"&&(Tt=Tr["idb://".concat(M,"/").concat(V)])?(Rt=J.mutate(bt),bt.type!=="add"&&bt.type!=="put"||!(50<=bt.values.length||ai(ut,bt).some(function(Vt){return Vt==null}))?(Tt.optimisticOps.push(bt),bt.mutatedParts&&Ss(bt.mutatedParts),Rt.then(function(Vt){0<Vt.numFailures&&(vt(Tt.optimisticOps,bt),(Vt=el(0,bt,Vt))&&Tt.optimisticOps.push(Vt),bt.mutatedParts)&&Ss(bt.mutatedParts)}),Rt.catch(function(){vt(Tt.optimisticOps,bt),bt.mutatedParts&&Ss(bt.mutatedParts)})):Rt.then(function(Vt){var Yt=el(0,n(n({},bt),{values:bt.values.map(function(Ht,Bt){var It;return Vt.failures[Bt]?Ht:(H(It=(It=ut.keyPath)!=null&&It.includes(".")?Z(Ht):n({},Ht),ut.keyPath,Vt.results[Bt]),It)})}),Vt);Tt.optimisticOps.push(Yt),queueMicrotask(function(){return bt.mutatedParts&&Ss(bt.mutatedParts)})}),Rt):J.mutate(bt)},query:function(bt){var Tt,Rt,Vt,Yt,Ht,Bt,It;return _a(Ee,J)&&ts("query",bt)?(Tt=((Vt=Ee.trans)==null?void 0:Vt.db._options.cache)==="immutable",Rt=(Vt=Ee).requery,Vt=Vt.signal,Bt=((zt,Ut,Gt,te)=>{var ie=Tr["idb://".concat(zt,"/").concat(Ut)];if(!ie)return[];if(!(zt=ie.queries[Gt]))return[null,!1,ie,null];var Zt=zt[(te.query?te.query.index.name:null)||""];if(!Zt)return[null,!1,ie,null];switch(Gt){case"query":var me=Zt.find(function(Te){return Te.req.limit===te.limit&&Te.req.values===te.values&&ia(Te.req.query.range,te.query.range)});return me?[me,!0,ie,Zt]:[Zt.find(function(Te){return("limit"in Te.req?Te.req.limit:1/0)>=te.limit&&(!te.values||Te.req.values)&&po(Te.req.query.range,te.query.range)}),!1,ie,Zt];case"count":return me=Zt.find(function(Te){return ia(Te.req.query.range,te.query.range)}),[me,!!me,ie,Zt]}})(M,V,"query",bt),It=Bt[0],Yt=Bt[2],Ht=Bt[3],It&&Bt[1]?It.obsSet=bt.obsSet:(Bt=J.query(bt).then(function(zt){var Ut=zt.result;if(It&&(It.res=Ut),Tt){for(var Gt=0,te=Ut.length;Gt<te;++Gt)Object.freeze(Ut[Gt]);Object.freeze(Ut)}else zt.result=Z(Ut);return zt}).catch(function(zt){return Ht&&It&&vt(Ht,It),Promise.reject(zt)}),It={obsSet:bt.obsSet,promise:Bt,subscribers:new Set,type:"query",req:bt,dirty:!1},Ht?Ht.push(It):(Ht=[It],(Yt=Yt||(Tr["idb://".concat(M,"/").concat(V)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[bt.query.index.name||""]=Ht)),yu(It,Ht,Rt,Vt),It.promise.then(function(zt){return{result:Cs(zt.result,bt,Yt?.optimisticOps,J,It,Tt)}})):J.query(bt)}})}})}};function Sa(E,M){return new Proxy(E,{get:function(V,J,ut){return J==="db"?M:Reflect.get(V,J,ut)}})}qn.prototype.version=function(E){if(isNaN(E)||E<.1)throw new ot.Type("Given version is not a positive number");if(E=Math.round(10*E)/10,this.idbdb||this._state.isBeingOpened)throw new ot.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,E);var M=this._versions,V=M.filter(function(J){return J._cfg.version===E})[0];return V||(V=new this.Version(E),M.push(V),M.sort(uo),V.stores({}),this._state.autoSchema=!1),V},qn.prototype._whenReady=function(E){var M=this;return this.idbdb&&(this._state.openComplete||Ee.letThrough||this._vip)?E():new ve(function(V,J){if(M._state.openComplete)return J(new ot.DatabaseClosed(M._state.dbOpenError));if(!M._state.isBeingOpened){if(!M._state.autoOpen)return void J(new ot.DatabaseClosed);M.open().catch(ft)}M._state.dbReadyPromise.then(V,J)}).then(E)},qn.prototype.use=function(ut){var M=ut.stack,V=ut.create,J=ut.level,ut=ut.name,bt=(ut&&this.unuse({stack:M,name:ut}),this._middlewares[M]||(this._middlewares[M]=[]));return bt.push({stack:M,create:V,level:J??10,name:ut}),bt.sort(function(Tt,Rt){return Tt.level-Rt.level}),this},qn.prototype.unuse=function(E){var M=E.stack,V=E.name,J=E.create;return M&&this._middlewares[M]&&(this._middlewares[M]=this._middlewares[M].filter(function(ut){return J?ut.create!==J:!!V&&ut.name!==V})),this},qn.prototype.open=function(){var E=this;return Bi(sn,function(){return Nl(E)})},qn.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var E=this._state,M=Oa.indexOf(this);if(0<=M&&Oa.splice(M,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}E.isBeingOpened||(E.dbReadyPromise=new ve(function(V){E.dbReadyResolve=V}),E.openCanceller=new ve(function(V,J){E.cancelOpen=J}))},qn.prototype.close=function(M){var M=(M===void 0?{disableAutoOpen:!0}:M).disableAutoOpen,V=this._state;M?(V.isBeingOpened&&V.cancelOpen(new ot.DatabaseClosed),this._close(),V.autoOpen=!1,V.dbOpenError=new ot.DatabaseClosed):(this._close(),V.autoOpen=this._options.autoOpen||V.isBeingOpened,V.openComplete=!1,V.dbOpenError=null)},qn.prototype.delete=function(E){var M=this,V=(E===void 0&&(E={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),J=this._state;return new ve(function(ut,bt){function Tt(){M.close(E);var Rt=M._deps.indexedDB.deleteDatabase(M.name);Rt.onsuccess=Bn(function(){var Vt,Yt,Ht;Vt=M._deps,Yt=M.name,Qt(Ht=Vt.indexedDB)||Yt===Yi||qt(Ht,Vt.IDBKeyRange).delete(Yt).catch(ft),ut()}),Rt.onerror=Us(bt),Rt.onblocked=M._fireOnBlocked}if(V)throw new ot.InvalidArgument("Invalid closeOptions argument to db.delete()");J.isBeingOpened?J.dbReadyPromise.then(Tt):Tt()})},qn.prototype.backendDB=function(){return this.idbdb},qn.prototype.isOpen=function(){return this.idbdb!==null},qn.prototype.hasBeenClosed=function(){var E=this._state.dbOpenError;return E&&E.name==="DatabaseClosed"},qn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},qn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(qn.prototype,"tables",{get:function(){var E=this;return l(this._allTables).map(function(M){return E._allTables[M]})},enumerable:!1,configurable:!0}),qn.prototype.transaction=function(){var E=(function(M,V,J){var ut=arguments.length;if(ut<2)throw new ot.InvalidArgument("Too few arguments");for(var bt=new Array(ut-1);--ut;)bt[ut-1]=arguments[ut];return J=bt.pop(),[M,dt(bt),J]}).apply(this,arguments);return this._transaction.apply(this,E)},qn.prototype._transaction=function(E,M,V){var J,ut,bt=this,Tt=Ee.trans,Rt=(Tt&&Tt.db===this&&E.indexOf("!")===-1||(Tt=null),E.indexOf("?")!==-1);E=E.replace("!","").replace("?","");try{if(ut=M.map(function(Yt){if(Yt=Yt instanceof bt.Table?Yt.name:Yt,typeof Yt!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Yt}),E=="r"||E===js)J=js;else{if(E!="rw"&&E!=pa)throw new ot.InvalidArgument("Invalid transaction mode: "+E);J=pa}if(Tt){if(Tt.mode===js&&J===pa){if(!Rt)throw new ot.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");Tt=null}Tt&&ut.forEach(function(Yt){if(Tt&&Tt.storeNames.indexOf(Yt)===-1){if(!Rt)throw new ot.SubTransaction("Table "+Yt+" not included in parent transaction.");Tt=null}}),Rt&&Tt&&!Tt.active&&(Tt=null)}}catch(Yt){return Tt?Tt._promise(null,function(Ht,Bt){Bt(Yt)}):nr(Yt)}var Vt=(function Yt(Ht,Bt,It,zt,Ut){return ve.resolve().then(function(){var Zt=Ee.transless||Ee,Gt=Ht._createTransaction(Bt,It,Ht._dbSchema,zt),Zt=(Gt.explicit=!0,{trans:Gt,transless:Zt});if(zt)Gt.idbtrans=zt.idbtrans;else try{Gt.create(),Gt.idbtrans._explicit=!0,Ht._state.PR1398_maxLoop=3}catch(me){return me.name===j.InvalidState&&Ht.isOpen()&&0<--Ht._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Ht.close({disableAutoOpen:!1}),Ht.open().then(function(){return Yt(Ht,Bt,It,null,Ut)})):nr(me)}var te,ie=$(Ut),Zt=(ie&&dr(),ve.follow(function(){var me;(te=Ut.call(Gt,Gt))&&(ie?(me=Hr.bind(null,null),te.then(me,me)):typeof te.next=="function"&&typeof te.throw=="function"&&(te=ra(te)))},Zt));return(te&&typeof te.then=="function"?ve.resolve(te).then(function(me){return Gt.active?me:nr(new ot.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Zt.then(function(){return te})).then(function(me){return zt&&Gt._resolve(),Gt._completion.then(function(){return me})}).catch(function(me){return Gt._reject(me),nr(me)})})}).bind(null,this,J,ut,Tt,V);return Tt?Tt._promise(J,Vt,"lock"):Ee.trans?Bi(Ee.transless,function(){return bt._whenReady(Vt)}):this._whenReady(Vt)},qn.prototype.table=function(E){if(p(this._allTables,E))return this._allTables[E];throw new ot.InvalidTable("Table ".concat(E," does not exist"))};var Zr=qn;function qn(E,M){var V,J,ut,bt,Tt,Rt=this,Vt=(this._middlewares={},this.verno=0,qn.dependencies),Vt=(this._options=M=n({addons:qn.addons,autoOpen:!0,indexedDB:Vt.indexedDB,IDBKeyRange:Vt.IDBKeyRange,cache:"cloned"},M),this._deps={indexedDB:M.indexedDB,IDBKeyRange:M.IDBKeyRange},M.addons),Yt=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ft,dbReadyPromise:null,cancelOpen:ft,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:M.autoOpen}),Ht=(Yt.dbReadyPromise=new ve(function(Bt){Yt.dbReadyResolve=Bt}),Yt.openCanceller=new ve(function(Bt,It){Yt.cancelOpen=It}),this._state=Yt,this.name=E,this.on=Gr(this,"populate","blocked","versionchange","close",{ready:[_t,ft]}),this.once=function(Bt,It){var zt=function(){for(var Ut=[],Gt=0;Gt<arguments.length;Gt++)Ut[Gt]=arguments[Gt];Rt.on(Bt).unsubscribe(zt),It.apply(Rt,Ut)};return Rt.on(Bt,zt)},this.on.ready.subscribe=C(this.on.ready.subscribe,function(Bt){return function(It,zt){qn.vip(function(){var Ut,Gt=Rt._state;Gt.openComplete?(Gt.dbOpenError||ve.resolve().then(It),zt&&Bt(It)):Gt.onReadyBeingFired?(Gt.onReadyBeingFired.push(It),zt&&Bt(It)):(Bt(It),Ut=Rt,zt||Bt(function te(){Ut.on.ready.unsubscribe(It),Ut.on.ready.unsubscribe(te)}))})}}),this.Collection=(V=this,Dr($o.prototype,function(te,Gt){this.db=V;var zt=_l,Ut=null;if(Gt)try{zt=Gt()}catch(Zt){Ut=Zt}var Gt=te._ctx,te=Gt.table,ie=te.hook.reading.fire;this._ctx={table:te,index:Gt.index,isPrimKey:!Gt.index||te.schema.primKey.keyPath&&Gt.index===te.schema.primKey.name,range:zt,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Ut,or:Gt.or,valueMapper:ie!==Mt?ie:null}})),this.Table=(J=this,Dr(Al.prototype,function(Bt,It,zt){this.db=J,this._tx=zt,this.name=Bt,this.schema=It,this.hook=J._allTables[Bt]?J._allTables[Bt].hook:Gr(null,{creating:[X,ft],reading:[W,Mt],updating:[k,ft],deleting:[P,ft]})})),this.Transaction=(ut=this,Dr(gu.prototype,function(Bt,It,zt,Ut,Gt){var te=this;Bt!=="readonly"&&It.forEach(function(ie){ie=(ie=zt[ie])==null?void 0:ie.yProps,ie&&(It=It.concat(ie.map(function(Zt){return Zt.updatesTable})))}),this.db=ut,this.mode=Bt,this.storeNames=It,this.schema=zt,this.chromeTransactionDurability=Ut,this.idbtrans=null,this.on=Gr(this,"complete","error","abort"),this.parent=Gt||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ve(function(ie,Zt){te._resolve=ie,te._reject=Zt}),this._completion.then(function(){te.active=!1,te.on.complete.fire()},function(ie){var Zt=te.active;return te.active=!1,te.on.error.fire(ie),te.parent?te.parent._reject(ie):Zt&&te.idbtrans&&te.idbtrans.abort(),nr(ie)})})),this.Version=(bt=this,Dr(gt.prototype,function(Bt){this.db=bt,this._cfg={version:Bt,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Tt=this,Dr(so.prototype,function(Bt,It,zt){if(this.db=Tt,this._ctx={table:Bt,index:It===":id"?null:It,or:zt},this._cmp=this._ascending=vn,this._descending=function(Ut,Gt){return vn(Gt,Ut)},this._max=function(Ut,Gt){return 0<vn(Ut,Gt)?Ut:Gt},this._min=function(Ut,Gt){return vn(Ut,Gt)<0?Ut:Gt},this._IDBKeyRange=Tt._deps.IDBKeyRange,!this._IDBKeyRange)throw new ot.MissingAPI})),this.on("versionchange",function(Bt){0<Bt.newVersion?console.warn("Another connection wants to upgrade database '".concat(Rt.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(Rt.name,"'. Closing db now to resume the delete request.")),Rt.close({disableAutoOpen:!1})}),this.on("blocked",function(Bt){!Bt.newVersion||Bt.newVersion<Bt.oldVersion?console.warn("Dexie.delete('".concat(Rt.name,"') was blocked")):console.warn("Upgrade '".concat(Rt.name,"' blocked by other connection holding version ").concat(Bt.oldVersion/10))}),this._maxKey=Lo(M.IDBKeyRange),this._createTransaction=function(Bt,It,zt,Ut){return new Rt.Transaction(Bt,It,zt,Rt._options.chromeTransactionDurability,Ut)},this._fireOnBlocked=function(Bt){Rt.on("blocked").fire(Bt),Oa.filter(function(It){return It.name===Rt.name&&It!==Rt&&!It._state.vcFired}).map(function(It){return It.on("versionchange").fire(Bt)})},this.use(kl),this.use(Aa),this.use(fo),this.use(tl),this.use(Oo),new Proxy(this,{get:function(Bt,It,zt){var Ut;return It==="_vip"||(It==="table"?function(Gt){return Sa(Rt.table(Gt),Ht)}:(Ut=Reflect.get(Bt,It,zt))instanceof Al?Sa(Ut,Ht):It==="tables"?Ut.map(function(Gt){return Sa(Gt,Ht)}):It==="_createTransaction"?function(){return Sa(Ut.apply(this,arguments),Ht)}:Ut)}}));this.vip=Ht,Vt.forEach(function(Bt){return Bt(Rt)})}var zs,us=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",mo=(Do.prototype.subscribe=function(E,M,V){return this._subscribe(E&&typeof E!="function"?E:{next:E,error:M,complete:V})},Do.prototype[us]=function(){return this},Do);function Do(E){this._subscribe=E}try{zs={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{zs={indexedDB:null,IDBKeyRange:null}}function rl(E){var M,V=!1,J=new mo(function(ut){var bt=$(E),Tt,Rt=!1,Vt={},Yt={},Ht={get closed(){return Rt},unsubscribe:function(){Rt||(Rt=!0,Tt&&Tt.abort(),Bt&&Pr.storagemutated.unsubscribe(zt))}},Bt=(ut.start&&ut.start(Ht),!1),It=function(){return Bs(Ut)},zt=function(Gt){hr(Vt,Gt),ti(Yt,Vt)&&It()},Ut=function(){var Gt,te,ie;!Rt&&zs.indexedDB&&(Vt={},Gt={},Tt&&Tt.abort(),Tt=new AbortController,ie=(Zt=>{var me=Fi();try{bt&&dr();var Te=Wn(E,Zt);return Te=bt?Te.finally(Hr):Te}finally{me&&nn()}})(te={subscr:Gt,signal:Tt.signal,requery:It,querier:E,trans:null}),Promise.resolve(ie).then(function(Zt){V=!0,M=Zt,Rt||te.signal.aborted||(Vt={},(me=>{for(var Te in me)if(p(me,Te))return;return 1})(Yt=Gt)||Bt||(Pr(ko,zt),Bt=!0),Bs(function(){return!Rt&&ut.next&&ut.next(Zt)}))},function(Zt){V=!1,["DatabaseClosedError","AbortError"].includes(Zt?.name)||Rt||Bs(function(){Rt||ut.error&&ut.error(Zt)})}))};return setTimeout(It,0),Ht});return J.hasValue=function(){return V},J.getValue=function(){return M},J}var yr=Zr;function Rl(E){var M=Ii;try{Ii=!0,Pr.storagemutated.fire(E),wa(E,!0)}finally{Ii=M}}y(yr,n(n({},R),{delete:function(E){return new yr(E,{addons:[]}).delete()},exists:function(E){return new yr(E,{addons:[]}).open().then(function(M){return M.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(E){try{return M=yr.dependencies,V=M.indexedDB,M=M.IDBKeyRange,(Qt(V)?Promise.resolve(V.databases()).then(function(J){return J.map(function(ut){return ut.name}).filter(function(ut){return ut!==Yi})}):qt(V,M).toCollection().primaryKeys()).then(E)}catch{return nr(new ot.MissingAPI)}var M,V},defineClass:function(){return function(E){c(this,E)}},ignoreTransaction:function(E){return Ee.trans?Bi(Ee.transless,E):E()},vip:ge,async:function(E){return function(){try{var M=ra(E.apply(this,arguments));return M&&typeof M.then=="function"?M:ve.resolve(M)}catch(V){return nr(V)}}},spawn:function(E,M,V){try{var J=ra(E.apply(V,M||[]));return J&&typeof J.then=="function"?J:ve.resolve(J)}catch(ut){return nr(ut)}},currentTransaction:{get:function(){return Ee.trans||null}},waitFor:function(E,M){return E=ve.resolve(typeof E=="function"?yr.ignoreTransaction(E):E).timeout(M||6e4),Ee.trans?Ee.trans.waitFor(E):E},Promise:ve,debug:{get:function(){return kt},set:function(E){Ct(E)}},derive:b,extend:c,props:y,override:C,Events:Gr,on:Pr,liveQuery:rl,extendObservabilitySet:hr,getByKeyPath:q,setByKeyPath:H,delByKeyPath:function(E,M){typeof M=="string"?H(E,M,void 0):"length"in M&&[].map.call(M,function(V){H(E,V,void 0)})},shallowClone:Q,deepClone:Z,getObjectDiff:xa,cmp:vn,asap:O,minKey:-1/0,addons:[],connections:Oa,errnames:j,dependencies:zs,cache:Tr,semVer:"4.3.0",version:"4.3.0".split(".").map(function(E){return parseInt(E)}).reduce(function(E,M,V){return E+M/Math.pow(10,2*V)})})),yr.maxKey=Lo(yr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Pr(ko,function(E){Ii||(E=new CustomEvent(os,{detail:E}),Ii=!0,dispatchEvent(E),Ii=!1)}),addEventListener(os,function(E){E=E.detail,Ii||Rl(E)}));var cs,Ii=!1,Ei=function(){};return typeof BroadcastChannel<"u"&&((Ei=function(){(cs=new BroadcastChannel(os)).onmessage=function(E){return E.data&&Rl(E.data)}})(),typeof cs.unref=="function"&&cs.unref(),Pr(ko,function(E){Ii||cs.postMessage(E)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(E){if(!Zr.disableBfCache&&E.persisted){kt&&console.debug("Dexie: handling persisted pagehide"),cs?.close();for(var M=0,V=Oa;M<V.length;M++)V[M].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(E){!Zr.disableBfCache&&E.persisted&&(kt&&console.debug("Dexie: handling persisted pageshow"),Ei(),Rl({all:new je(-1/0,[[]])}))})),ve.rejectionMapper=function(E,M){return!E||E instanceof rt||E instanceof TypeError||E instanceof SyntaxError||!E.name||!lt[E.name]?E:(M=new lt[E.name](M||E.message,E),"stack"in E&&w(M,"stack",{get:function(){return this.inner.stack}}),M)},Ct(kt),n(Zr,Object.freeze({__proto__:null,Dexie:Zr,Entity:fu,PropModification:ro,RangeSet:je,add:function(E){return new ro({add:E})},cmp:vn,default:Zr,liveQuery:rl,mergeRanges:hn,rangesOverlap:_n,remove:function(E){return new ro({remove:E})},replacePrefix:function(E,M){return new ro({replacePrefix:[E,M]})}}),{default:Zr}),Zr})})(Qm)),Qm.exports}var RL=kL();const pb=u3(RL),c_=Symbol.for("Dexie"),yg=globalThis[c_]||(globalThis[c_]=pb);if(pb.semVer!==yg.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${pb.semVer} and ${yg.semVer}`);const{liveQuery:tU,mergeRanges:eU,rangesOverlap:nU,RangeSet:rU,cmp:iU,Entity:sU,PropModification:aU,replacePrefix:oU,add:lU,remove:uU,DexieYProvider:cU}=yg,m2=new yg("WiseMarkDB");m2.version(1).stores({pdfs:"hash, filename, size, blob"});async function l4(r){const t=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(t)).map(e=>e.toString(16).padStart(2,"0")).join("")}async function g2(r,t,e,n){await m2.pdfs.put({hash:r,filename:t,size:e,blob:n})}async function LL(r){const t=await m2.pdfs.get(r);return t?{data:t.blob,filename:t.filename,size:t.size}:null}async function OL(r){if(!r?.pdf_hash)return null;try{const{data:t}=await Ds.getPdf(r.id),e=(t instanceof ArrayBuffer,t),n=r.file_size??e?.byteLength??0;return await g2(r.pdf_hash,r.filename||"",n,e),{data:e,filename:r.filename||"",size:n}}catch{const t=await LL(r.pdf_hash);return t||null}}const Wl=["#f59e0b","#3b82f6","#10b981","#ef4444","#8b5cf6","#ec4899","#06b6d4","#f97316"];function L1(r){if(!r)return null;const t=new Date(r);return Number.isNaN(t.getTime())?null:t.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}function DL(){const{projectId:r}=Zb(),t=Wu(),e=Lc(),[n,i]=Lt.useState(!1),[s,l]=Lt.useState(""),[o,c]=Lt.useState(null),[h,f]=Lt.useState(""),[p,y]=Lt.useState(!1),[m,w]=Lt.useState(""),[b,_]=Lt.useState(null),[v,A]=Lt.useState(""),[C,S]=Lt.useState(null),[O,q]=Lt.useState(Wl[0]),H=Lt.useRef(null),Q=Lt.useRef(null),I=Lt.useRef(null),[dt,nt]=Lt.useState(0),{data:B,isLoading:Z}=Go({queryKey:["project",r],queryFn:async()=>{const{data:tt}=await Vd.get(r);return tt},enabled:!!r}),{data:D,isLoading:mt}=Go({queryKey:["documents",r],queryFn:async()=>{const{data:tt}=await Ds.list({project:r});return tt},enabled:!!r}),it=Array.isArray(D)?D:D?.results??[],st=ka({mutationFn:({id:tt,name:X})=>Vd.update(tt,{name:X}),onSuccess:()=>{e.invalidateQueries({queryKey:["project",r]}),e.invalidateQueries({queryKey:["projects"]}),y(!1)}}),vt=ka({mutationFn:({id:tt,filename:X})=>Ds.update(tt,{filename:X}),onSuccess:()=>{e.invalidateQueries({queryKey:["documents",r]}),c(null),f("")}}),wt=ka({mutationFn:tt=>Ds.delete(tt),onSuccess:()=>e.invalidateQueries({queryKey:["documents",r]})}),Ft=ka({mutationFn:tt=>Vd.delete(tt),onSuccess:()=>{e.invalidateQueries({queryKey:["projects"]}),t("/app",{replace:!0})}}),$=async tt=>{const X=tt.target.files?.[0];if(!X||!X.type.includes("pdf"))return;l(""),_(X);const P=X.name.replace(/\.pdf$/i,"")||X.name;A(P),q(Wl[it.length%Wl.length]),S(null),H.current=null;try{const k=await X.arrayBuffer(),z=await l4(k),_t={arrayBuffer:k,hash:z,size:X.size};S(_t),H.current={..._t,suggestedName:P}}catch(k){l(k.message||"Could not read file"),_(null),A("")}},R=()=>{_(null),A(""),S(null),q(Wl[0]),l(""),H.current=null,nt(tt=>tt+1)},K=()=>{I.current?.click()},rt=async tt=>{tt.preventDefault();const X=r,k=Q.current?.value?.trim()||v?.trim()||H.current?.suggestedName?.trim()||"",z=H.current||C;if(!X){l("Project not found.");return}if(!k){l("Please enter a name for the PDF.");return}if(!z||!z.hash||!z.arrayBuffer){l("File data missing. Please close and select the file again.");return}const _t=k.toLowerCase().endsWith(".pdf")?k:`${k}.pdf`;l(""),i(!0);try{const kt=new FormData;kt.append("project",String(X)),kt.append("filename",_t),kt.append("color",O),kt.append("file",new Blob([z.arrayBuffer]),_t),await Ds.createWithFile(kt),await g2(z.hash,_t,z.size,z.arrayBuffer),e.invalidateQueries({queryKey:["documents",X]}),_(null),A(""),S(null),H.current=null,nt(Ct=>Ct+1)}catch(kt){const Ct=kt.response?.data?.detail||typeof kt.response?.data=="object"&&Object.values(kt.response?.data||{}).flat().join(" ")||kt.message||"Upload failed";l(String(Ct))}finally{i(!1)}},pt=tt=>{c(tt.id),f(tt.filename||"")},ct=()=>{if(o==null||!h.trim()){c(null);return}vt.mutate({id:o,filename:h.trim()})},F=()=>{c(null),f("")},j=()=>{w(B?.name??""),y(!0)},ht=()=>{const tt=m.trim();if(!tt||tt===B?.name){y(!1);return}st.mutate({id:r,name:tt})},ot=()=>{y(!1),w("")},lt=Ku(tt=>tt.logout),{data:ft}=Go({queryKey:["me"],queryFn:async()=>{const{data:tt}=await kf.me();return tt}}),Mt=(ft?.email?.[0]||ft?.username?.[0]||"?").toUpperCase(),W=B?.color&&Wl.includes(B.color)?B.color:B?Wl[B.id%Wl.length]:Wl[0];return Z||!B?Y.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:Y.jsx(su,{className:"w-8 h-8 animate-spin text-slate-400"})}):Y.jsxs("div",{className:"min-h-screen bg-slate-50 antialiased",style:{fontFamily:"'DM Sans', sans-serif",color:"#1e293b"},children:[Y.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=DM+Sans:ital,wght@0,400;0,500;0,600;1,400&family=JetBrains+Mono:wght@400;500&display=swap",rel:"stylesheet"}),Y.jsxs("header",{className:"bg-white/92 backdrop-blur-md border-b border-slate-200 py-4 px-10 flex items-center justify-between",children:[Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx("button",{type:"button",onClick:()=>t("/app"),className:"p-2 rounded-lg text-slate-500 hover:text-slate-700 hover:bg-slate-100",title:"Back to projects",children:Y.jsx(Mg,{className:"w-4 h-4"})}),Y.jsx("div",{className:"w-6 h-6 rounded-md bg-slate-700 flex items-center justify-center text-white text-xs font-semibold",style:{fontFamily:"'DM Sans', sans-serif"},children:"W"}),Y.jsx("span",{className:"text-[1.05rem] font-semibold text-slate-900",style:{fontFamily:"'Instrument Serif', serif"},children:"WiseMark"})]}),Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx("button",{type:"button",onClick:()=>{lt(),t("/login",{replace:!0})},className:"p-2 rounded-lg text-slate-500 hover:text-slate-700 hover:bg-slate-100",title:"Sign out",children:Y.jsx(p2,{className:"w-4 h-4"})}),Y.jsx("button",{type:"button",onClick:()=>t("/app/settings"),className:"w-8 h-8 rounded-full bg-slate-700 text-white flex items-center justify-center text-[13px] font-semibold hover:bg-slate-600 transition-colors cursor-pointer",title:"Account settings",children:Mt})]})]}),Y.jsxs("div",{className:"max-w-[720px] mx-auto px-6 py-10",style:{fontFamily:"'DM Sans', sans-serif"},children:[Y.jsxs("div",{className:"flex items-start justify-between mb-2",children:[Y.jsx("div",{className:"flex items-center gap-2 min-w-0",children:p?Y.jsxs(Y.Fragment,{children:[Y.jsx("input",{type:"text",value:m,onChange:tt=>w(tt.target.value),className:"border border-slate-200 rounded-lg px-3 py-2 text-slate-900 min-w-0 flex-1 max-w-md text-[28px]",style:{fontFamily:"'Instrument Serif', serif",fontWeight:700,letterSpacing:"0.01em"},autoFocus:!0,onKeyDown:tt=>{tt.key==="Enter"&&ht(),tt.key==="Escape"&&ot()}}),Y.jsx("button",{type:"button",onClick:ht,className:"p-2 text-green-600 hover:bg-slate-100 rounded-lg shrink-0",title:"Save",children:Y.jsx(mg,{className:"w-5 h-5"})}),Y.jsx("button",{type:"button",onClick:ot,className:"p-2 text-slate-500 hover:bg-slate-100 rounded-lg shrink-0",title:"Cancel",children:Y.jsx(Rf,{className:"w-5 h-5"})})]}):Y.jsxs(Y.Fragment,{children:[Y.jsx("h1",{className:"m-0 text-[28px] text-slate-950 truncate",style:{fontFamily:"'Instrument Serif', serif",fontWeight:700,letterSpacing:"0.01em"},children:B.name}),Y.jsx("button",{type:"button",onClick:j,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg shrink-0",title:"Edit project name",children:Y.jsx(gg,{className:"w-4 h-4"})}),Y.jsx("button",{type:"button",onClick:()=>{window.confirm(`Delete project "${B.name}" and all its documents? This cannot be undone.`)&&Ft.mutate(r)},className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg shrink-0",title:"Delete project",disabled:Ft.isPending,children:Y.jsx(Jd,{className:"w-4 h-4"})})]})}),Y.jsxs("button",{type:"button",onClick:K,disabled:n,className:"flex items-center gap-1.5 px-4 py-2 text-sm font-medium rounded-lg text-white transition-colors hover:bg-slate-700 shrink-0 disabled:opacity-70",style:{background:"#1e293b",fontFamily:"'DM Sans', sans-serif"},children:[Y.jsx(db,{className:"w-4 h-4"}),"Add PDF"]})]}),Y.jsx("div",{className:"flex items-center gap-3 text-xs text-slate-400 mb-6 uppercase",style:{fontFamily:"'JetBrains Mono', monospace",letterSpacing:"0.08em"},children:Y.jsxs("span",{children:[it.length," document",it.length!==1?"s":""]})}),Y.jsx("input",{ref:I,type:"file",accept:".pdf",onChange:$,className:"hidden","aria-hidden":"true",tabIndex:-1},dt),s&&Y.jsx("p",{className:"text-sm text-red-600 mb-4",children:s}),n&&Y.jsxs("p",{className:"flex items-center gap-2 text-sm text-slate-600 mb-4",children:[Y.jsx(su,{className:"w-4 h-4 animate-spin"})," Uploading..."]}),mt?Y.jsxs("div",{className:"flex items-center gap-2 text-slate-500 py-12",style:{fontFamily:"'DM Sans', sans-serif"},children:[Y.jsx(su,{className:"w-5 h-5 animate-spin"})," Loading PDFs"]}):it.length===0?Y.jsxs("div",{className:"rounded-xl border border-slate-200 p-8 text-center text-slate-500",style:{fontFamily:"'DM Sans', sans-serif"},children:[Y.jsx(d2,{className:"w-12 h-12 mx-auto mb-3 text-slate-400"}),Y.jsx("p",{children:"No PDFs in this project yet. Add a PDF above."})]}):Y.jsx("ul",{className:"space-y-2",children:it.map(tt=>Y.jsx("li",{className:"rounded-xl border border-slate-200 bg-white overflow-hidden transition-all duration-200 hover:shadow-[0_4px_12px_rgba(71,85,105,0.08)] hover:-translate-y-px cursor-pointer",children:o===tt.id?Y.jsxs("div",{className:"flex items-center gap-2 px-5 py-3",children:[Y.jsx("input",{type:"text",value:h,onChange:X=>f(X.target.value),className:"flex-1 min-w-0 border border-slate-200 rounded-lg px-3 py-2 text-slate-900",autoFocus:!0,onKeyDown:X=>{X.key==="Enter"&&ct(),X.key==="Escape"&&F()}}),Y.jsx("button",{type:"button",onClick:ct,className:"p-2.5 text-green-600 hover:bg-slate-100 rounded-lg shrink-0",title:"Save",children:Y.jsx(mg,{className:"w-4 h-4"})}),Y.jsx("button",{type:"button",onClick:F,className:"p-2.5 text-slate-500 hover:bg-slate-100 rounded-lg shrink-0",title:"Cancel",children:Y.jsx(Rf,{className:"w-4 h-4"})})]}):Y.jsxs("div",{className:"flex items-center gap-4 px-5 py-3 cursor-pointer",onClick:()=>t(`/document/${tt.id}`),children:[Y.jsx("div",{className:"shrink-0 rounded-sm",style:{width:4,height:40,background:tt.color&&Wl.includes(tt.color)?tt.color:W}}),Y.jsxs("div",{className:"flex-1 min-w-0 py-1 flex flex-col items-start gap-0.5",children:[Y.jsx("span",{className:"text-base font-normal text-slate-900 truncate block w-full",style:{fontFamily:"'Instrument Serif', serif"},children:tt.filename}),Y.jsxs("span",{className:"text-xs text-slate-400 block",style:{fontFamily:"'JetBrains Mono', monospace"},children:[tt.file_size!=null&&`${(tt.file_size/1024).toFixed(1)} KB`,tt.file_size!=null&&L1(tt.created_at)&&"  ",L1(tt.created_at)?`Uploaded ${L1(tt.created_at)}`:null]})]}),Y.jsx("button",{type:"button",onClick:X=>{X.stopPropagation(),pt(tt)},className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg shrink-0",title:"Rename",children:Y.jsx(gg,{className:"w-4 h-4"})}),Y.jsx("button",{type:"button",onClick:X=>{X.stopPropagation(),confirm("Delete this PDF?")&&wt.mutate(tt.id)},className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg shrink-0",title:"Delete",children:Y.jsx(Jd,{className:"w-4 h-4"})})]})},tt.id))})]}),b&&Y.jsx("div",{className:"fixed inset-0 z-1000 flex items-center justify-center p-4 bg-slate-950/40 backdrop-blur-sm",onClick:R,children:Y.jsxs("div",{className:"rounded-xl bg-white border border-slate-200 shadow-xl w-full max-w-md p-6",onClick:tt=>tt.stopPropagation(),children:[Y.jsx("h2",{className:"m-0 text-xl font-normal text-slate-900 mb-4",style:{fontFamily:"'Instrument Serif', serif"},children:"Name this PDF"}),C?Y.jsxs("div",{className:"space-y-4",children:[s&&Y.jsx("p",{className:"text-sm text-red-600 bg-red-50 rounded-lg px-3 py-2",children:s}),Y.jsx("input",{ref:Q,type:"text",value:v,onChange:tt=>A(tt.target.value),placeholder:"Document name",className:"w-full border border-slate-200 rounded-lg px-3 py-2.5 text-slate-900",autoFocus:!0,disabled:n}),Y.jsx("label",{className:"block text-[13px] font-medium text-slate-600 mb-2 uppercase tracking-wider",style:{fontFamily:"'JetBrains Mono', monospace"},children:"Colour"}),Y.jsx("div",{className:"flex gap-2",children:Wl.map(tt=>Y.jsx("button",{type:"button",onClick:()=>q(tt),disabled:n,className:"w-7 h-7 rounded-full shrink-0 transition-all border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:opacity-60",style:{background:tt,borderColor:O===tt?"#1e293b":"transparent",outline:O===tt?"2px solid #fff":"none",outlineOffset:-4}},tt))}),Y.jsxs("div",{className:"flex justify-end gap-3 pt-2",style:{fontFamily:"'DM Sans', sans-serif"},children:[Y.jsx("button",{type:"button",onClick:R,disabled:n,className:"px-4 py-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg",children:"Cancel"}),Y.jsx("button",{type:"button",onClick:tt=>{tt.preventDefault(),rt(tt)},disabled:n||!v.trim(),className:"px-4 py-2 text-sm font-medium rounded-lg text-white hover:bg-slate-700",style:{background:"#1e293b"},children:n?Y.jsxs("span",{className:"inline-flex items-center gap-2",children:[Y.jsx(su,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Upload & save"})]})]}):Y.jsxs("div",{className:"flex items-center gap-2 text-slate-600 py-4",children:[Y.jsx(su,{className:"w-5 h-5 animate-spin shrink-0"}),Y.jsx("span",{children:"Reading file..."})]})]})})]})}const Gu={yellow:{key:"yellow",label:"Yellow",name:"Key Metrics",hex:"#EAB308",rgba:"rgba(254, 243, 199, 0.5)",rgbaSoft:"rgba(234,179,8,0.18)",rgbaHover:"rgba(234,179,8,0.38)",solid:"#fbbf24"},green:{key:"green",label:"Green",name:"Competitive Advantages",hex:"#22C55E",rgba:"rgba(209, 250, 229, 0.5)",rgbaSoft:"rgba(34,197,94,0.18)",rgbaHover:"rgba(34,197,94,0.38)",solid:"#10b981"},blue:{key:"blue",label:"Blue",name:"Management Questions",hex:"#3B82F6",rgba:"rgba(219, 234, 254, 0.5)",rgbaSoft:"rgba(59,130,246,0.18)",rgbaHover:"rgba(59,130,246,0.38)",solid:"#3b82f6"},pink:{key:"pink",label:"Pink",name:"Investment Risks",hex:"#EC4899",rgba:"rgba(252, 231, 243, 0.5)",rgbaSoft:"rgba(236,72,153,0.18)",rgbaHover:"rgba(236,72,153,0.38)",solid:"#ec4899"},orange:{key:"orange",label:"Orange",name:"Commercial DD",hex:"#F97316",rgba:"rgba(254, 215, 170, 0.5)",rgbaSoft:"rgba(249,115,22,0.18)",rgbaHover:"rgba(249,115,22,0.38)",solid:"#f59e0b"}},y2=Object.keys(Gu);function Lf(r,t=1){if(!r||!r.startsWith("#"))return`rgba(148,163,184,${t})`;const e=parseInt(r.slice(1),16),n=e>>16&255,i=e>>8&255,s=e&255;return`rgba(${n},${i},${s},${t})`}function Cc(r,t={},e){if(t&&typeof t[r]=="string"&&t[r].trim())return t[r].trim();if(e?.length){const n=e.find(i=>i.key===r);if(n?.display_name)return n.display_name}return Gu[r]&&Gu[r].name||r}const Ta=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),mb=[.001,0,0,.001,0,0],O1=1.35,xo={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},wc={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},tp="pdfjs_internal_editor_",Pn={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},ir={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},PL={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},gb={TRIANGLES:1,LATTICE:2},vs={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Zm={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ss={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},rf={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Fg={ERRORS:0,WARNINGS:1,INFOS:5},ep={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Nd={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},ML={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Bg=Fg.WARNINGS;function FL(r){Number.isInteger(r)&&(Bg=r)}function BL(){return Bg}function Ig(r){Bg>=Fg.INFOS&&console.info(`Info: ${r}`)}function Tn(r){Bg>=Fg.WARNINGS&&console.warn(`Warning: ${r}`)}function Cr(r){throw new Error(r)}function Er(r,t){r||Cr(t)}function IL(r){switch(r?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function u4(r,t=null,e=null){if(!r)return null;if(e&&typeof r=="string"&&(e.addDefaultProtocol&&r.startsWith("www.")&&r.match(/\./g)?.length>=2&&(r=`http://${r}`),e.tryConvertEncoding))try{r=GL(r)}catch{}const n=t?URL.parse(r,t):URL.parse(r);return IL(n)?n:null}function c4(r,t,e=!1){const n=URL.parse(r);return n?(n.hash=t,n.href):e&&u4(r,"http://example.com")?r.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Nn(r,t,e,n=!1){return Object.defineProperty(r,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const ph=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class h_ extends ph{constructor(t,e){super(t,"PasswordException"),this.code=e}}class D1 extends ph{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class yb extends ph{constructor(t){super(t,"InvalidPDFException")}}class vg extends ph{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class jL extends ph{constructor(t){super(t,"FormatError")}}class Tc extends ph{constructor(t){super(t,"AbortException")}}function UL(r){(typeof r!="object"||r?.length===void 0)&&Cr("Invalid argument for bytesToString");const t=r.length,e=8192;if(t<e)return String.fromCharCode.apply(null,r);const n=[];for(let i=0;i<t;i+=e){const s=Math.min(i+e,t),l=r.subarray(i,s);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function jg(r){typeof r!="string"&&Cr("Invalid argument for stringToBytes");const t=r.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=r.charCodeAt(n)&255;return e}function zL(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function qL(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function HL(){try{return new Function(""),!0}catch{return!1}}class ws{static get isLittleEndian(){return Nn(this,"isLittleEndian",qL())}static get isEvalSupported(){return Nn(this,"isEvalSupported",HL())}static get isOffscreenCanvasSupported(){return Nn(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Nn(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Nn(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Nn(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Nn(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return Nn(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const P1=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));class Ge{static makeHexColor(t,e,n){return`#${P1[t]}${P1[e]}${P1[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const i=t[n],s=t[n+1];t[n]=i*e[0]+s*e[2]+e[4],t[n+1]=i*e[1]+s*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const i=e[0],s=e[1],l=e[2],o=e[3],c=e[4],h=e[5];for(let f=0;f<6;f+=2){const p=t[n+f],y=t[n+f+1];t[n+f]=p*i+y*l+c,t[n+f+1]=p*s+y*o+h}}static applyInverseTransform(t,e){const n=t[0],i=t[1],s=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-i*e[2]+e[2]*e[5]-e[4]*e[3])/s,t[1]=(-n*e[1]+i*e[0]+e[4]*e[1]-e[5]*e[0])/s}static axialAlignedBoundingBox(t,e,n){const i=e[0],s=e[1],l=e[2],o=e[3],c=e[4],h=e[5],f=t[0],p=t[1],y=t[2],m=t[3];let w=i*f+c,b=w,_=i*y+c,v=_,A=o*p+h,C=A,S=o*m+h,O=S;if(s!==0||l!==0){const q=s*f,H=s*y,Q=l*p,I=l*m;w+=Q,v+=Q,_+=I,b+=I,A+=q,O+=q,S+=H,C+=H}n[0]=Math.min(n[0],w,_,b,v),n[1]=Math.min(n[1],A,S,C,O),n[2]=Math.max(n[2],w,_,b,v),n[3]=Math.max(n[3],A,S,C,O)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],i=t[1],s=t[2],l=t[3],o=n**2+i**2,c=n*s+i*l,h=s**2+l**2,f=(o+h)/2,p=Math.sqrt(f**2-(o*h-c**2));e[0]=Math.sqrt(f+p||1),e[1]=Math.sqrt(f-p||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const s=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return s>l?null:[n,s,i,l]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,i,s){s[0]=Math.min(s[0],t,n),s[1]=Math.min(s[1],e,i),s[2]=Math.max(s[2],t,n),s[3]=Math.max(s[3],e,i)}static#t(t,e,n,i,s,l,o,c,h,f){if(h<=0||h>=1)return;const p=1-h,y=h*h,m=y*h,w=p*(p*(p*t+3*h*e)+3*y*n)+m*i,b=p*(p*(p*s+3*h*l)+3*y*o)+m*c;f[0]=Math.min(f[0],w),f[1]=Math.min(f[1],b),f[2]=Math.max(f[2],w),f[3]=Math.max(f[3],b)}static#e(t,e,n,i,s,l,o,c,h,f,p,y){if(Math.abs(h)<1e-12){Math.abs(f)>=1e-12&&this.#t(t,e,n,i,s,l,o,c,-p/f,y);return}const m=f**2-4*p*h;if(m<0)return;const w=Math.sqrt(m),b=2*h;this.#t(t,e,n,i,s,l,o,c,(-f+w)/b,y),this.#t(t,e,n,i,s,l,o,c,(-f-w)/b,y)}static bezierBoundingBox(t,e,n,i,s,l,o,c,h){h[0]=Math.min(h[0],t,o),h[1]=Math.min(h[1],e,c),h[2]=Math.max(h[2],t,o),h[3]=Math.max(h[3],e,c),this.#e(t,n,s,o,e,i,l,c,3*(-t+3*(n-s)+o),6*(t-2*n+s),3*(n-t),h),this.#e(t,n,s,o,e,i,l,c,3*(-e+3*(i-l)+c),6*(e-2*i+l),3*(i-e),h)}}function GL(r){return decodeURIComponent(escape(r))}let M1=null,f_=null;function VL(r){return M1||(M1=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,f_=new Map([["","t"]])),r.replaceAll(M1,(t,e,n)=>e?e.normalize("NFKC"):f_.get(n))}function h4(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),UL(r)}const cf="pdfjs_internal_id_";function WL(r,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,i,...s]=e;if(!r(n)&&!Number.isInteger(n)||!t(i))return!1;const l=s.length;let o=!0;switch(i.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;o=!1;break;default:return!1}for(const c of s)if(!(typeof c=="number"||o&&c===null))return!1;return!0}function Ks(r,t,e){return Math.min(Math.max(r,t),e)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((t,e)=>t+e,0)});class np{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function i(s){if(!s)return;let l=null;const o=s.name;if(o==="#text")l=s.value;else if(np.shouldBuildText(o))s?.attributes?.textContent?l=s.attributes.textContent:s.value&&(l=s.value);else return;if(l!==null&&e.push({str:l}),!!s.children)for(const c of s.children)i(c)}return i(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class f4{static setupStorage(t,e,n,i,s){const l=i.getValue(e,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),s==="print")break;t.addEventListener("input",o=>{i.setValue(e,{value:o.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?t.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&t.removeAttribute("checked"),s==="print")break;t.addEventListener("change",o=>{i.setValue(e,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),s==="print")break;t.addEventListener("input",o=>{i.setValue(e,{value:o.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const o of n.children)o.attributes.value===l.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}t.addEventListener("input",o=>{const c=o.target.options,h=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(e,{value:h})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:i,linkService:s}){const{attributes:l}=e,o=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${i}`);for(const[c,h]of Object.entries(l))if(h!=null)switch(c){case"class":h.length&&t.setAttribute(c,h.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",h);break;case"style":Object.assign(t.style,h);break;case"textContent":t.textContent=h;break;default:(!o||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,h)}o&&s.addLinkAttributes(t,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(t,l.dataId,e,n)}static render(t){const e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,s=t.intent||"display",l=document.createElement(i.name);i.attributes&&this.setAttributes({html:l,element:i,intent:s,linkService:n});const o=s!=="richText",c=t.div;if(c.append(l),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=p}o&&c.setAttribute("class","xfaLayer xfaFont");const h=[];if(i.children.length===0){if(i.value){const p=document.createTextNode(i.value);l.append(p),o&&np.shouldBuildText(i.name)&&h.push(p)}return{textDivs:h}}const f=[[i,-1,l]];for(;f.length>0;){const[p,y,m]=f.at(-1);if(y+1===p.children.length){f.pop();continue}const w=p.children[++f.at(-1)[1]];if(w===null)continue;const{name:b}=w;if(b==="#text"){const v=document.createTextNode(w.value);h.push(v),m.append(v);continue}const _=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,b):document.createElement(b);if(m.append(_),w.attributes&&this.setAttributes({html:_,element:w,storage:e,intent:s,linkService:n}),w.children?.length>0)f.push([w,-1,_]);else if(w.value){const v=document.createTextNode(w.value);o&&np.shouldBuildText(b)&&h.push(v),_.append(v)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:h}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Bu="http://www.w3.org/2000/svg";class Of{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function pp(r,t="text"){if(qd(r,document.baseURI)){const e=await fetch(r);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const i=new XMLHttpRequest;i.open("GET",r,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class mp{constructor({viewBox:t,userUnit:e,scale:n,rotation:i,offsetX:s=0,offsetY:l=0,dontFlip:o=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=i,this.offsetX=s,this.offsetY=l,n*=e;const c=(t[2]+t[0])/2,h=(t[3]+t[1])/2;let f,p,y,m;switch(i%=360,i<0&&(i+=360),i){case 180:f=-1,p=0,y=0,m=1;break;case 90:f=0,p=1,y=1,m=0;break;case 270:f=0,p=-1,y=-1,m=0;break;case 0:f=1,p=0,y=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(y=-y,m=-m);let w,b,_,v;f===0?(w=Math.abs(h-t[1])*n+s,b=Math.abs(c-t[0])*n+l,_=(t[3]-t[1])*n,v=(t[2]-t[0])*n):(w=Math.abs(c-t[0])*n+s,b=Math.abs(h-t[1])*n+l,_=(t[2]-t[0])*n,v=(t[3]-t[1])*n),this.transform=[f*n,p*n,y*n,m*n,w-f*n*c-y*n*h,b-p*n*c-m*n*h],this.width=_,this.height=v}get rawDims(){const t=this.viewBox;return Nn(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new mp({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:s})}convertToViewportPoint(t,e){const n=[t,e];return Ge.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];Ge.applyTransform(e,this.transform);const n=[t[2],t[3]];return Ge.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return Ge.applyInverseTransform(n,this.transform),n}}class v2 extends ph{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Ug(r){const t=r.length;let e=0;for(;e<t&&r[e].trim()==="";)e++;return r.substring(e,e+5).toLowerCase()==="data:"}function b2(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function KL(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function $L(r,t="document.pdf"){if(typeof r!="string")return t;if(Ug(r))return Tn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(r);if(!n)return t;const i=o=>{try{let c=decodeURIComponent(o);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:o):c}catch{return o}},s=/\.pdf$/i,l=n.pathname.split("/").at(-1);if(s.test(l))return i(l);if(n.searchParams.size>0){const o=Array.from(n.searchParams.values()).reverse();for(const h of o)if(s.test(h))return i(h);const c=Array.from(n.searchParams.keys()).reverse();for(const h of c)if(s.test(h))return i(h)}if(n.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(c)return i(c[0])}return t}class d_{started=Object.create(null);times=[];time(t){t in this.started&&Tn(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Tn(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:i,end:s}of this.times)t.push(`${n.padEnd(e)} ${s-i}ms
`);return t.join("")}}function qd(r,t){const e=t?URL.parse(r,t):URL.parse(r);return e?.protocol==="http:"||e?.protocol==="https:"}function Vo(r){r.preventDefault()}function Mi(r){r.preventDefault(),r.stopPropagation()}function XL(r){console.log("Deprecated API usage: "+r)}class vb{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const n=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(e[3],10);s=s>=1&&s<=31?s:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let o=parseInt(e[5],10);o=o>=0&&o<=59?o:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const h=e[7]||"Z";let f=parseInt(e[8],10);f=f>=0&&f<=23?f:0;let p=parseInt(e[9],10)||0;return p=p>=0&&p<=59?p:0,h==="-"?(l+=f,o+=p):h==="+"&&(l-=f,o-=p),new Date(Date.UTC(n,i,s,l,o,c))}}function YL(r,{scale:t=1,rotation:e=0}){const{width:n,height:i}=r.attributes.style,s=[0,0,parseInt(n),parseInt(i)];return new mp({viewBox:s,userUnit:1,scale:t,rotation:e})}function gp(r){if(r.startsWith("#")){const t=parseInt(r.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(t=>parseInt(t)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Tn(`Not a valid color format: "${r}"`),[0,0,0])}function QL(r){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of r.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;r.set(e,gp(n))}t.remove()}function wi(r){const{a:t,b:e,c:n,d:i,e:s,f:l}=r.getTransform();return[t,e,n,i,s,l]}function Kl(r){const{a:t,b:e,c:n,d:i,e:s,f:l}=r.getTransform().invertSelf();return[t,e,n,i,s,l]}function uh(r,t,e=!1,n=!0){if(t instanceof mp){const{pageWidth:i,pageHeight:s}=t.rawDims,{style:l}=r,o=ws.isCSSRoundSupported,c=`var(--total-scale-factor) * ${i}px`,h=`var(--total-scale-factor) * ${s}px`,f=o?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,p=o?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!e||t.rotation%180===0?(l.width=f,l.height=p):(l.width=p,l.height=f)}n&&r.setAttribute("data-main-rotation",t.rotation)}class lu{constructor(){const{pixelRatio:t}=lu;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,i,s=-1){let l=1/0,o=1/0,c=1/0;n=lu.capPixels(n,s),n>0&&(l=Math.sqrt(n/(t*e))),i!==-1&&(o=i/t,c=i/e);const h=Math.min(l,o,c);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const bb=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class ZL{static get isDarkMode(){return Nn(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class JL{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),Nn(this,"commentForegroundColor",gp(n))}}function tO(r,t,e,n){n=Math.min(Math.max(n??1,0),1);const i=255*(1-n);return r=Math.round(r*n+i),t=Math.round(t*n+i),e=Math.round(e*n+i),[r,t,e]}function p_(r,t){const e=r[0]/255,n=r[1]/255,i=r[2]/255,s=Math.max(e,n,i),l=Math.min(e,n,i),o=(s+l)/2;if(s===l)t[0]=t[1]=0;else{const c=s-l;switch(t[1]=o<.5?c/(s+l):c/(2-s-l),s){case e:t[0]=((n-i)/c+(n<i?6:0))*60;break;case n:t[0]=((i-e)/c+2)*60;break;case i:t[0]=((e-n)/c+4)*60;break}}t[2]=o}function wb(r,t){const e=r[0],n=r[1],i=r[2],s=(1-Math.abs(2*i-1))*n,l=s*(1-Math.abs(e/60%2-1)),o=i-s/2;switch(Math.floor(e/60)){case 0:t[0]=s+o,t[1]=l+o,t[2]=o;break;case 1:t[0]=l+o,t[1]=s+o,t[2]=o;break;case 2:t[0]=o,t[1]=s+o,t[2]=l+o;break;case 3:t[0]=o,t[1]=l+o,t[2]=s+o;break;case 4:t[0]=l+o,t[1]=o,t[2]=s+o;break;case 5:case 6:t[0]=s+o,t[1]=o,t[2]=l+o;break}}function m_(r){return r<=.03928?r/12.92:((r+.055)/1.055)**2.4}function g_(r,t,e){wb(r,e),e.map(m_);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];wb(t,e),e.map(m_);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)}const y_=new Map;function eO(r,t){const e=r[0]+r[1]*256+r[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=y_.get(e);if(n)return n;const i=new Float32Array(9),s=i.subarray(0,3),l=i.subarray(3,6);p_(r,l);const o=i.subarray(6,9);p_(t,o);const c=o[2]<.5,h=c?12:4.5;if(l[2]=c?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),g_(l,o,s)<h){let f,p;c?(f=l[2],p=1):(f=0,p=l[2]);const y=.005;for(;p-f>y;){const m=l[2]=(f+p)/2;c===g_(l,o,s)<h?f=m:p=m}l[2]=c?p:f}return wb(l,s),n=Ge.makeHexColor(Math.round(s[0]*255),Math.round(s[1]*255),Math.round(s[2]*255)),y_.set(e,n),n}function d4({html:r,dir:t,className:e},n){const i=document.createDocumentFragment();if(typeof r=="string"){const s=document.createElement("p");s.dir=t||"auto";const l=r.split(/(?:\r\n?|\n)/);for(let o=0,c=l.length;o<c;++o){const h=l[o];s.append(document.createTextNode(h)),o<c-1&&s.append(document.createElement("br"))}i.append(s)}else f4.render({xfaHtml:r,div:i,intent:"richText"});i.firstElementChild.classList.add("richText",e),n.append(i)}function p4(r){const t=new Path2D;if(!r)return t;for(let e=0,n=r.length;e<n;)switch(r[e++]){case Nd.moveTo:t.moveTo(r[e++],r[e++]);break;case Nd.lineTo:t.lineTo(r[e++],r[e++]);break;case Nd.curveTo:t.bezierCurveTo(r[e++],r[e++],r[e++],r[e++],r[e++],r[e++]);break;case Nd.quadraticCurveTo:t.quadraticCurveTo(r[e++],r[e++],r[e++],r[e++]);break;case Nd.closePath:t.closePath();break;default:Tn(`Unrecognized drawing path operator: ${r[e-1]}`);break}return t}class Ar{static#t=null;static#e=null;static#r=null;static#n=0;static#i=[];get pagesNumber(){return Ar.#n}set pagesNumber(t){Ar.#n!==t&&(Ar.#n=t,t===0&&(Ar.#e=null,Ar.#t=null))}addListener(t){Ar.#i.push(t)}removeListener(t){const e=Ar.#i.indexOf(t);e>=0&&Ar.#i.splice(e,1)}#a(){for(const t of Ar.#i)t()}#s(t){if(Ar.#e)return;const e=Ar.#n,n=new Uint32Array(3*e),i=Ar.#e=n.subarray(0,e),s=Ar.#t=n.subarray(e,2*e);if(t)for(let l=0;l<e;l++)i[l]=s[l]=l+1;Ar.#r=n.subarray(2*e)}movePages(t,e,n){this.#s(!0);const i=Ar.#e,s=Ar.#t;Ar.#r.set(s);const l=e.length,o=new Uint32Array(l);let c=0;for(let m=0;m<l;m++){const w=e[m]-1;o[m]=i[w],w<n&&(c+=1)}const h=Ar.#n;let f=n-c;const p=h-l;f=Ks(f,0,p);for(let m=0,w=0;m<h;m++)t.has(m+1)||(i[w++]=i[m]);i.copyWithin(f+l,f,p),i.set(o,f);let y=!1;for(let m=0,w=h;m<w;m++){const b=i[m];y||=b!==m+1,s[b-1]=m+1}this.#a(),y||(this.pagesNumber=0)}hasBeenAltered(){return Ar.#e!==null}getPageMappingForSaving(){return{pageIndices:Ar.#t?Ar.#t.map(t=>t-1):null}}getPrevPageNumber(t){return Ar.#r[Ar.#e[t-1]-1]}getPageNumber(t){return Ar.#t?.[t-1]??t}getPageId(t){return Ar.#e?.[t-1]??t}static get instance(){return Nn(this,"instance",new Ar)}getMapping(){return Ar.#e.subarray(0,this.pagesNumber)}}class Kd{#t=null;#e=null;#r;#n=null;#i=null;#a=null;#s=null;#o=null;static#u=null;constructor(t){this.#r=t,Kd.#u||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#r._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Vo,{signal:e}),t.addEventListener("pointerdown",Kd.#l,{signal:e}));const n=this.#n=document.createElement("div");n.className="buttons",t.append(n);const i=this.#r.toolbarPosition;if(i){const{style:s}=t,l=this.#r._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd=`${100*l}%`,s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#f(t){this.#r._focusEventsAllowed=!1,Mi(t)}#h(t){this.#r._focusEventsAllowed=!0,Mi(t)}#d(t){const e=this.#r._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#f.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Vo,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#i?.shown(),this.#a?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#r,n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",Kd.#u[t]),this.#d(n)&&n.addEventListener("click",i=>{e.delete()},{signal:e._signal}),this.#n.append(n)}get#g(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#d(e),this.#n.append(e,this.#g),this.#i=t}addComment(t,e=null){if(this.#a)return;const n=t.renderForToolbar();if(!n)return;this.#d(n);const i=this.#s=this.#g;e?(this.#n.insertBefore(n,e),this.#n.insertBefore(i,e)):this.#n.append(n,i),this.#a=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#d(e),this.#n.append(e,this.#g)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#r);this.#d(e),this.#n.append(e,this.#g)}removeButton(t){t==="comment"&&(this.#a?.removeToolbarCommentButton(),this.#a=null,this.#s?.remove(),this.#s=null)}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,n){if(!e&&t==="comment")return;const i=this.#n.querySelector(n);i&&t==="comment"&&this.addComment(e,i)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class nO{#t=null;#e=null;#r;constructor(t){this.#r=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#r._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Vo,{signal:e});const n=this.#t=document.createElement("div");return n.className="buttons",t.append(n),this.#r.hasCommentManager()&&this.#a("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#r.commentSelection("floating_button")}),this.#a("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#r.highlightSelection("floating_button")}),t}#i(t,e){let n=0,i=0;for(const s of t){const l=s.y+s.height;if(l<n)continue;const o=s.x+(e?s.width:0);if(l>n){i=o,n=l;continue}e?o>i&&(i=o):o<i&&(i=o)}return[e?1-i:i,n]}show(t,e,n){const[i,s]=this.#i(e,n),{style:l}=this.#e||=this.#n();t.append(this.#e),l.insetInlineEnd=`${100*i}%`,l.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#a(t,e,n,i){const s=document.createElement("button");s.classList.add("basic",t),s.tabIndex=0,s.setAttribute("data-l10n-id",e);const l=document.createElement("span");s.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",n);const o=this.#r._signal;o instanceof AbortSignal&&!o.aborted&&(s.addEventListener("contextmenu",Vo,{signal:o}),s.addEventListener("click",i,{signal:o})),this.#t.append(s)}}function m4(r,t,e){for(const n of e)t.addEventListener(n,r[n].bind(r))}class Sr{static#t=NaN;static#e=null;static#r=NaN;static#n=null;static initializeAndAddPointerId(t){(Sr.#e||=new Set).add(t)}static setPointer(t,e){Sr.#t||=e,Sr.#n??=t}static setTimeStamp(t){Sr.#r=t}static isSamePointerId(t){return Sr.#t===t}static isSamePointerIdOrRemove(t){return Sr.#t===t?!0:(Sr.#e?.delete(t),!1)}static isSamePointerType(t){return Sr.#n===t}static isInitializedAndDifferentPointerType(t){return Sr.#n!==null&&!Sr.isSamePointerType(t)}static isSameTimeStamp(t){return Sr.#r===t}static isUsingMultiplePointers(){return Sr.#e?.size>=1}static clearPointerType(){Sr.#n=null}static clearPointerIds(){Sr.#t=NaN,Sr.#e=null}static clearTimeStamp(){Sr.#r=NaN}}class rO{#t=0;get id(){return`${tp}${this.#t++}`}}class w2{#t=h4();#e=0;#r=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const s=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Nn(this,"_isSVGFittingCanvas",s)}async#n(t,e){this.#r||=new Map;let n=this.#r.get(t);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let i;if(typeof e=="string"?(n.url=e,i=await pp(e,"blob")):e instanceof File?i=n.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const s=w2._isSVGFittingCanvas,l=new FileReader,o=new Image,c=new Promise((h,f)=>{o.onload=()=>{n.bitmap=o,n.isSvg=!0,h()},l.onload=async()=>{const p=n.svgUrl=l.result;o.src=await s?`${p}#svgView(preserveAspectRatio(none))`:p},o.onerror=l.onerror=f});l.readAsDataURL(i),await c}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){Tn(i),n=null}return this.#r.set(t,n),n&&this.#r.set(n.id,n),n}async getFromFile(t){const{lastModified:e,name:n,size:i,type:s}=t;return this.#n(`${e}_${n}_${i}_${s}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const n=await e;return this.#n(t,n)}async getFromId(t){this.#r||=new Map;const e=this.#r.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#r||=new Map;let n=this.#r.get(t);if(n?.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#r.set(t,n),this.#r.set(n.id,n),n}getSvgUrl(t){const e=this.#r.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#r||=new Map;const e=this.#r.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=i.convertToBlob()}n.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class iO{#t=[];#e=!1;#r;#n=-1;constructor(t=128){this.#r=t}add({cmd:t,undo:e,post:n,mustExec:i,type:s=NaN,overwriteIfSameType:l=!1,keepUndo:o=!1}){if(i&&t(),this.#e)return;const c={cmd:t,undo:e,post:n,type:s};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(c);return}if(l&&this.#t[this.#n].type===s){o&&(c.undo=this.#t[this.#n].undo),this.#t[this.#n]=c;return}const h=this.#n+1;h===this.#r?this.#t.splice(0,1):(this.#n=h,h<this.#t.length&&this.#t.splice(h)),this.#t.push(c)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class yp{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=ws.platform;for(const[n,i,s={}]of t)for(const l of n){const o=l.startsWith("mac+");e&&o?(this.callbacks.set(l.slice(4),{callback:i,options:s}),this.allKeys.add(l.split("+").at(-1))):!e&&!o&&(this.callbacks.set(l,{callback:i,options:s}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(this.#t(e));if(!n)return;const{callback:i,options:{bubbles:s=!1,args:l=[],checker:o=null}}=n;o&&!o(t,e)||(i.bind(t,...l,e)(),s||Mi(e))}}class x2{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return QL(t),Nn(this,"_colors",t)}convert(t){const e=gp(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,i]of this._colors)if(i.every((s,l)=>s===e[l]))return x2._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?Ge.makeHexColor(...e):t}}class Nc{#t=new AbortController;#e=null;#r=null;#n=new Map;#i=new Map;#a=null;#s=null;#o=null;#u=new iO;#l=null;#f=null;#h=null;#d=0;#g=new Set;#m=null;#c=null;#p=new Set;_editorUndoBar=null;#y=!1;#b=!1;#v=!1;#S=null;#A=null;#w=null;#C=null;#x=!1;#E=null;#R=new rO;#N=!1;#k=!1;#B=!1;#O=null;#P=null;#I=null;#M=null;#G=null;#T=Pn.NONE;#_=new Set;#D=null;#j=null;#z=null;#K=null;#W=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#q=[0,0];#F=null;#V=null;#Z=null;#J=null;#U=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Nc.prototype,e=l=>l.#V.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:o})=>{if(o instanceof HTMLInputElement){const{type:c}=o;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return Nn(this,"_keyboardManager",new yp([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:o})=>!(o instanceof HTMLButtonElement)&&l.#V.contains(o)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:o})=>!(o instanceof HTMLButtonElement)&&l.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}]]))}constructor(t,e,n,i,s,l,o,c,h,f,p,y,m,w,b,_){const v=this._signal=this.#t.signal;this.#V=t,this.#Z=e,this.#J=n,this.#a=i,this.#l=s,this.#j=l,this.#W=c,this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:v}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),o._on("setpreference",this.onSetPreference.bind(this),{signal:v}),o._on("switchannotationeditorparams",A=>this.updateParams(A.type,A.value),{signal:v}),o._on("pagesedited",this.onPagesEdited.bind(this),{signal:v}),window.addEventListener("pointerdown",()=>{this.#k=!0},{capture:!0,signal:v}),window.addEventListener("pointerup",()=>{this.#k=!1},{capture:!0,signal:v}),this.#at(),this.#ft(),this.#et(),this.#s=c.annotationStorage,this.#S=c.filterFactory,this.#z=h,this.#C=f||null,this.#y=p,this.#b=y,this.#v=m,this.#G=w||null,this.viewParameters={realScale:Of.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=b||null,this._supportsPinchToZoom=_!==!1,s?.setSidebarUiManager(this)}destroy(){this.#U?.resolve(),this.#U=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#i.values())t.destroy();this.#i.clear(),this.#n.clear(),this.#p.clear(),this.#M?.clear(),this.#e=null,this.#_.clear(),this.#u.destroy(),this.#a?.destroy(),this.#l?.destroy(),this.#j?.destroy(),this.#E?.hide(),this.#E=null,this.#I?.destroy(),this.#I=null,this.#r=null,this.#A&&(clearTimeout(this.#A),this.#A=null),this.#F&&(clearTimeout(this.#F),this.#F=null),this._editorUndoBar?.destroy(),this.#W=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#G}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return Nn(this,"hcmFilter",this.#z?this.#S.addHCMFilter(this.#z.foreground,this.#z.background):"none")}get direction(){return Nn(this,"direction",getComputedStyle(this.#V).direction)}get _highlightColors(){return Nn(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Nn(this,"highlightColors",null);const e=new Map,n=!!this.#z;for(const[i,s]of t){const l=i.endsWith("_HCM");if(n&&l){e.set(i.replace("_HCM",""),s);continue}!n&&!l&&e.set(i,s)}return Nn(this,"highlightColors",e)}get highlightColorNames(){return Nn(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#I=t}editAltText(t,e=!1){this.#a?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,n,i){this.#l?.showDialog(this,t,e,n,i)}selectComment(t,e){this.#i.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}deleteComment(t,e){const n=()=>{t.comment=e},i=()=>{this._editorUndoBar?.show(n,"comment"),this.toggleComment(null),t.comment=null};this.addCommands({cmd:i,undo:n,mustExec:!0})}toggleComment(t,e,n=void 0){this.#l?.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#i.has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),i=s=>{s.pageNumber===t&&(this._eventBus._off("editorsrendered",i),e())};this._eventBus.on("editorsrendered",i),await n}getSignature(t){this.#j?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#j}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){t==="enableNewAltTextWhenAddingImage"&&(this.#v=e)}onPagesEdited({pagesMapper:t}){for(const i of this.#n.values())i.updatePageIndex(t.getPrevPageNumber(i.pageIndex+1)-1);const e=this.#i,n=this.#i=new Map;for(const[i,s]of e){const l=t.getPrevPageNumber(i+1)-1;if(l===-1){s.destroy();continue}n.set(l,s),s.updatePageIndex(l)}}onPageChanging({pageNumber:t}){this.#d=t-1}focusMainContainer(){this.#V.focus()}findParent(t,e){for(const n of this.#i.values()){const{x:i,y:s,width:l,height:o}=n.div.getBoundingClientRect();if(t>=i&&t<=i+l&&e>=s&&e<=s+o)return n}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Of.PDF_TO_CSS_UNITS;for(const e of this.#p)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of this.#i.values())if(n.hasTextLayer(t))return n;return null}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:l,focusOffset:o}=n,c=n.toString(),f=this.#Q(n).closest(".textLayer"),p=this.getSelectionBoxes(f);if(!p)return;n.empty();const y=this.#tt(f),m=this.#T===Pn.NONE,w=()=>{const b=y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:p,anchorNode:i,anchorOffset:s,focusNode:l,focusOffset:o,text:c});m&&this.showAllEditors("highlight",!0,!0),e&&b?.editComment()};if(m){this.switchToMode(Pn.HIGHLIGHT,w);return}w()}commentSelection(t=""){this.highlightSelection(t,!0)}#it(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=this.#Q(t).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(this.#E||=new nO(this),this.#E.show(n,i,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const e=`${tp}${t}`,n=this.#s.getRawValue(e);return n&&this.#s.remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,e=null){const n=this.#J;n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}#st(){const t=document.getSelection();if(!t||t.isCollapsed){this.#D&&(this.#E?.hide(),this.#D=null,this.#L({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#D)return;const i=this.#Q(t).closest(".textLayer");if(!i){this.#D&&(this.#E?.hide(),this.#D=null,this.#L({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#D=e,this.#L({hasSelectedText:!0}),!(this.#T!==Pn.HIGHLIGHT&&this.#T!==Pn.NONE)&&(this.#T===Pn.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#x=this.isShiftKeyDown,!this.isShiftKeyDown)){const s=this.#T===Pn.HIGHLIGHT?this.#tt(i):null;if(s?.toggleDrawing(),this.#k){const l=new AbortController,o=this.combinedSignal(l),c=h=>{h.type==="pointerup"&&h.button!==0||(l.abort(),s?.toggleDrawing(!0),h.type==="pointerup"&&this.#X("main_toolbar"))};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})}else s?.toggleDrawing(!0),this.#X("main_toolbar")}}#X(t=""){this.#T===Pn.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#it()}#at(){document.addEventListener("selectionchange",this.#st.bind(this),{signal:this._signal})}#ot(){if(this.#w)return;this.#w=new AbortController;const t=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#lt(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#x&&(this.#x=!1,this.#X("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#_)if(e.div.contains(t)){this.#P=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#P)return;const[t,e]=this.#P;this.#P=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#O)return;this.#O=new AbortController;const t=this.combinedSignal(this.#O);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ut(){this.#O?.abort(),this.#O=null}#ct(){if(this.#f)return;this.#f=new AbortController;const t=this.combinedSignal(this.#f);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#ht(){this.#f?.abort(),this.#f=null}#ft(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ut(),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of this.#c)if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of this.#c)if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of this.#_){const i=n.serialize(!0);i&&e.push(i)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const s of e.items)for(const l of this.#c)if(l.isHandlingMimeForPasting(s.type)){l.paste(s,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(s){Tn(`paste: "${s.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const s=[];for(const c of n){const h=await i.deserialize(c);if(!h)return;s.push(h)}const l=()=>{for(const c of s)this.#nt(c);this.#rt(s)},o=()=>{for(const c of s)c.remove()};this.addCommands({cmd:l,undo:o,mustExec:!0})}catch(s){Tn(`paste: "${s.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==Pn.NONE&&!this.isEditorHandlingKeyboard&&Nc._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#x&&(this.#x=!1,this.#X("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#L(t){Object.entries(t).some(([n,i])=>this.#$[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#T===Pn.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#H([[ir.HIGHLIGHT_FREE,!0]]))}#H(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ot(),this.#ct(),this.#L({isEditing:this.#T!==Pn.NONE,isEmpty:this.#Y(),hasSomethingToUndo:this.#u.hasSomethingToUndo(),hasSomethingToRedo:this.#u.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#lt(),this.#ht(),this.#L({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#c){this.#c=t;for(const e of this.#c)this.#H(e.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#i.get(this.#d)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#d}addLayer(t){this.#i.set(t.pageIndex,t),this.#N?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}async updateMode(t,e=null,n=!1,i=!1,s=!1,l=!1){if(this.#T!==t&&!(this.#U&&(await this.#U.promise,!this.#U))){if(this.#U=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#T===Pn.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=t,t===Pn.NONE){this.setEditingState(!1),this.#pt();for(const o of this.#n.values())o.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#U.resolve();return}for(const o of this.#n.values())o.addStandaloneCommentButton();t===Pn.SIGNATURE&&await this.#j?.loadSignatures(),n&&Sr.clearPointerType(),this.setEditingState(!0),await this.#dt(),this.unselectAll();for(const o of this.#i.values())o.updateMode(t);if(t===Pn.POPUP){this.#r||=await this.#W.getAnnotationsByType(new Set(this.#c.map(h=>h._editorType)));const o=new Set,c=[];for(const h of this.#n.values()){const{annotationElementId:f,hasComment:p,deleted:y}=h;f&&o.add(f),p&&!y&&c.push(h.getData())}for(const h of this.#r){const{id:f,popupRef:p,contentsObj:y}=h;p&&y?.str&&!o.has(f)&&!this.#g.has(f)&&c.push(h)}this.#l?.showSidebar(c)}if(!e){i&&this.addNewEditorFromKeyboard(),this.#U.resolve();return}for(const o of this.#n.values())o.uid===e?(this.setSelected(o),l?o.editComment():s?o.enterInEditMode():o.focus()):o.unselect();this.#U.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#c){switch(t){case ir.CREATE:this.currentLayer.addNewEditor(e);return;case ir.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#K||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of this.#_)n.updateParams(t,e);else for(const n of this.#c)n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){for(const s of this.#n.values())s.editorType===t&&s.show(e);(this.#K?.get(ir.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#H([[ir.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#B!==t){this.#B=t;for(const e of this.#i.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#dt(){if(!this.#N){this.#N=!0;const t=[];for(const e of this.#i.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#pt(){if(this.unselectAll(),this.#N){this.#N=!1;for(const t of this.#i.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#A&&clearTimeout(this.#A),this.#A=setTimeout(()=>{this.focusMainContainer(),this.#A=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#M?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#g.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#g.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#g.has(t)}removeDeletedAnnotationElement(t){this.#g.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#nt(t){const e=this.#i.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#H(t.propertiesToUpdate))}get#mt(){let t=null;for(t of this.#_);return t}updateUI(t){this.#mt===t&&this.#H(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#H(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#_.has(t)){this.#_.delete(t),t.unselect(),this.#L({hasSelectedEditor:this.hasSelection});return}this.#_.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#h?.commitOrRemove();for(const e of this.#_)e!==t&&e.unselect();this.#_.clear(),this.#_.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}isSelected(t){return this.#_.has(t)}get firstSelectedEditor(){return this.#_.values().next().value}unselect(t){t.unselect(),this.#_.delete(t),this.#L({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#_.size!==0}get isEnterHandled(){return this.#_.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#u.undo(),this.#L({hasSomethingToUndo:this.#u.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Y()}),this._editorUndoBar?.hide()}redo(){this.#u.redo(),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:this.#u.hasSomethingToRedo(),isEmpty:this.#Y()})}addCommands(t){this.#u.add(t),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Y()})}cleanUndoStack(t){this.#u.cleanType(t)}#Y(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#_],n=()=>{this._editorUndoBar?.show(i,e.length===1?e[0].editorType:e.length);for(const s of e)s.remove()},i=()=>{for(const s of e)this.#nt(s)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#rt(t){for(const e of this.#_)e.unselect();this.#_.clear();for(const e of t)e.isEmpty()||(this.#_.add(e),e.select());this.#L({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#_)t.commit();this.#rt(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==Pn.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#_)t.unselect();this.#_.clear(),this.#L({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#q[0]+=t,this.#q[1]+=e;const[i,s]=this.#q,l=[...this.#_],o=1e3;this.#F&&clearTimeout(this.#F),this.#F=setTimeout(()=>{this.#F=null,this.#q[0]=this.#q[1]=0,this.addCommands({cmd:()=>{for(const c of l)this.#n.has(c.id)&&(c.translateInPage(i,s),c.translationDone())},undo:()=>{for(const c of l)this.#n.has(c.id)&&(c.translateInPage(-i,-s),c.translationDone())},mustExec:!1})},o);for(const c of l)c.translateInPage(t,e),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const t of this.#_)this.#m.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const t=this.#m;this.#m=null;let e=!1;for(const[{x:i,y:s,pageIndex:l},o]of t)o.newX=i,o.newY=s,o.newPageIndex=l,e||=i!==o.savedX||s!==o.savedY||l!==o.savedPageIndex;if(!e)return!1;const n=(i,s,l,o)=>{if(this.#n.has(i.id)){const c=this.#i.get(o);c?i._setParentAndPosition(c,s,l):(i.pageIndex=o,i.x=s,i.y=l)}};return this.addCommands({cmd:()=>{for(const[i,{newX:s,newY:l,newPageIndex:o}]of t)n(i,s,l,o)},undo:()=>{for(const[i,{savedX:s,savedY:l,savedPageIndex:o}]of t)n(i,s,l,o)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#m)for(const n of this.#m.keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#_.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}isEditingMode(){return this.#T!==Pn.NONE}get imageManager(){return Nn(this,"imageManager",new w2)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let h=0,f=e.rangeCount;h<f;h++)if(!t.contains(e.getRangeAt(h).commonAncestorContainer))return null;const{x:n,y:i,width:s,height:l}=t.getBoundingClientRect();let o;switch(t.getAttribute("data-main-rotation")){case"90":o=(h,f,p,y)=>({x:(f-i)/l,y:1-(h+p-n)/s,width:y/l,height:p/s});break;case"180":o=(h,f,p,y)=>({x:1-(h+p-n)/s,y:1-(f+y-i)/l,width:p/s,height:y/l});break;case"270":o=(h,f,p,y)=>({x:1-(f+y-i)/l,y:(h-n)/s,width:y/l,height:p/s});break;default:o=(h,f,p,y)=>({x:(h-n)/s,y:(f-i)/l,width:p/s,height:y/l});break}const c=[];for(let h=0,f=e.rangeCount;h<f;h++){const p=e.getRangeAt(h);if(!p.collapsed)for(const{x:y,y:m,width:w,height:b}of p.getClientRects())w===0||b===0||c.push(o(y,m,w,b))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const n=this.#s.getRawValue(e);n&&(this.#T===Pn.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){const i=this.#M?.get(t);i&&(i.setCanvas(e,n),this.#M.delete(t))}addMissingCanvas(t,e){(this.#M||=new Map).set(t,e)}}class nu{#t=null;#e=!1;#r=null;#n=null;#i=null;#a=null;#s=!1;#o=null;#u=null;#l=null;#f=null;#h=!1;static#d=null;static _l10n=null;constructor(t){this.#u=t,this.#h=t._uiManager.useNewAltTextFlow,nu.#d||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){nu._l10n??=t}async render(){const t=this.#r=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",nu.#d.missing),e.setAttribute("data-l10n-id",nu.#d["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#u._uiManager._signal;t.addEventListener("contextmenu",Vo,{signal:n}),t.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:n});const i=s=>{s.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#h&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",s=>{s.target===t&&s.key==="Enter"&&(this.#s=!0,i(s))},{signal:n}),await this.#m(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#r&&(this.#r.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#f=await nu._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#m())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#u.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#f),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#f}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:i,cancel:s=!1}){n&&(this.#l=n,this.#f=i),!(this.#t===t&&this.#e===e)&&(s||(this.#t=t,this.#e=e),this.#m())}toggle(t=!1){this.#r&&(!t&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#r.disabled=!t)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#r?.remove(),this.#r=null,this.#n=null,this.#i=null,this.#o?.remove(),this.#o=null}async#m(){const t=this.#r;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",nu.#d[this.#g]),this.#n?.setAttribute("data-l10n-id",nu.#d[`${this.#g}-label`]),!this.#t){this.#i?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#i?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#i;if(!e){this.#i=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#u.id}`;const i=100,s=this.#u._uiManager._signal;s.addEventListener("abort",()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#i.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:s}),t.addEventListener("mouseleave",()=>{this.#a&&(clearTimeout(this.#a),this.#a=null),this.#i?.classList.remove("show")},{signal:s})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#u.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}let vm=class{#t=null;#e=null;#r=!1;#n=null;#i=null;#a=null;#s=null;#o=null;#u=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#f(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#n.commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const i=this.#n.commentButtonColor;i&&(n.backgroundColor=i)}return this.#f(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:n}=this.#t.getBoundingClientRect(),{x:i,y:s,width:l,height:o}=this.#n.parent.boundingClientRect;return[(t-i)/l,(e+n-s)/o]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#f(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=this.#n._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",Vo,{signal:n}),e&&(t.addEventListener("focusin",s=>{this.#n._focusEventsAllowed=!1,Mi(s)},{capture:!0,signal:n}),t.addEventListener("focusout",s=>{this.#n._focusEventsAllowed=!0,Mi(s)},{capture:!0,signal:n})),t.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:n});const i=s=>{s.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",s=>{s.target===t&&s.key==="Enter"&&(this.#r=!0,i(s))},{signal:n}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:n}),t}edit(t){const e=this.commentPopupPositionInLayer;let n,i;if(e)[n,i]=e;else{[n,i]=this.#n.commentButtonPosition;const{width:f,height:p,x:y,y:m}=this.#n;n=y+n*f,i=m+i*p}const s=this.#n.parent.boundingClientRect,{x:l,y:o,width:c,height:h}=s;this.#n._uiManager.editComment(this.#n,l+n*c,o+i*h,{...t,parentDimensions:s})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#r}),this.#r=!1)}isDeleted(){return this.#u||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#i}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#a,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#a=null),t===null){this.#s="",this.#u=!0;return}this.#s=t,this.#o=new Date,this.#u=!1}restoreData({text:t,richText:e,date:n}){this.#s=t,this.#a=e,this.#o=n,this.#u=!1}setInitialText(t,e=null){this.#i=t,this.data=t,this.#o=null,this.#a=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#a=null,this.#o=null,this.#n=null,this.#r=!1,this.#u=!1}};class zg{#t;#e=!1;#r=null;#n;#i;#a;#s;#o=null;#u;#l=null;#f;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:s=null,onPinchEnd:l=null,signal:o}){this.#t=t,this.#r=n,this.#n=e,this.#i=i,this.#a=s,this.#s=l,this.#f=new AbortController,this.#u=AbortSignal.any([o,this.#f.signal]),t.addEventListener("touchstart",this.#d.bind(this),{passive:!1,signal:this.#u})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/lu.pixelRatio}#d(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const i=this.#o=new AbortController,s=AbortSignal.any([this.#u,i.signal]),l=this.#t,o={capture:!0,signal:s,passive:!1},c=h=>{h.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",h=>{h.pointerType==="touch"&&(Mi(h),c(h))},o),l.addEventListener("pointerup",c,o),l.addEventListener("pointercancel",c,o);return}if(!this.#h){this.#h=new AbortController;const i=AbortSignal.any([this.#u,this.#h.signal]),s=this.#t,l={signal:i,capture:!1,passive:!1};s.addEventListener("touchmove",this.#g.bind(this),l);const o=this.#m.bind(this);s.addEventListener("touchend",o,l),s.addEventListener("touchcancel",o,l),l.capture=!0,s.addEventListener("pointerdown",Mi,l),s.addEventListener("pointermove",Mi,l),s.addEventListener("pointercancel",Mi,l),s.addEventListener("pointerup",Mi,l),this.#i?.()}if(Mi(t),t.touches.length!==2||this.#r?.()){this.#l=null;return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#g(t){if(!this.#l||t.touches.length!==2)return;Mi(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:i,screenY:s}=e,{screenX:l,screenY:o}=n,c=this.#l,{touch0X:h,touch0Y:f,touch1X:p,touch1Y:y}=c,m=p-h,w=y-f,b=l-i,_=o-s,v=Math.hypot(b,_)||1,A=Math.hypot(m,w)||1;if(!this.#e&&Math.abs(A-v)<=zg.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=s,c.touch1X=l,c.touch1Y=o,!this.#e){this.#e=!0;return}const C=[(i+l)/2,(s+o)/2];this.#a?.(C,A,v)}#m(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#l&&(Mi(t),this.#l=null,this.#e=!1))}destroy(){this.#f?.abort(),this.#f=null,this.#o?.abort(),this.#o=null}}class mn{#t=null;#e=null;#r=null;#n=null;#i=null;#a=!1;#s=null;#o="";#u=null;#l=null;#f=null;#h=null;#d=null;#g="";#m=!1;#c=null;#p=!1;#y=!1;#b=!1;#v=null;#S=0;#A=0;#w=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#x=!1;#E=mn._zIndex++;static _borderLineWidth=-1;static _colorManager=new x2;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=mn.prototype._resizeWithKeyboard,e=Nc.TRANSLATE_SMALL,n=Nc.TRANSLATE_BIG;return Nn(this,"_resizerKeyboardManager",new yp([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],mn.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:s,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[s,l];const[o,c]=this.parentDimensions;this.x=t.x/o,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}updatePageIndex(t){this.pageIndex=t}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Nn(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new sO({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(mn._l10n??=t,mn._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),mn._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);mn._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Cr("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#x}set _isDraggable(t){this.#x=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#F(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[s,l]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/s,this.y=(e+i)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,i]=this.parentDimensions;this.setAt(t*n,e*i,this.width*n,this.height*i),this._onTranslated()}#R([t,e],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#R(this.parentDimensions,t,e)}translateInPage(t,e){this.#c||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#c||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[i,s]}=this;if(this.x+=t/i,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:o}=this;const[c,h]=this.getBaseTranslation();l+=c,o+=h;const{style:f}=n;f.left=`${(100*l).toFixed(2)}%`,f.top=`${(100*o).toFixed(2)}%`,this._onTranslating(l,o),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#c&&(this.#c[0]!==this.x||this.#c[1]!==this.y)}get _hasBeenResized(){return!!this.#c&&(this.#c[2]!==this.width||this.#c[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=mn,i=n/t,s=n/e;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,i]}=this;let{x:s,y:l,width:o,height:c}=this;if(o*=n,c*=i,s*=n,l*=i,this._mustFixPosition)switch(t){case 0:s=Ks(s,0,n-o),l=Ks(l,0,i-c);break;case 90:s=Ks(s,0,n-c),l=Ks(l,o,i);break;case 180:s=Ks(s,o,n),l=Ks(l,c,i);break;case 270:s=Ks(s,c,n),l=Ks(l,0,i-o);break}this.x=s/=n,this.y=l/=i;const[h,f]=this.getBaseTranslation();s+=h,l+=f,e.left=`${(100*s).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#N(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return mn.#N(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return mn.#N(t,e,360-this.parentRotation)}#k(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#B(){if(this.#u)return;this.#u=document.createElement("div"),this.#u.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const i=document.createElement("div");this.#u.append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",this.#O.bind(this,n),{signal:e}),i.addEventListener("contextmenu",Vo,{signal:e}),i.tabIndex=-1}this.div.prepend(this.#u)}#O(t,e){e.preventDefault();const{isMac:n}=ws.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#r?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const s=new AbortController,l=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#M.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",Mi,{passive:!1,signal:l}),window.addEventListener("contextmenu",Vo,{signal:l}),this.#f={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const o=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const h=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#r?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=c,this.#I()};window.addEventListener("pointerup",h,{signal:l}),window.addEventListener("blur",h,{signal:l})}#P(t,e,n,i){this.width=n,this.height=i,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#I(){if(!this.#f)return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:i}=this.#f;this.#f=null;const s=this.x,l=this.y,o=this.width,c=this.height;s===t&&l===e&&o===n&&c===i||this.addCommands({cmd:this.#P.bind(this,s,l,o,c),undo:this.#P.bind(this,t,e,n,i),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#M(t,e){const[n,i]=this.parentDimensions,s=this.x,l=this.y,o=this.width,c=this.height,h=mn.MIN_SIZE/n,f=mn.MIN_SIZE/i,p=this.#k(this.rotation),y=(it,st)=>[p[0]*it+p[2]*st,p[1]*it+p[3]*st],m=this.#k(360-this.rotation),w=(it,st)=>[m[0]*it+m[2]*st,m[1]*it+m[3]*st];let b,_,v=!1,A=!1;switch(t){case"topLeft":v=!0,b=(it,st)=>[0,0],_=(it,st)=>[it,st];break;case"topMiddle":b=(it,st)=>[it/2,0],_=(it,st)=>[it/2,st];break;case"topRight":v=!0,b=(it,st)=>[it,0],_=(it,st)=>[0,st];break;case"middleRight":A=!0,b=(it,st)=>[it,st/2],_=(it,st)=>[0,st/2];break;case"bottomRight":v=!0,b=(it,st)=>[it,st],_=(it,st)=>[0,0];break;case"bottomMiddle":b=(it,st)=>[it/2,st],_=(it,st)=>[it/2,0];break;case"bottomLeft":v=!0,b=(it,st)=>[0,st],_=(it,st)=>[it,0];break;case"middleLeft":A=!0,b=(it,st)=>[0,st/2],_=(it,st)=>[it,st/2];break}const C=b(o,c),S=_(o,c);let O=y(...S);const q=mn._round(s+O[0]),H=mn._round(l+O[1]);let Q=1,I=1,dt,nt;if(e.fromKeyboard)({deltaX:dt,deltaY:nt}=e);else{const{screenX:it,screenY:st}=e,[vt,wt]=this.#l;[dt,nt]=this.screenToPageTranslation(it-vt,st-wt),this.#l[0]=it,this.#l[1]=st}if([dt,nt]=w(dt/n,nt/i),v){const it=Math.hypot(o,c);Q=I=Math.max(Math.min(Math.hypot(S[0]-C[0]-dt,S[1]-C[1]-nt)/it,1/o,1/c),h/o,f/c)}else A?Q=Ks(Math.abs(S[0]-C[0]-dt),h,1)/o:I=Ks(Math.abs(S[1]-C[1]-nt),f,1)/c;const B=mn._round(o*Q),Z=mn._round(c*I);O=y(..._(B,Z));const D=q-O[0],mt=H-O[1];this.#c||=[this.x,this.y,this.width,this.height],this.width=B,this.height=Z,this.x=D,this.y=mt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#r?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new Kd(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#r?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#r||(nu.initialize(mn._l10n),this.#r=new nu(this),this.#t&&(this.#r.data=this.#t,this.#t=null)),this.#r}get altTextData(){return this.#r?.data}set altTextData(t){this.#r&&(this.#r.data=t)}get guessedAltText(){return this.#r?.guessedText}async setGuessedAltText(t){await this.#r?.setGuessedText(t)}serializeAltText(t){return this.#r?.serialize(t)}hasAltText(){return!!this.#r&&!this.#r.isEmpty()}hasAltTextData(){return this.#r?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.canAddComment?this.#n||=new vm(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#i){this._uiManager.isEditingMode()&&this.#i.classList.remove("hidden");return}this.hasComment&&(this.#i=this.#n.renderForStandalone(),this.div.append(this.#i))}}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#i=null}hideStandaloneCommentButton(){this.#i?.classList.add("hidden")}get comment(){if(!this.#n)return null;const{data:{richText:t,text:e,date:n,deleted:i}}=this.#n;return{text:e,richText:t,date:n,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new vm(this),typeof t=="object"&&t!==null?this.#n.restoreData(t):this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(this.#n||=new vm(this),this.#n.setInitialText(t,n),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new vm(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,i]=t.rect,[s]=this.pageDimensions,[l]=this.pageTranslation,o=l+s+1,c=i-100,h=o+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,c,h,i]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#a?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#z();const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),m4(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new zg({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#G.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#_.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#G(){this.#f={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#r?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(t,e,n){let s=.7*(n/e)+1-.7;if(s===1)return;const l=this.#k(this.rotation),o=(q,H)=>[l[0]*q+l[2]*H,l[1]*q+l[3]*H],[c,h]=this.parentDimensions,f=this.x,p=this.y,y=this.width,m=this.height,w=mn.MIN_SIZE/c,b=mn.MIN_SIZE/h;s=Math.max(Math.min(s,1/y,1/m),w/y,b/m);const _=mn._round(y*s),v=mn._round(m*s);if(_===y&&v===m)return;this.#c||=[f,p,y,m];const A=o(y/2,m/2),C=mn._round(f+A[0]),S=mn._round(p+A[1]),O=o(_/2,v/2);this.x=C-O[0],this.y=S-O[1],this.width=_,this.height=v,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#_(){this.#r?.toggle(!0),this.parent.togglePointerEvents(!0),this.#I()}pointerdown(t){const{isMac:e}=ws.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#j(t);return}this.#D(t)}#D(t){const{isMac:e}=ws.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#j(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,s=this._uiManager.combinedSignal(i),l={capture:!0,passive:!1,signal:s},o=h=>{i.abort(),this.#s=null,this.#m=!1,this._uiManager.endDragSession()||this.#D(h),n&&this._onStopDragging()};e&&(this.#S=t.clientX,this.#A=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",h=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:f,clientY:p,pointerId:y}=h;if(y!==this.#s){Mi(h);return}const[m,w]=this.screenToPageTranslation(f-this.#S,p-this.#A);this.#S=f,this.#A=p,this._uiManager.dragSelectedEditors(m,w)},l),window.addEventListener("touchmove",Mi,l),window.addEventListener("pointerdown",h=>{h.pointerType===this.#o&&(this.#C||h.isPrimary)&&o(h),Mi(h)},l));const c=h=>{if(!this.#s||this.#s===h.pointerId){o(h);return}Mi(h)};window.addEventListener("pointerup",c,{signal:s}),window.addEventListener("blur",c,{signal:s})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const i=this.parentScale,[s,l]=this.pageDimensions,[o,c]=this.pageTranslation,h=t/i,f=e/i,p=this.x*s,y=this.y*l,m=this.width*s,w=this.height*l;switch(n){case 0:return[p+h+o,l-y-f-w+c,p+h+m+o,l-y-f+c];case 90:return[p+f+o,l-y+h+c,p+f+w+o,l-y+h+m+c];case 180:return[p-h-m+o,l-y+f+c,p-h+o,l-y+f+w+c];case 270:return[p-f-w+o,l-y-h-m+c,p-f+o,l-y-h+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,s,l]=t,o=s-n,c=l-i;switch(this.rotation){case 0:return[n,e-l,o,c];case 90:return[n,e-i,c,o];case 180:return[s,e-i,o,c];case 270:return[s,e-l,c,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&mn._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:i,deleted:s,richText:l},uid:o,pageIndex:c,creationDate:h,modificationDate:f}=this;return{id:o,pageIndex:c,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:h,modificationDate:n||f,popupRef:!s,color:e,opacity:i}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:s,innerWidth:l}=window;return e<l&&i>0&&t<s&&n>0}#z(){if(this.#d||!this.div)return;this.#d=new AbortController;const t=this._uiManager.combinedSignal(this.#d);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#z()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});i.rotation=t.rotation,i.#t=t.accessibilityData,i._isCopy=t.isCopy||!1;const[s,l]=i.pageDimensions,[o,c,h,f]=i.getRectInCurrentCoords(t.rect,l);return i.x=o/s,i.y=c/l,i.width=h/s,i.height=f/l,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#d?.abort(),this.#d=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#F(),this.removeEditToolbar(),this.#w){for(const t of this.#w.values())clearTimeout(t);this.#w=null}this.parent=null,this.#C?.destroy(),this.#C=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#B(),this.#u.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,i,s,l]=this.getPDFRect();return[mn._round(n+(s-n)*t),mn._round(i+(l-i)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#f={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#u.children;if(!this.#e){this.#e=Array.from(e);const l=this.#K.bind(this),o=this.#W.bind(this),c=this._uiManager._signal;for(const h of this.#e){const f=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",l,{signal:c}),h.addEventListener("blur",o,{signal:c}),h.addEventListener("focus",this.#$.bind(this,f),{signal:c}),h.setAttribute("data-l10n-id",mn._l10nResizer[f])}}const n=this.#e[0];let i=0;for(const l of e){if(l===n)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(s!==i){if(s<i)for(let o=0;o<i-s;o++)this.#u.append(this.#u.firstElementChild);else if(s>i)for(let o=0;o<s-i;o++)this.#u.firstElementChild.before(this.#u.lastElementChild);let l=0;for(const o of e){const h=this.#e[l++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",mn._l10nResizer[h])}}this.#q(0),this.#b=!0,this.#u.firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#K(t){mn._resizerKeyboardManager.exec(this,t)}#W(t){this.#b&&t.relatedTarget?.parentNode!==this.#u&&this.#F()}#$(t){this.#g=this.#b?t:""}#q(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#b&&this.#M(this.#g,{deltaX:t,deltaY:e,fromKeyboard:!0})}#F(){this.#b=!1,this.#q(-1),this.#I()}_stopResizingWithKeyboard(){this.#F(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#r?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#u?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#r?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#w||=new Map;const{action:n}=t;let i=this.#w.get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),this.#w.delete(n),this.#w.size===0&&(this.#w=null)},mn._telemetryTimeout),this.#w.set(n,i);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class sO extends mn{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const v_=3285377520,Uo=4294901760,$l=65535;class g4{constructor(t){this.h1=t?t&4294967295:v_,this.h2=t?t&4294967295:v_}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let b=0,_=t.length;b<_;b++){const v=t.charCodeAt(b);v<=255?e[n++]=v:(e[n++]=v>>>8,e[n++]=v&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,s=n-i*4,l=new Uint32Array(e.buffer,0,i);let o=0,c=0,h=this.h1,f=this.h2;const p=3432918353,y=461845907,m=p&$l,w=y&$l;for(let b=0;b<i;b++)b&1?(o=l[b],o=o*p&Uo|o*m&$l,o=o<<15|o>>>17,o=o*y&Uo|o*w&$l,h^=o,h=h<<13|h>>>19,h=h*5+3864292196):(c=l[b],c=c*p&Uo|c*m&$l,c=c<<15|c>>>17,c=c*y&Uo|c*w&$l,f^=c,f=f<<13|f>>>19,f=f*5+3864292196);switch(o=0,s){case 3:o^=e[i*4+2]<<16;case 2:o^=e[i*4+1]<<8;case 1:o^=e[i*4],o=o*p&Uo|o*m&$l,o=o<<15|o>>>17,o=o*y&Uo|o*w&$l,i&1?h^=o:f^=o}this.h1=h,this.h2=f}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Uo|t*36045&$l,e=e*4283543511&Uo|((e<<16|t>>>16)*2950163797&Uo)>>>16,t^=e>>>1,t=t*444984403&Uo|t*60499&$l,e=e*3301882366&Uo|((e<<16|t>>>16)*3120437893&Uo)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const xb=Object.freeze({map:null,hash:"",transfer:void 0});class _2{#t=!1;#e=null;#r=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=this.#n.get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return this.#n.get(t)}remove(t){const e=this.#n.get(t);if(e!==void 0&&(e instanceof mn&&this.#r.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of this.#n.values())if(n instanceof mn)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=this.#n.get(t);let i=!1;if(n!==void 0)for(const[s,l]of Object.entries(e))n[s]!==l&&(i=!0,n[s]=l);else i=!0,this.#n.set(t,e);i&&this.#i(),e instanceof mn&&((this.#r||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#i(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new y4(this)}get serializable(){if(this.#n.size===0)return xb;const t=new Map,e=new g4,n=[],i=Object.create(null);let s=!1;for(const[l,o]of this.#n){const c=o instanceof mn?o.serialize(!1,i):o;o.page&&(o.pageIndex=o.page._pageIndex,delete o.page),c&&(t.set(l,c),e.update(`${l}:${JSON.stringify(c)}`),s||=!!c.bitmap)}if(s)for(const l of t.values())l.bitmap&&n.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:xb}get editorStats(){let t=null;const e=new Map;let n=0,i=0;for(const s of this.#n.values()){if(!(s instanceof mn)){s.popup&&(s.popup.deleted?i+=1:n+=1);continue}s.isCommentDeleted?i+=1:s.hasEditedComment&&(n+=1);const l=s.telemetryFinalData;if(!l)continue;const{type:o}=l;e.has(o)||e.set(o,Object.getPrototypeOf(s).constructor),t||=Object.create(null);const c=t[o]||=new Map;for(const[h,f]of Object.entries(l)){if(h==="type")continue;let p=c.get(h);p||(p=new Map,c.set(h,p));const y=p.get(f)??0;p.set(f,y+1)}}if((i>0||n>0)&&(t||=Object.create(null),t.comments={deleted:i,edited:n}),!t)return null;for(const[s,l]of e)t[s]=l.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const n=this.#r?.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#r?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#r)for(const e of this.#r.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class y4 extends _2{#t;constructor(t){super();const{map:e,hash:n,transfer:i}=t.serializable,s=structuredClone(e,i?{transfer:i}:null);this.#t={map:s,hash:n,transfer:i}}get print(){Cr("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Nn(this,"modifiedIds",{ids:new Set,hash:""})}}class aO{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||this.#t.has(t.loadedName))){if(Er(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:l}=t,o=new FontFace(i,s,l);this.addNativeFontFace(o);try{await o.load(),this.#t.add(i),n?.(t)}catch{Tn(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Cr("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw Tn(`Failed to load font '${n.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Nn(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Nn(this,"isSyncFontLoadingSupported",Ta||ws.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Er(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const s=n.shift();setTimeout(s.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:e,callback:t};return n.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Nn(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(S,O){return S.charCodeAt(O)<<24|S.charCodeAt(O+1)<<16|S.charCodeAt(O+2)<<8|S.charCodeAt(O+3)&255}function i(S,O,q,H){const Q=S.substring(0,O),I=S.substring(O+q);return Q+H+I}let s,l;const o=this._document.createElement("canvas");o.width=1,o.height=1;const c=o.getContext("2d");let h=0;function f(S,O){if(++h>30){Tn("Load test font never loaded."),O();return}if(c.font="30px "+S,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){O();return}setTimeout(f.bind(null,S,O))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=i(y,976,p.length,p);const w=16,b=1482184792;let _=n(y,w);for(s=0,l=p.length-3;s<l;s+=4)_=_-b+n(p,s)|0;s<p.length&&(_=_-b+n(p+"XXX",s)|0),y=i(y,w,4,zL(_));const v=`url(data:font/opentype;base64,${btoa(y)});`,A=`@font-face {font-family:"${p}";src:${v}}`;this.insertRule(A);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const S of[t.loadedName,p]){const O=this._document.createElement("span");O.textContent="Hi",O.style.fontFamily=S,C.append(O)}this._document.body.append(C),f(p,()=>{C.remove(),e.complete()})}}class oO{#t;constructor(t,e=null,n,i){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let i;try{i=t.get(n)}catch(l){Tn(`getPathGenerator - ignoring character: "${l}".`)}const s=p4(i?.path);return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=s}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}set disableFontFace(t){Nn(this,"disableFontFace",!!t)}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}set bbox(t){Nn(this,"bbox",t)}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class mf{#t;#e;#r;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,n={};let i=0;for(const h of mf.strings){const f=e.encode(t[h]);n[h]=f,i+=4+f.length}const s=new ArrayBuffer(i),l=new Uint8Array(s),o=new DataView(s);let c=0;for(const h of mf.strings){const f=n[h],p=f.length;o.setUint32(c,p),l.set(f,c+4),c+=4+p}return Er(c===s.byteLength,"CssFontInfo.write: Buffer overflow"),s}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#r=new TextDecoder}#n(t){Er(t<mf.strings.length,"Invalid string index");let e=0;for(let i=0;i<t;i++)e+=this.#e.getUint32(e)+4;const n=this.#e.getUint32(e);return this.#r.decode(new Uint8Array(this.#t,e+4,n))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class gf{#t;#e;#r;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,n={};let i=0;for(const y of gf.strings){const m=e.encode(t[y]);n[y]=m,i+=4+m.length}i+=4;let s,l,o=1+i;t.style&&(s=e.encode(t.style.style),l=e.encode(t.style.weight),o+=4+s.length+4+l.length);const c=new ArrayBuffer(o),h=new Uint8Array(c),f=new DataView(c);let p=0;f.setUint8(p++,t.guessFallback?1:0),f.setUint32(p,0),p+=4,i=0;for(const y of gf.strings){const m=n[y],w=m.length;i+=4+w,f.setUint32(p,w),h.set(m,p+4),p+=4+w}return f.setUint32(p-i-4,i),t.style&&(f.setUint32(p,s.length),h.set(s,p+4),p+=4+s.length,f.setUint32(p,l.length),h.set(l,p+4),p+=4+l.length),Er(p<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(p)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#r=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){Er(t<gf.strings.length,"Invalid string index");let e=5;for(let i=0;i<t;i++)e+=this.#e.getUint32(e)+4;const n=this.#e.getUint32(e);return this.#r.decode(new Uint8Array(this.#t,e+4,n))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),n=this.#r.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const i=this.#e.getUint32(t),s=this.#r.decode(new Uint8Array(this.#t,t+4,i));return{style:n,weight:s}}}class zr{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#r=this.#e+1+8;static#n=this.#r+1+48;static#i=this.#n+1+6;#a;#s;#o;constructor({data:t,extra:e}){this.#a=t,this.#s=new TextDecoder,this.#o=new DataView(this.#a),e&&Object.assign(this,e)}#u(t){Er(t<zr.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,i=this.#o.getUint8(e)>>n&3;return i===0?void 0:i===2}get black(){return this.#u(0)}get bold(){return this.#u(1)}get disableFontFace(){return this.#u(2)}get fontExtraProperties(){return this.#u(3)}get isInvalidPDFjsFont(){return this.#u(4)}get isType3Font(){return this.#u(5)}get italic(){return this.#u(6)}get missingFile(){return this.#u(7)}get remeasure(){return this.#u(8)}get vertical(){return this.#u(9)}#l(t){return Er(t<zr.numbers.length,"Invalid number index"),this.#o.getFloat64(zr.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=zr.#e;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let i=0;i<4;i++)n.push(this.#o.getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=zr.#r;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let i=0;i<6;i++)n.push(this.#o.getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=zr.#n;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let i=0;i<3;i++)n.push(this.#o.getInt16(t,!0)),t+=2;return n}#f(t){Er(t<zr.strings.length,"Invalid string index");let e=zr.#i+4;for(let s=0;s<t;s++)e+=this.#o.getUint32(e)+4;const n=this.#o.getUint32(e),i=new Uint8Array(n);return i.set(new Uint8Array(this.#a,e+4,n)),this.#s.decode(i)}get fallbackName(){return this.#f(0)}get loadedName(){return this.#f(1)}get mimetype(){return this.#f(2)}get name(){return this.#f(3)}get data(){let t=zr.#i;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);if(s!==0)return new Uint8Array(this.#a,t+4,s)}clearData(){let t=zr.#i;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);new Uint8Array(this.#a,t+4,s).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=zr.#i;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const i=this.#o.getUint32(t);if(i===0)return null;const s=new Uint8Array(i);return s.set(new Uint8Array(this.#a,t+4,i)),new mf(s.buffer)}get systemFontInfo(){let t=zr.#i;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);if(n===0)return null;const i=new Uint8Array(n);return i.set(new Uint8Array(this.#a,t+4,n)),new gf(i.buffer)}static write(t){const e=t.systemFontInfo?gf.write(t.systemFontInfo):null,n=t.cssFontInfo?mf.write(t.cssFontInfo):null,i=new TextEncoder,s={};let l=0;for(const b of zr.strings)s[b]=i.encode(t[b]),l+=4+s[b].length;const o=zr.#i+4+l+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),c=new ArrayBuffer(o),h=new Uint8Array(c),f=new DataView(c);let p=0;const y=zr.bools.length;let m=0,w=0;for(let b=0;b<y;b++){const _=t[zr.bools[b]];m|=(_===void 0?0:_?2:1)<<w,w+=2,(w===8||b===y-1)&&(f.setUint8(p++,m),m=0,w=0)}Er(p===zr.#t,"FontInfo.write: Boolean properties offset mismatch");for(const b of zr.numbers)f.setFloat64(p,t[b]),p+=8;if(Er(p===zr.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){f.setUint8(p++,4);for(const b of t.bbox)f.setInt16(p,b,!0),p+=2}else f.setUint8(p++,0),p+=8;if(Er(p===zr.#r,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){f.setUint8(p++,6);for(const b of t.fontMatrix)f.setFloat64(p,b,!0),p+=8}else f.setUint8(p++,0),p+=48;if(Er(p===zr.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){f.setUint8(p++,1);for(const b of t.defaultVMetrics)f.setInt16(p,b,!0),p+=2}else f.setUint8(p++,0),p+=6;Er(p===zr.#i,"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(zr.#i,0),p+=4;for(const b of zr.strings){const _=s[b],v=_.length;f.setUint32(p,v),h.set(_,p+4),p+=4+v}if(f.setUint32(zr.#i,p-zr.#i-4),!e)f.setUint32(p,0),p+=4;else{const b=e.byteLength;f.setUint32(p,b),Er(p+4+b<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),h.set(new Uint8Array(e),p+4),p+=4+b}if(!n)f.setUint32(p,0),p+=4;else{const b=n.byteLength;f.setUint32(p,b),Er(p+4+b<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),h.set(new Uint8Array(n),p+4),p+=4+b}return t.data===void 0?(f.setUint32(p,0),p+=4):(f.setUint32(p,t.data.length),h.set(t.data,p+4),p+=4+t.data.length),Er(p<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(p)}}class Ls{static#t=0;static#e=1;static#r=2;static#n=3;static#i=4;static#a=8;static#s=12;static#o=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,n=null,i=[],s=[],l=[],o=[],c=null,h=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,n=t[2],l=t[3],e===1?i.push(...t[4],...t[5]):i.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,c=t[1],i=t[2],s=t[3],o=t[4]||[],n=t[6],h=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const f=Math.floor(i.length/2),p=Math.floor(s.length/3),y=l.length,m=o.length;let w=0;for(const O of o)w+=1,w=Math.ceil(w/4)*4,w+=4+O.coords.length*4,w+=4+O.colors.length*4,O.verticesPerRow!==void 0&&(w+=4);const b=20+f*8+p*3+y*8+(n?16:0)+(h?3:0)+w,_=new ArrayBuffer(b),v=new DataView(_),A=new Uint8Array(_);v.setUint8(Ls.#t,e),v.setUint8(Ls.#e,n?1:0),v.setUint8(Ls.#r,h?1:0),v.setUint8(Ls.#n,c),v.setUint32(Ls.#i,f,!0),v.setUint32(Ls.#a,p,!0),v.setUint32(Ls.#s,y,!0),v.setUint32(Ls.#o,m,!0);let C=20;new Float32Array(_,C,f*2).set(i),C+=f*8,A.set(s,C),C+=p*3;for(const[O,q]of l)v.setFloat32(C,O,!0),C+=4,v.setUint32(C,parseInt(q.slice(1),16),!0),C+=4;if(n)for(const O of n)v.setFloat32(C,O,!0),C+=4;h&&(A.set(h,C),C+=3);for(let O=0;O<o.length;O++){const q=o[O];v.setUint8(C,q.type),C+=1,C=Math.ceil(C/4)*4,v.setUint32(C,q.coords.length,!0),C+=4,new Int32Array(_,C,q.coords.length).set(q.coords),C+=q.coords.length*4,v.setUint32(C,q.colors.length,!0),C+=4,new Int32Array(_,C,q.colors.length).set(q.colors),C+=q.colors.length*4,q.verticesPerRow!==void 0&&(v.setUint32(C,q.verticesPerRow,!0),C+=4)}return _}getIR(){const t=this.view,e=this.data[Ls.#t],n=!!this.data[Ls.#e],i=!!this.data[Ls.#r],s=t.getUint32(Ls.#i,!0),l=t.getUint32(Ls.#a,!0),o=t.getUint32(Ls.#s,!0),c=t.getUint32(Ls.#o,!0);let h=20;const f=new Float32Array(this.buffer,h,s*2);h+=s*8;const p=new Uint8Array(this.buffer,h,l*3);h+=l*3;const y=[];for(let _=0;_<o;++_){const v=t.getFloat32(h,!0);h+=4;const A=t.getUint32(h,!0);h+=4,y.push([v,`#${A.toString(16).padStart(6,"0")}`])}let m=null;if(n){m=[];for(let _=0;_<4;++_)m.push(t.getFloat32(h,!0)),h+=4}let w=null;i&&(w=new Uint8Array(this.buffer,h,3),h+=3);const b=[];for(let _=0;_<c;++_){const v=t.getUint8(h);h+=1,h=Math.ceil(h/4)*4;const A=t.getUint32(h,!0);h+=4;const C=new Int32Array(this.buffer,h,A);h+=A*4;const S=t.getUint32(h,!0);h+=4;const O=new Int32Array(this.buffer,h,S);h+=S*4;const q={type:v,coords:C,colors:O};v===gb.LATTICE&&(q.verticesPerRow=t.getUint32(h,!0),h+=4),b.push(q)}if(e===1)return["RadialAxial","axial",m,y,Array.from(f.slice(0,2)),Array.from(f.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",m,y,[f[0],f[1]],[f[3],f[4]],f[2],f[5]];if(e===3){const _=this.data[Ls.#n];let v=null;if(f.length>0){let A=f[0],C=f[0],S=f[1],O=f[1];for(let q=0;q<f.length;q+=2){const H=f[q],Q=f[q+1];A=A>H?H:A,S=S>Q?Q:S,C=C<H?H:C,O=O<Q?Q:O}v=[A,S,C,O]}return["Mesh",_,f,p,b,v,m,w]}throw new Error(`Unsupported pattern kind: ${e}`)}}class lO{static write(t){let e,n;return ws.isFloat16ArraySupported?(n=new ArrayBuffer(t.length*2),e=new Float16Array(n)):(n=new ArrayBuffer(t.length*4),e=new Float32Array(n)),e.set(t),n}#t;constructor(t){this.#t=t}get path(){return ws.isFloat16ArraySupported?new Float16Array(this.#t):new Float32Array(this.#t)}}function uO(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(Ta)return r;const t=URL.parse(r,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function cO(r){if(Ta&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return jg(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r?.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function bm(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const _b=r=>typeof r=="object"&&Number.isInteger(r?.num)&&r.num>=0&&Number.isInteger(r?.gen)&&r.gen>=0,hO=r=>typeof r=="object"&&typeof r?.name=="string",fO=WL.bind(null,_b,hO);class dO{#t=new Map;#e=Promise.resolve();postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[i]of this.#t)i.call(this,n)})}addEventListener(t,e,n=null){let i=null;if(n?.signal instanceof AbortSignal){const{signal:s}=n;if(s.aborted){Tn("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);i=()=>s.removeEventListener("abort",l),s.addEventListener("abort",l)}this.#t.set(e,i)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const wm={DATA:1,ERROR:2},is={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function b_(){}function Ya(r){if(r instanceof Tc||r instanceof yb||r instanceof h_||r instanceof vg||r instanceof D1)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||Cr('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new Tc(r.message);case"InvalidPDFException":return new yb(r.message);case"PasswordException":return new h_(r.message,r.code);case"ResponseException":return new vg(r.message,r.status,r.missing);case"UnknownErrorException":return new D1(r.message,r.details)}return new D1(r.message,r.toString())}class Hd{#t=new AbortController;constructor(t,e,n){this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const n=t.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===wm.DATA)i.resolve(t.data);else if(t.callback===wm.ERROR)i.reject(Ya(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,i=t.sourceName,s=this.comObj;Promise.try(e,t.data).then(function(l){s.postMessage({sourceName:n,targetName:i,callback:wm.DATA,callbackId:t.callbackId,data:l})},function(l){s.postMessage({sourceName:n,targetName:i,callback:wm.ERROR,callbackId:t.callbackId,reason:Ya(l)})});return}if(t.streamId){this.#r(t);return}e(t.data)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(l){s.reject(l)}return s.promise}sendWithStream(t,e,n,i){const s=this.streamId++,l=this.sourceName,o=this.targetName,c=this.comObj;return new ReadableStream({start:h=>{const f=Promise.withResolvers();return this.streamControllers[s]={controller:h,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:l,targetName:o,action:t,streamId:s,data:e,desiredSize:h.desiredSize},i),f.promise},pull:h=>{const f=Promise.withResolvers();return this.streamControllers[s].pullCall=f,c.postMessage({sourceName:l,targetName:o,stream:is.PULL,streamId:s,desiredSize:h.desiredSize}),f.promise},cancel:h=>{Er(h instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[s].cancelCall=f,this.streamControllers[s].isClosed=!0,c.postMessage({sourceName:l,targetName:o,stream:is.CANCEL,streamId:s,reason:Ya(h)}),f.promise}},n)}#r(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,s=this.comObj,l=this,o=this.actionHandler[t.action],c={enqueue(h,f=1,p){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=f,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:i,stream:is.ENQUEUE,streamId:e,chunk:h},p)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:is.CLOSE,streamId:e}),delete l.streamSinks[e])},error(h){Er(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:is.ERROR,streamId:e,reason:Ya(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(o,t.data,c).then(function(){s.postMessage({sourceName:n,targetName:i,stream:is.START_COMPLETE,streamId:e,success:!0})},function(h){s.postMessage({sourceName:n,targetName:i,stream:is.START_COMPLETE,streamId:e,reason:Ya(h)})})}#n(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,s=this.comObj,l=this.streamControllers[e],o=this.streamSinks[e];switch(t.stream){case is.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(Ya(t.reason));break;case is.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(Ya(t.reason));break;case is.PULL:if(!o){s.postMessage({sourceName:n,targetName:i,stream:is.PULL_COMPLETE,streamId:e,success:!0});break}o.desiredSize<=0&&t.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=t.desiredSize,Promise.try(o.onPull||b_).then(function(){s.postMessage({sourceName:n,targetName:i,stream:is.PULL_COMPLETE,streamId:e,success:!0})},function(h){s.postMessage({sourceName:n,targetName:i,stream:is.PULL_COMPLETE,streamId:e,reason:Ya(h)})});break;case is.ENQUEUE:if(Er(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case is.CLOSE:if(Er(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#i(l,e);break;case is.ERROR:Er(l,"error should have stream controller"),l.controller.error(Ya(t.reason)),this.#i(l,e);break;case is.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(Ya(t.reason)),this.#i(l,e);break;case is.CANCEL:if(!o)break;const c=Ya(t.reason);Promise.try(o.onCancel||b_,c).then(function(){s.postMessage({sourceName:n,targetName:i,stream:is.CANCEL_COMPLETE,streamId:e,success:!0})},function(h){s.postMessage({sourceName:n,targetName:i,stream:is.CANCEL_COMPLETE,streamId:e,reason:Ya(h)})}),o.sinkCapability.reject(c),o.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#i(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class v4{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Cr("Abstract method `_createCanvas` called.")}}class pO extends v4{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class b4{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Cr("Abstract method `_fetch` called.")}}class w_ extends b4{async _fetch(t){const e=await pp(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):jg(e)}}class w4{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,s){return"none"}destroy(t=!1){}}class mO extends w4{#t;#e;#r;#n;#i;#a;#s=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#i=e}get#o(){return this.#e||=new Map}get#u(){return this.#a||=new Map}get#l(){if(!this.#r){const t=this.#i.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const n=this.#i.createElementNS(Bu,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#r=this.#i.createElementNS(Bu,"defs"),t.append(n),n.append(this.#r),this.#i.body.append(t)}return this.#r}#f(t){if(t.length===1){const c=t[0],h=new Array(256);for(let p=0;p<256;p++)h[p]=c[p]/255;const f=h.join(",");return[f,f,f]}const[e,n,i]=t,s=new Array(256),l=new Array(256),o=new Array(256);for(let c=0;c<256;c++)s[c]=e[c]/255,l[c]=n[c]/255,o[c]=i[c]/255;return[s.join(","),l.join(","),o.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#i.URL;e!==this.#i.baseURI&&(Ug(e)?Tn('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=c4(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[n,i,s]=this.#f(t),l=t.length===1?n:`${n}${i}${s}`;if(e=this.#o.get(l),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_transfer_map_${this.#s++}`,c=this.#h(o);this.#o.set(t,c),this.#o.set(l,c);const h=this.#m(o);return this.#p(n,i,s,h),c}addHCMFilter(t,e){const n=`${t}-${e}`,i="base";let s=this.#u.get(i);if(s?.key===n||(s?(s.filter?.remove(),s.key=n,s.url="none",s.filter=null):(s={key:n,url:"none",filter:null},this.#u.set(i,s)),!t||!e))return s.url;const l=this.#b(t);t=Ge.makeHexColor(...l);const o=this.#b(e);if(e=Ge.makeHexColor(...o),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return s.url;const c=new Array(256);for(let m=0;m<=255;m++){const w=m/255;c[m]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const h=c.join(","),f=`g_${this.#n}_hcm_filter`,p=s.filter=this.#m(f);this.#p(h,h,h,p),this.#g(p);const y=(m,w)=>{const b=l[m]/255,_=o[m]/255,v=new Array(w+1);for(let A=0;A<=w;A++)v[A]=b+A/w*(_-b);return v.join(",")};return this.#p(y(0,5),y(1,5),y(2,5),p),s.url=this.#h(f),s.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[n]=this.#f([t]),i=`alpha_${n}`;if(e=this.#o.get(i),e)return this.#o.set(t,e),e;const s=`g_${this.#n}_alpha_map_${this.#s++}`,l=this.#h(s);this.#o.set(t,l),this.#o.set(i,l);const o=this.#m(s);return this.#y(n,o),l}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let n,i;if(t?([n]=this.#f([t]),i=`luminosity_${n}`):i="luminosity",e=this.#o.get(i),e)return this.#o.set(t,e),e;const s=`g_${this.#n}_luminosity_map_${this.#s++}`,l=this.#h(s);this.#o.set(t,l),this.#o.set(i,l);const o=this.#m(s);return this.#d(o),t&&this.#y(n,o),l}addHighlightHCMFilter(t,e,n,i,s){const l=`${e}-${n}-${i}-${s}`;let o=this.#u.get(t);if(o?.key===l||(o?(o.filter?.remove(),o.key=l,o.url="none",o.filter=null):(o={key:l,url:"none",filter:null},this.#u.set(t,o)),!e||!n))return o.url;const[c,h]=[e,n].map(this.#b.bind(this));let f=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[y,m]=[i,s].map(this.#b.bind(this));p<f&&([f,p,y,m]=[p,f,m,y]),this.#l.style.color="";const w=(v,A,C)=>{const S=new Array(256),O=(p-f)/C,q=v/255,H=(A-v)/(255*C);let Q=0;for(let I=0;I<=C;I++){const dt=Math.round(f+I*O),nt=q+I*H;for(let B=Q;B<=dt;B++)S[B]=nt;Q=dt+1}for(let I=Q;I<256;I++)S[I]=S[Q-1];return S.join(",")},b=`g_${this.#n}_hcm_${t}_filter`,_=o.filter=this.#m(b);return this.#g(_),this.#p(w(y[0],m[0],5),w(y[1],m[1],5),w(y[2],m[2],5),_),o.url=this.#h(b),o.url}destroy(t=!1){t&&this.#a?.size||(this.#r?.parentNode.parentNode.remove(),this.#r=null,this.#e?.clear(),this.#e=null,this.#a?.clear(),this.#a=null,this.#s=0)}#d(t){const e=this.#i.createElementNS(Bu,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#i.createElementNS(Bu,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#m(t){const e=this.#i.createElementNS(Bu,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#c(t,e,n){const i=this.#i.createElementNS(Bu,e);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),t.append(i)}#p(t,e,n,i){const s=this.#i.createElementNS(Bu,"feComponentTransfer");i.append(s),this.#c(s,"feFuncR",t),this.#c(s,"feFuncG",e),this.#c(s,"feFuncB",n)}#y(t,e){const n=this.#i.createElementNS(Bu,"feComponentTransfer");e.append(n),this.#c(n,"feFuncA",t)}#b(t){return this.#l.style.color=t,gp(getComputedStyle(this.#l).getPropertyValue("color"))}}class x4{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Cr("Abstract method `_fetch` called.")}}class x_ extends x4{async _fetch(t){const e=await pp(t,"arraybuffer");return new Uint8Array(e)}}class _4{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Cr("Abstract method `_fetch` called.")}}class __ extends _4{async _fetch(t){const e=await pp(t,"arraybuffer");return new Uint8Array(e)}}Ta&&Tn("Please use the `legacy` build in Node.js environments.");async function A2(r){const e=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(e)}class gO extends w4{}class yO extends v4{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class vO extends b4{async _fetch(t){return A2(t)}}class bO extends x4{async _fetch(t){return A2(t)}}class wO extends _4{async _fetch(t){return A2(t)}}const Qh="__forcedDependency",{floor:A_,ceil:S_}=Math;function xm(r,t,e,n,i,s){r[t*4+0]=Math.min(r[t*4+0],e),r[t*4+1]=Math.min(r[t*4+1],n),r[t*4+2]=Math.max(r[t*4+2],i),r[t*4+3]=Math.max(r[t*4+3],s)}const Ab=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class xO{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===Ab}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const _m=(r,t)=>{if(!r)return;let e=r.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},r.set(t,e)),e};class _O{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[Qh]:[]};#r=new Map;#n=[];#i=[];#a=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#u=-1;#l=new Set;#f=new Map;#h=new Map;#d;#g;#m;#c;#p;constructor(t,e,n=!1){this.#d=t.width,this.#g=t.height,this.#y(e),n&&(this.#p=new Map)}growOperationsCount(t){t>=this.#c.length&&this.#y(t,this.#c)}#y(t,e){const n=new ArrayBuffer(t*4);this.#m=new Uint8ClampedArray(n),this.#c=new Uint32Array(n),e&&e.length>0?(this.#c.set(e),this.#c.fill(Ab,e.length)):this.#c.fill(Ab)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[Qh]:{__proto__:this.#e[Qh]}},this.#s={__proto__:this.#s},this.#n.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const n=this.#n.pop();return n!==void 0&&(_m(this.#p,t)?.dependencies.add(n),this.#c[t]=this.#c[n]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(_m(this.#p,t)?.dependencies.add(e),this.#c[t]=this.#c[e]),this}beginMarkedContent(t){return this.#i.push(t),this}endMarkedContent(t){const e=this.#i.pop();return e!==void 0&&(_m(this.#p,t)?.dependencies.add(e),this.#c[t]=this.#c[e]),this}pushBaseTransform(t){return this.#a.push(Ge.multiplyByDOMMatrix(this.#a.at(-1),t.getTransform())),this}popBaseTransform(){return this.#a.length>1&&this.#a.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#r.set(t,e),this}recordSimpleDataFromNamed(t,e,n){this.#t[t]=this.#r.get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Qh,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(Qh,t);return this}resetBBox(t){return this.#u!==t&&(this.#u=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,n,i,s,l){const o=Ge.multiplyByDOMMatrix(this.#a.at(-1),e.getTransform()),c=[1/0,1/0,-1/0,-1/0];Ge.axialAlignedBoundingBox([n,s,i,l],o,c);const h=Ge.intersect(this.#s,c);return h?(this.#s[0]=h[0],this.#s[1]=h[1],this.#s[2]=h[2],this.#s[3]=h[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,e,n,i,s,l){const o=this.#s;if(o[0]===1/0)return this;const c=Ge.multiplyByDOMMatrix(this.#a.at(-1),e.getTransform());if(o[0]===-1/0)return Ge.axialAlignedBoundingBox([n,s,i,l],c,this.#o),this;const h=[1/0,1/0,-1/0,-1/0];return Ge.axialAlignedBoundingBox([n,s,i,l],c,h),this.#o[0]=Math.min(this.#o[0],Math.max(h[0],o[0])),this.#o[1]=Math.min(this.#o[1],Math.max(h[1],o[1])),this.#o[2]=Math.max(this.#o[2],Math.min(h[2],o[2])),this.#o[3]=Math.max(this.#o[3],Math.min(h[3],o[3])),this}recordCharacterBBox(t,e,n,i=1,s=0,l=0,o){const c=n.bbox;let h,f;if(c&&(h=c[2]!==c[0]&&c[3]!==c[1]&&this.#h.get(n),h!==!1&&(f=[0,0,0,0],Ge.axialAlignedBoundingBox(c,n.fontMatrix,f),(i!==1||s!==0||l!==0)&&Ge.scaleMinMax([i,0,0,-i,s,l],f),h)))return this.recordBBox(t,e,f[0],f[2],f[1],f[3]);if(!o)return this.recordFullPageBBox(t);const p=o();return c&&f&&h===void 0&&(h=f[0]<=s-p.actualBoundingBoxLeft&&f[2]>=s+p.actualBoundingBoxRight&&f[1]<=l-p.actualBoundingBoxAscent&&f[3]>=l+p.actualBoundingBoxDescent,this.#h.set(n,h),h)?this.recordBBox(t,e,f[0],f[2],f[1],f[3]):this.recordBBox(t,e,s-p.actualBoundingBoxLeft,s+p.actualBoundingBoxRight,l-p.actualBoundingBoxAscent,l+p.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#d,this.#s[2]),this.#o[3]=Math.min(this.#g,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const n=this.#l,i=this.#t,s=this.#e;for(const l of e)l in this.#t?n.add(i[l]):l in s&&s[l].forEach(n.add,n);return this}recordNamedDependency(t,e){return this.#r.has(e)&&this.#l.add(this.#r.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[Qh]),this.#p){const n=_m(this.#p,t),{dependencies:i}=n;this.#l.forEach(i.add,i),this.#n.forEach(i.add,i),this.#i.forEach(i.add,i),i.delete(t),n.isRenderingOperation=!0}if(this.#u===t){const n=A_(this.#o[0]*256/this.#d),i=A_(this.#o[1]*256/this.#g),s=S_(this.#o[2]*256/this.#d),l=S_(this.#o[3]*256/this.#g);xm(this.#m,t,n,i,s,l);for(const o of this.#l)o!==t&&xm(this.#m,o,n,i,s,l);for(const o of this.#n)o!==t&&xm(this.#m,o,n,i,s,l);for(const o of this.#i)o!==t&&xm(this.#m,o,n,i,s,l);e||(this.#l.clear(),this.#u=-1)}return this}recordShowTextOperation(t,e=!1){const n=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#u===t&&(this.#u=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#f.get(t);return this.#f.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new xO(this.#c,this.#m)}takeDebugMetadata(){return this.#p}}class bg{#t;#e;#r;#n=0;#i=0;constructor(t,e,n){if(t instanceof bg&&t.#r===!!n)return t;this.#t=t,this.#e=e,this.#r=!!n}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#i++,this.#t.save(this.#e),this}restore(t){return this.#i>0&&(this.#t.restore(this.#e),this.#i--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#r||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,n,i,s,l){return this.#r||this.#t.recordClipBox(this.#e,e,n,i,s,l),this}recordBBox(t,e,n,i,s,l){return this.#r||this.#t.recordBBox(this.#e,e,n,i,s,l),this}recordCharacterBBox(t,e,n,i,s,l,o){return this.#r||this.#t.recordCharacterBBox(this.#e,e,n,i,s,l,o),this}recordFullPageBBox(t){return this.#r||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#r||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const zo={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},$s={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Sb(r,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,n),r.clip(i)}class S2{isModifyingCurrentTransform(){return!1}getPattern(){Cr("Abstract method `getPattern` called.")}}class AO extends S2{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let n,i=this._p0,s=this._p1;if(e&&(i=i.slice(),s=s.slice(),Ge.applyTransform(i,e),Ge.applyTransform(s,e)),this._type==="axial")n=t.createLinearGradient(i[0],i[1],s[0],s[1]);else if(this._type==="radial"){let l=this._r0,o=this._r1;if(e){const c=new Float32Array(2);Ge.singularValueDecompose2dScale(e,c),l*=c[0],o*=c[0]}n=t.createRadialGradient(i[0],i[1],l,s[0],s[1],o)}for(const l of this._colorStops)n.addColorStop(l[0],l[1]);return n}getPattern(t,e,n,i){let s;if(i===$s.STROKE||i===$s.FILL){if(this.isOriginBased()){let y=Ge.transform(n,e.baseTransform);this.matrix&&(y=Ge.transform(y,this.matrix));const m=.001,w=Math.hypot(y[0],y[1]),b=Math.hypot(y[2],y[3]),_=(y[0]*y[2]+y[1]*y[3])/(w*b);if(Math.abs(_)<m)if(this.isRadial()){if(Math.abs(w-b)<m)return this._createGradient(t,y)}else return this._createGradient(t,y)}const l=e.current.getClippedPathBoundingBox(i,wi(t))||[0,0,0,0],o=Math.ceil(l[2]-l[0])||1,c=Math.ceil(l[3]-l[1])||1,h=e.cachedCanvases.getCanvas("pattern",o,c),f=h.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-l[0],-l[1]),n=Ge.transform(n,[1,0,0,1,l[0],l[1]]),f.transform(...e.baseTransform),this.matrix&&f.transform(...this.matrix),Sb(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),s=t.createPattern(h.canvas,"no-repeat");const p=new DOMMatrix(n);s.setTransform(p)}else Sb(t,this._bbox),s=this._createGradient(t);return s}}function F1(r,t,e,n,i,s,l,o){const c=t.coords,h=t.colors,f=r.data,p=r.width*4;let y;c[e+1]>c[n+1]&&(y=e,e=n,n=y,y=s,s=l,l=y),c[n+1]>c[i+1]&&(y=n,n=i,i=y,y=l,l=o,o=y),c[e+1]>c[n+1]&&(y=e,e=n,n=y,y=s,s=l,l=y);const m=(c[e]+t.offsetX)*t.scaleX,w=(c[e+1]+t.offsetY)*t.scaleY,b=(c[n]+t.offsetX)*t.scaleX,_=(c[n+1]+t.offsetY)*t.scaleY,v=(c[i]+t.offsetX)*t.scaleX,A=(c[i+1]+t.offsetY)*t.scaleY;if(w>=A)return;const C=h[s],S=h[s+1],O=h[s+2],q=h[l],H=h[l+1],Q=h[l+2],I=h[o],dt=h[o+1],nt=h[o+2],B=Math.round(w),Z=Math.round(A);let D,mt,it,st,vt,wt,Ft,$;for(let R=B;R<=Z;R++){if(R<_){const F=R<w?0:(w-R)/(w-_);D=m-(m-b)*F,mt=C-(C-q)*F,it=S-(S-H)*F,st=O-(O-Q)*F}else{let F;R>A?F=1:_===A?F=0:F=(_-R)/(_-A),D=b-(b-v)*F,mt=q-(q-I)*F,it=H-(H-dt)*F,st=Q-(Q-nt)*F}let K;R<w?K=0:R>A?K=1:K=(w-R)/(w-A),vt=m-(m-v)*K,wt=C-(C-I)*K,Ft=S-(S-dt)*K,$=O-(O-nt)*K;const rt=Math.round(Math.min(D,vt)),pt=Math.round(Math.max(D,vt));let ct=p*R+rt*4;for(let F=rt;F<=pt;F++)K=(D-F)/(D-vt),K<0?K=0:K>1&&(K=1),f[ct++]=mt-(mt-wt)*K|0,f[ct++]=it-(it-Ft)*K|0,f[ct++]=st-(st-$)*K|0,f[ct++]=255}}function SO(r,t,e){const n=t.coords,i=t.colors;let s,l;switch(t.type){case gb.LATTICE:const o=t.verticesPerRow,c=Math.floor(n.length/o)-1,h=o-1;for(s=0;s<c;s++){let f=s*o;for(let p=0;p<h;p++,f++)F1(r,e,n[f],n[f+1],n[f+o],i[f],i[f+1],i[f+o]),F1(r,e,n[f+o+1],n[f+1],n[f+o],i[f+o+1],i[f+1],i[f+o])}break;case gb.TRIANGLES:for(s=0,l=n.length;s<l;s+=3)F1(r,e,n[s],n[s+1],n[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class EO extends S2{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const o=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-o,f=Math.ceil(this._bounds[3])-c,p=Math.min(Math.ceil(Math.abs(h*t[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(f*t[1]*1.1)),3e3),m=h/p,w=f/y,b={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-c,scaleX:1/m,scaleY:1/w},_=p+4,v=y+4,A=n.getCanvas("mesh",_,v),C=A.context,S=C.createImageData(p,y);if(e){const q=S.data;for(let H=0,Q=q.length;H<Q;H+=4)q[H]=e[0],q[H+1]=e[1],q[H+2]=e[2],q[H+3]=255}for(const q of this._figures)SO(S,q,b);return C.putImageData(S,2,2),{canvas:A.canvas,offsetX:o-2*m,offsetY:c-2*w,scaleX:m,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,i){Sb(t,this._bbox);const s=new Float32Array(2);if(i===$s.SHADING)Ge.singularValueDecompose2dScale(wi(t),s);else if(this.matrix){Ge.singularValueDecompose2dScale(this.matrix,s);const[o,c]=s;Ge.singularValueDecompose2dScale(e.baseTransform,s),s[0]*=o,s[1]*=c}else Ge.singularValueDecompose2dScale(e.baseTransform,s);const l=this._createMeshCanvas(s,i===$s.SHADING?null:this._background,e.cachedCanvases);return i!==$s.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class CO extends S2{getPattern(){return"hotpink"}}function TO(r){switch(r[0]){case"RadialAxial":return new AO(r);case"Mesh":return new EO(r);case"Dummy":return new CO}throw new Error(`Unknown IR type: ${r[0]}`)}const E_={COLORED:1,UNCOLORED:2};class E2{static MAX_PATTERN_SIZE=3e3;constructor(t,e,n,i){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(t,e){const{bbox:n,operatorList:i,paintType:s,tilingType:l,color:o,canvasGraphicsFactory:c}=this;let{xstep:h,ystep:f}=this;h=Math.abs(h),f=Math.abs(f),Ig("TilingType: "+l);const p=n[0],y=n[1],m=n[2],w=n[3],b=m-p,_=w-y,v=new Float32Array(2);Ge.singularValueDecompose2dScale(this.matrix,v);const[A,C]=v;Ge.singularValueDecompose2dScale(this.baseTransform,v);const S=A*v[0],O=C*v[1];let q=b,H=_,Q=!1,I=!1;const dt=Math.ceil(h*S),nt=Math.ceil(f*O),B=Math.ceil(b*S),Z=Math.ceil(_*O);dt>=B?q=h:Q=!0,nt>=Z?H=f:I=!0;const D=this.getSizeAndScale(q,this.ctx.canvas.width,S),mt=this.getSizeAndScale(H,this.ctx.canvas.height,O),it=t.cachedCanvases.getCanvas("pattern",D.size,mt.size),st=it.context,vt=c.createCanvasGraphics(st,e);if(vt.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(vt,s,o),st.translate(-D.scale*p,-mt.scale*y),vt.transform(0,D.scale,0,0,mt.scale,0,0),st.save(),vt.dependencyTracker?.save(),this.clipBbox(vt,p,y,m,w),vt.baseTransform=wi(vt.ctx),vt.executeOperatorList(i),vt.endDrawing(),vt.dependencyTracker?.restore(),st.restore(),Q||I){const wt=it.canvas;Q&&(q=h),I&&(H=f);const Ft=this.getSizeAndScale(q,this.ctx.canvas.width,S),$=this.getSizeAndScale(H,this.ctx.canvas.height,O),R=Ft.size,K=$.size,rt=t.cachedCanvases.getCanvas("pattern-workaround",R,K),pt=rt.context,ct=Q?Math.floor(b/h):0,F=I?Math.floor(_/f):0;for(let j=0;j<=ct;j++)for(let ht=0;ht<=F;ht++)pt.drawImage(wt,R*j,K*ht,R,K,0,0,R,K);return{canvas:rt.canvas,scaleX:Ft.scale,scaleY:$.scale,offsetX:p,offsetY:y}}return{canvas:it.canvas,scaleX:D.scale,scaleY:mt.scale,offsetX:p,offsetY:y}}getSizeAndScale(t,e,n){const i=Math.max(E2.MAX_PATTERN_SIZE,e);let s=Math.ceil(t*n);return s>=i?s=i:n=s/t,{scale:n,size:s}}clipBbox(t,e,n,i,s){const l=i-e,o=s-n;t.ctx.rect(e,n,l,o),Ge.axialAlignedBoundingBox([e,n,i,s],wi(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,s=t.current;switch(e){case E_.COLORED:const{fillStyle:l,strokeStyle:o}=this.ctx;i.fillStyle=s.fillColor=l,i.strokeStyle=s.strokeColor=o;break;case E_.UNCOLORED:i.fillStyle=i.strokeStyle=n,s.fillColor=s.strokeColor=n;break;default:throw new jL(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,i,s){let l=n;i!==$s.SHADING&&(l=Ge.transform(l,e.baseTransform),this.matrix&&(l=Ge.transform(l,this.matrix)));const o=this.createPatternCanvas(e,s);let c=new DOMMatrix(l);c=c.translate(o.offsetX,o.offsetY),c=c.scale(1/o.scaleX,1/o.scaleY);const h=t.createPattern(o.canvas,"repeat");return h.setTransform(c),h}}function NO({src:r,srcPos:t=0,dest:e,width:n,height:i,nonBlackColor:s=4294967295,inverseDecode:l=!1}){const o=ws.isLittleEndian?4278190080:255,[c,h]=l?[s,o]:[o,s],f=n>>3,p=n&7,y=r.length;e=new Uint32Array(e.buffer);let m=0;for(let w=0;w<i;w++){for(const _=t+f;t<_;t++){const v=t<y?r[t]:255;e[m++]=v&128?h:c,e[m++]=v&64?h:c,e[m++]=v&32?h:c,e[m++]=v&16?h:c,e[m++]=v&8?h:c,e[m++]=v&4?h:c,e[m++]=v&2?h:c,e[m++]=v&1?h:c}if(p===0)continue;const b=t<y?r[t++]:255;for(let _=0;_<p;_++)e[m++]=b&1<<7-_?h:c}return{srcPos:t,destPos:m}}const C_=16,T_=100,kO=15,N_=10,Qa=16,B1=new DOMMatrix,Ao=new Float32Array(2),hf=new Float32Array([1/0,1/0,-1/0,-1/0]);function RO(r,t){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){t.save(),this.__originalSave()},r.restore=function(){t.restore(),this.__originalRestore()},r.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},r.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},r.transform=function(e,n,i,s,l,o){t.transform(e,n,i,s,l,o),this.__originalTransform(e,n,i,s,l,o)},r.setTransform=function(e,n,i,s,l,o){t.setTransform(e,n,i,s,l,o),this.__originalSetTransform(e,n,i,s,l,o)},r.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},r.rotate=function(e){t.rotate(e),this.__originalRotate(e)},r.clip=function(e){t.clip(e),this.__originalClip(e)},r.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},r.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},r.bezierCurveTo=function(e,n,i,s,l,o){t.bezierCurveTo(e,n,i,s,l,o),this.__originalBezierCurveTo(e,n,i,s,l,o)},r.rect=function(e,n,i,s){t.rect(e,n,i,s),this.__originalRect(e,n,i,s)},r.closePath=function(){t.closePath(),this.__originalClosePath()},r.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class LO{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Am(r,t,e,n,i,s,l,o,c,h){const[f,p,y,m,w,b]=wi(r);if(p===0&&y===0){const A=l*f+w,C=Math.round(A),S=o*m+b,O=Math.round(S),q=(l+c)*f+w,H=Math.abs(Math.round(q)-C)||1,Q=(o+h)*m+b,I=Math.abs(Math.round(Q)-O)||1;return r.setTransform(Math.sign(f),0,0,Math.sign(m),C,O),r.drawImage(t,e,n,i,s,0,0,H,I),r.setTransform(f,p,y,m,w,b),[H,I]}if(f===0&&m===0){const A=o*y+w,C=Math.round(A),S=l*p+b,O=Math.round(S),q=(o+h)*y+w,H=Math.abs(Math.round(q)-C)||1,Q=(l+c)*p+b,I=Math.abs(Math.round(Q)-O)||1;return r.setTransform(0,Math.sign(p),Math.sign(y),0,C,O),r.drawImage(t,e,n,i,s,0,0,I,H),r.setTransform(f,p,y,m,w,b),[I,H]}r.drawImage(t,e,n,i,s,l,o,c,h);const _=Math.hypot(f,p),v=Math.hypot(y,m);return[_*c,v*h]}class k_{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=mb;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=vs.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,n){n?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=hf.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=$s.FILL,e=null){const n=this.minMax.slice();if(t===$s.STROKE){e||Cr("Stroke bounding box must include transform."),Ge.singularValueDecompose2dScale(e,Ao);const i=Ao[0]*this.lineWidth/2,s=Ao[1]*this.lineWidth/2;n[0]-=i,n[1]-=s,n[2]+=i,n[3]+=s}return n}updateClipFromPath(){const t=Ge.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(hf,0)}getClippedPathBoundingBox(t=$s.FILL,e=null){return Ge.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function R_(r,t){if(t instanceof ImageData){r.putImageData(t,0,0);return}const e=t.height,n=t.width,i=e%Qa,s=(e-i)/Qa,l=i===0?s:s+1,o=r.createImageData(n,Qa);let c=0,h;const f=t.data,p=o.data;let y,m,w,b;if(t.kind===Zm.GRAYSCALE_1BPP){const _=f.byteLength,v=new Uint32Array(p.buffer,0,p.byteLength>>2),A=v.length,C=n+7>>3,S=4294967295,O=ws.isLittleEndian?4278190080:255;for(y=0;y<l;y++){for(w=y<s?Qa:i,h=0,m=0;m<w;m++){const q=_-c;let H=0;const Q=q>C?n:q*8-7,I=Q&-8;let dt=0,nt=0;for(;H<I;H+=8)nt=f[c++],v[h++]=nt&128?S:O,v[h++]=nt&64?S:O,v[h++]=nt&32?S:O,v[h++]=nt&16?S:O,v[h++]=nt&8?S:O,v[h++]=nt&4?S:O,v[h++]=nt&2?S:O,v[h++]=nt&1?S:O;for(;H<Q;H++)dt===0&&(nt=f[c++],dt=128),v[h++]=nt&dt?S:O,dt>>=1}for(;h<A;)v[h++]=0;r.putImageData(o,0,y*Qa)}}else if(t.kind===Zm.RGBA_32BPP){for(m=0,b=n*Qa*4,y=0;y<s;y++)p.set(f.subarray(c,c+b)),c+=b,r.putImageData(o,0,m),m+=Qa;y<l&&(b=n*i*4,p.set(f.subarray(c,c+b)),r.putImageData(o,0,m))}else if(t.kind===Zm.RGB_24BPP)for(w=Qa,b=n*w,y=0;y<l;y++){for(y>=s&&(w=i,b=n*w),h=0,m=b;m--;)p[h++]=f[c++],p[h++]=f[c++],p[h++]=f[c++],p[h++]=255;r.putImageData(o,0,y*Qa)}else throw new Error(`bad image kind: ${t.kind}`)}function L_(r,t){if(t.bitmap){r.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,i=e%Qa,s=(e-i)/Qa,l=i===0?s:s+1,o=r.createImageData(n,Qa);let c=0;const h=t.data,f=o.data;for(let p=0;p<l;p++){const y=p<s?Qa:i;({srcPos:c}=NO({src:h,srcPos:c,dest:f,width:n,height:y,nonBlackColor:0})),r.putImageData(o,0,p*Qa)}}function kd(r,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)r[n]!==void 0&&(t[n]=r[n]);r.setLineDash!==void 0&&(t.setLineDash(r.getLineDash()),t.lineDashOffset=r.lineDashOffset)}function Sm(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:t}=r;t!=="none"&&t!==""&&(r.filter="none")}function O_(r,t){if(t)return!0;Ge.singularValueDecompose2dScale(r,Ao);const e=Math.fround(lu.pixelRatio*Of.PDF_TO_CSS_UNITS);return Ao[0]<=e&&Ao[1]<=e}const OO=["butt","round","square"],DO=["miter","round","bevel"],PO={},D_={};class yf{constructor(t,e,n,i,s,{optionalContentConfig:l,markedContentStack:o=null},c,h,f){this.ctx=t,this.current=new k_(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=l,this.cachedCanvases=new LO(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(t,e,n=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:i=null}){const s=this.ctx.canvas.width,l=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,l),this.ctx.fillStyle=o,n){const c=this.cachedCanvases.getCanvas("transparent",s,l);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...wi(this.compositeCtx))}this.ctx.save(),Sm(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=wi(this.ctx)}executeOperatorList(t,e,n,i,s){const l=t.argsArray,o=t.fnArray;let c=e||0;const h=l.length;if(h===c)return c;const f=h-c>N_&&typeof n=="function",p=f?Date.now()+kO:0;let y=0;const m=this.commonObjs,w=this.objs;let b,_;for(;;){if(i!==void 0&&c===i.nextBreakPoint)return i.breakIt(c,n),c;if(!s||s(c))if(b=o[c],_=l[c]??null,b!==ep.dependency)_===null?this[b](c):this[b](c,..._);else for(const v of _){this.dependencyTracker?.recordNamedData(v,c);const A=v.startsWith("g_")?m:w;if(!A.has(v))return A.get(v,n),c}if(c++,c===h)return c;if(f&&++y>N_){if(Date.now()>p)return n(),c;y=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const n=t.width??t.displayWidth,i=t.height??t.displayHeight;let s=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),o=n,c=i,h="prescale1",f,p;for(;s>2&&o>1||l>2&&c>1;){let y=o,m=c;s>2&&o>1&&(y=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),s/=o/y),l>2&&c>1&&(m=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,l/=c/m),f=this.cachedCanvases.getCanvas(h,y,m),p=f.context,p.clearRect(0,0,y,m),p.drawImage(t,0,0,o,c,0,0,y,m),t=f.canvas,o=y,c=m,h=h==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:o,paintHeight:c}}_createMaskCanvas(t,e){const n=this.ctx,{width:i,height:s}=e,l=this.current.fillColor,o=this.current.patternFill,c=wi(n);let h,f,p,y;if((e.bitmap||e.data)&&e.count>1){const dt=e.bitmap||e.data.buffer;f=JSON.stringify(o?c:[c.slice(0,4),l]),h=this._cachedBitmapsMap.get(dt),h||(h=new Map,this._cachedBitmapsMap.set(dt,h));const nt=h.get(f);if(nt&&!o){const B=Math.round(Math.min(c[0],c[2])+c[4]),Z=Math.round(Math.min(c[1],c[3])+c[5]);return this.dependencyTracker?.recordDependencies(t,zo.transformAndFill),{canvas:nt,offsetX:B,offsetY:Z}}p=nt}p||(y=this.cachedCanvases.getCanvas("maskCanvas",i,s),L_(y.context,e));let m=Ge.transform(c,[1/i,0,0,-1/s,0,0]);m=Ge.transform(m,[1,0,0,1,0,-s]);const w=hf.slice();Ge.axialAlignedBoundingBox([0,0,i,s],m,w);const[b,_,v,A]=w,C=Math.round(v-b)||1,S=Math.round(A-_)||1,O=this.cachedCanvases.getCanvas("fillCanvas",C,S),q=O.context,H=b,Q=_;q.translate(-H,-Q),q.transform(...m),p||(p=this._scaleImage(y.canvas,Kl(q)),p=p.img,h&&o&&h.set(f,p)),q.imageSmoothingEnabled=O_(wi(q),e.interpolate),Am(q,p,0,0,p.width,p.height,0,0,i,s),q.globalCompositeOperation="source-in";const I=Ge.transform(Kl(q),[1,0,0,1,-H,-Q]);return q.fillStyle=o?l.getPattern(n,this,I,$s.FILL,t):l,q.fillRect(0,0,i,s),h&&!o&&(this.cachedCanvases.delete("fillCanvas"),h.set(f,O.canvas)),this.dependencyTracker?.recordDependencies(t,zo.transformAndFill),{canvas:O.canvas,offsetX:Math.round(H),offsetY:Math.round(Q)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=OO[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=DO[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){this.dependencyTracker?.recordSimpleData("dash",t);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[n,i]of e)switch(n){case"LW":this.setLineWidth(t,i);break;case"LC":this.setLineCap(t,i);break;case"LJ":this.setLineJoin(t,i);break;case"ML":this.setMiterLimit(t,i);break;case"D":this.setDash(t,i[0],i[1]);break;case"RI":this.setRenderingIntent(t,i);break;case"FL":this.setFlatness(t,i);break;case"Font":this.setFont(t,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,e,n);this.suspendedCtx=this.ctx;const l=this.ctx=s.context;l.setTransform(this.suspendedCtx.getTransform()),kd(this.suspendedCtx,l),RO(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),kd(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){const s=i[0],l=i[1],o=i[2]-s,c=i[3]-l;o===0||c===0||(this.genericComposeSMask(e.context,n,o,c,e.subtype,e.backdrop,e.transferMap,s,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,s,l,o,c,h,f,p){let y=t.canvas,m=c-f,w=h-p;if(l)if(m<0||w<0||m+n>y.width||w+i>y.height){const _=this.cachedCanvases.getCanvas("maskExtension",n,i),v=_.context;v.drawImage(y,-m,-w),v.globalCompositeOperation="destination-atop",v.fillStyle=l,v.fillRect(0,0,n,i),v.globalCompositeOperation="source-over",y=_.canvas,m=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const _=new Path2D;_.rect(m,w,n,i),t.clip(_),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(m,w,n,i),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),s==="Alpha"&&o?e.filter=this.filterFactory.addAlphaFilter(o):s==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(o));const b=new Path2D;b.rect(c,h,n,i),e.clip(b),e.globalCompositeOperation="destination-in",e.drawImage(y,m,w,n,i,c,h,n,i),e.restore()}save(t){this.inSMaskMode&&kd(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&kd(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,i,s,l,o){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,n,i,s,l,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,i){let[s]=n;if(!i){s||=n[0]=new Path2D,this[e](t,s);return}if(this.dependencyTracker!==null){const l=e===ep.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,i[0]-l,i[2]+l,i[1]-l,i[3]+l).recordDependencies(t,["transform"])}s instanceof Path2D||(s=n[0]=p4(s)),Ge.axialAlignedBoundingBox(i,wi(this.ctx),this.current.minMax),this[e](t,s),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){const i=this.ctx,s=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&s?.getPattern){const l=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=s.getPattern(i,this,Kl(i),$s.STROKE,t),l){const o=new Path2D;o.addPath(e,i.getTransform().invertSelf().multiplySelf(l)),e=o}this.rescaleAndStroke(e,!1),i.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,zo.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox($s.STROKE,wi(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){const i=this.ctx,s=this.current.fillColor,l=this.current.patternFill;let o=!1;if(l){const h=s.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(t),i.save(),i.fillStyle=s.getPattern(i,this,Kl(i),$s.FILL,t),h){const f=new Path2D;f.addPath(e,i.getTransform().invertSelf().multiplySelf(h)),e=f}o=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(i.fill(e,"evenodd"),this.pendingEOFill=!1):i.fill(e)),this.dependencyTracker?.recordDependencies(t,zo.fill),o&&(i.restore(),this.dependencyTracker?.restore(t)),n&&this.consumePath(t,e,c)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,zo.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=PO}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=D_}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;e!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",t),i.recordCloseMarker(t)}if(e!==void 0){const i=new Path2D,s=n.getTransform().invertSelf();for(const{transform:l,x:o,y:c,fontSize:h,path:f}of e)f&&i.addPath(f,new DOMMatrix(l).preMultiplySelf(s).translate(o,c).scale(h,-h));n.clip(i)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const i=this.commonObjs.get(e),s=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=i.fontMatrix||mb,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Tn("Invalid font matrix for font "+e),n<0?(n=-n,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;const l=i.loadedName||"sans-serif",o=i.systemFontInfo?.css||`"${l}", ${i.fallbackName}`;let c="normal";i.black?c="900":i.bold&&(c="bold");const h=i.italic?"italic":"normal";let f=n;n<C_?f=C_:n>T_&&(f=T_),this.current.fontSizeScale=n/f,this.ctx.font=`${h} ${c} ${f}px ${o}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#r(t,e,n){const i=new Path2D;return i.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),i}paintChar(t,e,n,i,s,l){const o=this.ctx,c=this.current,h=c.font,f=c.textRenderingMode,p=c.fontSize/c.fontSizeScale,y=f&vs.FILL_STROKE_MASK,m=!!(f&vs.ADD_TO_PATH_FLAG),w=c.patternFill&&!h.missingFile,b=c.patternStroke&&!h.missingFile;let _;if((h.disableFontFace||m||w||b)&&!h.missingFile&&(_=h.getPathGenerator(this.commonObjs,e)),_&&(h.disableFontFace||w||b)){o.save(),o.translate(n,i),o.scale(p,-p),this.dependencyTracker?.recordCharacterBBox(t,o,h);let v;if(y===vs.FILL||y===vs.FILL_STROKE)if(s){v=o.getTransform(),o.setTransform(...s);const A=this.#r(_,v,s);o.fill(A)}else o.fill(_);if(y===vs.STROKE||y===vs.FILL_STROKE)if(l){v||=o.getTransform(),o.setTransform(...l);const{a:A,b:C,c:S,d:O}=v,q=Ge.inverseTransform(l),H=Ge.transform([A,C,S,O,0,0],q);Ge.singularValueDecompose2dScale(H,Ao),o.lineWidth*=Math.max(Ao[0],Ao[1])/p,o.stroke(this.#r(_,v,l))}else o.lineWidth/=p,o.stroke(_);o.restore()}else(y===vs.FILL||y===vs.FILL_STROKE)&&(o.fillText(e,n,i),this.dependencyTracker?.recordCharacterBBox(t,o,h,p,n,i,()=>o.measureText(e))),(y===vs.STROKE||y===vs.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,o,h,p,n,i,()=>o.measureText(e)).recordDependencies(t,zo.stroke),o.strokeText(e,n,i));m&&((this.pendingTextPaths||=[]).push({transform:wi(o),x:n,y:i,fontSize:p,path:_}),this.dependencyTracker?.recordCharacterBBox(t,o,h,p,n,i))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return Nn(this,"isFontSubpixelAAEnabled",n)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,zo.showText).resetBBox(t),this.current.textRenderingMode&vs.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,i=n.font;if(i.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const s=n.fontSize;if(s===0){this.dependencyTracker?.recordOperation(t);return}const l=this.ctx,o=n.fontSizeScale,c=n.charSpacing,h=n.wordSpacing,f=n.fontDirection,p=n.textHScale*f,y=e.length,m=i.vertical,w=m?1:-1,b=i.defaultVMetrics,_=s*n.fontMatrix[0],v=n.textRenderingMode===vs.FILL&&!i.disableFontFace&&!n.patternFill;l.save(),n.textMatrix&&l.transform(...n.textMatrix),l.translate(n.x,n.y+n.textRise),f>0?l.scale(p,-1):l.scale(p,1);let A,C;const S=n.textRenderingMode&vs.FILL_STROKE_MASK,O=S===vs.FILL||S===vs.FILL_STROKE,q=S===vs.STROKE||S===vs.FILL_STROKE;if(O&&n.patternFill){l.save();const nt=n.fillColor.getPattern(l,this,Kl(l),$s.FILL,t);A=wi(l),l.restore(),l.fillStyle=nt}if(q&&n.patternStroke){l.save();const nt=n.strokeColor.getPattern(l,this,Kl(l),$s.STROKE,t);C=wi(l),l.restore(),l.strokeStyle=nt}let H=n.lineWidth;const Q=n.textMatrixScale;if(Q===0||H===0?q&&(H=this.getSinglePixelWidth()):H/=Q,o!==1&&(l.scale(o,o),H/=o),l.lineWidth=H,i.isInvalidPDFjsFont){const nt=[];let B=0;for(const D of e)nt.push(D.unicode),B+=D.width;const Z=nt.join("");if(l.fillText(Z,0,0),this.dependencyTracker!==null){const D=l.measureText(Z);this.dependencyTracker.recordBBox(t,this.ctx,-D.actualBoundingBoxLeft,D.actualBoundingBoxRight,-D.actualBoundingBoxAscent,D.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=B*_*p,l.restore(),this.compose();return}let I=0,dt;for(dt=0;dt<y;++dt){const nt=e[dt];if(typeof nt=="number"){I+=w*nt*s/1e3;continue}let B=!1;const Z=(nt.isSpace?h:0)+c,D=nt.fontChar,mt=nt.accent;let it,st,vt=nt.width;if(m){const $=nt.vmetric||b,R=-(nt.vmetric?$[1]:vt*.5)*_,K=$[2]*_;vt=$?-$[0]:vt,it=R/o,st=(I+K)/o}else it=I/o,st=0;let wt;if(i.remeasure&&vt>0){wt=l.measureText(D);const $=wt.width*1e3/s*o;if(vt<$&&this.isFontSubpixelAAEnabled){const R=vt/$;B=!0,l.save(),l.scale(R,1),it/=R}else vt!==$&&(it+=(vt-$)/2e3*s/o)}if(this.contentVisible&&(nt.isInFont||i.missingFile)){if(v&&!mt)l.fillText(D,it,st),this.dependencyTracker?.recordCharacterBBox(t,l,wt?{bbox:null}:i,s/o,it,st,()=>wt??l.measureText(D));else if(this.paintChar(t,D,it,st,A,C),mt){const $=it+s*mt.offset.x/o,R=st-s*mt.offset.y/o;this.paintChar(t,mt.fontChar,$,R,A,C)}}const Ft=m?vt*_-Z*f:vt*_+Z*f;I+=Ft,B&&l.restore()}m?n.y-=I:n.x+=I*p,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,i=this.current,s=i.font,l=i.fontSize,o=i.fontDirection,c=s.vertical?1:-1,h=i.charSpacing,f=i.wordSpacing,p=i.textHScale*o,y=i.fontMatrix||mb,m=e.length,w=i.textRenderingMode===vs.INVISIBLE;let b,_,v,A;if(w||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(p,o);const C=this.dependencyTracker;for(this.dependencyTracker=C?new bg(C,t):null,b=0;b<m;++b){if(_=e[b],typeof _=="number"){A=c*_*l/1e3,this.ctx.translate(A,0),i.x+=A*p;continue}const S=(_.isSpace?f:0)+h,O=s.charProcOperatorList[_.operatorListId];O?this.contentVisible&&(this.save(),n.scale(l,l),n.transform(...y),this.executeOperatorList(O),this.restore()):Tn(`Type3 character "${_.operatorListId}" is not available.`);const q=[_.width,0];Ge.applyTransform(q,y),v=q[0]*l+S,n.translate(v,0),i.x+=v*p}n.restore(),C&&(this.dependencyTracker=C)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,i,s,l,o){const c=new Path2D;c.rect(i,s,l-i,o-s),this.ctx.clip(c),this.dependencyTracker?.recordBBox(t,this.ctx,i,l,s,o).recordClipBox(t,this.ctx,i,l,s,o),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const i=this.baseTransform||wi(this.ctx),s={createCanvasGraphics:(l,o)=>new yf(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new bg(this.dependencyTracker,o,!0):null)};n=new E2(e,this.ctx,s,i)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=TO(this.getObject(t,e)),this.cachedPatterns.set(e,i)),n&&(i.matrix=n),i}shadingFill(t,e){if(!this.contentVisible)return;const n=this.ctx;this.save(t);const i=this._getPattern(t,e);n.fillStyle=i.getPattern(n,this,Kl(n),$s.SHADING,t);const s=Kl(n);if(s){const{width:l,height:o}=n.canvas,c=hf.slice();Ge.axialAlignedBoundingBox([0,0,l,o],s,c);const[h,f,p,y]=c;this.ctx.fillRect(h,f,p-h,y-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,zo.transform).recordDependencies(t,zo.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Cr("Should not call beginInlineImage")}beginImageData(){Cr("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=wi(this.ctx),n)){Ge.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[i,s,l,o]=n,c=new Path2D;c.rect(i,s,l-i,o-s),this.ctx.clip(c),this.dependencyTracker?.recordClipBox(t,this.ctx,i,l,s,o),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||Ig("TODO: Support non-isolated groups."),e.knockout&&Tn("Knockout groups not supported.");const i=wi(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=hf.slice();Ge.axialAlignedBoundingBox(e.bbox,wi(n),s);const l=[0,0,n.canvas.width,n.canvas.height];s=Ge.intersect(s,l)||[0,0,0,0];const o=Math.floor(s[0]),c=Math.floor(s[1]),h=Math.max(Math.ceil(s[2])-o,1),f=Math.max(Math.ceil(s[3])-c,1);this.current.startNewPathAndClipBox([0,0,h,f]);let p="groupAt"+this.groupLevel;e.smask&&(p+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(p,h,f),m=y.context;m.translate(-o,-c),m.transform(...i);let w=new Path2D;const[b,_,v,A]=e.bbox;if(w.rect(b,_,v-b,A-_),e.matrix){const C=new Path2D;C.addPath(w,new DOMMatrix(e.matrix)),w=C}m.clip(w),e.smask&&this.smaskStack.push({canvas:y.canvas,context:m,offsetX:o,offsetY:c,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(o,c),n.save()),kd(n,m),this.ctx=m,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const s=wi(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...s);const l=hf.slice();Ge.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],s,l),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,n,i,s,l){if(this.#t(),Sm(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const o=n[2]-n[0],c=n[3]-n[1];if(l&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=o,n[3]=c,Ge.singularValueDecompose2dScale(wi(this.ctx),Ao);const{viewportScale:h}=this,f=Math.ceil(o*this.outputScaleX*h),p=Math.ceil(c*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(f,p);const{canvas:y,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(Ao[0],0,0,-Ao[1],0,c*Ao[1]),Sm(this.ctx)}else{Sm(this.ctx),this.endPath(t);const h=new Path2D;h.rect(n[0],n[1],o,c),this.ctx.clip(h)}}this.current=new k_(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...i),this.transform(t,...s)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const i=this.ctx,s=this._createMaskCanvas(t,e),l=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(l,s.offsetX,s.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,s.offsetX,s.offsetX+l.width,s.offsetY,s.offsetY+l.height).recordOperation(t),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,i=0,s=0,l,o){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const c=this.ctx;c.save();const h=wi(c);c.transform(n,i,s,l,0,0);const f=this._createMaskCanvas(t,e);c.setTransform(1,0,0,1,f.offsetX-h[4],f.offsetY-h[5]),this.dependencyTracker?.resetBBox(t);for(let p=0,y=o.length;p<y;p+=2){const m=Ge.transform(h,[n,i,s,l,o[p],o[p+1]]);c.drawImage(f.canvas,m[4],m[5]),this.dependencyTracker?.recordBBox(t,this.ctx,m[4],m[4]+f.canvas.width,m[5],m[5]+f.canvas.height)}c.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx,i=this.current.fillColor,s=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,zo.transformAndFill);for(const l of e){const{data:o,width:c,height:h,transform:f}=l,p=this.cachedCanvases.getCanvas("maskCanvas",c,h),y=p.context;y.save();const m=this.getObject(t,o,l);L_(y,m),y.globalCompositeOperation="source-in",y.fillStyle=s?i.getPattern(y,this,Kl(n),$s.FILL,t):i,y.fillRect(0,0,c,h),y.restore(),n.save(),n.transform(...f),n.scale(1,-1),Am(n,p.canvas,0,0,c,h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,n,0,c,0,h),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){Tn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,i,s){if(!this.contentVisible)return;const l=this.getObject(t,e);if(!l){Tn("Dependent image isn't ready yet");return}const o=l.width,c=l.height,h=[];for(let f=0,p=s.length;f<p;f+=2)h.push({transform:[n,0,0,i,s[f],s[f+1]],x:0,y:0,w:o,h:c});this.paintInlineImageXObjectGroup(t,l,h)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:i}=t,s=this.cachedCanvases.getCanvas("inlineImage",n,i),l=s.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",s.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const n=e.width,i=e.height,s=this.ctx;this.save(t);const{filter:l}=s;l!=="none"&&l!==""&&(s.filter="none"),s.scale(1/n,-1/i);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const f=this.cachedCanvases.getCanvas("inlineImage",n,i).context;R_(f,e),o=this.applyTransferMapsToCanvas(f)}const c=this._scaleImage(o,Kl(s));s.imageSmoothingEnabled=O_(wi(s),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,s,0,n,-i,0).recordDependencies(t,zo.imageXObject).recordOperation(t),Am(s,c.img,0,0,c.paintWidth,c.paintHeight,0,-i,n,i),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){if(!this.contentVisible)return;const i=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const l=e.width,o=e.height,h=this.cachedCanvases.getCanvas("inlineImage",l,o).context;R_(h,e),s=this.applyTransferMapsToCanvas(h)}this.dependencyTracker?.resetBBox(t);for(const l of n)i.save(),i.transform(...l.transform),i.scale(1,-1),Am(i,s,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,zo.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const s=this.ctx;this.pendingClip?(i||(this.pendingClip===D_?s.clip(e,"evenodd"):s.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=wi(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:s}=this.ctx.getTransform();let l,o;if(n===0&&i===0){const c=Math.abs(e),h=Math.abs(s);if(c===h)if(t===0)l=o=1/c;else{const f=c*t;l=o=f<1?1/f:1}else if(t===0)l=1/c,o=1/h;else{const f=c*t,p=h*t;l=f<1?1/f:1,o=p<1?1/p:1}}else{const c=Math.abs(e*s-n*i),h=Math.hypot(e,n),f=Math.hypot(i,s);if(t===0)l=f/c,o=h/c;else{const p=t*c;l=f>p?f/p:1,o=h>p?h/p:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:i}}=this,[s,l]=this.getScaleForStroking();if(s===l){n.lineWidth=(i||1)*s,n.stroke(t);return}const o=n.getLineDash();e&&n.save(),n.scale(s,l),B1.a=1/s,B1.d=1/l;const c=new Path2D;if(c.addPath(t,B1),o.length>0){const h=Math.max(s,l);n.setLineDash(o.map(f=>f/h)),n.lineDashOffset/=h}n.lineWidth=i||1,n.stroke(c),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const r in ep)yf.prototype[r]!==void 0&&(yf.prototype[ep[r]]=yf.prototype[r]);class vf{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class MO{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const sf=Symbol("INTERNAL");class FO{#t=!1;#e=!1;#r=!1;#n=!0;constructor(t,{name:e,intent:n,usage:i,rbGroups:s}){this.#t=!!(t&xo.DISPLAY),this.#e=!!(t&xo.PRINT),this.name=e,this.intent=n,this.usage=i,this.rbGroups=s}get visible(){if(this.#r)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,n=!1){t!==sf&&Cr("Internal method `_setVisible` called."),this.#r=n,this.#n=e}}class BO{#t=null;#e=new Map;#r=null;#n=null;constructor(t,e=xo.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const n of t.groups)this.#e.set(n.id,new FO(e,n));if(t.baseState==="OFF")for(const n of this.#e.values())n._setVisible(sf,!1);for(const n of t.on)this.#e.get(n)._setVisible(sf,!0);for(const n of t.off)this.#e.get(n)._setVisible(sf,!1);this.#r=this.getHash()}}#i(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let i=1;i<e;i++){const s=t[i];let l;if(Array.isArray(s))l=this.#i(s);else if(this.#e.has(s))l=this.#e.get(s).visible;else return Tn(`Optional content group not found: ${s}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Ig("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(Tn(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#i(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return Tn(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return Tn(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return Tn(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return Tn(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return Tn(`Unknown optional content policy ${t.policy}.`),!0}return Tn(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){const i=this.#e.get(t);if(!i){Tn(`Optional content group not found: ${t}`);return}if(n&&e&&i.rbGroups.length)for(const s of i.rbGroups)for(const l of s)l!==t&&this.#e.get(l)?._setVisible(sf,!1,!0);i._setVisible(sf,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let n;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const s=this.#e.get(i);if(s)switch(n){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!s.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#r===null||this.getHash()===this.#r}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new g4;for(const[e,n]of this.#e)t.update(`${e}:${n.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class qg{#t=null;#e=null;_fullReader=null;_rangeReaders=new Set;_source=null;constructor(t,e,n){this._source=t,this.#t=e,this.#e=n}get _progressiveDataLength(){return this._fullReader?._loaded??0}getFullReader(){return Er(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new this.#t(this)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new this.#e(this,t,e);return this._rangeReaders.add(n),n}cancelAllRequests(t){this._fullReader?.cancel(t);for(const e of new Set(this._rangeReaders))e.cancel(t)}}class Hg{onProgress=null;_contentLength=0;_filename=null;_headersCapability=Promise.withResolvers();_isRangeSupported=!1;_isStreamingSupported=!1;_loaded=0;_stream=null;constructor(t){this._stream=t}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){Cr("Abstract method `read` called")}cancel(t){Cr("Abstract method `cancel` called")}}class Gg{_stream=null;constructor(t,e,n){this._stream=t}async read(){Cr("Abstract method `read` called")}cancel(t){Cr("Abstract method `cancel` called")}}function P_(r){return r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer}class IO extends qg{_progressiveDone=!1;_queuedChunks=[];constructor(t){super(t,jO,UO);const{pdfDataRangeTransport:e}=t,{initialData:n,progressiveDone:i}=e;if(n?.length>0){const s=P_(n);this._queuedChunks.push(s)}this._progressiveDone=i,e.addRangeListener((s,l)=>{this.#t(s,l)}),e.addProgressListener((s,l)=>{l!==void 0&&this._fullReader?.onProgress?.({loaded:s,total:l})}),e.addProgressiveReadListener(s=>{this.#t(void 0,s)}),e.addProgressiveDoneListener(()=>{this._fullReader?.progressiveDone(),this._progressiveDone=!0}),e.transportReady()}#t(t,e){const n=P_(e);if(t===void 0)this._fullReader?this._fullReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.keys().find(s=>s._begin===t);Er(i,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),i._enqueue(n)}}getFullReader(){const t=super.getFullReader();return this._queuedChunks=null,t}getRangeReader(t,e){const n=super.getRangeReader(t,e);return n&&(n.onDone=()=>this._rangeReaders.delete(n),this._source.pdfDataRangeTransport.requestDataRange(t,e)),n}cancelAllRequests(t){super.cancelAllRequests(t),this._source.pdfDataRangeTransport.abort()}}class jO extends Hg{_done=!1;_queuedChunks=null;_requests=[];constructor(t){super(t);const{pdfDataRangeTransport:e,disableRange:n,disableStream:i}=t._source,{length:s,contentDispositionFilename:l}=e;this._queuedChunks=t._queuedChunks||[];for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._done=t._progressiveDone,this._contentLength=s,this._isStreamingSupported=!i,this._isRangeSupported=!n,b2(l)&&(this._filename=l),this._headersCapability.resolve()}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||=!0}}class UO extends Gg{onDone=null;_begin=-1;_done=!1;_queuedChunk=null;_requests=[];constructor(t,e,n){super(t,e,n),this._begin=e}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this.onDone?.()}}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this.onDone?.()}}function zO(r){let t=!0,e=n("filename\\*","i").exec(r);if(e){e=e[1];let f=o(e);return f=unescape(f),f=c(f),f=h(f),s(f)}if(e=l(r),e){const f=h(e);return s(f)}if(e=n("filename","i").exec(r),e){e=e[1];let f=o(e);return f=h(f),s(f)}function n(f,p){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function i(f,p){if(f){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const y=new TextDecoder(f,{fatal:!0}),m=jg(p);p=y.decode(m),t=!1}catch{}}return p}function s(f){return t&&/[\x80-\xff]/.test(f)&&(f=i("utf-8",f),t&&(f=i("iso-8859-1",f))),f}function l(f){const p=[];let y;const m=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=m.exec(f))!==null;){let[,b,_,v]=y;if(b=parseInt(b,10),b in p){if(b===0)break;continue}p[b]=[_,v]}const w=[];for(let b=0;b<p.length&&b in p;++b){let[_,v]=p[b];v=o(v),_&&(v=unescape(v),b===0&&(v=c(v))),w.push(v)}return w.join("")}function o(f){if(f.startsWith('"')){const p=f.slice(1).split('\\"');for(let y=0;y<p.length;++y){const m=p[y].indexOf('"');m!==-1&&(p[y]=p[y].slice(0,m),p.length=y+1),p[y]=p[y].replaceAll(/\\(.)/g,"$1")}f=p.join('"')}return f}function c(f){const p=f.indexOf("'");if(p===-1)return f;const y=f.slice(0,p),w=f.slice(p+1).replace(/^[^']*'/,"");return i(y,w)}function h(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,y,m,w){if(m==="q"||m==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,_){return String.fromCharCode(parseInt(_,16))}),i(y,w);try{w=atob(w)}catch{}return i(y,w)})}return""}function A4(r,t){const e=new Headers;if(!r||!t||typeof t!="object")return e;for(const n in t){const i=t[n];i!==void 0&&e.append(n,i)}return e}function Vg(r){return URL.parse(r)?.origin??null}function S4({responseHeaders:r,isHttp:t,rangeChunkSize:e,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(r.get("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*e)||n||!t||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function E4(r){const t=r.get("Content-Disposition");if(t){let e=zO(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(b2(e))return e}return null}function Wg(r,t){return new vg(`Unexpected server response (${r}) while retrieving PDF "${t}".`,r,r===404||r===0&&t.startsWith("file:"))}function C4(r,t){if(r!==t)throw new Error(`Expected range response-origin "${r}" to match "${t}".`)}function T4(r,t,e,n){return fetch(r,{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"})}function N4(r,t){if(r!==200&&r!==206)throw Wg(r,t)}function k4(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(Tn(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class qO extends qg{_responseOrigin=null;constructor(t){super(t,HO,GO),this.isHttp=/^https?:/i.test(t.url),this.headers=A4(this.isHttp,t.httpHeaders)}}class HO extends Hg{_abortController=new AbortController;_reader=null;constructor(t){super(t);const{disableRange:e,disableStream:n,length:i,rangeChunkSize:s,url:l,withCredentials:o}=t._source;this._contentLength=i,this._isStreamingSupported=!n,this._isRangeSupported=!e;const c=new Headers(t.headers);T4(l,c,o,this._abortController).then(h=>{t._responseOrigin=Vg(h.url),N4(h.status,l),this._reader=h.body.getReader();const f=h.headers,{allowRangeRequests:p,suggestedLength:y}=S4({responseHeaders:f,isHttp:t.isHttp,rangeChunkSize:s,disableRange:e});this._isRangeSupported=p,this._contentLength=y||this._contentLength,this._filename=E4(f),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Tc("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:k4(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class GO extends Gg{_abortController=new AbortController;_readCapability=Promise.withResolvers();_reader=null;constructor(t,e,n){super(t,e,n);const{url:i,withCredentials:s}=t._source,l=new Headers(t.headers);l.append("Range",`bytes=${e}-${n-1}`),T4(i,l,s,this._abortController).then(o=>{const c=Vg(o.url);C4(c,t._responseOrigin),N4(o.status,i),this._reader=o.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:{value:k4(t),done:!1}}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const I1=200,M_=206;function VO(r){return typeof r!="string"?r:jg(r).buffer}class WO extends qg{#t=new WeakMap;_responseOrigin=null;constructor(t){super(t,KO,$O),this.url=t.url,this.isHttp=/^https?:/i.test(this.url),this.headers=A4(this.isHttp,t.httpHeaders)}_request(t){const e=new XMLHttpRequest,n={validateStatus:null,onHeadersReceived:t.onHeadersReceived,onDone:t.onDone,onError:t.onError,onProgress:t.onProgress};this.#t.set(e,n),e.open("GET",this.url),e.withCredentials=this._source.withCredentials;for(const[i,s]of this.headers)e.setRequestHeader(i,s);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.validateStatus=i=>i===M_||i===I1):n.validateStatus=i=>i===I1,e.responseType="arraybuffer",Er(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>t.onError(e.status),e.onreadystatechange=this.#r.bind(this,e),e.onprogress=this.#e.bind(this,e),e.send(null),e}#e(t,e){this.#t.get(t)?.onProgress?.(e)}#r(t,e){const n=this.#t.get(t);if(!n||(t.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),t.readyState!==4)||!this.#t.has(t))return;if(this.#t.delete(t),t.status===0&&this.isHttp){n.onError(t.status);return}const i=t.status||I1;if(!n.validateStatus(i)){n.onError(t.status);return}const s=VO(t.response);if(i===M_){const l=t.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(l)?n.onDone(s):(Tn('Missing or invalid "Content-Range" header.'),n.onError(0))}else s?n.onDone(s):n.onError(t.status)}_abortRequest(t){this.#t.has(t)&&(this.#t.delete(t),t.abort())}getRangeReader(t,e){const n=super.getRangeReader(t,e);return n&&(n.onClosed=()=>this._rangeReaders.delete(n)),n}}class KO extends Hg{_cachedChunks=[];_done=!1;_requests=[];_storedError=null;constructor(t){super(t);const{length:e}=t._source;this._contentLength=e,this._fullRequestXhr=t._request({onHeadersReceived:this.#t.bind(this),onDone:this.#e.bind(this),onError:this.#r.bind(this),onProgress:this.#n.bind(this)})}#t(){const t=this._stream,{disableRange:e,rangeChunkSize:n}=t._source,i=this._fullRequestXhr;t._responseOrigin=Vg(i.responseURL);const s=i.getAllResponseHeaders(),l=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[f,...p]=h.split(": ");return[f,p.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:c}=S4({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:n,disableRange:e});o&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=E4(l),this._isRangeSupported&&t._abortRequest(i),this._headersCapability.resolve()}#e(t){if(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._cachedChunks.push(t),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}#r(t){this._storedError=Wg(t,this._stream.url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}#n(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}class $O extends Gg{onClosed=null;_done=!1;_queuedChunk=null;_requests=[];_storedError=null;constructor(t,e,n){super(t,e,n),this._requestXhr=t._request({begin:e,end:n,onHeadersReceived:this.#t.bind(this),onDone:this.#e.bind(this),onError:this.#r.bind(this),onProgress:null})}#t(){const t=Vg(this._requestXhr?.responseURL);try{C4(t,this._stream._responseOrigin)}catch(e){this._storedError=e,this.#r(0)}}#e(t){this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this.onClosed?.()}#r(t){this._storedError??=Wg(t,this._stream.url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),this.onClosed?.()}}const XO=/^[a-z][a-z0-9\-+.]+:/i;function YO(r){if(XO.test(r))return new URL(r);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(r))}function R4(r){const{Readable:t}=process.getBuiltinModule("stream");return typeof t.toWeb=="function"?t.toWeb(r):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(r)}function L4(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(Tn(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class QO extends qg{constructor(t){super(t,ZO,JO),this.url=YO(t.url),Er(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class ZO extends Hg{_reader=null;constructor(t){super(t);const{disableRange:e,disableStream:n,length:i,rangeChunkSize:s}=t._source;this._contentLength=i,this._isStreamingSupported=!n,this._isRangeSupported=!e;const l=t.url,o=process.getBuiltinModule("fs");o.promises.lstat(l).then(c=>{const h=o.createReadStream(l),f=R4(h);this._reader=f.getReader();const{size:p}=c;p<=2*s&&(this._isRangeSupported=!1),this._contentLength=p,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Tc("Streaming is disabled.")),this._headersCapability.resolve()}).catch(c=>{c.code==="ENOENT"&&(c=Wg(0,l.href)),this._headersCapability.reject(c)})}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:L4(t),done:!1})}cancel(t){this._reader?.cancel(t)}}class JO extends Gg{_readCapability=Promise.withResolvers();_reader=null;constructor(t,e,n){super(t,e,n);const i=t.url,s=process.getBuiltinModule("fs");try{const l=s.createReadStream(i,{start:e,end:n-1}),o=R4(l);this._reader=o.getReader(),this._readCapability.resolve()}catch(l){this._readCapability.reject(l)}}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:{value:L4(t),done:!1}}cancel(t){this._reader?.cancel(t)}}const Rd=Symbol("INITIAL_DATA");class O4{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Rd}}get(t,e=null){if(e){const i=this.#e(t);return i.promise.then(()=>e(i.data)),null}const n=this.#t[t];if(!n||n.data===Rd)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=this.#t[t];return!!e&&e.data!==Rd}delete(t){const e=this.#t[t];return!e||e.data===Rd?!1:(delete this.#t[t],!0)}resolve(t,e=null){const n=this.#e(t);n.data=e,n.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Rd&&(yield[t,e])}}}const tD=1e5,F_=30;class _o{#t=Promise.withResolvers();#e=null;#r=!1;#n=!!globalThis.FontInspector?.enabled;#i=null;#a=null;#s=0;#o=0;#u=null;#l=null;#f=0;#h=0;#d=Object.create(null);#g=[];#m=null;#c=[];#p=new WeakMap;#y=null;static#b=new Map;static#v=new Map;static#S=new WeakMap;static#A=null;static#w=new Set;constructor({textContentSource:t,container:e,viewport:n}){if(t instanceof ReadableStream)this.#m=t;else if(typeof t=="object")this.#m=new ReadableStream({start(c){c.enqueue(t),c.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=n.scale*lu.pixelRatio,this.#f=n.rotation,this.#a={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:s,pageX:l,pageY:o}=n.rawDims;this.#y=[1,0,0,-1,-l,o+s],this.#o=i,this.#s=s,_o.#k(),e.style.setProperty("--min-font-size",_o.#A),uh(e,n),this.#t.promise.finally(()=>{_o.#w.delete(this),this.#a=null,this.#d=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=ws.platform;return Nn(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#u.read().then(({value:e,done:n})=>{if(n){this.#t.resolve();return}this.#i??=e.lang,Object.assign(this.#d,e.styles),this.#C(e.items),t()},this.#t.reject)};return this.#u=this.#m.getReader(),_o.#w.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const n=t.scale*lu.pixelRatio,i=t.rotation;if(i!==this.#f&&(e?.(),this.#f=i,uh(this.#l,{rotation:i})),n!==this.#h){e?.(),this.#h=n;const s={div:null,properties:null,ctx:_o.#R(this.#i)};for(const l of this.#c)s.properties=this.#p.get(l),s.div=l,this.#E(s)}}cancel(){const t=new Tc("TextLayer task cancelled.");this.#u?.cancel(t).catch(()=>{}),this.#u=null,this.#t.reject(t)}get textDivs(){return this.#c}get textContentItemsStr(){return this.#g}#C(t){if(this.#r)return;this.#a.ctx??=_o.#R(this.#i);const e=this.#c,n=this.#g;for(const i of t){if(e.length>tD){Tn("Ignoring additional textDivs for performance reasons."),this.#r=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const s=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),i.id&&this.#e.setAttribute("id",`${i.id}`),i.tag==="Artifact"&&(this.#e.ariaHidden=!0),s.append(this.#e)}else i.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}n.push(i.str),this.#x(i)}}#x(t){const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#c.push(e);const i=Ge.transform(this.#y,t.transform);let s=Math.atan2(i[1],i[0]);const l=this.#d[t.fontName];l.vertical&&(s+=Math.PI/2);let o=this.#n&&l.fontSubstitution||l.fontFamily;o=_o.fontFamilyMap.get(o)||o;const c=Math.hypot(i[2],i[3]),h=c*_o.#B(o,l,this.#i);let f,p;s===0?(f=i[4],p=i[5]-h):(f=i[4]+h*Math.sin(s),p=i[5]-h*Math.cos(s));const y=e.style;y.left=`${(100*f/this.#o).toFixed(2)}%`,y.top=`${(100*p/this.#s).toFixed(2)}%`,y.setProperty("--font-height",`${c.toFixed(2)}px`),y.fontFamily=o,n.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),s!==0&&(n.angle=s*(180/Math.PI));let m=!1;if(t.str.length>1)m=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const w=Math.abs(t.transform[0]),b=Math.abs(t.transform[3]);w!==b&&Math.max(w,b)/Math.min(w,b)>1.5&&(m=!0)}if(m&&(n.canvasWidth=l.vertical?t.height:t.width),this.#p.set(e,n),this.#a.div=e,this.#a.properties=n,this.#E(this.#a),n.hasText&&this.#e.append(e),n.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#e.append(w)}}#E(t){const{div:e,properties:n,ctx:i}=t,{style:s}=e;if(n.canvasWidth!==0&&n.hasText){const{fontFamily:l}=s,{canvasWidth:o,fontSize:c}=n;_o.#N(i,c*this.#h,l);const{width:h}=i.measureText(e.textContent);h>0&&s.setProperty("--scale-x",o*this.#h/h)}n.angle!==0&&s.setProperty("--rotate",`${n.angle}deg`)}static cleanup(){if(!(this.#w.size>0)){this.#b.clear();for(const{canvas:t}of this.#v.values())t.remove();this.#v.clear()}}static#R(t=null){let e=this.#v.get(t||="");if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(t,e),this.#S.set(e,{size:0,family:""})}return e}static#N(t,e,n){const i=this.#S.get(t);e===i.size&&n===i.family||(t.font=`${e}px ${n}`,i.size=e,i.family=n)}static#k(){if(this.#A!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#A=t.getBoundingClientRect().height,t.remove()}static#B(t,e,n){const i=this.#b.get(t);if(i)return i;const s=this.#R(n);s.canvas.width=s.canvas.height=F_,this.#N(s,F_,t);const l=s.measureText(""),o=l.fontBoundingBoxAscent,c=Math.abs(l.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let h=.8;return o?h=o/(o+c):(ws.platform.isFirefox&&Tn("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?h=e.ascent:e.descent&&(h=1+e.descent)),this.#b.set(t,h),h}}const eD=100;function D4(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const t=new C2,{docId:e}=t,n=r.url?uO(r.url):null,i=r.data?cO(r.data):null,s=r.httpHeaders||null,l=r.withCredentials===!0,o=r.password??null,c=r.range instanceof P4?r.range:null,h=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let f=r.worker instanceof rp?r.worker:null;const p=r.verbosity,y=typeof r.docBaseUrl=="string"&&!Ug(r.docBaseUrl)?r.docBaseUrl:null,m=bm(r.cMapUrl),w=r.cMapPacked!==!1,b=r.CMapReaderFactory||(Ta?vO:w_),_=bm(r.iccUrl),v=bm(r.standardFontDataUrl),A=r.StandardFontDataFactory||(Ta?bO:x_),C=bm(r.wasmUrl),S=r.WasmFactory||(Ta?wO:__),O=r.stopAtErrors!==!0,q=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,H=r.isEvalSupported!==!1,Q=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!Ta,I=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!Ta&&(ws.platform.isFirefox||!globalThis.chrome),dt=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,nt=typeof r.disableFontFace=="boolean"?r.disableFontFace:Ta,B=r.fontExtraProperties===!0,Z=r.enableXfa===!0,D=r.ownerDocument||globalThis.document,mt=r.disableRange===!0,it=r.disableStream===!0,st=r.disableAutoFetch===!0,vt=r.pdfBug===!0,wt=r.CanvasFactory||(Ta?yO:pO),Ft=r.FilterFactory||(Ta?gO:mO),$=r.enableHWA===!0,R=r.useWasm!==!1,K=c?c.length:r.length??NaN,rt=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!Ta&&!nt,pt=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(b===w_&&A===x_&&S===__&&m&&v&&C&&qd(m,document.baseURI)&&qd(v,document.baseURI)&&qd(C,document.baseURI)),ct=null;FL(p);const F={canvasFactory:new wt({ownerDocument:D,enableHWA:$}),filterFactory:new Ft({docId:e,ownerDocument:D}),cMapReaderFactory:pt?null:new b({baseUrl:m,isCompressed:w}),standardFontDataFactory:pt?null:new A({baseUrl:v}),wasmFactory:pt?null:new S({baseUrl:C})};f||(f=rp.create({verbosity:p,port:vf.workerPort}),t._worker=f);const j={docId:e,apiVersion:"5.4.624",data:i,password:o,disableAutoFetch:st,rangeChunkSize:h,length:K,docBaseUrl:y,enableXfa:Z,evaluatorOptions:{maxImageSize:q,disableFontFace:nt,ignoreErrors:O,isEvalSupported:H,isOffscreenCanvasSupported:Q,isImageDecoderSupported:I,canvasMaxAreaInBytes:dt,fontExtraProperties:B,useSystemFonts:rt,useWasm:R,useWorkerFetch:pt,cMapUrl:m,iccUrl:_,standardFontDataUrl:v,wasmUrl:C}},ht={ownerDocument:D,pdfBug:vt,styleElement:ct,enableHWA:$,loadingParams:{disableAutoFetch:st,enableXfa:Z}};return f.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const ot=f.messageHandler.sendWithPromise("GetDocRequest",j,i?[i.buffer]:null);let lt;if(c)lt=new IO({pdfDataRangeTransport:c,disableRange:mt,disableStream:it});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");const ft=qd(n)?qO:Ta?QO:WO;lt=new ft({url:n,length:K,httpHeaders:s,withCredentials:l,rangeChunkSize:h,disableRange:mt,disableStream:it})}return ot.then(ft=>{if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Mt=new Hd(e,ft,f.port),W=new iD(Mt,t,lt,ht,F);t._transport=W,Mt.send("Ready",null)})}).catch(t._capability.reject),t}class C2{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${C2.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class P4{#t=Promise.withResolvers();#e=[];#r=[];#n=[];#i=[];constructor(t,e,n=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(t){this.#i.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#r.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const n of this.#i)n(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const n of this.#n)n(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#r)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Cr("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class nD{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Nn(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class rD{#t=!1;#e=Ar.instance;constructor(t,e,n,i=!1){this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new d_:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new O4,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(t){this._pageIndex=t-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:s=!1}={}){return new mp({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:s})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Nn(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:i="display",annotationMode:s=wc.ENABLE,transform:l=null,background:o=null,optionalContentConfigPromise:c=null,annotationCanvasMap:h=null,pageColors:f=null,printAnnotationStorage:p=null,isEditing:y=!1,recordOperations:m=!1,operationsFilter:w=null}){this._stats?.time("Overall");const b=this._transport.getRenderingIntent(i,s,p,y),{renderingIntent:_,cacheKey:v}=b;this.#t=!1,c||=this._transport.getOptionalContentConfig(_);let A=this._intentStates.get(v);A||(A=Object.create(null),this._intentStates.set(v,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const C=!!(_&xo.PRINT);A.displayReadyCapability||(A.displayReadyCapability=Promise.withResolvers(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(b));const S=!!(this._pdfBug&&globalThis.StepperManager?.enabled),O=!this.recordedBBoxes&&(m||S),q=I=>{if(A.renderTasks.delete(H),O){const dt=H.gfx?.dependencyTracker.take();dt&&(H.stepper&&H.stepper.setOperatorBBoxes(dt,H.gfx.dependencyTracker.takeDebugMetadata()),m&&(this.recordedBBoxes=dt))}C&&(this.#t=!0),this.#r(),I?(H.capability.reject(I),this._abortOperatorList({intentState:A,reason:I instanceof Error?I:new Error(I)})):H.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},H=new ff({callback:q,params:{canvas:e,canvasContext:t,dependencyTracker:O?new _O(e,A.operatorList.length,S):null,viewport:n,transform:l,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:w});(A.renderTasks||=new Set).add(H);const Q=H.task;return Promise.all([A.displayReadyCapability.promise,c]).then(([I,dt])=>{if(this.destroyed){q();return}if(this._stats?.time("Rendering"),!(dt.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");H.initializeGraphics({transparency:I,optionalContentConfig:dt}),H.operatorListChanged()}).catch(q),Q}getOperatorList({intent:t="display",annotationMode:e=wc.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(c))}const l=this._transport.getRenderingIntent(t,e,n,i,!0);let o=this._intentStates.get(l.cacheKey);o||(o=Object.create(null),this._intentStates.set(l.cacheKey,o));let c;return o.opListReadCapability||(c=Object.create(null),c.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||=new Set).add(c),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:this.#e.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>np.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,i){function s(){l.read().then(function({value:c,done:h}){if(h){n(o);return}o.lang??=c.lang,Object.assign(o.styles,c.styles),o.items.push(...c.items),s()},i)}const l=e.getReader(),o={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#r();return t&&e&&(this._stats&&=new d_),e}#r(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const n=this._intentStates.get(e);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&this.#r()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:i}){const{map:s,transfer:l}=n,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:this.#e.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:s,modifiedIds:i},l).getReader(),h=this._intentStates.get(e);h.streamReader=c;const f=()=>{c.read().then(({value:p,done:y})=>{if(y){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,h),f())},p=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const y of h.renderTasks)y.operatorListChanged();this.#r()}if(h.displayReadyCapability)h.displayReadyCapability.reject(p);else if(h.opListReadCapability)h.opListReadCapability.reject(p);else throw p}})};f()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof v2){let i=eD;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new Tc(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,s]of this._intentStates)if(s===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}var _c,dl,Uu,th,Cg,eh,nh,Ra,Jm,M4,F4,Gd,Tf,tg;const di=class di{constructor({name:t=null,port:e=null,verbosity:n=BL()}={}){Gl(this,Ra);Gl(this,_c,Promise.withResolvers());Gl(this,dl,null);Gl(this,Uu,null);Gl(this,th,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(hi(di,nh).has(e))throw new Error("Cannot use more than one PDFWorker per port.");hi(di,nh).set(e,this),Vl(this,Ra,M4).call(this,e)}else Vl(this,Ra,F4).call(this)}get promise(){return hi(this,_c).promise}get port(){return hi(this,Uu)}get messageHandler(){return hi(this,dl)}destroy(){this.destroyed=!0,hi(this,th)?.terminate(),Xa(this,th,null),hi(di,nh).delete(hi(this,Uu)),Xa(this,Uu,null),hi(this,dl)?.destroy(),Xa(this,dl,null)}static create(t){const e=hi(this,nh).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new di(t)}static get workerSrc(){if(vf.workerSrc)return vf.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Nn(this,"_setupFakeWorkerGlobal",(async()=>hi(this,Tf,tg)?hi(this,Tf,tg):(await import(this.workerSrc)).WorkerMessageHandler)())}};_c=new WeakMap,dl=new WeakMap,Uu=new WeakMap,th=new WeakMap,Cg=new WeakMap,eh=new WeakMap,nh=new WeakMap,Ra=new WeakSet,Jm=function(){hi(this,_c).resolve(),hi(this,dl).send("configure",{verbosity:this.verbosity})},M4=function(t){Xa(this,Uu,t),Xa(this,dl,new Hd("main","worker",t)),hi(this,dl).on("ready",()=>{}),Vl(this,Ra,Jm).call(this)},F4=function(){if(hi(di,eh)||hi(di,Tf,tg)){Vl(this,Ra,Gd).call(this);return}let{workerSrc:t}=di;try{di._isSameOrigin(window.location,t)||(t=di._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Hd("main","worker",e),i=()=>{s.abort(),n.destroy(),e.terminate(),this.destroyed?hi(this,_c).reject(new Error("Worker was destroyed")):Vl(this,Ra,Gd).call(this)},s=new AbortController;e.addEventListener("error",()=>{hi(this,th)||i()},{signal:s.signal}),n.on("test",o=>{if(s.abort(),this.destroyed||!o){i();return}Xa(this,dl,n),Xa(this,Uu,e),Xa(this,th,e),Vl(this,Ra,Jm).call(this)}),n.on("ready",o=>{if(s.abort(),this.destroyed){i();return}try{l()}catch{Vl(this,Ra,Gd).call(this)}});const l=()=>{const o=new Uint8Array;n.send("test",o,[o.buffer])};l();return}catch{Ig("The worker has been disabled.")}Vl(this,Ra,Gd).call(this)},Gd=function(){hi(di,eh)||(Tn("Setting up fake worker."),Xa(di,eh,!0)),di._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){hi(this,_c).reject(new Error("Worker was destroyed"));return}const e=new dO;Xa(this,Uu,e);const n=`fake${px(di,Cg)._++}`,i=new Hd(n+"_worker",n,e);t.setup(i,e),Xa(this,dl,new Hd(n,n+"_worker",e)),Vl(this,Ra,Jm).call(this)}).catch(t=>{hi(this,_c).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Tf=new WeakSet,tg=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Gl(di,Tf),Gl(di,Cg,0),Gl(di,eh,!1),Gl(di,nh,new WeakMap),Ta&&(Xa(di,eh,!0),vf.workerSrc||="./pdf.worker.mjs"),di._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!n?.origin||n.origin==="null")return!1;const i=new URL(e,n);return n.origin===i.origin},di._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},di.fromPort=t=>{if(XL("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return di.create(t)};let rp=di;class iD{downloadInfoCapability=Promise.withResolvers();#t=null;#e=new Map;#r=null;#n=new Map;#i=new Map;#a=new Map;#s=null;#o=Ar.instance;constructor(t,e,n,i,s){this.messageHandler=t,this.loadingTask=e,this.#r=n,this.commonObjs=new O4,this.fontLoader=new aO({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.enableHWA=i.enableHWA,this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),this.#o.addListener(this.#u.bind(this))}#u(){const t=new Map,e=new Map;for(let n=0,i=this.#o.pagesNumber;n<i;n++){const s=this.#o.getPrevPageNumber(n+1)-1,l=this.#n.get(s);l&&t.set(n,l);const o=this.#i.get(s);o&&e.set(n,o)}this.#n=t,this.#i=e}#l(t,e=null){const n=this.#e.get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,e);return this.#e.set(t,i),i}#f({loaded:t,total:e}){this.loadingTask.onProgress?.({loaded:t,total:e,percent:Ks(Math.round(t/e*100),0,100)})}get annotationStorage(){return Nn(this,"annotationStorage",new _2)}getRenderingIntent(t,e=wc.ENABLE,n=null,i=!1,s=!1){let l=xo.DISPLAY,o=xb;switch(t){case"any":l=xo.ANY;break;case"display":break;case"print":l=xo.PRINT;break;default:Tn(`getRenderingIntent - invalid intent: ${t}`)}const c=l&xo.PRINT&&n instanceof y4?n:this.annotationStorage;switch(e){case wc.DISABLE:l+=xo.ANNOTATIONS_DISABLE;break;case wc.ENABLE:break;case wc.ENABLE_FORMS:l+=xo.ANNOTATIONS_FORMS;break;case wc.ENABLE_STORAGE:l+=xo.ANNOTATIONS_STORAGE,o=c.serializable;break;default:Tn(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(l+=xo.IS_EDITING),s&&(l+=xo.OPLIST);const{ids:h,hash:f}=c.modifiedIds,p=[l,o.hash,f];return{renderingIntent:l,cacheKey:p.join("_"),annotationStorageSerializable:o,modifiedIds:h}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of this.#n.values())t.push(n._destroy());this.#n.clear(),this.#i.clear(),this.#a.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),_o.cleanup(),this.#r?.cancelAllRequests(new Tc("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,i)=>{Er(this.#r,"GetReader - no `BasePDFStream` instance available."),this.#t=this.#r.getFullReader(),this.#t.onProgress=s=>this.#f(s),i.onPull=()=>{this.#t.read().then(function({value:s,done:l}){if(l){i.close();return}Er(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this.#t.cancel(s),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async n=>{await this.#t.headersReady;const{isStreamingSupported:i,isRangeSupported:s,contentLength:l}=this.#t;return i&&s&&(this.#t.onProgress=null),{isStreamingSupported:i,isRangeSupported:s,contentLength:l}}),t.on("GetRangeReader",(n,i)=>{Er(this.#r,"GetRangeReader - no `BasePDFStream` instance available.");const s=this.#r.getRangeReader(n.begin,n.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:l,done:o}){if(o){i.close();return}Er(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{i.error(l)})},i.onCancel=l=>{s.cancel(l),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("GetDoc",({pdfInfo:n})=>{this.#o.pagesNumber=n.numPages,this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new nD(n,this))}),t.on("DocException",n=>{e._capability.reject(Ya(n))}),t.on("PasswordRequest",n=>{this.#s=Promise.withResolvers();try{if(!e.onPassword)throw Ya(n);const i=s=>{s instanceof Error?this.#s.reject(s):this.#s.resolve({password:s})};e.onPassword(i,n.code)}catch(i){this.#s.reject(i)}return this.#s.promise}),t.on("DataLoaded",n=>{this.#f({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;this.#n.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,i,s])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in s){const p=s.error;Tn(`Error during font loading: ${p}`),this.commonObjs.resolve(n,p);break}const l=new zr(s),o=this._params.pdfBug&&globalThis.FontInspector?.enabled?(p,y)=>globalThis.FontInspector.fontAdded(p,y):null,c=new oO(l,o,s.extra,s.charProcOperatorList);this.fontLoader.bind(c).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c.fontExtraProperties&&c.data&&c.clearData(),this.commonObjs.resolve(n,c)});break;case"CopyLocalImage":const{imageRef:h}=s;Er(h,"The imageRef must be defined.");for(const p of this.#n.values())for(const[,y]of p.objs)if(y?.ref===h)return y.dataLen?(this.commonObjs.resolve(n,structuredClone(y)),y.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new lO(s));break;case"Image":this.commonObjs.resolve(n,s);break;case"Pattern":const f=new Ls(s);this.commonObjs.resolve(n,f.getIR());break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([n,i,s,l])=>{if(this.destroyed)return;const o=this.#n.get(i);if(!o.objs.has(n)){if(o._intentStates.size===0){l?.bitmap?.close();return}switch(s){case"Image":case"Pattern":o.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${s}`)}}}),t.on("DocProgress",n=>{this.destroyed||this.#f(n)}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Tn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this.#t?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this.#o.pagesNumber)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=this.#o.getPageId(t)-1,i=this.#i.get(e);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&this.#a.set(l.refStr,n);const o=new rD(e,l,this,this._params.pdfBug);return this.#n.set(e,o),o});return this.#i.set(e,s),s}async getPageIndex(t){if(!_b(t))throw new Error("Invalid pageIndex request.");const e=await this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen});return this.#o.getPageNumber(e+1)-1}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:this.#o.getPageId(t+1)-1,intent:e})}getFieldObjects(){return this.#l("GetFieldObjects")}hasJSActions(){return this.#l("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#l("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:this.#o.getPageId(t+1)-1})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:this.#o.getPageId(t+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#l("GetOptionalContentConfig").then(e=>new BO(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#e.get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(i=>({info:i[0],metadata:i[1]?new MO(i[1]):null,contentDispositionFilename:this.#t?.filename??null,contentLength:this.#t?.contentLength??null,hasStructTree:i[2]}));return this.#e.set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#n.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),_o.cleanup()}}cachedPageNumber(t){if(!_b(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`,n=this.#a.get(e);return n>=0?this.#o.getPageNumber(n+1):null}}class sD{_internalRenderTask=null;onContinue=null;onError=null;constructor(t){this._internalRenderTask=t}get promise(){return this._internalRenderTask.capability.promise}cancel(t=0){this._internalRenderTask.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this._internalRenderTask.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this._internalRenderTask;return t.form||t.canvas&&e?.size>0}}class ff{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:n,commonObjs:i,annotationCanvasMap:s,operatorList:l,pageIndex:o,canvasFactory:c,filterFactory:h,useRequestAnimationFrame:f=!1,pdfBug:p=!1,pageColors:y=null,enableHWA:m=!1,operationsFilter:w=null}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=o,this.canvasFactory=c,this.filterFactory=h,this._pdfBug=p,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new sD(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=m,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(ff.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ff.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:i,background:s,dependencyTracker:l}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new yf(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:i,viewport:n,transparency:t,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ff.#e.delete(this._canvas),t||=new v2(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ff.#e.delete(this._canvas),this.callback())))}}const aD="5.4.624",oD="384c6208b";let B4=class Zl{#t=null;#e=null;#r;#n=null;#i=!1;#a=!1;#s=null;#o;#u=null;#l=null;static#f=null;static get _keyboardManager(){return Nn(this,"_keyboardManager",new yp([[["Escape","mac+Escape"],Zl.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Zl.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Zl.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Zl.prototype._moveToPrevious],[["Home","mac+Home"],Zl.prototype._moveToBeginning],[["End","mac+End"],Zl.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#a=!1,this.#s=t):this.#a=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#r=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Zl.#f||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#m.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const n=this.#e=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#r,t.append(n),t}renderMainDropdown(){const t=this.#n=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",Vo,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[n,i]of this.#l.highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=n,s.setAttribute("data-l10n-id",Zl.#f[n]);const l=document.createElement("span");s.append(l),l.className="swatch",l.style.backgroundColor=i,s.ariaSelected=i===this.#r,s.addEventListener("click",this.#d.bind(this,i),{signal:e}),t.append(s)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#d(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:ir.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#m(t);return}const e=t.target.getAttribute("data-color");e&&this.#d(e,t)}_moveToNext(t){if(!this.#p){this.#m(t);return}if(t.target===this.#t){this.#n.firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstElementChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#m(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#m(t);return}this.#n.firstElementChild?.focus()}_moveToEnd(t){if(!this.#p){this.#m(t);return}this.#n.lastElementChild?.focus()}#g(t){Zl._keyboardManager.exec(this,t)}#m(t){if(this.#p){this.hideDropdown();return}if(this.#i=t.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#c.bind(this),{signal:this.#l.combinedSignal(this.#u)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#h();this.#t.append(e)}#c(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#u?.abort(),this.#u=null}get#p(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#p){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#i})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#l.highlightColors.values();for(const n of this.#n.children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}};class ip{#t=null;#e=null;#r=null;static#n=null;constructor(t){this.#e=t,this.#r=t._uiManager,ip.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,color:n}=this.#e,i=this.#t=document.createElement("input");return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",ip.#n[t]),i.addEventListener("input",()=>{this.#r.updateParams(e,i.value)},{signal:this.#r._signal}),i}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function B_(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function Ld(r){return Math.max(0,Math.min(255,255*r))}class I_{static CMYK_G([t,e,n,i]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Ld(t),[t,t,t]}static G_HTML([t]){const e=B_(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Ld)}static RGB_HTML(t){return`#${t.map(B_).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,n+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,n,i]){return[Ld(1-Math.min(1,t+i)),Ld(1-Math.min(1,n+i)),Ld(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const i=1-t,s=1-e,l=1-n,o=Math.min(i,s,l);return["CMYK",i,s,l,o]}}class lD{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Cr("Abstract method `_createSVG` called.")}}class wg extends lD{_createSVG(t){return document.createElementNS(Bu,t)}}const uD=9,ch=new WeakSet,cD=new Date().getTimezoneOffset()*60*1e3;class j1{static create(t){switch(t.data.annotationType){case ss.LINK:return new T2(t);case ss.TEXT:return new fD(t);case ss.WIDGET:switch(t.data.fieldType){case"Tx":return new dD(t);case"Btn":return t.data.radioButton?new I4(t):t.data.checkBox?new mD(t):new gD(t);case"Ch":return new yD(t);case"Sig":return new pD(t)}return new mh(t);case ss.POPUP:return new Eb(t);case ss.FREETEXT:return new j4(t);case ss.LINE:return new bD(t);case ss.SQUARE:return new wD(t);case ss.CIRCLE:return new xD(t);case ss.POLYLINE:return new U4(t);case ss.CARET:return new AD(t);case ss.INK:return new N2(t);case ss.POLYGON:return new _D(t);case ss.HIGHLIGHT:return new z4(t);case ss.UNDERLINE:return new SD(t);case ss.SQUIGGLY:return new ED(t);case ss.STRIKEOUT:return new CD(t);case ss.STAMP:return new q4(t);case ss.FILEATTACHMENT:return new TD(t);default:return new _i(t)}}}class _i{#t=null;#e=!1;#r=null;constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return _i._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:i}=this.data;let s=-1/0,l=-1/0;if(e?.length>=8){for(let o=0;o<e.length;o+=8)e[o+1]>l?(l=e[o+1],s=e[o+2]):e[o+1]===l&&(s=Math.max(s,e[o+2]));return[s,l]}if(n?.length>=1){for(const o of n)for(let c=0,h=o.length;c<h;c+=2)o[c+1]>l?(l=o[c+1],s=o[c]):o[c+1]===l&&(s=Math.max(s,o[c]));if(s!==1/0)return[s,l]}return i?[i[2],i[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:s,pageY:l}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-s)/n,t[1]=100*(t[1]-l)/i,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${tp}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${tp}${e.id}`,{id:e.id,annotationType:e.annotationType,page:this.parent.page,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#r?.popup||this.popup)?.remove(),this.#r=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:n}=t;e&&this.#n(e);let i=this.#r?.popup||this.popup;!i&&n?.text&&(this._createPopup(n),i=this.#r.popup),i&&(i.updateEdited(t),n?.deleted&&(i.remove(),this.#r=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#r?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:l,pageX:o,pageY:c}}}}=this;n?.splice(0,4,...t),e.left=`${100*(t[0]-o)/s}%`,e.top=`${100*(l-t[3]+c)/l}%`,i===0?(e.width=`${100*(t[2]-t[0])/s}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(i)}_createContainer(t){const{data:e,parent:{page:n,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",e.id),!(this instanceof mh)&&!(this instanceof T2)&&(s.tabIndex=0);const{style:l}=s;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(s.title=e.alternativeText),e.noRotate&&s.classList.add("norotate"),!e.rect||this instanceof Eb){const{rotation:b}=e;return!e.hasOwnCanvas&&b!==0&&this.setRotation(b,s),s}const{width:o,height:c}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const b=e.borderStyle.horizontalCornerRadius,_=e.borderStyle.verticalCornerRadius;if(b>0||_>0){const A=`calc(${b}px * var(--total-scale-factor)) / calc(${_}px * var(--total-scale-factor))`;l.borderRadius=A}else if(this instanceof I4){const A=`calc(${o}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;l.borderRadius=A}switch(e.borderStyle.style){case rf.SOLID:l.borderStyle="solid";break;case rf.DASHED:l.borderStyle="dashed";break;case rf.BEVELED:Tn("Unimplemented border style: beveled");break;case rf.INSET:Tn("Unimplemented border style: inset");break;case rf.UNDERLINE:l.borderBottomStyle="solid";break}const v=e.borderColor||null;v?(this.#e=!0,l.borderColor=Ge.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):l.borderWidth=0}const h=Ge.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:f,pageHeight:p,pageX:y,pageY:m}=i.rawDims;l.left=`${100*(h[0]-y)/f}%`,l.top=`${100*(h[1]-m)/p}%`;const{rotation:w}=e;return e.hasOwnCanvas||w===0?(l.width=`${100*o/f}%`,l.height=`${100*c/p}%`):this.setRotation(w,s),s}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:s,height:l}=this;t%180!==0&&([s,l]=[l,s]),e.style.width=`${100*s/n}%`,e.style.height=`${100*l/i}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,i)=>{const s=i.detail[e],l=s[0],o=s.slice(1);i.target.style[n]=I_[`${l}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[n]:I_[`${l}_rgb`](o)})};return Nn(this,"_commonActions",{display:e=>{const{display:n}=e.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail))(t[i]||n[i])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,s]of Object.entries(e)){const l=n[i];if(l){const o={detail:{[i]:s},target:t};l(o),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,s]=this.data.rect.map(b=>Math.fround(b));if(t.length===8){const[b,_,v,A]=t.subarray(2,6);if(i===b&&s===_&&e===v&&n===A)return}const{style:l}=this.container;let o;if(this.#e){const{borderColor:b,borderWidth:_}=l;l.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${b}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const c=i-e,h=s-n,{svgFactory:f}=this,p=f.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0),p.role="none";const y=f.createElement("defs");p.append(y);const m=f.createElement("clipPath"),w=`clippath_${this.data.id}`;m.setAttribute("id",w),m.setAttribute("clipPathUnits","objectBoundingBox"),y.append(m);for(let b=2,_=t.length;b<_;b+=8){const v=t[b],A=t[b+1],C=t[b+2],S=t[b+3],O=f.createElement("rect"),q=(C-e)/c,H=(s-A)/h,Q=(v-C)/c,I=(A-S)/h;O.setAttribute("x",q),O.setAttribute("y",H),O.setAttribute("width",Q),O.setAttribute("height",I),m.append(O),o?.push(`<rect vector-effect="non-scaling-stroke" x="${q}" y="${H}" width="${Q}" height="${I}"/>`)}this.#e&&(o.push("</g></svg>')"),l.backgroundImage=o.join("")),this.container.append(p),this.container.style.clipPath=`url(#${w})`}_createPopup(t=null){const{data:e}=this;let n,i;t?(n={str:t.text},i=t.date):(n=e.contentsObj,i=e.modificationDate),this.#r=new Eb({data:{color:e.color,titleObj:e.titleObj,modificationDate:i,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#r||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#r}render(){Cr("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:s,id:l,exportValues:o}of i){if(s===-1||l===e)continue;const c=typeof o=="string"?o:null,h=document.querySelector(`[data-element-id="${l}"]`);if(h&&!ch.has(h)){Tn(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:c,domElement:h})}return n}for(const i of document.getElementsByName(t)){const{exportValue:s}=i,l=i.getAttribute("data-element-id");l!==e&&ch.has(i)&&n.push({id:l,exportValue:s,domElement:i})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class hD extends _i{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class T2 extends _i{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let i=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(n,t.action,t.overlaidText),i=!0):t.attachment?(this.#e(n,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(this.#r(n,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(n,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),i=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&(this.contentElement=n,this.container.append(n)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,n=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),n&&(t.title=n)}_bindNamedAction(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),n&&(t.title=n),this.#t()}#e(t,e,n="",i=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:n&&(t.title=n),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,i),!1),this.#t()}#r(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),n&&(t.title=n),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(e.actions)){const s=n.get(i);s&&(t[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:i}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){Tn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{n?.();const{fields:i,refs:s,include:l}=e,o=[];if(i.length!==0||s.length!==0){const f=new Set(s);for(const p of i){const y=this._fieldObjects[p]||[];for(const{id:m}of y)f.add(m)}for(const p of Object.values(this._fieldObjects))for(const y of p)f.has(y.id)===l&&o.push(y)}else for(const f of Object.values(this._fieldObjects))o.push(...f);const c=this.annotationStorage,h=[];for(const f of o){const{id:p}=f;switch(h.push(p),f.type){case"text":{const m=f.defaultValue||"";c.setValue(p,{value:m});break}case"checkbox":case"radiobutton":{const m=f.defaultValue===f.exportValues;c.setValue(p,{value:m});break}case"combobox":case"listbox":{const m=f.defaultValue||"";c.setValue(p,{value:m});break}default:continue}const y=document.querySelector(`[data-element-id="${p}"]`);if(y){if(!ch.has(y)){Tn(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}}),!1}}}class fD extends _i{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class mh extends _i{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return ws.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,s){n.includes("mouse")?t.addEventListener(n,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(n,l=>{if(n==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(l)}})})}_setEventListeners(t,e,n,i){for(const[s,l]of n)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,s,l,i),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Ge.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||uD,s=t.style;let l;const o=2,c=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-o),f=Math.round(h/(O1*i))||1,p=h/f;l=Math.min(i,c(p/O1))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-o);l=Math.min(i,c(h/O1))}s.fontSize=`calc(${l}px * var(--total-scale-factor))`,s.color=Ge.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(s.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class dD extends mh{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,i){const s=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=n),s.setValue(l.id,{[i]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const i=t.getValue(e,{value:this.data.fieldValue});let s=i.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&s.length>l&&(s=s.slice(0,l));let o=i.formattedValue||this.data.textContent?.join(`
`)||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));const c={userValue:s,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=o??s,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",o??s),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),ch.add(n),this.contentElement=n,n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:h,datetimeType:f,timeStep:p}=this.data,y=!!f&&this.enableScripting;h&&(n.title=h),this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",w=>{t.setValue(e,{value:w.target.value}),this.setPropertyOnSiblings(n,"value",w.target.value,"value"),c.formattedValue=null}),n.addEventListener("resetform",w=>{const b=this.data.defaultFieldValue??"";n.value=c.userValue=b,c.formattedValue=null});let m=w=>{const{formattedValue:b}=c;b!=null&&(w.target.value=b),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",b=>{if(c.focused)return;const{target:_}=b;if(y&&(_.type=f,p&&(_.step=p)),c.userValue){const v=c.userValue;if(y)if(f==="time"){const A=new Date(v),C=[A.getHours(),A.getMinutes(),A.getSeconds()];_.value=C.map(S=>S.toString().padStart(2,"0")).join(":")}else _.value=new Date(v-cD).toISOString().split(f==="date"?"T":".",1)[0];else _.value=v}c.lastCommittedValue=_.value,c.commitKey=1,this.data.actions?.Focus||(c.focused=!0)}),n.addEventListener("updatefromsandbox",b=>{this.showElementAndHideCanvas(b.target);const _={value(v){c.userValue=v.detail.value??"",y||t.setValue(e,{value:c.userValue.toString()}),v.target.value=c.userValue},formattedValue(v){const{formattedValue:A}=v.detail;c.formattedValue=A,A!=null&&v.target!==document.activeElement&&(v.target.value=A);const C={formattedValue:A};y&&(C.value=A),t.setValue(e,C)},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{const{charLimit:A}=v.detail,{target:C}=v;if(A===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",A);let S=c.userValue;!S||S.length<=A||(S=S.slice(0,A),C.value=c.userValue=S,t.setValue(e,{value:S}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(_,b)}),n.addEventListener("keydown",b=>{c.commitKey=1;let _=-1;if(b.key==="Escape"?_=0:b.key==="Enter"&&!this.data.multiLine?_=2:b.key==="Tab"&&(c.commitKey=3),_===-1)return;const{value:v}=b.target;c.lastCommittedValue!==v&&(c.lastCommittedValue=v,c.userValue=v,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,willCommit:!0,commitKey:_,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}}))});const w=m;m=null,n.addEventListener("blur",b=>{if(!c.focused||!b.relatedTarget)return;this.data.actions?.Blur||(c.focused=!1);const{target:_}=b;let{value:v}=_;if(y){if(v&&f==="time"){const A=v.split(":").map(C=>parseInt(C,10));v=new Date(2e3,0,1,A[0],A[1],A[2]||0).valueOf(),_.step=""}else v.includes("T")||(v=`${v}T00:00`),v=new Date(v).valueOf();_.type="text"}c.userValue=v,c.lastCommittedValue!==v&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,willCommit:!0,commitKey:c.commitKey,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}}),w(b)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",b=>{c.lastCommittedValue=null;const{data:_,target:v}=b,{value:A,selectionStart:C,selectionEnd:S}=v;let O=C,q=S;switch(b.inputType){case"deleteWordBackward":{const H=A.substring(0,C).match(/\w*[^\w]*$/);H&&(O-=H[0].length);break}case"deleteWordForward":{const H=A.substring(C).match(/^[^\w]*\w*/);H&&(q+=H[0].length);break}case"deleteContentBackward":C===S&&(O-=1);break;case"deleteContentForward":C===S&&(q+=1);break}b.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,change:_||"",willCommit:!1,selStart:O,selEnd:q}})}),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],b=>b.target.value)}if(m&&n.addEventListener("blur",m),this.data.comb){const b=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${b}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class pD extends mh{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class mD extends mh{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return ch.add(s),s.setAttribute("data-element-id",n),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=e.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",e.exportValue),s.tabIndex=0,s.addEventListener("change",l=>{const{name:o,checked:c}=l.target;for(const h of this._getElementsByName(o,n)){const f=c&&h.exportValue===e.exportValue;h.domElement&&(h.domElement.checked=f),t.setValue(h.id,{value:f})}t.setValue(n,{value:c})}),s.addEventListener("resetform",l=>{const o=e.defaultFieldValue||"Off";l.target.checked=o===e.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",l=>{const o={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(o,l)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class I4 extends mh{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(const l of this._getElementsByName(e.fieldName,n))t.setValue(l.id,{value:!1});const s=document.createElement("input");if(ch.add(s),s.setAttribute("data-element-id",n),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=e.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",l=>{const{name:o,checked:c}=l.target;for(const h of this._getElementsByName(o,n))t.setValue(h.id,{value:!1});t.setValue(n,{value:c})}),s.addEventListener("resetform",l=>{const o=e.defaultFieldValue;l.target.checked=o!=null&&o===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;s.addEventListener("updatefromsandbox",o=>{const c={value:h=>{const f=l===h.detail.value;for(const p of this._getElementsByName(h.target.name)){const y=f&&p.id===n;p.domElement&&(p.domElement.checked=y),t.setValue(p.id,{value:y})}}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class gD extends T2{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class yD extends mh{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");ch.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue;for(const y of i.options)y.selected=y.value===p});for(const f of this.data.options){const p=document.createElement("option");p.textContent=f.displayValue,p.value=f.exportValue,n.value.includes(f.exportValue)&&(p.setAttribute("selected",!0),s=!1),i.append(p)}let l=null;if(s){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),i.prepend(f),l=()=>{f.remove(),i.removeEventListener("input",l),l=null},i.addEventListener("input",l)}const o=f=>{const p=f?"value":"textContent",{options:y,multiple:m}=i;return m?Array.prototype.filter.call(y,w=>w.selected).map(w=>w[p]):y.selectedIndex===-1?null:y[y.selectedIndex][p]};let c=o(!1);const h=f=>{const p=f.target.options;return Array.prototype.map.call(p,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",f=>{const p={value(y){l?.();const m=y.detail.value,w=new Set(Array.isArray(m)?m:[m]);for(const b of i.options)b.selected=w.has(b.value);t.setValue(e,{value:o(!0)}),c=o(!1)},multipleSelection(y){i.multiple=!0},remove(y){const m=i.options,w=y.detail.remove;m[w].selected=!1,i.remove(w),m.length>0&&Array.prototype.findIndex.call(m,_=>_.selected)===-1&&(m[0].selected=!0),t.setValue(e,{value:o(!0),items:h(y)}),c=o(!1)},clear(y){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),c=o(!1)},insert(y){const{index:m,displayValue:w,exportValue:b}=y.detail.insert,_=i.children[m],v=document.createElement("option");v.textContent=w,v.value=b,_?_.before(v):i.append(v),t.setValue(e,{value:o(!0),items:h(y)}),c=o(!1)},items(y){const{items:m}=y.detail;for(;i.length!==0;)i.remove(0);for(const w of m){const{displayValue:b,exportValue:_}=w,v=document.createElement("option");v.textContent=b,v.value=_,i.append(v)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:o(!0),items:h(y)}),c=o(!1)},indices(y){const m=new Set(y.detail.indices);for(const w of y.target.options)w.selected=m.has(w.index);t.setValue(e,{value:o(!0)}),c=o(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(p,f)}),i.addEventListener("input",f=>{const p=o(!0),y=o(!1);t.setValue(e,{value:p}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:y,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):i.addEventListener("input",function(f){t.setValue(e,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Eb extends _i{constructor(t){const{data:e,elements:n,parent:i}=t,s=!!i._commentManager;if(super(t,{isRenderable:!s&&_i._hasPopupData(e)}),this.elements=n,s&&_i._hasPopupData(e)){const l=this.popup=this.#t();for(const o of n)o.popup=l}else this.popup=null}#t(){return new vD({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),n=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",n.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(i=>`${cf}${i}`).join(",")),this.container}}class vD{#t=null;#e=this.#G.bind(this);#r=this.#j.bind(this);#n=this.#D.bind(this);#i=this.#_.bind(this);#a=null;#s=null;#o=null;#u=null;#l=null;#f=null;#h=null;#d=!1;#g=null;#m=null;#c=null;#p=null;#y=null;#b=null;#v=null;#S=null;#A=null;#w=null;#C=!1;#x=null;#E=null;constructor({container:t,color:e,elements:n,titleObj:i,modificationDate:s,contentsObj:l,richText:o,parent:c,rect:h,parentRect:f,open:p,commentManager:y=null}){this.#s=t,this.#A=i,this.#o=l,this.#S=o,this.#f=c,this.#a=e,this.#v=h,this.#h=f,this.#l=n,this.#t=y,this.#x=n[0],this.#u=vb.toDateObject(s),this.trigger=n.flatMap(m=>m.getElementsToTriggerPopup()),y||(this.#R(),this.#s.hidden=!0,p&&this.#_())}#R(){if(this.#m)return;this.#m=new AbortController;const{signal:t}=this.#m;for(const e of this.trigger)e.addEventListener("click",this.#i,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#r,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#N(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#x.container.after(this.#p);return}if(this.#y||this.#N(),!this.#y)return;const{signal:t}=this.#m=new AbortController,e=this.#x.hasOwnCommentButton,n=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},i=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},s=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#p=this.#x.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",i,{signal:t}),l.addEventListener("pointerleave",s,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=this.#p=document.createElement("button");l.className="annotationCommentButton";const o=this.#x.container;l.style.zIndex=o.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#B(),this.#k(),l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",i,{signal:t}),l.addEventListener("pointerleave",s,{signal:t}),o.after(l)}}#k(){if(this.#x.extraPopupElement&&!this.#x.editor)return;this.#p||this.renderCommentButton();const[t,e]=this.#y,{style:n}=this.#p;n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`}#B(){this.#x.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#x.commentData;return t?this.#f._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:i,modificationDate:s}=this.#x.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:i,modificationDate:s}}get elementBeforePopup(){return this.#p}get comment(){return this.#E||=this.#x.commentText,this.#E}set comment(t){t!==this.comment&&(this.#x.commentText=this.#E=t)}focus(){this.#x.container?.focus()}get parentBoundingClientRect(){return this.#x.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=e)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:t,y:e,height:n}=this.#p.getBoundingClientRect(),{x:i,y:s,width:l,height:o}=this.#x.layer.getBoundingClientRect();return[(t-i)/l,(e+n-s)/o]}set commentPopupPosition(t){this.#b=t}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=this.#b||this.commentButtonPosition.map(h=>h/100),i=this.parentBoundingClientRect,{x:s,y:l,width:o,height:c}=i;this.#t.showDialog(null,this,s+e*o,l+n*c,{...t,parentDimensions:i})}render(){if(this.#g)return;const t=this.#g=document.createElement("div");if(t.className="popup",this.#a){const n=t.style.outlineColor=Ge.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#A?.str){const n=document.createElement("span");n.className="title",e.append(n),{dir:n.dir,str:n.textContent}=this.#A}if(t.append(e),this.#u){const n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#u.valueOf()})),n.dateTime=this.#u.toISOString(),e.append(n)}d4({html:this.#O||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#s.append(t)}get#O(){const t=this.#S,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#S.html||null}get#P(){return this.#O?.attributes?.style?.fontSize||0}get#I(){return this.#O?.attributes?.style?.color||null}#M(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:this.#I,fontSize:this.#P?`calc(${this.#P}px * var(--total-scale-factor))`:""}};for(const s of t.split(`
`))e.push({name:"span",value:s,attributes:i});return n}#G(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#d)&&this.#_()}updateEdited({rect:t,popup:e,deleted:n}){if(this.#t){n?(this.remove(),this.#E=null):e&&(e.deleted?this.remove():(this.#B(),this.#E=e.text)),t&&(this.#y=null,this.#N(),this.#k());return}if(n||e?.deleted){this.remove();return}this.#R(),this.#w||={contentsObj:this.#o,richText:this.#S},t&&(this.#c=null),e&&e.text&&(this.#S=this.#M(e.text),this.#u=vb.toDateObject(e.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#w&&({contentsObj:this.#o,richText:this.#S}=this.#w,this.#w=null,this.#g?.remove(),this.#g=null,this.#c=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#g?.remove(),this.#g=null,this.#C=!1,this.#d=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#T(){if(this.#c!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:i,pageY:s}}}=this.#f;let l=!!this.#h,o=l?this.#h:this.#v;for(const w of this.#l)if(!o||Ge.intersect(w.data.rect,o)!==null){o=w.data.rect,l=!0;break}const c=Ge.normalizeRect([o[0],t[3]-o[1]+t[1],o[2],t[3]-o[3]+t[1]]),f=l?o[2]-o[0]+5:0,p=c[0]+f,y=c[1];this.#c=[100*(p-i)/e,100*(y-s)/n];const{style:m}=this.#s;m.left=`${this.#c[0]}%`,m.top=`${this.#c[1]}%`}#_(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#d=!this.#d,this.#d?(this.#D(),this.#s.addEventListener("click",this.#i),this.#s.addEventListener("keydown",this.#e)):(this.#j(),this.#s.removeEventListener("click",this.#i),this.#s.removeEventListener("keydown",this.#e))}#D(){this.#g||this.render(),this.isVisible?this.#d&&this.#s.classList.add("focused"):(this.#T(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#j(){this.#s.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#R(),this.#C&&(this.#g||this.#D(),this.#C=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class j4 extends _i{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Pn.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class bD extends _i{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),s=this.#t=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),s.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),s.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),s.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class wD extends _i{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),s=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",s/2),l.setAttribute("y",s/2),l.setAttribute("width",e-s),l.setAttribute("height",n-s),l.setAttribute("stroke-width",s||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class xD extends _i{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),s=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",e/2),l.setAttribute("cy",n/2),l.setAttribute("rx",e/2-s/2),l.setAttribute("ry",n/2-s/2),l.setAttribute("stroke-width",s||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class U4 extends _i{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:n,popupRef:i},width:s,height:l}=this;if(!e)return this.container;const o=this.svgFactory.create(s,l,!0);let c=[];for(let f=0,p=e.length;f<p;f+=2){const y=e[f]-t[0],m=t[3]-e[f+1];c.push(`${y},${m}`)}c=c.join(" ");const h=this.#t=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",c),h.setAttribute("stroke-width",n.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class _D extends U4{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class AD extends _i{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class N2 extends _i{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Pn.HIGHLIGHT:Pn.INK}#r(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:n,borderStyle:i,popupRef:s}}=this,{transform:l,width:o,height:c}=this.#r(e,t),h=this.svgFactory.create(o,c,!0),f=this.#t=this.svgFactory.createElement("svg:g");h.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",l);for(let p=0,y=n.length;p<y;p++){const m=this.svgFactory.createElement(this.svgElementName);this.#e.push(m),m.setAttribute("points",n[p].join(",")),f.append(m)}return!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:n,rect:i}=t,s=this.#t;if(e>=0&&s.setAttribute("stroke-width",e||1),n)for(let l=0,o=this.#e.length;l<o;l++)this.#e[l].setAttribute("points",n[l].join(","));if(i){const{transform:l,width:o,height:c}=this.#r(this.data.rotation,i);s.parentElement.setAttribute("viewBox",`0 0 ${o} ${c}`),s.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class z4 extends _i{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Pn.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class SD extends _i{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class ED extends _i{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class CD extends _i{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class q4 extends _i{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Pn.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class TD extends _i{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||e.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#e.bind(this)),this.#t=n;const{isMac:i}=ws.platform;return t.addEventListener("keydown",s=>{s.key==="Enter"&&(i?s.metaKey:s.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class k2{#t=null;#e=null;#r=null;#n=new Map;#i=null;#a=null;#s=[];#o=!1;constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:i,page:s,viewport:l,structTreeLayer:o,commentManager:c,linkService:h,annotationStorage:f}){this.div=t,this.#t=e,this.#e=n,this.#i=o||null,this.#a=h||null,this.#r=f||new _2,this.page=s,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=c||null}hasEditableAnnotations(){return this.#n.size>0}async render(t){const{annotations:e}=t,n=this.div;uh(n,this.viewport);const i=new Map,s=[],l={data:null,layer:n,linkService:this.#a,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new wg,annotationStorage:this.#r,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const o of e){if(o.noHTML)continue;const c=o.annotationType===ss.POPUP;if(c){const p=i.get(o.id);if(!p)continue;if(!this._commentManager){s.push(o);continue}l.elements=p}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;l.data=o;const h=j1.create(l);if(!h.isRenderable)continue;if(!c&&(this.#s.push(h),o.popupRef)){const p=i.get(o.popupRef);p?p.push(h):i.set(o.popupRef,[h])}const f=h.render();o.hidden&&(f.style.visibility="hidden"),h._isEditable&&(this.#n.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}await this.#u();for(const o of s){const c=l.elements=i.get(o.id);l.data=o;const h=j1.create(l);if(!h.isRenderable)continue;const f=h.render();h.contentElement.id=`${cf}${o.id}`,o.hidden&&(f.style.visibility="hidden"),c.at(-1).container.after(f)}this.#l()}async#u(){if(this.#s.length===0)return;this.div.replaceChildren();const t=[];if(!this.#o){this.#o=!0;for(const{contentElement:n,data:{id:i}}of this.#s){const s=n.id=`${cf}${i}`;t.push(this.#i?.getAriaAttributes(s).then(l=>{if(l)for(const[o,c]of l)n.setAttribute(o,c)}))}}this.#s.sort(({data:{rect:[n,i,s,l]}},{data:{rect:[o,c,h,f]}})=>{if(n===s&&i===l)return 1;if(o===h&&c===f)return-1;const p=l,y=i,m=(i+l)/2,w=f,b=c,_=(c+f)/2;if(m>=w&&_<=y)return-1;if(_>=p&&m<=b)return 1;const v=(n+s)/2,A=(o+h)/2;return v-A});const e=document.createDocumentFragment();for(const n of this.#s)e.append(n.container),this._commentManager?(n.extraPopupElement?.popup||n.popup)?.renderCommentButton():n.extraPopupElement&&e.append(n.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),this.#t)for(const n of this.#s)this.#t.addPointerInTextLayer(n.contentElement,!1)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#a,svgFactory:new wg,parent:this};for(const n of t){n.borderStyle||=k2._defaultBorderStyle,e.data=n;const i=j1.create(e);i.isRenderable&&(i.render(),i.contentElement.id=`${cf}${n.id}`,this.#s.push(i))}await this.#u()}update({viewport:t}){const e=this.div;this.viewport=t,uh(e,{rotation:t.rotation}),this.#l(),e.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[e,n]of this.#e){const i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;n.className="annotationContent";const{firstChild:s}=i;s?s.nodeName==="CANVAS"?s.replaceWith(n):s.classList.contains("annotationContent")?s.after(n):s.before(n):i.append(n);const l=this.#n.get(e);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,i.id,n),l._hasNoCanvas=!1):l.canvas=n)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:i}=t,s=new hD({data:{id:n,rect:t.getPDFRect(),rotation:i},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#a,annotationStorage:this.#r});return s.render(),s.contentElement.id=`${cf}${n}`,s.createOrUpdatePopup(),this.#s.push(s),s}removeAnnotation(t){const e=this.#s.findIndex(i=>i.data.id===t);if(e<0)return;const[n]=this.#s.splice(e,1);this.#t?.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);this.#u()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return Nn(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:rf.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Em=/\r\n?|\n/g;class Os extends mn{#t="";#e=`${this.id}-editor`;#r=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Os.prototype,e=s=>s.isEmpty(),n=Nc.TRANSLATE_SMALL,i=Nc.TRANSLATE_BIG;return Nn(this,"_keyboardManager",new yp([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}]]))}static _type="freetext";static _editorType=Pn.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||Os._defaultColor||mn._defaultLineColor,this.#n=t.fontSize||Os._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,e){mn.initialize(t,e);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case ir.FREETEXT_SIZE:Os._defaultFontSize=e;break;case ir.FREETEXT_COLOR:Os._defaultColor=e;break}}updateParams(t,e){switch(t){case ir.FREETEXT_SIZE:this.#i(e);break;case ir.FREETEXT_COLOR:this.#a(e);break}}static get defaultPropertiesToUpdate(){return[[ir.FREETEXT_SIZE,Os._defaultFontSize],[ir.FREETEXT_COLOR,Os._defaultColor||mn._defaultLineColor]]}get propertiesToUpdate(){return[[ir.FREETEXT_SIZE,this.#n],[ir.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new ip(this),[["colorPicker",this._colorPicker]]}get colorType(){return ir.FREETEXT_COLOR}#i(t){const e=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#n)*this.parentScale),this.#n=i,this.#o()},n=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ir.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#a(t){const e=i=>{this.color=i,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ir.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Os._internalPadding*t,-(Os._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#r=new AbortController;const t=this._uiManager.combinedSignal(this.#r);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#r?.abort(),this.#r=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let e=null;for(const n of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(t.push(Os.#u(n)),e=n);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:i,div:s}=this,l=s.style.display,o=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",i.div.append(this.div),n=s.getBoundingClientRect(),s.remove(),s.style.display=l,s.classList.toggle("hidden",o)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#s().trimEnd();if(t===e)return;const n=i=>{if(this.#t=i,!i){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Os._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,s]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[o,c]=this.getInitialTranslation();[o,c]=this.pageTranslationToScreen(o,c);const[h,f]=this.pageDimensions,[p,y]=this.pageTranslation;let m,w;switch(this.rotation){case 0:m=t+(l[0]-p)/h,w=e+this.height-(l[1]-y)/f;break;case 90:m=t+(l[0]-p)/h,w=e-(l[1]-y)/f,[o,c]=[c,-o];break;case 180:m=t-this.width+(l[0]-p)/h,w=e-(l[1]-y)/f,[o,c]=[-o,-c];break;case 270:m=t+(l[0]-p-this.height*f)/h,w=e+(l[1]-y-this.width*h)/f,[o,c]=[-c,o];break}this.setAt(m*i,w*s,o,c)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#u(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Em,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:n}=e;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const i=Os.#h(e.getData("text")||"").replaceAll(Em,`
`);if(!i)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const l=s.getRangeAt(0);if(!i.includes(`
`)){l.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),s.collapseToStart();return}const{startContainer:o,startOffset:c}=l,h=[],f=[];if(o.nodeType===Node.TEXT_NODE){const m=o.parentElement;if(f.push(o.nodeValue.slice(c).replaceAll(Em,"")),m!==this.editorDiv){let w=h;for(const b of this.editorDiv.childNodes){if(b===m){w=f;continue}w.push(Os.#u(b))}}h.push(o.nodeValue.slice(0,c).replaceAll(Em,""))}else if(o===this.editorDiv){let m=h,w=0;for(const b of this.editorDiv.childNodes)w++===c&&(m=f),m.push(Os.#u(b))}this.#t=`${h.join(`
`)}${i}${f.join(`
`)}`,this.#l();const p=new Range;let y=Math.sumPrecise(h.map(m=>m.length));for(const{firstChild:m}of this.editorDiv.childNodes)if(m.nodeType===Node.TEXT_NODE){const w=m.nodeValue.length;if(y<=w){p.setStart(m,y),p.setEnd(m,y);break}y-=w}s.removeAllRanges(),s.addRange(p)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#f(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Os._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,n){let i=null;if(t instanceof j4){const{data:{defaultAppearanceData:{fontSize:l,fontColor:o},rect:c,rotation:h,id:f,popupRef:p,richText:y,contentsObj:m,creationDate:w,modificationDate:b},textContent:_,textPosition:v,parent:{page:{pageNumber:A}}}=t;if(!_||_.length===0)return null;i=t={annotationType:Pn.FREETEXT,color:Array.from(o),fontSize:l,value:_.join(`
`),position:v,pageIndex:A-1,rect:c.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:m?.str||null,richText:y,creationDate:w,modificationDate:b}}const s=await super.deserialize(t,e,n);return s.#n=t.fontSize,s.color=Ge.makeHexColor(...t.color),s.#t=Os.#h(t.value),s._initialData=i,t.comment&&s.setCommentData(t),s}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=mn._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#f()});return this.addComment(n),t?(n.isCopy=!0,n):this.annotationElementId&&!this.#d(n)?null:(n.id=this.annotationElementId,n)}#d(t){const{value:e,fontSize:n,color:i,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some((l,o)=>l!==i[o])||t.pageIndex!==s}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:n}=e;n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,e.replaceChildren();for(const i of this.#t.split(`
`)){const s=document.createElement("div");s.append(i?document.createTextNode(i):document.createElement("br")),e.append(s)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class Qe{static PRECISION=1e-4;toSVGPath(){Cr("Abstract method `toSVGPath` must be implemented.")}get box(){Cr("Abstract getter `box` must be implemented.")}serialize(t,e){Cr("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,i,s,l){l||=new Float32Array(t.length);for(let o=0,c=t.length;o<c;o+=2)l[o]=e+t[o]*i,l[o+1]=n+t[o+1]*s;return l}static _rescaleAndSwap(t,e,n,i,s,l){l||=new Float32Array(t.length);for(let o=0,c=t.length;o<c;o+=2)l[o]=e+t[o+1]*i,l[o+1]=n+t[o]*s;return l}static _translate(t,e,n,i){i||=new Float32Array(t.length);for(let s=0,l=t.length;s<l;s+=2)i[s]=e+t[s],i[s+1]=n+t[s+1];return i}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,i,s){switch(s){case 90:return[1-e/n,t/i];case 180:return[1-t/n,1-e/i];case 270:return[e/n,1-t/i];default:return[t/n,e/i]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,i,s,l){return[(t+5*n)/6,(e+5*i)/6,(5*n+s)/6,(5*i+l)/6,(n+s)/2,(i+l)/2]}}class Qc{#t;#e=[];#r;#n;#i=[];#a=new Float32Array(18);#s;#o;#u;#l;#f;#h;#d=[];static#g=8;static#m=2;static#c=Qc.#g+Qc.#m;constructor({x:t,y:e},n,i,s,l,o=0){this.#t=n,this.#h=s*i,this.#n=l,this.#a.set([NaN,NaN,NaN,NaN,t,e],6),this.#r=o,this.#l=Qc.#g*i,this.#u=Qc.#c*i,this.#f=i,this.#d.push(t,e)}isEmpty(){return isNaN(this.#a[8])}#p(){const t=this.#a.subarray(4,6),e=this.#a.subarray(16,18),[n,i,s,l]=this.#t;return[(this.#s+(t[0]-e[0])/2-n)/s,(this.#o+(t[1]-e[1])/2-i)/l,(this.#s+(e[0]-t[0])/2-n)/s,(this.#o+(e[1]-t[1])/2-i)/l]}add({x:t,y:e}){this.#s=t,this.#o=e;const[n,i,s,l]=this.#t;let[o,c,h,f]=this.#a.subarray(8,12);const p=t-h,y=e-f,m=Math.hypot(p,y);if(m<this.#u)return!1;const w=m-this.#l,b=w/m,_=b*p,v=b*y;let A=o,C=c;o=h,c=f,h+=_,f+=v,this.#d?.push(t,e);const S=-v/w,O=_/w,q=S*this.#h,H=O*this.#h;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([h+q,f+H],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([h-q,f-H],16),isNaN(this.#a[6])?(this.#i.length===0&&(this.#a.set([o+q,c+H],2),this.#i.push(NaN,NaN,NaN,NaN,(o+q-n)/s,(c+H-i)/l),this.#a.set([o-q,c-H],14),this.#e.push(NaN,NaN,NaN,NaN,(o-q-n)/s,(c-H-i)/l)),this.#a.set([A,C,o,c,h,f],6),!this.isEmpty()):(this.#a.set([A,C,o,c,h,f],6),Math.abs(Math.atan2(C-c,A-o)-Math.atan2(v,_))<Math.PI/2?([o,c,h,f]=this.#a.subarray(2,6),this.#i.push(NaN,NaN,NaN,NaN,((o+h)/2-n)/s,((c+f)/2-i)/l),[o,c,A,C]=this.#a.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((A+o)/2-n)/s,((C+c)/2-i)/l),!0):([A,C,o,c,h,f]=this.#a.subarray(0,6),this.#i.push(((A+5*o)/6-n)/s,((C+5*c)/6-i)/l,((5*o+h)/6-n)/s,((5*c+f)/6-i)/l,((o+h)/2-n)/s,((c+f)/2-i)/l),[h,f,o,c,A,C]=this.#a.subarray(12,18),this.#e.push(((A+5*o)/6-n)/s,((C+5*c)/6-i)/l,((5*o+h)/6-n)/s,((5*c+f)/6-i)/l,((o+h)/2-n)/s,((c+f)/2-i)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#i,e=this.#e;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#y();const n=[];n.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);this.#v(n);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return this.#b(n),n.join(" ")}#y(){const[t,e,n,i]=this.#t,[s,l,o,c]=this.#p();return`M${(this.#a[2]-t)/n} ${(this.#a[3]-e)/i} L${(this.#a[4]-t)/n} ${(this.#a[5]-e)/i} L${s} ${l} L${o} ${c} L${(this.#a[16]-t)/n} ${(this.#a[17]-e)/i} L${(this.#a[14]-t)/n} ${(this.#a[15]-e)/i} Z`}#b(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#v(t){const[e,n,i,s]=this.#t,l=this.#a.subarray(4,6),o=this.#a.subarray(16,18),[c,h,f,p]=this.#p();t.push(`L${(l[0]-e)/i} ${(l[1]-n)/s} L${c} ${h} L${f} ${p} L${(o[0]-e)/i} ${(o[1]-n)/s}`)}newFreeDrawOutline(t,e,n,i,s,l){return new H4(t,e,n,i,s,l)}getOutlines(){const t=this.#i,e=this.#e,n=this.#a,[i,s,l,o]=this.#t,c=new Float32Array((this.#d?.length??0)+2);for(let p=0,y=c.length-2;p<y;p+=2)c[p]=(this.#d[p]-i)/l,c[p+1]=(this.#d[p+1]-s)/o;if(c[c.length-2]=(this.#s-i)/l,c[c.length-1]=(this.#o-s)/o,isNaN(n[6])&&!this.isEmpty())return this.#S(c);const h=new Float32Array(this.#i.length+24+this.#e.length);let f=t.length;for(let p=0;p<f;p+=2){if(isNaN(t[p])){h[p]=h[p+1]=NaN;continue}h[p]=t[p],h[p+1]=t[p+1]}f=this.#w(h,f);for(let p=e.length-6;p>=6;p-=6)for(let y=0;y<6;y+=2){if(isNaN(e[p+y])){h[f]=h[f+1]=NaN,f+=2;continue}h[f]=e[p+y],h[f+1]=e[p+y+1],f+=2}return this.#A(h,f),this.newFreeDrawOutline(h,c,this.#t,this.#f,this.#r,this.#n)}#S(t){const e=this.#a,[n,i,s,l]=this.#t,[o,c,h,f]=this.#p(),p=new Float32Array(36);return p.set([NaN,NaN,NaN,NaN,(e[2]-n)/s,(e[3]-i)/l,NaN,NaN,NaN,NaN,(e[4]-n)/s,(e[5]-i)/l,NaN,NaN,NaN,NaN,o,c,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(e[16]-n)/s,(e[17]-i)/l,NaN,NaN,NaN,NaN,(e[14]-n)/s,(e[15]-i)/l],0),this.newFreeDrawOutline(p,t,this.#t,this.#f,this.#r,this.#n)}#A(t,e){const n=this.#e;return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6}#w(t,e){const n=this.#a.subarray(4,6),i=this.#a.subarray(16,18),[s,l,o,c]=this.#t,[h,f,p,y]=this.#p();return t.set([NaN,NaN,NaN,NaN,(n[0]-s)/o,(n[1]-l)/c,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,p,y,NaN,NaN,NaN,NaN,(i[0]-s)/o,(i[1]-l)/c],e),e+=24}}class H4 extends Qe{#t;#e=new Float32Array(4);#r;#n;#i;#a;#s;constructor(t,e,n,i,s,l){super(),this.#s=t,this.#i=e,this.#t=n,this.#a=i,this.#r=s,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[o,c,h,f]=this.#e;for(let p=0,y=t.length;p<y;p+=2)t[p]=(t[p]-o)/h,t[p+1]=(t[p+1]-c)/f;for(let p=0,y=e.length;p<y;p+=2)e[p]=(e[p]-o)/h,e[p+1]=(e[p+1]-c)/f}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let e=6,n=this.#s.length;e<n;e+=6){if(isNaN(this.#s[e])){t.push(`L${this.#s[e+4]} ${this.#s[e+5]}`);continue}t.push(`C${this.#s[e]} ${this.#s[e+1]} ${this.#s[e+2]} ${this.#s[e+3]} ${this.#s[e+4]} ${this.#s[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,n,i],s){const l=n-t,o=i-e;let c,h;switch(s){case 0:c=Qe._rescale(this.#s,t,i,l,-o),h=Qe._rescale(this.#i,t,i,l,-o);break;case 90:c=Qe._rescaleAndSwap(this.#s,t,e,l,o),h=Qe._rescaleAndSwap(this.#i,t,e,l,o);break;case 180:c=Qe._rescale(this.#s,n,e,-l,o),h=Qe._rescale(this.#i,n,e,-l,o);break;case 270:c=Qe._rescaleAndSwap(this.#s,n,i,-l,-o),h=Qe._rescaleAndSwap(this.#i,n,i,-l,-o);break}return{outline:Array.from(c),points:[Array.from(h)]}}#o(t){const e=this.#s;let n=e[4],i=e[5];const s=[n,i,n,i];let l=n,o=i,c=n,h=i;const f=t?Math.max:Math.min,p=new Float32Array(4);for(let m=6,w=e.length;m<w;m+=6){const b=e[m+4],_=e[m+5];isNaN(e[m])?(Ge.pointBoundingBox(b,_,s),o>_?(l=b,o=_):o===_&&(l=f(l,b)),h<_?(c=b,h=_):h===_&&(c=f(c,b))):(p[0]=p[1]=1/0,p[2]=p[3]=-1/0,Ge.bezierBoundingBox(n,i,...e.slice(m,m+6),p),Ge.rectBoundingBox(p[0],p[1],p[2],p[3],s),o>p[1]?(l=p[0],o=p[1]):o===p[1]&&(l=f(l,p[0])),h<p[3]?(c=p[2],h=p[3]):h===p[3]&&(c=f(c,p[2]))),n=b,i=_}const y=this.#e;y[0]=s[0]-this.#r,y[1]=s[1]-this.#r,y[2]=s[2]-s[0]+2*this.#r,y[3]=s[3]-s[1]+2*this.#r,this.firstPoint=[l,o],this.lastPoint=[c,h]}get box(){return this.#e}newOutliner(t,e,n,i,s,l=0){return new Qc(t,e,n,i,s,l)}getNewOutline(t,e){const[n,i,s,l]=this.#e,[o,c,h,f]=this.#t,p=s*h,y=l*f,m=n*h+o,w=i*f+c,b=this.newOutliner({x:this.#i[0]*p+m,y:this.#i[1]*y+w},this.#t,this.#a,t,this.#n,e??this.#r);for(let _=2;_<this.#i.length;_+=2)b.add({x:this.#i[_]*p+m,y:this.#i[_+1]*y+w});return b.getOutlines()}}class Cb{#t;#e;#r;#n=[];#i=[];constructor(t,e=0,n=0,i=!0){const s=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:b,y:_,width:v,height:A}of t){const C=Math.floor((b-e)/l)*l,S=Math.ceil((b+v+e)/l)*l,O=Math.floor((_-e)/l)*l,q=Math.ceil((_+A+e)/l)*l,H=[C,O,q,!0],Q=[S,O,q,!1];this.#n.push(H,Q),Ge.rectBoundingBox(C,O,S,q,s)}const o=s[2]-s[0]+2*n,c=s[3]-s[1]+2*n,h=s[0]-n,f=s[1]-n;let p=i?-1/0:1/0,y=1/0;const m=this.#n.at(i?-1:-2),w=[m[0],m[2]];for(const b of this.#n){const[_,v,A,C]=b;!C&&i?v<y?(y=v,p=_):v===y&&(p=Math.max(p,_)):C&&!i&&(v<y?(y=v,p=_):v===y&&(p=Math.min(p,_))),b[0]=(_-h)/o,b[1]=(v-f)/c,b[2]=(A-f)/c}this.#t=new Float32Array([h,f,o,c]),this.#e=[p,y],this.#r=w}getOutlines(){this.#n.sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#u(e),t.push(...this.#l(e)));return this.#a(t)}#a(t){const e=[],n=new Set;for(const l of t){const[o,c,h]=l;e.push([o,c,l],[o,h,l])}e.sort((l,o)=>l[1]-o[1]||l[0]-o[0]);for(let l=0,o=e.length;l<o;l+=2){const c=e[l][2],h=e[l+1][2];c.push(h),h.push(c),n.add(c),n.add(h)}const i=[];let s;for(;n.size>0;){const l=n.values().next().value;let[o,c,h,f,p]=l;n.delete(l);let y=o,m=c;for(s=[o,h],i.push(s);;){let w;if(n.has(f))w=f;else if(n.has(p))w=p;else break;n.delete(w),[o,c,h,f,p]=w,y!==o&&(s.push(y,m,o,m===c?c:h),y=o),m=m===c?h:c}s.push(y,m)}return new ND(i,this.#t,this.#e,this.#r)}#s(t){const e=this.#i;let n=0,i=e.length-1;for(;n<=i;){const s=n+i>>1,l=e[s][0];if(l===t)return s;l<t?n=s+1:i=s-1}return i+1}#o([,t,e]){const n=this.#s(t);this.#i.splice(n,0,[t,e])}#u([,t,e]){const n=this.#s(t);for(let i=n;i<this.#i.length;i++){const[s,l]=this.#i[i];if(s!==t)break;if(s===t&&l===e){this.#i.splice(i,1);return}}for(let i=n-1;i>=0;i--){const[s,l]=this.#i[i];if(s!==t)break;if(s===t&&l===e){this.#i.splice(i,1);return}}}#l(t){const[e,n,i]=t,s=[[e,n,i]],l=this.#s(i);for(let o=0;o<l;o++){const[c,h]=this.#i[o];for(let f=0,p=s.length;f<p;f++){const[,y,m]=s[f];if(!(h<=y||m<=c)){if(y>=c){if(m>h)s[f][1]=h;else{if(p===1)return[];s.splice(f,1),f--,p--}continue}s[f][2]=c,m>h&&s.push([e,h,m])}}}return s}}class ND extends Qe{#t;#e;constructor(t,e,n,i){super(),this.#e=t,this.#t=e,this.firstPoint=n,this.lastPoint=i}toSVGPath(){const t=[];for(const e of this.#e){let[n,i]=e;t.push(`M${n} ${i}`);for(let s=2;s<e.length;s+=2){const l=e[s],o=e[s+1];l===n?(t.push(`V${o}`),i=o):o===i&&(t.push(`H${l}`),n=l)}t.push("Z")}return t.join(" ")}serialize([t,e,n,i],s){const l=[],o=n-t,c=i-e;for(const h of this.#e){const f=new Array(h.length);for(let p=0;p<h.length;p+=2)f[p]=t+h[p]*o,f[p+1]=i-h[p+1]*c;l.push(f)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Tb extends Qc{newFreeDrawOutline(t,e,n,i,s,l){return new kD(t,e,n,i,s,l)}}class kD extends H4{newOutliner(t,e,n,i,s,l=0){return new Tb(t,e,n,i,s,l)}}class zi extends mn{#t=null;#e=0;#r;#n=null;#i=null;#a=null;#s=null;#o=0;#u=null;#l=null;#f=null;#h=!1;#d=null;#g=null;#m=null;#c="";#p;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Pn.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=zi.prototype;return Nn(this,"_keyboardManager",new yp([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||zi._defaultColor,this.#p=t.thickness||zi._defaultThickness,this.opacity=t.opacity||zi._defaultOpacity,this.#r=t.boxes||null,this.#y=t.methodOfCreation||"",this.#c=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#v(t),this.#x()):this.#r&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#o=t.focusOffset,this.#b(),this.#x(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#b(){const t=new Cb(this.#r,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new Cb(this.#r,.0025,.001,this._uiManager.direction==="ltr");this.#a=e.getOutlines();const{firstPoint:n}=this.#l;this.#d=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height];const{lastPoint:i}=this.#a;this.#g=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#v({highlightOutlines:t,highlightId:e,clipPathId:n}){this.#l=t;const i=1.5;if(this.#a=t.getNewOutline(this.#p/2+i,.0025),e>=0)this.#f=e,this.#n=n,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#f,{bbox:zi.#E(this.#l.box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:zi.#E(this.#a.box,p),path:{d:this.#a.toSVGPath()}})}const[s,l,o,c]=t.box;switch(this.rotation){case 0:this.x=s,this.y=l,this.width=o,this.height=c;break;case 90:{const[p,y]=this.parentDimensions;this.x=l,this.y=1-s,this.width=o*y/p,this.height=c*p/y;break}case 180:this.x=1-s,this.y=1-l,this.width=o,this.height=c;break;case 270:{const[p,y]=this.parentDimensions;this.x=1-l,this.y=s,this.width=o*y/p,this.height=c*p/y;break}}const{firstPoint:h}=t;this.#d=[(h[0]-s)/o,(h[1]-l)/c];const{lastPoint:f}=this.#a;this.#g=[(f[0]-s)/o,(f[1]-l)/c]}static initialize(t,e){mn.initialize(t,e),zi._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case ir.HIGHLIGHT_COLOR:zi._defaultColor=e;break;case ir.HIGHLIGHT_THICKNESS:zi._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#d}updateParams(t,e){switch(t){case ir.HIGHLIGHT_COLOR:this.#S(e);break;case ir.HIGHLIGHT_THICKNESS:this.#A(e);break}}static get defaultPropertiesToUpdate(){return[[ir.HIGHLIGHT_COLOR,zi._defaultColor],[ir.HIGHLIGHT_THICKNESS,zi._defaultThickness]]}get propertiesToUpdate(){return[[ir.HIGHLIGHT_COLOR,this.color||zi._defaultColor],[ir.HIGHLIGHT_THICKNESS,this.#p||zi._defaultThickness],[ir.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#f,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#i?.updateColor(this.color),super.onUpdatedColor()}#S(t){const e=(s,l)=>{this.color=s,this.opacity=l,this.onUpdatedColor()},n=this.color,i=this.opacity;this.addCommands({cmd:e.bind(this,t,zi._defaultOpacity),undo:e.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ir.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#A(t){const e=this.#p,n=i=>{this.#p=i,this.#w(i)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ir.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#i=new B4({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#k())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#k())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#x(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#C():t&&(this.#x(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#w(t){this.#h&&(this.#v({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#C(){this.#f===null||!this.parent||(this.parent.drawLayer.remove(this.#f),this.#f=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#x(t=this.parent){this.#f===null&&({id:this.#f,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#h),this.#u&&(this.#u.style.clipPath=this.#n))}static#E([t,e,n,i],s){switch(s){case 90:return[1-e-i,t,i,n];case 180:return[1-t-n,1-e-i,n,i];case 270:return[e,1-t-n,i,n]}return[t,e,n,i]}rotate(t){const{drawLayer:e}=this.parent;let n;this.#h?(t=(t-this.rotation+360)%360,n=zi.#E(this.#l.box,t)):n=zi.#E([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#f,{bbox:n,root:{"data-main-rotation":t}}),e.updateProperties(this.#m,{bbox:zi.#E(this.#a.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#c&&(t.setAttribute("aria-label",this.#c),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const e=this.#u=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(),m4(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#R(t){zi._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#N(!0);break;case 1:case 3:this.#N(!1);break}}#N(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#s,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#h||this.#N(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#f,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!t}}))}#k(){return this.#h?this.rotation:0}#B(){if(this.#h)return null;const[t,e]=this.pageDimensions,[n,i]=this.pageTranslation,s=this.#r,l=new Float32Array(s.length*8);let o=0;for(const{x:c,y:h,width:f,height:p}of s){const y=c*t+n,m=(1-h)*e+i;l[o]=l[o+4]=y,l[o+1]=l[o+3]=m,l[o+2]=l[o+6]=y+f*t,l[o+5]=l[o+7]=m-p*e,o+=8}return l}#O(t){return this.#l.serialize(t,this.#k())}static startHighlighting(t,e,{target:n,x:i,y:s}){const{x:l,y:o,width:c,height:h}=n.getBoundingClientRect(),f=new AbortController,p=t.combinedSignal(f),y=m=>{f.abort(),this.#I(t,m)};window.addEventListener("blur",y,{signal:p}),window.addEventListener("pointerup",y,{signal:p}),window.addEventListener("pointerdown",Mi,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",Vo,{signal:p}),n.addEventListener("pointermove",this.#P.bind(this,t),{signal:p}),this._freeHighlight=new Tb({x:i,y:s},[l,o,c,h],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#P(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#I(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,n){let i=null;if(t instanceof z4){const{data:{quadPoints:w,rect:b,rotation:_,id:v,color:A,opacity:C,popupRef:S,richText:O,contentsObj:q,creationDate:H,modificationDate:Q},parent:{page:{pageNumber:I}}}=t;i=t={annotationType:Pn.HIGHLIGHT,color:Array.from(A),opacity:C,quadPoints:w,boxes:null,pageIndex:I-1,rect:b.slice(0),rotation:_,annotationElementId:v,id:v,deleted:!1,popupRef:S,richText:O,comment:q?.str||null,creationDate:H,modificationDate:Q}}else if(t instanceof N2){const{data:{inkLists:w,rect:b,rotation:_,id:v,color:A,borderStyle:{rawWidth:C},popupRef:S,richText:O,contentsObj:q,creationDate:H,modificationDate:Q},parent:{page:{pageNumber:I}}}=t;i=t={annotationType:Pn.HIGHLIGHT,color:Array.from(A),thickness:C,inkLists:w,boxes:null,pageIndex:I-1,rect:b.slice(0),rotation:_,annotationElementId:v,id:v,deleted:!1,popupRef:S,richText:O,comment:q?.str||null,creationDate:H,modificationDate:Q}}const{color:s,quadPoints:l,inkLists:o,opacity:c}=t,h=await super.deserialize(t,e,n);h.color=Ge.makeHexColor(...s),h.opacity=c||1,o&&(h.#p=t.thickness),h._initialData=i,t.comment&&h.setCommentData(t);const[f,p]=h.pageDimensions,[y,m]=h.pageTranslation;if(l){const w=h.#r=[];for(let b=0;b<l.length;b+=8)w.push({x:(l[b]-y)/f,y:1-(l[b+1]-m)/p,width:(l[b+2]-l[b])/f,height:(l[b+1]-l[b+5])/p});h.#b(),h.#x(),h.rotate(h.rotation)}else if(o){h.#h=!0;const w=o[0],b={x:w[0]-y,y:p-(w[1]-m)},_=new Tb(b,[0,0,f,p],1,h.#p/2,!0,.001);for(let C=0,S=w.length;C<S;C+=2)b.x=w[C]-y,b.y=p-(w[C+1]-m),_.add(b);const{id:v,clipPathId:A}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);h.#v({highlightOutlines:_.getOutlines(),highlightId:v,clipPathId:A}),h.#x(),h.rotate(h.parentRotation)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=mn._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(t);return Object.assign(n,{color:e,opacity:this.opacity,thickness:this.#p,quadPoints:this.#B(),outlines:this.#O(n.rect)}),this.addComment(n),this.annotationElementId&&!this.#M(n)?null:(n.id=this.annotationElementId,n)}#M(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((n,i)=>n!==e[i])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class G4{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Cr("Not implemented")}}class _r extends mn{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#r=null;static#n=null;static#i=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#a(t),this.#u())}#a({drawOutlines:t,drawId:e,drawingOptions:n}){this.#t=t,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#s(t,this.parent),this.#h(t.box)}#s(t,e){const{id:n}=e.drawLayer.draw(_r._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(t,e){const n=new Set(Object.keys(t));for(const[i,s]of Object.entries(e))n.has(i)?Object.assign(t[i],s):t[i]=s;return t}static getDefaultDrawingOptions(t){Cr("Not implemented")}static get typesMap(){Cr("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,e),this._currentParent&&(_r.#r.updateProperty(n,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[n,i]of this.typesMap)t.push([n,e[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[n,i]of this.constructor.typesMap)t.push([n,e[i]]);return t}_updateProperty(t,e,n){const i=this._drawingOptions,s=i[e],l=o=>{i.updateProperty(e,o);const c=this.#t.updateProperty(e,o);c&&this.#h(c),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,_r._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#f()),{bbox:this.#d()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,_r._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#f()),{bbox:this.#d()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#d()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,_r._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#f(),this.parentDimensions),{bbox:this.#d()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#u(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#o()):t&&(this._uiManager.addShouldRescale(this),this.#u(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#u(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#t,t)}}#l([t,e,n,i]){const{parentDimensions:[s,l],rotation:o}=this;switch(o){case 90:return[e,1-t,n*(l/s),i*(s/l)];case 180:return[1-t,1-e,n,i];case 270:return[1-e,t,n*(l/s),i*(s/l)];default:return[t,e,n,i]}}#f(){const{x:t,y:e,width:n,height:i,parentDimensions:[s,l],rotation:o}=this;switch(o){case 90:return[1-e,t,n*(s/l),i*(l/s)];case 180:return[1-t,1-e,n,i];case 270:return[e,1-t,n*(s/l),i*(l/s)];default:return[t,e,n,i]}}#h(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#d(){const{x:t,y:e,width:n,height:i,rotation:s,parentRotation:l,parentDimensions:[o,c]}=this;switch((s*4+l)/90){case 1:return[1-e-i,t,i,n];case 2:return[1-t-n,1-e-i,n,i];case 3:return[e,1-t-n,i,n];case 4:return[t,e-n*(o/c),i*(c/o),n*(o/c)];case 5:return[1-e,t,n*(o/c),i*(c/o)];case 6:return[1-t-i*(c/o),1-e,i*(c/o),n*(o/c)];case 7:return[e-n*(o/c),1-t-i*(c/o),n*(o/c),i*(c/o)];case 8:return[t-n,e-i,n,i];case 9:return[1-e,t-n,i,n];case 10:return[1-t,1-e,n,i];case 11:return[e-i,1-t,i,n];case 12:return[t-i*(c/o),e,i*(c/o),n*(o/c)];case 13:return[1-e-n*(o/c),t-i*(c/o),n*(o/c),i*(c/o)];case 14:return[1-t,1-e-n*(o/c),i*(c/o),n*(o/c)];case 15:return[e,1-t,n*(o/c),i*(c/o)];default:return[t,e,n,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,_r._mergeSVGProperties({bbox:this.#d()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const n=super.render();n.classList.add("draw");const i=document.createElement("div");return n.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),n}static createDrawerInstance(t,e,n,i,s){Cr("Not implemented")}static startDrawing(t,e,n,i){const{target:s,offsetX:l,offsetY:o,pointerId:c,pointerType:h}=i;if(Sr.isInitializedAndDifferentPointerType(h))return;const{viewport:{rotation:f}}=t,{width:p,height:y}=s.getBoundingClientRect(),m=_r.#n=new AbortController,w=t.combinedSignal(m);if(Sr.setPointer(h,c),window.addEventListener("pointerup",b=>{Sr.isSamePointerIdOrRemove(b.pointerId)&&this._endDraw(b)},{signal:w}),window.addEventListener("pointercancel",b=>{Sr.isSamePointerIdOrRemove(b.pointerId)&&this._currentParent.endDrawingSession()},{signal:w}),window.addEventListener("pointerdown",b=>{Sr.isSamePointerType(b.pointerType)&&(Sr.initializeAndAddPointerId(b.pointerId),_r.#r.isCancellable()&&(_r.#r.removeLastElement(),_r.#r.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",Vo,{signal:w}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),s.addEventListener("touchmove",b=>{Sr.isSameTimeStamp(b.timeStamp)&&Mi(b)},{signal:w}),t.toggleDrawing(),e._editorUndoBar?.hide(),_r.#r){t.drawLayer.updateProperties(this._currentDrawId,_r.#r.startNew(l,o,p,y,f));return}e.updateUIForDefaultProperties(this),_r.#r=this.createDrawerInstance(l,o,p,y,f),_r.#i=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(_r.#i.toSVGProperties(),_r.#r.defaultSVGProperties),!0,!1)}static _drawMove(t){if(Sr.isSameTimeStamp(t.timeStamp),!_r.#r)return;const{offsetX:e,offsetY:n,pointerId:i}=t;if(Sr.isSamePointerId(i)){if(Sr.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,_r.#r.add(e,n)),Sr.setTimeStamp(t.timeStamp),Mi(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,_r.#r=null,_r.#i=null,Sr.clearTimeStamp()),_r.#n&&(_r.#n.abort(),_r.#n=null,Sr.clearPointerIds())}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,_r.#r.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const n=_r.#r,i=this._currentDrawId,s=n.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(i,n.setLastElement(s))},undo:()=>{e.drawLayer.updateProperties(i,n.removeLastElement())},mustExec:!1,type:ir.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(ir.DRAW_STEP),!_r.#r.isEmpty()){const{pageDimensions:[n,i],scale:s}=e,l=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:_r.#r.getOutlines(n*s,i*s,s,this._INNER_MARGIN),drawingOptions:_r.#i,mustBeCommitted:!t});return this._cleanup(!0),l}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,n,i,s,l){Cr("Not implemented")}static async deserialize(t,e,n){const{rawDims:{pageWidth:i,pageHeight:s,pageX:l,pageY:o}}=e.viewport,c=this.deserializeDraw(l,o,i,s,this._INNER_MARGIN,t),h=await super.deserialize(t,e,n);return h.createDrawingOptions(t),h.#a({drawOutlines:c}),h.#u(),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[e,n]=this.pageTranslation,[i,s]=this.pageDimensions;return this.#t.serialize([e,n,i,s],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class RD{#t=new Float64Array(6);#e;#r;#n;#i;#a;#s="";#o=0;#u=new vp;#l;#f;constructor(t,e,n,i,s,l){this.#l=n,this.#f=i,this.#n=s,this.#i=l,[t,e]=this.#h(t,e);const o=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#a=[t,e],this.#r=[{line:o,points:this.#a}],this.#t.set(o,0)}updateProperty(t,e){t==="stroke-width"&&(this.#i=e)}#h(t,e){return Qe._normalizePoint(t,e,this.#l,this.#f,this.#n)}isEmpty(){return!this.#r||this.#r.length===0}isCancellable(){return this.#a.length<=10}add(t,e){[t,e]=this.#h(t,e);const[n,i,s,l]=this.#t.subarray(2,6),o=t-s,c=e-l;return Math.hypot(this.#l*o,this.#f*c)<=2?null:(this.#a.push(t,e),isNaN(n)?(this.#t.set([s,l,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([n,i,s,l,t,e],0),this.#e.push(...Qe.createBezierPoints(n,i,s,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,i,s){this.#l=n,this.#f=i,this.#n=s,[t,e]=this.#h(t,e);const l=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#a=[t,e];const o=this.#r.at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),this.#r.push({line:l,points:this.#a}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#r.at(-1)}setLastElement(t){return this.#r?(this.#r.push(t),this.#e=t.line,this.#a=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(t)}removeLastElement(){if(!this.#r)return this.#u.removeLastElement();this.#r.pop(),this.#s="";for(let t=0,e=this.#r.length;t<e;t++){const{line:n,points:i}=this.#r[t];this.#e=n,this.#a=i,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=Qe.svgRound(this.#e[4]),e=Qe.svgRound(this.#e[5]);if(this.#a.length===2)return this.#s=`${this.#s} M ${t} ${e} Z`,this.#s;if(this.#a.length<=6){const i=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,i)} M ${t} ${e}`,this.#o=6}if(this.#a.length===4){const i=Qe.svgRound(this.#e[10]),s=Qe.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${i} ${s}`,this.#o=12,this.#s}const n=[];this.#o===0&&(n.push(`M ${t} ${e}`),this.#o=6);for(let i=this.#o,s=this.#e.length;i<s;i+=6){const[l,o,c,h,f,p]=this.#e.slice(i,i+6).map(Qe.svgRound);n.push(`C${l} ${o} ${c} ${h} ${f} ${p}`)}return this.#s+=n.join(" "),this.#o=this.#e.length,this.#s}getOutlines(t,e,n,i){const s=this.#r.at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),this.#u.build(this.#r,t,e,n,this.#n,this.#i,i),this.#t=null,this.#e=null,this.#r=null,this.#s=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class vp extends Qe{#t;#e=0;#r;#n;#i;#a;#s;#o;#u;build(t,e,n,i,s,l,o){this.#i=e,this.#a=n,this.#s=i,this.#o=s,this.#u=l,this.#r=o??0,this.#n=t,this.#h()}get thickness(){return this.#u}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${Qe.svgRound(e[4])} ${Qe.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${Qe.svgRound(e[10])} ${Qe.svgRound(e[11])}`);continue}for(let n=6,i=e.length;n<i;n+=6){const[s,l,o,c,h,f]=e.subarray(n,n+6).map(Qe.svgRound);t.push(`C${s} ${l} ${o} ${c} ${h} ${f}`)}}return t.join("")}serialize([t,e,n,i],s){const l=[],o=[],[c,h,f,p]=this.#f();let y,m,w,b,_,v,A,C,S;switch(this.#o){case 0:S=Qe._rescale,y=t,m=e+i,w=n,b=-i,_=t+c*n,v=e+(1-h-p)*i,A=t+(c+f)*n,C=e+(1-h)*i;break;case 90:S=Qe._rescaleAndSwap,y=t,m=e,w=n,b=i,_=t+h*n,v=e+c*i,A=t+(h+p)*n,C=e+(c+f)*i;break;case 180:S=Qe._rescale,y=t+n,m=e,w=-n,b=i,_=t+(1-c-f)*n,v=e+h*i,A=t+(1-c)*n,C=e+(h+p)*i;break;case 270:S=Qe._rescaleAndSwap,y=t+n,m=e+i,w=-n,b=-i,_=t+(1-h-p)*n,v=e+(1-c-f)*i,A=t+(1-h)*n,C=e+(1-c)*i;break}for(const{line:O,points:q}of this.#n)l.push(S(O,y,m,w,b,s?new Array(O.length):null)),o.push(S(q,y,m,w,b,s?new Array(q.length):null));return{lines:l,points:o,rect:[_,v,A,C]}}static deserialize(t,e,n,i,s,{paths:{lines:l,points:o},rotation:c,thickness:h}){const f=[];let p,y,m,w,b;switch(c){case 0:b=Qe._rescale,p=-t/n,y=e/i+1,m=1/n,w=-1/i;break;case 90:b=Qe._rescaleAndSwap,p=-e/i,y=-t/n,m=1/i,w=1/n;break;case 180:b=Qe._rescale,p=t/n+1,y=-e/i,m=-1/n,w=1/i;break;case 270:b=Qe._rescaleAndSwap,p=e/i+1,y=t/n+1,m=-1/i,w=-1/n;break}if(!l){l=[];for(const v of o){const A=v.length;if(A===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1]]));continue}if(A===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1],NaN,NaN,NaN,NaN,v[2],v[3]]));continue}const C=new Float32Array(3*(A-2));l.push(C);let[S,O,q,H]=v.subarray(0,4);C.set([NaN,NaN,NaN,NaN,S,O],0);for(let Q=4;Q<A;Q+=2){const I=v[Q],dt=v[Q+1];C.set(Qe.createBezierPoints(S,O,q,H,I,dt),(Q-2)*3),[S,O,q,H]=[q,H,I,dt]}}}for(let v=0,A=l.length;v<A;v++)f.push({line:b(l[v].map(C=>C??NaN),p,y,m,w),points:b(o[v].map(C=>C??NaN),p,y,m,w)});const _=new this.prototype.constructor;return _.build(f,n,i,1,c,h,s),_}#l(t=this.#u){const e=this.#r+t/2*this.#s;return this.#o%180===0?[e/this.#i,e/this.#a]:[e/this.#a,e/this.#i]}#f(){const[t,e,n,i]=this.#t,[s,l]=this.#l(0);return[t+s,e+l,n-2*s,i-2*l]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#n){if(i.length<=12){for(let o=4,c=i.length;o<c;o+=6)Ge.pointBoundingBox(i[o],i[o+1],t);continue}let s=i[4],l=i[5];for(let o=6,c=i.length;o<c;o+=6){const[h,f,p,y,m,w]=i.subarray(o,o+6);Ge.bezierBoundingBox(s,l,h,f,p,y,m,w,t),s=m,l=w}}const[e,n]=this.#l();t[0]=Ks(t[0]-e,0,1),t[1]=Ks(t[1]-n,0,1),t[2]=Ks(t[2]+e,0,1),t[3]=Ks(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#d(e):null}#d(t){const[e,n]=this.#l();this.#u=t;const[i,s]=this.#l(),[l,o]=[i-e,s-n],c=this.#t;return c[0]-=l,c[1]-=o,c[2]+=2*l,c[3]+=2*o,c}updateParentDimensions([t,e],n){const[i,s]=this.#l();this.#i=t,this.#a=e,this.#s=n;const[l,o]=this.#l(),c=l-i,h=o-s,f=this.#t;return f[0]-=c,f[1]-=h,f[2]+=2*c,f[3]+=2*h,f}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(Qe.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Qe.svgRound(t)} ${Qe.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let n=0,i=0,s=0,l=0,o=0,c=0;switch(this.#e){case 90:i=e/t,s=-t/e,o=t;break;case 180:n=-1,l=-1,o=t,c=e;break;case 270:i=-e/t,s=t/e,c=e;break;default:return""}return`matrix(${n} ${i} ${s} ${l} ${Qe.svgRound(o)} ${Qe.svgRound(c)})`}getPathResizingSVGProperties([t,e,n,i]){const[s,l]=this.#l(),[o,c,h,f]=this.#t;if(Math.abs(h-s)<=Qe.PRECISION||Math.abs(f-l)<=Qe.PRECISION){const b=t+n/2-(o+h/2),_=e+i/2-(c+f/2);return{path:{"transform-origin":`${Qe.svgRound(t)} ${Qe.svgRound(e)}`,transform:`${this.rotationTransform} translate(${b} ${_})`}}}const p=(n-2*s)/(h-2*s),y=(i-2*l)/(f-2*l),m=h/n,w=f/i;return{path:{"transform-origin":`${Qe.svgRound(o)} ${Qe.svgRound(c)}`,transform:`${this.rotationTransform} scale(${m} ${w}) translate(${Qe.svgRound(s)} ${Qe.svgRound(l)}) scale(${p} ${y}) translate(${Qe.svgRound(-s)} ${Qe.svgRound(-l)})`}}}getPathResizedSVGProperties([t,e,n,i]){const[s,l]=this.#l(),o=this.#t,[c,h,f,p]=o;if(o[0]=t,o[1]=e,o[2]=n,o[3]=i,Math.abs(f-s)<=Qe.PRECISION||Math.abs(p-l)<=Qe.PRECISION){const _=t+n/2-(c+f/2),v=e+i/2-(h+p/2);for(const{line:A,points:C}of this.#n)Qe._translate(A,_,v,A),Qe._translate(C,_,v,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Qe.svgRound(t)} ${Qe.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(n-2*s)/(f-2*s),m=(i-2*l)/(p-2*l),w=-y*(c+s)+t+s,b=-m*(h+l)+e+l;if(y!==1||m!==1||w!==0||b!==0)for(const{line:_,points:v}of this.#n)Qe._rescale(_,w,b,y,m,_),Qe._rescale(v,w,b,y,m,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Qe.svgRound(t)} ${Qe.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],n){const[i,s]=n,l=this.#t,o=t-l[0],c=e-l[1];if(this.#i===i&&this.#a===s)for(const{line:h,points:f}of this.#n)Qe._translate(h,o,c,h),Qe._translate(f,o,c,f);else{const h=this.#i/i,f=this.#a/s;this.#i=i,this.#a=s;for(const{line:p,points:y}of this.#n)Qe._rescale(p,o,c,h,f,p),Qe._rescale(y,o,c,h,f,y);l[2]*=h,l[3]*=f}return l[0]=t,l[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Qe.svgRound(t)} ${Qe.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Qe.svgRound(t[0])} ${Qe.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Kg extends G4{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:mn._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Kg(this._viewParameters);return t.updateAll(this),t}}class R2 extends _r{static _type="ink";static _editorType=Pn.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){mn.initialize(t,e),this._defaultDrawingOptions=new Kg(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return Nn(this,"typesMap",new Map([[ir.INK_THICKNESS,"stroke-width"],[ir.INK_COLOR,"stroke"],[ir.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,n,i,s){return new RD(t,e,n,i,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,n,i,s,l){return vp.deserialize(t,e,n,i,s,l)}static async deserialize(t,e,n){let i=null;if(t instanceof N2){const{data:{inkLists:l,rect:o,rotation:c,id:h,color:f,opacity:p,borderStyle:{rawWidth:y},popupRef:m,richText:w,contentsObj:b,creationDate:_,modificationDate:v},parent:{page:{pageNumber:A}}}=t;i=t={annotationType:Pn.INK,color:Array.from(f),thickness:y,opacity:p,paths:{points:l},boxes:null,pageIndex:A-1,rect:o.slice(0),rotation:c,annotationElementId:h,id:h,deleted:!1,popupRef:m,richText:w,comment:b?.str||null,creationDate:_,modificationDate:v}}const s=await super.deserialize(t,e,n);return s._initialData=i,t.comment&&s.setCommentData(t),s}get toolbarButtons(){return this._colorPicker||=new ip(this),[["colorPicker",this._colorPicker]]}get colorType(){return ir.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:n}=this;e.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:n}){this._drawingOptions=R2.getDefaultDrawingOptions({stroke:Ge.makeHexColor(...t),"stroke-width":e,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":s,"stroke-width":l}}=this,o=Object.assign(super.serialize(t),{color:mn._colorManager.convert(i),opacity:s,thickness:l,paths:{lines:e,points:n}});return this.addComment(o),t?(o.isCopy=!0,o):this.annotationElementId&&!this.#t(o)?null:(o.id=this.annotationElementId,o)}#t(t){const{color:e,thickness:n,opacity:i,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,o)=>l!==e[o])||t.thickness!==n||t.opacity!==i||t.pageIndex!==s}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class Nb extends vp{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Cm=8,Od=3;class af{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,n,i){return n-=t,i-=e,n===0?i>0?0:4:n===1?i+6:2-i}static#r=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,n,i,s,l,o){const c=this.#e(n,i,s,l);for(let h=0;h<8;h++){const f=(-h+c-o+16)%8,p=this.#r[2*f],y=this.#r[2*f+1];if(t[(n+p)*e+(i+y)]!==0)return f}return-1}static#i(t,e,n,i,s,l,o){const c=this.#e(n,i,s,l);for(let h=0;h<8;h++){const f=(h+c+o+16)%8,p=this.#r[2*f],y=this.#r[2*f+1];if(t[(n+p)*e+(i+y)]!==0)return f}return-1}static#a(t,e,n,i){const s=t.length,l=new Int32Array(s);for(let f=0;f<s;f++)l[f]=t[f]<=i?1:0;for(let f=1;f<n-1;f++)l[f*e]=l[f*e+e-1]=0;for(let f=0;f<e;f++)l[f]=l[e*n-1-f]=0;let o=1,c;const h=[];for(let f=1;f<n-1;f++){c=1;for(let p=1;p<e-1;p++){const y=f*e+p,m=l[y];if(m===0)continue;let w=f,b=p;if(m===1&&l[y-1]===0)o+=1,b-=1;else if(m>=1&&l[y+1]===0)o+=1,b+=1,m>1&&(c=m);else{m!==1&&(c=Math.abs(m));continue}const _=[p,f],v=b===p+1,A={isHole:v,points:_,id:o,parent:0};h.push(A);let C;for(const nt of h)if(nt.id===c){C=nt;break}C?C.isHole?A.parent=v?C.parent:c:A.parent=v?c:C.parent:A.parent=v?c:0;const S=this.#n(l,e,f,p,w,b,0);if(S===-1){l[y]=-o,l[y]!==1&&(c=Math.abs(l[y]));continue}let O=this.#r[2*S],q=this.#r[2*S+1];const H=f+O,Q=p+q;w=H,b=Q;let I=f,dt=p;for(;;){const nt=this.#i(l,e,I,dt,w,b,1);O=this.#r[2*nt],q=this.#r[2*nt+1];const B=I+O,Z=dt+q;_.push(Z,B);const D=I*e+dt;if(l[D+1]===0?l[D]=-o:l[D]===1&&(l[D]=o),B===f&&Z===p&&I===H&&dt===Q){l[y]!==1&&(c=Math.abs(l[y]));break}else w=I,b=dt,I=B,dt=Z}}}return h}static#s(t,e,n,i){if(n-e<=4){for(let H=e;H<n-2;H+=2)i.push(t[H],t[H+1]);return}const s=t[e],l=t[e+1],o=t[n-4]-s,c=t[n-3]-l,h=Math.hypot(o,c),f=o/h,p=c/h,y=f*l-p*s,m=c/o,w=1/h,b=Math.atan(m),_=Math.cos(b),v=Math.sin(b),A=w*(Math.abs(_)+Math.abs(v)),C=w*(1-A+A**2),S=Math.max(Math.atan(Math.abs(v+_)*C),Math.atan(Math.abs(v-_)*C));let O=0,q=e;for(let H=e+2;H<n-2;H+=2){const Q=Math.abs(y-f*t[H+1]+p*t[H]);Q>O&&(q=H,O=Q)}O>(h*S)**2?(this.#s(t,e,q+2,i),this.#s(t,q,n,i)):i.push(s,l)}static#o(t){const e=[],n=t.length;return this.#s(t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e}static#u(t,e,n,i,s,l){const o=new Float32Array(l**2),c=-2*i**2,h=l>>1;for(let b=0;b<l;b++){const _=(b-h)**2;for(let v=0;v<l;v++)o[b*l+v]=Math.exp((_+(v-h)**2)/c)}const f=new Float32Array(256),p=-2*s**2;for(let b=0;b<256;b++)f[b]=Math.exp(b**2/p);const y=t.length,m=new Uint8Array(y),w=new Uint32Array(256);for(let b=0;b<n;b++)for(let _=0;_<e;_++){const v=b*e+_,A=t[v];let C=0,S=0;for(let q=0;q<l;q++){const H=b+q-h;if(!(H<0||H>=n))for(let Q=0;Q<l;Q++){const I=_+Q-h;if(I<0||I>=e)continue;const dt=t[H*e+I],nt=o[q*l+Q]*f[Math.abs(dt-A)];C+=dt*nt,S+=nt}}const O=m[v]=Math.round(C/S);w[O]++}return[m,w]}static#l(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e}static#f(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let i=-1/0,s=1/0;for(let o=0,c=n.length;o<c;o++){const h=n[o]=t[o<<2];i=Math.max(i,h),s=Math.min(s,h)}const l=255/(i-s);for(let o=0,c=n.length;o<c;o++)n[o]=(n[o]-s)*l;return n}static#h(t){let e,n=-1/0,i=-1/0;const s=t.findIndex(c=>c!==0);let l=s,o=s;for(e=s;e<256;e++){const c=t[e];c>n&&(e-l>i&&(i=e-l,o=e-1),n=c,l=e)}for(e=o-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#d(t){const e=t,{width:n,height:i}=t,{maxDim:s}=this.#t;let l=n,o=i;if(n>s||i>s){let y=n,m=i,w=Math.log2(Math.max(n,i)/s);const b=Math.floor(w);w=w===b?b-1:b;for(let v=0;v<w;v++){l=Math.ceil(y/2),o=Math.ceil(m/2);const A=new OffscreenCanvas(l,o);A.getContext("2d").drawImage(t,0,0,y,m,0,0,l,o),y=l,m=o,t!==e&&t.close(),t=A.transferToImageBitmap()}const _=Math.min(s/l,s/o);l=Math.round(l*_),o=Math.round(o*_)}const h=new OffscreenCanvas(l,o).getContext("2d",{willReadFrequently:!0});h.fillStyle="white",h.fillRect(0,0,l,o),h.filter="grayscale(1)",h.drawImage(t,0,0,t.width,t.height,0,0,l,o);const f=h.getImageData(0,0,l,o).data;return[this.#f(f),l,o]}static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:i},s,l,o,c){let h=new OffscreenCanvas(1,1),f=h.getContext("2d",{alpha:!1});const p=200,y=f.font=`${n} ${i} ${p}px ${e}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:w,actualBoundingBoxAscent:b,actualBoundingBoxDescent:_,fontBoundingBoxAscent:v,fontBoundingBoxDescent:A,width:C}=f.measureText(t),S=1.5,O=Math.ceil(Math.max(Math.abs(m)+Math.abs(w)||0,C)*S),q=Math.ceil(Math.max(Math.abs(b)+Math.abs(_)||p,Math.abs(v)+Math.abs(A)||p)*S);h=new OffscreenCanvas(O,q),f=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=y,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,O,q),f.fillStyle="black",f.fillText(t,O*(S-1)/2,q*(3-S)/2);const H=this.#f(f.getImageData(0,0,O,q).data),Q=this.#l(H),I=this.#h(Q),dt=this.#a(H,O,q,I);return this.processDrawnLines({lines:{curves:dt,width:O,height:q},pageWidth:s,pageHeight:l,rotation:o,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(t,e,n,i,s){const[l,o,c]=this.#d(t),[h,f]=this.#u(l,o,c,Math.hypot(o,c)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),p=this.#h(f),y=this.#a(h,o,c,p);return this.processDrawnLines({lines:{curves:y,width:o,height:c},pageWidth:e,pageHeight:n,rotation:i,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:i,innerMargin:s,mustSmooth:l,areContours:o}){i%180!==0&&([e,n]=[n,e]);const{curves:c,width:h,height:f}=t,p=t.thickness??0,y=[],m=Math.min(e/h,n/f),w=m/e,b=m/n,_=[];for(const{points:A}of c){const C=l?this.#o(A):A;if(!C)continue;_.push(C);const S=C.length,O=new Float32Array(S),q=new Float32Array(3*(S===2?2:S-2));if(y.push({line:q,points:O}),S===2){O[0]=C[0]*w,O[1]=C[1]*b,q.set([NaN,NaN,NaN,NaN,O[0],O[1]],0);continue}let[H,Q,I,dt]=C;H*=w,Q*=b,I*=w,dt*=b,O.set([H,Q,I,dt],0),q.set([NaN,NaN,NaN,NaN,H,Q],0);for(let nt=4;nt<S;nt+=2){const B=O[nt]=C[nt]*w,Z=O[nt+1]=C[nt+1]*b;q.set(Qe.createBezierPoints(H,Q,I,dt,B,Z),(nt-2)*3),[H,Q,I,dt]=[I,dt,B,Z]}}if(y.length===0)return null;const v=o?new Nb:new vp;return v.build(y,e,n,1,i,o?0:p,s),{outline:v,newCurves:_,areContours:o,thickness:p,width:h,height:f}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:i,height:s}){let l=1/0,o=-1/0,c=0;for(const C of t){c+=C.length;for(let S=2,O=C.length;S<O;S++){const q=C[S]-C[S-2];l=Math.min(l,q),o=Math.max(o,q)}}let h;l>=-128&&o<=127?h=Int8Array:l>=-32768&&o<=32767?h=Int16Array:h=Int32Array;const f=t.length,p=Cm+Od*f,y=new Uint32Array(p);let m=0;y[m++]=p*Uint32Array.BYTES_PER_ELEMENT+(c-2*f)*h.BYTES_PER_ELEMENT,y[m++]=0,y[m++]=i,y[m++]=s,y[m++]=e?0:1,y[m++]=Math.max(0,Math.floor(n??0)),y[m++]=f,y[m++]=h.BYTES_PER_ELEMENT;for(const C of t)y[m++]=C.length-2,y[m++]=C[0],y[m++]=C[1];const w=new CompressionStream("deflate-raw"),b=w.writable.getWriter();await b.ready,b.write(y);const _=h.prototype.constructor;for(const C of t){const S=new _(C.length-2);for(let O=2,q=C.length;O<q;O++)S[O-2]=C[O]-C[O-2];b.write(S)}b.close();const v=await new Response(w.readable).arrayBuffer();return new Uint8Array(v).toBase64()}static async decompressSignature(t){try{const e=Uint8Array.fromBase64(t),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),s=i.getWriter();await s.ready,s.write(e).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let l=null,o=0;for await(const C of n)l||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),l.set(C,o),o+=C.length;const c=new Uint32Array(l.buffer,0,l.length>>2),h=c[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const f=c[2],p=c[3],y=c[4]===0,m=c[5],w=c[6],b=c[7],_=[],v=(Cm+Od*w)*Uint32Array.BYTES_PER_ELEMENT;let A;switch(b){case Int8Array.BYTES_PER_ELEMENT:A=new Int8Array(l.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:A=new Int16Array(l.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:A=new Int32Array(l.buffer,v);break}o=0;for(let C=0;C<w;C++){const S=c[Od*C+Cm],O=new Float32Array(S+2);_.push(O);for(let q=0;q<Od-1;q++)O[q]=c[Od*C+Cm+q+1];for(let q=0;q<S;q++)O[q+2]=O[q]+A[o++]}return{areContours:y,thickness:m,outlines:_,width:f,height:p}}catch(e){return Tn(`decompressSignature: ${e}`),null}}}class L2 extends G4{constructor(){super(),super.updateProperties({fill:mn._defaultLineColor,"stroke-width":0})}clone(){const t=new L2;return t.updateAll(this),t}}class O2 extends Kg{constructor(t){super(t),super.updateProperties({stroke:mn._defaultLineColor,"stroke-width":1})}clone(){const t=new O2(this._viewParameters);return t.updateAll(this),t}}class eu extends _r{#t=!1;#e=null;#r=null;#n=null;static _type="signature";static _editorType=Pn.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#r=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){mn.initialize(t,e),this._defaultDrawingOptions=new L2,this._defaultDrawnSignatureOptions=new O2(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return Nn(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#r){const{lines:i,mustSmooth:s,areContours:l,description:o,uuid:c,heightInPage:h}=this.#r,{rawDims:{pageWidth:f,pageHeight:p},rotation:y}=this.parent.viewport,m=af.processDrawnLines({lines:i,pageWidth:f,pageHeight:p,rotation:y,innerMargin:eu._INNER_MARGIN,mustSmooth:s,areContours:l});this.addSignature(m,h,o,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:n,width:i,height:s}=this.#r,l=Math.max(i,s),o=af.processDrawnLines({lines:{curves:t.map(c=>({points:c})),thickness:n,width:i,height:s},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:o.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,n,i){const{x:s,y:l}=this,{outline:o}=this.#r=t;this.#t=o instanceof Nb,this.description=n;let c;this.#t?c=eu.getDefaultDrawingOptions():(c=eu._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":o.thickness})),this._addOutlines({drawOutlines:o,drawingOptions:c});const[,h]=this.pageDimensions;let f=e/h;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(),this.x=s,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:i}=this.parent.viewport;return af.process(t,e,n,i,eu._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:s}=this.parent.viewport;return af.extractContoursFromText(t,e,n,i,s,eu._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:i}=this.parent.viewport;return af.processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:i,innerMargin:eu._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=eu.getDefaultDrawingOptions():(this._drawingOptions=eu._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,s=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:i});return this.addComment(s),t?(s.paths={lines:e,points:n},s.uuid=this.#n,s.isCopy=!0):s.lines=e,this.#e&&(s.accessibilityData={type:"Figure",alt:this.#e}),s}static deserializeDraw(t,e,n,i,s,l){return l.areContours?Nb.deserialize(t,e,n,i,s,l):vp.deserialize(t,e,n,i,s,l)}static async deserialize(t,e,n){const i=await super.deserialize(t,e,n);return i.#t=t.areContours,i.description=t.accessibilityData?.alt||"",i.#n=t.uuid,i}}class LD extends mn{#t=null;#e=null;#r=null;#n=null;#i=null;#a="";#s=null;#o=!1;#u=null;#l=!1;#f=!1;static _type="stamp";static _editorType=Pn.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#i=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){mn.initialize(t,e)}static isHandlingMimeForPasting(t){return bb.includes(t)}static paste(t,e){e.pasteEditor({mode:Pn.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#a=t.file.name),this.#m()}#d(){if(this.#r=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:s,height:l}=t||this.copyCanvas(null,null,!0).imageData,o=await n.guess({name:"altText",request:{data:i,width:s,height:l,channels:i.length/(s*l)}});if(!o)throw new Error("No response from the AI service.");if(o.error)throw new Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw new Error("No valid response from the AI service.");const c=o.output;return await this.setGuessedAltText(c),e&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(n=>this.#h(n,!0)).finally(()=>this.#d());return}if(this.#n){const n=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromUrl(n).then(i=>this.#h(i)).finally(()=>this.#d());return}if(this.#i){const n=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromFile(n).then(i=>this.#h(i)).finally(()=>this.#d());return}const t=document.createElement("input");t.type="file",t.accept=bb.join(",");const e=this._uiManager._signal;this.#r=new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(i)}n()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:e})}).finally(()=>this.#d()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#r||this.#t||this.#n||this.#i||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#m():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:n,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#e=n,i&&(this.#t=i),this.#o=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#u!==null&&clearTimeout(this.#u);const t=200;this.#u=setTimeout(()=>{this.#u=null,this.#p()},t)}#m(){const{div:t}=this;let{width:e,height:n}=this.#t;const[i,s]=this.pageDimensions,l=.75;if(this.width)e=this.width*i,n=this.height*s;else if(e>l*i||n>l*s){const c=Math.min(l*i/e,l*s/n);e*=c,n*=c}this._uiManager.enableWaiting(!1);const o=this.#s=document.createElement("canvas");o.setAttribute("role","img"),this.addContainer(o),this.width=e/i,this.height=n/s,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#f||(this.parent.addUndoableEditor(this),this.#f=!0),this._reportTelemetry({action:"inserted_image"}),this.#a&&this.div.setAttribute("aria-description",this.#a),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,n=!1){t||(t=224);const{width:i,height:s}=this.#t,l=new lu;let o=this.#t,c=i,h=s,f=null;if(e){if(i>e||s>e){const q=Math.min(e/i,e/s);c=Math.floor(i*q),h=Math.floor(s*q)}f=document.createElement("canvas");const y=f.width=Math.ceil(c*l.sx),m=f.height=Math.ceil(h*l.sy);this.#l||(o=this.#c(y,m));const w=f.getContext("2d");w.filter=this._uiManager.hcmFilter;let b="white",_="#cfcfd8";this._uiManager.hcmFilter!=="none"?_="black":ZL.isDarkMode&&(b="#8f8f9d",_="#42414d");const v=15,A=v*l.sx,C=v*l.sy,S=new OffscreenCanvas(A*2,C*2),O=S.getContext("2d");O.fillStyle=b,O.fillRect(0,0,A*2,C*2),O.fillStyle=_,O.fillRect(0,0,A,C),O.fillRect(A,C,A,C),w.fillStyle=w.createPattern(S,"repeat"),w.fillRect(0,0,y,m),w.drawImage(o,0,0,o.width,o.height,0,0,y,m)}let p=null;if(n){let y,m;if(l.symmetric&&o.width<t&&o.height<t)y=o.width,m=o.height;else if(o=this.#t,i>t||s>t){const _=Math.min(t/i,t/s);y=Math.floor(i*_),m=Math.floor(s*_),this.#l||(o=this.#c(y,m))}const b=new OffscreenCanvas(y,m).getContext("2d",{willReadFrequently:!0});b.drawImage(o,0,0,o.width,o.height,0,0,y,m),p={width:y,height:m,data:b.getImageData(0,0,y,m).data}}return{canvas:f,width:c,height:h,imageData:p}}#c(t,e){const{width:n,height:i}=this.#t;let s=n,l=i,o=this.#t;for(;s>2*t||l>2*e;){const c=s,h=l;s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const f=new OffscreenCanvas(s,l);f.getContext("2d").drawImage(o,0,0,c,h,0,0,s,l),o=f.transferToImageBitmap()}return o}#p(){const[t,e]=this.parentDimensions,{width:n,height:i}=this,s=new lu,l=Math.ceil(n*t*s.sx),o=Math.ceil(i*e*s.sy),c=this.#s;if(!c||c.width===l&&c.height===o)return;c.width=l,c.height=o;const h=this.#l?this.#t:this.#c(l,o),f=c.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(h,0,0,h.width,h.height,0,0,l,o)}#y(t){if(t){if(this.#l){const i=this._uiManager.imageManager.getSvgUrl(this.#e);if(i)return i}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,n]=this.pageDimensions,i=Math.round(this.width*e*Of.PDF_TO_CSS_UNITS),s=Math.round(this.height*n*Of.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(i,s);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,i,s),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,n){let i=null,s=!1;if(t instanceof q4){const{data:{rect:b,rotation:_,id:v,structParent:A,popupRef:C,richText:S,contentsObj:O,creationDate:q,modificationDate:H},container:Q,parent:{page:{pageNumber:I}},canvas:dt}=t;let nt,B;dt?(delete t.canvas,{id:nt,bitmap:B}=n.imageManager.getFromCanvas(Q.id,dt),dt.remove()):(s=!0,t._hasNoCanvas=!0);const Z=(await e._structTree.getAriaAttributes(`${cf}${v}`))?.get("aria-label")||"";i=t={annotationType:Pn.STAMP,bitmapId:nt,bitmap:B,pageIndex:I-1,rect:b.slice(0),rotation:_,annotationElementId:v,id:v,deleted:!1,accessibilityData:{decorative:!1,altText:Z},isSvg:!1,structParent:A,popupRef:C,richText:S,comment:O?.str||null,creationDate:q,modificationDate:H}}const l=await super.deserialize(t,e,n),{rect:o,bitmap:c,bitmapUrl:h,bitmapId:f,isSvg:p,accessibilityData:y}=t;s?(n.addMissingCanvas(t.id,l),l.#o=!0):f&&n.imageManager.isValidId(f)?(l.#e=f,c&&(l.#t=c)):l.#n=h,l.#l=p;const[m,w]=l.pageDimensions;return l.width=(o[2]-o[0])/m,l.height=(o[3]-o[1])/w,y&&(l.altTextData=y),l._initialData=i,t.comment&&l.setCommentData(t),l.#f=!!i,l}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(n),t)return n.bitmapUrl=this.#y(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:i,altText:s}=this.serializeAltText(!1);if(!i&&s&&(n.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const o=this.#b(n);return o.isSame?null:(o.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1,n.id=this.annotationElementId,delete n.bitmapId,n)}if(e===null)return n;e.stamps||=new Map;const l=this.#l?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:l,serialized:n}),n.bitmap=this.#y(!1);else if(this.#l){const o=e.stamps.get(this.#e);l>o.area&&(o.area=l,o.serialized.bitmap.close(),o.serialized.bitmap=this.#y(!1))}return n}#b(t){const{pageIndex:e,accessibilityData:{altText:n}}=this._initialData,i=t.pageIndex===e,s=(t.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&s,isSameAltText:s}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Iu{#t;#e=!1;#r=null;#n=null;#i=null;#a=new Map;#s=!1;#o=!1;#u=!1;#l=null;#f=null;#h=null;#d=null;#g=null;#m=-1;#c;static _initialized=!1;static#p=new Map([Os,R2,LD,zi,eu].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:i,accessibilityManager:s,annotationLayer:l,drawLayer:o,textLayer:c,viewport:h,l10n:f}){const p=[...Iu.#p.values()];if(!Iu._initialized){Iu._initialized=!0;for(const y of p)y.initialize(f,t)}t.registerEditorTypes(p),this.#c=t,this.pageIndex=e,this.div=n,this.#t=s,this.#r=l,this.viewport=h,this.#h=c,this.drawLayer=o,this._structTree=i,this.#c.addLayer(this)}updatePageIndex(t){this.pageIndex=t}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#c.getMode()===Pn.NONE}updateToolbar(t){this.#c.updateToolbar(t)}updateMode(t=this.#c.getMode()){switch(this.#w(),t){case Pn.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Pn.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Pn.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Pn.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of Iu.#p.values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#c.setEditingState(t)}addCommands(t){this.#c.addCommands(t)}cleanUndoStack(t){this.#c.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#r?.togglePointerEvents(t)}get#y(){return this.#a.size!==0?this.#a.values():this.#c.getEditors(this.pageIndex)}async enable(){this.#u=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const t=new Set;for(const n of this.#y)n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#c.removeChangedExistingAnnotation(n),t.add(n.annotationElementId));const e=this.#r;if(e)for(const n of e.getEditableAnnotations()){if(n.hide(),this.#c.isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const i=await this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}this.#u=!1,this.#c._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#g){this.#g=new AbortController;const i=this.#c.combinedSignal(this.#g);this.#h.div.addEventListener("pointerdown",s=>{const{clientX:o,clientY:c,timeStamp:h}=s,f=this.#m;if(h-f>500){this.#m=h;return}this.#m=-1;const{classList:p}=this.div;p.toggle("getElements",!0);const y=document.elementsFromPoint(o,c);if(p.toggle("getElements",!1),!this.div.contains(y[0]))return;let m;const w=new RegExp(`^${tp}[0-9]+$`);for(const _ of y)if(w.test(_.id)){m=_.id;break}if(!m)return;const b=this.#a.get(m);b?.annotationElementId===null&&(s.stopPropagation(),s.preventDefault(),b.dblclick(s))},{signal:i,capture:!0})}const t=this.#r,e=[];if(t){const i=new Map,s=new Map;for(const o of this.#y){if(o.disableEditing(),!o.annotationElementId){e.push(o);continue}if(o.serialize()!==null){i.set(o.annotationElementId,o);continue}else s.set(o.annotationElementId,o);this.getEditableAnnotation(o.annotationElementId)?.show(),o.remove()}const l=t.getEditableAnnotations();for(const o of l){const{id:c}=o.data;if(this.#c.isDeletedAnnotationElement(c)){o.updateEdited({deleted:!0});continue}let h=s.get(c);if(h){h.resetAnnotationElement(o),h.show(!1),o.show();continue}h=i.get(c),h&&(this.#c.addChangedExistingAnnotation(h),h.renderAnnotationElement(o)&&h.show(!1)),o.show()}}this.#w(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const i of Iu.#p.values())n.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(e),this.#o=!1}getEditableAnnotation(t){return this.#r?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#c.getActive()!==t&&this.#c.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#d){this.#d=new AbortController;const t=this.#c.combinedSignal(this.#d);this.#h.div.addEventListener("pointerdown",this.#b.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#d&&(this.#d.abort(),this.#d=null,this.#h.div.classList.remove("highlighting"))}#b(t){this.#c.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:n}=ws.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#c.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),zi.startHighlighting(this,this.#c.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#c._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#c.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#a.set(t.id,t);const{annotationElementId:e}=t;e&&this.#c.isDeletedAnnotationElement(e)&&this.#c.removeDeletedAnnotationElement(t)}detach(t){this.#a.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#c.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#c.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#c.addDeletedAnnotationElement(t),mn.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#c.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#u),this.#c.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#i&&(t._focusEventsAllowed=!1,this.#i=setTimeout(()=>{this.#i=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#c._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of this.#a.values())if(e.uid===t)return e;return null}getNextId(){return this.#c.getId()}get#v(){return Iu.#p.get(this.#c.getMode())}combinedSignal(t){return this.#c.combinedSignal(t)}#S(t){const e=this.#v;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#c.updateMode(t.mode);const{offsetX:n,offsetY:i}=this.#A(),s=this.getNextId(),l=this.#S({parent:this,id:s,x:n,y:i,uiManager:this.#c,isCentered:!0,...e});l&&this.add(l)}async deserialize(t){return await Iu.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#c)||null}createAndAddNewEditor(t,e,n={}){const i=this.getNextId(),s=this.#S({parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:this.#c,isCentered:e,...n});return s&&this.add(s),s}get boundingClientRect(){return this.div.getBoundingClientRect()}#A(){const{x:t,y:e,width:n,height:i}=this.boundingClientRect,s=Math.max(0,t),l=Math.max(0,e),o=Math.min(window.innerWidth,t+n),c=Math.min(window.innerHeight,e+i),h=(s+o)/2-t,f=(l+c)/2-e,[p,y]=this.viewport.rotation%180===0?[h,f]:[f,h];return{offsetX:p,offsetY:y}}addNewEditor(t={}){this.createAndAddNewEditor(this.#A(),!0,t)}setSelected(t){this.#c.setSelected(t)}toggleSelected(t){this.#c.toggleSelected(t)}unselect(t){this.#c.unselect(t)}pointerup(t){const{isMac:e}=ws.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#s||(this.#s=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const n=this.#c.getMode();if(n===Pn.STAMP||n===Pn.SIGNATURE){this.#c.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#c.getMode()===Pn.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:e}=ws.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#s=!0,this.#v?.isDrawer){this.startDrawingSession(t);return}const n=this.#c.getActive();this.#e=!n||n.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#v.startDrawing(this,this.#c,!1,t);return}this.#c.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#c.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#f=null,this.commitOrRemove())},{signal:e}),this.#v.startDrawing(this,this.#c,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#f=e);return}this.#f&&setTimeout(()=>{this.#f?.focus(),this.#f=null},0)}endDrawingSession(t=!1){return this.#l?(this.#c.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#f=null,this.#v.endDrawing(t)):null}findNewParent(t,e,n){const i=this.#c.findParent(e,n);return i===null||i===this?!1:(i.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#c.getActive()?.parent===this&&(this.#c.commitOrRemove(),this.#c.setActiveEditor(null)),this.#i&&(clearTimeout(this.#i),this.#i=null);for(const t of this.#a.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#a.clear(),this.#c.removeLayer(this)}#w(){for(const t of this.#a.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,uh(this.div,t);for(const e of this.#c.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#c.commitOrRemove(),this.#w();const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,uh(this.div,{rotation:n}),e!==n)for(const i of this.#a.values())i.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#c.viewParameters.realScale}}class Ws{#t=null;#e=new Map;#r=new Map;static#n=0;setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return Nn(this,"_svgFactory",new wg)}static#i(t,[e,n,i,s]){const{style:l}=t;l.top=`${100*n}%`,l.left=`${100*e}%`,l.width=`${100*i}%`,l.height=`${100*s}%`}#a(){const t=Ws._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,e){const n=Ws._svgFactory.createElement("clipPath");t.append(n);const i=`clip_${e}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const s=Ws._svgFactory.createElement("use");return n.append(s),s.setAttribute("href",`#${e}`),s.classList.add("clip"),i}#o(t,e){for(const[n,i]of Object.entries(e))i===null?t.removeAttribute(n):t.setAttribute(n,i)}draw(t,e=!1,n=!1){const i=Ws.#n++,s=this.#a(),l=Ws._svgFactory.createElement("defs");s.append(l);const o=Ws._svgFactory.createElement("path");l.append(o);const c=`path_${i}`;o.setAttribute("id",c),o.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#r.set(i,o);const h=n?this.#s(l,c):null,f=Ws._svgFactory.createElement("use");return s.append(f),f.setAttribute("href",`#${c}`),this.updateProperties(s,t),this.#e.set(i,s),{id:i,clipPathId:`url(#${h})`}}drawOutline(t,e){const n=Ws.#n++,i=this.#a(),s=Ws._svgFactory.createElement("defs");i.append(s);const l=Ws._svgFactory.createElement("path");s.append(l);const o=`path_${n}`;l.setAttribute("id",o),l.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){const p=Ws._svgFactory.createElement("mask");s.append(p),c=`mask_${n}`,p.setAttribute("id",c),p.setAttribute("maskUnits","objectBoundingBox");const y=Ws._svgFactory.createElement("rect");p.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const m=Ws._svgFactory.createElement("use");p.append(m),m.setAttribute("href",`#${o}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const h=Ws._svgFactory.createElement("use");i.append(h),h.setAttribute("href",`#${o}`),c&&h.setAttribute("mask",`url(#${c})`);const f=h.cloneNode();return i.append(f),h.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(i,t),this.#e.set(n,i),n}finalizeDraw(t,e){this.#r.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:n,bbox:i,rootClass:s,path:l}=e,o=typeof t=="number"?this.#e.get(t):t;if(o){if(n&&this.#o(o,n),i&&Ws.#i(o,i),s){const{classList:c}=o;for(const[h,f]of Object.entries(s))c.toggle(h,f)}if(l){const h=o.firstElementChild.firstElementChild;this.#o(h,l)}}}updateParent(t,e){if(e===this)return;const n=this.#e.get(t);n&&(e.#t.append(n),this.#e.delete(t),e.#e.set(t,n))}remove(t){this.#r.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#r.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Cb};globalThis.pdfjsLib={AbortException:Tc,AnnotationEditorLayer:Iu,AnnotationEditorParamsType:ir,AnnotationEditorType:Pn,AnnotationEditorUIManager:Nc,AnnotationLayer:k2,AnnotationMode:wc,AnnotationType:ss,applyOpacity:tO,build:oD,ColorPicker:B4,createValidAbsoluteUrl:u4,CSSConstants:JL,DOMSVGFactory:wg,DrawLayer:Ws,FeatureTest:ws,fetchData:pp,findContrastColor:eO,getDocument:D4,getFilenameFromUrl:KL,getPdfFilenameFromUrl:$L,getRGB:gp,getUuid:h4,getXfaPageViewport:YL,GlobalWorkerOptions:vf,ImageKind:Zm,InvalidPDFException:yb,isDataScheme:Ug,isPdfFile:b2,isValidExplicitDest:fO,MathClamp:Ks,noContextMenu:Vo,normalizeUnicode:VL,OPS:ep,OutputScale:lu,PagesMapper:Ar,PasswordResponses:ML,PDFDataRangeTransport:P4,PDFDateString:vb,PDFWorker:rp,PermissionFlag:PL,PixelsPerInch:Of,RenderingCancelledException:v2,renderRichText:d4,ResponseException:vg,setLayerDimensions:uh,shadow:Nn,SignatureExtractor:af,stopEvent:Mi,SupportedImageMimeTypes:bb,TextLayer:_o,TouchManager:zg,updateUrlHash:c4,Util:Ge,VerbosityLevel:Fg,version:aD,XfaLayer:f4};vf.workerSrc=new URL("/static/frontend/assets/pdf.worker-BA9kU3Pw.mjs",import.meta.url).toString();const OD=()=>typeof window<"u"&&window.devicePixelRatio||1;function DD(r,t){const e=Math.sqrt(t[2]*t[2]+t[3]*t[3]),n=Math.sqrt(t[0]*t[0]+t[1]*t[1]),i=e,s=i,l=typeof r.width=="number"&&r.width>0?r.width*n:(r.str?.length||1)*s*.5,o=t[4],c=t[5]-i*.85;return{x:o,y:c,w:l,h:s}}function PD(r,t,e){const i=(typeof document<"u"?document.createElement("canvas"):null)?.getContext("2d"),s=[];let l=0,o=-999;const c=4;let h=0;return r.items.forEach(f=>{if(!f.str||f.str.trim()==="")return;const p=Ge.transform(t.transform,f.transform),y=DD(f,p);Math.abs(y.y-o)>c&&(l+=1,o=y.y);const m=y.h,w=typeof f.width=="number"&&f.width>0?f.width*e:y.w,b=f.str.split(/(\s+)/);if(!i||b.length===0){s.push({id:h++,text:f.str,x:y.x,y:y.y,w:y.w,h:y.h,fontSize:y.h,lineIndex:l});return}i.font=`${m}px sans-serif`;const _=b.map(S=>({text:S,measured:i.measureText(S).width,isSpace:/^\s+$/.test(S)||S===""})),v=_.reduce((S,O)=>S+O.measured,0),A=v>0?w/v:1;let C=0;_.forEach(S=>{const O=S.measured*A;if(S.text===""||S.isSpace){C+=O;return}s.push({id:h,text:S.text,x:y.x+C,y:y.y,w:O,h:m,fontSize:m,lineIndex:l}),h+=1,C+=O})}),s}function V4(r){const t={};return r.forEach(e=>{const n=e.lineIndex??Math.round(e.y/4)*4;t[n]||(t[n]=[]),t[n].push(e)}),Object.values(t)}function j_(r,t,e){let s=null,l=1/0;for(const o of r){if(!(e>=o.y-6&&e<=o.y+o.h+6))continue;if(t>=o.x-4&&t<=o.x+o.w+4)return o;const f=t<o.x?o.x-t:t-(o.x+o.w);f<l&&f<40&&(l=f,s=o)}return s}function MD(r){if(!r.length)return"";let t="";for(let e=0;e<r.length;e++){const n=r[e];if(e>0){const i=r[e-1];Math.abs(n.y-i.y)<6?n.x-(i.x+i.w)>1&&(t+=" "):t+=" "}t+=n.text}return t.trim()}function FD(r,t){return r.length?V4(r).map(n=>{const i=Math.min(...n.map(p=>p.x)),s=Math.max(...n.map(p=>p.x+p.w)),l=n.map(p=>p.y),o=l.sort((p,y)=>p-y)[Math.floor(l.length/2)],c=Math.max(...n.map(p=>p.h)),h=2;return{x:(i-1)/t,y:(o-h)/t,width:(s-i+2)/t,height:(c+h+3)/t}}):[]}function BD({pdfData:r,scale:t,highlights:e=[],hoveredHighlightId:n=null,activeHighlightId:i=null,selectionForPicker:s=null,presetColors:l=[],onSelectionComplete:o,onNumPages:c,onHighlightHover:h,onHighlightHoverEnd:f,onHighlightEdit:p,onHighlightDelete:y}){const[m,w]=Lt.useState(null),[b,_]=Lt.useState(0),[v,A]=Lt.useState(!0);return Lt.useEffect(()=>{if(!r)return;let C=!1;return(async()=>{A(!0);try{const O=r.slice(0),q=await D4({data:O}).promise;C||(w(q),_(q.numPages),c?.(q.numPages))}catch(O){console.error("Failed to load PDF",O)}C||A(!1)})(),()=>{C=!0}},[r,c]),v?Y.jsx("div",{className:"flex items-center justify-center h-full",children:Y.jsx(su,{className:"w-6 h-6 text-slate-400 animate-spin"})}):m?Y.jsx("div",{className:"flex flex-col items-center py-6 gap-4",children:Array.from({length:b},(C,S)=>Y.jsx(ID,{pdf:m,pageNumber:S+1,scale:t,pageHighlights:e.filter(O=>O.page_number===S+1),hoveredHighlightId:n,activeHighlightId:i,selectionForPicker:s,presetColors:l,onSelectionComplete:o,onHighlightHover:h,onHighlightHoverEnd:f,onHighlightEdit:p,onHighlightDelete:y},S))}):null}function ID({pdf:r,pageNumber:t,scale:e,pageHighlights:n,hoveredHighlightId:i,activeHighlightId:s,selectionForPicker:l,presetColors:o=[],onSelectionComplete:c,onHighlightHover:h,onHighlightHoverEnd:f,onHighlightEdit:p,onHighlightDelete:y}){const m=Lt.useRef(null),w=Lt.useRef(null),b=Lt.useRef(null),_=Lt.useRef(null),[v,A]=Lt.useState({width:0,height:0}),[C,S]=Lt.useState([]),[O,q]=Lt.useState(null),[H,Q]=Lt.useState(null),[I,dt]=Lt.useState(!1),nt=Lt.useRef(null),B=Lt.useRef(null),Z=Lt.useCallback(()=>{B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{f?.(),B.current=null},1e3)},[f]),D=Lt.useCallback($=>{B.current&&(clearTimeout(B.current),B.current=null),h?.($)},[h]);Lt.useEffect(()=>()=>{B.current&&clearTimeout(B.current)},[]),Lt.useEffect(()=>{let $=!1;return(async()=>{const K=await r.getPage(t),rt=OD(),pt=K.getViewport({scale:e}),ct=K.getViewport({scale:e*rt}),F=w.current;if(!F||$)return;const j=F.getContext("2d",{alpha:!1});j.imageSmoothingEnabled=!0,j.imageSmoothingQuality="high",F.width=ct.width,F.height=ct.height,F.style.width=`${pt.width}px`,F.style.height=`${pt.height}px`,A({width:pt.width,height:pt.height}),await K.render({canvasContext:j,viewport:ct}).promise;const ht=await K.getTextContent();if($)return;const ot=PD(ht,pt,e);S(ot);const lt=b.current;!lt||$||(lt.innerHTML="",lt.style.width=`${pt.width}px`,lt.style.height=`${pt.height}px`,ot.forEach(ft=>{const Mt=document.createElement("span");Mt.textContent=ft.text,Mt.style.position="absolute",Mt.style.left=`${ft.x}px`,Mt.style.top=`${ft.y}px`,Mt.style.width=`${ft.w}px`,Mt.style.height=`${ft.h}px`,Mt.style.fontSize=`${ft.fontSize}px`,Mt.style.fontFamily="sans-serif",Mt.style.color="transparent",Mt.style.whiteSpace="pre",Mt.style.pointerEvents="none",Mt.style.lineHeight="1",lt.appendChild(Mt)}))})(),()=>{$=!0}},[r,t,e]);const mt=Lt.useMemo(()=>{if(l&&l.pageNumber===t){const K=Math.min(l.spanStart,l.spanEnd),rt=Math.max(l.spanStart,l.spanEnd);return C.filter(pt=>pt.id>=K&&pt.id<=rt)}if(O==null||H==null)return[];const $=Math.min(O,H),R=Math.max(O,H);return C.filter(K=>K.id>=$&&K.id<=R)},[C,l,t,O,H]);Lt.useEffect(()=>{l===null&&nt.current?.pageNumber===t&&(q(null),Q(null)),nt.current=l},[l,t]);const it=Lt.useCallback(($,R)=>{const K=m.current?.getBoundingClientRect();return K?{x:$-K.left,y:R-K.top}:{x:0,y:0}},[]),st=Lt.useCallback($=>{if($.button!==0||!C.length)return;const{x:R,y:K}=it($.clientX,$.clientY),rt=j_(C,R,K);rt?(q(rt.id),Q(rt.id),dt(!0)):(q(null),Q(null))},[C,it]),vt=Lt.useCallback($=>{if(!I)return;const{x:R,y:K}=it($.clientX,$.clientY),rt=j_(C,R,K);rt&&Q(rt.id)},[I,C,it]),wt=Lt.useCallback($=>{if($.button!==0||!I)return;if(dt(!1),mt.length<2){q(null),Q(null);return}if(!c)return;const R=m.current?.getBoundingClientRect();if(!R)return;const K={rects:FD(mt,e)},rt=MD(mt),pt=mt[mt.length-1],ct={x:R.left+(pt.x+pt.w/2),y:R.top+(pt.y-8)};c({pageNumber:t,position_data:K,highlighted_text:rt,spanStart:Math.min(O,H),spanEnd:Math.max(O,H),pickerPosition:ct})},[I,mt,O,H,e,t,c]);Lt.useEffect(()=>{const $=_.current||m.current;if($)return $.addEventListener("mousedown",st),$.addEventListener("mousemove",vt),$.addEventListener("mouseup",wt),$.addEventListener("mouseleave",wt),()=>{$.removeEventListener("mousedown",st),$.removeEventListener("mousemove",vt),$.removeEventListener("mouseup",wt),$.removeEventListener("mouseleave",wt)}},[st,vt,wt]);const Ft=Lt.useMemo(()=>V4(mt),[mt]);return Y.jsxs("div",{ref:m,"data-page":t,className:"relative shadow-lg bg-white overflow-hidden select-none",style:{width:v.width||0,height:v.height||0,cursor:"text"},title:"Drag to highlight text",children:[Y.jsx("canvas",{ref:w,className:"block w-full h-full",style:{display:"block"}}),Y.jsxs("div",{ref:_,className:"absolute inset-0",style:{pointerEvents:"auto"},children:[n.map($=>{const R=$.position_data?.rects||[],K=(o??[]).find(lt=>lt.key===$.color),rt=Gu[$.color]||Gu.yellow,pt=K?.hex??rt?.hex??rt?.solid,ct=i!=null&&String($.id)===String(i),F=s!=null&&String($.id)===String(s),j=ct||F?Lf(pt,.38):Lf(pt,.18),ht=p||y;let ot=null;if(R.length>0){const lt=Math.min(...R.map(tt=>tt.x))*e,ft=Math.min(...R.map(tt=>tt.y))*e,Mt=Math.max(...R.map(tt=>(tt.x||0)+(tt.width||0)))*e,W=Math.max(...R.map(tt=>(tt.y||0)+(tt.height||4)))*e;ot={left:lt,top:ft,width:Mt-lt,height:W-ft}}return ot?Y.jsxs("div",{className:"absolute rounded-sm transition-colors duration-150 group",style:{left:ot.left,top:ot.top,width:ot.width,height:ot.height,pointerEvents:"auto"},onMouseEnter:()=>D($.id),onMouseLeave:Z,children:[R.map((lt,ft)=>Y.jsx("div",{className:"absolute rounded-sm transition-colors duration-150",style:{left:(lt.x||0)*e-ot.left,top:(lt.y||0)*e-ot.top,width:Math.max(0,(lt.width||0)*e),height:Math.max(4,(lt.height||0)*e),backgroundColor:j,pointerEvents:"none"}},ft)),ht&&ct&&ot&&Y.jsxs("div",{className:"absolute flex items-center gap-0.5 rounded-md border border-slate-200 bg-white shadow-sm z-10",style:{left:0,bottom:"100%",marginBottom:4},onMouseEnter:()=>D($.id),onMouseLeave:Z,children:[p&&Y.jsx("button",{type:"button",onClick:lt=>{lt.stopPropagation(),p($.id,lt)},className:"p-1.5 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-l-md transition-colors",title:"Edit note","aria-label":"Edit note",children:Y.jsx(gg,{className:"w-3.5 h-3.5",strokeWidth:2})}),y&&Y.jsx("button",{type:"button",onClick:lt=>{lt.stopPropagation(),y($.id)},className:"p-1.5 text-slate-600 hover:text-red-600 hover:bg-red-50 rounded-r-md transition-colors",title:"Delete highlight","aria-label":"Delete highlight",children:Y.jsx(Jd,{className:"w-3.5 h-3.5",strokeWidth:2})})]})]},$.id):null}),Ft.map(($,R)=>{const K=Math.min(...$.map(ot=>ot.x)),rt=Math.max(...$.map(ot=>ot.x+ot.w)),pt=$.map(ot=>ot.y).sort((ot,lt)=>ot-lt),ct=pt[Math.floor(pt.length/2)],F=Math.max(...$.map(ot=>ot.h)),j=2;return Y.jsx("div",{className:"absolute rounded-sm pointer-events-none",style:{left:`${K-1}px`,top:`${ct-j}px`,width:`${rt-K+2}px`,height:`${F+j+3}px`,backgroundColor:"rgba(59, 130, 246, 0.2)"}},R)})]}),Y.jsx("div",{ref:b,className:"absolute inset-0 overflow-hidden pointer-events-none","aria-hidden":!0})]})}function jD({highlights:r,colorLabels:t,presetColors:e=[],documentColorKeys:n,activeHighlightId:i,onScrollToPage:s,onHighlightClick:l,onHighlightHover:o,onHighlightHoverEnd:c,onClearActive:h,documentId:f,onHighlightNoteUpdate:p,onHighlightDelete:y,openEditForHighlightId:m,onClearOpenEditForHighlightId:w}){const b=e?.length>0?e.map(D=>D.key):n?.length>0?n:y2,[_,v]=Lt.useState("all"),[A,C]=Lt.useState(!1),[S,O]=Lt.useState(""),[q,H]=Lt.useState(null),[Q,I]=Lt.useState("");Lt.useEffect(()=>{if(m==null||!r?.length)return;const D=r.find(mt=>String(mt.id)===String(m));D&&(H(D.id),I(D.note?.content??"")),w?.()},[m,r,w]);const dt=Lt.useMemo(()=>{let D=r||[];if(_!=="all"&&(D=D.filter(mt=>mt.color===_)),S.trim()){const mt=S.trim().toLowerCase();D=D.filter(it=>it.highlighted_text&&it.highlighted_text.toLowerCase().includes(mt)||it.note?.content&&it.note.content.toLowerCase().includes(mt))}return D},[r,_,S]),nt=D=>{H(D.id),I(D.note?.content??"")},B=async()=>{if(q==null||!f||!p){H(null);return}await p(q,Q.trim()||""),H(null)},Z=()=>{H(null),I("")};return Y.jsxs("div",{className:`w-80 shrink-0 flex flex-col border-l ${Ac.default} ${ih.surface}`,children:[Y.jsxs("div",{className:`px-4 pt-5 pb-0 border-b ${Ac.default}`,children:[Y.jsx("h2",{className:`text-[15px] font-semibold ${Un.heading} mb-1`,children:"Annotations"}),Y.jsxs("p",{className:`text-xs ${Un.muted} mb-4`,children:[dt.length," highlight",dt.length!==1?"s":"",r?.length!==dt.length&&` of ${r?.length||0}`]}),Y.jsxs("div",{className:"space-y-2 mb-4",children:[Y.jsx("div",{children:Y.jsx("button",{type:"button",onClick:()=>{v("all"),h?.()},className:`text-[11px] font-semibold px-3 py-1 rounded-full border cursor-pointer transition-colors ${_==="all"?"bg-slate-900 text-white border-slate-900":`border-slate-200 ${Un.secondary} hover:bg-slate-50`}`,children:"All"})}),Y.jsxs("div",{children:[Y.jsxs("button",{type:"button",onClick:()=>C(D=>!D),className:`flex items-center gap-1.5 text-[11px] font-semibold ${Un.secondary} hover:text-slate-800 transition-colors`,children:[A?Y.jsx(fb,{className:"w-3.5 h-3.5 shrink-0"}):Y.jsx(KR,{className:"w-3.5 h-3.5 shrink-0"}),"Categories"]}),!A&&Y.jsx("div",{className:"flex flex-wrap gap-1.5 mt-1.5",children:b.map(D=>{const mt=(r||[]).filter($=>$.color===D).length,it=Gu[D],vt=e?.find($=>$.key===D)?.hex??it?.hex??it?.solid??"#94a3b8",wt=Cc(D,t,e),Ft=_===D;return Y.jsxs("button",{type:"button",onClick:()=>{v(Ft?"all":D),h?.()},className:`text-[11px] font-semibold px-2.5 py-1 rounded-full border cursor-pointer transition-colors flex items-center gap-1.5 ${Ft?"border-transparent":`border-slate-200 ${Un.secondary} hover:bg-slate-50`}`,style:Ft?{backgroundColor:`${vt}25`,color:vt}:void 0,children:[Y.jsx("span",{className:"w-2 h-2 rounded-full shrink-0",style:{backgroundColor:vt,opacity:1}}),Y.jsx("span",{children:wt}),Y.jsxs("span",{className:Ft?"opacity-80":Un.muted,children:["(",mt,")"]})]},D)})})]})]}),Y.jsxs("div",{className:"relative mb-4",children:[Y.jsx(o4,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-400",strokeWidth:2}),Y.jsx("input",{type:"text",placeholder:"Search highlights...",value:S,onChange:D=>O(D.target.value),className:`w-full pl-8 pr-3 py-1.5 text-xs border ${Ac.default} rounded-lg bg-slate-50 outline-none ${Un.body} placeholder:${Un.muted}`})]})]}),Y.jsx("div",{className:"flex-1 overflow-auto px-3 pb-5",children:r?.length?dt.length?Y.jsx("ul",{className:"space-y-1.5",children:dt.map(D=>{const mt=Gu[D.color]||Gu.yellow,st=e?.find(Ft=>Ft.key===D.color)?.hex??mt?.hex??mt?.solid??"#94a3b8",vt=D.note?.content,wt=i!=null&&String(D.id)===String(i);return Y.jsx("li",{children:Y.jsxs("div",{role:"button",tabIndex:0,className:`w-full text-left rounded-[10px] p-3 transition-all cursor-pointer border ${wt?"border-slate-300":"border-transparent hover:border-slate-200"} hover:bg-slate-50`,onClick:()=>{l?.(D.id),s?.(D.page_number)},onKeyDown:Ft=>{Ft.target.tagName==="TEXTAREA"||Ft.target.tagName==="INPUT"||Ft.target.isContentEditable||(Ft.key==="Enter"||Ft.key===" ")&&(Ft.preventDefault(),l?.(D.id),s?.(D.page_number))},onMouseEnter:()=>o?.(D.id),onMouseLeave:c,children:[Y.jsxs("div",{className:"flex gap-2.5",children:[Y.jsx("div",{className:"w-0.5 min-h-9 shrink-0 rounded-full transition-opacity",style:{backgroundColor:st,opacity:wt?1:.6}}),Y.jsx("div",{className:"flex-1 min-w-0",children:Y.jsx("p",{className:`text-xs leading-snug ${Un.body} line-clamp-3`,children:D.highlighted_text||"(No text captured)"})})]}),q===D.id?Y.jsxs("div",{className:"mt-2 pl-3.5 space-y-1.5",children:[Y.jsx("textarea",{value:Q,onChange:Ft=>I(Ft.target.value),placeholder:"Add a comment...",rows:2,className:`w-full text-[11.5px] border ${Ac.default} rounded-lg px-2 py-1.5 resize-none outline-none focus:ring-1 focus:ring-slate-300 ${Un.body}`}),Y.jsxs("div",{className:"flex gap-1.5",children:[Y.jsx("button",{type:"button",onClick:B,className:"text-[11px] font-medium px-2 py-1 rounded bg-slate-800 text-white hover:bg-slate-700",children:"Save"}),Y.jsx("button",{type:"button",onClick:Z,className:"text-[11px] font-medium px-2 py-1 rounded text-slate-600 hover:bg-slate-100",children:"Cancel"})]})]}):Y.jsxs(Y.Fragment,{children:[vt&&Y.jsx("p",{className:`text-[11.5px] ${Un.muted} mt-2 pl-3.5 leading-snug italic`,children:vt}),f&&p&&Y.jsx("button",{type:"button",onClick:()=>nt(D),className:"mt-1.5 pl-3.5 text-[11px] text-slate-500 hover:text-slate-700",children:vt?"Edit comment":"Add comment"})]}),Y.jsxs("div",{className:"mt-2 pl-3.5 flex items-center gap-2 flex-wrap",children:[Y.jsx("span",{className:"text-[10px] font-semibold px-2 py-0.5 rounded",style:{color:st,backgroundColor:`${st}12`},children:Cc(D.color,t,e)}),Y.jsxs("span",{className:"text-[10px] text-slate-400",children:["p.",D.page_number]}),f&&y&&Y.jsx("button",{type:"button",onClick:Ft=>{Ft.stopPropagation(),y(D.id)},className:"ml-auto p-1 rounded text-slate-400 hover:text-red-600 hover:bg-red-50 transition-colors",title:"Delete highlight","aria-label":"Delete highlight",children:Y.jsx(Jd,{className:"w-3.5 h-3.5",strokeWidth:2})})]})]})},D.id)})}):Y.jsx("div",{className:`py-6 text-center ${Un.muted} text-sm`,children:"No matching highlights."}):Y.jsxs("div",{className:`py-8 text-center ${Un.muted} text-sm`,children:[Y.jsx(d2,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),Y.jsx("p",{children:"No highlights yet."}),Y.jsx("p",{className:"mt-1 text-xs",children:"Select text on the document to create your first highlight."})]})})]})}const kb=[{colorKey:"yellow",color:"#FBBF24",shortcut:"1"},{colorKey:"green",color:"#34D399",shortcut:"2"},{colorKey:"blue",color:"#60A5FA",shortcut:"3"},{colorKey:"pink",color:"#F472B6",shortcut:"4"},{colorKey:"orange",color:"#FB923C",shortcut:"5"}];function UD(r,t){return r?.length?[...r].sort((n,i)=>(n.sort_order??0)-(i.sort_order??0)).map((n,i)=>({colorKey:n.key,color:n.hex,shortcut:String(i+1)})):t?.length>0?t.map(e=>kb.find(n=>n.colorKey===e)).filter(Boolean):kb}function zD({position:r,onSelect:t,onClose:e,colorLabels:n,documentColorKeys:i,presetColors:s=[]}){const l=Lt.useRef(null),o=Lt.useRef(null),[c,h]=Lt.useState(null),[f,p]=Lt.useState(""),[y,m]=Lt.useState(!1),[w,b]=Lt.useState(!1),_=Lt.useMemo(()=>UD(s,i),[s,i]),v=_.length>0?_:kb,A=Lt.useCallback(q=>Cc(q,n,s),[n,s]);Lt.useEffect(()=>{y&&o.current&&o.current.focus()},[y]);const C=Lt.useCallback(q=>{h(q.colorKey),y||(t(q.colorKey,""),b(!0),setTimeout(()=>e(),400))},[y,t,e]),S=Lt.useCallback(()=>{c&&(t(c,f.trim()||void 0),b(!0),setTimeout(()=>e(),400))},[c,f,t,e]);if(Lt.useEffect(()=>{const q=H=>{if(H.key==="Escape"){e();return}if(!y){const Q=parseInt(H.key,10);if(Q>=1&&Q<=v.length){const I=v[Q-1];I&&C(I)}}y&&H.key==="Enter"&&(H.metaKey||H.ctrlKey)&&(H.preventDefault(),S())};return window.addEventListener("keydown",q),()=>window.removeEventListener("keydown",q)},[y,c,f,e,C,S,v]),Lt.useEffect(()=>{const q=H=>{l.current&&!l.current.contains(H.target)&&e()};return document.addEventListener("mousedown",q),()=>document.removeEventListener("mousedown",q)},[e]),Lt.useEffect(()=>{p(""),h(null),m(!1),b(!1)},[r]),!r)return null;const O=c?v.find(q=>q.colorKey===c):null;return Y.jsx("div",{ref:l,className:"fixed z-1000",style:{left:r.x,top:r.y-48,transform:"translateX(-50%)",animation:"pickerIn 0.15s cubic-bezier(0.16, 1, 0.3, 1)"},children:w?Y.jsxs("div",{className:"flex items-center gap-2 rounded-[10px] px-3.5 py-2 bg-white border border-slate-200 shadow-md",children:[Y.jsx("div",{className:"flex h-[18px] w-[18px] items-center justify-center rounded-full",style:{background:O?.color??"#64748b"},children:Y.jsx("svg",{width:"10",height:"10",viewBox:"0 0 12 12",fill:"none",children:Y.jsx("path",{d:"M2 6L5 9L10 3",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),Y.jsx("span",{className:"text-[13px] font-medium text-slate-800",children:"Saved"})]}):Y.jsxs("div",{className:"overflow-hidden rounded-xl bg-white border border-slate-200 shadow-lg",style:{width:y?280:"auto",transition:"width 0.2s cubic-bezier(0.16, 1, 0.3, 1)"},children:[Y.jsxs("div",{className:"flex items-center gap-0.5 p-1.5",children:[v.map((q,H)=>Y.jsx("button",{type:"button",onClick:()=>C(q),className:"flex h-7 w-7 shrink-0 items-center justify-center rounded-lg border-0 transition-colors duration-150 hover:bg-slate-100",style:{background:c===q.colorKey?`${q.color}25`:"transparent"},children:Y.jsx("div",{className:"h-4 w-4 rounded-full transition-[box-shadow,transform] duration-150",style:{background:q.color,boxShadow:c===q.colorKey?`0 0 0 2px ${q.color}80`:"none",transform:c===q.colorKey?"scale(1.15)":"scale(1)"}})},q.colorKey)),Y.jsx("div",{className:"mx-0.5 h-4 w-px bg-slate-200"}),Y.jsx("button",{type:"button",onClick:()=>m(!y),title:"Add note",className:`flex h-7 w-7 shrink-0 items-center justify-center rounded-lg border-0 transition-colors duration-150 ${y?"bg-slate-100":"hover:bg-slate-100"}`,children:Y.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",children:[Y.jsx("path",{d:"M13 2.5H3C2.72386 2.5 2.5 2.72386 2.5 3V13C2.5 13.2761 2.72386 13.5 3 13.5H10L13.5 10V3C13.5 2.72386 13.2761 2.5 13 2.5Z",stroke:y?"#475569":"#64748b",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),Y.jsx("path",{d:"M5.5 6H10.5",stroke:y?"#475569":"#64748b",strokeWidth:"1.2",strokeLinecap:"round"}),Y.jsx("path",{d:"M5.5 8.5H8.5",stroke:y?"#475569":"#64748b",strokeWidth:"1.2",strokeLinecap:"round"}),Y.jsx("path",{d:"M10 13.5V10H13.5",stroke:y?"#475569":"#64748b",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),Y.jsx("button",{type:"button",onClick:e,className:"flex h-7 w-7 shrink-0 items-center justify-center rounded-lg border-0 bg-transparent text-slate-500 hover:bg-slate-100 hover:text-slate-700 transition-colors duration-150",children:Y.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:Y.jsx("path",{d:"M9 3L3 9M3 3L9 9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})})]}),y&&Y.jsxs("div",{className:"px-2 pb-2 border-t border-slate-100 pt-2",style:{animation:"expandIn 0.15s cubic-bezier(0.16, 1, 0.3, 1)"},children:[!O&&Y.jsx("div",{className:"px-1.5 pb-2 pt-1 text-[11px] text-slate-500",children:"Pick a category above, then add your note"}),O&&Y.jsxs("div",{className:"flex items-center gap-1.5 px-1.5 pb-2 pt-0.5",children:[Y.jsx("div",{className:"h-2 w-2 rounded-full shrink-0",style:{background:O.color}}),Y.jsx("span",{className:"text-[11px] font-medium text-slate-600",children:A(O.colorKey)})]}),Y.jsx("textarea",{ref:o,value:f,onChange:q=>p(q.target.value),placeholder:"Add a note...",rows:2,className:"w-full resize-none rounded-lg border border-slate-200 bg-slate-50 px-2.5 py-2 text-[13px] leading-relaxed text-slate-800 placeholder:text-slate-400 outline-none focus:border-slate-300 focus:ring-1 focus:ring-slate-200"}),Y.jsx("div",{className:"mt-1.5 flex items-center justify-end",children:Y.jsx("button",{type:"button",onClick:S,disabled:!O,className:"rounded-lg border-0 px-3 py-1.5 text-xs font-medium bg-slate-800 text-white hover:bg-slate-700 disabled:opacity-50 disabled:cursor-default transition-colors",children:"Save"})})]})]})})}const qD=["#FBBF24","#34D399","#60A5FA","#F472B6","#FB923C","#f59e0b","#3b82f6","#10b981","#ef4444","#8b5cf6","#ec4899","#06b6d4","#f97316","#84cc16","#14b8a6"],U_=10;function HD({preset:r,documentId:t,onClose:e}){const n=Lc(),i=r?.colors??[],s=!r||r.is_system,[l,o]=Lt.useState(null),[c,h]=Lt.useState(""),f=()=>{n.invalidateQueries({queryKey:["presets"]}),n.invalidateQueries({queryKey:["document",t]})},p=ka({mutationFn:A=>pl.addColor(r.id,A),onSuccess:()=>{f(),o(null),h("")}}),y=ka({mutationFn:A=>pl.removeColor(r.id,A),onSuccess:f}),m=ka({mutationFn:({colorId:A,data:C})=>pl.updateColor(r.id,A,C),onSuccess:f}),w=new Set(i.map(A=>A.hex.toLowerCase())),b=qD.filter(A=>!w.has(A.toLowerCase())),_=()=>{!l||!c.trim()||p.mutate({key:`custom_${Date.now()}`,display_name:c.trim(),hex:l})},v=Y.jsx("div",{className:"fixed inset-0 z-9999 flex items-center justify-center bg-black/40",onClick:e,children:Y.jsxs("div",{role:"dialog","aria-modal":"true",className:`relative z-10 ${ih.surface} rounded-xl shadow-xl border ${Ac.default} w-full max-w-md mx-4 overflow-hidden max-h-[90vh] flex flex-col`,onClick:A=>A.stopPropagation(),onMouseDown:A=>A.stopPropagation(),children:[Y.jsxs("div",{className:"px-5 pt-5 pb-3 border-b border-slate-100 shrink-0",children:[Y.jsx("h3",{className:`text-base font-semibold ${Un.heading}`,children:"Edit preset"}),r&&Y.jsx("p",{className:`text-xs ${Un.muted} mt-0.5`,children:r.name})]}),Y.jsx("div",{className:"px-5 py-4 space-y-4 overflow-auto flex-1 min-h-0",children:s?Y.jsx("p",{className:`text-sm ${Un.secondary}`,children:"System presets cannot be edited. Create a custom preset from Settings to customise colours."}):Y.jsxs(Y.Fragment,{children:[Y.jsxs("div",{children:[Y.jsxs("p",{className:`text-xs ${Un.muted} mb-2.5 uppercase tracking-wider font-medium`,children:["Colours (",i.length,"/",U_,")"]}),Y.jsx("div",{className:"space-y-2",children:i.map(A=>Y.jsxs("div",{className:"flex items-center gap-2.5",children:[Y.jsx("div",{className:"w-7 h-7 rounded-full shrink-0 border-2 border-slate-200",style:{backgroundColor:A.hex}}),Y.jsx("input",{type:"text",defaultValue:A.display_name,placeholder:"Label",onBlur:C=>{const S=C.target.value.trim();S&&S!==A.display_name&&m.mutate({colorId:A.id,data:{display_name:S}})},className:`flex-1 min-w-0 rounded-lg border ${Ac.default} px-2.5 py-1.5 text-sm ${Un.body} placeholder:text-slate-400 outline-none focus:ring-2 focus:ring-slate-200`}),i.length>1&&Y.jsx("button",{type:"button",onClick:()=>y.mutate(A.id),className:"shrink-0 p-1.5 rounded-lg text-slate-400 hover:text-red-600 hover:bg-red-50 transition-colors",disabled:y.isPending,children:Y.jsx(Rf,{className:"w-3.5 h-3.5",strokeWidth:2.5})})]},A.id))})]}),i.length<U_&&b.length>0&&Y.jsx("div",{className:"pt-3 border-t border-slate-100",children:l?Y.jsxs("div",{className:"space-y-2.5",children:[Y.jsxs("div",{className:"flex items-center gap-2.5",children:[Y.jsx("div",{className:"w-7 h-7 rounded-full shrink-0 border-2 border-slate-300",style:{backgroundColor:l}}),Y.jsx("input",{type:"text",value:c,onChange:A=>h(A.target.value),placeholder:"Label, e.g. Key Metrics",autoFocus:!0,onKeyDown:A=>{A.key==="Enter"&&_()},className:`flex-1 min-w-0 rounded-lg border ${Ac.default} px-2.5 py-1.5 text-sm ${Un.body} placeholder:text-slate-400 outline-none focus:ring-2 focus:ring-slate-200`})]}),Y.jsxs("div",{className:"flex justify-end gap-2",children:[Y.jsx("button",{type:"button",onClick:()=>{o(null),h("")},className:"px-3 py-1.5 text-xs text-slate-500 hover:bg-slate-100 rounded-lg",children:"Cancel"}),Y.jsx("button",{type:"button",onClick:_,disabled:!c.trim()||p.isPending,className:"px-3 py-1.5 text-xs font-medium rounded-lg bg-slate-800 text-white hover:bg-slate-700 disabled:opacity-50",children:p.isPending?"Adding":"Add"})]})]}):Y.jsxs(Y.Fragment,{children:[Y.jsx("p",{className:`text-xs ${Un.muted} mb-2`,children:"Add a colour"}),Y.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(A=>Y.jsx("button",{type:"button",onClick:()=>{o(A),h("")},className:"w-7 h-7 rounded-full border-2 border-transparent hover:border-slate-400 transition-all hover:scale-110",style:{backgroundColor:A}},A))})]})})]})}),Y.jsx("div",{className:"px-5 py-3 border-t border-slate-100 flex justify-end shrink-0",children:Y.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100 rounded-lg",children:"Done"})})]})});return typeof document>"u"||!document.body?v:pk.createPortal(v,document.body)}function GD({position:r,initialValue:t="",onSave:e,onClose:n}){const[i,s]=Lt.useState(t),l=Lt.useRef(null),o=Lt.useRef(null);return Lt.useEffect(()=>{s(t)},[t,r]),Lt.useEffect(()=>{o.current?.focus()},[r]),Lt.useEffect(()=>{const c=h=>{h.key==="Escape"&&n(),h.key==="Enter"&&(h.metaKey||h.ctrlKey)&&(h.preventDefault(),e(i.trim()))};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[i,e,n]),Lt.useEffect(()=>{const c=h=>{l.current&&!l.current.contains(h.target)&&n()};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[n]),r?Y.jsxs("div",{ref:l,className:"fixed z-[1001] w-64 rounded-xl border border-slate-200 bg-white p-3 shadow-lg",style:{left:r.x,top:r.y+6,transform:"translateX(-50%)",animation:"pickerIn 0.15s cubic-bezier(0.16, 1, 0.3, 1)"},children:[Y.jsx("textarea",{ref:o,value:i,onChange:c=>s(c.target.value),placeholder:"Add a note...",rows:3,className:"w-full resize-none rounded-lg border border-slate-200 bg-slate-50 px-2.5 py-2 text-[13px] leading-relaxed text-slate-800 placeholder:text-slate-400 outline-none focus:border-slate-300 focus:ring-1 focus:ring-slate-200 mb-2"}),Y.jsxs("div",{className:"flex items-center justify-end gap-2",children:[Y.jsx("button",{type:"button",onClick:n,className:"rounded-lg px-2.5 py-1.5 text-xs font-medium text-slate-600 hover:bg-slate-100 transition-colors",children:"Cancel"}),Y.jsx("button",{type:"button",onClick:()=>e(i.trim()),className:"rounded-lg px-3 py-1.5 text-xs font-medium bg-slate-800 text-white hover:bg-slate-700 transition-colors",children:"Save"})]})]}):null}function VD(){const{id:r}=Zb(),t=Wu(),e=Lc(),[n,i]=Lt.useState(null),[s,l]=Lt.useState(!1),[o,c]=Lt.useState(!0),[h,f]=Lt.useState(1.3),[p,y]=Lt.useState(!0),[m,w]=Lt.useState(null),[b,_]=Lt.useState(null),[v,A]=Lt.useState(null),[C,S]=Lt.useState(null),[O,q]=Lt.useState(null),[H,Q]=Lt.useState(0),[I,dt]=Lt.useState(1),[nt,B]=Lt.useState(!1),[Z,D]=Lt.useState(null),[mt,it]=Lt.useState(null),[st,vt]=Lt.useState(null),{data:wt,isLoading:Ft,isError:$}=Go({queryKey:["document",r],queryFn:async()=>{const{data:k}=await Ds.get(r);return k},enabled:!!r});Lt.useEffect(()=>{if(!wt||!r)return;let k=!1;return(async()=>{c(!0);try{const _t=await OL(wt);k||(_t?i(_t.data):l(!0))}finally{k||c(!1)}})(),()=>{k=!0}},[wt,r]);const{data:R=[]}=Go({queryKey:["highlights",r],queryFn:async()=>{const{data:k}=await Ds.highlights(r);return k},enabled:!!r}),{data:K=[]}=Go({queryKey:["presets"],queryFn:async()=>{const{data:k}=await pl.list();return k}}),rt=Lt.useMemo(()=>K.length?wt?.highlight_preset!=null?K.find(k=>k.id===wt.highlight_preset)??null:K.find(k=>k.is_system)??K[0]??null:null,[K,wt?.highlight_preset]),pt=Lt.useMemo(()=>rt?.colors??wt?.highlight_preset_detail?.colors??[],[rt?.colors,wt?.highlight_preset_detail?.colors]),ct=Lt.useMemo(()=>{if(pt?.length)return pt.map(z=>z.key);const k=Object.keys(wt?.color_labels||{});return k.length>0?k:[...y2]},[pt,wt?.color_labels]),F=ka({mutationFn:({documentId:k,payload:z})=>Ds.update(k,z),onSuccess:(k,{documentId:z})=>{e.invalidateQueries({queryKey:["document",z]})}}),j=Lt.useCallback(async k=>{if(r)try{await Ds.createHighlight(r,k),e.invalidateQueries({queryKey:["highlights",r]}),A(null),S(null),q(null)}catch(z){console.error("Failed to save highlight",z)}},[r,e]),ht=Lt.useCallback(k=>{A({page_number:k.pageNumber,position_data:k.position_data,highlighted_text:k.highlighted_text}),S(k.pickerPosition),q({pageNumber:k.pageNumber,spanStart:k.spanStart,spanEnd:k.spanEnd})},[]),ot=Lt.useCallback((k,z)=>{v&&j({...v,color:k,comment:z})},[v,j]),lt=Lt.useCallback(()=>{A(null),S(null),q(null)},[]),ft=Lt.useCallback(k=>{dt(k),window.document.getElementById("pdf-scroll-container")?.querySelector(`[data-page="${k}"]`)?.scrollIntoView({behavior:"smooth",block:"start"})},[]),Mt=Lt.useCallback(k=>{_(z=>z!=null&&String(z)===String(k)?null:k)},[]),W=Lt.useCallback(k=>Q(k??0),[]),tt=Lt.useCallback(()=>{if(I<=1)return;const k=I-1;dt(k),ft(k)},[I,ft]),X=Lt.useCallback(()=>{if(I>=H)return;const k=I+1;dt(k),ft(k)},[I,H,ft]),P=async k=>{const z=k.target.files?.[0];if(!z||!wt||!r)return;const _t=await z.arrayBuffer(),kt=await l4(_t);if(kt!==wt.pdf_hash){alert("This file does not match the original document.");return}try{const Ct=new FormData;Ct.append("file",new Blob([_t],{type:"application/pdf"}),z.name||wt.filename||"document.pdf"),await Ds.uploadPdf(r,Ct)}catch(Ct){const $t=Ct.response?.data?.detail??Ct.message??"Upload failed";alert(typeof $t=="string"?$t:JSON.stringify($t));return}await g2(kt,wt.filename||z.name,z.size,_t),i(_t),l(!1)};return r?Ft||o?Y.jsx("div",{className:`${Wd} flex items-center justify-center min-h-[50vh]`,children:Y.jsx(su,{className:`w-8 h-8 ${Un.muted} animate-spin`})}):$||!wt&&!Ft?Y.jsxs("div",{className:`${Wd} flex flex-col items-center justify-center min-h-[50vh]`,children:[Y.jsx("h2",{className:`text-lg font-semibold ${Un.heading} mb-2`,children:"Document not found"}),Y.jsx("p",{className:`text-sm ${Un.secondary} mb-4`,children:"It may have been deleted or you dont have access to it."}),Y.jsx("button",{type:"button",onClick:()=>t(wt?.project?`/project/${wt.project}`:"/"),className:pg,children:"Back to project"})]}):s?Y.jsxs("div",{className:`${Wd} flex flex-col items-center justify-center`,children:[Y.jsx(db,{className:`w-12 h-12 ${Un.muted} mb-4`}),Y.jsx("h2",{className:`text-lg font-semibold ${Un.heading} mb-2`,children:"PDF needed on this device"}),Y.jsxs("p",{className:`text-sm ${Un.secondary} mb-4 text-center max-w-sm`,children:["Upload the same file to open ",Y.jsx("strong",{children:wt?.filename}),"."]}),Y.jsxs("label",{className:`${pg} inline-flex items-center gap-2`,children:[Y.jsx(db,{className:"w-4 h-4"})," Upload PDF",Y.jsx("input",{type:"file",accept:".pdf",onChange:P,className:"hidden"})]}),Y.jsx("button",{type:"button",onClick:()=>t(wt?.project?`/project/${wt.project}`:"/"),className:`mt-4 text-sm ${Un.muted} hover:underline`,children:"Back to project"})]}):Y.jsxs("div",{className:`h-screen flex flex-col ${ih.page} overflow-hidden`,children:[Y.jsxs("header",{className:`${PR} px-4 py-2.5 flex items-center justify-between shrink-0`,children:[Y.jsxs("div",{className:"flex items-center gap-3",children:[Y.jsx("button",{type:"button",onClick:()=>t(wt?.project?`/project/${wt.project}`:"/"),className:ym,title:"Back to project",children:Y.jsx(Mg,{className:"w-4 h-4"})}),Y.jsx("p",{className:`text-sm font-medium ${Un.heading} truncate max-w-xs`,children:wt?.filename})]}),Y.jsxs("div",{className:"flex items-center gap-2",children:[K.length>0&&Y.jsx("select",{value:wt?.highlight_preset!=null?String(wt.highlight_preset):K.find(k=>k.is_system)?.id??"",onChange:k=>{const z=k.target.value,_t=z===""?null:Number(z);r&&(R.length>0?vt(_t):F.mutate({documentId:r,payload:{highlight_preset:_t}}))},className:`text-xs rounded-lg border ${Ac.default} ${ih.surface} py-1.5 pl-2 pr-7 ${Un.body} cursor-pointer max-w-44`,title:"Highlight colour preset",children:K.map(k=>Y.jsx("option",{value:k.id,children:k.name},k.id))}),Y.jsx("button",{type:"button",onClick:()=>B(!0),className:ym,title:"Edit preset",children:Y.jsx(gL,{className:"w-4 h-4"})}),Y.jsx("button",{type:"button",onClick:()=>t(`/document/${r}/summary`),className:ym,title:"Summary",children:Y.jsx(nL,{className:"w-4 h-4"})}),Y.jsx("div",{className:a_}),Y.jsxs("div",{className:`flex items-center gap-1 ${ih.muted} rounded-lg px-1 py-0.5`,children:[Y.jsx("button",{type:"button",onClick:()=>f(k=>Math.max(.5,k-.1)),className:`p-1.5 ${Un.secondary} hover:text-slate-700 rounded cursor-pointer`,children:Y.jsx(AL,{className:"w-3.5 h-3.5"})}),Y.jsxs("span",{className:`text-xs ${Un.secondary} w-12 text-center`,children:[Math.round(h*100),"%"]}),Y.jsx("button",{type:"button",onClick:()=>f(k=>Math.min(3,k+.1)),className:`p-1.5 ${Un.secondary} hover:text-slate-700 rounded cursor-pointer`,children:Y.jsx(xL,{className:"w-3.5 h-3.5"})})]}),Y.jsx("div",{className:a_}),Y.jsx("button",{type:"button",onClick:()=>y(k=>!k),className:ym,title:p?"Close annotations":"Open annotations",children:p?Y.jsx(uL,{className:"w-4 h-4"}):Y.jsx(hL,{className:"w-4 h-4"})})]})]}),Y.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[Y.jsxs("div",{className:"flex-1 overflow-auto flex flex-col relative pb-14",id:"pdf-scroll-container",children:[n&&Y.jsx(BD,{pdfData:n,scale:h,highlights:R,hoveredHighlightId:m,activeHighlightId:b,selectionForPicker:O,presetColors:pt,onSelectionComplete:ht,onNumPages:W,onHighlightHover:w,onHighlightHoverEnd:()=>w(null),onHighlightEdit:(k,z)=>{const _t=z?.target?.getBoundingClientRect?.();_t?it({highlightId:k,x:_t.left+_t.width/2,y:_t.bottom}):(D(k),y(!0))},onHighlightDelete:async k=>{r&&(await Ds.deleteHighlight(r,k),e.invalidateQueries({queryKey:["highlights",r]}),String(b)===String(k)&&_(null),String(m)===String(k)&&w(null))}}),C&&Y.jsx(zD,{position:C,onSelect:ot,onClose:lt,colorLabels:wt?.color_labels,documentColorKeys:ct,presetColors:pt}),mt&&Y.jsx(GD,{position:{x:mt.x,y:mt.y},initialValue:(R||[]).find(k=>String(k.id)===String(mt.highlightId))?.note?.content??"",onSave:async k=>{r&&(await Ds.updateHighlight(r,mt.highlightId,{note:k}),e.invalidateQueries({queryKey:["highlights",r]}),it(null))},onClose:()=>it(null)}),nt&&Y.jsx(HD,{preset:rt,documentId:r,onClose:()=>B(!1)}),st!==null&&Y.jsx("div",{className:"fixed inset-0 z-9999 flex items-center justify-center bg-black/40",onClick:()=>vt(null),children:Y.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-slate-200 w-full max-w-sm mx-4 p-5",onClick:k=>k.stopPropagation(),children:[Y.jsx("h3",{className:"text-base font-semibold text-slate-800 mb-2",children:"Switch preset?"}),Y.jsxs("p",{className:"text-sm text-slate-600 mb-5",children:["This document has ",Y.jsx("strong",{children:R.length})," highlight",R.length!==1?"s":"",". Switching presets will ",Y.jsx("strong",{children:"delete all existing highlights"})," because the colour categories will change."]}),Y.jsxs("div",{className:"flex justify-end gap-2",children:[Y.jsx("button",{type:"button",onClick:()=>vt(null),className:"px-4 py-2 text-sm text-slate-600 hover:bg-slate-100 rounded-lg",children:"Cancel"}),Y.jsx("button",{type:"button",onClick:async()=>{const k=st;vt(null);for(const z of R)await Ds.deleteHighlight(r,z.id);e.invalidateQueries({queryKey:["highlights",r]}),_(null),w(null),F.mutate({documentId:r,payload:{highlight_preset:k}})},className:"px-4 py-2 text-sm font-medium rounded-lg bg-red-600 text-white hover:bg-red-700",children:"Delete highlights & switch"})]})]})})]}),p&&Y.jsx(jD,{highlights:R,colorLabels:wt?.color_labels,presetColors:pt,documentColorKeys:ct,activeHighlightId:b,onScrollToPage:ft,onHighlightClick:Mt,onHighlightHover:w,onHighlightHoverEnd:()=>w(null),onClearActive:()=>_(null),documentId:r,openEditForHighlightId:Z,onClearOpenEditForHighlightId:()=>D(null),onHighlightNoteUpdate:async(k,z)=>{r&&(await Ds.updateHighlight(r,k,{note:z}),e.invalidateQueries({queryKey:["highlights",r]}))},onHighlightDelete:async k=>{r&&(await Ds.deleteHighlight(r,k),e.invalidateQueries({queryKey:["highlights",r]}),String(b)===String(k)&&_(null),String(m)===String(k)&&w(null))}})]}),H>0&&Y.jsxs("div",{className:`fixed bottom-0 left-0 z-10 flex items-center justify-center gap-2 border-t border-slate-200 bg-white py-2.5 shadow-[0_-2px_8px_rgba(0,0,0,0.06)] ${p?"right-80":"right-0"}`,children:[Y.jsx("button",{type:"button",onClick:tt,disabled:I<=1,className:"flex h-8 w-8 items-center justify-center rounded-md border border-slate-200 bg-white text-slate-600 disabled:opacity-30 disabled:cursor-default cursor-pointer hover:bg-slate-50 text-sm",children:""}),Y.jsxs("span",{className:"min-w-[80px] text-center text-xs text-slate-500",children:["Page ",I," of ",H]}),Y.jsx("button",{type:"button",onClick:X,disabled:I>=H,className:"flex h-8 w-8 items-center justify-center rounded-md border border-slate-200 bg-white text-slate-600 disabled:opacity-30 disabled:cursor-default cursor-pointer hover:bg-slate-50 text-sm",children:""})]})]}):(t("/",{replace:!0}),null)}var WD=Object.defineProperty,KD=Object.defineProperties,$D=Object.getOwnPropertyDescriptors,z_=Object.getOwnPropertySymbols,XD=Object.prototype.hasOwnProperty,YD=Object.prototype.propertyIsEnumerable,Rb=(r,t,e)=>t in r?WD(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,cr=(r,t)=>{for(var e in t||(t={}))XD.call(t,e)&&Rb(r,e,t[e]);if(z_)for(var e of z_(t))YD.call(t,e)&&Rb(r,e,t[e]);return r},Df=(r,t)=>KD(r,$D(t)),_e=(r,t,e)=>Rb(r,typeof t!="symbol"?t+"":t,e),QD=(r,t,e)=>new Promise((n,i)=>{var s=c=>{try{o(e.next(c))}catch(h){i(h)}},l=c=>{try{o(e.throw(c))}catch(h){i(h)}},o=c=>c.done?n(c.value):Promise.resolve(c.value).then(s,l);o((e=e.apply(r,t)).next())});class xg{constructor(t){_e(this,"rootKey"),this.rootKey=t}}const ZD=Object.seal({});class Re extends xg{constructor(t){super(t),_e(this,"root"),this.root=new Array}prepForXml(t){var e;t.stack.push(this);const n=this.root.map(i=>i instanceof xg?i.prepForXml(t):i).filter(i=>i!==void 0);return t.stack.pop(),{[this.rootKey]:n.length?n.length===1&&((e=n[0])!=null&&e._attr)?n[0]:n:ZD}}addChildElement(t){return this.root.push(t),this}}class $g extends Re{prepForXml(t){const e=super.prepForXml(t);if(e&&(typeof e[this.rootKey]!="object"||Object.keys(e[this.rootKey]).length))return e}}class Cn extends xg{constructor(t){super("_attr"),_e(this,"xmlKeys"),this.root=t}prepForXml(t){const e={};return Object.entries(this.root).forEach(([n,i])=>{if(i!==void 0){const s=this.xmlKeys&&this.xmlKeys[n]||n;e[s]=i}}),{_attr:e}}}class Xg extends xg{constructor(t){super("_attr"),this.root=t}prepForXml(t){return{_attr:Object.values(this.root).filter(({value:n})=>n!==void 0).reduce((n,{key:i,value:s})=>Df(cr({},n),{[i]:s}),{})}}}class Wi extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{val:"w:val",color:"w:color",fill:"w:fill",space:"w:space",sz:"w:sz",type:"w:type",rsidR:"w:rsidR",rsidRPr:"w:rsidRPr",rsidSect:"w:rsidSect",w:"w:w",h:"w:h",top:"w:top",right:"w:right",bottom:"w:bottom",left:"w:left",header:"w:header",footer:"w:footer",gutter:"w:gutter",linePitch:"w:linePitch",pos:"w:pos"})}}var au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function W4(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var U1={},Tm={exports:{}},q_;function D2(){if(q_)return Tm.exports;q_=1;var r=typeof Reflect=="object"?Reflect:null,t=r&&typeof r.apply=="function"?r.apply:function(O,q,H){return Function.prototype.apply.call(O,q,H)},e;r&&typeof r.ownKeys=="function"?e=r.ownKeys:Object.getOwnPropertySymbols?e=function(O){return Object.getOwnPropertyNames(O).concat(Object.getOwnPropertySymbols(O))}:e=function(O){return Object.getOwnPropertyNames(O)};function n(S){console&&console.warn&&console.warn(S)}var i=Number.isNaN||function(O){return O!==O};function s(){s.init.call(this)}Tm.exports=s,Tm.exports.once=v,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function o(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(S){if(typeof S!="number"||S<0||i(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");l=S}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(O){if(typeof O!="number"||O<0||i(O))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+O+".");return this._maxListeners=O,this};function c(S){return S._maxListeners===void 0?s.defaultMaxListeners:S._maxListeners}s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(O){for(var q=[],H=1;H<arguments.length;H++)q.push(arguments[H]);var Q=O==="error",I=this._events;if(I!==void 0)Q=Q&&I.error===void 0;else if(!Q)return!1;if(Q){var dt;if(q.length>0&&(dt=q[0]),dt instanceof Error)throw dt;var nt=new Error("Unhandled error."+(dt?" ("+dt.message+")":""));throw nt.context=dt,nt}var B=I[O];if(B===void 0)return!1;if(typeof B=="function")t(B,this,q);else for(var Z=B.length,D=w(B,Z),H=0;H<Z;++H)t(D[H],this,q);return!0};function h(S,O,q,H){var Q,I,dt;if(o(q),I=S._events,I===void 0?(I=S._events=Object.create(null),S._eventsCount=0):(I.newListener!==void 0&&(S.emit("newListener",O,q.listener?q.listener:q),I=S._events),dt=I[O]),dt===void 0)dt=I[O]=q,++S._eventsCount;else if(typeof dt=="function"?dt=I[O]=H?[q,dt]:[dt,q]:H?dt.unshift(q):dt.push(q),Q=c(S),Q>0&&dt.length>Q&&!dt.warned){dt.warned=!0;var nt=new Error("Possible EventEmitter memory leak detected. "+dt.length+" "+String(O)+" listeners added. Use emitter.setMaxListeners() to increase limit");nt.name="MaxListenersExceededWarning",nt.emitter=S,nt.type=O,nt.count=dt.length,n(nt)}return S}s.prototype.addListener=function(O,q){return h(this,O,q,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(O,q){return h(this,O,q,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(S,O,q){var H={fired:!1,wrapFn:void 0,target:S,type:O,listener:q},Q=f.bind(H);return Q.listener=q,H.wrapFn=Q,Q}s.prototype.once=function(O,q){return o(q),this.on(O,p(this,O,q)),this},s.prototype.prependOnceListener=function(O,q){return o(q),this.prependListener(O,p(this,O,q)),this},s.prototype.removeListener=function(O,q){var H,Q,I,dt,nt;if(o(q),Q=this._events,Q===void 0)return this;if(H=Q[O],H===void 0)return this;if(H===q||H.listener===q)--this._eventsCount===0?this._events=Object.create(null):(delete Q[O],Q.removeListener&&this.emit("removeListener",O,H.listener||q));else if(typeof H!="function"){for(I=-1,dt=H.length-1;dt>=0;dt--)if(H[dt]===q||H[dt].listener===q){nt=H[dt].listener,I=dt;break}if(I<0)return this;I===0?H.shift():b(H,I),H.length===1&&(Q[O]=H[0]),Q.removeListener!==void 0&&this.emit("removeListener",O,nt||q)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(O){var q,H,Q;if(H=this._events,H===void 0)return this;if(H.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):H[O]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete H[O]),this;if(arguments.length===0){var I=Object.keys(H),dt;for(Q=0;Q<I.length;++Q)dt=I[Q],dt!=="removeListener"&&this.removeAllListeners(dt);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(q=H[O],typeof q=="function")this.removeListener(O,q);else if(q!==void 0)for(Q=q.length-1;Q>=0;Q--)this.removeListener(O,q[Q]);return this};function y(S,O,q){var H=S._events;if(H===void 0)return[];var Q=H[O];return Q===void 0?[]:typeof Q=="function"?q?[Q.listener||Q]:[Q]:q?_(Q):w(Q,Q.length)}s.prototype.listeners=function(O){return y(this,O,!0)},s.prototype.rawListeners=function(O){return y(this,O,!1)},s.listenerCount=function(S,O){return typeof S.listenerCount=="function"?S.listenerCount(O):m.call(S,O)},s.prototype.listenerCount=m;function m(S){var O=this._events;if(O!==void 0){var q=O[S];if(typeof q=="function")return 1;if(q!==void 0)return q.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]};function w(S,O){for(var q=new Array(O),H=0;H<O;++H)q[H]=S[H];return q}function b(S,O){for(;O+1<S.length;O++)S[O]=S[O+1];S.pop()}function _(S){for(var O=new Array(S.length),q=0;q<O.length;++q)O[q]=S[q].listener||S[q];return O}function v(S,O){return new Promise(function(q,H){function Q(dt){S.removeListener(O,I),H(dt)}function I(){typeof S.removeListener=="function"&&S.removeListener("error",Q),q([].slice.call(arguments))}C(S,O,I,{once:!0}),O!=="error"&&A(S,Q,{once:!0})})}function A(S,O,q){typeof S.on=="function"&&C(S,"error",O,q)}function C(S,O,q,H){if(typeof S.on=="function")H.once?S.once(O,q):S.on(O,q);else if(typeof S.addEventListener=="function")S.addEventListener(O,function Q(I){H.once&&S.removeEventListener(O,Q),q(I)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}return Tm.exports}var Nm={exports:{}},H_;function Oc(){return H_||(H_=1,typeof Object.create=="function"?Nm.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Nm.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}),Nm.exports}function JD(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var K4={exports:{}},Ki=K4.exports={},ru,iu;function Lb(){throw new Error("setTimeout has not been defined")}function Ob(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?ru=setTimeout:ru=Lb}catch{ru=Lb}try{typeof clearTimeout=="function"?iu=clearTimeout:iu=Ob}catch{iu=Ob}})();function $4(r){if(ru===setTimeout)return setTimeout(r,0);if((ru===Lb||!ru)&&setTimeout)return ru=setTimeout,setTimeout(r,0);try{return ru(r,0)}catch{try{return ru.call(null,r,0)}catch{return ru.call(this,r,0)}}}function tP(r){if(iu===clearTimeout)return clearTimeout(r);if((iu===Ob||!iu)&&clearTimeout)return iu=clearTimeout,clearTimeout(r);try{return iu(r)}catch{try{return iu.call(null,r)}catch{return iu.call(this,r)}}}var qu=[],bf=!1,Zc,eg=-1;function eP(){!bf||!Zc||(bf=!1,Zc.length?qu=Zc.concat(qu):eg=-1,qu.length&&X4())}function X4(){if(!bf){var r=$4(eP);bf=!0;for(var t=qu.length;t;){for(Zc=qu,qu=[];++eg<t;)Zc&&Zc[eg].run();eg=-1,t=qu.length}Zc=null,bf=!1,tP(r)}}Ki.nextTick=function(r){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];qu.push(new Y4(r,t)),qu.length===1&&!bf&&$4(X4)};function Y4(r,t){this.fun=r,this.array=t}Y4.prototype.run=function(){this.fun.apply(null,this.array)};Ki.title="browser";Ki.browser=!0;Ki.env={};Ki.argv=[];Ki.version="";Ki.versions={};function $u(){}Ki.on=$u;Ki.addListener=$u;Ki.once=$u;Ki.off=$u;Ki.removeListener=$u;Ki.removeAllListeners=$u;Ki.emit=$u;Ki.prependListener=$u;Ki.prependOnceListener=$u;Ki.listeners=function(r){return[]};Ki.binding=function(r){throw new Error("process.binding is not supported")};Ki.cwd=function(){return"/"};Ki.chdir=function(r){throw new Error("process.chdir is not supported")};Ki.umask=function(){return 0};var nP=K4.exports;const Hn=JD(nP);var z1,G_;function Q4(){return G_||(G_=1,z1=D2().EventEmitter),z1}var q1={},Dd={},V_;function rP(){if(V_)return Dd;V_=1,Dd.byteLength=o,Dd.toByteArray=h,Dd.fromByteArray=y;for(var r=[],t=[],e=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=n.length;i<s;++i)r[i]=n[i],t[n.charCodeAt(i)]=i;t[45]=62,t[95]=63;function l(m){var w=m.length;if(w%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=m.indexOf("=");b===-1&&(b=w);var _=b===w?0:4-b%4;return[b,_]}function o(m){var w=l(m),b=w[0],_=w[1];return(b+_)*3/4-_}function c(m,w,b){return(w+b)*3/4-b}function h(m){var w,b=l(m),_=b[0],v=b[1],A=new e(c(m,_,v)),C=0,S=v>0?_-4:_,O;for(O=0;O<S;O+=4)w=t[m.charCodeAt(O)]<<18|t[m.charCodeAt(O+1)]<<12|t[m.charCodeAt(O+2)]<<6|t[m.charCodeAt(O+3)],A[C++]=w>>16&255,A[C++]=w>>8&255,A[C++]=w&255;return v===2&&(w=t[m.charCodeAt(O)]<<2|t[m.charCodeAt(O+1)]>>4,A[C++]=w&255),v===1&&(w=t[m.charCodeAt(O)]<<10|t[m.charCodeAt(O+1)]<<4|t[m.charCodeAt(O+2)]>>2,A[C++]=w>>8&255,A[C++]=w&255),A}function f(m){return r[m>>18&63]+r[m>>12&63]+r[m>>6&63]+r[m&63]}function p(m,w,b){for(var _,v=[],A=w;A<b;A+=3)_=(m[A]<<16&16711680)+(m[A+1]<<8&65280)+(m[A+2]&255),v.push(f(_));return v.join("")}function y(m){for(var w,b=m.length,_=b%3,v=[],A=16383,C=0,S=b-_;C<S;C+=A)v.push(p(m,C,C+A>S?S:C+A));return _===1?(w=m[b-1],v.push(r[w>>2]+r[w<<4&63]+"==")):_===2&&(w=(m[b-2]<<8)+m[b-1],v.push(r[w>>10]+r[w>>4&63]+r[w<<2&63]+"=")),v.join("")}return Dd}var km={};var W_;function iP(){return W_||(W_=1,km.read=function(r,t,e,n,i){var s,l,o=i*8-n-1,c=(1<<o)-1,h=c>>1,f=-7,p=e?i-1:0,y=e?-1:1,m=r[t+p];for(p+=y,s=m&(1<<-f)-1,m>>=-f,f+=o;f>0;s=s*256+r[t+p],p+=y,f-=8);for(l=s&(1<<-f)-1,s>>=-f,f+=n;f>0;l=l*256+r[t+p],p+=y,f-=8);if(s===0)s=1-h;else{if(s===c)return l?NaN:(m?-1:1)*(1/0);l=l+Math.pow(2,n),s=s-h}return(m?-1:1)*l*Math.pow(2,s-n)},km.write=function(r,t,e,n,i,s){var l,o,c,h=s*8-i-1,f=(1<<h)-1,p=f>>1,y=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:s-1,w=n?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,l=f):(l=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-l))<1&&(l--,c*=2),l+p>=1?t+=y/c:t+=y*Math.pow(2,1-p),t*c>=2&&(l++,c/=2),l+p>=f?(o=0,l=f):l+p>=1?(o=(t*c-1)*Math.pow(2,i),l=l+p):(o=t*Math.pow(2,p-1)*Math.pow(2,i),l=0));i>=8;r[e+m]=o&255,m+=w,o/=256,i-=8);for(l=l<<i|o,h+=i;h>0;r[e+m]=l&255,m+=w,l/=256,h-=8);r[e+m-w]|=b*128}),km}var K_;function Yg(){return K_||(K_=1,(function(r){var t=rP(),e=iP(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=o,r.SlowBuffer=A,r.INSPECT_MAX_BYTES=50;var i=2147483647;r.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var X=new Uint8Array(1),P={foo:function(){return 42}};return Object.setPrototypeOf(P,Uint8Array.prototype),Object.setPrototypeOf(X,P),X.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function l(X){if(X>i)throw new RangeError('The value "'+X+'" is invalid for option "size"');var P=new Uint8Array(X);return Object.setPrototypeOf(P,o.prototype),P}function o(X,P,k){if(typeof X=="number"){if(typeof P=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(X)}return c(X,P,k)}o.poolSize=8192;function c(X,P,k){if(typeof X=="string")return y(X,P);if(ArrayBuffer.isView(X))return w(X);if(X==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof X);if(Mt(X,ArrayBuffer)||X&&Mt(X.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Mt(X,SharedArrayBuffer)||X&&Mt(X.buffer,SharedArrayBuffer)))return b(X,P,k);if(typeof X=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var z=X.valueOf&&X.valueOf();if(z!=null&&z!==X)return o.from(z,P,k);var _t=_(X);if(_t)return _t;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof X[Symbol.toPrimitive]=="function")return o.from(X[Symbol.toPrimitive]("string"),P,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof X)}o.from=function(X,P,k){return c(X,P,k)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function h(X){if(typeof X!="number")throw new TypeError('"size" argument must be of type number');if(X<0)throw new RangeError('The value "'+X+'" is invalid for option "size"')}function f(X,P,k){return h(X),X<=0?l(X):P!==void 0?typeof k=="string"?l(X).fill(P,k):l(X).fill(P):l(X)}o.alloc=function(X,P,k){return f(X,P,k)};function p(X){return h(X),l(X<0?0:v(X)|0)}o.allocUnsafe=function(X){return p(X)},o.allocUnsafeSlow=function(X){return p(X)};function y(X,P){if((typeof P!="string"||P==="")&&(P="utf8"),!o.isEncoding(P))throw new TypeError("Unknown encoding: "+P);var k=C(X,P)|0,z=l(k),_t=z.write(X,P);return _t!==k&&(z=z.slice(0,_t)),z}function m(X){for(var P=X.length<0?0:v(X.length)|0,k=l(P),z=0;z<P;z+=1)k[z]=X[z]&255;return k}function w(X){if(Mt(X,Uint8Array)){var P=new Uint8Array(X);return b(P.buffer,P.byteOffset,P.byteLength)}return m(X)}function b(X,P,k){if(P<0||X.byteLength<P)throw new RangeError('"offset" is outside of buffer bounds');if(X.byteLength<P+(k||0))throw new RangeError('"length" is outside of buffer bounds');var z;return P===void 0&&k===void 0?z=new Uint8Array(X):k===void 0?z=new Uint8Array(X,P):z=new Uint8Array(X,P,k),Object.setPrototypeOf(z,o.prototype),z}function _(X){if(o.isBuffer(X)){var P=v(X.length)|0,k=l(P);return k.length===0||X.copy(k,0,0,P),k}if(X.length!==void 0)return typeof X.length!="number"||W(X.length)?l(0):m(X);if(X.type==="Buffer"&&Array.isArray(X.data))return m(X.data)}function v(X){if(X>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return X|0}function A(X){return+X!=X&&(X=0),o.alloc(+X)}o.isBuffer=function(P){return P!=null&&P._isBuffer===!0&&P!==o.prototype},o.compare=function(P,k){if(Mt(P,Uint8Array)&&(P=o.from(P,P.offset,P.byteLength)),Mt(k,Uint8Array)&&(k=o.from(k,k.offset,k.byteLength)),!o.isBuffer(P)||!o.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(P===k)return 0;for(var z=P.length,_t=k.length,kt=0,Ct=Math.min(z,_t);kt<Ct;++kt)if(P[kt]!==k[kt]){z=P[kt],_t=k[kt];break}return z<_t?-1:_t<z?1:0},o.isEncoding=function(P){switch(String(P).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(P,k){if(!Array.isArray(P))throw new TypeError('"list" argument must be an Array of Buffers');if(P.length===0)return o.alloc(0);var z;if(k===void 0)for(k=0,z=0;z<P.length;++z)k+=P[z].length;var _t=o.allocUnsafe(k),kt=0;for(z=0;z<P.length;++z){var Ct=P[z];if(Mt(Ct,Uint8Array))kt+Ct.length>_t.length?o.from(Ct).copy(_t,kt):Uint8Array.prototype.set.call(_t,Ct,kt);else if(o.isBuffer(Ct))Ct.copy(_t,kt);else throw new TypeError('"list" argument must be an Array of Buffers');kt+=Ct.length}return _t};function C(X,P){if(o.isBuffer(X))return X.length;if(ArrayBuffer.isView(X)||Mt(X,ArrayBuffer))return X.byteLength;if(typeof X!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof X);var k=X.length,z=arguments.length>2&&arguments[2]===!0;if(!z&&k===0)return 0;for(var _t=!1;;)switch(P){case"ascii":case"latin1":case"binary":return k;case"utf8":case"utf-8":return j(X).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k*2;case"hex":return k>>>1;case"base64":return lt(X).length;default:if(_t)return z?-1:j(X).length;P=(""+P).toLowerCase(),_t=!0}}o.byteLength=C;function S(X,P,k){var z=!1;if((P===void 0||P<0)&&(P=0),P>this.length||((k===void 0||k>this.length)&&(k=this.length),k<=0)||(k>>>=0,P>>>=0,k<=P))return"";for(X||(X="utf8");;)switch(X){case"hex":return wt(this,P,k);case"utf8":case"utf-8":return D(this,P,k);case"ascii":return st(this,P,k);case"latin1":case"binary":return vt(this,P,k);case"base64":return Z(this,P,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ft(this,P,k);default:if(z)throw new TypeError("Unknown encoding: "+X);X=(X+"").toLowerCase(),z=!0}}o.prototype._isBuffer=!0;function O(X,P,k){var z=X[P];X[P]=X[k],X[k]=z}o.prototype.swap16=function(){var P=this.length;if(P%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var k=0;k<P;k+=2)O(this,k,k+1);return this},o.prototype.swap32=function(){var P=this.length;if(P%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var k=0;k<P;k+=4)O(this,k,k+3),O(this,k+1,k+2);return this},o.prototype.swap64=function(){var P=this.length;if(P%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var k=0;k<P;k+=8)O(this,k,k+7),O(this,k+1,k+6),O(this,k+2,k+5),O(this,k+3,k+4);return this},o.prototype.toString=function(){var P=this.length;return P===0?"":arguments.length===0?D(this,0,P):S.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(P){if(!o.isBuffer(P))throw new TypeError("Argument must be a Buffer");return this===P?!0:o.compare(this,P)===0},o.prototype.inspect=function(){var P="",k=r.INSPECT_MAX_BYTES;return P=this.toString("hex",0,k).replace(/(.{2})/g,"$1 ").trim(),this.length>k&&(P+=" ... "),"<Buffer "+P+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(P,k,z,_t,kt){if(Mt(P,Uint8Array)&&(P=o.from(P,P.offset,P.byteLength)),!o.isBuffer(P))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof P);if(k===void 0&&(k=0),z===void 0&&(z=P?P.length:0),_t===void 0&&(_t=0),kt===void 0&&(kt=this.length),k<0||z>P.length||_t<0||kt>this.length)throw new RangeError("out of range index");if(_t>=kt&&k>=z)return 0;if(_t>=kt)return-1;if(k>=z)return 1;if(k>>>=0,z>>>=0,_t>>>=0,kt>>>=0,this===P)return 0;for(var Ct=kt-_t,$t=z-k,le=Math.min(Ct,$t),re=this.slice(_t,kt),fe=P.slice(k,z),Ce=0;Ce<le;++Ce)if(re[Ce]!==fe[Ce]){Ct=re[Ce],$t=fe[Ce];break}return Ct<$t?-1:$t<Ct?1:0};function q(X,P,k,z,_t){if(X.length===0)return-1;if(typeof k=="string"?(z=k,k=0):k>2147483647?k=2147483647:k<-2147483648&&(k=-2147483648),k=+k,W(k)&&(k=_t?0:X.length-1),k<0&&(k=X.length+k),k>=X.length){if(_t)return-1;k=X.length-1}else if(k<0)if(_t)k=0;else return-1;if(typeof P=="string"&&(P=o.from(P,z)),o.isBuffer(P))return P.length===0?-1:H(X,P,k,z,_t);if(typeof P=="number")return P=P&255,typeof Uint8Array.prototype.indexOf=="function"?_t?Uint8Array.prototype.indexOf.call(X,P,k):Uint8Array.prototype.lastIndexOf.call(X,P,k):H(X,[P],k,z,_t);throw new TypeError("val must be string, number or Buffer")}function H(X,P,k,z,_t){var kt=1,Ct=X.length,$t=P.length;if(z!==void 0&&(z=String(z).toLowerCase(),z==="ucs2"||z==="ucs-2"||z==="utf16le"||z==="utf-16le")){if(X.length<2||P.length<2)return-1;kt=2,Ct/=2,$t/=2,k/=2}function le(Fe,ln){return kt===1?Fe[ln]:Fe.readUInt16BE(ln*kt)}var re;if(_t){var fe=-1;for(re=k;re<Ct;re++)if(le(X,re)===le(P,fe===-1?0:re-fe)){if(fe===-1&&(fe=re),re-fe+1===$t)return fe*kt}else fe!==-1&&(re-=re-fe),fe=-1}else for(k+$t>Ct&&(k=Ct-$t),re=k;re>=0;re--){for(var Ce=!0,De=0;De<$t;De++)if(le(X,re+De)!==le(P,De)){Ce=!1;break}if(Ce)return re}return-1}o.prototype.includes=function(P,k,z){return this.indexOf(P,k,z)!==-1},o.prototype.indexOf=function(P,k,z){return q(this,P,k,z,!0)},o.prototype.lastIndexOf=function(P,k,z){return q(this,P,k,z,!1)};function Q(X,P,k,z){k=Number(k)||0;var _t=X.length-k;z?(z=Number(z),z>_t&&(z=_t)):z=_t;var kt=P.length;z>kt/2&&(z=kt/2);for(var Ct=0;Ct<z;++Ct){var $t=parseInt(P.substr(Ct*2,2),16);if(W($t))return Ct;X[k+Ct]=$t}return Ct}function I(X,P,k,z){return ft(j(P,X.length-k),X,k,z)}function dt(X,P,k,z){return ft(ht(P),X,k,z)}function nt(X,P,k,z){return ft(lt(P),X,k,z)}function B(X,P,k,z){return ft(ot(P,X.length-k),X,k,z)}o.prototype.write=function(P,k,z,_t){if(k===void 0)_t="utf8",z=this.length,k=0;else if(z===void 0&&typeof k=="string")_t=k,z=this.length,k=0;else if(isFinite(k))k=k>>>0,isFinite(z)?(z=z>>>0,_t===void 0&&(_t="utf8")):(_t=z,z=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var kt=this.length-k;if((z===void 0||z>kt)&&(z=kt),P.length>0&&(z<0||k<0)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");_t||(_t="utf8");for(var Ct=!1;;)switch(_t){case"hex":return Q(this,P,k,z);case"utf8":case"utf-8":return I(this,P,k,z);case"ascii":case"latin1":case"binary":return dt(this,P,k,z);case"base64":return nt(this,P,k,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,P,k,z);default:if(Ct)throw new TypeError("Unknown encoding: "+_t);_t=(""+_t).toLowerCase(),Ct=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Z(X,P,k){return P===0&&k===X.length?t.fromByteArray(X):t.fromByteArray(X.slice(P,k))}function D(X,P,k){k=Math.min(X.length,k);for(var z=[],_t=P;_t<k;){var kt=X[_t],Ct=null,$t=kt>239?4:kt>223?3:kt>191?2:1;if(_t+$t<=k){var le,re,fe,Ce;switch($t){case 1:kt<128&&(Ct=kt);break;case 2:le=X[_t+1],(le&192)===128&&(Ce=(kt&31)<<6|le&63,Ce>127&&(Ct=Ce));break;case 3:le=X[_t+1],re=X[_t+2],(le&192)===128&&(re&192)===128&&(Ce=(kt&15)<<12|(le&63)<<6|re&63,Ce>2047&&(Ce<55296||Ce>57343)&&(Ct=Ce));break;case 4:le=X[_t+1],re=X[_t+2],fe=X[_t+3],(le&192)===128&&(re&192)===128&&(fe&192)===128&&(Ce=(kt&15)<<18|(le&63)<<12|(re&63)<<6|fe&63,Ce>65535&&Ce<1114112&&(Ct=Ce))}}Ct===null?(Ct=65533,$t=1):Ct>65535&&(Ct-=65536,z.push(Ct>>>10&1023|55296),Ct=56320|Ct&1023),z.push(Ct),_t+=$t}return it(z)}var mt=4096;function it(X){var P=X.length;if(P<=mt)return String.fromCharCode.apply(String,X);for(var k="",z=0;z<P;)k+=String.fromCharCode.apply(String,X.slice(z,z+=mt));return k}function st(X,P,k){var z="";k=Math.min(X.length,k);for(var _t=P;_t<k;++_t)z+=String.fromCharCode(X[_t]&127);return z}function vt(X,P,k){var z="";k=Math.min(X.length,k);for(var _t=P;_t<k;++_t)z+=String.fromCharCode(X[_t]);return z}function wt(X,P,k){var z=X.length;(!P||P<0)&&(P=0),(!k||k<0||k>z)&&(k=z);for(var _t="",kt=P;kt<k;++kt)_t+=tt[X[kt]];return _t}function Ft(X,P,k){for(var z=X.slice(P,k),_t="",kt=0;kt<z.length-1;kt+=2)_t+=String.fromCharCode(z[kt]+z[kt+1]*256);return _t}o.prototype.slice=function(P,k){var z=this.length;P=~~P,k=k===void 0?z:~~k,P<0?(P+=z,P<0&&(P=0)):P>z&&(P=z),k<0?(k+=z,k<0&&(k=0)):k>z&&(k=z),k<P&&(k=P);var _t=this.subarray(P,k);return Object.setPrototypeOf(_t,o.prototype),_t};function $(X,P,k){if(X%1!==0||X<0)throw new RangeError("offset is not uint");if(X+P>k)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(P,k,z){P=P>>>0,k=k>>>0,z||$(P,k,this.length);for(var _t=this[P],kt=1,Ct=0;++Ct<k&&(kt*=256);)_t+=this[P+Ct]*kt;return _t},o.prototype.readUintBE=o.prototype.readUIntBE=function(P,k,z){P=P>>>0,k=k>>>0,z||$(P,k,this.length);for(var _t=this[P+--k],kt=1;k>0&&(kt*=256);)_t+=this[P+--k]*kt;return _t},o.prototype.readUint8=o.prototype.readUInt8=function(P,k){return P=P>>>0,k||$(P,1,this.length),this[P]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(P,k){return P=P>>>0,k||$(P,2,this.length),this[P]|this[P+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(P,k){return P=P>>>0,k||$(P,2,this.length),this[P]<<8|this[P+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(P,k){return P=P>>>0,k||$(P,4,this.length),(this[P]|this[P+1]<<8|this[P+2]<<16)+this[P+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(P,k){return P=P>>>0,k||$(P,4,this.length),this[P]*16777216+(this[P+1]<<16|this[P+2]<<8|this[P+3])},o.prototype.readIntLE=function(P,k,z){P=P>>>0,k=k>>>0,z||$(P,k,this.length);for(var _t=this[P],kt=1,Ct=0;++Ct<k&&(kt*=256);)_t+=this[P+Ct]*kt;return kt*=128,_t>=kt&&(_t-=Math.pow(2,8*k)),_t},o.prototype.readIntBE=function(P,k,z){P=P>>>0,k=k>>>0,z||$(P,k,this.length);for(var _t=k,kt=1,Ct=this[P+--_t];_t>0&&(kt*=256);)Ct+=this[P+--_t]*kt;return kt*=128,Ct>=kt&&(Ct-=Math.pow(2,8*k)),Ct},o.prototype.readInt8=function(P,k){return P=P>>>0,k||$(P,1,this.length),this[P]&128?(255-this[P]+1)*-1:this[P]},o.prototype.readInt16LE=function(P,k){P=P>>>0,k||$(P,2,this.length);var z=this[P]|this[P+1]<<8;return z&32768?z|4294901760:z},o.prototype.readInt16BE=function(P,k){P=P>>>0,k||$(P,2,this.length);var z=this[P+1]|this[P]<<8;return z&32768?z|4294901760:z},o.prototype.readInt32LE=function(P,k){return P=P>>>0,k||$(P,4,this.length),this[P]|this[P+1]<<8|this[P+2]<<16|this[P+3]<<24},o.prototype.readInt32BE=function(P,k){return P=P>>>0,k||$(P,4,this.length),this[P]<<24|this[P+1]<<16|this[P+2]<<8|this[P+3]},o.prototype.readFloatLE=function(P,k){return P=P>>>0,k||$(P,4,this.length),e.read(this,P,!0,23,4)},o.prototype.readFloatBE=function(P,k){return P=P>>>0,k||$(P,4,this.length),e.read(this,P,!1,23,4)},o.prototype.readDoubleLE=function(P,k){return P=P>>>0,k||$(P,8,this.length),e.read(this,P,!0,52,8)},o.prototype.readDoubleBE=function(P,k){return P=P>>>0,k||$(P,8,this.length),e.read(this,P,!1,52,8)};function R(X,P,k,z,_t,kt){if(!o.isBuffer(X))throw new TypeError('"buffer" argument must be a Buffer instance');if(P>_t||P<kt)throw new RangeError('"value" argument is out of bounds');if(k+z>X.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(P,k,z,_t){if(P=+P,k=k>>>0,z=z>>>0,!_t){var kt=Math.pow(2,8*z)-1;R(this,P,k,z,kt,0)}var Ct=1,$t=0;for(this[k]=P&255;++$t<z&&(Ct*=256);)this[k+$t]=P/Ct&255;return k+z},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(P,k,z,_t){if(P=+P,k=k>>>0,z=z>>>0,!_t){var kt=Math.pow(2,8*z)-1;R(this,P,k,z,kt,0)}var Ct=z-1,$t=1;for(this[k+Ct]=P&255;--Ct>=0&&($t*=256);)this[k+Ct]=P/$t&255;return k+z},o.prototype.writeUint8=o.prototype.writeUInt8=function(P,k,z){return P=+P,k=k>>>0,z||R(this,P,k,1,255,0),this[k]=P&255,k+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(P,k,z){return P=+P,k=k>>>0,z||R(this,P,k,2,65535,0),this[k]=P&255,this[k+1]=P>>>8,k+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(P,k,z){return P=+P,k=k>>>0,z||R(this,P,k,2,65535,0),this[k]=P>>>8,this[k+1]=P&255,k+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(P,k,z){return P=+P,k=k>>>0,z||R(this,P,k,4,4294967295,0),this[k+3]=P>>>24,this[k+2]=P>>>16,this[k+1]=P>>>8,this[k]=P&255,k+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(P,k,z){return P=+P,k=k>>>0,z||R(this,P,k,4,4294967295,0),this[k]=P>>>24,this[k+1]=P>>>16,this[k+2]=P>>>8,this[k+3]=P&255,k+4},o.prototype.writeIntLE=function(P,k,z,_t){if(P=+P,k=k>>>0,!_t){var kt=Math.pow(2,8*z-1);R(this,P,k,z,kt-1,-kt)}var Ct=0,$t=1,le=0;for(this[k]=P&255;++Ct<z&&($t*=256);)P<0&&le===0&&this[k+Ct-1]!==0&&(le=1),this[k+Ct]=(P/$t>>0)-le&255;return k+z},o.prototype.writeIntBE=function(P,k,z,_t){if(P=+P,k=k>>>0,!_t){var kt=Math.pow(2,8*z-1);R(this,P,k,z,kt-1,-kt)}var Ct=z-1,$t=1,le=0;for(this[k+Ct]=P&255;--Ct>=0&&($t*=256);)P<0&&le===0&&this[k+Ct+1]!==0&&(le=1),this[k+Ct]=(P/$t>>0)-le&255;return k+z},o.prototype.writeInt8=function(P,k,z){return P=+P,k=k>>>0,z||R(this,P,k,1,127,-128),P<0&&(P=255+P+1),this[k]=P&255,k+1},o.prototype.writeInt16LE=function(P,k,z){return P=+P,k=k>>>0,z||R(this,P,k,2,32767,-32768),this[k]=P&255,this[k+1]=P>>>8,k+2},o.prototype.writeInt16BE=function(P,k,z){return P=+P,k=k>>>0,z||R(this,P,k,2,32767,-32768),this[k]=P>>>8,this[k+1]=P&255,k+2},o.prototype.writeInt32LE=function(P,k,z){return P=+P,k=k>>>0,z||R(this,P,k,4,2147483647,-2147483648),this[k]=P&255,this[k+1]=P>>>8,this[k+2]=P>>>16,this[k+3]=P>>>24,k+4},o.prototype.writeInt32BE=function(P,k,z){return P=+P,k=k>>>0,z||R(this,P,k,4,2147483647,-2147483648),P<0&&(P=4294967295+P+1),this[k]=P>>>24,this[k+1]=P>>>16,this[k+2]=P>>>8,this[k+3]=P&255,k+4};function K(X,P,k,z,_t,kt){if(k+z>X.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("Index out of range")}function rt(X,P,k,z,_t){return P=+P,k=k>>>0,_t||K(X,P,k,4),e.write(X,P,k,z,23,4),k+4}o.prototype.writeFloatLE=function(P,k,z){return rt(this,P,k,!0,z)},o.prototype.writeFloatBE=function(P,k,z){return rt(this,P,k,!1,z)};function pt(X,P,k,z,_t){return P=+P,k=k>>>0,_t||K(X,P,k,8),e.write(X,P,k,z,52,8),k+8}o.prototype.writeDoubleLE=function(P,k,z){return pt(this,P,k,!0,z)},o.prototype.writeDoubleBE=function(P,k,z){return pt(this,P,k,!1,z)},o.prototype.copy=function(P,k,z,_t){if(!o.isBuffer(P))throw new TypeError("argument should be a Buffer");if(z||(z=0),!_t&&_t!==0&&(_t=this.length),k>=P.length&&(k=P.length),k||(k=0),_t>0&&_t<z&&(_t=z),_t===z||P.length===0||this.length===0)return 0;if(k<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(_t<0)throw new RangeError("sourceEnd out of bounds");_t>this.length&&(_t=this.length),P.length-k<_t-z&&(_t=P.length-k+z);var kt=_t-z;return this===P&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(k,z,_t):Uint8Array.prototype.set.call(P,this.subarray(z,_t),k),kt},o.prototype.fill=function(P,k,z,_t){if(typeof P=="string"){if(typeof k=="string"?(_t=k,k=0,z=this.length):typeof z=="string"&&(_t=z,z=this.length),_t!==void 0&&typeof _t!="string")throw new TypeError("encoding must be a string");if(typeof _t=="string"&&!o.isEncoding(_t))throw new TypeError("Unknown encoding: "+_t);if(P.length===1){var kt=P.charCodeAt(0);(_t==="utf8"&&kt<128||_t==="latin1")&&(P=kt)}}else typeof P=="number"?P=P&255:typeof P=="boolean"&&(P=Number(P));if(k<0||this.length<k||this.length<z)throw new RangeError("Out of range index");if(z<=k)return this;k=k>>>0,z=z===void 0?this.length:z>>>0,P||(P=0);var Ct;if(typeof P=="number")for(Ct=k;Ct<z;++Ct)this[Ct]=P;else{var $t=o.isBuffer(P)?P:o.from(P,_t),le=$t.length;if(le===0)throw new TypeError('The value "'+P+'" is invalid for argument "value"');for(Ct=0;Ct<z-k;++Ct)this[Ct+k]=$t[Ct%le]}return this};var ct=/[^+/0-9A-Za-z-_]/g;function F(X){if(X=X.split("=")[0],X=X.trim().replace(ct,""),X.length<2)return"";for(;X.length%4!==0;)X=X+"=";return X}function j(X,P){P=P||1/0;for(var k,z=X.length,_t=null,kt=[],Ct=0;Ct<z;++Ct){if(k=X.charCodeAt(Ct),k>55295&&k<57344){if(!_t){if(k>56319){(P-=3)>-1&&kt.push(239,191,189);continue}else if(Ct+1===z){(P-=3)>-1&&kt.push(239,191,189);continue}_t=k;continue}if(k<56320){(P-=3)>-1&&kt.push(239,191,189),_t=k;continue}k=(_t-55296<<10|k-56320)+65536}else _t&&(P-=3)>-1&&kt.push(239,191,189);if(_t=null,k<128){if((P-=1)<0)break;kt.push(k)}else if(k<2048){if((P-=2)<0)break;kt.push(k>>6|192,k&63|128)}else if(k<65536){if((P-=3)<0)break;kt.push(k>>12|224,k>>6&63|128,k&63|128)}else if(k<1114112){if((P-=4)<0)break;kt.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw new Error("Invalid code point")}return kt}function ht(X){for(var P=[],k=0;k<X.length;++k)P.push(X.charCodeAt(k)&255);return P}function ot(X,P){for(var k,z,_t,kt=[],Ct=0;Ct<X.length&&!((P-=2)<0);++Ct)k=X.charCodeAt(Ct),z=k>>8,_t=k%256,kt.push(_t),kt.push(z);return kt}function lt(X){return t.toByteArray(F(X))}function ft(X,P,k,z){for(var _t=0;_t<z&&!(_t+k>=P.length||_t>=X.length);++_t)P[_t+k]=X[_t];return _t}function Mt(X,P){return X instanceof P||X!=null&&X.constructor!=null&&X.constructor.name!=null&&X.constructor.name===P.name}function W(X){return X!==X}var tt=(function(){for(var X="0123456789abcdef",P=new Array(256),k=0;k<16;++k)for(var z=k*16,_t=0;_t<16;++_t)P[z+_t]=X[k]+X[_t];return P})()})(q1)),q1}var H1={},G1={},V1,$_;function Z4(){return $_||($_=1,V1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),n=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;t[e]=i;for(var s in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var l=Object.getOwnPropertySymbols(t);if(l.length!==1||l[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,e);if(o.value!==i||o.enumerable!==!0)return!1}return!0}),V1}var W1,X_;function P2(){if(X_)return W1;X_=1;var r=Z4();return W1=function(){return r()&&!!Symbol.toStringTag},W1}var K1,Y_;function J4(){return Y_||(Y_=1,K1=Object),K1}var $1,Q_;function sP(){return Q_||(Q_=1,$1=Error),$1}var X1,Z_;function aP(){return Z_||(Z_=1,X1=EvalError),X1}var Y1,J_;function oP(){return J_||(J_=1,Y1=RangeError),Y1}var Q1,tA;function lP(){return tA||(tA=1,Q1=ReferenceError),Q1}var Z1,eA;function t6(){return eA||(eA=1,Z1=SyntaxError),Z1}var J1,nA;function Qg(){return nA||(nA=1,J1=TypeError),J1}var ty,rA;function uP(){return rA||(rA=1,ty=URIError),ty}var ey,iA;function cP(){return iA||(iA=1,ey=Math.abs),ey}var ny,sA;function hP(){return sA||(sA=1,ny=Math.floor),ny}var ry,aA;function fP(){return aA||(aA=1,ry=Math.max),ry}var iy,oA;function dP(){return oA||(oA=1,iy=Math.min),iy}var sy,lA;function pP(){return lA||(lA=1,sy=Math.pow),sy}var ay,uA;function mP(){return uA||(uA=1,ay=Math.round),ay}var oy,cA;function gP(){return cA||(cA=1,oy=Number.isNaN||function(t){return t!==t}),oy}var ly,hA;function yP(){if(hA)return ly;hA=1;var r=gP();return ly=function(e){return r(e)||e===0?e:e<0?-1:1},ly}var uy,fA;function vP(){return fA||(fA=1,uy=Object.getOwnPropertyDescriptor),uy}var cy,dA;function bp(){if(dA)return cy;dA=1;var r=vP();if(r)try{r([],"length")}catch{r=null}return cy=r,cy}var hy,pA;function Zg(){if(pA)return hy;pA=1;var r=Object.defineProperty||!1;if(r)try{r({},"a",{value:1})}catch{r=!1}return hy=r,hy}var fy,mA;function bP(){if(mA)return fy;mA=1;var r=typeof Symbol<"u"&&Symbol,t=Z4();return fy=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},fy}var dy,gA;function e6(){return gA||(gA=1,dy=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),dy}var py,yA;function n6(){if(yA)return py;yA=1;var r=J4();return py=r.getPrototypeOf||null,py}var my,vA;function wP(){if(vA)return my;vA=1;var r="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,e=Math.max,n="[object Function]",i=function(c,h){for(var f=[],p=0;p<c.length;p+=1)f[p]=c[p];for(var y=0;y<h.length;y+=1)f[y+c.length]=h[y];return f},s=function(c,h){for(var f=[],p=h,y=0;p<c.length;p+=1,y+=1)f[y]=c[p];return f},l=function(o,c){for(var h="",f=0;f<o.length;f+=1)h+=o[f],f+1<o.length&&(h+=c);return h};return my=function(c){var h=this;if(typeof h!="function"||t.apply(h)!==n)throw new TypeError(r+h);for(var f=s(arguments,1),p,y=function(){if(this instanceof p){var v=h.apply(this,i(f,arguments));return Object(v)===v?v:this}return h.apply(c,i(f,arguments))},m=e(0,h.length-f.length),w=[],b=0;b<m;b++)w[b]="$"+b;if(p=Function("binder","return function ("+l(w,",")+"){ return binder.apply(this,arguments); }")(y),h.prototype){var _=function(){};_.prototype=h.prototype,p.prototype=new _,_.prototype=null}return p},my}var gy,bA;function wp(){if(bA)return gy;bA=1;var r=wP();return gy=Function.prototype.bind||r,gy}var yy,wA;function M2(){return wA||(wA=1,yy=Function.prototype.call),yy}var vy,xA;function F2(){return xA||(xA=1,vy=Function.prototype.apply),vy}var by,_A;function xP(){return _A||(_A=1,by=typeof Reflect<"u"&&Reflect&&Reflect.apply),by}var wy,AA;function r6(){if(AA)return wy;AA=1;var r=wp(),t=F2(),e=M2(),n=xP();return wy=n||r.call(e,t),wy}var xy,SA;function B2(){if(SA)return xy;SA=1;var r=wp(),t=Qg(),e=M2(),n=r6();return xy=function(s){if(s.length<1||typeof s[0]!="function")throw new t("a function is required");return n(r,e,s)},xy}var _y,EA;function _P(){if(EA)return _y;EA=1;var r=B2(),t=bp(),e;try{e=[].__proto__===Array.prototype}catch(l){if(!l||typeof l!="object"||!("code"in l)||l.code!=="ERR_PROTO_ACCESS")throw l}var n=!!e&&t&&t(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return _y=n&&typeof n.get=="function"?r([n.get]):typeof s=="function"?(function(o){return s(o==null?o:i(o))}):!1,_y}var Ay,CA;function i6(){if(CA)return Ay;CA=1;var r=e6(),t=n6(),e=_P();return Ay=r?function(i){return r(i)}:t?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return t(i)}:e?function(i){return e(i)}:null,Ay}var Sy,TA;function AP(){if(TA)return Sy;TA=1;var r=Function.prototype.call,t=Object.prototype.hasOwnProperty,e=wp();return Sy=e.call(r,t),Sy}var Ey,NA;function I2(){if(NA)return Ey;NA=1;var r,t=J4(),e=sP(),n=aP(),i=oP(),s=lP(),l=t6(),o=Qg(),c=uP(),h=cP(),f=hP(),p=fP(),y=dP(),m=pP(),w=mP(),b=yP(),_=Function,v=function(ht){try{return _('"use strict"; return ('+ht+").constructor;")()}catch{}},A=bp(),C=Zg(),S=function(){throw new o},O=A?(function(){try{return arguments.callee,S}catch{try{return A(arguments,"callee").get}catch{return S}}})():S,q=bP()(),H=i6(),Q=n6(),I=e6(),dt=F2(),nt=M2(),B={},Z=typeof Uint8Array>"u"||!H?r:H(Uint8Array),D={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":q&&H?H([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":B,"%AsyncGenerator%":B,"%AsyncGeneratorFunction%":B,"%AsyncIteratorPrototype%":B,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":n,"%Float16Array%":typeof Float16Array>"u"?r:Float16Array,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":_,"%GeneratorFunction%":B,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":q&&H?H(H([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!q||!H?r:H(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":A,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!q||!H?r:H(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":q&&H?H(""[Symbol.iterator]()):r,"%Symbol%":q?Symbol:r,"%SyntaxError%":l,"%ThrowTypeError%":O,"%TypedArray%":Z,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":c,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet,"%Function.prototype.call%":nt,"%Function.prototype.apply%":dt,"%Object.defineProperty%":C,"%Object.getPrototypeOf%":Q,"%Math.abs%":h,"%Math.floor%":f,"%Math.max%":p,"%Math.min%":y,"%Math.pow%":m,"%Math.round%":w,"%Math.sign%":b,"%Reflect.getPrototypeOf%":I};if(H)try{null.error}catch(ht){var mt=H(H(ht));D["%Error.prototype%"]=mt}var it=function ht(ot){var lt;if(ot==="%AsyncFunction%")lt=v("async function () {}");else if(ot==="%GeneratorFunction%")lt=v("function* () {}");else if(ot==="%AsyncGeneratorFunction%")lt=v("async function* () {}");else if(ot==="%AsyncGenerator%"){var ft=ht("%AsyncGeneratorFunction%");ft&&(lt=ft.prototype)}else if(ot==="%AsyncIteratorPrototype%"){var Mt=ht("%AsyncGenerator%");Mt&&H&&(lt=H(Mt.prototype))}return D[ot]=lt,lt},st={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},vt=wp(),wt=AP(),Ft=vt.call(nt,Array.prototype.concat),$=vt.call(dt,Array.prototype.splice),R=vt.call(nt,String.prototype.replace),K=vt.call(nt,String.prototype.slice),rt=vt.call(nt,RegExp.prototype.exec),pt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ct=/\\(\\)?/g,F=function(ot){var lt=K(ot,0,1),ft=K(ot,-1);if(lt==="%"&&ft!=="%")throw new l("invalid intrinsic syntax, expected closing `%`");if(ft==="%"&&lt!=="%")throw new l("invalid intrinsic syntax, expected opening `%`");var Mt=[];return R(ot,pt,function(W,tt,X,P){Mt[Mt.length]=X?R(P,ct,"$1"):tt||W}),Mt},j=function(ot,lt){var ft=ot,Mt;if(wt(st,ft)&&(Mt=st[ft],ft="%"+Mt[0]+"%"),wt(D,ft)){var W=D[ft];if(W===B&&(W=it(ft)),typeof W>"u"&&!lt)throw new o("intrinsic "+ot+" exists, but is not available. Please file an issue!");return{alias:Mt,name:ft,value:W}}throw new l("intrinsic "+ot+" does not exist!")};return Ey=function(ot,lt){if(typeof ot!="string"||ot.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof lt!="boolean")throw new o('"allowMissing" argument must be a boolean');if(rt(/^%?[^%]*%?$/,ot)===null)throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var ft=F(ot),Mt=ft.length>0?ft[0]:"",W=j("%"+Mt+"%",lt),tt=W.name,X=W.value,P=!1,k=W.alias;k&&(Mt=k[0],$(ft,Ft([0,1],k)));for(var z=1,_t=!0;z<ft.length;z+=1){var kt=ft[z],Ct=K(kt,0,1),$t=K(kt,-1);if((Ct==='"'||Ct==="'"||Ct==="`"||$t==='"'||$t==="'"||$t==="`")&&Ct!==$t)throw new l("property names with quotes must have matching quotes");if((kt==="constructor"||!_t)&&(P=!0),Mt+="."+kt,tt="%"+Mt+"%",wt(D,tt))X=D[tt];else if(X!=null){if(!(kt in X)){if(!lt)throw new o("base intrinsic for "+ot+" exists, but the property is not available.");return}if(A&&z+1>=ft.length){var le=A(X,kt);_t=!!le,_t&&"get"in le&&!("originalValue"in le.get)?X=le.get:X=X[kt]}else _t=wt(X,kt),X=X[kt];_t&&!P&&(D[tt]=X)}}return X},Ey}var Cy={exports:{}},Ty,kA;function SP(){if(kA)return Ty;kA=1;var r=Zg(),t=t6(),e=Qg(),n=bp();return Ty=function(s,l,o){if(!s||typeof s!="object"&&typeof s!="function")throw new e("`obj` must be an object or a function`");if(typeof l!="string"&&typeof l!="symbol")throw new e("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new e("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new e("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new e("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new e("`loose`, if provided, must be a boolean");var c=arguments.length>3?arguments[3]:null,h=arguments.length>4?arguments[4]:null,f=arguments.length>5?arguments[5]:null,p=arguments.length>6?arguments[6]:!1,y=!!n&&n(s,l);if(r)r(s,l,{configurable:f===null&&y?y.configurable:!f,enumerable:c===null&&y?y.enumerable:!c,value:o,writable:h===null&&y?y.writable:!h});else if(p||!c&&!h&&!f)s[l]=o;else throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Ty}var Ny,RA;function EP(){if(RA)return Ny;RA=1;var r=Zg(),t=function(){return!!r};return t.hasArrayLengthDefineBug=function(){if(!r)return null;try{return r([],"length",{value:1}).length!==1}catch{return!0}},Ny=t,Ny}var ky,LA;function CP(){if(LA)return ky;LA=1;var r=I2(),t=SP(),e=EP()(),n=bp(),i=Qg(),s=r("%Math.floor%");return ky=function(o,c){if(typeof o!="function")throw new i("`fn` is not a function");if(typeof c!="number"||c<0||c>4294967295||s(c)!==c)throw new i("`length` must be a positive 32-bit integer");var h=arguments.length>2&&!!arguments[2],f=!0,p=!0;if("length"in o&&n){var y=n(o,"length");y&&!y.configurable&&(f=!1),y&&!y.writable&&(p=!1)}return(f||p||!h)&&(e?t(o,"length",c,!0,!0):t(o,"length",c)),o},ky}var Ry,OA;function TP(){if(OA)return Ry;OA=1;var r=wp(),t=F2(),e=r6();return Ry=function(){return e(r,t,arguments)},Ry}var DA;function s6(){return DA||(DA=1,(function(r){var t=CP(),e=Zg(),n=B2(),i=TP();r.exports=function(l){var o=n(arguments),c=l.length-(arguments.length-1);return t(o,1+(c>0?c:0),!0)},e?e(r.exports,"apply",{value:i}):r.exports.apply=i})(Cy)),Cy.exports}var Ly,PA;function NP(){if(PA)return Ly;PA=1;var r=I2(),t=s6(),e=t(r("String.prototype.indexOf"));return Ly=function(i,s){var l=r(i,!!s);return typeof l=="function"&&e(i,".prototype.")>-1?t(l):l},Ly}var Oy,MA;function kP(){if(MA)return Oy;MA=1;var r=P2()(),t=NP(),e=t("Object.prototype.toString"),n=function(o){return r&&o&&typeof o=="object"&&Symbol.toStringTag in o?!1:e(o)==="[object Arguments]"},i=function(o){return n(o)?!0:o!==null&&typeof o=="object"&&typeof o.length=="number"&&o.length>=0&&e(o)!=="[object Array]"&&e(o.callee)==="[object Function]"},s=(function(){return n(arguments)})();return n.isLegacyArguments=i,Oy=s?n:i,Oy}var Dy,FA;function RP(){if(FA)return Dy;FA=1;var r=Object.prototype.toString,t=Function.prototype.toString,e=/^\s*(?:function)?\*/,n=P2()(),i=Object.getPrototypeOf,s=function(){if(!n)return!1;try{return Function("return function*() {}")()}catch{}},l;return Dy=function(c){if(typeof c!="function")return!1;if(e.test(t.call(c)))return!0;if(!n){var h=r.call(c);return h==="[object GeneratorFunction]"}if(!i)return!1;if(typeof l>"u"){var f=s();l=f?i(f):!1}return i(c)===l},Dy}var Py,BA;function LP(){if(BA)return Py;BA=1;var r=Function.prototype.toString,t=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,e,n;if(typeof t=="function"&&typeof Object.defineProperty=="function")try{e=Object.defineProperty({},"length",{get:function(){throw n}}),n={},t(function(){throw 42},null,e)}catch(A){A!==n&&(t=null)}else t=null;var i=/^\s*class\b/,s=function(C){try{var S=r.call(C);return i.test(S)}catch{return!1}},l=function(C){try{return s(C)?!1:(r.call(C),!0)}catch{return!1}},o=Object.prototype.toString,c="[object Object]",h="[object Function]",f="[object GeneratorFunction]",p="[object HTMLAllCollection]",y="[object HTML document.all class]",m="[object HTMLCollection]",w=typeof Symbol=="function"&&!!Symbol.toStringTag,b=!(0 in[,]),_=function(){return!1};if(typeof document=="object"){var v=document.all;o.call(v)===o.call(document.all)&&(_=function(C){if((b||!C)&&(typeof C>"u"||typeof C=="object"))try{var S=o.call(C);return(S===p||S===y||S===m||S===c)&&C("")==null}catch{}return!1})}return Py=t?function(C){if(_(C))return!0;if(!C||typeof C!="function"&&typeof C!="object")return!1;try{t(C,null,e)}catch(S){if(S!==n)return!1}return!s(C)&&l(C)}:function(C){if(_(C))return!0;if(!C||typeof C!="function"&&typeof C!="object")return!1;if(w)return l(C);if(s(C))return!1;var S=o.call(C);return S!==h&&S!==f&&!/^\[object HTML/.test(S)?!1:l(C)},Py}var My,IA;function OP(){if(IA)return My;IA=1;var r=LP(),t=Object.prototype.toString,e=Object.prototype.hasOwnProperty,n=function(c,h,f){for(var p=0,y=c.length;p<y;p++)e.call(c,p)&&(f==null?h(c[p],p,c):h.call(f,c[p],p,c))},i=function(c,h,f){for(var p=0,y=c.length;p<y;p++)f==null?h(c.charAt(p),p,c):h.call(f,c.charAt(p),p,c)},s=function(c,h,f){for(var p in c)e.call(c,p)&&(f==null?h(c[p],p,c):h.call(f,c[p],p,c))};function l(o){return t.call(o)==="[object Array]"}return My=function(c,h,f){if(!r(h))throw new TypeError("iterator must be a function");var p;arguments.length>=3&&(p=f),l(c)?n(c,h,p):typeof c=="string"?i(c,h,p):s(c,h,p)},My}var Fy,jA;function DP(){return jA||(jA=1,Fy=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),Fy}var By,UA;function PP(){if(UA)return By;UA=1;var r=DP(),t=typeof globalThis>"u"?au:globalThis;return By=function(){for(var n=[],i=0;i<r.length;i++)typeof t[r[i]]=="function"&&(n[n.length]=r[i]);return n},By}var Iy,zA;function MP(){if(zA)return Iy;zA=1;var r=I2(),t=B2(),e=t([r("%String.prototype.indexOf%")]);return Iy=function(i,s){var l=r(i,!!s);return typeof l=="function"&&e(i,".prototype.")>-1?t([l]):l},Iy}var jy,qA;function a6(){if(qA)return jy;qA=1;var r=OP(),t=PP(),e=s6(),n=MP(),i=bp(),s=i6(),l=n("Object.prototype.toString"),o=P2()(),c=typeof globalThis>"u"?au:globalThis,h=t(),f=n("String.prototype.slice"),p=n("Array.prototype.indexOf",!0)||function(_,v){for(var A=0;A<_.length;A+=1)if(_[A]===v)return A;return-1},y={__proto__:null};o&&i&&s?r(h,function(b){var _=new c[b];if(Symbol.toStringTag in _&&s){var v=s(_),A=i(v,Symbol.toStringTag);if(!A&&v){var C=s(v);A=i(C,Symbol.toStringTag)}y["$"+b]=e(A.get)}}):r(h,function(b){var _=new c[b],v=_.slice||_.set;v&&(y["$"+b]=e(v))});var m=function(_){var v=!1;return r(y,function(A,C){if(!v)try{"$"+A(_)===C&&(v=f(C,1))}catch{}}),v},w=function(_){var v=!1;return r(y,function(A,C){if(!v)try{A(_),v=f(C,1)}catch{}}),v};return jy=function(_){if(!_||typeof _!="object")return!1;if(!o){var v=f(l(_),8,-1);return p(h,v)>-1?v:v!=="Object"?!1:w(_)}return i?m(_):null},jy}var Uy,HA;function FP(){if(HA)return Uy;HA=1;var r=a6();return Uy=function(e){return!!r(e)},Uy}var GA;function BP(){return GA||(GA=1,(function(r){var t=kP(),e=RP(),n=a6(),i=FP();function s(z){return z.call.bind(z)}var l=typeof BigInt<"u",o=typeof Symbol<"u",c=s(Object.prototype.toString),h=s(Number.prototype.valueOf),f=s(String.prototype.valueOf),p=s(Boolean.prototype.valueOf);if(l)var y=s(BigInt.prototype.valueOf);if(o)var m=s(Symbol.prototype.valueOf);function w(z,_t){if(typeof z!="object")return!1;try{return _t(z),!0}catch{return!1}}r.isArgumentsObject=t,r.isGeneratorFunction=e,r.isTypedArray=i;function b(z){return typeof Promise<"u"&&z instanceof Promise||z!==null&&typeof z=="object"&&typeof z.then=="function"&&typeof z.catch=="function"}r.isPromise=b;function _(z){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(z):i(z)||K(z)}r.isArrayBufferView=_;function v(z){return n(z)==="Uint8Array"}r.isUint8Array=v;function A(z){return n(z)==="Uint8ClampedArray"}r.isUint8ClampedArray=A;function C(z){return n(z)==="Uint16Array"}r.isUint16Array=C;function S(z){return n(z)==="Uint32Array"}r.isUint32Array=S;function O(z){return n(z)==="Int8Array"}r.isInt8Array=O;function q(z){return n(z)==="Int16Array"}r.isInt16Array=q;function H(z){return n(z)==="Int32Array"}r.isInt32Array=H;function Q(z){return n(z)==="Float32Array"}r.isFloat32Array=Q;function I(z){return n(z)==="Float64Array"}r.isFloat64Array=I;function dt(z){return n(z)==="BigInt64Array"}r.isBigInt64Array=dt;function nt(z){return n(z)==="BigUint64Array"}r.isBigUint64Array=nt;function B(z){return c(z)==="[object Map]"}B.working=typeof Map<"u"&&B(new Map);function Z(z){return typeof Map>"u"?!1:B.working?B(z):z instanceof Map}r.isMap=Z;function D(z){return c(z)==="[object Set]"}D.working=typeof Set<"u"&&D(new Set);function mt(z){return typeof Set>"u"?!1:D.working?D(z):z instanceof Set}r.isSet=mt;function it(z){return c(z)==="[object WeakMap]"}it.working=typeof WeakMap<"u"&&it(new WeakMap);function st(z){return typeof WeakMap>"u"?!1:it.working?it(z):z instanceof WeakMap}r.isWeakMap=st;function vt(z){return c(z)==="[object WeakSet]"}vt.working=typeof WeakSet<"u"&&vt(new WeakSet);function wt(z){return vt(z)}r.isWeakSet=wt;function Ft(z){return c(z)==="[object ArrayBuffer]"}Ft.working=typeof ArrayBuffer<"u"&&Ft(new ArrayBuffer);function $(z){return typeof ArrayBuffer>"u"?!1:Ft.working?Ft(z):z instanceof ArrayBuffer}r.isArrayBuffer=$;function R(z){return c(z)==="[object DataView]"}R.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&R(new DataView(new ArrayBuffer(1),0,1));function K(z){return typeof DataView>"u"?!1:R.working?R(z):z instanceof DataView}r.isDataView=K;var rt=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function pt(z){return c(z)==="[object SharedArrayBuffer]"}function ct(z){return typeof rt>"u"?!1:(typeof pt.working>"u"&&(pt.working=pt(new rt)),pt.working?pt(z):z instanceof rt)}r.isSharedArrayBuffer=ct;function F(z){return c(z)==="[object AsyncFunction]"}r.isAsyncFunction=F;function j(z){return c(z)==="[object Map Iterator]"}r.isMapIterator=j;function ht(z){return c(z)==="[object Set Iterator]"}r.isSetIterator=ht;function ot(z){return c(z)==="[object Generator]"}r.isGeneratorObject=ot;function lt(z){return c(z)==="[object WebAssembly.Module]"}r.isWebAssemblyCompiledModule=lt;function ft(z){return w(z,h)}r.isNumberObject=ft;function Mt(z){return w(z,f)}r.isStringObject=Mt;function W(z){return w(z,p)}r.isBooleanObject=W;function tt(z){return l&&w(z,y)}r.isBigIntObject=tt;function X(z){return o&&w(z,m)}r.isSymbolObject=X;function P(z){return ft(z)||Mt(z)||W(z)||tt(z)||X(z)}r.isBoxedPrimitive=P;function k(z){return typeof Uint8Array<"u"&&($(z)||ct(z))}r.isAnyArrayBuffer=k,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(z){Object.defineProperty(r,z,{enumerable:!1,value:function(){throw new Error(z+" is not supported in userland")}})})})(G1)),G1}var zy,VA;function IP(){return VA||(VA=1,zy=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}),zy}var WA;function o6(){return WA||(WA=1,(function(r){var t=Object.getOwnPropertyDescriptors||function(K){for(var rt=Object.keys(K),pt={},ct=0;ct<rt.length;ct++)pt[rt[ct]]=Object.getOwnPropertyDescriptor(K,rt[ct]);return pt},e=/%[sdj%]/g;r.format=function(R){if(!O(R)){for(var K=[],rt=0;rt<arguments.length;rt++)K.push(l(arguments[rt]));return K.join(" ")}for(var rt=1,pt=arguments,ct=pt.length,F=String(R).replace(e,function(ht){if(ht==="%%")return"%";if(rt>=ct)return ht;switch(ht){case"%s":return String(pt[rt++]);case"%d":return Number(pt[rt++]);case"%j":try{return JSON.stringify(pt[rt++])}catch{return"[Circular]"}default:return ht}}),j=pt[rt];rt<ct;j=pt[++rt])A(j)||!I(j)?F+=" "+j:F+=" "+l(j);return F},r.deprecate=function(R,K){if(typeof Hn<"u"&&Hn.noDeprecation===!0)return R;if(typeof Hn>"u")return function(){return r.deprecate(R,K).apply(this,arguments)};var rt=!1;function pt(){if(!rt){if(Hn.throwDeprecation)throw new Error(K);Hn.traceDeprecation?console.trace(K):console.error(K),rt=!0}return R.apply(this,arguments)}return pt};var n={},i=/^$/;if(Hn.env.NODE_DEBUG){var s=Hn.env.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+s+"$","i")}r.debuglog=function(R){if(R=R.toUpperCase(),!n[R])if(i.test(R)){var K=Hn.pid;n[R]=function(){var rt=r.format.apply(r,arguments);console.error("%s %d: %s",R,K,rt)}}else n[R]=function(){};return n[R]};function l(R,K){var rt={seen:[],stylize:c};return arguments.length>=3&&(rt.depth=arguments[2]),arguments.length>=4&&(rt.colors=arguments[3]),v(K)?rt.showHidden=K:K&&r._extend(rt,K),H(rt.showHidden)&&(rt.showHidden=!1),H(rt.depth)&&(rt.depth=2),H(rt.colors)&&(rt.colors=!1),H(rt.customInspect)&&(rt.customInspect=!0),rt.colors&&(rt.stylize=o),f(rt,R,rt.depth)}r.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function o(R,K){var rt=l.styles[K];return rt?"\x1B["+l.colors[rt][0]+"m"+R+"\x1B["+l.colors[rt][1]+"m":R}function c(R,K){return R}function h(R){var K={};return R.forEach(function(rt,pt){K[rt]=!0}),K}function f(R,K,rt){if(R.customInspect&&K&&B(K.inspect)&&K.inspect!==r.inspect&&!(K.constructor&&K.constructor.prototype===K)){var pt=K.inspect(rt,R);return O(pt)||(pt=f(R,pt,rt)),pt}var ct=p(R,K);if(ct)return ct;var F=Object.keys(K),j=h(F);if(R.showHidden&&(F=Object.getOwnPropertyNames(K)),nt(K)&&(F.indexOf("message")>=0||F.indexOf("description")>=0))return y(K);if(F.length===0){if(B(K)){var ht=K.name?": "+K.name:"";return R.stylize("[Function"+ht+"]","special")}if(Q(K))return R.stylize(RegExp.prototype.toString.call(K),"regexp");if(dt(K))return R.stylize(Date.prototype.toString.call(K),"date");if(nt(K))return y(K)}var ot="",lt=!1,ft=["{","}"];if(_(K)&&(lt=!0,ft=["[","]"]),B(K)){var Mt=K.name?": "+K.name:"";ot=" [Function"+Mt+"]"}if(Q(K)&&(ot=" "+RegExp.prototype.toString.call(K)),dt(K)&&(ot=" "+Date.prototype.toUTCString.call(K)),nt(K)&&(ot=" "+y(K)),F.length===0&&(!lt||K.length==0))return ft[0]+ot+ft[1];if(rt<0)return Q(K)?R.stylize(RegExp.prototype.toString.call(K),"regexp"):R.stylize("[Object]","special");R.seen.push(K);var W;return lt?W=m(R,K,rt,j,F):W=F.map(function(tt){return w(R,K,rt,j,tt,lt)}),R.seen.pop(),b(W,ot,ft)}function p(R,K){if(H(K))return R.stylize("undefined","undefined");if(O(K)){var rt="'"+JSON.stringify(K).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return R.stylize(rt,"string")}if(S(K))return R.stylize(""+K,"number");if(v(K))return R.stylize(""+K,"boolean");if(A(K))return R.stylize("null","null")}function y(R){return"["+Error.prototype.toString.call(R)+"]"}function m(R,K,rt,pt,ct){for(var F=[],j=0,ht=K.length;j<ht;++j)vt(K,String(j))?F.push(w(R,K,rt,pt,String(j),!0)):F.push("");return ct.forEach(function(ot){ot.match(/^\d+$/)||F.push(w(R,K,rt,pt,ot,!0))}),F}function w(R,K,rt,pt,ct,F){var j,ht,ot;if(ot=Object.getOwnPropertyDescriptor(K,ct)||{value:K[ct]},ot.get?ot.set?ht=R.stylize("[Getter/Setter]","special"):ht=R.stylize("[Getter]","special"):ot.set&&(ht=R.stylize("[Setter]","special")),vt(pt,ct)||(j="["+ct+"]"),ht||(R.seen.indexOf(ot.value)<0?(A(rt)?ht=f(R,ot.value,null):ht=f(R,ot.value,rt-1),ht.indexOf(`
`)>-1&&(F?ht=ht.split(`
`).map(function(lt){return"  "+lt}).join(`
`).slice(2):ht=`
`+ht.split(`
`).map(function(lt){return"   "+lt}).join(`
`))):ht=R.stylize("[Circular]","special")),H(j)){if(F&&ct.match(/^\d+$/))return ht;j=JSON.stringify(""+ct),j.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(j=j.slice(1,-1),j=R.stylize(j,"name")):(j=j.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),j=R.stylize(j,"string"))}return j+": "+ht}function b(R,K,rt){var pt=R.reduce(function(ct,F){return F.indexOf(`
`)>=0,ct+F.replace(/\u001b\[\d\d?m/g,"").length+1},0);return pt>60?rt[0]+(K===""?"":K+`
 `)+" "+R.join(`,
  `)+" "+rt[1]:rt[0]+K+" "+R.join(", ")+" "+rt[1]}r.types=BP();function _(R){return Array.isArray(R)}r.isArray=_;function v(R){return typeof R=="boolean"}r.isBoolean=v;function A(R){return R===null}r.isNull=A;function C(R){return R==null}r.isNullOrUndefined=C;function S(R){return typeof R=="number"}r.isNumber=S;function O(R){return typeof R=="string"}r.isString=O;function q(R){return typeof R=="symbol"}r.isSymbol=q;function H(R){return R===void 0}r.isUndefined=H;function Q(R){return I(R)&&D(R)==="[object RegExp]"}r.isRegExp=Q,r.types.isRegExp=Q;function I(R){return typeof R=="object"&&R!==null}r.isObject=I;function dt(R){return I(R)&&D(R)==="[object Date]"}r.isDate=dt,r.types.isDate=dt;function nt(R){return I(R)&&(D(R)==="[object Error]"||R instanceof Error)}r.isError=nt,r.types.isNativeError=nt;function B(R){return typeof R=="function"}r.isFunction=B;function Z(R){return R===null||typeof R=="boolean"||typeof R=="number"||typeof R=="string"||typeof R=="symbol"||typeof R>"u"}r.isPrimitive=Z,r.isBuffer=IP();function D(R){return Object.prototype.toString.call(R)}function mt(R){return R<10?"0"+R.toString(10):R.toString(10)}var it=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function st(){var R=new Date,K=[mt(R.getHours()),mt(R.getMinutes()),mt(R.getSeconds())].join(":");return[R.getDate(),it[R.getMonth()],K].join(" ")}r.log=function(){console.log("%s - %s",st(),r.format.apply(r,arguments))},r.inherits=Oc(),r._extend=function(R,K){if(!K||!I(K))return R;for(var rt=Object.keys(K),pt=rt.length;pt--;)R[rt[pt]]=K[rt[pt]];return R};function vt(R,K){return Object.prototype.hasOwnProperty.call(R,K)}var wt=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;r.promisify=function(K){if(typeof K!="function")throw new TypeError('The "original" argument must be of type Function');if(wt&&K[wt]){var rt=K[wt];if(typeof rt!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(rt,wt,{value:rt,enumerable:!1,writable:!1,configurable:!0}),rt}function rt(){for(var pt,ct,F=new Promise(function(ot,lt){pt=ot,ct=lt}),j=[],ht=0;ht<arguments.length;ht++)j.push(arguments[ht]);j.push(function(ot,lt){ot?ct(ot):pt(lt)});try{K.apply(this,j)}catch(ot){ct(ot)}return F}return Object.setPrototypeOf(rt,Object.getPrototypeOf(K)),wt&&Object.defineProperty(rt,wt,{value:rt,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(rt,t(K))},r.promisify.custom=wt;function Ft(R,K){if(!R){var rt=new Error("Promise was rejected with a falsy value");rt.reason=R,R=rt}return K(R)}function $(R){if(typeof R!="function")throw new TypeError('The "original" argument must be of type Function');function K(){for(var rt=[],pt=0;pt<arguments.length;pt++)rt.push(arguments[pt]);var ct=rt.pop();if(typeof ct!="function")throw new TypeError("The last argument must be of type Function");var F=this,j=function(){return ct.apply(F,arguments)};R.apply(this,rt).then(function(ht){Hn.nextTick(j.bind(null,null,ht))},function(ht){Hn.nextTick(Ft.bind(null,ht,j))})}return Object.setPrototypeOf(K,Object.getPrototypeOf(R)),Object.defineProperties(K,t(R)),K}r.callbackify=$})(H1)),H1}var qy,KA;function jP(){if(KA)return qy;KA=1;function r(y,m){var w=Object.keys(y);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(y);m&&(b=b.filter(function(_){return Object.getOwnPropertyDescriptor(y,_).enumerable})),w.push.apply(w,b)}return w}function t(y){for(var m=1;m<arguments.length;m++){var w=arguments[m]!=null?arguments[m]:{};m%2?r(Object(w),!0).forEach(function(b){e(y,b,w[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(w)):r(Object(w)).forEach(function(b){Object.defineProperty(y,b,Object.getOwnPropertyDescriptor(w,b))})}return y}function e(y,m,w){return m in y?Object.defineProperty(y,m,{value:w,enumerable:!0,configurable:!0,writable:!0}):y[m]=w,y}function n(y,m){if(!(y instanceof m))throw new TypeError("Cannot call a class as a function")}function i(y,m){for(var w=0;w<m.length;w++){var b=m[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}function s(y,m,w){return m&&i(y.prototype,m),y}var l=Yg(),o=l.Buffer,c=o6(),h=c.inspect,f=h&&h.custom||"inspect";function p(y,m,w){o.prototype.copy.call(y,m,w)}return qy=(function(){function y(){n(this,y),this.head=null,this.tail=null,this.length=0}return s(y,[{key:"push",value:function(w){var b={data:w,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length}},{key:"unshift",value:function(w){var b={data:w,next:this.head};this.length===0&&(this.tail=b),this.head=b,++this.length}},{key:"shift",value:function(){if(this.length!==0){var w=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,w}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(w){if(this.length===0)return"";for(var b=this.head,_=""+b.data;b=b.next;)_+=w+b.data;return _}},{key:"concat",value:function(w){if(this.length===0)return o.alloc(0);for(var b=o.allocUnsafe(w>>>0),_=this.head,v=0;_;)p(_.data,b,v),v+=_.data.length,_=_.next;return b}},{key:"consume",value:function(w,b){var _;return w<this.head.data.length?(_=this.head.data.slice(0,w),this.head.data=this.head.data.slice(w)):w===this.head.data.length?_=this.shift():_=b?this._getString(w):this._getBuffer(w),_}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(w){var b=this.head,_=1,v=b.data;for(w-=v.length;b=b.next;){var A=b.data,C=w>A.length?A.length:w;if(C===A.length?v+=A:v+=A.slice(0,w),w-=C,w===0){C===A.length?(++_,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=A.slice(C));break}++_}return this.length-=_,v}},{key:"_getBuffer",value:function(w){var b=o.allocUnsafe(w),_=this.head,v=1;for(_.data.copy(b),w-=_.data.length;_=_.next;){var A=_.data,C=w>A.length?A.length:w;if(A.copy(b,b.length-w,0,C),w-=C,w===0){C===A.length?(++v,_.next?this.head=_.next:this.head=this.tail=null):(this.head=_,_.data=A.slice(C));break}++v}return this.length-=v,b}},{key:f,value:function(w,b){return h(this,t({},b,{depth:0,customInspect:!1}))}}]),y})(),qy}var Hy,$A;function l6(){if($A)return Hy;$A=1;function r(l,o){var c=this,h=this._readableState&&this._readableState.destroyed,f=this._writableState&&this._writableState.destroyed;return h||f?(o?o(l):l&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Hn.nextTick(i,this,l)):Hn.nextTick(i,this,l)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(l||null,function(p){!o&&p?c._writableState?c._writableState.errorEmitted?Hn.nextTick(e,c):(c._writableState.errorEmitted=!0,Hn.nextTick(t,c,p)):Hn.nextTick(t,c,p):o?(Hn.nextTick(e,c),o(p)):Hn.nextTick(e,c)}),this)}function t(l,o){i(l,o),e(l)}function e(l){l._writableState&&!l._writableState.emitClose||l._readableState&&!l._readableState.emitClose||l.emit("close")}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(l,o){l.emit("error",o)}function s(l,o){var c=l._readableState,h=l._writableState;c&&c.autoDestroy||h&&h.autoDestroy?l.destroy(o):l.emit("error",o)}return Hy={destroy:r,undestroy:n,errorOrDestroy:s},Hy}var Gy={},XA;function Gf(){if(XA)return Gy;XA=1;function r(o,c){o.prototype=Object.create(c.prototype),o.prototype.constructor=o,o.__proto__=c}var t={};function e(o,c,h){h||(h=Error);function f(y,m,w){return typeof c=="string"?c:c(y,m,w)}var p=(function(y){r(m,y);function m(w,b,_){return y.call(this,f(w,b,_))||this}return m})(h);p.prototype.name=h.name,p.prototype.code=o,t[o]=p}function n(o,c){if(Array.isArray(o)){var h=o.length;return o=o.map(function(f){return String(f)}),h>2?"one of ".concat(c," ").concat(o.slice(0,h-1).join(", "),", or ")+o[h-1]:h===2?"one of ".concat(c," ").concat(o[0]," or ").concat(o[1]):"of ".concat(c," ").concat(o[0])}else return"of ".concat(c," ").concat(String(o))}function i(o,c,h){return o.substr(0,c.length)===c}function s(o,c,h){return(h===void 0||h>o.length)&&(h=o.length),o.substring(h-c.length,h)===c}function l(o,c,h){return typeof h!="number"&&(h=0),h+c.length>o.length?!1:o.indexOf(c,h)!==-1}return e("ERR_INVALID_OPT_VALUE",function(o,c){return'The value "'+c+'" is invalid for option "'+o+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(o,c,h){var f;typeof c=="string"&&i(c,"not ")?(f="must not be",c=c.replace(/^not /,"")):f="must be";var p;if(s(o," argument"))p="The ".concat(o," ").concat(f," ").concat(n(c,"type"));else{var y=l(o,".")?"property":"argument";p='The "'.concat(o,'" ').concat(y," ").concat(f," ").concat(n(c,"type"))}return p+=". Received type ".concat(typeof h),p},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(o){return"The "+o+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(o){return"Cannot call "+o+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(o){return"Unknown encoding: "+o},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Gy.codes=t,Gy}var Vy,YA;function u6(){if(YA)return Vy;YA=1;var r=Gf().codes.ERR_INVALID_OPT_VALUE;function t(n,i,s){return n.highWaterMark!=null?n.highWaterMark:i?n[s]:null}function e(n,i,s,l){var o=t(i,l,s);if(o!=null){if(!(isFinite(o)&&Math.floor(o)===o)||o<0){var c=l?s:"highWaterMark";throw new r(c,o)}return Math.floor(o)}return n.objectMode?16:16*1024}return Vy={getHighWaterMark:e},Vy}var Wy,QA;function UP(){if(QA)return Wy;QA=1,Wy=r;function r(e,n){if(t("noDeprecation"))return e;var i=!1;function s(){if(!i){if(t("throwDeprecation"))throw new Error(n);t("traceDeprecation")?console.trace(n):console.warn(n),i=!0}return e.apply(this,arguments)}return s}function t(e){try{if(!au.localStorage)return!1}catch{return!1}var n=au.localStorage[e];return n==null?!1:String(n).toLowerCase()==="true"}return Wy}var Ky,ZA;function c6(){if(ZA)return Ky;ZA=1,Ky=Q;function r(ct){var F=this;this.next=null,this.entry=null,this.finish=function(){pt(F,ct)}}var t;Q.WritableState=q;var e={deprecate:UP()},n=Q4(),i=Yg().Buffer,s=au.Uint8Array||function(){};function l(ct){return i.from(ct)}function o(ct){return i.isBuffer(ct)||ct instanceof s}var c=l6(),h=u6(),f=h.getHighWaterMark,p=Gf().codes,y=p.ERR_INVALID_ARG_TYPE,m=p.ERR_METHOD_NOT_IMPLEMENTED,w=p.ERR_MULTIPLE_CALLBACK,b=p.ERR_STREAM_CANNOT_PIPE,_=p.ERR_STREAM_DESTROYED,v=p.ERR_STREAM_NULL_VALUES,A=p.ERR_STREAM_WRITE_AFTER_END,C=p.ERR_UNKNOWN_ENCODING,S=c.errorOrDestroy;Oc()(Q,n);function O(){}function q(ct,F,j){t=t||Pf(),ct=ct||{},typeof j!="boolean"&&(j=F instanceof t),this.objectMode=!!ct.objectMode,j&&(this.objectMode=this.objectMode||!!ct.writableObjectMode),this.highWaterMark=f(this,ct,"writableHighWaterMark",j),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ht=ct.decodeStrings===!1;this.decodeStrings=!ht,this.defaultEncoding=ct.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ot){it(F,ot)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=ct.emitClose!==!1,this.autoDestroy=!!ct.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}q.prototype.getBuffer=function(){for(var F=this.bufferedRequest,j=[];F;)j.push(F),F=F.next;return j},(function(){try{Object.defineProperty(q.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var H;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(H=Function.prototype[Symbol.hasInstance],Object.defineProperty(Q,Symbol.hasInstance,{value:function(F){return H.call(this,F)?!0:this!==Q?!1:F&&F._writableState instanceof q}})):H=function(F){return F instanceof this};function Q(ct){t=t||Pf();var F=this instanceof t;if(!F&&!H.call(Q,this))return new Q(ct);this._writableState=new q(ct,this,F),this.writable=!0,ct&&(typeof ct.write=="function"&&(this._write=ct.write),typeof ct.writev=="function"&&(this._writev=ct.writev),typeof ct.destroy=="function"&&(this._destroy=ct.destroy),typeof ct.final=="function"&&(this._final=ct.final)),n.call(this)}Q.prototype.pipe=function(){S(this,new b)};function I(ct,F){var j=new A;S(ct,j),Hn.nextTick(F,j)}function dt(ct,F,j,ht){var ot;return j===null?ot=new v:typeof j!="string"&&!F.objectMode&&(ot=new y("chunk",["string","Buffer"],j)),ot?(S(ct,ot),Hn.nextTick(ht,ot),!1):!0}Q.prototype.write=function(ct,F,j){var ht=this._writableState,ot=!1,lt=!ht.objectMode&&o(ct);return lt&&!i.isBuffer(ct)&&(ct=l(ct)),typeof F=="function"&&(j=F,F=null),lt?F="buffer":F||(F=ht.defaultEncoding),typeof j!="function"&&(j=O),ht.ending?I(this,j):(lt||dt(this,ht,ct,j))&&(ht.pendingcb++,ot=B(this,ht,lt,ct,F,j)),ot},Q.prototype.cork=function(){this._writableState.corked++},Q.prototype.uncork=function(){var ct=this._writableState;ct.corked&&(ct.corked--,!ct.writing&&!ct.corked&&!ct.bufferProcessing&&ct.bufferedRequest&&wt(this,ct))},Q.prototype.setDefaultEncoding=function(F){if(typeof F=="string"&&(F=F.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((F+"").toLowerCase())>-1))throw new C(F);return this._writableState.defaultEncoding=F,this},Object.defineProperty(Q.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function nt(ct,F,j){return!ct.objectMode&&ct.decodeStrings!==!1&&typeof F=="string"&&(F=i.from(F,j)),F}Object.defineProperty(Q.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function B(ct,F,j,ht,ot,lt){if(!j){var ft=nt(F,ht,ot);ht!==ft&&(j=!0,ot="buffer",ht=ft)}var Mt=F.objectMode?1:ht.length;F.length+=Mt;var W=F.length<F.highWaterMark;if(W||(F.needDrain=!0),F.writing||F.corked){var tt=F.lastBufferedRequest;F.lastBufferedRequest={chunk:ht,encoding:ot,isBuf:j,callback:lt,next:null},tt?tt.next=F.lastBufferedRequest:F.bufferedRequest=F.lastBufferedRequest,F.bufferedRequestCount+=1}else Z(ct,F,!1,Mt,ht,ot,lt);return W}function Z(ct,F,j,ht,ot,lt,ft){F.writelen=ht,F.writecb=ft,F.writing=!0,F.sync=!0,F.destroyed?F.onwrite(new _("write")):j?ct._writev(ot,F.onwrite):ct._write(ot,lt,F.onwrite),F.sync=!1}function D(ct,F,j,ht,ot){--F.pendingcb,j?(Hn.nextTick(ot,ht),Hn.nextTick(K,ct,F),ct._writableState.errorEmitted=!0,S(ct,ht)):(ot(ht),ct._writableState.errorEmitted=!0,S(ct,ht),K(ct,F))}function mt(ct){ct.writing=!1,ct.writecb=null,ct.length-=ct.writelen,ct.writelen=0}function it(ct,F){var j=ct._writableState,ht=j.sync,ot=j.writecb;if(typeof ot!="function")throw new w;if(mt(j),F)D(ct,j,ht,F,ot);else{var lt=Ft(j)||ct.destroyed;!lt&&!j.corked&&!j.bufferProcessing&&j.bufferedRequest&&wt(ct,j),ht?Hn.nextTick(st,ct,j,lt,ot):st(ct,j,lt,ot)}}function st(ct,F,j,ht){j||vt(ct,F),F.pendingcb--,ht(),K(ct,F)}function vt(ct,F){F.length===0&&F.needDrain&&(F.needDrain=!1,ct.emit("drain"))}function wt(ct,F){F.bufferProcessing=!0;var j=F.bufferedRequest;if(ct._writev&&j&&j.next){var ht=F.bufferedRequestCount,ot=new Array(ht),lt=F.corkedRequestsFree;lt.entry=j;for(var ft=0,Mt=!0;j;)ot[ft]=j,j.isBuf||(Mt=!1),j=j.next,ft+=1;ot.allBuffers=Mt,Z(ct,F,!0,F.length,ot,"",lt.finish),F.pendingcb++,F.lastBufferedRequest=null,lt.next?(F.corkedRequestsFree=lt.next,lt.next=null):F.corkedRequestsFree=new r(F),F.bufferedRequestCount=0}else{for(;j;){var W=j.chunk,tt=j.encoding,X=j.callback,P=F.objectMode?1:W.length;if(Z(ct,F,!1,P,W,tt,X),j=j.next,F.bufferedRequestCount--,F.writing)break}j===null&&(F.lastBufferedRequest=null)}F.bufferedRequest=j,F.bufferProcessing=!1}Q.prototype._write=function(ct,F,j){j(new m("_write()"))},Q.prototype._writev=null,Q.prototype.end=function(ct,F,j){var ht=this._writableState;return typeof ct=="function"?(j=ct,ct=null,F=null):typeof F=="function"&&(j=F,F=null),ct!=null&&this.write(ct,F),ht.corked&&(ht.corked=1,this.uncork()),ht.ending||rt(this,ht,j),this},Object.defineProperty(Q.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Ft(ct){return ct.ending&&ct.length===0&&ct.bufferedRequest===null&&!ct.finished&&!ct.writing}function $(ct,F){ct._final(function(j){F.pendingcb--,j&&S(ct,j),F.prefinished=!0,ct.emit("prefinish"),K(ct,F)})}function R(ct,F){!F.prefinished&&!F.finalCalled&&(typeof ct._final=="function"&&!F.destroyed?(F.pendingcb++,F.finalCalled=!0,Hn.nextTick($,ct,F)):(F.prefinished=!0,ct.emit("prefinish")))}function K(ct,F){var j=Ft(F);if(j&&(R(ct,F),F.pendingcb===0&&(F.finished=!0,ct.emit("finish"),F.autoDestroy))){var ht=ct._readableState;(!ht||ht.autoDestroy&&ht.endEmitted)&&ct.destroy()}return j}function rt(ct,F,j){F.ending=!0,K(ct,F),j&&(F.finished?Hn.nextTick(j):ct.once("finish",j)),F.ended=!0,ct.writable=!1}function pt(ct,F,j){var ht=ct.entry;for(ct.entry=null;ht;){var ot=ht.callback;F.pendingcb--,ot(j),ht=ht.next}F.corkedRequestsFree.next=ct}return Object.defineProperty(Q.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(F){this._writableState&&(this._writableState.destroyed=F)}}),Q.prototype.destroy=c.destroy,Q.prototype._undestroy=c.undestroy,Q.prototype._destroy=function(ct,F){F(ct)},Ky}var $y,JA;function Pf(){if(JA)return $y;JA=1;var r=Object.keys||function(h){var f=[];for(var p in h)f.push(p);return f};$y=l;var t=h6(),e=c6();Oc()(l,t);for(var n=r(e.prototype),i=0;i<n.length;i++){var s=n[i];l.prototype[s]||(l.prototype[s]=e.prototype[s])}function l(h){if(!(this instanceof l))return new l(h);t.call(this,h),e.call(this,h),this.allowHalfOpen=!0,h&&(h.readable===!1&&(this.readable=!1),h.writable===!1&&(this.writable=!1),h.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",o)))}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function o(){this._writableState.ended||Hn.nextTick(c,this)}function c(h){h.end()}return Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(f){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=f,this._writableState.destroyed=f)}}),$y}var Xy={},Rm={exports:{}},tS;function zP(){return tS||(tS=1,(function(r,t){var e=Yg(),n=e.Buffer;function i(l,o){for(var c in l)o[c]=l[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=e:(i(e,t),t.Buffer=s);function s(l,o,c){return n(l,o,c)}i(n,s),s.from=function(l,o,c){if(typeof l=="number")throw new TypeError("Argument must not be a number");return n(l,o,c)},s.alloc=function(l,o,c){if(typeof l!="number")throw new TypeError("Argument must be a number");var h=n(l);return o!==void 0?typeof c=="string"?h.fill(o,c):h.fill(o):h.fill(0),h},s.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n(l)},s.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(l)}})(Rm,Rm.exports)),Rm.exports}var eS;function Db(){if(eS)return Xy;eS=1;var r=zP().Buffer,t=r.isEncoding||function(v){switch(v=""+v,v&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function e(v){if(!v)return"utf8";for(var A;;)switch(v){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return v;default:if(A)return;v=(""+v).toLowerCase(),A=!0}}function n(v){var A=e(v);if(typeof A!="string"&&(r.isEncoding===t||!t(v)))throw new Error("Unknown encoding: "+v);return A||v}Xy.StringDecoder=i;function i(v){this.encoding=n(v);var A;switch(this.encoding){case"utf16le":this.text=p,this.end=y,A=4;break;case"utf8":this.fillLast=c,A=4;break;case"base64":this.text=m,this.end=w,A=3;break;default:this.write=b,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(A)}i.prototype.write=function(v){if(v.length===0)return"";var A,C;if(this.lastNeed){if(A=this.fillLast(v),A===void 0)return"";C=this.lastNeed,this.lastNeed=0}else C=0;return C<v.length?A?A+this.text(v,C):this.text(v,C):A||""},i.prototype.end=f,i.prototype.text=h,i.prototype.fillLast=function(v){if(this.lastNeed<=v.length)return v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,v.length),this.lastNeed-=v.length};function s(v){return v<=127?0:v>>5===6?2:v>>4===14?3:v>>3===30?4:v>>6===2?-1:-2}function l(v,A,C){var S=A.length-1;if(S<C)return 0;var O=s(A[S]);return O>=0?(O>0&&(v.lastNeed=O-1),O):--S<C||O===-2?0:(O=s(A[S]),O>=0?(O>0&&(v.lastNeed=O-2),O):--S<C||O===-2?0:(O=s(A[S]),O>=0?(O>0&&(O===2?O=0:v.lastNeed=O-3),O):0))}function o(v,A,C){if((A[0]&192)!==128)return v.lastNeed=0,"";if(v.lastNeed>1&&A.length>1){if((A[1]&192)!==128)return v.lastNeed=1,"";if(v.lastNeed>2&&A.length>2&&(A[2]&192)!==128)return v.lastNeed=2,""}}function c(v){var A=this.lastTotal-this.lastNeed,C=o(this,v);if(C!==void 0)return C;if(this.lastNeed<=v.length)return v.copy(this.lastChar,A,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,A,0,v.length),this.lastNeed-=v.length}function h(v,A){var C=l(this,v,A);if(!this.lastNeed)return v.toString("utf8",A);this.lastTotal=C;var S=v.length-(C-this.lastNeed);return v.copy(this.lastChar,0,S),v.toString("utf8",A,S)}function f(v){var A=v&&v.length?this.write(v):"";return this.lastNeed?A+"":A}function p(v,A){if((v.length-A)%2===0){var C=v.toString("utf16le",A);if(C){var S=C.charCodeAt(C.length-1);if(S>=55296&&S<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1],C.slice(0,-1)}return C}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=v[v.length-1],v.toString("utf16le",A,v.length-1)}function y(v){var A=v&&v.length?this.write(v):"";if(this.lastNeed){var C=this.lastTotal-this.lastNeed;return A+this.lastChar.toString("utf16le",0,C)}return A}function m(v,A){var C=(v.length-A)%3;return C===0?v.toString("base64",A):(this.lastNeed=3-C,this.lastTotal=3,C===1?this.lastChar[0]=v[v.length-1]:(this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1]),v.toString("base64",A,v.length-C))}function w(v){var A=v&&v.length?this.write(v):"";return this.lastNeed?A+this.lastChar.toString("base64",0,3-this.lastNeed):A}function b(v){return v.toString(this.encoding)}function _(v){return v&&v.length?this.write(v):""}return Xy}var Yy,nS;function j2(){if(nS)return Yy;nS=1;var r=Gf().codes.ERR_STREAM_PREMATURE_CLOSE;function t(s){var l=!1;return function(){if(!l){l=!0;for(var o=arguments.length,c=new Array(o),h=0;h<o;h++)c[h]=arguments[h];s.apply(this,c)}}}function e(){}function n(s){return s.setHeader&&typeof s.abort=="function"}function i(s,l,o){if(typeof l=="function")return i(s,null,l);l||(l={}),o=t(o||e);var c=l.readable||l.readable!==!1&&s.readable,h=l.writable||l.writable!==!1&&s.writable,f=function(){s.writable||y()},p=s._writableState&&s._writableState.finished,y=function(){h=!1,p=!0,c||o.call(s)},m=s._readableState&&s._readableState.endEmitted,w=function(){c=!1,m=!0,h||o.call(s)},b=function(C){o.call(s,C)},_=function(){var C;if(c&&!m)return(!s._readableState||!s._readableState.ended)&&(C=new r),o.call(s,C);if(h&&!p)return(!s._writableState||!s._writableState.ended)&&(C=new r),o.call(s,C)},v=function(){s.req.on("finish",y)};return n(s)?(s.on("complete",y),s.on("abort",_),s.req?v():s.on("request",v)):h&&!s._writableState&&(s.on("end",f),s.on("close",f)),s.on("end",w),s.on("finish",y),l.error!==!1&&s.on("error",b),s.on("close",_),function(){s.removeListener("complete",y),s.removeListener("abort",_),s.removeListener("request",v),s.req&&s.req.removeListener("finish",y),s.removeListener("end",f),s.removeListener("close",f),s.removeListener("finish",y),s.removeListener("end",w),s.removeListener("error",b),s.removeListener("close",_)}}return Yy=i,Yy}var Qy,rS;function qP(){if(rS)return Qy;rS=1;var r;function t(v,A,C){return A in v?Object.defineProperty(v,A,{value:C,enumerable:!0,configurable:!0,writable:!0}):v[A]=C,v}var e=j2(),n=Symbol("lastResolve"),i=Symbol("lastReject"),s=Symbol("error"),l=Symbol("ended"),o=Symbol("lastPromise"),c=Symbol("handlePromise"),h=Symbol("stream");function f(v,A){return{value:v,done:A}}function p(v){var A=v[n];if(A!==null){var C=v[h].read();C!==null&&(v[o]=null,v[n]=null,v[i]=null,A(f(C,!1)))}}function y(v){Hn.nextTick(p,v)}function m(v,A){return function(C,S){v.then(function(){if(A[l]){C(f(void 0,!0));return}A[c](C,S)},S)}}var w=Object.getPrototypeOf(function(){}),b=Object.setPrototypeOf((r={get stream(){return this[h]},next:function(){var A=this,C=this[s];if(C!==null)return Promise.reject(C);if(this[l])return Promise.resolve(f(void 0,!0));if(this[h].destroyed)return new Promise(function(H,Q){Hn.nextTick(function(){A[s]?Q(A[s]):H(f(void 0,!0))})});var S=this[o],O;if(S)O=new Promise(m(S,this));else{var q=this[h].read();if(q!==null)return Promise.resolve(f(q,!1));O=new Promise(this[c])}return this[o]=O,O}},t(r,Symbol.asyncIterator,function(){return this}),t(r,"return",function(){var A=this;return new Promise(function(C,S){A[h].destroy(null,function(O){if(O){S(O);return}C(f(void 0,!0))})})}),r),w),_=function(A){var C,S=Object.create(b,(C={},t(C,h,{value:A,writable:!0}),t(C,n,{value:null,writable:!0}),t(C,i,{value:null,writable:!0}),t(C,s,{value:null,writable:!0}),t(C,l,{value:A._readableState.endEmitted,writable:!0}),t(C,c,{value:function(q,H){var Q=S[h].read();Q?(S[o]=null,S[n]=null,S[i]=null,q(f(Q,!1))):(S[n]=q,S[i]=H)},writable:!0}),C));return S[o]=null,e(A,function(O){if(O&&O.code!=="ERR_STREAM_PREMATURE_CLOSE"){var q=S[i];q!==null&&(S[o]=null,S[n]=null,S[i]=null,q(O)),S[s]=O;return}var H=S[n];H!==null&&(S[o]=null,S[n]=null,S[i]=null,H(f(void 0,!0))),S[l]=!0}),A.on("readable",y.bind(null,S)),S};return Qy=_,Qy}var Zy,iS;function HP(){return iS||(iS=1,Zy=function(){throw new Error("Readable.from is not available in the browser")}),Zy}var Jy,sS;function h6(){if(sS)return Jy;sS=1,Jy=I;var r;I.ReadableState=Q,D2().EventEmitter;var t=function(ft,Mt){return ft.listeners(Mt).length},e=Q4(),n=Yg().Buffer,i=au.Uint8Array||function(){};function s(lt){return n.from(lt)}function l(lt){return n.isBuffer(lt)||lt instanceof i}var o=o6(),c;o&&o.debuglog?c=o.debuglog("stream"):c=function(){};var h=jP(),f=l6(),p=u6(),y=p.getHighWaterMark,m=Gf().codes,w=m.ERR_INVALID_ARG_TYPE,b=m.ERR_STREAM_PUSH_AFTER_EOF,_=m.ERR_METHOD_NOT_IMPLEMENTED,v=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,A,C,S;Oc()(I,e);var O=f.errorOrDestroy,q=["error","close","destroy","pause","resume"];function H(lt,ft,Mt){if(typeof lt.prependListener=="function")return lt.prependListener(ft,Mt);!lt._events||!lt._events[ft]?lt.on(ft,Mt):Array.isArray(lt._events[ft])?lt._events[ft].unshift(Mt):lt._events[ft]=[Mt,lt._events[ft]]}function Q(lt,ft,Mt){r=r||Pf(),lt=lt||{},typeof Mt!="boolean"&&(Mt=ft instanceof r),this.objectMode=!!lt.objectMode,Mt&&(this.objectMode=this.objectMode||!!lt.readableObjectMode),this.highWaterMark=y(this,lt,"readableHighWaterMark",Mt),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=lt.emitClose!==!1,this.autoDestroy=!!lt.autoDestroy,this.destroyed=!1,this.defaultEncoding=lt.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,lt.encoding&&(A||(A=Db().StringDecoder),this.decoder=new A(lt.encoding),this.encoding=lt.encoding)}function I(lt){if(r=r||Pf(),!(this instanceof I))return new I(lt);var ft=this instanceof r;this._readableState=new Q(lt,this,ft),this.readable=!0,lt&&(typeof lt.read=="function"&&(this._read=lt.read),typeof lt.destroy=="function"&&(this._destroy=lt.destroy)),e.call(this)}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(ft){this._readableState&&(this._readableState.destroyed=ft)}}),I.prototype.destroy=f.destroy,I.prototype._undestroy=f.undestroy,I.prototype._destroy=function(lt,ft){ft(lt)},I.prototype.push=function(lt,ft){var Mt=this._readableState,W;return Mt.objectMode?W=!0:typeof lt=="string"&&(ft=ft||Mt.defaultEncoding,ft!==Mt.encoding&&(lt=n.from(lt,ft),ft=""),W=!0),dt(this,lt,ft,!1,W)},I.prototype.unshift=function(lt){return dt(this,lt,null,!0,!1)};function dt(lt,ft,Mt,W,tt){c("readableAddChunk",ft);var X=lt._readableState;if(ft===null)X.reading=!1,it(lt,X);else{var P;if(tt||(P=B(X,ft)),P)O(lt,P);else if(X.objectMode||ft&&ft.length>0)if(typeof ft!="string"&&!X.objectMode&&Object.getPrototypeOf(ft)!==n.prototype&&(ft=s(ft)),W)X.endEmitted?O(lt,new v):nt(lt,X,ft,!0);else if(X.ended)O(lt,new b);else{if(X.destroyed)return!1;X.reading=!1,X.decoder&&!Mt?(ft=X.decoder.write(ft),X.objectMode||ft.length!==0?nt(lt,X,ft,!1):wt(lt,X)):nt(lt,X,ft,!1)}else W||(X.reading=!1,wt(lt,X))}return!X.ended&&(X.length<X.highWaterMark||X.length===0)}function nt(lt,ft,Mt,W){ft.flowing&&ft.length===0&&!ft.sync?(ft.awaitDrain=0,lt.emit("data",Mt)):(ft.length+=ft.objectMode?1:Mt.length,W?ft.buffer.unshift(Mt):ft.buffer.push(Mt),ft.needReadable&&st(lt)),wt(lt,ft)}function B(lt,ft){var Mt;return!l(ft)&&typeof ft!="string"&&ft!==void 0&&!lt.objectMode&&(Mt=new w("chunk",["string","Buffer","Uint8Array"],ft)),Mt}I.prototype.isPaused=function(){return this._readableState.flowing===!1},I.prototype.setEncoding=function(lt){A||(A=Db().StringDecoder);var ft=new A(lt);this._readableState.decoder=ft,this._readableState.encoding=this._readableState.decoder.encoding;for(var Mt=this._readableState.buffer.head,W="";Mt!==null;)W+=ft.write(Mt.data),Mt=Mt.next;return this._readableState.buffer.clear(),W!==""&&this._readableState.buffer.push(W),this._readableState.length=W.length,this};var Z=1073741824;function D(lt){return lt>=Z?lt=Z:(lt--,lt|=lt>>>1,lt|=lt>>>2,lt|=lt>>>4,lt|=lt>>>8,lt|=lt>>>16,lt++),lt}function mt(lt,ft){return lt<=0||ft.length===0&&ft.ended?0:ft.objectMode?1:lt!==lt?ft.flowing&&ft.length?ft.buffer.head.data.length:ft.length:(lt>ft.highWaterMark&&(ft.highWaterMark=D(lt)),lt<=ft.length?lt:ft.ended?ft.length:(ft.needReadable=!0,0))}I.prototype.read=function(lt){c("read",lt),lt=parseInt(lt,10);var ft=this._readableState,Mt=lt;if(lt!==0&&(ft.emittedReadable=!1),lt===0&&ft.needReadable&&((ft.highWaterMark!==0?ft.length>=ft.highWaterMark:ft.length>0)||ft.ended))return c("read: emitReadable",ft.length,ft.ended),ft.length===0&&ft.ended?j(this):st(this),null;if(lt=mt(lt,ft),lt===0&&ft.ended)return ft.length===0&&j(this),null;var W=ft.needReadable;c("need readable",W),(ft.length===0||ft.length-lt<ft.highWaterMark)&&(W=!0,c("length less than watermark",W)),ft.ended||ft.reading?(W=!1,c("reading or ended",W)):W&&(c("do read"),ft.reading=!0,ft.sync=!0,ft.length===0&&(ft.needReadable=!0),this._read(ft.highWaterMark),ft.sync=!1,ft.reading||(lt=mt(Mt,ft)));var tt;return lt>0?tt=F(lt,ft):tt=null,tt===null?(ft.needReadable=ft.length<=ft.highWaterMark,lt=0):(ft.length-=lt,ft.awaitDrain=0),ft.length===0&&(ft.ended||(ft.needReadable=!0),Mt!==lt&&ft.ended&&j(this)),tt!==null&&this.emit("data",tt),tt};function it(lt,ft){if(c("onEofChunk"),!ft.ended){if(ft.decoder){var Mt=ft.decoder.end();Mt&&Mt.length&&(ft.buffer.push(Mt),ft.length+=ft.objectMode?1:Mt.length)}ft.ended=!0,ft.sync?st(lt):(ft.needReadable=!1,ft.emittedReadable||(ft.emittedReadable=!0,vt(lt)))}}function st(lt){var ft=lt._readableState;c("emitReadable",ft.needReadable,ft.emittedReadable),ft.needReadable=!1,ft.emittedReadable||(c("emitReadable",ft.flowing),ft.emittedReadable=!0,Hn.nextTick(vt,lt))}function vt(lt){var ft=lt._readableState;c("emitReadable_",ft.destroyed,ft.length,ft.ended),!ft.destroyed&&(ft.length||ft.ended)&&(lt.emit("readable"),ft.emittedReadable=!1),ft.needReadable=!ft.flowing&&!ft.ended&&ft.length<=ft.highWaterMark,ct(lt)}function wt(lt,ft){ft.readingMore||(ft.readingMore=!0,Hn.nextTick(Ft,lt,ft))}function Ft(lt,ft){for(;!ft.reading&&!ft.ended&&(ft.length<ft.highWaterMark||ft.flowing&&ft.length===0);){var Mt=ft.length;if(c("maybeReadMore read 0"),lt.read(0),Mt===ft.length)break}ft.readingMore=!1}I.prototype._read=function(lt){O(this,new _("_read()"))},I.prototype.pipe=function(lt,ft){var Mt=this,W=this._readableState;switch(W.pipesCount){case 0:W.pipes=lt;break;case 1:W.pipes=[W.pipes,lt];break;default:W.pipes.push(lt);break}W.pipesCount+=1,c("pipe count=%d opts=%j",W.pipesCount,ft);var tt=(!ft||ft.end!==!1)&&lt!==Hn.stdout&&lt!==Hn.stderr,X=tt?k:fe;W.endEmitted?Hn.nextTick(X):Mt.once("end",X),lt.on("unpipe",P);function P(Ce,De){c("onunpipe"),Ce===Mt&&De&&De.hasUnpiped===!1&&(De.hasUnpiped=!0,kt())}function k(){c("onend"),lt.end()}var z=$(Mt);lt.on("drain",z);var _t=!1;function kt(){c("cleanup"),lt.removeListener("close",le),lt.removeListener("finish",re),lt.removeListener("drain",z),lt.removeListener("error",$t),lt.removeListener("unpipe",P),Mt.removeListener("end",k),Mt.removeListener("end",fe),Mt.removeListener("data",Ct),_t=!0,W.awaitDrain&&(!lt._writableState||lt._writableState.needDrain)&&z()}Mt.on("data",Ct);function Ct(Ce){c("ondata");var De=lt.write(Ce);c("dest.write",De),De===!1&&((W.pipesCount===1&&W.pipes===lt||W.pipesCount>1&&ot(W.pipes,lt)!==-1)&&!_t&&(c("false write response, pause",W.awaitDrain),W.awaitDrain++),Mt.pause())}function $t(Ce){c("onerror",Ce),fe(),lt.removeListener("error",$t),t(lt,"error")===0&&O(lt,Ce)}H(lt,"error",$t);function le(){lt.removeListener("finish",re),fe()}lt.once("close",le);function re(){c("onfinish"),lt.removeListener("close",le),fe()}lt.once("finish",re);function fe(){c("unpipe"),Mt.unpipe(lt)}return lt.emit("pipe",Mt),W.flowing||(c("pipe resume"),Mt.resume()),lt};function $(lt){return function(){var Mt=lt._readableState;c("pipeOnDrain",Mt.awaitDrain),Mt.awaitDrain&&Mt.awaitDrain--,Mt.awaitDrain===0&&t(lt,"data")&&(Mt.flowing=!0,ct(lt))}}I.prototype.unpipe=function(lt){var ft=this._readableState,Mt={hasUnpiped:!1};if(ft.pipesCount===0)return this;if(ft.pipesCount===1)return lt&&lt!==ft.pipes?this:(lt||(lt=ft.pipes),ft.pipes=null,ft.pipesCount=0,ft.flowing=!1,lt&&lt.emit("unpipe",this,Mt),this);if(!lt){var W=ft.pipes,tt=ft.pipesCount;ft.pipes=null,ft.pipesCount=0,ft.flowing=!1;for(var X=0;X<tt;X++)W[X].emit("unpipe",this,{hasUnpiped:!1});return this}var P=ot(ft.pipes,lt);return P===-1?this:(ft.pipes.splice(P,1),ft.pipesCount-=1,ft.pipesCount===1&&(ft.pipes=ft.pipes[0]),lt.emit("unpipe",this,Mt),this)},I.prototype.on=function(lt,ft){var Mt=e.prototype.on.call(this,lt,ft),W=this._readableState;return lt==="data"?(W.readableListening=this.listenerCount("readable")>0,W.flowing!==!1&&this.resume()):lt==="readable"&&!W.endEmitted&&!W.readableListening&&(W.readableListening=W.needReadable=!0,W.flowing=!1,W.emittedReadable=!1,c("on readable",W.length,W.reading),W.length?st(this):W.reading||Hn.nextTick(K,this)),Mt},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(lt,ft){var Mt=e.prototype.removeListener.call(this,lt,ft);return lt==="readable"&&Hn.nextTick(R,this),Mt},I.prototype.removeAllListeners=function(lt){var ft=e.prototype.removeAllListeners.apply(this,arguments);return(lt==="readable"||lt===void 0)&&Hn.nextTick(R,this),ft};function R(lt){var ft=lt._readableState;ft.readableListening=lt.listenerCount("readable")>0,ft.resumeScheduled&&!ft.paused?ft.flowing=!0:lt.listenerCount("data")>0&&lt.resume()}function K(lt){c("readable nexttick read 0"),lt.read(0)}I.prototype.resume=function(){var lt=this._readableState;return lt.flowing||(c("resume"),lt.flowing=!lt.readableListening,rt(this,lt)),lt.paused=!1,this};function rt(lt,ft){ft.resumeScheduled||(ft.resumeScheduled=!0,Hn.nextTick(pt,lt,ft))}function pt(lt,ft){c("resume",ft.reading),ft.reading||lt.read(0),ft.resumeScheduled=!1,lt.emit("resume"),ct(lt),ft.flowing&&!ft.reading&&lt.read(0)}I.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function ct(lt){var ft=lt._readableState;for(c("flow",ft.flowing);ft.flowing&&lt.read()!==null;);}I.prototype.wrap=function(lt){var ft=this,Mt=this._readableState,W=!1;lt.on("end",function(){if(c("wrapped end"),Mt.decoder&&!Mt.ended){var P=Mt.decoder.end();P&&P.length&&ft.push(P)}ft.push(null)}),lt.on("data",function(P){if(c("wrapped data"),Mt.decoder&&(P=Mt.decoder.write(P)),!(Mt.objectMode&&P==null)&&!(!Mt.objectMode&&(!P||!P.length))){var k=ft.push(P);k||(W=!0,lt.pause())}});for(var tt in lt)this[tt]===void 0&&typeof lt[tt]=="function"&&(this[tt]=(function(k){return function(){return lt[k].apply(lt,arguments)}})(tt));for(var X=0;X<q.length;X++)lt.on(q[X],this.emit.bind(this,q[X]));return this._read=function(P){c("wrapped _read",P),W&&(W=!1,lt.resume())},this},typeof Symbol=="function"&&(I.prototype[Symbol.asyncIterator]=function(){return C===void 0&&(C=qP()),C(this)}),Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(I.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(I.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ft){this._readableState&&(this._readableState.flowing=ft)}}),I._fromList=F,Object.defineProperty(I.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function F(lt,ft){if(ft.length===0)return null;var Mt;return ft.objectMode?Mt=ft.buffer.shift():!lt||lt>=ft.length?(ft.decoder?Mt=ft.buffer.join(""):ft.buffer.length===1?Mt=ft.buffer.first():Mt=ft.buffer.concat(ft.length),ft.buffer.clear()):Mt=ft.buffer.consume(lt,ft.decoder),Mt}function j(lt){var ft=lt._readableState;c("endReadable",ft.endEmitted),ft.endEmitted||(ft.ended=!0,Hn.nextTick(ht,ft,lt))}function ht(lt,ft){if(c("endReadableNT",lt.endEmitted,lt.length),!lt.endEmitted&&lt.length===0&&(lt.endEmitted=!0,ft.readable=!1,ft.emit("end"),lt.autoDestroy)){var Mt=ft._writableState;(!Mt||Mt.autoDestroy&&Mt.finished)&&ft.destroy()}}typeof Symbol=="function"&&(I.from=function(lt,ft){return S===void 0&&(S=HP()),S(I,lt,ft)});function ot(lt,ft){for(var Mt=0,W=lt.length;Mt<W;Mt++)if(lt[Mt]===ft)return Mt;return-1}return Jy}var tv,aS;function f6(){if(aS)return tv;aS=1,tv=o;var r=Gf().codes,t=r.ERR_METHOD_NOT_IMPLEMENTED,e=r.ERR_MULTIPLE_CALLBACK,n=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=r.ERR_TRANSFORM_WITH_LENGTH_0,s=Pf();Oc()(o,s);function l(f,p){var y=this._transformState;y.transforming=!1;var m=y.writecb;if(m===null)return this.emit("error",new e);y.writechunk=null,y.writecb=null,p!=null&&this.push(p),m(f);var w=this._readableState;w.reading=!1,(w.needReadable||w.length<w.highWaterMark)&&this._read(w.highWaterMark)}function o(f){if(!(this instanceof o))return new o(f);s.call(this,f),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",c)}function c(){var f=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(p,y){h(f,p,y)}):h(this,null,null)}o.prototype.push=function(f,p){return this._transformState.needTransform=!1,s.prototype.push.call(this,f,p)},o.prototype._transform=function(f,p,y){y(new t("_transform()"))},o.prototype._write=function(f,p,y){var m=this._transformState;if(m.writecb=y,m.writechunk=f,m.writeencoding=p,!m.transforming){var w=this._readableState;(m.needTransform||w.needReadable||w.length<w.highWaterMark)&&this._read(w.highWaterMark)}},o.prototype._read=function(f){var p=this._transformState;p.writechunk!==null&&!p.transforming?(p.transforming=!0,this._transform(p.writechunk,p.writeencoding,p.afterTransform)):p.needTransform=!0},o.prototype._destroy=function(f,p){s.prototype._destroy.call(this,f,function(y){p(y)})};function h(f,p,y){if(p)return f.emit("error",p);if(y!=null&&f.push(y),f._writableState.length)throw new i;if(f._transformState.transforming)throw new n;return f.push(null)}return tv}var ev,oS;function GP(){if(oS)return ev;oS=1,ev=t;var r=f6();Oc()(t,r);function t(e){if(!(this instanceof t))return new t(e);r.call(this,e)}return t.prototype._transform=function(e,n,i){i(null,e)},ev}var nv,lS;function VP(){if(lS)return nv;lS=1;var r;function t(y){var m=!1;return function(){m||(m=!0,y.apply(void 0,arguments))}}var e=Gf().codes,n=e.ERR_MISSING_ARGS,i=e.ERR_STREAM_DESTROYED;function s(y){if(y)throw y}function l(y){return y.setHeader&&typeof y.abort=="function"}function o(y,m,w,b){b=t(b);var _=!1;y.on("close",function(){_=!0}),r===void 0&&(r=j2()),r(y,{readable:m,writable:w},function(A){if(A)return b(A);_=!0,b()});var v=!1;return function(A){if(!_&&!v){if(v=!0,l(y))return y.abort();if(typeof y.destroy=="function")return y.destroy();b(A||new i("pipe"))}}}function c(y){y()}function h(y,m){return y.pipe(m)}function f(y){return!y.length||typeof y[y.length-1]!="function"?s:y.pop()}function p(){for(var y=arguments.length,m=new Array(y),w=0;w<y;w++)m[w]=arguments[w];var b=f(m);if(Array.isArray(m[0])&&(m=m[0]),m.length<2)throw new n("streams");var _,v=m.map(function(A,C){var S=C<m.length-1,O=C>0;return o(A,S,O,function(q){_||(_=q),q&&v.forEach(c),!S&&(v.forEach(c),b(_))})});return m.reduce(h)}return nv=p,nv}var rv,uS;function U2(){if(uS)return rv;uS=1,rv=e;var r=D2().EventEmitter,t=Oc();t(e,r),e.Readable=h6(),e.Writable=c6(),e.Duplex=Pf(),e.Transform=f6(),e.PassThrough=GP(),e.finished=j2(),e.pipeline=VP(),e.Stream=e;function e(){r.call(this)}return e.prototype.pipe=function(n,i){var s=this;function l(m){n.writable&&n.write(m)===!1&&s.pause&&s.pause()}s.on("data",l);function o(){s.readable&&s.resume&&s.resume()}n.on("drain",o),!n._isStdio&&(!i||i.end!==!1)&&(s.on("end",h),s.on("close",f));var c=!1;function h(){c||(c=!0,n.end())}function f(){c||(c=!0,typeof n.destroy=="function"&&n.destroy())}function p(m){if(y(),r.listenerCount(this,"error")===0)throw m}s.on("error",p),n.on("error",p);function y(){s.removeListener("data",l),n.removeListener("drain",o),s.removeListener("end",h),s.removeListener("close",f),s.removeListener("error",p),n.removeListener("error",p),s.removeListener("end",y),s.removeListener("close",y),n.removeListener("close",y)}return s.on("end",y),s.on("close",y),n.on("close",y),n.emit("pipe",s),n},rv}var cS;function WP(){return cS||(cS=1,(function(r){(function(t){t.parser=function(F,j){return new n(F,j)},t.SAXParser=n,t.SAXStream=f,t.createStream=h,t.MAX_BUFFER_LENGTH=64*1024;var e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(F,j){if(!(this instanceof n))return new n(F,j);var ht=this;s(ht),ht.q=ht.c="",ht.bufferCheckPosition=t.MAX_BUFFER_LENGTH,ht.opt=j||{},ht.opt.lowercase=ht.opt.lowercase||ht.opt.lowercasetags,ht.looseCase=ht.opt.lowercase?"toLowerCase":"toUpperCase",ht.tags=[],ht.closed=ht.closedRoot=ht.sawRoot=!1,ht.tag=ht.error=null,ht.strict=!!F,ht.noscript=!!(F||ht.opt.noscript),ht.state=I.BEGIN,ht.strictEntities=ht.opt.strictEntities,ht.ENTITIES=ht.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),ht.attribList=[],ht.opt.xmlns&&(ht.ns=Object.create(b)),ht.trackPosition=ht.opt.position!==!1,ht.trackPosition&&(ht.position=ht.line=ht.column=0),nt(ht,"onready")}Object.create||(Object.create=function(F){function j(){}j.prototype=F;var ht=new j;return ht}),Object.keys||(Object.keys=function(F){var j=[];for(var ht in F)F.hasOwnProperty(ht)&&j.push(ht);return j});function i(F){for(var j=Math.max(t.MAX_BUFFER_LENGTH,10),ht=0,ot=0,lt=e.length;ot<lt;ot++){var ft=F[e[ot]].length;if(ft>j)switch(e[ot]){case"textNode":Z(F);break;case"cdata":B(F,"oncdata",F.cdata),F.cdata="";break;case"script":B(F,"onscript",F.script),F.script="";break;default:mt(F,"Max buffer length exceeded: "+e[ot])}ht=Math.max(ht,ft)}var Mt=t.MAX_BUFFER_LENGTH-ht;F.bufferCheckPosition=Mt+F.position}function s(F){for(var j=0,ht=e.length;j<ht;j++)F[e[j]]=""}function l(F){Z(F),F.cdata!==""&&(B(F,"oncdata",F.cdata),F.cdata=""),F.script!==""&&(B(F,"onscript",F.script),F.script="")}n.prototype={end:function(){it(this)},write:ct,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){l(this)}};var o;try{o=U2().Stream}catch{o=function(){}}var c=t.EVENTS.filter(function(F){return F!=="error"&&F!=="end"});function h(F,j){return new f(F,j)}function f(F,j){if(!(this instanceof f))return new f(F,j);o.apply(this),this._parser=new n(F,j),this.writable=!0,this.readable=!0;var ht=this;this._parser.onend=function(){ht.emit("end")},this._parser.onerror=function(ot){ht.emit("error",ot),ht._parser.error=null},this._decoder=null,c.forEach(function(ot){Object.defineProperty(ht,"on"+ot,{get:function(){return ht._parser["on"+ot]},set:function(lt){if(!lt)return ht.removeAllListeners(ot),ht._parser["on"+ot]=lt,lt;ht.on(ot,lt)},enumerable:!0,configurable:!1})})}f.prototype=Object.create(o.prototype,{constructor:{value:f}}),f.prototype.write=function(F){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(F)){if(!this._decoder){var j=Db().StringDecoder;this._decoder=new j("utf8")}F=this._decoder.write(F)}return this._parser.write(F.toString()),this.emit("data",F),!0},f.prototype.end=function(F){return F&&F.length&&this.write(F),this._parser.end(),!0},f.prototype.on=function(F,j){var ht=this;return!ht._parser["on"+F]&&c.indexOf(F)!==-1&&(ht._parser["on"+F]=function(){var ot=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);ot.splice(0,0,F),ht.emit.apply(ht,ot)}),o.prototype.on.call(ht,F,j)};var p="[CDATA[",y="DOCTYPE",m="http://www.w3.org/XML/1998/namespace",w="http://www.w3.org/2000/xmlns/",b={xml:m,xmlns:w},_=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,A=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,C=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function S(F){return F===" "||F===`
`||F==="\r"||F==="	"}function O(F){return F==='"'||F==="'"}function q(F){return F===">"||S(F)}function H(F,j){return F.test(j)}function Q(F,j){return!H(F,j)}var I=0;t.STATE={BEGIN:I++,BEGIN_WHITESPACE:I++,TEXT:I++,TEXT_ENTITY:I++,OPEN_WAKA:I++,SGML_DECL:I++,SGML_DECL_QUOTED:I++,DOCTYPE:I++,DOCTYPE_QUOTED:I++,DOCTYPE_DTD:I++,DOCTYPE_DTD_QUOTED:I++,COMMENT_STARTING:I++,COMMENT:I++,COMMENT_ENDING:I++,COMMENT_ENDED:I++,CDATA:I++,CDATA_ENDING:I++,CDATA_ENDING_2:I++,PROC_INST:I++,PROC_INST_BODY:I++,PROC_INST_ENDING:I++,OPEN_TAG:I++,OPEN_TAG_SLASH:I++,ATTRIB:I++,ATTRIB_NAME:I++,ATTRIB_NAME_SAW_WHITE:I++,ATTRIB_VALUE:I++,ATTRIB_VALUE_QUOTED:I++,ATTRIB_VALUE_CLOSED:I++,ATTRIB_VALUE_UNQUOTED:I++,ATTRIB_VALUE_ENTITY_Q:I++,ATTRIB_VALUE_ENTITY_U:I++,CLOSE_TAG:I++,CLOSE_TAG_SAW_WHITE:I++,SCRIPT:I++,SCRIPT_ENDING:I++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(F){var j=t.ENTITIES[F],ht=typeof j=="number"?String.fromCharCode(j):j;t.ENTITIES[F]=ht});for(var dt in t.STATE)t.STATE[t.STATE[dt]]=dt;I=t.STATE;function nt(F,j,ht){F[j]&&F[j](ht)}function B(F,j,ht){F.textNode&&Z(F),nt(F,j,ht)}function Z(F){F.textNode=D(F.opt,F.textNode),F.textNode&&nt(F,"ontext",F.textNode),F.textNode=""}function D(F,j){return F.trim&&(j=j.trim()),F.normalize&&(j=j.replace(/\s+/g," ")),j}function mt(F,j){return Z(F),F.trackPosition&&(j+=`
Line: `+F.line+`
Column: `+F.column+`
Char: `+F.c),j=new Error(j),F.error=j,nt(F,"onerror",j),F}function it(F){return F.sawRoot&&!F.closedRoot&&st(F,"Unclosed root tag"),F.state!==I.BEGIN&&F.state!==I.BEGIN_WHITESPACE&&F.state!==I.TEXT&&mt(F,"Unexpected end"),Z(F),F.c="",F.closed=!0,nt(F,"onend"),n.call(F,F.strict,F.opt),F}function st(F,j){if(typeof F!="object"||!(F instanceof n))throw new Error("bad call to strictFail");F.strict&&mt(F,j)}function vt(F){F.strict||(F.tagName=F.tagName[F.looseCase]());var j=F.tags[F.tags.length-1]||F,ht=F.tag={name:F.tagName,attributes:{}};F.opt.xmlns&&(ht.ns=j.ns),F.attribList.length=0,B(F,"onopentagstart",ht)}function wt(F,j){var ht=F.indexOf(":"),ot=ht<0?["",F]:F.split(":"),lt=ot[0],ft=ot[1];return j&&F==="xmlns"&&(lt="xmlns",ft=""),{prefix:lt,local:ft}}function Ft(F){if(F.strict||(F.attribName=F.attribName[F.looseCase]()),F.attribList.indexOf(F.attribName)!==-1||F.tag.attributes.hasOwnProperty(F.attribName)){F.attribName=F.attribValue="";return}if(F.opt.xmlns){var j=wt(F.attribName,!0),ht=j.prefix,ot=j.local;if(ht==="xmlns")if(ot==="xml"&&F.attribValue!==m)st(F,"xml: prefix must be bound to "+m+`
Actual: `+F.attribValue);else if(ot==="xmlns"&&F.attribValue!==w)st(F,"xmlns: prefix must be bound to "+w+`
Actual: `+F.attribValue);else{var lt=F.tag,ft=F.tags[F.tags.length-1]||F;lt.ns===ft.ns&&(lt.ns=Object.create(ft.ns)),lt.ns[ot]=F.attribValue}F.attribList.push([F.attribName,F.attribValue])}else F.tag.attributes[F.attribName]=F.attribValue,B(F,"onattribute",{name:F.attribName,value:F.attribValue});F.attribName=F.attribValue=""}function $(F,j){if(F.opt.xmlns){var ht=F.tag,ot=wt(F.tagName);ht.prefix=ot.prefix,ht.local=ot.local,ht.uri=ht.ns[ot.prefix]||"",ht.prefix&&!ht.uri&&(st(F,"Unbound namespace prefix: "+JSON.stringify(F.tagName)),ht.uri=ot.prefix);var lt=F.tags[F.tags.length-1]||F;ht.ns&&lt.ns!==ht.ns&&Object.keys(ht.ns).forEach(function(Ct){B(F,"onopennamespace",{prefix:Ct,uri:ht.ns[Ct]})});for(var ft=0,Mt=F.attribList.length;ft<Mt;ft++){var W=F.attribList[ft],tt=W[0],X=W[1],P=wt(tt,!0),k=P.prefix,z=P.local,_t=k===""?"":ht.ns[k]||"",kt={name:tt,value:X,prefix:k,local:z,uri:_t};k&&k!=="xmlns"&&!_t&&(st(F,"Unbound namespace prefix: "+JSON.stringify(k)),kt.uri=k),F.tag.attributes[tt]=kt,B(F,"onattribute",kt)}F.attribList.length=0}F.tag.isSelfClosing=!!j,F.sawRoot=!0,F.tags.push(F.tag),B(F,"onopentag",F.tag),j||(!F.noscript&&F.tagName.toLowerCase()==="script"?F.state=I.SCRIPT:F.state=I.TEXT,F.tag=null,F.tagName=""),F.attribName=F.attribValue="",F.attribList.length=0}function R(F){if(!F.tagName){st(F,"Weird empty close tag."),F.textNode+="</>",F.state=I.TEXT;return}if(F.script){if(F.tagName!=="script"){F.script+="</"+F.tagName+">",F.tagName="",F.state=I.SCRIPT;return}B(F,"onscript",F.script),F.script=""}var j=F.tags.length,ht=F.tagName;F.strict||(ht=ht[F.looseCase]());for(var ot=ht;j--;){var lt=F.tags[j];if(lt.name!==ot)st(F,"Unexpected close tag");else break}if(j<0){st(F,"Unmatched closing tag: "+F.tagName),F.textNode+="</"+F.tagName+">",F.state=I.TEXT;return}F.tagName=ht;for(var ft=F.tags.length;ft-- >j;){var Mt=F.tag=F.tags.pop();F.tagName=F.tag.name,B(F,"onclosetag",F.tagName);var W={};for(var tt in Mt.ns)W[tt]=Mt.ns[tt];var X=F.tags[F.tags.length-1]||F;F.opt.xmlns&&Mt.ns!==X.ns&&Object.keys(Mt.ns).forEach(function(P){var k=Mt.ns[P];B(F,"onclosenamespace",{prefix:P,uri:k})})}j===0&&(F.closedRoot=!0),F.tagName=F.attribValue=F.attribName="",F.attribList.length=0,F.state=I.TEXT}function K(F){var j=F.entity,ht=j.toLowerCase(),ot,lt="";return F.ENTITIES[j]?F.ENTITIES[j]:F.ENTITIES[ht]?F.ENTITIES[ht]:(j=ht,j.charAt(0)==="#"&&(j.charAt(1)==="x"?(j=j.slice(2),ot=parseInt(j,16),lt=ot.toString(16)):(j=j.slice(1),ot=parseInt(j,10),lt=ot.toString(10))),j=j.replace(/^0+/,""),isNaN(ot)||lt.toLowerCase()!==j?(st(F,"Invalid character entity"),"&"+F.entity+";"):String.fromCodePoint(ot))}function rt(F,j){j==="<"?(F.state=I.OPEN_WAKA,F.startTagPosition=F.position):S(j)||(st(F,"Non-whitespace before first tag."),F.textNode=j,F.state=I.TEXT)}function pt(F,j){var ht="";return j<F.length&&(ht=F.charAt(j)),ht}function ct(F){var j=this;if(this.error)throw this.error;if(j.closed)return mt(j,"Cannot write after close. Assign an onready handler.");if(F===null)return it(j);typeof F=="object"&&(F=F.toString());for(var ht=0,ot="";ot=pt(F,ht++),j.c=ot,!!ot;)switch(j.trackPosition&&(j.position++,ot===`
`?(j.line++,j.column=0):j.column++),j.state){case I.BEGIN:if(j.state=I.BEGIN_WHITESPACE,ot==="\uFEFF")continue;rt(j,ot);continue;case I.BEGIN_WHITESPACE:rt(j,ot);continue;case I.TEXT:if(j.sawRoot&&!j.closedRoot){for(var lt=ht-1;ot&&ot!=="<"&&ot!=="&";)ot=pt(F,ht++),ot&&j.trackPosition&&(j.position++,ot===`
`?(j.line++,j.column=0):j.column++);j.textNode+=F.substring(lt,ht-1)}ot==="<"&&!(j.sawRoot&&j.closedRoot&&!j.strict)?(j.state=I.OPEN_WAKA,j.startTagPosition=j.position):(!S(ot)&&(!j.sawRoot||j.closedRoot)&&st(j,"Text data outside of root node."),ot==="&"?j.state=I.TEXT_ENTITY:j.textNode+=ot);continue;case I.SCRIPT:ot==="<"?j.state=I.SCRIPT_ENDING:j.script+=ot;continue;case I.SCRIPT_ENDING:ot==="/"?j.state=I.CLOSE_TAG:(j.script+="<"+ot,j.state=I.SCRIPT);continue;case I.OPEN_WAKA:if(ot==="!")j.state=I.SGML_DECL,j.sgmlDecl="";else if(!S(ot))if(H(_,ot))j.state=I.OPEN_TAG,j.tagName=ot;else if(ot==="/")j.state=I.CLOSE_TAG,j.tagName="";else if(ot==="?")j.state=I.PROC_INST,j.procInstName=j.procInstBody="";else{if(st(j,"Unencoded <"),j.startTagPosition+1<j.position){var ft=j.position-j.startTagPosition;ot=new Array(ft).join(" ")+ot}j.textNode+="<"+ot,j.state=I.TEXT}continue;case I.SGML_DECL:(j.sgmlDecl+ot).toUpperCase()===p?(B(j,"onopencdata"),j.state=I.CDATA,j.sgmlDecl="",j.cdata=""):j.sgmlDecl+ot==="--"?(j.state=I.COMMENT,j.comment="",j.sgmlDecl=""):(j.sgmlDecl+ot).toUpperCase()===y?(j.state=I.DOCTYPE,(j.doctype||j.sawRoot)&&st(j,"Inappropriately located doctype declaration"),j.doctype="",j.sgmlDecl=""):ot===">"?(B(j,"onsgmldeclaration",j.sgmlDecl),j.sgmlDecl="",j.state=I.TEXT):(O(ot)&&(j.state=I.SGML_DECL_QUOTED),j.sgmlDecl+=ot);continue;case I.SGML_DECL_QUOTED:ot===j.q&&(j.state=I.SGML_DECL,j.q=""),j.sgmlDecl+=ot;continue;case I.DOCTYPE:ot===">"?(j.state=I.TEXT,B(j,"ondoctype",j.doctype),j.doctype=!0):(j.doctype+=ot,ot==="["?j.state=I.DOCTYPE_DTD:O(ot)&&(j.state=I.DOCTYPE_QUOTED,j.q=ot));continue;case I.DOCTYPE_QUOTED:j.doctype+=ot,ot===j.q&&(j.q="",j.state=I.DOCTYPE);continue;case I.DOCTYPE_DTD:j.doctype+=ot,ot==="]"?j.state=I.DOCTYPE:O(ot)&&(j.state=I.DOCTYPE_DTD_QUOTED,j.q=ot);continue;case I.DOCTYPE_DTD_QUOTED:j.doctype+=ot,ot===j.q&&(j.state=I.DOCTYPE_DTD,j.q="");continue;case I.COMMENT:ot==="-"?j.state=I.COMMENT_ENDING:j.comment+=ot;continue;case I.COMMENT_ENDING:ot==="-"?(j.state=I.COMMENT_ENDED,j.comment=D(j.opt,j.comment),j.comment&&B(j,"oncomment",j.comment),j.comment=""):(j.comment+="-"+ot,j.state=I.COMMENT);continue;case I.COMMENT_ENDED:ot!==">"?(st(j,"Malformed comment"),j.comment+="--"+ot,j.state=I.COMMENT):j.state=I.TEXT;continue;case I.CDATA:ot==="]"?j.state=I.CDATA_ENDING:j.cdata+=ot;continue;case I.CDATA_ENDING:ot==="]"?j.state=I.CDATA_ENDING_2:(j.cdata+="]"+ot,j.state=I.CDATA);continue;case I.CDATA_ENDING_2:ot===">"?(j.cdata&&B(j,"oncdata",j.cdata),B(j,"onclosecdata"),j.cdata="",j.state=I.TEXT):ot==="]"?j.cdata+="]":(j.cdata+="]]"+ot,j.state=I.CDATA);continue;case I.PROC_INST:ot==="?"?j.state=I.PROC_INST_ENDING:S(ot)?j.state=I.PROC_INST_BODY:j.procInstName+=ot;continue;case I.PROC_INST_BODY:if(!j.procInstBody&&S(ot))continue;ot==="?"?j.state=I.PROC_INST_ENDING:j.procInstBody+=ot;continue;case I.PROC_INST_ENDING:ot===">"?(B(j,"onprocessinginstruction",{name:j.procInstName,body:j.procInstBody}),j.procInstName=j.procInstBody="",j.state=I.TEXT):(j.procInstBody+="?"+ot,j.state=I.PROC_INST_BODY);continue;case I.OPEN_TAG:H(v,ot)?j.tagName+=ot:(vt(j),ot===">"?$(j):ot==="/"?j.state=I.OPEN_TAG_SLASH:(S(ot)||st(j,"Invalid character in tag name"),j.state=I.ATTRIB));continue;case I.OPEN_TAG_SLASH:ot===">"?($(j,!0),R(j)):(st(j,"Forward-slash in opening tag not followed by >"),j.state=I.ATTRIB);continue;case I.ATTRIB:if(S(ot))continue;ot===">"?$(j):ot==="/"?j.state=I.OPEN_TAG_SLASH:H(_,ot)?(j.attribName=ot,j.attribValue="",j.state=I.ATTRIB_NAME):st(j,"Invalid attribute name");continue;case I.ATTRIB_NAME:ot==="="?j.state=I.ATTRIB_VALUE:ot===">"?(st(j,"Attribute without value"),j.attribValue=j.attribName,Ft(j),$(j)):S(ot)?j.state=I.ATTRIB_NAME_SAW_WHITE:H(v,ot)?j.attribName+=ot:st(j,"Invalid attribute name");continue;case I.ATTRIB_NAME_SAW_WHITE:if(ot==="=")j.state=I.ATTRIB_VALUE;else{if(S(ot))continue;st(j,"Attribute without value"),j.tag.attributes[j.attribName]="",j.attribValue="",B(j,"onattribute",{name:j.attribName,value:""}),j.attribName="",ot===">"?$(j):H(_,ot)?(j.attribName=ot,j.state=I.ATTRIB_NAME):(st(j,"Invalid attribute name"),j.state=I.ATTRIB)}continue;case I.ATTRIB_VALUE:if(S(ot))continue;O(ot)?(j.q=ot,j.state=I.ATTRIB_VALUE_QUOTED):(st(j,"Unquoted attribute value"),j.state=I.ATTRIB_VALUE_UNQUOTED,j.attribValue=ot);continue;case I.ATTRIB_VALUE_QUOTED:if(ot!==j.q){ot==="&"?j.state=I.ATTRIB_VALUE_ENTITY_Q:j.attribValue+=ot;continue}Ft(j),j.q="",j.state=I.ATTRIB_VALUE_CLOSED;continue;case I.ATTRIB_VALUE_CLOSED:S(ot)?j.state=I.ATTRIB:ot===">"?$(j):ot==="/"?j.state=I.OPEN_TAG_SLASH:H(_,ot)?(st(j,"No whitespace between attributes"),j.attribName=ot,j.attribValue="",j.state=I.ATTRIB_NAME):st(j,"Invalid attribute name");continue;case I.ATTRIB_VALUE_UNQUOTED:if(!q(ot)){ot==="&"?j.state=I.ATTRIB_VALUE_ENTITY_U:j.attribValue+=ot;continue}Ft(j),ot===">"?$(j):j.state=I.ATTRIB;continue;case I.CLOSE_TAG:if(j.tagName)ot===">"?R(j):H(v,ot)?j.tagName+=ot:j.script?(j.script+="</"+j.tagName,j.tagName="",j.state=I.SCRIPT):(S(ot)||st(j,"Invalid tagname in closing tag"),j.state=I.CLOSE_TAG_SAW_WHITE);else{if(S(ot))continue;Q(_,ot)?j.script?(j.script+="</"+ot,j.state=I.SCRIPT):st(j,"Invalid tagname in closing tag."):j.tagName=ot}continue;case I.CLOSE_TAG_SAW_WHITE:if(S(ot))continue;ot===">"?R(j):st(j,"Invalid characters in closing tag");continue;case I.TEXT_ENTITY:case I.ATTRIB_VALUE_ENTITY_Q:case I.ATTRIB_VALUE_ENTITY_U:var Mt,W;switch(j.state){case I.TEXT_ENTITY:Mt=I.TEXT,W="textNode";break;case I.ATTRIB_VALUE_ENTITY_Q:Mt=I.ATTRIB_VALUE_QUOTED,W="attribValue";break;case I.ATTRIB_VALUE_ENTITY_U:Mt=I.ATTRIB_VALUE_UNQUOTED,W="attribValue";break}ot===";"?(j[W]+=K(j),j.entity="",j.state=Mt):H(j.entity.length?C:A,ot)?j.entity+=ot:(st(j,"Invalid character in entity name"),j[W]+="&"+j.entity+ot,j.entity="",j.state=Mt);continue;default:throw new Error(j,"Unknown state: "+j.state)}return j.position>=j.bufferCheckPosition&&i(j),j}String.fromCodePoint||(function(){var F=String.fromCharCode,j=Math.floor,ht=function(){var ot=16384,lt=[],ft,Mt,W=-1,tt=arguments.length;if(!tt)return"";for(var X="";++W<tt;){var P=Number(arguments[W]);if(!isFinite(P)||P<0||P>1114111||j(P)!==P)throw RangeError("Invalid code point: "+P);P<=65535?lt.push(P):(P-=65536,ft=(P>>10)+55296,Mt=P%1024+56320,lt.push(ft,Mt)),(W+1===tt||lt.length>ot)&&(X+=F.apply(null,lt),lt.length=0)}return X};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:ht,configurable:!0,writable:!0}):String.fromCodePoint=ht})()})(r)})(U1)),U1}var iv,hS;function z2(){return hS||(hS=1,iv={isArray:function(r){return Array.isArray?Array.isArray(r):Object.prototype.toString.call(r)==="[object Array]"}}),iv}var sv,fS;function q2(){if(fS)return sv;fS=1;var r=z2().isArray;return sv={copyOptions:function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n},ensureFlagExists:function(t,e){(!(t in e)||typeof e[t]!="boolean")&&(e[t]=!1)},ensureSpacesExists:function(t){(!("spaces"in t)||typeof t.spaces!="number"&&typeof t.spaces!="string")&&(t.spaces=0)},ensureAlwaysArrayExists:function(t){(!("alwaysArray"in t)||typeof t.alwaysArray!="boolean"&&!r(t.alwaysArray))&&(t.alwaysArray=!1)},ensureKeyExists:function(t,e){(!(t+"Key"in e)||typeof e[t+"Key"]!="string")&&(e[t+"Key"]=e.compact?"_"+t:t)},checkFnExists:function(t,e){return t+"Fn"in e}},sv}var av,dS;function d6(){if(dS)return av;dS=1;var r=WP(),t=q2(),e=z2().isArray,n,i;function s(v){return n=t.copyOptions(v),t.ensureFlagExists("ignoreDeclaration",n),t.ensureFlagExists("ignoreInstruction",n),t.ensureFlagExists("ignoreAttributes",n),t.ensureFlagExists("ignoreText",n),t.ensureFlagExists("ignoreComment",n),t.ensureFlagExists("ignoreCdata",n),t.ensureFlagExists("ignoreDoctype",n),t.ensureFlagExists("compact",n),t.ensureFlagExists("alwaysChildren",n),t.ensureFlagExists("addParent",n),t.ensureFlagExists("trim",n),t.ensureFlagExists("nativeType",n),t.ensureFlagExists("nativeTypeAttributes",n),t.ensureFlagExists("sanitize",n),t.ensureFlagExists("instructionHasAttributes",n),t.ensureFlagExists("captureSpacesBetweenElements",n),t.ensureAlwaysArrayExists(n),t.ensureKeyExists("declaration",n),t.ensureKeyExists("instruction",n),t.ensureKeyExists("attributes",n),t.ensureKeyExists("text",n),t.ensureKeyExists("comment",n),t.ensureKeyExists("cdata",n),t.ensureKeyExists("doctype",n),t.ensureKeyExists("type",n),t.ensureKeyExists("name",n),t.ensureKeyExists("elements",n),t.ensureKeyExists("parent",n),t.checkFnExists("doctype",n),t.checkFnExists("instruction",n),t.checkFnExists("cdata",n),t.checkFnExists("comment",n),t.checkFnExists("text",n),t.checkFnExists("instructionName",n),t.checkFnExists("elementName",n),t.checkFnExists("attributeName",n),t.checkFnExists("attributeValue",n),t.checkFnExists("attributes",n),n}function l(v){var A=Number(v);if(!isNaN(A))return A;var C=v.toLowerCase();return C==="true"?!0:C==="false"?!1:v}function o(v,A){var C;if(n.compact){if(!i[n[v+"Key"]]&&(e(n.alwaysArray)?n.alwaysArray.indexOf(n[v+"Key"])!==-1:n.alwaysArray)&&(i[n[v+"Key"]]=[]),i[n[v+"Key"]]&&!e(i[n[v+"Key"]])&&(i[n[v+"Key"]]=[i[n[v+"Key"]]]),v+"Fn"in n&&typeof A=="string"&&(A=n[v+"Fn"](A,i)),v==="instruction"&&("instructionFn"in n||"instructionNameFn"in n)){for(C in A)if(A.hasOwnProperty(C))if("instructionFn"in n)A[C]=n.instructionFn(A[C],C,i);else{var S=A[C];delete A[C],A[n.instructionNameFn(C,S,i)]=S}}e(i[n[v+"Key"]])?i[n[v+"Key"]].push(A):i[n[v+"Key"]]=A}else{i[n.elementsKey]||(i[n.elementsKey]=[]);var O={};if(O[n.typeKey]=v,v==="instruction"){for(C in A)if(A.hasOwnProperty(C))break;O[n.nameKey]="instructionNameFn"in n?n.instructionNameFn(C,A,i):C,n.instructionHasAttributes?(O[n.attributesKey]=A[C][n.attributesKey],"instructionFn"in n&&(O[n.attributesKey]=n.instructionFn(O[n.attributesKey],C,i))):("instructionFn"in n&&(A[C]=n.instructionFn(A[C],C,i)),O[n.instructionKey]=A[C])}else v+"Fn"in n&&(A=n[v+"Fn"](A,i)),O[n[v+"Key"]]=A;n.addParent&&(O[n.parentKey]=i),i[n.elementsKey].push(O)}}function c(v){if("attributesFn"in n&&v&&(v=n.attributesFn(v,i)),(n.trim||"attributeValueFn"in n||"attributeNameFn"in n||n.nativeTypeAttributes)&&v){var A;for(A in v)if(v.hasOwnProperty(A)&&(n.trim&&(v[A]=v[A].trim()),n.nativeTypeAttributes&&(v[A]=l(v[A])),"attributeValueFn"in n&&(v[A]=n.attributeValueFn(v[A],A,i)),"attributeNameFn"in n)){var C=v[A];delete v[A],v[n.attributeNameFn(A,v[A],i)]=C}}return v}function h(v){var A={};if(v.body&&(v.name.toLowerCase()==="xml"||n.instructionHasAttributes)){for(var C=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,S;(S=C.exec(v.body))!==null;)A[S[1]]=S[2]||S[3]||S[4];A=c(A)}if(v.name.toLowerCase()==="xml"){if(n.ignoreDeclaration)return;i[n.declarationKey]={},Object.keys(A).length&&(i[n.declarationKey][n.attributesKey]=A),n.addParent&&(i[n.declarationKey][n.parentKey]=i)}else{if(n.ignoreInstruction)return;n.trim&&(v.body=v.body.trim());var O={};n.instructionHasAttributes&&Object.keys(A).length?(O[v.name]={},O[v.name][n.attributesKey]=A):O[v.name]=v.body,o("instruction",O)}}function f(v,A){var C;if(typeof v=="object"&&(A=v.attributes,v=v.name),A=c(A),"elementNameFn"in n&&(v=n.elementNameFn(v,i)),n.compact){if(C={},!n.ignoreAttributes&&A&&Object.keys(A).length){C[n.attributesKey]={};var S;for(S in A)A.hasOwnProperty(S)&&(C[n.attributesKey][S]=A[S])}!(v in i)&&(e(n.alwaysArray)?n.alwaysArray.indexOf(v)!==-1:n.alwaysArray)&&(i[v]=[]),i[v]&&!e(i[v])&&(i[v]=[i[v]]),e(i[v])?i[v].push(C):i[v]=C}else i[n.elementsKey]||(i[n.elementsKey]=[]),C={},C[n.typeKey]="element",C[n.nameKey]=v,!n.ignoreAttributes&&A&&Object.keys(A).length&&(C[n.attributesKey]=A),n.alwaysChildren&&(C[n.elementsKey]=[]),i[n.elementsKey].push(C);C[n.parentKey]=i,i=C}function p(v){n.ignoreText||!v.trim()&&!n.captureSpacesBetweenElements||(n.trim&&(v=v.trim()),n.nativeType&&(v=l(v)),n.sanitize&&(v=v.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),o("text",v))}function y(v){n.ignoreComment||(n.trim&&(v=v.trim()),o("comment",v))}function m(v){var A=i[n.parentKey];n.addParent||delete i[n.parentKey],i=A}function w(v){n.ignoreCdata||(n.trim&&(v=v.trim()),o("cdata",v))}function b(v){n.ignoreDoctype||(v=v.replace(/^ /,""),n.trim&&(v=v.trim()),o("doctype",v))}function _(v){v.note=v}return av=function(v,A){var C=r.parser(!0,{}),S={};if(i=S,n=s(A),C.opt={strictEntities:!0},C.onopentag=f,C.ontext=p,C.oncomment=y,C.onclosetag=m,C.onerror=_,C.oncdata=w,C.ondoctype=b,C.onprocessinginstruction=h,C.write(v).close(),S[n.elementsKey]){var O=S[n.elementsKey];delete S[n.elementsKey],S[n.elementsKey]=O,delete S.text}return S},av}var ov,pS;function KP(){if(pS)return ov;pS=1;var r=q2(),t=d6();function e(n){var i=r.copyOptions(n);return r.ensureSpacesExists(i),i}return ov=function(n,i){var s,l,o,c;return s=e(i),l=t(n,s),c="compact"in s&&s.compact?"_parent":"parent","addParent"in s&&s.addParent?o=JSON.stringify(l,function(h,f){return h===c?"_":f},s.spaces):o=JSON.stringify(l,null,s.spaces),o.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},ov}var lv,mS;function p6(){if(mS)return lv;mS=1;var r=q2(),t=z2().isArray,e,n;function i(C){var S=r.copyOptions(C);return r.ensureFlagExists("ignoreDeclaration",S),r.ensureFlagExists("ignoreInstruction",S),r.ensureFlagExists("ignoreAttributes",S),r.ensureFlagExists("ignoreText",S),r.ensureFlagExists("ignoreComment",S),r.ensureFlagExists("ignoreCdata",S),r.ensureFlagExists("ignoreDoctype",S),r.ensureFlagExists("compact",S),r.ensureFlagExists("indentText",S),r.ensureFlagExists("indentCdata",S),r.ensureFlagExists("indentAttributes",S),r.ensureFlagExists("indentInstruction",S),r.ensureFlagExists("fullTagEmptyElement",S),r.ensureFlagExists("noQuotesForNativeAttributes",S),r.ensureSpacesExists(S),typeof S.spaces=="number"&&(S.spaces=Array(S.spaces+1).join(" ")),r.ensureKeyExists("declaration",S),r.ensureKeyExists("instruction",S),r.ensureKeyExists("attributes",S),r.ensureKeyExists("text",S),r.ensureKeyExists("comment",S),r.ensureKeyExists("cdata",S),r.ensureKeyExists("doctype",S),r.ensureKeyExists("type",S),r.ensureKeyExists("name",S),r.ensureKeyExists("elements",S),r.checkFnExists("doctype",S),r.checkFnExists("instruction",S),r.checkFnExists("cdata",S),r.checkFnExists("comment",S),r.checkFnExists("text",S),r.checkFnExists("instructionName",S),r.checkFnExists("elementName",S),r.checkFnExists("attributeName",S),r.checkFnExists("attributeValue",S),r.checkFnExists("attributes",S),r.checkFnExists("fullTagEmptyElement",S),S}function s(C,S,O){return(!O&&C.spaces?`
`:"")+Array(S+1).join(C.spaces)}function l(C,S,O){if(S.ignoreAttributes)return"";"attributesFn"in S&&(C=S.attributesFn(C,n,e));var q,H,Q,I,dt=[];for(q in C)C.hasOwnProperty(q)&&C[q]!==null&&C[q]!==void 0&&(I=S.noQuotesForNativeAttributes&&typeof C[q]!="string"?"":'"',H=""+C[q],H=H.replace(/"/g,"&quot;"),Q="attributeNameFn"in S?S.attributeNameFn(q,H,n,e):q,dt.push(S.spaces&&S.indentAttributes?s(S,O+1,!1):" "),dt.push(Q+"="+I+("attributeValueFn"in S?S.attributeValueFn(H,q,n,e):H)+I));return C&&Object.keys(C).length&&S.spaces&&S.indentAttributes&&dt.push(s(S,O,!1)),dt.join("")}function o(C,S,O){return e=C,n="xml",S.ignoreDeclaration?"":"<?xml"+l(C[S.attributesKey],S,O)+"?>"}function c(C,S,O){if(S.ignoreInstruction)return"";var q;for(q in C)if(C.hasOwnProperty(q))break;var H="instructionNameFn"in S?S.instructionNameFn(q,C[q],n,e):q;if(typeof C[q]=="object")return e=C,n=H,"<?"+H+l(C[q][S.attributesKey],S,O)+"?>";var Q=C[q]?C[q]:"";return"instructionFn"in S&&(Q=S.instructionFn(Q,q,n,e)),"<?"+H+(Q?" "+Q:"")+"?>"}function h(C,S){return S.ignoreComment?"":"<!--"+("commentFn"in S?S.commentFn(C,n,e):C)+"-->"}function f(C,S){return S.ignoreCdata?"":"<![CDATA["+("cdataFn"in S?S.cdataFn(C,n,e):C.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function p(C,S){return S.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in S?S.doctypeFn(C,n,e):C)+">"}function y(C,S){return S.ignoreText?"":(C=""+C,C=C.replace(/&amp;/g,"&"),C=C.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in S?S.textFn(C,n,e):C)}function m(C,S){var O;if(C.elements&&C.elements.length)for(O=0;O<C.elements.length;++O)switch(C.elements[O][S.typeKey]){case"text":if(S.indentText)return!0;break;case"cdata":if(S.indentCdata)return!0;break;case"instruction":if(S.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function w(C,S,O){e=C,n=C.name;var q=[],H="elementNameFn"in S?S.elementNameFn(C.name,C):C.name;q.push("<"+H),C[S.attributesKey]&&q.push(l(C[S.attributesKey],S,O));var Q=C[S.elementsKey]&&C[S.elementsKey].length||C[S.attributesKey]&&C[S.attributesKey]["xml:space"]==="preserve";return Q||("fullTagEmptyElementFn"in S?Q=S.fullTagEmptyElementFn(C.name,C):Q=S.fullTagEmptyElement),Q?(q.push(">"),C[S.elementsKey]&&C[S.elementsKey].length&&(q.push(b(C[S.elementsKey],S,O+1)),e=C,n=C.name),q.push(S.spaces&&m(C,S)?`
`+Array(O+1).join(S.spaces):""),q.push("</"+H+">")):q.push("/>"),q.join("")}function b(C,S,O,q){return C.reduce(function(H,Q){var I=s(S,O,q&&!H);switch(Q.type){case"element":return H+I+w(Q,S,O);case"comment":return H+I+h(Q[S.commentKey],S);case"doctype":return H+I+p(Q[S.doctypeKey],S);case"cdata":return H+(S.indentCdata?I:"")+f(Q[S.cdataKey],S);case"text":return H+(S.indentText?I:"")+y(Q[S.textKey],S);case"instruction":var dt={};return dt[Q[S.nameKey]]=Q[S.attributesKey]?Q:Q[S.instructionKey],H+(S.indentInstruction?I:"")+c(dt,S,O)}},"")}function _(C,S,O){var q;for(q in C)if(C.hasOwnProperty(q))switch(q){case S.parentKey:case S.attributesKey:break;case S.textKey:if(S.indentText||O)return!0;break;case S.cdataKey:if(S.indentCdata||O)return!0;break;case S.instructionKey:if(S.indentInstruction||O)return!0;break;case S.doctypeKey:case S.commentKey:return!0;default:return!0}return!1}function v(C,S,O,q,H){e=C,n=S;var Q="elementNameFn"in O?O.elementNameFn(S,C):S;if(typeof C>"u"||C===null||C==="")return"fullTagEmptyElementFn"in O&&O.fullTagEmptyElementFn(S,C)||O.fullTagEmptyElement?"<"+Q+"></"+Q+">":"<"+Q+"/>";var I=[];if(S){if(I.push("<"+Q),typeof C!="object")return I.push(">"+y(C,O)+"</"+Q+">"),I.join("");C[O.attributesKey]&&I.push(l(C[O.attributesKey],O,q));var dt=_(C,O,!0)||C[O.attributesKey]&&C[O.attributesKey]["xml:space"]==="preserve";if(dt||("fullTagEmptyElementFn"in O?dt=O.fullTagEmptyElementFn(S,C):dt=O.fullTagEmptyElement),dt)I.push(">");else return I.push("/>"),I.join("")}return I.push(A(C,O,q+1,!1)),e=C,n=S,S&&I.push((H?s(O,q,!1):"")+"</"+Q+">"),I.join("")}function A(C,S,O,q){var H,Q,I,dt=[];for(Q in C)if(C.hasOwnProperty(Q))for(I=t(C[Q])?C[Q]:[C[Q]],H=0;H<I.length;++H){switch(Q){case S.declarationKey:dt.push(o(I[H],S,O));break;case S.instructionKey:dt.push((S.indentInstruction?s(S,O,q):"")+c(I[H],S,O));break;case S.attributesKey:case S.parentKey:break;case S.textKey:dt.push((S.indentText?s(S,O,q):"")+y(I[H],S));break;case S.cdataKey:dt.push((S.indentCdata?s(S,O,q):"")+f(I[H],S));break;case S.doctypeKey:dt.push(s(S,O,q)+p(I[H],S));break;case S.commentKey:dt.push(s(S,O,q)+h(I[H],S));break;default:dt.push(s(S,O,q)+v(I[H],Q,S,O,_(I[H],S)))}q=q&&!dt.length}return dt.join("")}return lv=function(C,S){S=i(S);var O=[];return e=C,n="_root_",S.compact?O.push(A(C,S,0,!0)):(C[S.declarationKey]&&O.push(o(C[S.declarationKey],S,0)),C[S.elementsKey]&&C[S.elementsKey].length&&O.push(b(C[S.elementsKey],S,0,!O.length))),O.join("")},lv}var uv,gS;function $P(){if(gS)return uv;gS=1;var r=p6();return uv=function(t,e){t instanceof Buffer&&(t=t.toString());var n=null;if(typeof t=="string")try{n=JSON.parse(t)}catch{throw new Error("The JSON structure is invalid")}else n=t;return r(n,e)},uv}var cv,yS;function XP(){if(yS)return cv;yS=1;var r=d6(),t=KP(),e=p6(),n=$P();return cv={xml2js:r,xml2json:t,js2xml:e,json2xml:n},cv}var m6=XP();const H2=r=>{switch(r.type){case void 0:case"element":const t=new QP(r.name,r.attributes),e=r.elements||[];for(const n of e){const i=H2(n);i!==void 0&&t.push(i)}return t;case"text":return r.text;default:return}};class YP extends Cn{}class QP extends Re{static fromXmlString(t){const e=m6.xml2js(t,{compact:!1});return H2(e)}constructor(t,e){super(t),e&&this.root.push(new YP(e))}push(t){this.root.push(t)}}class ZP extends Re{constructor(t){super(""),this._attr=t}prepForXml(t){return{_attr:this._attr}}}class g6 extends Re{constructor(t,e){super(t),e&&(this.root=e.root)}}const to=r=>{if(isNaN(r))throw new Error(`Invalid value '${r}' specified. Must be an integer.`);return Math.floor(r)},Jg=r=>{const t=to(r);if(t<0)throw new Error(`Invalid value '${r}' specified. Must be a positive integer.`);return t},y6=(r,t)=>{const e=t*2;if(r.length!==e||isNaN(+`0x${r}`))throw new Error(`Invalid hex value '${r}'. Expected ${e} digit hex value`);return r},vS=r=>y6(r,1),v6=r=>{const t=r.slice(-2),e=r.substring(0,r.length-2);return`${Number(e)}${t}`},b6=r=>{const t=v6(r);if(parseFloat(t)<0)throw new Error(`Invalid value '${t}' specified. Expected a positive number.`);return t},Mf=r=>{if(r==="auto")return r;const t=r.charAt(0)==="#"?r.substring(1):r;return y6(t,3)},Jc=r=>typeof r=="string"?v6(r):to(r),JP=r=>typeof r=="string"?b6(r):Jg(r),ml=r=>typeof r=="string"?b6(r):Jg(r),tM=Jg,eM=Jg,nM=r=>r.toISOString();class Le extends Re{constructor(t,e=!0){super(t),e!==!0&&this.root.push(new Wi({val:e}))}}class hv extends Re{constructor(t,e){super(t),this.root.push(new Wi({val:JP(e)}))}}class wf extends Re{constructor(t,e){super(t),this.root.push(new Wi({val:e}))}}const Pd=(r,t)=>new uu({name:r,attributes:{value:{key:"w:val",value:t}}});class $d extends Re{constructor(t,e){super(t),this.root.push(new Wi({val:e}))}}class Gc extends Re{constructor(t,e){super(t),this.root.push(e)}}class uu extends Re{constructor({name:t,attributes:e,children:n}){super(t),e&&this.root.push(new Xg(e)),n&&this.root.push(...n)}}const Jl={START:"start",LEFT:"left"};class rM extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{val:"w:val"})}}class iM extends Re{constructor(t){super("w:jc"),this.root.push(new rM({val:t}))}}class xi extends Re{constructor(t,{color:e,size:n,space:i,style:s}){super(t),this.root.push(new sM({style:s,color:e===void 0?void 0:Mf(e),size:n===void 0?void 0:tM(n),space:i===void 0?void 0:eM(i)}))}}class sM extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{style:"w:val",color:"w:color",size:"w:sz",space:"w:space"})}}const t0={SINGLE:"single",NONE:"none"};class aM extends $g{constructor(t){super("w:pBdr"),t.top&&this.root.push(new xi("w:top",t.top)),t.bottom&&this.root.push(new xi("w:bottom",t.bottom)),t.left&&this.root.push(new xi("w:left",t.left)),t.right&&this.root.push(new xi("w:right",t.right)),t.between&&this.root.push(new xi("w:between",t.between))}}class oM extends Re{constructor(){super("w:pBdr");const t=new xi("w:bottom",{color:"auto",space:1,style:t0.SINGLE,size:6});this.root.push(t)}}class lM extends Re{constructor({start:t,end:e,left:n,right:i,hanging:s,firstLine:l}){super("w:ind"),this.root.push(new Xg({start:{key:"w:start",value:t===void 0?void 0:Jc(t)},end:{key:"w:end",value:e===void 0?void 0:Jc(e)},left:{key:"w:left",value:n===void 0?void 0:Jc(n)},right:{key:"w:right",value:i===void 0?void 0:Jc(i)},hanging:{key:"w:hanging",value:s===void 0?void 0:ml(s)},firstLine:{key:"w:firstLine",value:l===void 0?void 0:ml(l)}}))}}let uM=class extends Re{constructor(){super("w:br")}};const G2={BEGIN:"begin",END:"end",SEPARATE:"separate"};class V2 extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{type:"w:fldCharType",dirty:"w:dirty"})}}class Lm extends Re{constructor(t){super("w:fldChar"),this.root.push(new V2({type:G2.BEGIN,dirty:t}))}}class Om extends Re{constructor(t){super("w:fldChar"),this.root.push(new V2({type:G2.SEPARATE,dirty:t}))}}class Dm extends Re{constructor(t){super("w:fldChar"),this.root.push(new V2({type:G2.END,dirty:t}))}}const Ff={DEFAULT:"default",PRESERVE:"preserve"};class Bf extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{space:"xml:space"})}}class cM extends Re{constructor(){super("w:instrText"),this.root.push(new Bf({space:Ff.PRESERVE})),this.root.push("PAGE")}}class hM extends Re{constructor(){super("w:instrText"),this.root.push(new Bf({space:Ff.PRESERVE})),this.root.push("NUMPAGES")}}class fM extends Re{constructor(){super("w:instrText"),this.root.push(new Bf({space:Ff.PRESERVE})),this.root.push("SECTIONPAGES")}}class dM extends Re{constructor(){super("w:instrText"),this.root.push(new Bf({space:Ff.PRESERVE})),this.root.push("SECTION")}}class pM extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{fill:"w:fill",color:"w:color",type:"w:val"})}}class w6 extends Re{constructor({fill:t,color:e,type:n}){super("w:shd"),this.root.push(new pM({fill:t===void 0?void 0:Mf(t),color:e===void 0?void 0:Mf(e),type:n}))}}class mM extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{id:"w:id",author:"w:author",date:"w:date"})}}const gM={DOT:"dot"};class yM extends Re{constructor(t){super("w:em"),this.root.push(new Wi({val:t}))}}class vM extends yM{constructor(t=gM.DOT){super(t)}}class bM extends Re{constructor(t){super("w:spacing"),this.root.push(new Wi({val:Jc(t)}))}}class wM extends Re{constructor(t){super("w:color"),this.root.push(new Wi({val:Mf(t)}))}}class xM extends Re{constructor(t){super("w:highlight"),this.root.push(new Wi({val:t}))}}class _M extends Re{constructor(t){super("w:highlightCs"),this.root.push(new Wi({val:t}))}}const AM=r=>new uu({name:"w:lang",attributes:{value:{key:"w:val",value:r.value},eastAsia:{key:"w:eastAsia",value:r.eastAsia},bidirectional:{key:"w:bidi",value:r.bidirectional}}});class bS extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{ascii:"w:ascii",cs:"w:cs",eastAsia:"w:eastAsia",hAnsi:"w:hAnsi",hint:"w:hint"})}}class fv extends Re{constructor(t,e){if(super("w:rFonts"),typeof t=="string"){const n=t;this.root.push(new bS({ascii:n,cs:n,eastAsia:n,hAnsi:n,hint:e}))}else{const n=t;this.root.push(new bS(n))}}}let x6=class extends Re{constructor(t){super("w:vertAlign"),this.root.push(new Wi({val:t}))}};class SM extends x6{constructor(){super("superscript")}}class EM extends x6{constructor(){super("subscript")}}const _6={SINGLE:"single"};class CM extends Re{constructor(t=_6.SINGLE,e){super("w:u"),this.root.push(new Wi({val:t,color:e===void 0?void 0:Mf(e)}))}}class gh extends $g{constructor(t){var e,n;if(super("w:rPr"),!t)return;t.style&&this.push(new wf("w:rStyle",t.style)),t.font&&(typeof t.font=="string"?this.push(new fv(t.font)):"name"in t.font?this.push(new fv(t.font.name,t.font.hint)):this.push(new fv(t.font))),t.bold!==void 0&&this.push(new Le("w:b",t.bold)),(t.boldComplexScript===void 0&&t.bold!==void 0||t.boldComplexScript)&&this.push(new Le("w:bCs",(e=t.boldComplexScript)!=null?e:t.bold)),t.italics!==void 0&&this.push(new Le("w:i",t.italics)),(t.italicsComplexScript===void 0&&t.italics!==void 0||t.italicsComplexScript)&&this.push(new Le("w:iCs",(n=t.italicsComplexScript)!=null?n:t.italics)),t.smallCaps!==void 0?this.push(new Le("w:smallCaps",t.smallCaps)):t.allCaps!==void 0&&this.push(new Le("w:caps",t.allCaps)),t.strike!==void 0&&this.push(new Le("w:strike",t.strike)),t.doubleStrike!==void 0&&this.push(new Le("w:dstrike",t.doubleStrike)),t.emboss!==void 0&&this.push(new Le("w:emboss",t.emboss)),t.imprint!==void 0&&this.push(new Le("w:imprint",t.imprint)),t.noProof!==void 0&&this.push(new Le("w:noProof",t.noProof)),t.snapToGrid!==void 0&&this.push(new Le("w:snapToGrid",t.snapToGrid)),t.vanish&&this.push(new Le("w:vanish",t.vanish)),t.color&&this.push(new wM(t.color)),t.characterSpacing&&this.push(new bM(t.characterSpacing)),t.scale!==void 0&&this.push(new $d("w:w",t.scale)),t.kern&&this.push(new hv("w:kern",t.kern)),t.position&&this.push(new wf("w:position",t.position)),t.size!==void 0&&this.push(new hv("w:sz",t.size));const i=t.sizeComplexScript===void 0||t.sizeComplexScript===!0?t.size:t.sizeComplexScript;i&&this.push(new hv("w:szCs",i)),t.highlight&&this.push(new xM(t.highlight));const s=t.highlightComplexScript===void 0||t.highlightComplexScript===!0?t.highlight:t.highlightComplexScript;s&&this.push(new _M(s)),t.underline&&this.push(new CM(t.underline.type,t.underline.color)),t.effect&&this.push(new wf("w:effect",t.effect)),t.border&&this.push(new xi("w:bdr",t.border)),t.shading&&this.push(new w6(t.shading)),t.subScript&&this.push(new EM),t.superScript&&this.push(new SM),t.rightToLeft!==void 0&&this.push(new Le("w:rtl",t.rightToLeft)),t.emphasisMark&&this.push(new vM(t.emphasisMark.type)),t.language&&this.push(AM(t.language)),t.specVanish&&this.push(new Le("w:specVanish",t.vanish)),t.math&&this.push(new Le("w:oMath",t.math)),t.revision&&this.push(new TM(t.revision))}push(t){this.root.push(t)}}class TM extends Re{constructor(t){super("w:rPrChange"),this.root.push(new mM({id:t.id,author:t.author,date:t.date})),this.addChildElement(new gh(t))}}class wS extends Re{constructor(t){var e;super("w:t"),typeof t=="string"?(this.root.push(new Bf({space:Ff.PRESERVE})),this.root.push(t)):(this.root.push(new Bf({space:(e=t.space)!=null?e:Ff.DEFAULT})),this.root.push(t.text))}}const Pm={CURRENT:"CURRENT",TOTAL_PAGES:"TOTAL_PAGES",TOTAL_PAGES_IN_SECTION:"TOTAL_PAGES_IN_SECTION",CURRENT_SECTION:"SECTION"};class e0 extends Re{constructor(t){if(super("w:r"),_e(this,"properties"),this.properties=new gh(t),this.root.push(this.properties),t.break)for(let e=0;e<t.break;e++)this.root.push(new uM);if(t.children)for(const e of t.children){if(typeof e=="string"){switch(e){case Pm.CURRENT:this.root.push(new Lm),this.root.push(new cM),this.root.push(new Om),this.root.push(new Dm);break;case Pm.TOTAL_PAGES:this.root.push(new Lm),this.root.push(new hM),this.root.push(new Om),this.root.push(new Dm);break;case Pm.TOTAL_PAGES_IN_SECTION:this.root.push(new Lm),this.root.push(new fM),this.root.push(new Om),this.root.push(new Dm);break;case Pm.CURRENT_SECTION:this.root.push(new Lm),this.root.push(new dM),this.root.push(new Om),this.root.push(new Dm);break;default:this.root.push(new wS(e));break}continue}this.root.push(e)}else t.text!==void 0&&this.root.push(new wS(t.text))}}class df extends e0{constructor(t){super(typeof t=="string"?{text:t}:t)}}var dv={},Ur={},pv,xS;function xp(){if(xS)return pv;xS=1,pv=r;function r(t,e){if(!t)throw new Error(e||"Assertion failed")}return r.equal=function(e,n,i){if(e!=n)throw new Error(i||"Assertion failed: "+e+" != "+n)},pv}var _S;function cu(){if(_S)return Ur;_S=1;var r=xp(),t=Oc();Ur.inherits=t;function e(B,Z){return(B.charCodeAt(Z)&64512)!==55296||Z<0||Z+1>=B.length?!1:(B.charCodeAt(Z+1)&64512)===56320}function n(B,Z){if(Array.isArray(B))return B.slice();if(!B)return[];var D=[];if(typeof B=="string")if(Z){if(Z==="hex")for(B=B.replace(/[^a-z0-9]+/ig,""),B.length%2!==0&&(B="0"+B),it=0;it<B.length;it+=2)D.push(parseInt(B[it]+B[it+1],16))}else for(var mt=0,it=0;it<B.length;it++){var st=B.charCodeAt(it);st<128?D[mt++]=st:st<2048?(D[mt++]=st>>6|192,D[mt++]=st&63|128):e(B,it)?(st=65536+((st&1023)<<10)+(B.charCodeAt(++it)&1023),D[mt++]=st>>18|240,D[mt++]=st>>12&63|128,D[mt++]=st>>6&63|128,D[mt++]=st&63|128):(D[mt++]=st>>12|224,D[mt++]=st>>6&63|128,D[mt++]=st&63|128)}else for(it=0;it<B.length;it++)D[it]=B[it]|0;return D}Ur.toArray=n;function i(B){for(var Z="",D=0;D<B.length;D++)Z+=o(B[D].toString(16));return Z}Ur.toHex=i;function s(B){var Z=B>>>24|B>>>8&65280|B<<8&16711680|(B&255)<<24;return Z>>>0}Ur.htonl=s;function l(B,Z){for(var D="",mt=0;mt<B.length;mt++){var it=B[mt];Z==="little"&&(it=s(it)),D+=c(it.toString(16))}return D}Ur.toHex32=l;function o(B){return B.length===1?"0"+B:B}Ur.zero2=o;function c(B){return B.length===7?"0"+B:B.length===6?"00"+B:B.length===5?"000"+B:B.length===4?"0000"+B:B.length===3?"00000"+B:B.length===2?"000000"+B:B.length===1?"0000000"+B:B}Ur.zero8=c;function h(B,Z,D,mt){var it=D-Z;r(it%4===0);for(var st=new Array(it/4),vt=0,wt=Z;vt<st.length;vt++,wt+=4){var Ft;mt==="big"?Ft=B[wt]<<24|B[wt+1]<<16|B[wt+2]<<8|B[wt+3]:Ft=B[wt+3]<<24|B[wt+2]<<16|B[wt+1]<<8|B[wt],st[vt]=Ft>>>0}return st}Ur.join32=h;function f(B,Z){for(var D=new Array(B.length*4),mt=0,it=0;mt<B.length;mt++,it+=4){var st=B[mt];Z==="big"?(D[it]=st>>>24,D[it+1]=st>>>16&255,D[it+2]=st>>>8&255,D[it+3]=st&255):(D[it+3]=st>>>24,D[it+2]=st>>>16&255,D[it+1]=st>>>8&255,D[it]=st&255)}return D}Ur.split32=f;function p(B,Z){return B>>>Z|B<<32-Z}Ur.rotr32=p;function y(B,Z){return B<<Z|B>>>32-Z}Ur.rotl32=y;function m(B,Z){return B+Z>>>0}Ur.sum32=m;function w(B,Z,D){return B+Z+D>>>0}Ur.sum32_3=w;function b(B,Z,D,mt){return B+Z+D+mt>>>0}Ur.sum32_4=b;function _(B,Z,D,mt,it){return B+Z+D+mt+it>>>0}Ur.sum32_5=_;function v(B,Z,D,mt){var it=B[Z],st=B[Z+1],vt=mt+st>>>0,wt=(vt<mt?1:0)+D+it;B[Z]=wt>>>0,B[Z+1]=vt}Ur.sum64=v;function A(B,Z,D,mt){var it=Z+mt>>>0,st=(it<Z?1:0)+B+D;return st>>>0}Ur.sum64_hi=A;function C(B,Z,D,mt){var it=Z+mt;return it>>>0}Ur.sum64_lo=C;function S(B,Z,D,mt,it,st,vt,wt){var Ft=0,$=Z;$=$+mt>>>0,Ft+=$<Z?1:0,$=$+st>>>0,Ft+=$<st?1:0,$=$+wt>>>0,Ft+=$<wt?1:0;var R=B+D+it+vt+Ft;return R>>>0}Ur.sum64_4_hi=S;function O(B,Z,D,mt,it,st,vt,wt){var Ft=Z+mt+st+wt;return Ft>>>0}Ur.sum64_4_lo=O;function q(B,Z,D,mt,it,st,vt,wt,Ft,$){var R=0,K=Z;K=K+mt>>>0,R+=K<Z?1:0,K=K+st>>>0,R+=K<st?1:0,K=K+wt>>>0,R+=K<wt?1:0,K=K+$>>>0,R+=K<$?1:0;var rt=B+D+it+vt+Ft+R;return rt>>>0}Ur.sum64_5_hi=q;function H(B,Z,D,mt,it,st,vt,wt,Ft,$){var R=Z+mt+st+wt+$;return R>>>0}Ur.sum64_5_lo=H;function Q(B,Z,D){var mt=Z<<32-D|B>>>D;return mt>>>0}Ur.rotr64_hi=Q;function I(B,Z,D){var mt=B<<32-D|Z>>>D;return mt>>>0}Ur.rotr64_lo=I;function dt(B,Z,D){return B>>>D}Ur.shr64_hi=dt;function nt(B,Z,D){var mt=B<<32-D|Z>>>D;return mt>>>0}return Ur.shr64_lo=nt,Ur}var mv={},AS;function _p(){if(AS)return mv;AS=1;var r=cu(),t=xp();function e(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return mv.BlockHash=e,e.prototype.update=function(i,s){if(i=r.toArray(i,s),this.pending?this.pending=this.pending.concat(i):this.pending=i,this.pendingTotal+=i.length,this.pending.length>=this._delta8){i=this.pending;var l=i.length%this._delta8;this.pending=i.slice(i.length-l,i.length),this.pending.length===0&&(this.pending=null),i=r.join32(i,0,i.length-l,this.endian);for(var o=0;o<i.length;o+=this._delta32)this._update(i,o,o+this._delta32)}return this},e.prototype.digest=function(i){return this.update(this._pad()),t(this.pending===null),this._digest(i)},e.prototype._pad=function(){var i=this.pendingTotal,s=this._delta8,l=s-(i+this.padLength)%s,o=new Array(l+this.padLength);o[0]=128;for(var c=1;c<l;c++)o[c]=0;if(i<<=3,this.endian==="big"){for(var h=8;h<this.padLength;h++)o[c++]=0;o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=i>>>24&255,o[c++]=i>>>16&255,o[c++]=i>>>8&255,o[c++]=i&255}else for(o[c++]=i&255,o[c++]=i>>>8&255,o[c++]=i>>>16&255,o[c++]=i>>>24&255,o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=0,h=8;h<this.padLength;h++)o[c++]=0;return o},mv}var Vc={},Xl={},SS;function A6(){if(SS)return Xl;SS=1;var r=cu(),t=r.rotr32;function e(f,p,y,m){if(f===0)return n(p,y,m);if(f===1||f===3)return s(p,y,m);if(f===2)return i(p,y,m)}Xl.ft_1=e;function n(f,p,y){return f&p^~f&y}Xl.ch32=n;function i(f,p,y){return f&p^f&y^p&y}Xl.maj32=i;function s(f,p,y){return f^p^y}Xl.p32=s;function l(f){return t(f,2)^t(f,13)^t(f,22)}Xl.s0_256=l;function o(f){return t(f,6)^t(f,11)^t(f,25)}Xl.s1_256=o;function c(f){return t(f,7)^t(f,18)^f>>>3}Xl.g0_256=c;function h(f){return t(f,17)^t(f,19)^f>>>10}return Xl.g1_256=h,Xl}var gv,ES;function NM(){if(ES)return gv;ES=1;var r=cu(),t=_p(),e=A6(),n=r.rotl32,i=r.sum32,s=r.sum32_5,l=e.ft_1,o=t.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function h(){if(!(this instanceof h))return new h;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return r.inherits(h,o),gv=h,h.blockSize=512,h.outSize=160,h.hmacStrength=80,h.padLength=64,h.prototype._update=function(p,y){for(var m=this.W,w=0;w<16;w++)m[w]=p[y+w];for(;w<m.length;w++)m[w]=n(m[w-3]^m[w-8]^m[w-14]^m[w-16],1);var b=this.h[0],_=this.h[1],v=this.h[2],A=this.h[3],C=this.h[4];for(w=0;w<m.length;w++){var S=~~(w/20),O=s(n(b,5),l(S,_,v,A),C,m[w],c[S]);C=A,A=v,v=n(_,30),_=b,b=O}this.h[0]=i(this.h[0],b),this.h[1]=i(this.h[1],_),this.h[2]=i(this.h[2],v),this.h[3]=i(this.h[3],A),this.h[4]=i(this.h[4],C)},h.prototype._digest=function(p){return p==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},gv}var yv,CS;function S6(){if(CS)return yv;CS=1;var r=cu(),t=_p(),e=A6(),n=xp(),i=r.sum32,s=r.sum32_4,l=r.sum32_5,o=e.ch32,c=e.maj32,h=e.s0_256,f=e.s1_256,p=e.g0_256,y=e.g1_256,m=t.BlockHash,w=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function b(){if(!(this instanceof b))return new b;m.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=w,this.W=new Array(64)}return r.inherits(b,m),yv=b,b.blockSize=512,b.outSize=256,b.hmacStrength=192,b.padLength=64,b.prototype._update=function(v,A){for(var C=this.W,S=0;S<16;S++)C[S]=v[A+S];for(;S<C.length;S++)C[S]=s(y(C[S-2]),C[S-7],p(C[S-15]),C[S-16]);var O=this.h[0],q=this.h[1],H=this.h[2],Q=this.h[3],I=this.h[4],dt=this.h[5],nt=this.h[6],B=this.h[7];for(n(this.k.length===C.length),S=0;S<C.length;S++){var Z=l(B,f(I),o(I,dt,nt),this.k[S],C[S]),D=i(h(O),c(O,q,H));B=nt,nt=dt,dt=I,I=i(Q,Z),Q=H,H=q,q=O,O=i(Z,D)}this.h[0]=i(this.h[0],O),this.h[1]=i(this.h[1],q),this.h[2]=i(this.h[2],H),this.h[3]=i(this.h[3],Q),this.h[4]=i(this.h[4],I),this.h[5]=i(this.h[5],dt),this.h[6]=i(this.h[6],nt),this.h[7]=i(this.h[7],B)},b.prototype._digest=function(v){return v==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},yv}var vv,TS;function kM(){if(TS)return vv;TS=1;var r=cu(),t=S6();function e(){if(!(this instanceof e))return new e;t.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return r.inherits(e,t),vv=e,e.blockSize=512,e.outSize=224,e.hmacStrength=192,e.padLength=64,e.prototype._digest=function(i){return i==="hex"?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")},vv}var bv,NS;function E6(){if(NS)return bv;NS=1;var r=cu(),t=_p(),e=xp(),n=r.rotr64_hi,i=r.rotr64_lo,s=r.shr64_hi,l=r.shr64_lo,o=r.sum64,c=r.sum64_hi,h=r.sum64_lo,f=r.sum64_4_hi,p=r.sum64_4_lo,y=r.sum64_5_hi,m=r.sum64_5_lo,w=t.BlockHash,b=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _(){if(!(this instanceof _))return new _;w.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=b,this.W=new Array(160)}r.inherits(_,w),bv=_,_.blockSize=1024,_.outSize=512,_.hmacStrength=192,_.padLength=128,_.prototype._prepareBlock=function(D,mt){for(var it=this.W,st=0;st<32;st++)it[st]=D[mt+st];for(;st<it.length;st+=2){var vt=nt(it[st-4],it[st-3]),wt=B(it[st-4],it[st-3]),Ft=it[st-14],$=it[st-13],R=I(it[st-30],it[st-29]),K=dt(it[st-30],it[st-29]),rt=it[st-32],pt=it[st-31];it[st]=f(vt,wt,Ft,$,R,K,rt,pt),it[st+1]=p(vt,wt,Ft,$,R,K,rt,pt)}},_.prototype._update=function(D,mt){this._prepareBlock(D,mt);var it=this.W,st=this.h[0],vt=this.h[1],wt=this.h[2],Ft=this.h[3],$=this.h[4],R=this.h[5],K=this.h[6],rt=this.h[7],pt=this.h[8],ct=this.h[9],F=this.h[10],j=this.h[11],ht=this.h[12],ot=this.h[13],lt=this.h[14],ft=this.h[15];e(this.k.length===it.length);for(var Mt=0;Mt<it.length;Mt+=2){var W=lt,tt=ft,X=H(pt,ct),P=Q(pt,ct),k=v(pt,ct,F,j,ht),z=A(pt,ct,F,j,ht,ot),_t=this.k[Mt],kt=this.k[Mt+1],Ct=it[Mt],$t=it[Mt+1],le=y(W,tt,X,P,k,z,_t,kt,Ct,$t),re=m(W,tt,X,P,k,z,_t,kt,Ct,$t);W=O(st,vt),tt=q(st,vt),X=C(st,vt,wt,Ft,$),P=S(st,vt,wt,Ft,$,R);var fe=c(W,tt,X,P),Ce=h(W,tt,X,P);lt=ht,ft=ot,ht=F,ot=j,F=pt,j=ct,pt=c(K,rt,le,re),ct=h(rt,rt,le,re),K=$,rt=R,$=wt,R=Ft,wt=st,Ft=vt,st=c(le,re,fe,Ce),vt=h(le,re,fe,Ce)}o(this.h,0,st,vt),o(this.h,2,wt,Ft),o(this.h,4,$,R),o(this.h,6,K,rt),o(this.h,8,pt,ct),o(this.h,10,F,j),o(this.h,12,ht,ot),o(this.h,14,lt,ft)},_.prototype._digest=function(D){return D==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")};function v(Z,D,mt,it,st){var vt=Z&mt^~Z&st;return vt<0&&(vt+=4294967296),vt}function A(Z,D,mt,it,st,vt){var wt=D&it^~D&vt;return wt<0&&(wt+=4294967296),wt}function C(Z,D,mt,it,st){var vt=Z&mt^Z&st^mt&st;return vt<0&&(vt+=4294967296),vt}function S(Z,D,mt,it,st,vt){var wt=D&it^D&vt^it&vt;return wt<0&&(wt+=4294967296),wt}function O(Z,D){var mt=n(Z,D,28),it=n(D,Z,2),st=n(D,Z,7),vt=mt^it^st;return vt<0&&(vt+=4294967296),vt}function q(Z,D){var mt=i(Z,D,28),it=i(D,Z,2),st=i(D,Z,7),vt=mt^it^st;return vt<0&&(vt+=4294967296),vt}function H(Z,D){var mt=n(Z,D,14),it=n(Z,D,18),st=n(D,Z,9),vt=mt^it^st;return vt<0&&(vt+=4294967296),vt}function Q(Z,D){var mt=i(Z,D,14),it=i(Z,D,18),st=i(D,Z,9),vt=mt^it^st;return vt<0&&(vt+=4294967296),vt}function I(Z,D){var mt=n(Z,D,1),it=n(Z,D,8),st=s(Z,D,7),vt=mt^it^st;return vt<0&&(vt+=4294967296),vt}function dt(Z,D){var mt=i(Z,D,1),it=i(Z,D,8),st=l(Z,D,7),vt=mt^it^st;return vt<0&&(vt+=4294967296),vt}function nt(Z,D){var mt=n(Z,D,19),it=n(D,Z,29),st=s(Z,D,6),vt=mt^it^st;return vt<0&&(vt+=4294967296),vt}function B(Z,D){var mt=i(Z,D,19),it=i(D,Z,29),st=l(Z,D,6),vt=mt^it^st;return vt<0&&(vt+=4294967296),vt}return bv}var wv,kS;function RM(){if(kS)return wv;kS=1;var r=cu(),t=E6();function e(){if(!(this instanceof e))return new e;t.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return r.inherits(e,t),wv=e,e.blockSize=1024,e.outSize=384,e.hmacStrength=192,e.padLength=128,e.prototype._digest=function(i){return i==="hex"?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")},wv}var RS;function LM(){return RS||(RS=1,Vc.sha1=NM(),Vc.sha224=kM(),Vc.sha256=S6(),Vc.sha384=RM(),Vc.sha512=E6()),Vc}var xv={},LS;function OM(){if(LS)return xv;LS=1;var r=cu(),t=_p(),e=r.rotl32,n=r.sum32,i=r.sum32_3,s=r.sum32_4,l=t.BlockHash;function o(){if(!(this instanceof o))return new o;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}r.inherits(o,l),xv.ripemd160=o,o.blockSize=512,o.outSize=160,o.hmacStrength=192,o.padLength=64,o.prototype._update=function(_,v){for(var A=this.h[0],C=this.h[1],S=this.h[2],O=this.h[3],q=this.h[4],H=A,Q=C,I=S,dt=O,nt=q,B=0;B<80;B++){var Z=n(e(s(A,c(B,C,S,O),_[p[B]+v],h(B)),m[B]),q);A=q,q=O,O=e(S,10),S=C,C=Z,Z=n(e(s(H,c(79-B,Q,I,dt),_[y[B]+v],f(B)),w[B]),nt),H=nt,nt=dt,dt=e(I,10),I=Q,Q=Z}Z=i(this.h[1],S,dt),this.h[1]=i(this.h[2],O,nt),this.h[2]=i(this.h[3],q,H),this.h[3]=i(this.h[4],A,Q),this.h[4]=i(this.h[0],C,I),this.h[0]=Z},o.prototype._digest=function(_){return _==="hex"?r.toHex32(this.h,"little"):r.split32(this.h,"little")};function c(b,_,v,A){return b<=15?_^v^A:b<=31?_&v|~_&A:b<=47?(_|~v)^A:b<=63?_&A|v&~A:_^(v|~A)}function h(b){return b<=15?0:b<=31?1518500249:b<=47?1859775393:b<=63?2400959708:2840853838}function f(b){return b<=15?1352829926:b<=31?1548603684:b<=47?1836072691:b<=63?2053994217:0}var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],y=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],w=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return xv}var _v,OS;function DM(){if(OS)return _v;OS=1;var r=cu(),t=xp();function e(n,i,s){if(!(this instanceof e))return new e(n,i,s);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(i,s))}return _v=e,e.prototype._init=function(i){i.length>this.blockSize&&(i=new this.Hash().update(i).digest()),t(i.length<=this.blockSize);for(var s=i.length;s<this.blockSize;s++)i.push(0);for(s=0;s<i.length;s++)i[s]^=54;for(this.inner=new this.Hash().update(i),s=0;s<i.length;s++)i[s]^=106;this.outer=new this.Hash().update(i)},e.prototype.update=function(i,s){return this.inner.update(i,s),this},e.prototype.digest=function(i){return this.outer.update(this.inner.digest()),this.outer.digest(i)},_v}var DS;function PM(){return DS||(DS=1,(function(r){var t=r;t.utils=cu(),t.common=_p(),t.sha=LM(),t.ripemd=OM(),t.hmac=DM(),t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160})(dv)),dv}PM();let MM="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",FM=(r,t=21)=>(e=t)=>{let n="",i=e|0;for(;i--;)n+=r[Math.random()*r.length|0];return n},BM=(r=21)=>{let t="",e=r|0;for(;e--;)t+=MM[Math.random()*64|0];return t};const hl=r=>Math.floor(r*72*20),W2=(r=0)=>{let t=r;return()=>++t},IM=()=>W2(),jM=()=>W2(1),UM=()=>W2(),zM=()=>BM().toLowerCase(),Md=r=>FM("1234567890abcdef",r)(),qM=()=>`${Md(8)}-${Md(4)}-${Md(4)}-${Md(4)}-${Md(12)}`;class HM extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{xmlns:"xmlns"})}}class GM extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{id:"Id",type:"Type",target:"Target",targetMode:"TargetMode"})}}const VM={EXTERNAL:"External"};class WM extends Re{constructor(t,e,n,i){super("Relationship"),this.root.push(new GM({id:t,type:e,target:n,targetMode:i}))}}class yh extends Re{constructor(){super("Relationships"),this.root.push(new HM({xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}))}createRelationship(t,e,n,i){const s=new WM(`rId${t}`,e,n,i);return this.root.push(s),s}get RelationshipCount(){return this.root.length-1}}class KM extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{id:"w:id",initials:"w:initials",author:"w:author",date:"w:date"})}}class $M extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{"xmlns:cx":"xmlns:cx","xmlns:cx1":"xmlns:cx1","xmlns:cx2":"xmlns:cx2","xmlns:cx3":"xmlns:cx3","xmlns:cx4":"xmlns:cx4","xmlns:cx5":"xmlns:cx5","xmlns:cx6":"xmlns:cx6","xmlns:cx7":"xmlns:cx7","xmlns:cx8":"xmlns:cx8","xmlns:mc":"xmlns:mc","xmlns:aink":"xmlns:aink","xmlns:am3d":"xmlns:am3d","xmlns:o":"xmlns:o","xmlns:r":"xmlns:r","xmlns:m":"xmlns:m","xmlns:v":"xmlns:v","xmlns:wp14":"xmlns:wp14","xmlns:wp":"xmlns:wp","xmlns:w10":"xmlns:w10","xmlns:w":"xmlns:w","xmlns:w14":"xmlns:w14","xmlns:w15":"xmlns:w15","xmlns:w16cex":"xmlns:w16cex","xmlns:w16cid":"xmlns:w16cid","xmlns:w16":"xmlns:w16","xmlns:w16sdtdh":"xmlns:w16sdtdh","xmlns:w16se":"xmlns:w16se","xmlns:wpg":"xmlns:wpg","xmlns:wpi":"xmlns:wpi","xmlns:wne":"xmlns:wne","xmlns:wps":"xmlns:wps"})}}class XM extends Re{constructor({id:t,initials:e,author:n,date:i=new Date,children:s}){super("w:comment"),this.root.push(new KM({id:t,initials:e,author:n,date:i.toISOString()}));for(const l of s)this.root.push(l)}}class YM extends Re{constructor({children:t}){super("w:comments"),_e(this,"relationships"),this.root.push(new $M({"xmlns:cx":"http://schemas.microsoft.com/office/drawing/2014/chartex","xmlns:cx1":"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex","xmlns:cx2":"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex","xmlns:cx3":"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex","xmlns:cx4":"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex","xmlns:cx5":"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex","xmlns:cx6":"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex","xmlns:cx7":"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex","xmlns:cx8":"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:aink":"http://schemas.microsoft.com/office/drawing/2016/ink","xmlns:am3d":"http://schemas.microsoft.com/office/drawing/2017/model3d","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:m":"http://schemas.openxmlformats.org/officeDocument/2006/math","xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:wp14":"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing","xmlns:wp":"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing","xmlns:w10":"urn:schemas-microsoft-com:office:word","xmlns:w":"http://schemas.openxmlformats.org/wordprocessingml/2006/main","xmlns:w14":"http://schemas.microsoft.com/office/word/2010/wordml","xmlns:w15":"http://schemas.microsoft.com/office/word/2012/wordml","xmlns:w16cex":"http://schemas.microsoft.com/office/word/2018/wordml/cex","xmlns:w16cid":"http://schemas.microsoft.com/office/word/2016/wordml/cid","xmlns:w16":"http://schemas.microsoft.com/office/word/2018/wordml","xmlns:w16sdtdh":"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash","xmlns:w16se":"http://schemas.microsoft.com/office/word/2015/wordml/symex","xmlns:wpg":"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup","xmlns:wpi":"http://schemas.microsoft.com/office/word/2010/wordprocessingInk","xmlns:wne":"http://schemas.microsoft.com/office/word/2006/wordml","xmlns:wps":"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}));for(const e of t)this.root.push(new XM(e));this.relationships=new yh}get Relationships(){return this.relationships}}class QM extends Re{constructor(){super("w:pageBreakBefore")}}const Pb={AUTO:"auto"};class ZM extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{after:"w:after",before:"w:before",line:"w:line",lineRule:"w:lineRule",beforeAutoSpacing:"w:beforeAutospacing",afterAutoSpacing:"w:afterAutospacing"})}}class JM extends Re{constructor(t){super("w:spacing"),this.root.push(new ZM(t))}}const t7={HEADING_1:"Heading1"};let Mm=class extends Re{constructor(t){super("w:pStyle"),this.root.push(new Wi({val:t}))}};class e7 extends Re{constructor(t){super("w:tabs");for(const e of t)this.root.push(new r7(e))}}const PS={LEFT:"left",RIGHT:"right"};class n7 extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{val:"w:val",pos:"w:pos",leader:"w:leader"})}}class r7 extends Re{constructor({type:t,position:e,leader:n}){super("w:tab"),this.root.push(new n7({val:t,pos:e,leader:n}))}}class Av extends Re{constructor(t,e){super("w:numPr"),this.root.push(new i7(e)),this.root.push(new s7(t))}}class i7 extends Re{constructor(t){if(super("w:ilvl"),t>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new Wi({val:t}))}}class s7 extends Re{constructor(t){super("w:numId"),this.root.push(new Wi({val:typeof t=="string"?`{${t}}`:t}))}}class a7 extends Re{constructor(){super(...arguments),_e(this,"fileChild",Symbol())}}class o7 extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{id:"r:id",history:"w:history",anchor:"w:anchor"})}}class l7 extends Re{constructor(t,e,n){super("w:hyperlink"),_e(this,"linkId"),this.linkId=e;const i={history:1,anchor:n||void 0,id:n?void 0:`rId${this.linkId}`},s=new o7(i);this.root.push(s),t.forEach(l=>{this.root.push(l)})}}class u7 extends Re{constructor(t){super("w:externalHyperlink"),this.options=t}}class c7 extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{id:"w:id",name:"w:name"})}}class h7 extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{id:"w:id"})}}class f7{constructor(t){_e(this,"bookmarkUniqueNumericId",UM()),_e(this,"start"),_e(this,"children"),_e(this,"end");const e=this.bookmarkUniqueNumericId();this.start=new d7(t.id,e),this.children=t.children,this.end=new p7(e)}}class d7 extends Re{constructor(t,e){super("w:bookmarkStart");const n=new c7({name:t,id:e});this.root.push(n)}}class p7 extends Re{constructor(t){super("w:bookmarkEnd");const e=new h7({id:t});this.root.push(e)}}class m7 extends Re{constructor(t){super("w:outlineLvl"),this.level=t,this.root.push(new Wi({val:t}))}}const g7={TOP:"top",CENTER:"center",BOTTOM:"bottom"};Df(cr({},g7),{BOTH:"both"});class y7 extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{verticalAlign:"w:val"})}}class v7 extends Re{constructor(t){super("w:vAlign"),this.root.push(new y7({verticalAlign:t}))}}class b7 extends Re{constructor({space:t,count:e,separate:n,equalWidth:i,children:s}){super("w:cols"),this.root.push(new Xg({space:{key:"w:space",value:t===void 0?void 0:ml(t)},count:{key:"w:num",value:e===void 0?void 0:to(e)},separate:{key:"w:sep",value:n},equalWidth:{key:"w:equalWidth",value:i}})),!i&&s&&s.forEach(l=>this.addChildElement(l))}}const w7=({type:r,linePitch:t,charSpace:e})=>new uu({name:"w:docGrid",attributes:{type:{key:"w:type",value:r},linePitch:{key:"w:linePitch",value:to(t)},charSpace:{key:"w:charSpace",value:e?to(e):void 0}}}),xf={DEFAULT:"default",FIRST:"first",EVEN:"even"};class x7 extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{type:"w:type",id:"r:id"})}}const MS={HEADER:"w:headerReference",FOOTER:"w:footerReference"};class Sv extends Re{constructor(t,e){super(t),this.root.push(new x7({type:e.type||xf.DEFAULT,id:`rId${e.id}`}))}}const _7=({countBy:r,start:t,restart:e,distance:n})=>new uu({name:"w:lnNumType",attributes:{countBy:{key:"w:countBy",value:r===void 0?void 0:to(r)},start:{key:"w:start",value:t===void 0?void 0:to(t)},restart:{key:"w:restart",value:e},distance:{key:"w:distance",value:n===void 0?void 0:ml(n)}}});class FS extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{display:"w:display",offsetFrom:"w:offsetFrom",zOrder:"w:zOrder"})}}class A7 extends $g{constructor(t){if(super("w:pgBorders"),!t)return this;t.pageBorders?this.root.push(new FS({display:t.pageBorders.display,offsetFrom:t.pageBorders.offsetFrom,zOrder:t.pageBorders.zOrder})):this.root.push(new FS({})),t.pageBorderTop&&this.root.push(new xi("w:top",t.pageBorderTop)),t.pageBorderLeft&&this.root.push(new xi("w:left",t.pageBorderLeft)),t.pageBorderBottom&&this.root.push(new xi("w:bottom",t.pageBorderBottom)),t.pageBorderRight&&this.root.push(new xi("w:right",t.pageBorderRight))}}class S7 extends Re{constructor(t,e,n,i,s,l,o){super("w:pgMar"),this.root.push(new Xg({top:{key:"w:top",value:Jc(t)},right:{key:"w:right",value:ml(e)},bottom:{key:"w:bottom",value:Jc(n)},left:{key:"w:left",value:ml(i)},header:{key:"w:header",value:ml(s)},footer:{key:"w:footer",value:ml(l)},gutter:{key:"w:gutter",value:ml(o)}}))}}class E7 extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{start:"w:start",formatType:"w:fmt",separator:"w:chapSep"})}}class C7 extends Re{constructor({start:t,formatType:e,separator:n}){super("w:pgNumType"),this.root.push(new E7({start:t===void 0?void 0:to(t),formatType:e,separator:n}))}}const Mb={PORTRAIT:"portrait",LANDSCAPE:"landscape"},T7=({width:r,height:t,orientation:e,code:n})=>{const i=ml(r),s=ml(t);return new uu({name:"w:pgSz",attributes:{width:{key:"w:w",value:e===Mb.LANDSCAPE?s:i},height:{key:"w:h",value:e===Mb.LANDSCAPE?i:s},orientation:{key:"w:orient",value:e},code:{key:"w:code",value:n}}})};class N7 extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{val:"w:val"})}}class k7 extends Re{constructor(t){super("w:textDirection"),this.root.push(new N7({val:t}))}}class R7 extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{val:"w:val"})}}class L7 extends Re{constructor(t){super("w:type"),this.root.push(new R7({val:t}))}}const Wc={TOP:1440,RIGHT:1440,BOTTOM:1440,LEFT:1440,HEADER:708,FOOTER:708,GUTTER:0},Ev={WIDTH:11906,HEIGHT:16838,ORIENTATION:Mb.PORTRAIT};class O7 extends Re{constructor({page:{size:{width:t=Ev.WIDTH,height:e=Ev.HEIGHT,orientation:n=Ev.ORIENTATION}={},margin:{top:i=Wc.TOP,right:s=Wc.RIGHT,bottom:l=Wc.BOTTOM,left:o=Wc.LEFT,header:c=Wc.HEADER,footer:h=Wc.FOOTER,gutter:f=Wc.GUTTER}={},pageNumbers:p={},borders:y,textDirection:m}={},grid:{linePitch:w=360,charSpace:b,type:_}={},headerWrapperGroup:v={},footerWrapperGroup:A={},lineNumbers:C,titlePage:S,verticalAlign:O,column:q,type:H}={}){super("w:sectPr"),this.addHeaderFooterGroup(MS.HEADER,v),this.addHeaderFooterGroup(MS.FOOTER,A),H&&this.root.push(new L7(H)),this.root.push(T7({width:t,height:e,orientation:n})),this.root.push(new S7(i,s,l,o,c,h,f)),y&&this.root.push(new A7(y)),C&&this.root.push(_7(C)),this.root.push(new C7(p)),q&&this.root.push(new b7(q)),O&&this.root.push(new v7(O)),S!==void 0&&this.root.push(new Le("w:titlePg",S)),m&&this.root.push(new k7(m)),this.root.push(w7({linePitch:w,charSpace:b,type:_}))}addHeaderFooterGroup(t,e){e.default&&this.root.push(new Sv(t,{type:xf.DEFAULT,id:e.default.View.ReferenceId})),e.first&&this.root.push(new Sv(t,{type:xf.FIRST,id:e.first.View.ReferenceId})),e.even&&this.root.push(new Sv(t,{type:xf.EVEN,id:e.even.View.ReferenceId}))}}class D7 extends Re{constructor(){super("w:body"),_e(this,"sections",[])}addSection(t){const e=this.sections.pop();this.root.push(this.createSectionParagraph(e)),this.sections.push(new O7(t))}prepForXml(t){return this.sections.length===1&&(this.root.splice(0,1),this.root.push(this.sections.pop())),super.prepForXml(t)}push(t){this.root.push(t)}createSectionParagraph(t){const e=new xc({}),n=new If({});return n.push(t),e.addChildElement(n),e}}const BS={wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",aink:"http://schemas.microsoft.com/office/drawing/2016/ink",am3d:"http://schemas.microsoft.com/office/drawing/2017/model3d",w16cex:"http://schemas.microsoft.com/office/word/2018/wordml/cex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16:"http://schemas.microsoft.com/office/word/2018/wordml",w16sdtdh:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"};class n0 extends Cn{constructor(t,e){super(cr({Ignorable:e},Object.fromEntries(t.map(n=>[n,BS[n]])))),_e(this,"xmlKeys",cr({Ignorable:"mc:Ignorable"},Object.fromEntries(Object.keys(BS).map(n=>[n,`xmlns:${n}`]))))}}class P7 extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{color:"w:color",themeColor:"w:themeColor",themeShade:"w:themeShade",themeTint:"w:themeTint"})}}class M7 extends Re{constructor(t){super("w:background"),this.root.push(new P7({color:t.color===void 0?void 0:Mf(t.color),themeColor:t.themeColor,themeShade:t.themeShade===void 0?void 0:vS(t.themeShade),themeTint:t.themeTint===void 0?void 0:vS(t.themeTint)}))}}class F7 extends Re{constructor(t){super("w:document"),_e(this,"body"),this.root.push(new n0(["wpc","mc","o","r","m","v","wp14","wp","w10","w","w14","w15","wpg","wpi","wne","wps","cx","cx1","cx2","cx3","cx4","cx5","cx6","cx7","cx8","aink","am3d","w16cex","w16cid","w16","w16sdtdh","w16se"],"w14 w15 wp14")),this.body=new D7,t.background&&this.root.push(new M7(t.background)),this.root.push(this.body)}add(t){return this.body.push(t),this}get Body(){return this.body}}class C6{constructor(t){_e(this,"document"),_e(this,"relationships"),this.document=new F7(t),this.relationships=new yh}get View(){return this.document}get Relationships(){return this.relationships}}class B7 extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{val:"w:val"})}}class I7 extends Re{constructor(){super("w:wordWrap"),this.root.push(new B7({val:0}))}}const j7=r=>{var t,e;return new uu({name:"w:framePr",attributes:{anchorLock:{key:"w:anchorLock",value:r.anchorLock},dropCap:{key:"w:dropCap",value:r.dropCap},width:{key:"w:w",value:r.width},height:{key:"w:h",value:r.height},x:{key:"w:x",value:r.position?r.position.x:void 0},y:{key:"w:y",value:r.position?r.position.y:void 0},anchorHorizontal:{key:"w:hAnchor",value:r.anchor.horizontal},anchorVertical:{key:"w:vAnchor",value:r.anchor.vertical},spaceHorizontal:{key:"w:hSpace",value:(t=r.space)==null?void 0:t.horizontal},spaceVertical:{key:"w:vSpace",value:(e=r.space)==null?void 0:e.vertical},rule:{key:"w:hRule",value:r.rule},alignmentX:{key:"w:xAlign",value:r.alignment?r.alignment.x:void 0},alignmentY:{key:"w:yAlign",value:r.alignment?r.alignment.y:void 0},lines:{key:"w:lines",value:r.lines},wrap:{key:"w:wrap",value:r.wrap}}})};class If extends $g{constructor(t){var e,n;if(super("w:pPr"),_e(this,"numberingReferences",[]),!t)return this;t.heading&&this.push(new Mm(t.heading)),t.bullet&&this.push(new Mm("ListParagraph")),t.numbering&&!t.style&&!t.heading&&(t.numbering.custom||this.push(new Mm("ListParagraph"))),t.style&&this.push(new Mm(t.style)),t.keepNext!==void 0&&this.push(new Le("w:keepNext",t.keepNext)),t.keepLines!==void 0&&this.push(new Le("w:keepLines",t.keepLines)),t.pageBreakBefore&&this.push(new QM),t.frame&&this.push(j7(t.frame)),t.widowControl!==void 0&&this.push(new Le("w:widowControl",t.widowControl)),t.bullet&&this.push(new Av(1,t.bullet.level)),t.numbering?(this.numberingReferences.push({reference:t.numbering.reference,instance:(e=t.numbering.instance)!=null?e:0}),this.push(new Av(`${t.numbering.reference}-${(n=t.numbering.instance)!=null?n:0}`,t.numbering.level))):t.numbering===!1&&this.push(new Av(0,0)),t.border&&this.push(new aM(t.border)),t.thematicBreak&&this.push(new oM),t.shading&&this.push(new w6(t.shading)),t.wordWrap&&this.push(new I7),t.overflowPunctuation&&this.push(new Le("w:overflowPunct",t.overflowPunctuation));const i=[...t.rightTabStop!==void 0?[{type:PS.RIGHT,position:t.rightTabStop}]:[],...t.tabStops?t.tabStops:[],...t.leftTabStop!==void 0?[{type:PS.LEFT,position:t.leftTabStop}]:[]];i.length>0&&this.push(new e7(i)),t.bidirectional!==void 0&&this.push(new Le("w:bidi",t.bidirectional)),t.spacing&&this.push(new JM(t.spacing)),t.indent&&this.push(new lM(t.indent)),t.contextualSpacing!==void 0&&this.push(new Le("w:contextualSpacing",t.contextualSpacing)),t.alignment&&this.push(new iM(t.alignment)),t.outlineLevel!==void 0&&this.push(new m7(t.outlineLevel)),t.suppressLineNumbers!==void 0&&this.push(new Le("w:suppressLineNumbers",t.suppressLineNumbers)),t.autoSpaceEastAsianText!==void 0&&this.push(new Le("w:autoSpaceDN",t.autoSpaceEastAsianText)),t.run&&this.push(new gh(t.run))}push(t){this.root.push(t)}prepForXml(t){if(t.viewWrapper instanceof C6)for(const e of this.numberingReferences)t.file.Numbering.createConcreteNumberingInstance(e.reference,e.instance);return super.prepForXml(t)}}class xc extends a7{constructor(t){if(super("w:p"),_e(this,"properties"),typeof t=="string")return this.properties=new If({}),this.root.push(this.properties),this.root.push(new df(t)),this;if(this.properties=new If(t),this.root.push(this.properties),t.text&&this.root.push(new df(t.text)),t.children)for(const e of t.children){if(e instanceof f7){this.root.push(e.start);for(const n of e.children)this.root.push(n);this.root.push(e.end);continue}this.root.push(e)}}prepForXml(t){for(const e of this.root)if(e instanceof u7){const n=this.root.indexOf(e),i=new l7(e.options.children,zM());t.viewWrapper.Relationships.createRelationship(i.linkId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",e.options.link,VM.EXTERNAL),this.root[n]=i}return super.prepForXml(t)}addRunToFront(t){return this.root.splice(1,0,t),this}}const Zh={style:t0.NONE,size:0,color:"auto"},Jh={style:t0.SINGLE,size:4,color:"auto"};class U7 extends Re{constructor(t){super("w:tblBorders"),t.top?this.root.push(new xi("w:top",t.top)):this.root.push(new xi("w:top",Jh)),t.left?this.root.push(new xi("w:left",t.left)):this.root.push(new xi("w:left",Jh)),t.bottom?this.root.push(new xi("w:bottom",t.bottom)):this.root.push(new xi("w:bottom",Jh)),t.right?this.root.push(new xi("w:right",t.right)):this.root.push(new xi("w:right",Jh)),t.insideHorizontal?this.root.push(new xi("w:insideH",t.insideHorizontal)):this.root.push(new xi("w:insideH",Jh)),t.insideVertical?this.root.push(new xi("w:insideV",t.insideVertical)):this.root.push(new xi("w:insideV",Jh))}}_e(U7,"NONE",{top:Zh,bottom:Zh,left:Zh,right:Zh,insideHorizontal:Zh,insideVertical:Zh});class z7 extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class q7 extends Re{constructor(){super("Properties"),this.root.push(new z7({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"}))}}class H7 extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{xmlns:"xmlns"})}}class G7 extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{contentType:"ContentType",extension:"Extension"})}}class Du extends Re{constructor(t,e){super("Default"),this.root.push(new G7({contentType:t,extension:e}))}}class V7 extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{contentType:"ContentType",partName:"PartName"})}}class qo extends Re{constructor(t,e){super("Override"),this.root.push(new V7({contentType:t,partName:e}))}}class W7 extends Re{constructor(){super("Types"),this.root.push(new H7({xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"})),this.root.push(new Du("image/png","png")),this.root.push(new Du("image/jpeg","jpeg")),this.root.push(new Du("image/jpeg","jpg")),this.root.push(new Du("image/bmp","bmp")),this.root.push(new Du("image/gif","gif")),this.root.push(new Du("image/svg+xml","svg")),this.root.push(new Du("application/vnd.openxmlformats-package.relationships+xml","rels")),this.root.push(new Du("application/xml","xml")),this.root.push(new Du("application/vnd.openxmlformats-officedocument.obfuscatedFont","odttf")),this.root.push(new qo("application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml","/word/document.xml")),this.root.push(new qo("application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml","/word/styles.xml")),this.root.push(new qo("application/vnd.openxmlformats-package.core-properties+xml","/docProps/core.xml")),this.root.push(new qo("application/vnd.openxmlformats-officedocument.custom-properties+xml","/docProps/custom.xml")),this.root.push(new qo("application/vnd.openxmlformats-officedocument.extended-properties+xml","/docProps/app.xml")),this.root.push(new qo("application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml","/word/numbering.xml")),this.root.push(new qo("application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml","/word/footnotes.xml")),this.root.push(new qo("application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml","/word/settings.xml")),this.root.push(new qo("application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml","/word/comments.xml")),this.root.push(new qo("application/vnd.openxmlformats-officedocument.wordprocessingml.fontTable+xml","/word/fontTable.xml"))}addFooter(t){this.root.push(new qo("application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml",`/word/footer${t}.xml`))}addHeader(t){this.root.push(new qo("application/vnd.openxmlformats-officedocument.wordprocessingml.header+xml",`/word/header${t}.xml`))}}class K7 extends Re{constructor(t){super("cp:coreProperties"),this.root.push(new n0(["cp","dc","dcterms","dcmitype","xsi"])),t.title&&this.root.push(new Gc("dc:title",t.title)),t.subject&&this.root.push(new Gc("dc:subject",t.subject)),t.creator&&this.root.push(new Gc("dc:creator",t.creator)),t.keywords&&this.root.push(new Gc("cp:keywords",t.keywords)),t.description&&this.root.push(new Gc("dc:description",t.description)),t.lastModifiedBy&&this.root.push(new Gc("cp:lastModifiedBy",t.lastModifiedBy)),t.revision&&this.root.push(new Gc("cp:revision",String(t.revision))),this.root.push(new IS("dcterms:created")),this.root.push(new IS("dcterms:modified"))}}class $7 extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{type:"xsi:type"})}}class IS extends Re{constructor(t){super(t),this.root.push(new $7({type:"dcterms:W3CDTF"})),this.root.push(nM(new Date))}}class X7 extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class Y7 extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{fmtid:"fmtid",pid:"pid",name:"name"})}}class Q7 extends Re{constructor(t,e){super("property"),this.root.push(new Y7({fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t.toString(),name:e.name})),this.root.push(new Z7(e.value))}}class Z7 extends Re{constructor(t){super("vt:lpwstr"),this.root.push(t)}}class J7 extends Re{constructor(t){super("Properties"),_e(this,"nextId"),_e(this,"properties",[]),this.root.push(new X7({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"})),this.nextId=2;for(const e of t)this.addCustomProperty(e)}prepForXml(t){return this.properties.forEach(e=>this.root.push(e)),super.prepForXml(t)}addCustomProperty(t){this.properties.push(new Q7(this.nextId++,t))}}const Fm=({id:r,fontKey:t,subsetted:e},n)=>new uu({name:n,attributes:cr({id:{key:"r:id",value:r}},t?{fontKey:{key:"w:fontKey",value:`{${t}}`}}:{}),children:[...e?[new Le("w:subsetted",e)]:[]]}),tF=({name:r,altName:t,panose1:e,charset:n,family:i,notTrueType:s,pitch:l,sig:o,embedRegular:c,embedBold:h,embedItalic:f,embedBoldItalic:p})=>new uu({name:"w:font",attributes:{name:{key:"w:name",value:r}},children:[...t?[Pd("w:altName",t)]:[],...e?[Pd("w:panose1",e)]:[],...n?[Pd("w:charset",n)]:[],Pd("w:family",i),...s?[new Le("w:notTrueType",s)]:[],Pd("w:pitch",l),...o?[new uu({name:"w:sig",attributes:{usb0:{key:"w:usb0",value:o.usb0},usb1:{key:"w:usb1",value:o.usb1},usb2:{key:"w:usb2",value:o.usb2},usb3:{key:"w:usb3",value:o.usb3},csb0:{key:"w:csb0",value:o.csb0},csb1:{key:"w:csb1",value:o.csb1}}})]:[],...c?[Fm(c,"w:embedRegular")]:[],...h?[Fm(h,"w:embedBold")]:[],...f?[Fm(f,"w:embedItalic")]:[],...p?[Fm(p,"w:embedBoldItalic")]:[]]}),eF=({name:r,index:t,fontKey:e,characterSet:n})=>tF({name:r,sig:{usb0:"E0002AFF",usb1:"C000247B",usb2:"00000009",usb3:"00000000",csb0:"000001FF",csb1:"00000000"},charset:n,family:"auto",pitch:"variable",embedRegular:{fontKey:e,id:`rId${t}`}}),nF=r=>new uu({name:"w:fonts",attributes:{mc:{key:"xmlns:mc",value:"http://schemas.openxmlformats.org/markup-compatibility/2006"},r:{key:"xmlns:r",value:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"},w:{key:"xmlns:w",value:"http://schemas.openxmlformats.org/wordprocessingml/2006/main"},w14:{key:"xmlns:w14",value:"http://schemas.microsoft.com/office/word/2010/wordml"},w15:{key:"xmlns:w15",value:"http://schemas.microsoft.com/office/word/2012/wordml"},w16cex:{key:"xmlns:w16cex",value:"http://schemas.microsoft.com/office/word/2018/wordml/cex"},w16cid:{key:"xmlns:w16cid",value:"http://schemas.microsoft.com/office/word/2016/wordml/cid"},w16:{key:"xmlns:w16",value:"http://schemas.microsoft.com/office/word/2018/wordml"},w16sdtdh:{key:"xmlns:w16sdtdh",value:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash"},w16se:{key:"xmlns:w16se",value:"http://schemas.microsoft.com/office/word/2015/wordml/symex"},Ignorable:{key:"mc:Ignorable",value:"w14 w15 w16se w16cid w16 w16cex w16sdtdh"}},children:r.map((t,e)=>eF({name:t.name,index:e+1,fontKey:t.fontKey}))});class rF{constructor(t){_e(this,"fontTable"),_e(this,"relationships"),_e(this,"fontOptionsWithKey",[]),this.options=t,this.fontOptionsWithKey=t.map(e=>Df(cr({},e),{fontKey:qM()})),this.fontTable=nF(this.fontOptionsWithKey),this.relationships=new yh;for(let e=0;e<t.length;e++)this.relationships.createRelationship(e+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/font",`fonts/${t[e].name}.odttf`)}get View(){return this.fontTable}get Relationships(){return this.relationships}}class iF extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type"})}}let sF=class extends g6{constructor(t,e){super("w:ftr",e),_e(this,"refId"),this.refId=t,e||this.root.push(new iF({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}))}get ReferenceId(){return this.refId}add(t){this.root.push(t)}};class aF{constructor(t,e,n){_e(this,"footer"),_e(this,"relationships"),this.media=t,this.footer=new sF(e,n),this.relationships=new yh}add(t){this.footer.add(t)}addChildElement(t){this.footer.addChildElement(t)}get View(){return this.footer}get Relationships(){return this.relationships}get Media(){return this.media}}class oF extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{type:"w:type",id:"w:id"})}}class lF extends Re{constructor(){super("w:footnoteRef")}}class uF extends e0{constructor(){super({style:"FootnoteReference"}),this.root.push(new lF)}}const jS={SEPERATOR:"separator",CONTINUATION_SEPERATOR:"continuationSeparator"};class Cv extends Re{constructor(t){super("w:footnote"),this.root.push(new oF({type:t.type,id:t.id}));for(let e=0;e<t.children.length;e++){const n=t.children[e];e===0&&n.addRunToFront(new uF),this.root.push(n)}}}class cF extends Re{constructor(){super("w:continuationSeparator")}}class hF extends e0{constructor(){super({}),this.root.push(new cF)}}class fF extends Re{constructor(){super("w:separator")}}class dF extends e0{constructor(){super({}),this.root.push(new fF)}}class pF extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class mF extends Re{constructor(){super("w:footnotes"),this.root.push(new pF({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const t=new Cv({id:-1,type:jS.SEPERATOR,children:[new xc({spacing:{after:0,line:240,lineRule:Pb.AUTO},children:[new dF]})]});this.root.push(t);const e=new Cv({id:0,type:jS.CONTINUATION_SEPERATOR,children:[new xc({spacing:{after:0,line:240,lineRule:Pb.AUTO},children:[new hF]})]});this.root.push(e)}createFootNote(t,e){const n=new Cv({id:t,children:e});this.root.push(n)}}class gF{constructor(){_e(this,"footnotess"),_e(this,"relationships"),this.footnotess=new mF,this.relationships=new yh}get View(){return this.footnotess}get Relationships(){return this.relationships}}class yF extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",w16cid:"xmlns:w16cid",w16se:"xmlns:w16se"})}}let vF=class extends g6{constructor(t,e){super("w:hdr",e),_e(this,"refId"),this.refId=t,e||this.root.push(new yF({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"}))}get ReferenceId(){return this.refId}add(t){this.root.push(t)}};class bF{constructor(t,e,n){_e(this,"header"),_e(this,"relationships"),this.media=t,this.header=new vF(e,n),this.relationships=new yh}add(t){return this.header.add(t),this}addChildElement(t){this.header.addChildElement(t)}get View(){return this.header}get Relationships(){return this.relationships}get Media(){return this.media}}class wF{constructor(){_e(this,"map"),this.map=new Map}addImage(t,e){this.map.set(t,e)}get Array(){return Array.from(this.map.values())}}const Pu={BULLET:"bullet"};class xF extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{ilvl:"w:ilvl",tentative:"w15:tentative"})}}class _F extends Re{constructor(t){super("w:numFmt"),this.root.push(new Wi({val:t}))}}class AF extends Re{constructor(t){super("w:lvlText"),this.root.push(new Wi({val:t}))}}class SF extends Re{constructor(t){super("w:lvlJc"),this.root.push(new Wi({val:t}))}}class EF extends Re{constructor(t){super("w:suff"),this.root.push(new Wi({val:t}))}}class CF extends Re{constructor(){super("w:isLgl")}}class TF extends Re{constructor({level:t,format:e,text:n,alignment:i=Jl.START,start:s=1,style:l,suffix:o,isLegalNumberingStyle:c}){if(super("w:lvl"),_e(this,"paragraphProperties"),_e(this,"runProperties"),this.root.push(new $d("w:start",to(s))),e&&this.root.push(new _F(e)),o&&this.root.push(new EF(o)),c&&this.root.push(new CF),n&&this.root.push(new AF(n)),this.root.push(new SF(i)),this.paragraphProperties=new If(l&&l.paragraph),this.runProperties=new gh(l&&l.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties),t>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new xF({ilvl:to(t),tentative:1}))}}class NF extends TF{}class kF extends Re{constructor(t){super("w:multiLevelType"),this.root.push(new Wi({val:t}))}}class RF extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{abstractNumId:"w:abstractNumId",restartNumberingAfterBreak:"w15:restartNumberingAfterBreak"})}}class US extends Re{constructor(t,e){super("w:abstractNum"),_e(this,"id"),this.root.push(new RF({abstractNumId:to(t),restartNumberingAfterBreak:0})),this.root.push(new kF("hybridMultilevel")),this.id=t;for(const n of e)this.root.push(new NF(n))}}class LF extends Re{constructor(t){super("w:abstractNumId"),this.root.push(new Wi({val:t}))}}class OF extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{numId:"w:numId"})}}class zS extends Re{constructor(t){if(super("w:num"),_e(this,"numId"),_e(this,"reference"),_e(this,"instance"),this.numId=t.numId,this.reference=t.reference,this.instance=t.instance,this.root.push(new OF({numId:to(t.numId)})),this.root.push(new LF(to(t.abstractNumId))),t.overrideLevels&&t.overrideLevels.length)for(const e of t.overrideLevels)this.root.push(new PF(e.num,e.start))}}class DF extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{ilvl:"w:ilvl"})}}class PF extends Re{constructor(t,e){super("w:lvlOverride"),this.root.push(new DF({ilvl:t})),e!==void 0&&this.root.push(new FF(e))}}class MF extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{val:"w:val"})}}class FF extends Re{constructor(t){super("w:startOverride"),this.root.push(new MF({val:t}))}}class BF extends Re{constructor(t){super("w:numbering"),_e(this,"abstractNumberingMap",new Map),_e(this,"concreteNumberingMap",new Map),_e(this,"referenceConfigMap",new Map),_e(this,"abstractNumUniqueNumericId",IM()),_e(this,"concreteNumUniqueNumericId",jM()),this.root.push(new n0(["wpc","mc","o","r","m","v","wp14","wp","w10","w","w14","w15","wpg","wpi","wne","wps"],"w14 w15 wp14"));const e=new US(this.abstractNumUniqueNumericId(),[{level:0,format:Pu.BULLET,text:"",alignment:Jl.LEFT,style:{paragraph:{indent:{left:hl(.5),hanging:hl(.25)}}}},{level:1,format:Pu.BULLET,text:"",alignment:Jl.LEFT,style:{paragraph:{indent:{left:hl(1),hanging:hl(.25)}}}},{level:2,format:Pu.BULLET,text:"",alignment:Jl.LEFT,style:{paragraph:{indent:{left:2160,hanging:hl(.25)}}}},{level:3,format:Pu.BULLET,text:"",alignment:Jl.LEFT,style:{paragraph:{indent:{left:2880,hanging:hl(.25)}}}},{level:4,format:Pu.BULLET,text:"",alignment:Jl.LEFT,style:{paragraph:{indent:{left:3600,hanging:hl(.25)}}}},{level:5,format:Pu.BULLET,text:"",alignment:Jl.LEFT,style:{paragraph:{indent:{left:4320,hanging:hl(.25)}}}},{level:6,format:Pu.BULLET,text:"",alignment:Jl.LEFT,style:{paragraph:{indent:{left:5040,hanging:hl(.25)}}}},{level:7,format:Pu.BULLET,text:"",alignment:Jl.LEFT,style:{paragraph:{indent:{left:5760,hanging:hl(.25)}}}},{level:8,format:Pu.BULLET,text:"",alignment:Jl.LEFT,style:{paragraph:{indent:{left:6480,hanging:hl(.25)}}}}]);this.concreteNumberingMap.set("default-bullet-numbering",new zS({numId:1,abstractNumId:e.id,reference:"default-bullet-numbering",instance:0,overrideLevels:[{num:0,start:1}]})),this.abstractNumberingMap.set("default-bullet-numbering",e);for(const n of t.config)this.abstractNumberingMap.set(n.reference,new US(this.abstractNumUniqueNumericId(),n.levels)),this.referenceConfigMap.set(n.reference,n.levels)}prepForXml(t){for(const e of this.abstractNumberingMap.values())this.root.push(e);for(const e of this.concreteNumberingMap.values())this.root.push(e);return super.prepForXml(t)}createConcreteNumberingInstance(t,e){const n=this.abstractNumberingMap.get(t);if(!n)return;const i=`${t}-${e}`;if(this.concreteNumberingMap.has(i))return;const s=this.referenceConfigMap.get(t),l=s&&s[0].start,o={numId:this.concreteNumUniqueNumericId(),abstractNumId:n.id,reference:t,instance:e,overrideLevels:[l&&Number.isInteger(l)?{num:0,start:l}:{num:0,start:1}]};this.concreteNumberingMap.set(i,new zS(o))}get ConcreteNumbering(){return Array.from(this.concreteNumberingMap.values())}get ReferenceConfig(){return Array.from(this.referenceConfigMap.values())}}class IF extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{version:"w:val",name:"w:name",uri:"w:uri"})}}class jF extends Re{constructor(t){super("w:compatSetting"),this.root.push(new IF({version:t,uri:"http://schemas.microsoft.com/office/word",name:"compatibilityMode"}))}}class UF extends Re{constructor(t){super("w:compat"),t.version&&this.root.push(new jF(t.version)),t.useSingleBorderforContiguousCells&&this.root.push(new Le("w:useSingleBorderforContiguousCells",t.useSingleBorderforContiguousCells)),t.wordPerfectJustification&&this.root.push(new Le("w:wpJustification",t.wordPerfectJustification)),t.noTabStopForHangingIndent&&this.root.push(new Le("w:noTabHangInd",t.noTabStopForHangingIndent)),t.noLeading&&this.root.push(new Le("w:noLeading",t.noLeading)),t.spaceForUnderline&&this.root.push(new Le("w:spaceForUL",t.spaceForUnderline)),t.noColumnBalance&&this.root.push(new Le("w:noColumnBalance",t.noColumnBalance)),t.balanceSingleByteDoubleByteWidth&&this.root.push(new Le("w:balanceSingleByteDoubleByteWidth",t.balanceSingleByteDoubleByteWidth)),t.noExtraLineSpacing&&this.root.push(new Le("w:noExtraLineSpacing",t.noExtraLineSpacing)),t.doNotLeaveBackslashAlone&&this.root.push(new Le("w:doNotLeaveBackslashAlone",t.doNotLeaveBackslashAlone)),t.underlineTrailingSpaces&&this.root.push(new Le("w:ulTrailSpace",t.underlineTrailingSpaces)),t.doNotExpandShiftReturn&&this.root.push(new Le("w:doNotExpandShiftReturn",t.doNotExpandShiftReturn)),t.spacingInWholePoints&&this.root.push(new Le("w:spacingInWholePoints",t.spacingInWholePoints)),t.lineWrapLikeWord6&&this.root.push(new Le("w:lineWrapLikeWord6",t.lineWrapLikeWord6)),t.printBodyTextBeforeHeader&&this.root.push(new Le("w:printBodyTextBeforeHeader",t.printBodyTextBeforeHeader)),t.printColorsBlack&&this.root.push(new Le("w:printColBlack",t.printColorsBlack)),t.spaceWidth&&this.root.push(new Le("w:wpSpaceWidth",t.spaceWidth)),t.showBreaksInFrames&&this.root.push(new Le("w:showBreaksInFrames",t.showBreaksInFrames)),t.subFontBySize&&this.root.push(new Le("w:subFontBySize",t.subFontBySize)),t.suppressBottomSpacing&&this.root.push(new Le("w:suppressBottomSpacing",t.suppressBottomSpacing)),t.suppressTopSpacing&&this.root.push(new Le("w:suppressTopSpacing",t.suppressTopSpacing)),t.suppressSpacingAtTopOfPage&&this.root.push(new Le("w:suppressSpacingAtTopOfPage",t.suppressSpacingAtTopOfPage)),t.suppressTopSpacingWP&&this.root.push(new Le("w:suppressTopSpacingWP",t.suppressTopSpacingWP)),t.suppressSpBfAfterPgBrk&&this.root.push(new Le("w:suppressSpBfAfterPgBrk",t.suppressSpBfAfterPgBrk)),t.swapBordersFacingPages&&this.root.push(new Le("w:swapBordersFacingPages",t.swapBordersFacingPages)),t.convertMailMergeEsc&&this.root.push(new Le("w:convMailMergeEsc",t.convertMailMergeEsc)),t.truncateFontHeightsLikeWP6&&this.root.push(new Le("w:truncateFontHeightsLikeWP6",t.truncateFontHeightsLikeWP6)),t.macWordSmallCaps&&this.root.push(new Le("w:mwSmallCaps",t.macWordSmallCaps)),t.usePrinterMetrics&&this.root.push(new Le("w:usePrinterMetrics",t.usePrinterMetrics)),t.doNotSuppressParagraphBorders&&this.root.push(new Le("w:doNotSuppressParagraphBorders",t.doNotSuppressParagraphBorders)),t.wrapTrailSpaces&&this.root.push(new Le("w:wrapTrailSpaces",t.wrapTrailSpaces)),t.footnoteLayoutLikeWW8&&this.root.push(new Le("w:footnoteLayoutLikeWW8",t.footnoteLayoutLikeWW8)),t.shapeLayoutLikeWW8&&this.root.push(new Le("w:shapeLayoutLikeWW8",t.shapeLayoutLikeWW8)),t.alignTablesRowByRow&&this.root.push(new Le("w:alignTablesRowByRow",t.alignTablesRowByRow)),t.forgetLastTabAlignment&&this.root.push(new Le("w:forgetLastTabAlignment",t.forgetLastTabAlignment)),t.adjustLineHeightInTable&&this.root.push(new Le("w:adjustLineHeightInTable",t.adjustLineHeightInTable)),t.autoSpaceLikeWord95&&this.root.push(new Le("w:autoSpaceLikeWord95",t.autoSpaceLikeWord95)),t.noSpaceRaiseLower&&this.root.push(new Le("w:noSpaceRaiseLower",t.noSpaceRaiseLower)),t.doNotUseHTMLParagraphAutoSpacing&&this.root.push(new Le("w:doNotUseHTMLParagraphAutoSpacing",t.doNotUseHTMLParagraphAutoSpacing)),t.layoutRawTableWidth&&this.root.push(new Le("w:layoutRawTableWidth",t.layoutRawTableWidth)),t.layoutTableRowsApart&&this.root.push(new Le("w:layoutTableRowsApart",t.layoutTableRowsApart)),t.useWord97LineBreakRules&&this.root.push(new Le("w:useWord97LineBreakRules",t.useWord97LineBreakRules)),t.doNotBreakWrappedTables&&this.root.push(new Le("w:doNotBreakWrappedTables",t.doNotBreakWrappedTables)),t.doNotSnapToGridInCell&&this.root.push(new Le("w:doNotSnapToGridInCell",t.doNotSnapToGridInCell)),t.selectFieldWithFirstOrLastCharacter&&this.root.push(new Le("w:selectFldWithFirstOrLastChar",t.selectFieldWithFirstOrLastCharacter)),t.applyBreakingRules&&this.root.push(new Le("w:applyBreakingRules",t.applyBreakingRules)),t.doNotWrapTextWithPunctuation&&this.root.push(new Le("w:doNotWrapTextWithPunct",t.doNotWrapTextWithPunctuation)),t.doNotUseEastAsianBreakRules&&this.root.push(new Le("w:doNotUseEastAsianBreakRules",t.doNotUseEastAsianBreakRules)),t.useWord2002TableStyleRules&&this.root.push(new Le("w:useWord2002TableStyleRules",t.useWord2002TableStyleRules)),t.growAutofit&&this.root.push(new Le("w:growAutofit",t.growAutofit)),t.useFELayout&&this.root.push(new Le("w:useFELayout",t.useFELayout)),t.useNormalStyleForList&&this.root.push(new Le("w:useNormalStyleForList",t.useNormalStyleForList)),t.doNotUseIndentAsNumberingTabStop&&this.root.push(new Le("w:doNotUseIndentAsNumberingTabStop",t.doNotUseIndentAsNumberingTabStop)),t.useAlternateEastAsianLineBreakRules&&this.root.push(new Le("w:useAltKinsokuLineBreakRules",t.useAlternateEastAsianLineBreakRules)),t.allowSpaceOfSameStyleInTable&&this.root.push(new Le("w:allowSpaceOfSameStyleInTable",t.allowSpaceOfSameStyleInTable)),t.doNotSuppressIndentation&&this.root.push(new Le("w:doNotSuppressIndentation",t.doNotSuppressIndentation)),t.doNotAutofitConstrainedTables&&this.root.push(new Le("w:doNotAutofitConstrainedTables",t.doNotAutofitConstrainedTables)),t.autofitToFirstFixedWidthCell&&this.root.push(new Le("w:autofitToFirstFixedWidthCell",t.autofitToFirstFixedWidthCell)),t.underlineTabInNumberingList&&this.root.push(new Le("w:underlineTabInNumList",t.underlineTabInNumberingList)),t.displayHangulFixedWidth&&this.root.push(new Le("w:displayHangulFixedWidth",t.displayHangulFixedWidth)),t.splitPgBreakAndParaMark&&this.root.push(new Le("w:splitPgBreakAndParaMark",t.splitPgBreakAndParaMark)),t.doNotVerticallyAlignCellWithSp&&this.root.push(new Le("w:doNotVertAlignCellWithSp",t.doNotVerticallyAlignCellWithSp)),t.doNotBreakConstrainedForcedTable&&this.root.push(new Le("w:doNotBreakConstrainedForcedTable",t.doNotBreakConstrainedForcedTable)),t.ignoreVerticalAlignmentInTextboxes&&this.root.push(new Le("w:doNotVertAlignInTxbx",t.ignoreVerticalAlignmentInTextboxes)),t.useAnsiKerningPairs&&this.root.push(new Le("w:useAnsiKerningPairs",t.useAnsiKerningPairs)),t.cachedColumnBalance&&this.root.push(new Le("w:cachedColBalance",t.cachedColumnBalance))}}class zF extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class qF extends Re{constructor(t){var e,n,i,s,l,o,c,h;super("w:settings"),this.root.push(new zF({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"})),this.root.push(new Le("w:displayBackgroundShape",!0)),t.trackRevisions!==void 0&&this.root.push(new Le("w:trackRevisions",t.trackRevisions)),t.evenAndOddHeaders!==void 0&&this.root.push(new Le("w:evenAndOddHeaders",t.evenAndOddHeaders)),t.updateFields!==void 0&&this.root.push(new Le("w:updateFields",t.updateFields)),t.defaultTabStop!==void 0&&this.root.push(new $d("w:defaultTabStop",t.defaultTabStop)),((e=t.hyphenation)==null?void 0:e.autoHyphenation)!==void 0&&this.root.push(new Le("w:autoHyphenation",t.hyphenation.autoHyphenation)),((n=t.hyphenation)==null?void 0:n.hyphenationZone)!==void 0&&this.root.push(new $d("w:hyphenationZone",t.hyphenation.hyphenationZone)),((i=t.hyphenation)==null?void 0:i.consecutiveHyphenLimit)!==void 0&&this.root.push(new $d("w:consecutiveHyphenLimit",t.hyphenation.consecutiveHyphenLimit)),((s=t.hyphenation)==null?void 0:s.doNotHyphenateCaps)!==void 0&&this.root.push(new Le("w:doNotHyphenateCaps",t.hyphenation.doNotHyphenateCaps)),this.root.push(new UF(Df(cr({},(l=t.compatibility)!=null?l:{}),{version:(h=(c=(o=t.compatibility)==null?void 0:o.version)!=null?c:t.compatibilityModeVersion)!=null?h:15})))}}class T6 extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{val:"w:val"})}}class HF extends Re{constructor(t){super("w:name"),this.root.push(new T6({val:t}))}}class GF extends Re{constructor(t){super("w:uiPriority"),this.root.push(new T6({val:to(t)}))}}class VF extends Cn{constructor(){super(...arguments),_e(this,"xmlKeys",{type:"w:type",styleId:"w:styleId",default:"w:default",customStyle:"w:customStyle"})}}class N6 extends Re{constructor(t,e){super("w:style"),this.root.push(new VF(t)),e.name&&this.root.push(new HF(e.name)),e.basedOn&&this.root.push(new wf("w:basedOn",e.basedOn)),e.next&&this.root.push(new wf("w:next",e.next)),e.link&&this.root.push(new wf("w:link",e.link)),e.uiPriority!==void 0&&this.root.push(new GF(e.uiPriority)),e.semiHidden!==void 0&&this.root.push(new Le("w:semiHidden",e.semiHidden)),e.unhideWhenUsed!==void 0&&this.root.push(new Le("w:unhideWhenUsed",e.unhideWhenUsed)),e.quickFormat!==void 0&&this.root.push(new Le("w:qFormat",e.quickFormat))}}class r0 extends N6{constructor(t){super({type:"paragraph",styleId:t.id},t),_e(this,"paragraphProperties"),_e(this,"runProperties"),this.paragraphProperties=new If(t.paragraph),this.runProperties=new gh(t.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties)}}class i0 extends N6{constructor(t){super({type:"character",styleId:t.id},cr({uiPriority:99,unhideWhenUsed:!0},t)),_e(this,"runProperties"),this.runProperties=new gh(t.run),this.root.push(this.runProperties)}}class Dc extends r0{constructor(t){super(cr({basedOn:"Normal",next:"Normal",quickFormat:!0},t))}}class WF extends Dc{constructor(t){super(cr({id:"Title",name:"Title"},t))}}class KF extends Dc{constructor(t){super(cr({id:"Heading1",name:"Heading 1"},t))}}class $F extends Dc{constructor(t){super(cr({id:"Heading2",name:"Heading 2"},t))}}class XF extends Dc{constructor(t){super(cr({id:"Heading3",name:"Heading 3"},t))}}class YF extends Dc{constructor(t){super(cr({id:"Heading4",name:"Heading 4"},t))}}class QF extends Dc{constructor(t){super(cr({id:"Heading5",name:"Heading 5"},t))}}class ZF extends Dc{constructor(t){super(cr({id:"Heading6",name:"Heading 6"},t))}}class JF extends Dc{constructor(t){super(cr({id:"Strong",name:"Strong"},t))}}class tB extends r0{constructor(t){super(cr({id:"ListParagraph",name:"List Paragraph",basedOn:"Normal",quickFormat:!0},t))}}class eB extends r0{constructor(t){super(cr({id:"FootnoteText",name:"footnote text",link:"FootnoteTextChar",basedOn:"Normal",uiPriority:99,semiHidden:!0,unhideWhenUsed:!0,paragraph:{spacing:{after:0,line:240,lineRule:Pb.AUTO}},run:{size:20}},t))}}class nB extends i0{constructor(t){super(cr({id:"FootnoteReference",name:"footnote reference",basedOn:"DefaultParagraphFont",semiHidden:!0,run:{superScript:!0}},t))}}class rB extends i0{constructor(t){super(cr({id:"FootnoteTextChar",name:"Footnote Text Char",basedOn:"DefaultParagraphFont",link:"FootnoteText",semiHidden:!0,run:{size:20}},t))}}class iB extends i0{constructor(t){super(cr({id:"Hyperlink",name:"Hyperlink",basedOn:"DefaultParagraphFont",run:{color:"0563C1",underline:{type:_6.SINGLE}}},t))}}class Fb extends Re{constructor(t){if(super("w:styles"),t.initialStyles&&this.root.push(t.initialStyles),t.importedStyles)for(const e of t.importedStyles)this.root.push(e);if(t.paragraphStyles)for(const e of t.paragraphStyles)this.root.push(new r0(e));if(t.characterStyles)for(const e of t.characterStyles)this.root.push(new i0(e))}}class sB extends Re{constructor(t){super("w:pPrDefault"),this.root.push(new If(t))}}class aB extends Re{constructor(t){super("w:rPrDefault"),this.root.push(new gh(t))}}class oB extends Re{constructor(t){super("w:docDefaults"),_e(this,"runPropertiesDefaults"),_e(this,"paragraphPropertiesDefaults"),this.runPropertiesDefaults=new aB(t.run),this.paragraphPropertiesDefaults=new sB(t.paragraph),this.root.push(this.runPropertiesDefaults),this.root.push(this.paragraphPropertiesDefaults)}}class lB{newInstance(t){const e=m6.xml2js(t,{compact:!1});let n;for(const l of e.elements||[])l.name==="w:styles"&&(n=l);if(n===void 0)throw new Error("can not find styles element");const i=n.elements||[];return new Fb({initialStyles:new ZP(n.attributes),importedStyles:i.map(l=>H2(l))})}}class qS{newInstance(t={}){var e;return{initialStyles:new n0(["mc","r","w","w14","w15"],"w14 w15"),importedStyles:[new oB((e=t.document)!=null?e:{}),new WF(cr({run:{size:56}},t.title)),new KF(cr({run:{color:"2E74B5",size:32}},t.heading1)),new $F(cr({run:{color:"2E74B5",size:26}},t.heading2)),new XF(cr({run:{color:"1F4D78",size:24}},t.heading3)),new YF(cr({run:{color:"2E74B5",italics:!0}},t.heading4)),new QF(cr({run:{color:"2E74B5"}},t.heading5)),new ZF(cr({run:{color:"1F4D78"}},t.heading6)),new JF(cr({run:{bold:!0}},t.strong)),new tB(t.listParagraph||{}),new iB(t.hyperlink||{}),new nB(t.footnoteReference||{}),new eB(t.footnoteText||{}),new rB(t.footnoteTextChar||{})]}}}let uB=class{constructor(t){_e(this,"currentRelationshipId",1),_e(this,"documentWrapper"),_e(this,"headers",[]),_e(this,"footers",[]),_e(this,"coreProperties"),_e(this,"numbering"),_e(this,"media"),_e(this,"fileRelationships"),_e(this,"footnotesWrapper"),_e(this,"settings"),_e(this,"contentTypes"),_e(this,"customProperties"),_e(this,"appProperties"),_e(this,"styles"),_e(this,"comments"),_e(this,"fontWrapper");var e,n,i,s,l,o,c,h,f,p,y,m;if(this.coreProperties=new K7(Df(cr({},t),{creator:(e=t.creator)!=null?e:"Un-named",revision:(n=t.revision)!=null?n:1,lastModifiedBy:(i=t.lastModifiedBy)!=null?i:"Un-named"})),this.numbering=new BF(t.numbering?t.numbering:{config:[]}),this.comments=new YM((s=t.comments)!=null?s:{children:[]}),this.fileRelationships=new yh,this.customProperties=new J7((l=t.customProperties)!=null?l:[]),this.appProperties=new q7,this.footnotesWrapper=new gF,this.contentTypes=new W7,this.documentWrapper=new C6({background:t.background}),this.settings=new qF({compatibilityModeVersion:t.compatabilityModeVersion,compatibility:t.compatibility,evenAndOddHeaders:!!t.evenAndOddHeaderAndFooters,trackRevisions:(o=t.features)==null?void 0:o.trackRevisions,updateFields:(c=t.features)==null?void 0:c.updateFields,defaultTabStop:t.defaultTabStop,hyphenation:{autoHyphenation:(h=t.hyphenation)==null?void 0:h.autoHyphenation,hyphenationZone:(f=t.hyphenation)==null?void 0:f.hyphenationZone,consecutiveHyphenLimit:(p=t.hyphenation)==null?void 0:p.consecutiveHyphenLimit,doNotHyphenateCaps:(y=t.hyphenation)==null?void 0:y.doNotHyphenateCaps}}),this.media=new wF,t.externalStyles!==void 0){const w=new lB;this.styles=w.newInstance(t.externalStyles)}else if(t.styles){const b=new qS().newInstance(t.styles.default);this.styles=new Fb(cr(cr({},b),t.styles))}else{const w=new qS;this.styles=new Fb(w.newInstance())}this.addDefaultRelationships();for(const w of t.sections)this.addSection(w);if(t.footnotes)for(const w in t.footnotes)this.footnotesWrapper.View.createFootNote(parseFloat(w),t.footnotes[w].children);this.fontWrapper=new rF((m=t.fonts)!=null?m:[])}addSection({headers:t={},footers:e={},children:n,properties:i}){this.documentWrapper.View.Body.addSection(Df(cr({},i),{headerWrapperGroup:{default:t.default?this.createHeader(t.default):void 0,first:t.first?this.createHeader(t.first):void 0,even:t.even?this.createHeader(t.even):void 0},footerWrapperGroup:{default:e.default?this.createFooter(e.default):void 0,first:e.first?this.createFooter(e.first):void 0,even:e.even?this.createFooter(e.even):void 0}}));for(const s of n)this.documentWrapper.View.add(s)}createHeader(t){const e=new bF(this.media,this.currentRelationshipId++);for(const n of t.options.children)e.add(n);return this.addHeaderToDocument(e),e}createFooter(t){const e=new aF(this.media,this.currentRelationshipId++);for(const n of t.options.children)e.add(n);return this.addFooterToDocument(e),e}addHeaderToDocument(t,e=xf.DEFAULT){this.headers.push({header:t,type:e}),this.documentWrapper.Relationships.createRelationship(t.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",`header${this.headers.length}.xml`),this.contentTypes.addHeader(this.headers.length)}addFooterToDocument(t,e=xf.DEFAULT){this.footers.push({footer:t,type:e}),this.documentWrapper.Relationships.createRelationship(t.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",`footer${this.footers.length}.xml`),this.contentTypes.addFooter(this.footers.length)}addDefaultRelationships(){this.fileRelationships.createRelationship(1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument","word/document.xml"),this.fileRelationships.createRelationship(2,"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties","docProps/core.xml"),this.fileRelationships.createRelationship(3,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties","docProps/app.xml"),this.fileRelationships.createRelationship(4,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties","docProps/custom.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles","styles.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering","numbering.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes","footnotes.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings","settings.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments","comments.xml")}get Document(){return this.documentWrapper}get Styles(){return this.styles}get CoreProperties(){return this.coreProperties}get Numbering(){return this.numbering}get Media(){return this.media}get FileRelationships(){return this.fileRelationships}get Headers(){return this.headers.map(t=>t.header)}get Footers(){return this.footers.map(t=>t.footer)}get ContentTypes(){return this.contentTypes}get CustomProperties(){return this.customProperties}get AppProperties(){return this.appProperties}get FootNotes(){return this.footnotesWrapper}get Settings(){return this.settings}get Comments(){return this.comments}get FontTable(){return this.fontWrapper}};var cB=U2();function Bm(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Tv={exports:{}},HS;function hB(){return HS||(HS=1,(function(r,t){(function(e){r.exports=e()})(function(){return(function e(n,i,s){function l(h,f){if(!i[h]){if(!n[h]){var p=typeof Bm=="function"&&Bm;if(!f&&p)return p(h,!0);if(o)return o(h,!0);var y=new Error("Cannot find module '"+h+"'");throw y.code="MODULE_NOT_FOUND",y}var m=i[h]={exports:{}};n[h][0].call(m.exports,function(w){var b=n[h][1][w];return l(b||w)},m,m.exports,e,n,i,s)}return i[h].exports}for(var o=typeof Bm=="function"&&Bm,c=0;c<s.length;c++)l(s[c]);return l})({1:[function(e,n,i){var s=e("./utils"),l=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(c){for(var h,f,p,y,m,w,b,_=[],v=0,A=c.length,C=A,S=s.getTypeOf(c)!=="string";v<c.length;)C=A-v,p=S?(h=c[v++],f=v<A?c[v++]:0,v<A?c[v++]:0):(h=c.charCodeAt(v++),f=v<A?c.charCodeAt(v++):0,v<A?c.charCodeAt(v++):0),y=h>>2,m=(3&h)<<4|f>>4,w=1<C?(15&f)<<2|p>>6:64,b=2<C?63&p:64,_.push(o.charAt(y)+o.charAt(m)+o.charAt(w)+o.charAt(b));return _.join("")},i.decode=function(c){var h,f,p,y,m,w,b=0,_=0,v="data:";if(c.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var A,C=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===o.charAt(64)&&C--,c.charAt(c.length-2)===o.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(A=l.uint8array?new Uint8Array(0|C):new Array(0|C);b<c.length;)h=o.indexOf(c.charAt(b++))<<2|(y=o.indexOf(c.charAt(b++)))>>4,f=(15&y)<<4|(m=o.indexOf(c.charAt(b++)))>>2,p=(3&m)<<6|(w=o.indexOf(c.charAt(b++))),A[_++]=h,m!==64&&(A[_++]=f),w!==64&&(A[_++]=p);return A}},{"./support":30,"./utils":32}],2:[function(e,n,i){var s=e("./external"),l=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),c=e("./stream/DataLengthProbe");function h(f,p,y,m,w){this.compressedSize=f,this.uncompressedSize=p,this.crc32=y,this.compression=m,this.compressedContent=w}h.prototype={getContentWorker:function(){var f=new l(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),p=this;return f.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new l(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(f,p,y){return f.pipe(new o).pipe(new c("uncompressedSize")).pipe(p.compressWorker(y)).pipe(new c("compressedSize")).withStreamInfo("compression",p)},n.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,n,i){var s=e("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,n,i){var s=e("./utils"),l=(function(){for(var o,c=[],h=0;h<256;h++){o=h;for(var f=0;f<8;f++)o=1&o?3988292384^o>>>1:o>>>1;c[h]=o}return c})();n.exports=function(o,c){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?(function(h,f,p,y){var m=l,w=y+p;h^=-1;for(var b=y;b<w;b++)h=h>>>8^m[255&(h^f[b])];return-1^h})(0|c,o,o.length,0):(function(h,f,p,y){var m=l,w=y+p;h^=-1;for(var b=y;b<w;b++)h=h>>>8^m[255&(h^f.charCodeAt(b))];return-1^h})(0|c,o,o.length,0):0}},{"./utils":32}],5:[function(e,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(e,n,i){var s=null;s=typeof Promise<"u"?Promise:e("lie"),n.exports={Promise:s}},{lie:37}],7:[function(e,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=e("pako"),o=e("./utils"),c=e("./stream/GenericWorker"),h=s?"uint8array":"array";function f(p,y){c.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=y,this.meta={}}i.magic="\b\0",o.inherits(f,c),f.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(h,p.data),!1)},f.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(y){p.push({data:y,meta:p.meta})}},i.compressWorker=function(p){return new f("Deflate",p)},i.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,n,i){function s(m,w){var b,_="";for(b=0;b<w;b++)_+=String.fromCharCode(255&m),m>>>=8;return _}function l(m,w,b,_,v,A){var C,S,O=m.file,q=m.compression,H=A!==h.utf8encode,Q=o.transformTo("string",A(O.name)),I=o.transformTo("string",h.utf8encode(O.name)),dt=O.comment,nt=o.transformTo("string",A(dt)),B=o.transformTo("string",h.utf8encode(dt)),Z=I.length!==O.name.length,D=B.length!==dt.length,mt="",it="",st="",vt=O.dir,wt=O.date,Ft={crc32:0,compressedSize:0,uncompressedSize:0};w&&!b||(Ft.crc32=m.crc32,Ft.compressedSize=m.compressedSize,Ft.uncompressedSize=m.uncompressedSize);var $=0;w&&($|=8),H||!Z&&!D||($|=2048);var R=0,K=0;vt&&(R|=16),v==="UNIX"?(K=798,R|=(function(pt,ct){var F=pt;return pt||(F=ct?16893:33204),(65535&F)<<16})(O.unixPermissions,vt)):(K=20,R|=(function(pt){return 63&(pt||0)})(O.dosPermissions)),C=wt.getUTCHours(),C<<=6,C|=wt.getUTCMinutes(),C<<=5,C|=wt.getUTCSeconds()/2,S=wt.getUTCFullYear()-1980,S<<=4,S|=wt.getUTCMonth()+1,S<<=5,S|=wt.getUTCDate(),Z&&(it=s(1,1)+s(f(Q),4)+I,mt+="up"+s(it.length,2)+it),D&&(st=s(1,1)+s(f(nt),4)+B,mt+="uc"+s(st.length,2)+st);var rt="";return rt+=`
\0`,rt+=s($,2),rt+=q.magic,rt+=s(C,2),rt+=s(S,2),rt+=s(Ft.crc32,4),rt+=s(Ft.compressedSize,4),rt+=s(Ft.uncompressedSize,4),rt+=s(Q.length,2),rt+=s(mt.length,2),{fileRecord:p.LOCAL_FILE_HEADER+rt+Q+mt,dirRecord:p.CENTRAL_FILE_HEADER+s(K,2)+rt+s(nt.length,2)+"\0\0\0\0"+s(R,4)+s(_,4)+Q+mt+nt}}var o=e("../utils"),c=e("../stream/GenericWorker"),h=e("../utf8"),f=e("../crc32"),p=e("../signature");function y(m,w,b,_){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=b,this.encodeFileName=_,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(y,c),y.prototype.push=function(m){var w=m.meta.percent||0,b=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,c.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:b?(w+100*(b-_-1))/b:100}}))},y.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var w=this.streamFiles&&!m.file.dir;if(w){var b=l(m,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(m){this.accumulate=!1;var w=this.streamFiles&&!m.file.dir,b=l(m,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),w)this.push({data:(function(_){return p.DATA_DESCRIPTOR+s(_.crc32,4)+s(_.compressedSize,4)+s(_.uncompressedSize,4)})(m),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var m=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var b=this.bytesWritten-m,_=(function(v,A,C,S,O){var q=o.transformTo("string",O(S));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(v,2)+s(v,2)+s(A,4)+s(C,4)+s(q.length,2)+q})(this.dirRecords.length,b,m,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(m){this._sources.push(m);var w=this;return m.on("data",function(b){w.processChunk(b)}),m.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),m.on("error",function(b){w.error(b)}),this},y.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(m){var w=this._sources;if(!c.prototype.error.call(this,m))return!1;for(var b=0;b<w.length;b++)try{w[b].error(m)}catch{}return!0},y.prototype.lock=function(){c.prototype.lock.call(this);for(var m=this._sources,w=0;w<m.length;w++)m[w].lock()},n.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,n,i){var s=e("../compressions"),l=e("./ZipFileWorker");i.generateWorker=function(o,c,h){var f=new l(c.streamFiles,h,c.platform,c.encodeFileName),p=0;try{o.forEach(function(y,m){p++;var w=(function(A,C){var S=A||C,O=s[S];if(!O)throw new Error(S+" is not a valid compression method !");return O})(m.options.compression,c.compression),b=m.options.compressionOptions||c.compressionOptions||{},_=m.dir,v=m.date;m._compressWorker(w,b).withStreamInfo("file",{name:y,dir:_,date:v,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(f)}),f.entriesCount=p}catch(y){f.error(y)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,n,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new s;for(var o in this)typeof this[o]!="function"&&(l[o]=this[o]);return l}}(s.prototype=e("./object")).loadAsync=e("./load"),s.support=e("./support"),s.defaults=e("./defaults"),s.version="3.10.1",s.loadAsync=function(l,o){return new s().loadAsync(l,o)},s.external=e("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,n,i){var s=e("./utils"),l=e("./external"),o=e("./utf8"),c=e("./zipEntries"),h=e("./stream/Crc32Probe"),f=e("./nodejsUtils");function p(y){return new l.Promise(function(m,w){var b=y.decompressed.getContentWorker().pipe(new h);b.on("error",function(_){w(_)}).on("end",function(){b.streamInfo.crc32!==y.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}n.exports=function(y,m){var w=this;return m=s.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),f.isNode&&f.isStream(y)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",y,!0,m.optimizedBinaryString,m.base64).then(function(b){var _=new c(m);return _.load(b),_}).then(function(b){var _=[l.Promise.resolve(b)],v=b.files;if(m.checkCRC32)for(var A=0;A<v.length;A++)_.push(p(v[A]));return l.Promise.all(_)}).then(function(b){for(var _=b.shift(),v=_.files,A=0;A<v.length;A++){var C=v[A],S=C.fileNameStr,O=s.resolve(C.fileNameStr);w.file(O,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:m.createFolders}),C.dir||(w.file(O).unsafeOriginalName=S)}return _.zipComment.length&&(w.comment=_.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,n,i){var s=e("../utils"),l=e("../stream/GenericWorker");function o(c,h){l.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(h)}s.inherits(o,l),o.prototype._bindStream=function(c){var h=this;(this._stream=c).pause(),c.on("data",function(f){h.push({data:f,meta:{percent:0}})}).on("error",function(f){h.isPaused?this.generatedError=f:h.error(f)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},o.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,n,i){var s=e("readable-stream").Readable;function l(o,c,h){s.call(this,c),this._helper=o;var f=this;o.on("data",function(p,y){f.push(p)||f._helper.pause(),h&&h(y)}).on("error",function(p){f.emit("error",p)}).on("end",function(){f.push(null)})}e("../utils").inherits(l,s),l.prototype._read=function(){this._helper.resume()},n.exports=l},{"../utils":32,"readable-stream":16}],14:[function(e,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,l);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,l)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var l=new Buffer(s);return l.fill(0),l},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(e,n,i){function s(O,q,H){var Q,I=o.getTypeOf(q),dt=o.extend(H||{},f);dt.date=dt.date||new Date,dt.compression!==null&&(dt.compression=dt.compression.toUpperCase()),typeof dt.unixPermissions=="string"&&(dt.unixPermissions=parseInt(dt.unixPermissions,8)),dt.unixPermissions&&16384&dt.unixPermissions&&(dt.dir=!0),dt.dosPermissions&&16&dt.dosPermissions&&(dt.dir=!0),dt.dir&&(O=v(O)),dt.createFolders&&(Q=_(O))&&A.call(this,Q,!0);var nt=I==="string"&&dt.binary===!1&&dt.base64===!1;H&&H.binary!==void 0||(dt.binary=!nt),(q instanceof p&&q.uncompressedSize===0||dt.dir||!q||q.length===0)&&(dt.base64=!1,dt.binary=!0,q="",dt.compression="STORE",I="string");var B=null;B=q instanceof p||q instanceof c?q:w.isNode&&w.isStream(q)?new b(O,q):o.prepareContent(O,q,dt.binary,dt.optimizedBinaryString,dt.base64);var Z=new y(O,B,dt);this.files[O]=Z}var l=e("./utf8"),o=e("./utils"),c=e("./stream/GenericWorker"),h=e("./stream/StreamHelper"),f=e("./defaults"),p=e("./compressedObject"),y=e("./zipObject"),m=e("./generate"),w=e("./nodejsUtils"),b=e("./nodejs/NodejsStreamInputAdapter"),_=function(O){O.slice(-1)==="/"&&(O=O.substring(0,O.length-1));var q=O.lastIndexOf("/");return 0<q?O.substring(0,q):""},v=function(O){return O.slice(-1)!=="/"&&(O+="/"),O},A=function(O,q){return q=q!==void 0?q:f.createFolders,O=v(O),this.files[O]||s.call(this,O,null,{dir:!0,createFolders:q}),this.files[O]};function C(O){return Object.prototype.toString.call(O)==="[object RegExp]"}var S={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(O){var q,H,Q;for(q in this.files)Q=this.files[q],(H=q.slice(this.root.length,q.length))&&q.slice(0,this.root.length)===this.root&&O(H,Q)},filter:function(O){var q=[];return this.forEach(function(H,Q){O(H,Q)&&q.push(Q)}),q},file:function(O,q,H){if(arguments.length!==1)return O=this.root+O,s.call(this,O,q,H),this;if(C(O)){var Q=O;return this.filter(function(dt,nt){return!nt.dir&&Q.test(dt)})}var I=this.files[this.root+O];return I&&!I.dir?I:null},folder:function(O){if(!O)return this;if(C(O))return this.filter(function(I,dt){return dt.dir&&O.test(I)});var q=this.root+O,H=A.call(this,q),Q=this.clone();return Q.root=H.name,Q},remove:function(O){O=this.root+O;var q=this.files[O];if(q||(O.slice(-1)!=="/"&&(O+="/"),q=this.files[O]),q&&!q.dir)delete this.files[O];else for(var H=this.filter(function(I,dt){return dt.name.slice(0,O.length)===O}),Q=0;Q<H.length;Q++)delete this.files[H[Q].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(O){var q,H={};try{if((H=o.extend(O||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=H.type.toLowerCase(),H.compression=H.compression.toUpperCase(),H.type==="binarystring"&&(H.type="string"),!H.type)throw new Error("No output type specified.");o.checkSupport(H.type),H.platform!=="darwin"&&H.platform!=="freebsd"&&H.platform!=="linux"&&H.platform!=="sunos"||(H.platform="UNIX"),H.platform==="win32"&&(H.platform="DOS");var Q=H.comment||this.comment||"";q=m.generateWorker(this,H,Q)}catch(I){(q=new c("error")).error(I)}return new h(q,H.type||"string",H.mimeType)},generateAsync:function(O,q){return this.generateInternalStream(O).accumulate(q)},generateNodeStream:function(O,q){return(O=O||{}).type||(O.type="nodebuffer"),this.generateInternalStream(O).toNodejsStream(q)}};n.exports=S},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,n,i){n.exports=e("stream")},{stream:void 0}],17:[function(e,n,i){var s=e("./DataReader");function l(o){s.call(this,o);for(var c=0;c<this.data.length;c++)o[c]=255&o[c]}e("../utils").inherits(l,s),l.prototype.byteAt=function(o){return this.data[this.zero+o]},l.prototype.lastIndexOfSignature=function(o){for(var c=o.charCodeAt(0),h=o.charCodeAt(1),f=o.charCodeAt(2),p=o.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===c&&this.data[y+1]===h&&this.data[y+2]===f&&this.data[y+3]===p)return y-this.zero;return-1},l.prototype.readAndCheckSignature=function(o){var c=o.charCodeAt(0),h=o.charCodeAt(1),f=o.charCodeAt(2),p=o.charCodeAt(3),y=this.readData(4);return c===y[0]&&h===y[1]&&f===y[2]&&p===y[3]},l.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=l},{"../utils":32,"./DataReader":18}],18:[function(e,n,i){var s=e("../utils");function l(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var c,h=0;for(this.checkOffset(o),c=this.index+o-1;c>=this.index;c--)h=(h<<8)+this.byteAt(c);return this.index+=o,h},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},n.exports=l},{"../utils":32}],19:[function(e,n,i){var s=e("./Uint8ArrayReader");function l(o){s.call(this,o)}e("../utils").inherits(l,s),l.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,n,i){var s=e("./DataReader");function l(o){s.call(this,o)}e("../utils").inherits(l,s),l.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},l.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},l.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},l.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=l},{"../utils":32,"./DataReader":18}],21:[function(e,n,i){var s=e("./ArrayReader");function l(o){s.call(this,o)}e("../utils").inherits(l,s),l.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(e,n,i){var s=e("../utils"),l=e("../support"),o=e("./ArrayReader"),c=e("./StringReader"),h=e("./NodeBufferReader"),f=e("./Uint8ArrayReader");n.exports=function(p){var y=s.getTypeOf(p);return s.checkSupport(y),y!=="string"||l.uint8array?y==="nodebuffer"?new h(p):l.uint8array?new f(s.transformTo("uint8array",p)):new o(s.transformTo("array",p)):new c(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,n,i){var s=e("./GenericWorker"),l=e("../utils");function o(c){s.call(this,"ConvertWorker to "+c),this.destType=c}l.inherits(o,s),o.prototype.processChunk=function(c){this.push({data:l.transformTo(this.destType,c.data),meta:c.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,n,i){var s=e("./GenericWorker"),l=e("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,s),o.prototype.processChunk=function(c){this.streamInfo.crc32=l(c.data,this.streamInfo.crc32||0),this.push(c)},n.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,n,i){var s=e("../utils"),l=e("./GenericWorker");function o(c){l.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}s.inherits(o,l),o.prototype.processChunk=function(c){if(c){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+c.data.length}l.prototype.processChunk.call(this,c)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,n,i){var s=e("../utils"),l=e("./GenericWorker");function o(c){l.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(f){h.dataIsReady=!0,h.data=f,h.max=f&&f.length||0,h.type=s.getTypeOf(f),h.isPaused||h._tickAndRepeat()},function(f){h.error(f)})}s.inherits(o,l),o.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,h);break;case"uint8array":c=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":c=this.data.slice(this.index,h)}return this.index=h,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,n,i){function s(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,o){return this._listeners[l].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,o){if(this._listeners[l])for(var c=0;c<this._listeners[l].length;c++)this._listeners[l][c].call(this,o)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var o=this;return l.on("data",function(c){o.processChunk(c)}),l.on("end",function(){o.end()}),l.on("error",function(c){o.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,o){return this.extraStreamInfo[l]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},n.exports=s},{}],29:[function(e,n,i){var s=e("../utils"),l=e("./ConvertWorker"),o=e("./GenericWorker"),c=e("../base64"),h=e("../support"),f=e("../external"),p=null;if(h.nodestream)try{p=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(w,b){return new f.Promise(function(_,v){var A=[],C=w._internalType,S=w._outputType,O=w._mimeType;w.on("data",function(q,H){A.push(q),b&&b(H)}).on("error",function(q){A=[],v(q)}).on("end",function(){try{var q=(function(H,Q,I){switch(H){case"blob":return s.newBlob(s.transformTo("arraybuffer",Q),I);case"base64":return c.encode(Q);default:return s.transformTo(H,Q)}})(S,(function(H,Q){var I,dt=0,nt=null,B=0;for(I=0;I<Q.length;I++)B+=Q[I].length;switch(H){case"string":return Q.join("");case"array":return Array.prototype.concat.apply([],Q);case"uint8array":for(nt=new Uint8Array(B),I=0;I<Q.length;I++)nt.set(Q[I],dt),dt+=Q[I].length;return nt;case"nodebuffer":return Buffer.concat(Q);default:throw new Error("concat : unsupported type '"+H+"'")}})(C,A),O);_(q)}catch(H){v(H)}A=[]}).resume()})}function m(w,b,_){var v=b;switch(b){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=b,this._mimeType=_,s.checkSupport(v),this._worker=w.pipe(new l(v)),w.lock()}catch(A){this._worker=new o("error"),this._worker.error(A)}}m.prototype={accumulate:function(w){return y(this,w)},on:function(w,b){var _=this;return w==="data"?this._worker.on(w,function(v){b.call(_,v.data,v.meta)}):this._worker.on(w,function(){s.delay(b,arguments,_)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},w)}},n.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(s),i.blob=l.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!e("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(e,n,i){for(var s=e("./utils"),l=e("./support"),o=e("./nodejsUtils"),c=e("./stream/GenericWorker"),h=new Array(256),f=0;f<256;f++)h[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;h[254]=h[254]=1;function p(){c.call(this,"utf-8 decode"),this.leftOver=null}function y(){c.call(this,"utf-8 encode")}i.utf8encode=function(m){return l.nodebuffer?o.newBufferFrom(m,"utf-8"):(function(w){var b,_,v,A,C,S=w.length,O=0;for(A=0;A<S;A++)(64512&(_=w.charCodeAt(A)))==55296&&A+1<S&&(64512&(v=w.charCodeAt(A+1)))==56320&&(_=65536+(_-55296<<10)+(v-56320),A++),O+=_<128?1:_<2048?2:_<65536?3:4;for(b=l.uint8array?new Uint8Array(O):new Array(O),A=C=0;C<O;A++)(64512&(_=w.charCodeAt(A)))==55296&&A+1<S&&(64512&(v=w.charCodeAt(A+1)))==56320&&(_=65536+(_-55296<<10)+(v-56320),A++),_<128?b[C++]=_:(_<2048?b[C++]=192|_>>>6:(_<65536?b[C++]=224|_>>>12:(b[C++]=240|_>>>18,b[C++]=128|_>>>12&63),b[C++]=128|_>>>6&63),b[C++]=128|63&_);return b})(m)},i.utf8decode=function(m){return l.nodebuffer?s.transformTo("nodebuffer",m).toString("utf-8"):(function(w){var b,_,v,A,C=w.length,S=new Array(2*C);for(b=_=0;b<C;)if((v=w[b++])<128)S[_++]=v;else if(4<(A=h[v]))S[_++]=65533,b+=A-1;else{for(v&=A===2?31:A===3?15:7;1<A&&b<C;)v=v<<6|63&w[b++],A--;1<A?S[_++]=65533:v<65536?S[_++]=v:(v-=65536,S[_++]=55296|v>>10&1023,S[_++]=56320|1023&v)}return S.length!==_&&(S.subarray?S=S.subarray(0,_):S.length=_),s.applyFromCharCode(S)})(m=s.transformTo(l.uint8array?"uint8array":"array",m))},s.inherits(p,c),p.prototype.processChunk=function(m){var w=s.transformTo(l.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var b=w;(w=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),w.set(b,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var _=(function(A,C){var S;for((C=C||A.length)>A.length&&(C=A.length),S=C-1;0<=S&&(192&A[S])==128;)S--;return S<0||S===0?C:S+h[A[S]]>C?S:C})(w),v=w;_!==w.length&&(l.uint8array?(v=w.subarray(0,_),this.leftOver=w.subarray(_,w.length)):(v=w.slice(0,_),this.leftOver=w.slice(_,w.length))),this.push({data:i.utf8decode(v),meta:m.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=p,s.inherits(y,c),y.prototype.processChunk=function(m){this.push({data:i.utf8encode(m.data),meta:m.meta})},i.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,n,i){var s=e("./support"),l=e("./base64"),o=e("./nodejsUtils"),c=e("./external");function h(b){return b}function f(b,_){for(var v=0;v<b.length;++v)_[v]=255&b.charCodeAt(v);return _}e("setimmediate"),i.newBlob=function(b,_){i.checkSupport("blob");try{return new Blob([b],{type:_})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(b),v.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(b,_,v){var A=[],C=0,S=b.length;if(S<=v)return String.fromCharCode.apply(null,b);for(;C<S;)_==="array"||_==="nodebuffer"?A.push(String.fromCharCode.apply(null,b.slice(C,Math.min(C+v,S)))):A.push(String.fromCharCode.apply(null,b.subarray(C,Math.min(C+v,S)))),C+=v;return A.join("")},stringifyByChar:function(b){for(var _="",v=0;v<b.length;v++)_+=String.fromCharCode(b[v]);return _},applyCanBeUsed:{uint8array:(function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}})()}};function y(b){var _=65536,v=i.getTypeOf(b),A=!0;if(v==="uint8array"?A=p.applyCanBeUsed.uint8array:v==="nodebuffer"&&(A=p.applyCanBeUsed.nodebuffer),A)for(;1<_;)try{return p.stringifyByChunk(b,v,_)}catch{_=Math.floor(_/2)}return p.stringifyByChar(b)}function m(b,_){for(var v=0;v<b.length;v++)_[v]=b[v];return _}i.applyFromCharCode=y;var w={};w.string={string:h,array:function(b){return f(b,new Array(b.length))},arraybuffer:function(b){return w.string.uint8array(b).buffer},uint8array:function(b){return f(b,new Uint8Array(b.length))},nodebuffer:function(b){return f(b,o.allocBuffer(b.length))}},w.array={string:y,array:h,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(b)}},w.arraybuffer={string:function(b){return y(new Uint8Array(b))},array:function(b){return m(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:h,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(new Uint8Array(b))}},w.uint8array={string:y,array:function(b){return m(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:h,nodebuffer:function(b){return o.newBufferFrom(b)}},w.nodebuffer={string:y,array:function(b){return m(b,new Array(b.length))},arraybuffer:function(b){return w.nodebuffer.uint8array(b).buffer},uint8array:function(b){return m(b,new Uint8Array(b.length))},nodebuffer:h},i.transformTo=function(b,_){if(_=_||"",!b)return _;i.checkSupport(b);var v=i.getTypeOf(_);return w[v][b](_)},i.resolve=function(b){for(var _=b.split("/"),v=[],A=0;A<_.length;A++){var C=_[A];C==="."||C===""&&A!==0&&A!==_.length-1||(C===".."?v.pop():v.push(C))}return v.join("/")},i.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(b)?"nodebuffer":s.uint8array&&b instanceof Uint8Array?"uint8array":s.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(b){if(!s[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(b){var _,v,A="";for(v=0;v<(b||"").length;v++)A+="\\x"+((_=b.charCodeAt(v))<16?"0":"")+_.toString(16).toUpperCase();return A},i.delay=function(b,_,v){setImmediate(function(){b.apply(v||null,_||[])})},i.inherits=function(b,_){function v(){}v.prototype=_.prototype,b.prototype=new v},i.extend=function(){var b,_,v={};for(b=0;b<arguments.length;b++)for(_ in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],_)&&v[_]===void 0&&(v[_]=arguments[b][_]);return v},i.prepareContent=function(b,_,v,A,C){return c.Promise.resolve(_).then(function(S){return s.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1)&&typeof FileReader<"u"?new c.Promise(function(O,q){var H=new FileReader;H.onload=function(Q){O(Q.target.result)},H.onerror=function(Q){q(Q.target.error)},H.readAsArrayBuffer(S)}):S}).then(function(S){var O=i.getTypeOf(S);return O?(O==="arraybuffer"?S=i.transformTo("uint8array",S):O==="string"&&(C?S=l.decode(S):v&&A!==!0&&(S=(function(q){return f(q,s.uint8array?new Uint8Array(q.length):new Array(q.length))})(S))),S):c.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,n,i){var s=e("./reader/readerFor"),l=e("./utils"),o=e("./signature"),c=e("./zipEntry"),h=e("./support");function f(p){this.files=[],this.loadOptions=p}f.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(y)+", expected "+l.pretty(p)+")")}},isSignature:function(p,y){var m=this.reader.index;this.reader.setIndex(p);var w=this.reader.readString(4)===y;return this.reader.setIndex(m),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),y=h.uint8array?"uint8array":"array",m=l.transformTo(y,p);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,y,m,w=this.zip64EndOfCentralSize-44;0<w;)p=this.reader.readInt(2),y=this.reader.readInt(4),m=this.reader.readData(y),this.zip64ExtensibleData[p]={id:p,length:y,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,y;for(p=0;p<this.files.length;p++)y=this.files[p],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(p=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var y=p;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var w=y-m;if(0<w)this.isSignature(y,o.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(p){this.reader=s(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,n,i){var s=e("./reader/readerFor"),l=e("./utils"),o=e("./compressedObject"),c=e("./crc32"),h=e("./utf8"),f=e("./compressions"),p=e("./support");function y(m,w){this.options=m,this.loadOptions=w}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var w,b;if(m.skip(22),this.fileNameLength=m.readInt(2),b=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=(function(_){for(var v in f)if(Object.prototype.hasOwnProperty.call(f,v)&&f[v].magic===_)return f[v];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,w,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var w=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(w),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=s(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var w,b,_,v=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<v;)w=m.readInt(2),b=m.readInt(2),_=m.readData(b),this.extraFields[w]={id:w,length:b,value:_};m.setIndex(v)},handleUTF8:function(){var m=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var b=l.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var v=l.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var w=s(m.value);return w.readInt(1)!==1||c(this.fileName)!==w.readInt(4)?null:h.utf8decode(w.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var w=s(m.value);return w.readInt(1)!==1||c(this.fileComment)!==w.readInt(4)?null:h.utf8decode(w.readData(m.length-5))}return null}},n.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,n,i){function s(w,b,_){this.name=w,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=b,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var l=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),c=e("./utf8"),h=e("./compressedObject"),f=e("./stream/GenericWorker");s.prototype={internalStream:function(w){var b=null,_="string";try{if(!w)throw new Error("No output type specified.");var v=(_=w.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),b=this._decompressWorker();var A=!this._dataBinary;A&&!v&&(b=b.pipe(new c.Utf8EncodeWorker)),!A&&v&&(b=b.pipe(new c.Utf8DecodeWorker))}catch(C){(b=new f("error")).error(C)}return new l(b,_,"")},async:function(w,b){return this.internalStream(w).accumulate(b)},nodeStream:function(w,b){return this.internalStream(w||"nodebuffer").toNodejsStream(b)},_compressWorker:function(w,b){if(this._data instanceof h&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new c.Utf8EncodeWorker)),h.createWorkerFrom(_,w,b)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof f?this._data:new o(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<p.length;m++)s.prototype[p[m]]=y;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,n,i){(function(s){var l,o,c=s.MutationObserver||s.WebKitMutationObserver;if(c){var h=0,f=new c(w),p=s.document.createTextNode("");f.observe(p,{characterData:!0}),l=function(){p.data=h=++h%2}}else if(s.setImmediate||s.MessageChannel===void 0)l="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var b=s.document.createElement("script");b.onreadystatechange=function(){w(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},s.document.documentElement.appendChild(b)}:function(){setTimeout(w,0)};else{var y=new s.MessageChannel;y.port1.onmessage=w,l=function(){y.port2.postMessage(0)}}var m=[];function w(){var b,_;o=!0;for(var v=m.length;v;){for(_=m,m=[],b=-1;++b<v;)_[b]();v=m.length}o=!1}n.exports=function(b){m.push(b)!==1||o||l()}}).call(this,typeof au<"u"?au:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,n,i){var s=e("immediate");function l(){}var o={},c=["REJECTED"],h=["FULFILLED"],f=["PENDING"];function p(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,v!==l&&b(this,v)}function y(v,A,C){this.promise=v,typeof A=="function"&&(this.onFulfilled=A,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function m(v,A,C){s(function(){var S;try{S=A(C)}catch(O){return o.reject(v,O)}S===v?o.reject(v,new TypeError("Cannot resolve promise with itself")):o.resolve(v,S)})}function w(v){var A=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof A=="function")return function(){A.apply(v,arguments)}}function b(v,A){var C=!1;function S(H){C||(C=!0,o.reject(v,H))}function O(H){C||(C=!0,o.resolve(v,H))}var q=_(function(){A(O,S)});q.status==="error"&&S(q.value)}function _(v,A){var C={};try{C.value=v(A),C.status="success"}catch(S){C.status="error",C.value=S}return C}(n.exports=p).prototype.finally=function(v){if(typeof v!="function")return this;var A=this.constructor;return this.then(function(C){return A.resolve(v()).then(function(){return C})},function(C){return A.resolve(v()).then(function(){throw C})})},p.prototype.catch=function(v){return this.then(null,v)},p.prototype.then=function(v,A){if(typeof v!="function"&&this.state===h||typeof A!="function"&&this.state===c)return this;var C=new this.constructor(l);return this.state!==f?m(C,this.state===h?v:A,this.outcome):this.queue.push(new y(C,v,A)),C},y.prototype.callFulfilled=function(v){o.resolve(this.promise,v)},y.prototype.otherCallFulfilled=function(v){m(this.promise,this.onFulfilled,v)},y.prototype.callRejected=function(v){o.reject(this.promise,v)},y.prototype.otherCallRejected=function(v){m(this.promise,this.onRejected,v)},o.resolve=function(v,A){var C=_(w,A);if(C.status==="error")return o.reject(v,C.value);var S=C.value;if(S)b(v,S);else{v.state=h,v.outcome=A;for(var O=-1,q=v.queue.length;++O<q;)v.queue[O].callFulfilled(A)}return v},o.reject=function(v,A){v.state=c,v.outcome=A;for(var C=-1,S=v.queue.length;++C<S;)v.queue[C].callRejected(A);return v},p.resolve=function(v){return v instanceof this?v:o.resolve(new this(l),v)},p.reject=function(v){var A=new this(l);return o.reject(A,v)},p.all=function(v){var A=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=v.length,S=!1;if(!C)return this.resolve([]);for(var O=new Array(C),q=0,H=-1,Q=new this(l);++H<C;)I(v[H],H);return Q;function I(dt,nt){A.resolve(dt).then(function(B){O[nt]=B,++q!==C||S||(S=!0,o.resolve(Q,O))},function(B){S||(S=!0,o.reject(Q,B))})}},p.race=function(v){var A=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=v.length,S=!1;if(!C)return this.resolve([]);for(var O=-1,q=new this(l);++O<C;)H=v[O],A.resolve(H).then(function(Q){S||(S=!0,o.resolve(q,Q))},function(Q){S||(S=!0,o.reject(q,Q))});var H;return q}},{immediate:36}],38:[function(e,n,i){var s={};(0,e("./lib/utils/common").assign)(s,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,n,i){var s=e("./zlib/deflate"),l=e("./utils/common"),o=e("./utils/strings"),c=e("./zlib/messages"),h=e("./zlib/zstream"),f=Object.prototype.toString,p=0,y=-1,m=0,w=8;function b(v){if(!(this instanceof b))return new b(v);this.options=l.assign({level:y,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},v||{});var A=this.options;A.raw&&0<A.windowBits?A.windowBits=-A.windowBits:A.gzip&&0<A.windowBits&&A.windowBits<16&&(A.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var C=s.deflateInit2(this.strm,A.level,A.method,A.windowBits,A.memLevel,A.strategy);if(C!==p)throw new Error(c[C]);if(A.header&&s.deflateSetHeader(this.strm,A.header),A.dictionary){var S;if(S=typeof A.dictionary=="string"?o.string2buf(A.dictionary):f.call(A.dictionary)==="[object ArrayBuffer]"?new Uint8Array(A.dictionary):A.dictionary,(C=s.deflateSetDictionary(this.strm,S))!==p)throw new Error(c[C]);this._dict_set=!0}}function _(v,A){var C=new b(A);if(C.push(v,!0),C.err)throw C.msg||c[C.err];return C.result}b.prototype.push=function(v,A){var C,S,O=this.strm,q=this.options.chunkSize;if(this.ended)return!1;S=A===~~A?A:A===!0?4:0,typeof v=="string"?O.input=o.string2buf(v):f.call(v)==="[object ArrayBuffer]"?O.input=new Uint8Array(v):O.input=v,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new l.Buf8(q),O.next_out=0,O.avail_out=q),(C=s.deflate(O,S))!==1&&C!==p)return this.onEnd(C),!(this.ended=!0);O.avail_out!==0&&(O.avail_in!==0||S!==4&&S!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(l.shrinkBuf(O.output,O.next_out))):this.onData(l.shrinkBuf(O.output,O.next_out)))}while((0<O.avail_in||O.avail_out===0)&&C!==1);return S===4?(C=s.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===p):S!==2||(this.onEnd(p),!(O.avail_out=0))},b.prototype.onData=function(v){this.chunks.push(v)},b.prototype.onEnd=function(v){v===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},i.Deflate=b,i.deflate=_,i.deflateRaw=function(v,A){return(A=A||{}).raw=!0,_(v,A)},i.gzip=function(v,A){return(A=A||{}).gzip=!0,_(v,A)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,n,i){var s=e("./zlib/inflate"),l=e("./utils/common"),o=e("./utils/strings"),c=e("./zlib/constants"),h=e("./zlib/messages"),f=e("./zlib/zstream"),p=e("./zlib/gzheader"),y=Object.prototype.toString;function m(b){if(!(this instanceof m))return new m(b);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},b||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||b&&b.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&(15&_.windowBits)==0&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var v=s.inflateInit2(this.strm,_.windowBits);if(v!==c.Z_OK)throw new Error(h[v]);this.header=new p,s.inflateGetHeader(this.strm,this.header)}function w(b,_){var v=new m(_);if(v.push(b,!0),v.err)throw v.msg||h[v.err];return v.result}m.prototype.push=function(b,_){var v,A,C,S,O,q,H=this.strm,Q=this.options.chunkSize,I=this.options.dictionary,dt=!1;if(this.ended)return!1;A=_===~~_?_:_===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof b=="string"?H.input=o.binstring2buf(b):y.call(b)==="[object ArrayBuffer]"?H.input=new Uint8Array(b):H.input=b,H.next_in=0,H.avail_in=H.input.length;do{if(H.avail_out===0&&(H.output=new l.Buf8(Q),H.next_out=0,H.avail_out=Q),(v=s.inflate(H,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&I&&(q=typeof I=="string"?o.string2buf(I):y.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,v=s.inflateSetDictionary(this.strm,q)),v===c.Z_BUF_ERROR&&dt===!0&&(v=c.Z_OK,dt=!1),v!==c.Z_STREAM_END&&v!==c.Z_OK)return this.onEnd(v),!(this.ended=!0);H.next_out&&(H.avail_out!==0&&v!==c.Z_STREAM_END&&(H.avail_in!==0||A!==c.Z_FINISH&&A!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=o.utf8border(H.output,H.next_out),S=H.next_out-C,O=o.buf2string(H.output,C),H.next_out=S,H.avail_out=Q-S,S&&l.arraySet(H.output,H.output,C,S,0),this.onData(O)):this.onData(l.shrinkBuf(H.output,H.next_out)))),H.avail_in===0&&H.avail_out===0&&(dt=!0)}while((0<H.avail_in||H.avail_out===0)&&v!==c.Z_STREAM_END);return v===c.Z_STREAM_END&&(A=c.Z_FINISH),A===c.Z_FINISH?(v=s.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===c.Z_OK):A!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(H.avail_out=0))},m.prototype.onData=function(b){this.chunks.push(b)},m.prototype.onEnd=function(b){b===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},i.Inflate=m,i.inflate=w,i.inflateRaw=function(b,_){return(_=_||{}).raw=!0,w(b,_)},i.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(c){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var f=h.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var p in f)f.hasOwnProperty(p)&&(c[p]=f[p])}}return c},i.shrinkBuf=function(c,h){return c.length===h?c:c.subarray?c.subarray(0,h):(c.length=h,c)};var l={arraySet:function(c,h,f,p,y){if(h.subarray&&c.subarray)c.set(h.subarray(f,f+p),y);else for(var m=0;m<p;m++)c[y+m]=h[f+m]},flattenChunks:function(c){var h,f,p,y,m,w;for(h=p=0,f=c.length;h<f;h++)p+=c[h].length;for(w=new Uint8Array(p),h=y=0,f=c.length;h<f;h++)m=c[h],w.set(m,y),y+=m.length;return w}},o={arraySet:function(c,h,f,p,y){for(var m=0;m<p;m++)c[y+m]=h[f+m]},flattenChunks:function(c){return[].concat.apply([],c)}};i.setTyped=function(c){c?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,l)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(s)},{}],42:[function(e,n,i){var s=e("./common"),l=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var c=new s.Buf8(256),h=0;h<256;h++)c[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function f(p,y){if(y<65537&&(p.subarray&&o||!p.subarray&&l))return String.fromCharCode.apply(null,s.shrinkBuf(p,y));for(var m="",w=0;w<y;w++)m+=String.fromCharCode(p[w]);return m}c[254]=c[254]=1,i.string2buf=function(p){var y,m,w,b,_,v=p.length,A=0;for(b=0;b<v;b++)(64512&(m=p.charCodeAt(b)))==55296&&b+1<v&&(64512&(w=p.charCodeAt(b+1)))==56320&&(m=65536+(m-55296<<10)+(w-56320),b++),A+=m<128?1:m<2048?2:m<65536?3:4;for(y=new s.Buf8(A),b=_=0;_<A;b++)(64512&(m=p.charCodeAt(b)))==55296&&b+1<v&&(64512&(w=p.charCodeAt(b+1)))==56320&&(m=65536+(m-55296<<10)+(w-56320),b++),m<128?y[_++]=m:(m<2048?y[_++]=192|m>>>6:(m<65536?y[_++]=224|m>>>12:(y[_++]=240|m>>>18,y[_++]=128|m>>>12&63),y[_++]=128|m>>>6&63),y[_++]=128|63&m);return y},i.buf2binstring=function(p){return f(p,p.length)},i.binstring2buf=function(p){for(var y=new s.Buf8(p.length),m=0,w=y.length;m<w;m++)y[m]=p.charCodeAt(m);return y},i.buf2string=function(p,y){var m,w,b,_,v=y||p.length,A=new Array(2*v);for(m=w=0;m<v;)if((b=p[m++])<128)A[w++]=b;else if(4<(_=c[b]))A[w++]=65533,m+=_-1;else{for(b&=_===2?31:_===3?15:7;1<_&&m<v;)b=b<<6|63&p[m++],_--;1<_?A[w++]=65533:b<65536?A[w++]=b:(b-=65536,A[w++]=55296|b>>10&1023,A[w++]=56320|1023&b)}return f(A,w)},i.utf8border=function(p,y){var m;for((y=y||p.length)>p.length&&(y=p.length),m=y-1;0<=m&&(192&p[m])==128;)m--;return m<0||m===0?y:m+c[p[m]]>y?m:y}},{"./common":41}],43:[function(e,n,i){n.exports=function(s,l,o,c){for(var h=65535&s|0,f=s>>>16&65535|0,p=0;o!==0;){for(o-=p=2e3<o?2e3:o;f=f+(h=h+l[c++]|0)|0,--p;);h%=65521,f%=65521}return h|f<<16|0}},{}],44:[function(e,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,n,i){var s=(function(){for(var l,o=[],c=0;c<256;c++){l=c;for(var h=0;h<8;h++)l=1&l?3988292384^l>>>1:l>>>1;o[c]=l}return o})();n.exports=function(l,o,c,h){var f=s,p=h+c;l^=-1;for(var y=h;y<p;y++)l=l>>>8^f[255&(l^o[y])];return-1^l}},{}],46:[function(e,n,i){var s,l=e("../utils/common"),o=e("./trees"),c=e("./adler32"),h=e("./crc32"),f=e("./messages"),p=0,y=4,m=0,w=-2,b=-1,_=4,v=2,A=8,C=9,S=286,O=30,q=19,H=2*S+1,Q=15,I=3,dt=258,nt=dt+I+1,B=42,Z=113,D=1,mt=2,it=3,st=4;function vt(W,tt){return W.msg=f[tt],tt}function wt(W){return(W<<1)-(4<W?9:0)}function Ft(W){for(var tt=W.length;0<=--tt;)W[tt]=0}function $(W){var tt=W.state,X=tt.pending;X>W.avail_out&&(X=W.avail_out),X!==0&&(l.arraySet(W.output,tt.pending_buf,tt.pending_out,X,W.next_out),W.next_out+=X,tt.pending_out+=X,W.total_out+=X,W.avail_out-=X,tt.pending-=X,tt.pending===0&&(tt.pending_out=0))}function R(W,tt){o._tr_flush_block(W,0<=W.block_start?W.block_start:-1,W.strstart-W.block_start,tt),W.block_start=W.strstart,$(W.strm)}function K(W,tt){W.pending_buf[W.pending++]=tt}function rt(W,tt){W.pending_buf[W.pending++]=tt>>>8&255,W.pending_buf[W.pending++]=255&tt}function pt(W,tt){var X,P,k=W.max_chain_length,z=W.strstart,_t=W.prev_length,kt=W.nice_match,Ct=W.strstart>W.w_size-nt?W.strstart-(W.w_size-nt):0,$t=W.window,le=W.w_mask,re=W.prev,fe=W.strstart+dt,Ce=$t[z+_t-1],De=$t[z+_t];W.prev_length>=W.good_match&&(k>>=2),kt>W.lookahead&&(kt=W.lookahead);do if($t[(X=tt)+_t]===De&&$t[X+_t-1]===Ce&&$t[X]===$t[z]&&$t[++X]===$t[z+1]){z+=2,X++;do;while($t[++z]===$t[++X]&&$t[++z]===$t[++X]&&$t[++z]===$t[++X]&&$t[++z]===$t[++X]&&$t[++z]===$t[++X]&&$t[++z]===$t[++X]&&$t[++z]===$t[++X]&&$t[++z]===$t[++X]&&z<fe);if(P=dt-(fe-z),z=fe-dt,_t<P){if(W.match_start=tt,kt<=(_t=P))break;Ce=$t[z+_t-1],De=$t[z+_t]}}while((tt=re[tt&le])>Ct&&--k!=0);return _t<=W.lookahead?_t:W.lookahead}function ct(W){var tt,X,P,k,z,_t,kt,Ct,$t,le,re=W.w_size;do{if(k=W.window_size-W.lookahead-W.strstart,W.strstart>=re+(re-nt)){for(l.arraySet(W.window,W.window,re,re,0),W.match_start-=re,W.strstart-=re,W.block_start-=re,tt=X=W.hash_size;P=W.head[--tt],W.head[tt]=re<=P?P-re:0,--X;);for(tt=X=re;P=W.prev[--tt],W.prev[tt]=re<=P?P-re:0,--X;);k+=re}if(W.strm.avail_in===0)break;if(_t=W.strm,kt=W.window,Ct=W.strstart+W.lookahead,$t=k,le=void 0,le=_t.avail_in,$t<le&&(le=$t),X=le===0?0:(_t.avail_in-=le,l.arraySet(kt,_t.input,_t.next_in,le,Ct),_t.state.wrap===1?_t.adler=c(_t.adler,kt,le,Ct):_t.state.wrap===2&&(_t.adler=h(_t.adler,kt,le,Ct)),_t.next_in+=le,_t.total_in+=le,le),W.lookahead+=X,W.lookahead+W.insert>=I)for(z=W.strstart-W.insert,W.ins_h=W.window[z],W.ins_h=(W.ins_h<<W.hash_shift^W.window[z+1])&W.hash_mask;W.insert&&(W.ins_h=(W.ins_h<<W.hash_shift^W.window[z+I-1])&W.hash_mask,W.prev[z&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=z,z++,W.insert--,!(W.lookahead+W.insert<I)););}while(W.lookahead<nt&&W.strm.avail_in!==0)}function F(W,tt){for(var X,P;;){if(W.lookahead<nt){if(ct(W),W.lookahead<nt&&tt===p)return D;if(W.lookahead===0)break}if(X=0,W.lookahead>=I&&(W.ins_h=(W.ins_h<<W.hash_shift^W.window[W.strstart+I-1])&W.hash_mask,X=W.prev[W.strstart&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=W.strstart),X!==0&&W.strstart-X<=W.w_size-nt&&(W.match_length=pt(W,X)),W.match_length>=I)if(P=o._tr_tally(W,W.strstart-W.match_start,W.match_length-I),W.lookahead-=W.match_length,W.match_length<=W.max_lazy_match&&W.lookahead>=I){for(W.match_length--;W.strstart++,W.ins_h=(W.ins_h<<W.hash_shift^W.window[W.strstart+I-1])&W.hash_mask,X=W.prev[W.strstart&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=W.strstart,--W.match_length!=0;);W.strstart++}else W.strstart+=W.match_length,W.match_length=0,W.ins_h=W.window[W.strstart],W.ins_h=(W.ins_h<<W.hash_shift^W.window[W.strstart+1])&W.hash_mask;else P=o._tr_tally(W,0,W.window[W.strstart]),W.lookahead--,W.strstart++;if(P&&(R(W,!1),W.strm.avail_out===0))return D}return W.insert=W.strstart<I-1?W.strstart:I-1,tt===y?(R(W,!0),W.strm.avail_out===0?it:st):W.last_lit&&(R(W,!1),W.strm.avail_out===0)?D:mt}function j(W,tt){for(var X,P,k;;){if(W.lookahead<nt){if(ct(W),W.lookahead<nt&&tt===p)return D;if(W.lookahead===0)break}if(X=0,W.lookahead>=I&&(W.ins_h=(W.ins_h<<W.hash_shift^W.window[W.strstart+I-1])&W.hash_mask,X=W.prev[W.strstart&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=W.strstart),W.prev_length=W.match_length,W.prev_match=W.match_start,W.match_length=I-1,X!==0&&W.prev_length<W.max_lazy_match&&W.strstart-X<=W.w_size-nt&&(W.match_length=pt(W,X),W.match_length<=5&&(W.strategy===1||W.match_length===I&&4096<W.strstart-W.match_start)&&(W.match_length=I-1)),W.prev_length>=I&&W.match_length<=W.prev_length){for(k=W.strstart+W.lookahead-I,P=o._tr_tally(W,W.strstart-1-W.prev_match,W.prev_length-I),W.lookahead-=W.prev_length-1,W.prev_length-=2;++W.strstart<=k&&(W.ins_h=(W.ins_h<<W.hash_shift^W.window[W.strstart+I-1])&W.hash_mask,X=W.prev[W.strstart&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=W.strstart),--W.prev_length!=0;);if(W.match_available=0,W.match_length=I-1,W.strstart++,P&&(R(W,!1),W.strm.avail_out===0))return D}else if(W.match_available){if((P=o._tr_tally(W,0,W.window[W.strstart-1]))&&R(W,!1),W.strstart++,W.lookahead--,W.strm.avail_out===0)return D}else W.match_available=1,W.strstart++,W.lookahead--}return W.match_available&&(P=o._tr_tally(W,0,W.window[W.strstart-1]),W.match_available=0),W.insert=W.strstart<I-1?W.strstart:I-1,tt===y?(R(W,!0),W.strm.avail_out===0?it:st):W.last_lit&&(R(W,!1),W.strm.avail_out===0)?D:mt}function ht(W,tt,X,P,k){this.good_length=W,this.max_lazy=tt,this.nice_length=X,this.max_chain=P,this.func=k}function ot(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=A,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*H),this.dyn_dtree=new l.Buf16(2*(2*O+1)),this.bl_tree=new l.Buf16(2*(2*q+1)),Ft(this.dyn_ltree),Ft(this.dyn_dtree),Ft(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(Q+1),this.heap=new l.Buf16(2*S+1),Ft(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*S+1),Ft(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function lt(W){var tt;return W&&W.state?(W.total_in=W.total_out=0,W.data_type=v,(tt=W.state).pending=0,tt.pending_out=0,tt.wrap<0&&(tt.wrap=-tt.wrap),tt.status=tt.wrap?B:Z,W.adler=tt.wrap===2?0:1,tt.last_flush=p,o._tr_init(tt),m):vt(W,w)}function ft(W){var tt=lt(W);return tt===m&&(function(X){X.window_size=2*X.w_size,Ft(X.head),X.max_lazy_match=s[X.level].max_lazy,X.good_match=s[X.level].good_length,X.nice_match=s[X.level].nice_length,X.max_chain_length=s[X.level].max_chain,X.strstart=0,X.block_start=0,X.lookahead=0,X.insert=0,X.match_length=X.prev_length=I-1,X.match_available=0,X.ins_h=0})(W.state),tt}function Mt(W,tt,X,P,k,z){if(!W)return w;var _t=1;if(tt===b&&(tt=6),P<0?(_t=0,P=-P):15<P&&(_t=2,P-=16),k<1||C<k||X!==A||P<8||15<P||tt<0||9<tt||z<0||_<z)return vt(W,w);P===8&&(P=9);var kt=new ot;return(W.state=kt).strm=W,kt.wrap=_t,kt.gzhead=null,kt.w_bits=P,kt.w_size=1<<kt.w_bits,kt.w_mask=kt.w_size-1,kt.hash_bits=k+7,kt.hash_size=1<<kt.hash_bits,kt.hash_mask=kt.hash_size-1,kt.hash_shift=~~((kt.hash_bits+I-1)/I),kt.window=new l.Buf8(2*kt.w_size),kt.head=new l.Buf16(kt.hash_size),kt.prev=new l.Buf16(kt.w_size),kt.lit_bufsize=1<<k+6,kt.pending_buf_size=4*kt.lit_bufsize,kt.pending_buf=new l.Buf8(kt.pending_buf_size),kt.d_buf=1*kt.lit_bufsize,kt.l_buf=3*kt.lit_bufsize,kt.level=tt,kt.strategy=z,kt.method=X,ft(W)}s=[new ht(0,0,0,0,function(W,tt){var X=65535;for(X>W.pending_buf_size-5&&(X=W.pending_buf_size-5);;){if(W.lookahead<=1){if(ct(W),W.lookahead===0&&tt===p)return D;if(W.lookahead===0)break}W.strstart+=W.lookahead,W.lookahead=0;var P=W.block_start+X;if((W.strstart===0||W.strstart>=P)&&(W.lookahead=W.strstart-P,W.strstart=P,R(W,!1),W.strm.avail_out===0)||W.strstart-W.block_start>=W.w_size-nt&&(R(W,!1),W.strm.avail_out===0))return D}return W.insert=0,tt===y?(R(W,!0),W.strm.avail_out===0?it:st):(W.strstart>W.block_start&&(R(W,!1),W.strm.avail_out),D)}),new ht(4,4,8,4,F),new ht(4,5,16,8,F),new ht(4,6,32,32,F),new ht(4,4,16,16,j),new ht(8,16,32,32,j),new ht(8,16,128,128,j),new ht(8,32,128,256,j),new ht(32,128,258,1024,j),new ht(32,258,258,4096,j)],i.deflateInit=function(W,tt){return Mt(W,tt,A,15,8,0)},i.deflateInit2=Mt,i.deflateReset=ft,i.deflateResetKeep=lt,i.deflateSetHeader=function(W,tt){return W&&W.state?W.state.wrap!==2?w:(W.state.gzhead=tt,m):w},i.deflate=function(W,tt){var X,P,k,z;if(!W||!W.state||5<tt||tt<0)return W?vt(W,w):w;if(P=W.state,!W.output||!W.input&&W.avail_in!==0||P.status===666&&tt!==y)return vt(W,W.avail_out===0?-5:w);if(P.strm=W,X=P.last_flush,P.last_flush=tt,P.status===B)if(P.wrap===2)W.adler=0,K(P,31),K(P,139),K(P,8),P.gzhead?(K(P,(P.gzhead.text?1:0)+(P.gzhead.hcrc?2:0)+(P.gzhead.extra?4:0)+(P.gzhead.name?8:0)+(P.gzhead.comment?16:0)),K(P,255&P.gzhead.time),K(P,P.gzhead.time>>8&255),K(P,P.gzhead.time>>16&255),K(P,P.gzhead.time>>24&255),K(P,P.level===9?2:2<=P.strategy||P.level<2?4:0),K(P,255&P.gzhead.os),P.gzhead.extra&&P.gzhead.extra.length&&(K(P,255&P.gzhead.extra.length),K(P,P.gzhead.extra.length>>8&255)),P.gzhead.hcrc&&(W.adler=h(W.adler,P.pending_buf,P.pending,0)),P.gzindex=0,P.status=69):(K(P,0),K(P,0),K(P,0),K(P,0),K(P,0),K(P,P.level===9?2:2<=P.strategy||P.level<2?4:0),K(P,3),P.status=Z);else{var _t=A+(P.w_bits-8<<4)<<8;_t|=(2<=P.strategy||P.level<2?0:P.level<6?1:P.level===6?2:3)<<6,P.strstart!==0&&(_t|=32),_t+=31-_t%31,P.status=Z,rt(P,_t),P.strstart!==0&&(rt(P,W.adler>>>16),rt(P,65535&W.adler)),W.adler=1}if(P.status===69)if(P.gzhead.extra){for(k=P.pending;P.gzindex<(65535&P.gzhead.extra.length)&&(P.pending!==P.pending_buf_size||(P.gzhead.hcrc&&P.pending>k&&(W.adler=h(W.adler,P.pending_buf,P.pending-k,k)),$(W),k=P.pending,P.pending!==P.pending_buf_size));)K(P,255&P.gzhead.extra[P.gzindex]),P.gzindex++;P.gzhead.hcrc&&P.pending>k&&(W.adler=h(W.adler,P.pending_buf,P.pending-k,k)),P.gzindex===P.gzhead.extra.length&&(P.gzindex=0,P.status=73)}else P.status=73;if(P.status===73)if(P.gzhead.name){k=P.pending;do{if(P.pending===P.pending_buf_size&&(P.gzhead.hcrc&&P.pending>k&&(W.adler=h(W.adler,P.pending_buf,P.pending-k,k)),$(W),k=P.pending,P.pending===P.pending_buf_size)){z=1;break}z=P.gzindex<P.gzhead.name.length?255&P.gzhead.name.charCodeAt(P.gzindex++):0,K(P,z)}while(z!==0);P.gzhead.hcrc&&P.pending>k&&(W.adler=h(W.adler,P.pending_buf,P.pending-k,k)),z===0&&(P.gzindex=0,P.status=91)}else P.status=91;if(P.status===91)if(P.gzhead.comment){k=P.pending;do{if(P.pending===P.pending_buf_size&&(P.gzhead.hcrc&&P.pending>k&&(W.adler=h(W.adler,P.pending_buf,P.pending-k,k)),$(W),k=P.pending,P.pending===P.pending_buf_size)){z=1;break}z=P.gzindex<P.gzhead.comment.length?255&P.gzhead.comment.charCodeAt(P.gzindex++):0,K(P,z)}while(z!==0);P.gzhead.hcrc&&P.pending>k&&(W.adler=h(W.adler,P.pending_buf,P.pending-k,k)),z===0&&(P.status=103)}else P.status=103;if(P.status===103&&(P.gzhead.hcrc?(P.pending+2>P.pending_buf_size&&$(W),P.pending+2<=P.pending_buf_size&&(K(P,255&W.adler),K(P,W.adler>>8&255),W.adler=0,P.status=Z)):P.status=Z),P.pending!==0){if($(W),W.avail_out===0)return P.last_flush=-1,m}else if(W.avail_in===0&&wt(tt)<=wt(X)&&tt!==y)return vt(W,-5);if(P.status===666&&W.avail_in!==0)return vt(W,-5);if(W.avail_in!==0||P.lookahead!==0||tt!==p&&P.status!==666){var kt=P.strategy===2?(function(Ct,$t){for(var le;;){if(Ct.lookahead===0&&(ct(Ct),Ct.lookahead===0)){if($t===p)return D;break}if(Ct.match_length=0,le=o._tr_tally(Ct,0,Ct.window[Ct.strstart]),Ct.lookahead--,Ct.strstart++,le&&(R(Ct,!1),Ct.strm.avail_out===0))return D}return Ct.insert=0,$t===y?(R(Ct,!0),Ct.strm.avail_out===0?it:st):Ct.last_lit&&(R(Ct,!1),Ct.strm.avail_out===0)?D:mt})(P,tt):P.strategy===3?(function(Ct,$t){for(var le,re,fe,Ce,De=Ct.window;;){if(Ct.lookahead<=dt){if(ct(Ct),Ct.lookahead<=dt&&$t===p)return D;if(Ct.lookahead===0)break}if(Ct.match_length=0,Ct.lookahead>=I&&0<Ct.strstart&&(re=De[fe=Ct.strstart-1])===De[++fe]&&re===De[++fe]&&re===De[++fe]){Ce=Ct.strstart+dt;do;while(re===De[++fe]&&re===De[++fe]&&re===De[++fe]&&re===De[++fe]&&re===De[++fe]&&re===De[++fe]&&re===De[++fe]&&re===De[++fe]&&fe<Ce);Ct.match_length=dt-(Ce-fe),Ct.match_length>Ct.lookahead&&(Ct.match_length=Ct.lookahead)}if(Ct.match_length>=I?(le=o._tr_tally(Ct,1,Ct.match_length-I),Ct.lookahead-=Ct.match_length,Ct.strstart+=Ct.match_length,Ct.match_length=0):(le=o._tr_tally(Ct,0,Ct.window[Ct.strstart]),Ct.lookahead--,Ct.strstart++),le&&(R(Ct,!1),Ct.strm.avail_out===0))return D}return Ct.insert=0,$t===y?(R(Ct,!0),Ct.strm.avail_out===0?it:st):Ct.last_lit&&(R(Ct,!1),Ct.strm.avail_out===0)?D:mt})(P,tt):s[P.level].func(P,tt);if(kt!==it&&kt!==st||(P.status=666),kt===D||kt===it)return W.avail_out===0&&(P.last_flush=-1),m;if(kt===mt&&(tt===1?o._tr_align(P):tt!==5&&(o._tr_stored_block(P,0,0,!1),tt===3&&(Ft(P.head),P.lookahead===0&&(P.strstart=0,P.block_start=0,P.insert=0))),$(W),W.avail_out===0))return P.last_flush=-1,m}return tt!==y?m:P.wrap<=0?1:(P.wrap===2?(K(P,255&W.adler),K(P,W.adler>>8&255),K(P,W.adler>>16&255),K(P,W.adler>>24&255),K(P,255&W.total_in),K(P,W.total_in>>8&255),K(P,W.total_in>>16&255),K(P,W.total_in>>24&255)):(rt(P,W.adler>>>16),rt(P,65535&W.adler)),$(W),0<P.wrap&&(P.wrap=-P.wrap),P.pending!==0?m:1)},i.deflateEnd=function(W){var tt;return W&&W.state?(tt=W.state.status)!==B&&tt!==69&&tt!==73&&tt!==91&&tt!==103&&tt!==Z&&tt!==666?vt(W,w):(W.state=null,tt===Z?vt(W,-3):m):w},i.deflateSetDictionary=function(W,tt){var X,P,k,z,_t,kt,Ct,$t,le=tt.length;if(!W||!W.state||(z=(X=W.state).wrap)===2||z===1&&X.status!==B||X.lookahead)return w;for(z===1&&(W.adler=c(W.adler,tt,le,0)),X.wrap=0,le>=X.w_size&&(z===0&&(Ft(X.head),X.strstart=0,X.block_start=0,X.insert=0),$t=new l.Buf8(X.w_size),l.arraySet($t,tt,le-X.w_size,X.w_size,0),tt=$t,le=X.w_size),_t=W.avail_in,kt=W.next_in,Ct=W.input,W.avail_in=le,W.next_in=0,W.input=tt,ct(X);X.lookahead>=I;){for(P=X.strstart,k=X.lookahead-(I-1);X.ins_h=(X.ins_h<<X.hash_shift^X.window[P+I-1])&X.hash_mask,X.prev[P&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=P,P++,--k;);X.strstart=P,X.lookahead=I-1,ct(X)}return X.strstart+=X.lookahead,X.block_start=X.strstart,X.insert=X.lookahead,X.lookahead=0,X.match_length=X.prev_length=I-1,X.match_available=0,W.next_in=kt,W.input=Ct,W.avail_in=_t,X.wrap=z,m},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,n,i){n.exports=function(s,l){var o,c,h,f,p,y,m,w,b,_,v,A,C,S,O,q,H,Q,I,dt,nt,B,Z,D,mt;o=s.state,c=s.next_in,D=s.input,h=c+(s.avail_in-5),f=s.next_out,mt=s.output,p=f-(l-s.avail_out),y=f+(s.avail_out-257),m=o.dmax,w=o.wsize,b=o.whave,_=o.wnext,v=o.window,A=o.hold,C=o.bits,S=o.lencode,O=o.distcode,q=(1<<o.lenbits)-1,H=(1<<o.distbits)-1;t:do{C<15&&(A+=D[c++]<<C,C+=8,A+=D[c++]<<C,C+=8),Q=S[A&q];e:for(;;){if(A>>>=I=Q>>>24,C-=I,(I=Q>>>16&255)===0)mt[f++]=65535&Q;else{if(!(16&I)){if((64&I)==0){Q=S[(65535&Q)+(A&(1<<I)-1)];continue e}if(32&I){o.mode=12;break t}s.msg="invalid literal/length code",o.mode=30;break t}dt=65535&Q,(I&=15)&&(C<I&&(A+=D[c++]<<C,C+=8),dt+=A&(1<<I)-1,A>>>=I,C-=I),C<15&&(A+=D[c++]<<C,C+=8,A+=D[c++]<<C,C+=8),Q=O[A&H];n:for(;;){if(A>>>=I=Q>>>24,C-=I,!(16&(I=Q>>>16&255))){if((64&I)==0){Q=O[(65535&Q)+(A&(1<<I)-1)];continue n}s.msg="invalid distance code",o.mode=30;break t}if(nt=65535&Q,C<(I&=15)&&(A+=D[c++]<<C,(C+=8)<I&&(A+=D[c++]<<C,C+=8)),m<(nt+=A&(1<<I)-1)){s.msg="invalid distance too far back",o.mode=30;break t}if(A>>>=I,C-=I,(I=f-p)<nt){if(b<(I=nt-I)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break t}if(Z=v,(B=0)===_){if(B+=w-I,I<dt){for(dt-=I;mt[f++]=v[B++],--I;);B=f-nt,Z=mt}}else if(_<I){if(B+=w+_-I,(I-=_)<dt){for(dt-=I;mt[f++]=v[B++],--I;);if(B=0,_<dt){for(dt-=I=_;mt[f++]=v[B++],--I;);B=f-nt,Z=mt}}}else if(B+=_-I,I<dt){for(dt-=I;mt[f++]=v[B++],--I;);B=f-nt,Z=mt}for(;2<dt;)mt[f++]=Z[B++],mt[f++]=Z[B++],mt[f++]=Z[B++],dt-=3;dt&&(mt[f++]=Z[B++],1<dt&&(mt[f++]=Z[B++]))}else{for(B=f-nt;mt[f++]=mt[B++],mt[f++]=mt[B++],mt[f++]=mt[B++],2<(dt-=3););dt&&(mt[f++]=mt[B++],1<dt&&(mt[f++]=mt[B++]))}break}}break}}while(c<h&&f<y);c-=dt=C>>3,A&=(1<<(C-=dt<<3))-1,s.next_in=c,s.next_out=f,s.avail_in=c<h?h-c+5:5-(c-h),s.avail_out=f<y?y-f+257:257-(f-y),o.hold=A,o.bits=C}},{}],49:[function(e,n,i){var s=e("../utils/common"),l=e("./adler32"),o=e("./crc32"),c=e("./inffast"),h=e("./inftrees"),f=1,p=2,y=0,m=-2,w=1,b=852,_=592;function v(B){return(B>>>24&255)+(B>>>8&65280)+((65280&B)<<8)+((255&B)<<24)}function A(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(B){var Z;return B&&B.state?(Z=B.state,B.total_in=B.total_out=Z.total=0,B.msg="",Z.wrap&&(B.adler=1&Z.wrap),Z.mode=w,Z.last=0,Z.havedict=0,Z.dmax=32768,Z.head=null,Z.hold=0,Z.bits=0,Z.lencode=Z.lendyn=new s.Buf32(b),Z.distcode=Z.distdyn=new s.Buf32(_),Z.sane=1,Z.back=-1,y):m}function S(B){var Z;return B&&B.state?((Z=B.state).wsize=0,Z.whave=0,Z.wnext=0,C(B)):m}function O(B,Z){var D,mt;return B&&B.state?(mt=B.state,Z<0?(D=0,Z=-Z):(D=1+(Z>>4),Z<48&&(Z&=15)),Z&&(Z<8||15<Z)?m:(mt.window!==null&&mt.wbits!==Z&&(mt.window=null),mt.wrap=D,mt.wbits=Z,S(B))):m}function q(B,Z){var D,mt;return B?(mt=new A,(B.state=mt).window=null,(D=O(B,Z))!==y&&(B.state=null),D):m}var H,Q,I=!0;function dt(B){if(I){var Z;for(H=new s.Buf32(512),Q=new s.Buf32(32),Z=0;Z<144;)B.lens[Z++]=8;for(;Z<256;)B.lens[Z++]=9;for(;Z<280;)B.lens[Z++]=7;for(;Z<288;)B.lens[Z++]=8;for(h(f,B.lens,0,288,H,0,B.work,{bits:9}),Z=0;Z<32;)B.lens[Z++]=5;h(p,B.lens,0,32,Q,0,B.work,{bits:5}),I=!1}B.lencode=H,B.lenbits=9,B.distcode=Q,B.distbits=5}function nt(B,Z,D,mt){var it,st=B.state;return st.window===null&&(st.wsize=1<<st.wbits,st.wnext=0,st.whave=0,st.window=new s.Buf8(st.wsize)),mt>=st.wsize?(s.arraySet(st.window,Z,D-st.wsize,st.wsize,0),st.wnext=0,st.whave=st.wsize):(mt<(it=st.wsize-st.wnext)&&(it=mt),s.arraySet(st.window,Z,D-mt,it,st.wnext),(mt-=it)?(s.arraySet(st.window,Z,D-mt,mt,0),st.wnext=mt,st.whave=st.wsize):(st.wnext+=it,st.wnext===st.wsize&&(st.wnext=0),st.whave<st.wsize&&(st.whave+=it))),0}i.inflateReset=S,i.inflateReset2=O,i.inflateResetKeep=C,i.inflateInit=function(B){return q(B,15)},i.inflateInit2=q,i.inflate=function(B,Z){var D,mt,it,st,vt,wt,Ft,$,R,K,rt,pt,ct,F,j,ht,ot,lt,ft,Mt,W,tt,X,P,k=0,z=new s.Buf8(4),_t=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!B||!B.state||!B.output||!B.input&&B.avail_in!==0)return m;(D=B.state).mode===12&&(D.mode=13),vt=B.next_out,it=B.output,Ft=B.avail_out,st=B.next_in,mt=B.input,wt=B.avail_in,$=D.hold,R=D.bits,K=wt,rt=Ft,tt=y;t:for(;;)switch(D.mode){case w:if(D.wrap===0){D.mode=13;break}for(;R<16;){if(wt===0)break t;wt--,$+=mt[st++]<<R,R+=8}if(2&D.wrap&&$===35615){z[D.check=0]=255&$,z[1]=$>>>8&255,D.check=o(D.check,z,2,0),R=$=0,D.mode=2;break}if(D.flags=0,D.head&&(D.head.done=!1),!(1&D.wrap)||(((255&$)<<8)+($>>8))%31){B.msg="incorrect header check",D.mode=30;break}if((15&$)!=8){B.msg="unknown compression method",D.mode=30;break}if(R-=4,W=8+(15&($>>>=4)),D.wbits===0)D.wbits=W;else if(W>D.wbits){B.msg="invalid window size",D.mode=30;break}D.dmax=1<<W,B.adler=D.check=1,D.mode=512&$?10:12,R=$=0;break;case 2:for(;R<16;){if(wt===0)break t;wt--,$+=mt[st++]<<R,R+=8}if(D.flags=$,(255&D.flags)!=8){B.msg="unknown compression method",D.mode=30;break}if(57344&D.flags){B.msg="unknown header flags set",D.mode=30;break}D.head&&(D.head.text=$>>8&1),512&D.flags&&(z[0]=255&$,z[1]=$>>>8&255,D.check=o(D.check,z,2,0)),R=$=0,D.mode=3;case 3:for(;R<32;){if(wt===0)break t;wt--,$+=mt[st++]<<R,R+=8}D.head&&(D.head.time=$),512&D.flags&&(z[0]=255&$,z[1]=$>>>8&255,z[2]=$>>>16&255,z[3]=$>>>24&255,D.check=o(D.check,z,4,0)),R=$=0,D.mode=4;case 4:for(;R<16;){if(wt===0)break t;wt--,$+=mt[st++]<<R,R+=8}D.head&&(D.head.xflags=255&$,D.head.os=$>>8),512&D.flags&&(z[0]=255&$,z[1]=$>>>8&255,D.check=o(D.check,z,2,0)),R=$=0,D.mode=5;case 5:if(1024&D.flags){for(;R<16;){if(wt===0)break t;wt--,$+=mt[st++]<<R,R+=8}D.length=$,D.head&&(D.head.extra_len=$),512&D.flags&&(z[0]=255&$,z[1]=$>>>8&255,D.check=o(D.check,z,2,0)),R=$=0}else D.head&&(D.head.extra=null);D.mode=6;case 6:if(1024&D.flags&&(wt<(pt=D.length)&&(pt=wt),pt&&(D.head&&(W=D.head.extra_len-D.length,D.head.extra||(D.head.extra=new Array(D.head.extra_len)),s.arraySet(D.head.extra,mt,st,pt,W)),512&D.flags&&(D.check=o(D.check,mt,pt,st)),wt-=pt,st+=pt,D.length-=pt),D.length))break t;D.length=0,D.mode=7;case 7:if(2048&D.flags){if(wt===0)break t;for(pt=0;W=mt[st+pt++],D.head&&W&&D.length<65536&&(D.head.name+=String.fromCharCode(W)),W&&pt<wt;);if(512&D.flags&&(D.check=o(D.check,mt,pt,st)),wt-=pt,st+=pt,W)break t}else D.head&&(D.head.name=null);D.length=0,D.mode=8;case 8:if(4096&D.flags){if(wt===0)break t;for(pt=0;W=mt[st+pt++],D.head&&W&&D.length<65536&&(D.head.comment+=String.fromCharCode(W)),W&&pt<wt;);if(512&D.flags&&(D.check=o(D.check,mt,pt,st)),wt-=pt,st+=pt,W)break t}else D.head&&(D.head.comment=null);D.mode=9;case 9:if(512&D.flags){for(;R<16;){if(wt===0)break t;wt--,$+=mt[st++]<<R,R+=8}if($!==(65535&D.check)){B.msg="header crc mismatch",D.mode=30;break}R=$=0}D.head&&(D.head.hcrc=D.flags>>9&1,D.head.done=!0),B.adler=D.check=0,D.mode=12;break;case 10:for(;R<32;){if(wt===0)break t;wt--,$+=mt[st++]<<R,R+=8}B.adler=D.check=v($),R=$=0,D.mode=11;case 11:if(D.havedict===0)return B.next_out=vt,B.avail_out=Ft,B.next_in=st,B.avail_in=wt,D.hold=$,D.bits=R,2;B.adler=D.check=1,D.mode=12;case 12:if(Z===5||Z===6)break t;case 13:if(D.last){$>>>=7&R,R-=7&R,D.mode=27;break}for(;R<3;){if(wt===0)break t;wt--,$+=mt[st++]<<R,R+=8}switch(D.last=1&$,R-=1,3&($>>>=1)){case 0:D.mode=14;break;case 1:if(dt(D),D.mode=20,Z!==6)break;$>>>=2,R-=2;break t;case 2:D.mode=17;break;case 3:B.msg="invalid block type",D.mode=30}$>>>=2,R-=2;break;case 14:for($>>>=7&R,R-=7&R;R<32;){if(wt===0)break t;wt--,$+=mt[st++]<<R,R+=8}if((65535&$)!=($>>>16^65535)){B.msg="invalid stored block lengths",D.mode=30;break}if(D.length=65535&$,R=$=0,D.mode=15,Z===6)break t;case 15:D.mode=16;case 16:if(pt=D.length){if(wt<pt&&(pt=wt),Ft<pt&&(pt=Ft),pt===0)break t;s.arraySet(it,mt,st,pt,vt),wt-=pt,st+=pt,Ft-=pt,vt+=pt,D.length-=pt;break}D.mode=12;break;case 17:for(;R<14;){if(wt===0)break t;wt--,$+=mt[st++]<<R,R+=8}if(D.nlen=257+(31&$),$>>>=5,R-=5,D.ndist=1+(31&$),$>>>=5,R-=5,D.ncode=4+(15&$),$>>>=4,R-=4,286<D.nlen||30<D.ndist){B.msg="too many length or distance symbols",D.mode=30;break}D.have=0,D.mode=18;case 18:for(;D.have<D.ncode;){for(;R<3;){if(wt===0)break t;wt--,$+=mt[st++]<<R,R+=8}D.lens[_t[D.have++]]=7&$,$>>>=3,R-=3}for(;D.have<19;)D.lens[_t[D.have++]]=0;if(D.lencode=D.lendyn,D.lenbits=7,X={bits:D.lenbits},tt=h(0,D.lens,0,19,D.lencode,0,D.work,X),D.lenbits=X.bits,tt){B.msg="invalid code lengths set",D.mode=30;break}D.have=0,D.mode=19;case 19:for(;D.have<D.nlen+D.ndist;){for(;ht=(k=D.lencode[$&(1<<D.lenbits)-1])>>>16&255,ot=65535&k,!((j=k>>>24)<=R);){if(wt===0)break t;wt--,$+=mt[st++]<<R,R+=8}if(ot<16)$>>>=j,R-=j,D.lens[D.have++]=ot;else{if(ot===16){for(P=j+2;R<P;){if(wt===0)break t;wt--,$+=mt[st++]<<R,R+=8}if($>>>=j,R-=j,D.have===0){B.msg="invalid bit length repeat",D.mode=30;break}W=D.lens[D.have-1],pt=3+(3&$),$>>>=2,R-=2}else if(ot===17){for(P=j+3;R<P;){if(wt===0)break t;wt--,$+=mt[st++]<<R,R+=8}R-=j,W=0,pt=3+(7&($>>>=j)),$>>>=3,R-=3}else{for(P=j+7;R<P;){if(wt===0)break t;wt--,$+=mt[st++]<<R,R+=8}R-=j,W=0,pt=11+(127&($>>>=j)),$>>>=7,R-=7}if(D.have+pt>D.nlen+D.ndist){B.msg="invalid bit length repeat",D.mode=30;break}for(;pt--;)D.lens[D.have++]=W}}if(D.mode===30)break;if(D.lens[256]===0){B.msg="invalid code -- missing end-of-block",D.mode=30;break}if(D.lenbits=9,X={bits:D.lenbits},tt=h(f,D.lens,0,D.nlen,D.lencode,0,D.work,X),D.lenbits=X.bits,tt){B.msg="invalid literal/lengths set",D.mode=30;break}if(D.distbits=6,D.distcode=D.distdyn,X={bits:D.distbits},tt=h(p,D.lens,D.nlen,D.ndist,D.distcode,0,D.work,X),D.distbits=X.bits,tt){B.msg="invalid distances set",D.mode=30;break}if(D.mode=20,Z===6)break t;case 20:D.mode=21;case 21:if(6<=wt&&258<=Ft){B.next_out=vt,B.avail_out=Ft,B.next_in=st,B.avail_in=wt,D.hold=$,D.bits=R,c(B,rt),vt=B.next_out,it=B.output,Ft=B.avail_out,st=B.next_in,mt=B.input,wt=B.avail_in,$=D.hold,R=D.bits,D.mode===12&&(D.back=-1);break}for(D.back=0;ht=(k=D.lencode[$&(1<<D.lenbits)-1])>>>16&255,ot=65535&k,!((j=k>>>24)<=R);){if(wt===0)break t;wt--,$+=mt[st++]<<R,R+=8}if(ht&&(240&ht)==0){for(lt=j,ft=ht,Mt=ot;ht=(k=D.lencode[Mt+(($&(1<<lt+ft)-1)>>lt)])>>>16&255,ot=65535&k,!(lt+(j=k>>>24)<=R);){if(wt===0)break t;wt--,$+=mt[st++]<<R,R+=8}$>>>=lt,R-=lt,D.back+=lt}if($>>>=j,R-=j,D.back+=j,D.length=ot,ht===0){D.mode=26;break}if(32&ht){D.back=-1,D.mode=12;break}if(64&ht){B.msg="invalid literal/length code",D.mode=30;break}D.extra=15&ht,D.mode=22;case 22:if(D.extra){for(P=D.extra;R<P;){if(wt===0)break t;wt--,$+=mt[st++]<<R,R+=8}D.length+=$&(1<<D.extra)-1,$>>>=D.extra,R-=D.extra,D.back+=D.extra}D.was=D.length,D.mode=23;case 23:for(;ht=(k=D.distcode[$&(1<<D.distbits)-1])>>>16&255,ot=65535&k,!((j=k>>>24)<=R);){if(wt===0)break t;wt--,$+=mt[st++]<<R,R+=8}if((240&ht)==0){for(lt=j,ft=ht,Mt=ot;ht=(k=D.distcode[Mt+(($&(1<<lt+ft)-1)>>lt)])>>>16&255,ot=65535&k,!(lt+(j=k>>>24)<=R);){if(wt===0)break t;wt--,$+=mt[st++]<<R,R+=8}$>>>=lt,R-=lt,D.back+=lt}if($>>>=j,R-=j,D.back+=j,64&ht){B.msg="invalid distance code",D.mode=30;break}D.offset=ot,D.extra=15&ht,D.mode=24;case 24:if(D.extra){for(P=D.extra;R<P;){if(wt===0)break t;wt--,$+=mt[st++]<<R,R+=8}D.offset+=$&(1<<D.extra)-1,$>>>=D.extra,R-=D.extra,D.back+=D.extra}if(D.offset>D.dmax){B.msg="invalid distance too far back",D.mode=30;break}D.mode=25;case 25:if(Ft===0)break t;if(pt=rt-Ft,D.offset>pt){if((pt=D.offset-pt)>D.whave&&D.sane){B.msg="invalid distance too far back",D.mode=30;break}ct=pt>D.wnext?(pt-=D.wnext,D.wsize-pt):D.wnext-pt,pt>D.length&&(pt=D.length),F=D.window}else F=it,ct=vt-D.offset,pt=D.length;for(Ft<pt&&(pt=Ft),Ft-=pt,D.length-=pt;it[vt++]=F[ct++],--pt;);D.length===0&&(D.mode=21);break;case 26:if(Ft===0)break t;it[vt++]=D.length,Ft--,D.mode=21;break;case 27:if(D.wrap){for(;R<32;){if(wt===0)break t;wt--,$|=mt[st++]<<R,R+=8}if(rt-=Ft,B.total_out+=rt,D.total+=rt,rt&&(B.adler=D.check=D.flags?o(D.check,it,rt,vt-rt):l(D.check,it,rt,vt-rt)),rt=Ft,(D.flags?$:v($))!==D.check){B.msg="incorrect data check",D.mode=30;break}R=$=0}D.mode=28;case 28:if(D.wrap&&D.flags){for(;R<32;){if(wt===0)break t;wt--,$+=mt[st++]<<R,R+=8}if($!==(4294967295&D.total)){B.msg="incorrect length check",D.mode=30;break}R=$=0}D.mode=29;case 29:tt=1;break t;case 30:tt=-3;break t;case 31:return-4;default:return m}return B.next_out=vt,B.avail_out=Ft,B.next_in=st,B.avail_in=wt,D.hold=$,D.bits=R,(D.wsize||rt!==B.avail_out&&D.mode<30&&(D.mode<27||Z!==4))&&nt(B,B.output,B.next_out,rt-B.avail_out)?(D.mode=31,-4):(K-=B.avail_in,rt-=B.avail_out,B.total_in+=K,B.total_out+=rt,D.total+=rt,D.wrap&&rt&&(B.adler=D.check=D.flags?o(D.check,it,rt,B.next_out-rt):l(D.check,it,rt,B.next_out-rt)),B.data_type=D.bits+(D.last?64:0)+(D.mode===12?128:0)+(D.mode===20||D.mode===15?256:0),(K==0&&rt===0||Z===4)&&tt===y&&(tt=-5),tt)},i.inflateEnd=function(B){if(!B||!B.state)return m;var Z=B.state;return Z.window&&(Z.window=null),B.state=null,y},i.inflateGetHeader=function(B,Z){var D;return B&&B.state?(2&(D=B.state).wrap)==0?m:((D.head=Z).done=!1,y):m},i.inflateSetDictionary=function(B,Z){var D,mt=Z.length;return B&&B.state?(D=B.state).wrap!==0&&D.mode!==11?m:D.mode===11&&l(1,Z,mt,0)!==D.check?-3:nt(B,Z,mt,mt)?(D.mode=31,-4):(D.havedict=1,y):m},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,n,i){var s=e("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(f,p,y,m,w,b,_,v){var A,C,S,O,q,H,Q,I,dt,nt=v.bits,B=0,Z=0,D=0,mt=0,it=0,st=0,vt=0,wt=0,Ft=0,$=0,R=null,K=0,rt=new s.Buf16(16),pt=new s.Buf16(16),ct=null,F=0;for(B=0;B<=15;B++)rt[B]=0;for(Z=0;Z<m;Z++)rt[p[y+Z]]++;for(it=nt,mt=15;1<=mt&&rt[mt]===0;mt--);if(mt<it&&(it=mt),mt===0)return w[b++]=20971520,w[b++]=20971520,v.bits=1,0;for(D=1;D<mt&&rt[D]===0;D++);for(it<D&&(it=D),B=wt=1;B<=15;B++)if(wt<<=1,(wt-=rt[B])<0)return-1;if(0<wt&&(f===0||mt!==1))return-1;for(pt[1]=0,B=1;B<15;B++)pt[B+1]=pt[B]+rt[B];for(Z=0;Z<m;Z++)p[y+Z]!==0&&(_[pt[p[y+Z]]++]=Z);if(H=f===0?(R=ct=_,19):f===1?(R=l,K-=257,ct=o,F-=257,256):(R=c,ct=h,-1),B=D,q=b,vt=Z=$=0,S=-1,O=(Ft=1<<(st=it))-1,f===1&&852<Ft||f===2&&592<Ft)return 1;for(;;){for(Q=B-vt,dt=_[Z]<H?(I=0,_[Z]):_[Z]>H?(I=ct[F+_[Z]],R[K+_[Z]]):(I=96,0),A=1<<B-vt,D=C=1<<st;w[q+($>>vt)+(C-=A)]=Q<<24|I<<16|dt|0,C!==0;);for(A=1<<B-1;$&A;)A>>=1;if(A!==0?($&=A-1,$+=A):$=0,Z++,--rt[B]==0){if(B===mt)break;B=p[y+_[Z]]}if(it<B&&($&O)!==S){for(vt===0&&(vt=it),q+=D,wt=1<<(st=B-vt);st+vt<mt&&!((wt-=rt[st+vt])<=0);)st++,wt<<=1;if(Ft+=1<<st,f===1&&852<Ft||f===2&&592<Ft)return 1;w[S=$&O]=it<<24|st<<16|q-b|0}}return $!==0&&(w[q+$]=B-vt<<24|64<<16|0),v.bits=it,0}},{"../utils/common":41}],51:[function(e,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,n,i){var s=e("../utils/common"),l=0,o=1;function c(k){for(var z=k.length;0<=--z;)k[z]=0}var h=0,f=29,p=256,y=p+1+f,m=30,w=19,b=2*y+1,_=15,v=16,A=7,C=256,S=16,O=17,q=18,H=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],dt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],nt=new Array(2*(y+2));c(nt);var B=new Array(2*m);c(B);var Z=new Array(512);c(Z);var D=new Array(256);c(D);var mt=new Array(f);c(mt);var it,st,vt,wt=new Array(m);function Ft(k,z,_t,kt,Ct){this.static_tree=k,this.extra_bits=z,this.extra_base=_t,this.elems=kt,this.max_length=Ct,this.has_stree=k&&k.length}function $(k,z){this.dyn_tree=k,this.max_code=0,this.stat_desc=z}function R(k){return k<256?Z[k]:Z[256+(k>>>7)]}function K(k,z){k.pending_buf[k.pending++]=255&z,k.pending_buf[k.pending++]=z>>>8&255}function rt(k,z,_t){k.bi_valid>v-_t?(k.bi_buf|=z<<k.bi_valid&65535,K(k,k.bi_buf),k.bi_buf=z>>v-k.bi_valid,k.bi_valid+=_t-v):(k.bi_buf|=z<<k.bi_valid&65535,k.bi_valid+=_t)}function pt(k,z,_t){rt(k,_t[2*z],_t[2*z+1])}function ct(k,z){for(var _t=0;_t|=1&k,k>>>=1,_t<<=1,0<--z;);return _t>>>1}function F(k,z,_t){var kt,Ct,$t=new Array(_+1),le=0;for(kt=1;kt<=_;kt++)$t[kt]=le=le+_t[kt-1]<<1;for(Ct=0;Ct<=z;Ct++){var re=k[2*Ct+1];re!==0&&(k[2*Ct]=ct($t[re]++,re))}}function j(k){var z;for(z=0;z<y;z++)k.dyn_ltree[2*z]=0;for(z=0;z<m;z++)k.dyn_dtree[2*z]=0;for(z=0;z<w;z++)k.bl_tree[2*z]=0;k.dyn_ltree[2*C]=1,k.opt_len=k.static_len=0,k.last_lit=k.matches=0}function ht(k){8<k.bi_valid?K(k,k.bi_buf):0<k.bi_valid&&(k.pending_buf[k.pending++]=k.bi_buf),k.bi_buf=0,k.bi_valid=0}function ot(k,z,_t,kt){var Ct=2*z,$t=2*_t;return k[Ct]<k[$t]||k[Ct]===k[$t]&&kt[z]<=kt[_t]}function lt(k,z,_t){for(var kt=k.heap[_t],Ct=_t<<1;Ct<=k.heap_len&&(Ct<k.heap_len&&ot(z,k.heap[Ct+1],k.heap[Ct],k.depth)&&Ct++,!ot(z,kt,k.heap[Ct],k.depth));)k.heap[_t]=k.heap[Ct],_t=Ct,Ct<<=1;k.heap[_t]=kt}function ft(k,z,_t){var kt,Ct,$t,le,re=0;if(k.last_lit!==0)for(;kt=k.pending_buf[k.d_buf+2*re]<<8|k.pending_buf[k.d_buf+2*re+1],Ct=k.pending_buf[k.l_buf+re],re++,kt===0?pt(k,Ct,z):(pt(k,($t=D[Ct])+p+1,z),(le=H[$t])!==0&&rt(k,Ct-=mt[$t],le),pt(k,$t=R(--kt),_t),(le=Q[$t])!==0&&rt(k,kt-=wt[$t],le)),re<k.last_lit;);pt(k,C,z)}function Mt(k,z){var _t,kt,Ct,$t=z.dyn_tree,le=z.stat_desc.static_tree,re=z.stat_desc.has_stree,fe=z.stat_desc.elems,Ce=-1;for(k.heap_len=0,k.heap_max=b,_t=0;_t<fe;_t++)$t[2*_t]!==0?(k.heap[++k.heap_len]=Ce=_t,k.depth[_t]=0):$t[2*_t+1]=0;for(;k.heap_len<2;)$t[2*(Ct=k.heap[++k.heap_len]=Ce<2?++Ce:0)]=1,k.depth[Ct]=0,k.opt_len--,re&&(k.static_len-=le[2*Ct+1]);for(z.max_code=Ce,_t=k.heap_len>>1;1<=_t;_t--)lt(k,$t,_t);for(Ct=fe;_t=k.heap[1],k.heap[1]=k.heap[k.heap_len--],lt(k,$t,1),kt=k.heap[1],k.heap[--k.heap_max]=_t,k.heap[--k.heap_max]=kt,$t[2*Ct]=$t[2*_t]+$t[2*kt],k.depth[Ct]=(k.depth[_t]>=k.depth[kt]?k.depth[_t]:k.depth[kt])+1,$t[2*_t+1]=$t[2*kt+1]=Ct,k.heap[1]=Ct++,lt(k,$t,1),2<=k.heap_len;);k.heap[--k.heap_max]=k.heap[1],(function(De,Fe){var ln,Ue,Xn,Xe,rn,sn,Ee=Fe.dyn_tree,Je=Fe.max_code,Gn=Fe.stat_desc.static_tree,un=Fe.stat_desc.has_stree,ve=Fe.stat_desc.extra_bits,Jn=Fe.stat_desc.extra_base,gn=Fe.stat_desc.max_length,Ke=0;for(Xe=0;Xe<=_;Xe++)De.bl_count[Xe]=0;for(Ee[2*De.heap[De.heap_max]+1]=0,ln=De.heap_max+1;ln<b;ln++)gn<(Xe=Ee[2*Ee[2*(Ue=De.heap[ln])+1]+1]+1)&&(Xe=gn,Ke++),Ee[2*Ue+1]=Xe,Je<Ue||(De.bl_count[Xe]++,rn=0,Jn<=Ue&&(rn=ve[Ue-Jn]),sn=Ee[2*Ue],De.opt_len+=sn*(Xe+rn),un&&(De.static_len+=sn*(Gn[2*Ue+1]+rn)));if(Ke!==0){do{for(Xe=gn-1;De.bl_count[Xe]===0;)Xe--;De.bl_count[Xe]--,De.bl_count[Xe+1]+=2,De.bl_count[gn]--,Ke-=2}while(0<Ke);for(Xe=gn;Xe!==0;Xe--)for(Ue=De.bl_count[Xe];Ue!==0;)Je<(Xn=De.heap[--ln])||(Ee[2*Xn+1]!==Xe&&(De.opt_len+=(Xe-Ee[2*Xn+1])*Ee[2*Xn],Ee[2*Xn+1]=Xe),Ue--)}})(k,z),F($t,Ce,k.bl_count)}function W(k,z,_t){var kt,Ct,$t=-1,le=z[1],re=0,fe=7,Ce=4;for(le===0&&(fe=138,Ce=3),z[2*(_t+1)+1]=65535,kt=0;kt<=_t;kt++)Ct=le,le=z[2*(kt+1)+1],++re<fe&&Ct===le||(re<Ce?k.bl_tree[2*Ct]+=re:Ct!==0?(Ct!==$t&&k.bl_tree[2*Ct]++,k.bl_tree[2*S]++):re<=10?k.bl_tree[2*O]++:k.bl_tree[2*q]++,$t=Ct,Ce=(re=0)===le?(fe=138,3):Ct===le?(fe=6,3):(fe=7,4))}function tt(k,z,_t){var kt,Ct,$t=-1,le=z[1],re=0,fe=7,Ce=4;for(le===0&&(fe=138,Ce=3),kt=0;kt<=_t;kt++)if(Ct=le,le=z[2*(kt+1)+1],!(++re<fe&&Ct===le)){if(re<Ce)for(;pt(k,Ct,k.bl_tree),--re!=0;);else Ct!==0?(Ct!==$t&&(pt(k,Ct,k.bl_tree),re--),pt(k,S,k.bl_tree),rt(k,re-3,2)):re<=10?(pt(k,O,k.bl_tree),rt(k,re-3,3)):(pt(k,q,k.bl_tree),rt(k,re-11,7));$t=Ct,Ce=(re=0)===le?(fe=138,3):Ct===le?(fe=6,3):(fe=7,4)}}c(wt);var X=!1;function P(k,z,_t,kt){rt(k,(h<<1)+(kt?1:0),3),(function(Ct,$t,le,re){ht(Ct),K(Ct,le),K(Ct,~le),s.arraySet(Ct.pending_buf,Ct.window,$t,le,Ct.pending),Ct.pending+=le})(k,z,_t)}i._tr_init=function(k){X||((function(){var z,_t,kt,Ct,$t,le=new Array(_+1);for(Ct=kt=0;Ct<f-1;Ct++)for(mt[Ct]=kt,z=0;z<1<<H[Ct];z++)D[kt++]=Ct;for(D[kt-1]=Ct,Ct=$t=0;Ct<16;Ct++)for(wt[Ct]=$t,z=0;z<1<<Q[Ct];z++)Z[$t++]=Ct;for($t>>=7;Ct<m;Ct++)for(wt[Ct]=$t<<7,z=0;z<1<<Q[Ct]-7;z++)Z[256+$t++]=Ct;for(_t=0;_t<=_;_t++)le[_t]=0;for(z=0;z<=143;)nt[2*z+1]=8,z++,le[8]++;for(;z<=255;)nt[2*z+1]=9,z++,le[9]++;for(;z<=279;)nt[2*z+1]=7,z++,le[7]++;for(;z<=287;)nt[2*z+1]=8,z++,le[8]++;for(F(nt,y+1,le),z=0;z<m;z++)B[2*z+1]=5,B[2*z]=ct(z,5);it=new Ft(nt,H,p+1,y,_),st=new Ft(B,Q,0,m,_),vt=new Ft(new Array(0),I,0,w,A)})(),X=!0),k.l_desc=new $(k.dyn_ltree,it),k.d_desc=new $(k.dyn_dtree,st),k.bl_desc=new $(k.bl_tree,vt),k.bi_buf=0,k.bi_valid=0,j(k)},i._tr_stored_block=P,i._tr_flush_block=function(k,z,_t,kt){var Ct,$t,le=0;0<k.level?(k.strm.data_type===2&&(k.strm.data_type=(function(re){var fe,Ce=4093624447;for(fe=0;fe<=31;fe++,Ce>>>=1)if(1&Ce&&re.dyn_ltree[2*fe]!==0)return l;if(re.dyn_ltree[18]!==0||re.dyn_ltree[20]!==0||re.dyn_ltree[26]!==0)return o;for(fe=32;fe<p;fe++)if(re.dyn_ltree[2*fe]!==0)return o;return l})(k)),Mt(k,k.l_desc),Mt(k,k.d_desc),le=(function(re){var fe;for(W(re,re.dyn_ltree,re.l_desc.max_code),W(re,re.dyn_dtree,re.d_desc.max_code),Mt(re,re.bl_desc),fe=w-1;3<=fe&&re.bl_tree[2*dt[fe]+1]===0;fe--);return re.opt_len+=3*(fe+1)+5+5+4,fe})(k),Ct=k.opt_len+3+7>>>3,($t=k.static_len+3+7>>>3)<=Ct&&(Ct=$t)):Ct=$t=_t+5,_t+4<=Ct&&z!==-1?P(k,z,_t,kt):k.strategy===4||$t===Ct?(rt(k,2+(kt?1:0),3),ft(k,nt,B)):(rt(k,4+(kt?1:0),3),(function(re,fe,Ce,De){var Fe;for(rt(re,fe-257,5),rt(re,Ce-1,5),rt(re,De-4,4),Fe=0;Fe<De;Fe++)rt(re,re.bl_tree[2*dt[Fe]+1],3);tt(re,re.dyn_ltree,fe-1),tt(re,re.dyn_dtree,Ce-1)})(k,k.l_desc.max_code+1,k.d_desc.max_code+1,le+1),ft(k,k.dyn_ltree,k.dyn_dtree)),j(k),kt&&ht(k)},i._tr_tally=function(k,z,_t){return k.pending_buf[k.d_buf+2*k.last_lit]=z>>>8&255,k.pending_buf[k.d_buf+2*k.last_lit+1]=255&z,k.pending_buf[k.l_buf+k.last_lit]=255&_t,k.last_lit++,z===0?k.dyn_ltree[2*_t]++:(k.matches++,z--,k.dyn_ltree[2*(D[_t]+p+1)]++,k.dyn_dtree[2*R(z)]++),k.last_lit===k.lit_bufsize-1},i._tr_align=function(k){rt(k,2,3),pt(k,C,nt),(function(z){z.bi_valid===16?(K(z,z.bi_buf),z.bi_buf=0,z.bi_valid=0):8<=z.bi_valid&&(z.pending_buf[z.pending++]=255&z.bi_buf,z.bi_buf>>=8,z.bi_valid-=8)})(k)}},{"../utils/common":41}],53:[function(e,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,n,i){(function(s){(function(l,o){if(!l.setImmediate){var c,h,f,p,y=1,m={},w=!1,b=l.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(l);_=_&&_.setTimeout?_:l,c={}.toString.call(l.process)==="[object process]"?function(S){Hn.nextTick(function(){A(S)})}:(function(){if(l.postMessage&&!l.importScripts){var S=!0,O=l.onmessage;return l.onmessage=function(){S=!1},l.postMessage("","*"),l.onmessage=O,S}})()?(p="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",C,!1):l.attachEvent("onmessage",C),function(S){l.postMessage(p+S,"*")}):l.MessageChannel?((f=new MessageChannel).port1.onmessage=function(S){A(S.data)},function(S){f.port2.postMessage(S)}):b&&"onreadystatechange"in b.createElement("script")?(h=b.documentElement,function(S){var O=b.createElement("script");O.onreadystatechange=function(){A(S),O.onreadystatechange=null,h.removeChild(O),O=null},h.appendChild(O)}):function(S){setTimeout(A,0,S)},_.setImmediate=function(S){typeof S!="function"&&(S=new Function(""+S));for(var O=new Array(arguments.length-1),q=0;q<O.length;q++)O[q]=arguments[q+1];var H={callback:S,args:O};return m[y]=H,c(y),y++},_.clearImmediate=v}function v(S){delete m[S]}function A(S){if(w)setTimeout(A,0,S);else{var O=m[S];if(O){w=!0;try{(function(q){var H=q.callback,Q=q.args;switch(Q.length){case 0:H();break;case 1:H(Q[0]);break;case 2:H(Q[0],Q[1]);break;case 3:H(Q[0],Q[1],Q[2]);break;default:H.apply(o,Q)}})(O)}finally{v(S),w=!1}}}}function C(S){S.source===l&&typeof S.data=="string"&&S.data.indexOf(p)===0&&A(+S.data.slice(p.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof au<"u"?au:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Tv)),Tv.exports}var fB=hB();const dB=W4(fB);var Fd={exports:{}},Nv,GS;function pB(){if(GS)return Nv;GS=1;var r={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};function t(e){return e&&e.replace?e.replace(/([&"<>'])/g,function(n,i){return r[i]}):e}return Nv=t,Nv}var VS;function mB(){if(VS)return Fd.exports;VS=1;var r=pB(),t=U2().Stream,e="    ";function n(h,f){typeof f!="object"&&(f={indent:f});var p=f.stream?new t:null,y="",m=!1,w=f.indent?f.indent===!0?e:f.indent:"",b=!0;function _(O){b?Hn.nextTick(O):O()}function v(O,q){if(q!==void 0&&(y+=q),O&&!m&&(p=p||new t,m=!0),O&&m){var H=y;_(function(){p.emit("data",H)}),y=""}}function A(O,q){o(v,l(O,w,w?1:0),q)}function C(){if(p){var O=y;_(function(){p.emit("data",O),p.emit("end"),p.readable=!1,p.emit("close")})}}function S(O){var q=O.encoding||"UTF-8",H={version:"1.0",encoding:q};O.standalone&&(H.standalone=O.standalone),A({"?xml":{_attr:H}}),y=y.replace("/>","?>")}return _(function(){b=!1}),f.declaration&&S(f.declaration),h&&h.forEach?h.forEach(function(O,q){var H;q+1===h.length&&(H=C),A(O,H)}):A(h,C),p?(p.readable=!0,p):y}function i(){var h=Array.prototype.slice.call(arguments),f={_elem:l(h)};return f.push=function(p){if(!this.append)throw new Error("not assigned to a parent!");var y=this,m=this._elem.indent;o(this.append,l(p,m,this._elem.icount+(m?1:0)),function(){y.append(!0)})},f.close=function(p){p!==void 0&&this.push(p),this.end&&this.end()},f}function s(h,f){return new Array(f||0).join(h||"")}function l(h,f,p){p=p||0;var y=s(f,p),m,w=h,b=!1;if(typeof h=="object"){var _=Object.keys(h);if(m=_[0],w=h[m],w&&w._elem)return w._elem.name=m,w._elem.icount=p,w._elem.indent=f,w._elem.indents=y,w._elem.interrupt=w,w._elem}var v=[],A=[],C;function S(O){var q=Object.keys(O);q.forEach(function(H){v.push(c(H,O[H]))})}switch(typeof w){case"object":if(w===null)break;w._attr&&S(w._attr),w._cdata&&A.push(("<![CDATA["+w._cdata).replace(/\]\]>/g,"]]]]><![CDATA[>")+"]]>"),w.forEach&&(C=!1,A.push(""),w.forEach(function(O){if(typeof O=="object"){var q=Object.keys(O)[0];q=="_attr"?S(O._attr):A.push(l(O,f,p+1))}else A.pop(),C=!0,A.push(r(O))}),C||A.push(""));break;default:A.push(r(w))}return{name:m,interrupt:b,attributes:v,content:A,icount:p,indents:y,indent:f}}function o(h,f,p){if(typeof f!="object")return h(!1,f);var y=f.interrupt?1:f.content.length;function m(){for(;f.content.length;){var b=f.content.shift();if(b!==void 0){if(w(b))return;o(h,b)}}h(!1,(y>1?f.indents:"")+(f.name?"</"+f.name+">":"")+(f.indent&&!p?`
`:"")),p&&p()}function w(b){return b.interrupt?(b.interrupt.append=h,b.interrupt.end=m,b.interrupt=!1,h(!0),!0):!1}if(h(!1,f.indents+(f.name?"<"+f.name:"")+(f.attributes.length?" "+f.attributes.join(" "):"")+(y?f.name?">":"":f.name?"/>":"")+(f.indent&&y>1?`
`:"")),!y)return h(!1,f.indent?`
`:"");w(f)||m()}function c(h,f){return h+'="'+r(f)+'"'}return Fd.exports=n,Fd.exports.element=Fd.exports.Element=i,Fd.exports}var gB=mB();const Di=W4(gB),Bd=0,kv=32,yB=32,vB=(r,t)=>{const e=t.replace(/-/g,"");if(e.length!==yB)throw new Error(`Error: Cannot extract GUID from font filename: ${t}`);const i=e.replace(/(..)/g,"$1 ").trim().split(" ").map(c=>parseInt(c,16));i.reverse();const l=r.slice(Bd,kv).map((c,h)=>c^i[h%i.length]),o=new Uint8Array(Bd+l.length+Math.max(0,r.length-kv));return o.set(r.slice(0,Bd)),o.set(l,Bd),o.set(r.slice(kv),Bd+l.length),o};class bB{format(t,e={stack:[]}){const n=t.prepForXml(e);if(n)return n;throw Error("XMLComponent did not format correctly")}}class wB{replace(t,e,n){let i=t;return e.forEach((s,l)=>{i=i.replace(new RegExp(`{${s.fileName}}`,"g"),(n+l).toString())}),i}getMediaData(t,e){return e.Array.filter(n=>t.search(`{${n.fileName}}`)>0)}}class xB{replace(t,e){let n=t;for(const i of e)n=n.replace(new RegExp(`{${i.reference}-${i.instance}}`,"g"),i.numId.toString());return n}}class _B{constructor(){_e(this,"formatter"),_e(this,"imageReplacer"),_e(this,"numberingReplacer"),this.formatter=new bB,this.imageReplacer=new wB,this.numberingReplacer=new xB}compile(t,e,n=[]){const i=new dB,s=this.xmlifyFile(t,e),l=new Map(Object.entries(s));for(const[,o]of l)if(Array.isArray(o))for(const c of o)i.file(c.path,c.data);else i.file(o.path,o.data);for(const o of n)i.file(o.path,o.data);for(const o of t.Media.Array)o.type!=="svg"?i.file(`word/media/${o.fileName}`,o.data):(i.file(`word/media/${o.fileName}`,o.data),i.file(`word/media/${o.fallback.fileName}`,o.fallback.data));for(const{data:o,name:c,fontKey:h}of t.FontTable.fontOptionsWithKey){const[f]=c.split(".");i.file(`word/fonts/${f}.odttf`,vB(o,h))}return i}xmlifyFile(t,e){const n=t.Document.Relationships.RelationshipCount+1,i=Di(this.formatter.format(t.Document.View,{viewWrapper:t.Document,file:t,stack:[]}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}}),s=t.Comments.Relationships.RelationshipCount+1,l=Di(this.formatter.format(t.Comments,{viewWrapper:{View:t.Comments,Relationships:t.Comments.Relationships},file:t,stack:[]}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}}),o=this.imageReplacer.getMediaData(i,t.Media),c=this.imageReplacer.getMediaData(l,t.Media);return{Relationships:{data:(o.forEach((h,f)=>{t.Document.Relationships.createRelationship(n+f,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${h.fileName}`)}),t.Document.Relationships.createRelationship(t.Document.Relationships.RelationshipCount+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/fontTable","fontTable.xml"),Di(this.formatter.format(t.Document.Relationships,{viewWrapper:t.Document,file:t,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}})),path:"word/_rels/document.xml.rels"},Document:{data:(()=>{const h=this.imageReplacer.replace(i,o,n);return this.numberingReplacer.replace(h,t.Numbering.ConcreteNumbering)})(),path:"word/document.xml"},Styles:{data:(()=>{const h=Di(this.formatter.format(t.Styles,{viewWrapper:t.Document,file:t,stack:[]}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}});return this.numberingReplacer.replace(h,t.Numbering.ConcreteNumbering)})(),path:"word/styles.xml"},Properties:{data:Di(this.formatter.format(t.CoreProperties,{viewWrapper:t.Document,file:t,stack:[]}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/core.xml"},Numbering:{data:Di(this.formatter.format(t.Numbering,{viewWrapper:t.Document,file:t,stack:[]}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/numbering.xml"},FileRelationships:{data:Di(this.formatter.format(t.FileRelationships,{viewWrapper:t.Document,file:t,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}}),path:"_rels/.rels"},HeaderRelationships:t.Headers.map((h,f)=>{const p=Di(this.formatter.format(h.View,{viewWrapper:h,file:t,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(p,t.Media).forEach((m,w)=>{h.Relationships.createRelationship(w,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${m.fileName}`)}),{data:Di(this.formatter.format(h.Relationships,{viewWrapper:h,file:t,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}}),path:`word/_rels/header${f+1}.xml.rels`}}),FooterRelationships:t.Footers.map((h,f)=>{const p=Di(this.formatter.format(h.View,{viewWrapper:h,file:t,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(p,t.Media).forEach((m,w)=>{h.Relationships.createRelationship(w,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${m.fileName}`)}),{data:Di(this.formatter.format(h.Relationships,{viewWrapper:h,file:t,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}}),path:`word/_rels/footer${f+1}.xml.rels`}}),Headers:t.Headers.map((h,f)=>{const p=Di(this.formatter.format(h.View,{viewWrapper:h,file:t,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}}),y=this.imageReplacer.getMediaData(p,t.Media),m=this.imageReplacer.replace(p,y,0);return{data:this.numberingReplacer.replace(m,t.Numbering.ConcreteNumbering),path:`word/header${f+1}.xml`}}),Footers:t.Footers.map((h,f)=>{const p=Di(this.formatter.format(h.View,{viewWrapper:h,file:t,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}}),y=this.imageReplacer.getMediaData(p,t.Media),m=this.imageReplacer.replace(p,y,0);return{data:this.numberingReplacer.replace(m,t.Numbering.ConcreteNumbering),path:`word/footer${f+1}.xml`}}),ContentTypes:{data:Di(this.formatter.format(t.ContentTypes,{viewWrapper:t.Document,file:t,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}}),path:"[Content_Types].xml"},CustomProperties:{data:Di(this.formatter.format(t.CustomProperties,{viewWrapper:t.Document,file:t,stack:[]}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/custom.xml"},AppProperties:{data:Di(this.formatter.format(t.AppProperties,{viewWrapper:t.Document,file:t,stack:[]}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/app.xml"},FootNotes:{data:Di(this.formatter.format(t.FootNotes.View,{viewWrapper:t.FootNotes,file:t,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}}),path:"word/footnotes.xml"},FootNotesRelationships:{data:Di(this.formatter.format(t.FootNotes.Relationships,{viewWrapper:t.FootNotes,file:t,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}}),path:"word/_rels/footnotes.xml.rels"},Settings:{data:Di(this.formatter.format(t.Settings,{viewWrapper:t.Document,file:t,stack:[]}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/settings.xml"},Comments:{data:(()=>{const h=this.imageReplacer.replace(l,c,s);return this.numberingReplacer.replace(h,t.Numbering.ConcreteNumbering)})(),path:"word/comments.xml"},CommentsRelationships:{data:(c.forEach((h,f)=>{t.Comments.Relationships.createRelationship(s+f,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${h.fileName}`)}),Di(this.formatter.format(t.Comments.Relationships,{viewWrapper:{View:t.Comments,Relationships:t.Comments.Relationships},file:t,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}})),path:"word/_rels/comments.xml.rels"},FontTable:{data:Di(this.formatter.format(t.FontTable.View,{viewWrapper:t.Document,file:t,stack:[]}),{indent:e,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/fontTable.xml"},FontTableRelationships:{data:Di(this.formatter.format(t.FontTable.Relationships,{viewWrapper:t.Document,file:t,stack:[]}),{indent:e,declaration:{encoding:"UTF-8"}}),path:"word/_rels/fontTable.xml.rels"}}}}const AB={WITH_2_BLANKS:"  "},WS=r=>r===!0?AB.WITH_2_BLANKS:r===!1?void 0:r,k6=class of{static pack(t,e,n){return QD(this,arguments,function*(i,s,l,o=[]){return this.compiler.compile(i,WS(l),o).generateAsync({type:s,mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toString(t,e,n=[]){return of.pack(t,"string",e,n)}static toBuffer(t,e,n=[]){return of.pack(t,"nodebuffer",e,n)}static toBase64String(t,e,n=[]){return of.pack(t,"base64",e,n)}static toBlob(t,e,n=[]){return of.pack(t,"blob",e,n)}static toArrayBuffer(t,e,n=[]){return of.pack(t,"arraybuffer",e,n)}static toStream(t,e,n=[]){const i=new cB.Stream;return this.compiler.compile(t,WS(e),n).generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"}).then(l=>{i.emit("data",l),i.emit("end")}),i}};_e(k6,"compiler",new _B);let SB=k6;const EB="modulepreload",CB=function(r){return"/static/frontend/"+r},KS={},Rv=function(t,e,n){let i=Promise.resolve();if(e&&e.length>0){let c=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=l?.nonce||l?.getAttribute("nonce");i=c(e.map(h=>{if(h=CB(h),h in KS)return;KS[h]=!0;const f=h.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":EB,f||(y.as="script"),y.crossOrigin="",y.href=h,o&&y.setAttribute("nonce",o),document.head.appendChild(y),f)return new Promise((m,w)=>{y.addEventListener("load",m),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return i.then(l=>{for(const o of l||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})};function Lr(r){"@babel/helpers - typeof";return Lr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lr(r)}var yl=Uint8Array,So=Uint16Array,K2=Int32Array,$2=new yl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),X2=new yl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),$S=new yl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),R6=function(r,t){for(var e=new So(31),n=0;n<31;++n)e[n]=t+=1<<r[n-1];for(var i=new K2(e[30]),n=1;n<30;++n)for(var s=e[n];s<e[n+1];++s)i[s]=s-e[n]<<5|n;return{b:e,r:i}},L6=R6($2,2),TB=L6.b,Bb=L6.r;TB[28]=258,Bb[258]=28;var NB=R6(X2,0),XS=NB.r,Ib=new So(32768);for(var si=0;si<32768;++si){var vc=(si&43690)>>1|(si&21845)<<1;vc=(vc&52428)>>2|(vc&13107)<<2,vc=(vc&61680)>>4|(vc&3855)<<4,Ib[si]=((vc&65280)>>8|(vc&255)<<8)>>1}var Xd=(function(r,t,e){for(var n=r.length,i=0,s=new So(t);i<n;++i)r[i]&&++s[r[i]-1];var l=new So(t);for(i=1;i<t;++i)l[i]=l[i-1]+s[i-1]<<1;var o;if(e){o=new So(1<<t);var c=15-t;for(i=0;i<n;++i)if(r[i])for(var h=i<<4|r[i],f=t-r[i],p=l[r[i]-1]++<<f,y=p|(1<<f)-1;p<=y;++p)o[Ib[p]>>c]=h}else for(o=new So(n),i=0;i<n;++i)r[i]&&(o[i]=Ib[l[r[i]-1]++]>>15-r[i]);return o}),hh=new yl(288);for(var si=0;si<144;++si)hh[si]=8;for(var si=144;si<256;++si)hh[si]=9;for(var si=256;si<280;++si)hh[si]=7;for(var si=280;si<288;++si)hh[si]=8;var _g=new yl(32);for(var si=0;si<32;++si)_g[si]=5;var kB=Xd(hh,9,0),RB=Xd(_g,5,0),O6=function(r){return(r+7)/8|0},LB=function(r,t,e){return(e==null||e>r.length)&&(e=r.length),new yl(r.subarray(t,e))},Mu=function(r,t,e){e<<=t&7;var n=t/8|0;r[n]|=e,r[n+1]|=e>>8},Id=function(r,t,e){e<<=t&7;var n=t/8|0;r[n]|=e,r[n+1]|=e>>8,r[n+2]|=e>>16},Lv=function(r,t){for(var e=[],n=0;n<r.length;++n)r[n]&&e.push({s:n,f:r[n]});var i=e.length,s=e.slice();if(!i)return{t:P6,l:0};if(i==1){var l=new yl(e[0].s+1);return l[e[0].s]=1,{t:l,l:1}}e.sort(function(O,q){return O.f-q.f}),e.push({s:-1,f:25001});var o=e[0],c=e[1],h=0,f=1,p=2;for(e[0]={s:-1,f:o.f+c.f,l:o,r:c};f!=i-1;)o=e[e[h].f<e[p].f?h++:p++],c=e[h!=f&&e[h].f<e[p].f?h++:p++],e[f++]={s:-1,f:o.f+c.f,l:o,r:c};for(var y=s[0].s,n=1;n<i;++n)s[n].s>y&&(y=s[n].s);var m=new So(y+1),w=jb(e[f-1],m,0);if(w>t){var n=0,b=0,_=w-t,v=1<<_;for(s.sort(function(q,H){return m[H.s]-m[q.s]||q.f-H.f});n<i;++n){var A=s[n].s;if(m[A]>t)b+=v-(1<<w-m[A]),m[A]=t;else break}for(b>>=_;b>0;){var C=s[n].s;m[C]<t?b-=1<<t-m[C]++-1:++n}for(;n>=0&&b;--n){var S=s[n].s;m[S]==t&&(--m[S],++b)}w=t}return{t:new yl(m),l:w}},jb=function(r,t,e){return r.s==-1?Math.max(jb(r.l,t,e+1),jb(r.r,t,e+1)):t[r.s]=e},YS=function(r){for(var t=r.length;t&&!r[--t];);for(var e=new So(++t),n=0,i=r[0],s=1,l=function(c){e[n++]=c},o=1;o<=t;++o)if(r[o]==i&&o!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)l(32754);s>2&&(l(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(l(i),--s;s>6;s-=6)l(8304);s>2&&(l(s-3<<5|8208),s=0)}for(;s--;)l(i);s=1,i=r[o]}return{c:e.subarray(0,n),n:t}},jd=function(r,t){for(var e=0,n=0;n<t.length;++n)e+=r[n]*t[n];return e},D6=function(r,t,e){var n=e.length,i=O6(t+2);r[i]=n&255,r[i+1]=n>>8,r[i+2]=r[i]^255,r[i+3]=r[i+1]^255;for(var s=0;s<n;++s)r[i+s+4]=e[s];return(i+4+n)*8},QS=function(r,t,e,n,i,s,l,o,c,h,f){Mu(t,f++,e),++i[256];for(var p=Lv(i,15),y=p.t,m=p.l,w=Lv(s,15),b=w.t,_=w.l,v=YS(y),A=v.c,C=v.n,S=YS(b),O=S.c,q=S.n,H=new So(19),Q=0;Q<A.length;++Q)++H[A[Q]&31];for(var Q=0;Q<O.length;++Q)++H[O[Q]&31];for(var I=Lv(H,7),dt=I.t,nt=I.l,B=19;B>4&&!dt[$S[B-1]];--B);var Z=h+5<<3,D=jd(i,hh)+jd(s,_g)+l,mt=jd(i,y)+jd(s,b)+l+14+3*B+jd(H,dt)+2*H[16]+3*H[17]+7*H[18];if(c>=0&&Z<=D&&Z<=mt)return D6(t,f,r.subarray(c,c+h));var it,st,vt,wt;if(Mu(t,f,1+(mt<D)),f+=2,mt<D){it=Xd(y,m,0),st=y,vt=Xd(b,_,0),wt=b;var Ft=Xd(dt,nt,0);Mu(t,f,C-257),Mu(t,f+5,q-1),Mu(t,f+10,B-4),f+=14;for(var Q=0;Q<B;++Q)Mu(t,f+3*Q,dt[$S[Q]]);f+=3*B;for(var $=[A,O],R=0;R<2;++R)for(var K=$[R],Q=0;Q<K.length;++Q){var rt=K[Q]&31;Mu(t,f,Ft[rt]),f+=dt[rt],rt>15&&(Mu(t,f,K[Q]>>5&127),f+=K[Q]>>12)}}else it=kB,st=hh,vt=RB,wt=_g;for(var Q=0;Q<o;++Q){var pt=n[Q];if(pt>255){var rt=pt>>18&31;Id(t,f,it[rt+257]),f+=st[rt+257],rt>7&&(Mu(t,f,pt>>23&31),f+=$2[rt]);var ct=pt&31;Id(t,f,vt[ct]),f+=wt[ct],ct>3&&(Id(t,f,pt>>5&8191),f+=X2[ct])}else Id(t,f,it[pt]),f+=st[pt]}return Id(t,f,it[256]),f+st[256]},OB=new K2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),P6=new yl(0),DB=function(r,t,e,n,i,s){var l=s.z||r.length,o=new yl(n+l+5*(1+Math.ceil(l/7e3))+i),c=o.subarray(n,o.length-i),h=s.l,f=(s.r||0)&7;if(t){f&&(c[0]=s.r>>3);for(var p=OB[t-1],y=p>>13,m=p&8191,w=(1<<e)-1,b=s.p||new So(32768),_=s.h||new So(w+1),v=Math.ceil(e/3),A=2*v,C=function(W){return(r[W]^r[W+1]<<v^r[W+2]<<A)&w},S=new K2(25e3),O=new So(288),q=new So(32),H=0,Q=0,I=s.i||0,dt=0,nt=s.w||0,B=0;I+2<l;++I){var Z=C(I),D=I&32767,mt=_[Z];if(b[D]=mt,_[Z]=D,nt<=I){var it=l-I;if((H>7e3||dt>24576)&&(it>423||!h)){f=QS(r,c,0,S,O,q,Q,dt,B,I-B,f),dt=H=Q=0,B=I;for(var st=0;st<286;++st)O[st]=0;for(var st=0;st<30;++st)q[st]=0}var vt=2,wt=0,Ft=m,$=D-mt&32767;if(it>2&&Z==C(I-$))for(var R=Math.min(y,it)-1,K=Math.min(32767,I),rt=Math.min(258,it);$<=K&&--Ft&&D!=mt;){if(r[I+vt]==r[I+vt-$]){for(var pt=0;pt<rt&&r[I+pt]==r[I+pt-$];++pt);if(pt>vt){if(vt=pt,wt=$,pt>R)break;for(var ct=Math.min($,pt-2),F=0,st=0;st<ct;++st){var j=I-$+st&32767,ht=b[j],ot=j-ht&32767;ot>F&&(F=ot,mt=j)}}}D=mt,mt=b[D],$+=D-mt&32767}if(wt){S[dt++]=268435456|Bb[vt]<<18|XS[wt];var lt=Bb[vt]&31,ft=XS[wt]&31;Q+=$2[lt]+X2[ft],++O[257+lt],++q[ft],nt=I+vt,++H}else S[dt++]=r[I],++O[r[I]]}}for(I=Math.max(I,nt);I<l;++I)S[dt++]=r[I],++O[r[I]];f=QS(r,c,h,S,O,q,Q,dt,B,I-B,f),h||(s.r=f&7|c[f/8|0]<<3,f-=7,s.h=_,s.p=b,s.i=I,s.w=nt)}else{for(var I=s.w||0;I<l+h;I+=65535){var Mt=I+65535;Mt>=l&&(c[f/8|0]=h,Mt=l),f=D6(c,f+1,r.subarray(I,Mt))}s.i=l}return LB(o,0,n+O6(f)+i)},M6=function(){var r=1,t=0;return{p:function(e){for(var n=r,i=t,s=e.length|0,l=0;l!=s;){for(var o=Math.min(l+2655,s);l<o;++l)i+=n+=e[l];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}r=n,t=i},d:function(){return r%=65521,t%=65521,(r&255)<<24|(r&65280)<<8|(t&255)<<8|t>>8}}},PB=function(r,t,e,n,i){if(!i&&(i={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),l=new yl(s.length+r.length);l.set(s),l.set(r,s.length),r=l,i.w=s.length}return DB(r,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+t.mem,e,n,i)},F6=function(r,t,e){for(;e;++t)r[t]=e,e>>>=8},MB=function(r,t){var e=t.level,n=e==0?0:e<6?1:e==9?3:2;if(r[0]=120,r[1]=n<<6|(t.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,t.dictionary){var i=M6();i.p(t.dictionary),F6(r,2,i.d())}};function Ub(r,t){t||(t={});var e=M6();e.p(r);var n=PB(r,t,t.dictionary?6:2,4);return MB(n,t),F6(n,n.length-4,e.d()),n}var FB=typeof TextDecoder<"u"&&new TextDecoder,BB=0;try{FB.decode(P6,{stream:!0}),BB=1}catch{}function IB(r){if(Array.isArray(r))return r}function jB(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,i,s,l,o=[],c=!0,h=!1;try{if(s=(e=e.call(r)).next,t!==0)for(;!(c=(n=s.call(e)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(f){h=!0,i=f}finally{try{if(!c&&e.return!=null&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw i}}return o}}function ZS(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=Array(t);e<t;e++)n[e]=r[e];return n}function UB(r,t){if(r){if(typeof r=="string")return ZS(r,t);var e={}.toString.call(r).slice(8,-1);return e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set"?Array.from(r):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?ZS(r,t):void 0}}function zB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JS(r,t){return IB(r)||jB(r,t)||UB(r,t)||zB()}function tE(r,t="utf8"){return new TextDecoder(t).decode(r)}const qB=new TextEncoder;function HB(r){return qB.encode(r)}const GB=1024*8,VB=(()=>{const r=new Uint8Array(4),t=new Uint32Array(r.buffer);return!((t[0]=1)&r[0])})(),Ov={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Y2{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=GB,e={}){let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const i=e.offset?e.offset>>>0:0,s=t.byteLength-i;let l=i;(ArrayBuffer.isView(t)||t instanceof Y2)&&(t.byteLength!==t.buffer.byteLength&&(l=t.byteOffset+i),t=t.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=t,this.length=s,this.byteLength=s,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,s),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,e){const n=Ov[e].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+n);if(this.littleEndian===VB&&e!=="uint8"&&e!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+n));o.reverse();const c=new Ov[e](o.buffer);return this.offset+=n,c.reverse(),c}const l=new Ov[e](s);return this.offset+=n,l}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let e="";for(let n=0;n<t;n++)e+=this.readChar();return e}readUtf8(t=1){return tE(this.readBytes(t))}decodeText(t=1,e="utf8"){return tE(this.readBytes(t),e)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}writeUtf8(t){return this.writeBytes(HB(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Vf(r){let t=r.length;for(;--t>=0;)r[t]=0}const WB=3,KB=258,B6=29,$B=256,XB=$B+1+B6,I6=30,YB=512,QB=new Array((XB+2)*2);Vf(QB);const ZB=new Array(I6*2);Vf(ZB);const JB=new Array(YB);Vf(JB);const tI=new Array(KB-WB+1);Vf(tI);const eI=new Array(B6);Vf(eI);const nI=new Array(I6);Vf(nI);const rI=(r,t,e,n)=>{let i=r&65535|0,s=r>>>16&65535|0,l=0;for(;e!==0;){l=e>2e3?2e3:e,e-=l;do i=i+t[n++]|0,s=s+i|0;while(--l);i%=65521,s%=65521}return i|s<<16|0};var zb=rI;const iI=()=>{let r,t=[];for(var e=0;e<256;e++){r=e;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t},sI=new Uint32Array(iI()),aI=(r,t,e,n)=>{const i=sI,s=n+e;r^=-1;for(let l=n;l<s;l++)r=r>>>8^i[(r^t[l])&255];return r^-1};var Yl=aI,qb={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},j6={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const oI=(r,t)=>Object.prototype.hasOwnProperty.call(r,t);var lI=function(r){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const e=t.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const n in e)oI(e,n)&&(r[n]=e[n])}}return r},uI=r=>{let t=0;for(let n=0,i=r.length;n<i;n++)t+=r[n].length;const e=new Uint8Array(t);for(let n=0,i=0,s=r.length;n<s;n++){let l=r[n];e.set(l,i),i+=l.length}return e},U6={assign:lI,flattenChunks:uI};let z6=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{z6=!1}const sp=new Uint8Array(256);for(let r=0;r<256;r++)sp[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;sp[254]=sp[254]=1;var cI=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let t,e,n,i,s,l=r.length,o=0;for(i=0;i<l;i++)e=r.charCodeAt(i),(e&64512)===55296&&i+1<l&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),i++)),o+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(o),s=0,i=0;s<o;i++)e=r.charCodeAt(i),(e&64512)===55296&&i+1<l&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),i++)),e<128?t[s++]=e:e<2048?(t[s++]=192|e>>>6,t[s++]=128|e&63):e<65536?(t[s++]=224|e>>>12,t[s++]=128|e>>>6&63,t[s++]=128|e&63):(t[s++]=240|e>>>18,t[s++]=128|e>>>12&63,t[s++]=128|e>>>6&63,t[s++]=128|e&63);return t};const hI=(r,t)=>{if(t<65534&&r.subarray&&z6)return String.fromCharCode.apply(null,r.length===t?r:r.subarray(0,t));let e="";for(let n=0;n<t;n++)e+=String.fromCharCode(r[n]);return e};var fI=(r,t)=>{const e=t||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,t));let n,i;const s=new Array(e*2);for(i=0,n=0;n<e;){let l=r[n++];if(l<128){s[i++]=l;continue}let o=sp[l];if(o>4){s[i++]=65533,n+=o-1;continue}for(l&=o===2?31:o===3?15:7;o>1&&n<e;)l=l<<6|r[n++]&63,o--;if(o>1){s[i++]=65533;continue}l<65536?s[i++]=l:(l-=65536,s[i++]=55296|l>>10&1023,s[i++]=56320|l&1023)}return hI(s,i)},dI=(r,t)=>{t=t||r.length,t>r.length&&(t=r.length);let e=t-1;for(;e>=0&&(r[e]&192)===128;)e--;return e<0||e===0?t:e+sp[r[e]]>t?e:t},Hb={string2buf:cI,buf2string:fI,utf8border:dI};function pI(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var mI=pI;const Im=16209,gI=16191;var yI=function(t,e){let n,i,s,l,o,c,h,f,p,y,m,w,b,_,v,A,C,S,O,q,H,Q,I,dt;const nt=t.state;n=t.next_in,I=t.input,i=n+(t.avail_in-5),s=t.next_out,dt=t.output,l=s-(e-t.avail_out),o=s+(t.avail_out-257),c=nt.dmax,h=nt.wsize,f=nt.whave,p=nt.wnext,y=nt.window,m=nt.hold,w=nt.bits,b=nt.lencode,_=nt.distcode,v=(1<<nt.lenbits)-1,A=(1<<nt.distbits)-1;t:do{w<15&&(m+=I[n++]<<w,w+=8,m+=I[n++]<<w,w+=8),C=b[m&v];e:for(;;){if(S=C>>>24,m>>>=S,w-=S,S=C>>>16&255,S===0)dt[s++]=C&65535;else if(S&16){O=C&65535,S&=15,S&&(w<S&&(m+=I[n++]<<w,w+=8),O+=m&(1<<S)-1,m>>>=S,w-=S),w<15&&(m+=I[n++]<<w,w+=8,m+=I[n++]<<w,w+=8),C=_[m&A];n:for(;;){if(S=C>>>24,m>>>=S,w-=S,S=C>>>16&255,S&16){if(q=C&65535,S&=15,w<S&&(m+=I[n++]<<w,w+=8,w<S&&(m+=I[n++]<<w,w+=8)),q+=m&(1<<S)-1,q>c){t.msg="invalid distance too far back",nt.mode=Im;break t}if(m>>>=S,w-=S,S=s-l,q>S){if(S=q-S,S>f&&nt.sane){t.msg="invalid distance too far back",nt.mode=Im;break t}if(H=0,Q=y,p===0){if(H+=h-S,S<O){O-=S;do dt[s++]=y[H++];while(--S);H=s-q,Q=dt}}else if(p<S){if(H+=h+p-S,S-=p,S<O){O-=S;do dt[s++]=y[H++];while(--S);if(H=0,p<O){S=p,O-=S;do dt[s++]=y[H++];while(--S);H=s-q,Q=dt}}}else if(H+=p-S,S<O){O-=S;do dt[s++]=y[H++];while(--S);H=s-q,Q=dt}for(;O>2;)dt[s++]=Q[H++],dt[s++]=Q[H++],dt[s++]=Q[H++],O-=3;O&&(dt[s++]=Q[H++],O>1&&(dt[s++]=Q[H++]))}else{H=s-q;do dt[s++]=dt[H++],dt[s++]=dt[H++],dt[s++]=dt[H++],O-=3;while(O>2);O&&(dt[s++]=dt[H++],O>1&&(dt[s++]=dt[H++]))}}else if((S&64)===0){C=_[(C&65535)+(m&(1<<S)-1)];continue n}else{t.msg="invalid distance code",nt.mode=Im;break t}break}}else if((S&64)===0){C=b[(C&65535)+(m&(1<<S)-1)];continue e}else if(S&32){nt.mode=gI;break t}else{t.msg="invalid literal/length code",nt.mode=Im;break t}break}}while(n<i&&s<o);O=w>>3,n-=O,w-=O<<3,m&=(1<<w)-1,t.next_in=n,t.next_out=s,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=s<o?257+(o-s):257-(s-o),nt.hold=m,nt.bits=w};const tf=15,eE=852,nE=592,rE=0,Dv=1,iE=2,vI=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),bI=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),wI=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),xI=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),_I=(r,t,e,n,i,s,l,o)=>{const c=o.bits;let h=0,f=0,p=0,y=0,m=0,w=0,b=0,_=0,v=0,A=0,C,S,O,q,H,Q=null,I;const dt=new Uint16Array(tf+1),nt=new Uint16Array(tf+1);let B=null,Z,D,mt;for(h=0;h<=tf;h++)dt[h]=0;for(f=0;f<n;f++)dt[t[e+f]]++;for(m=c,y=tf;y>=1&&dt[y]===0;y--);if(m>y&&(m=y),y===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,o.bits=1,0;for(p=1;p<y&&dt[p]===0;p++);for(m<p&&(m=p),_=1,h=1;h<=tf;h++)if(_<<=1,_-=dt[h],_<0)return-1;if(_>0&&(r===rE||y!==1))return-1;for(nt[1]=0,h=1;h<tf;h++)nt[h+1]=nt[h]+dt[h];for(f=0;f<n;f++)t[e+f]!==0&&(l[nt[t[e+f]]++]=f);if(r===rE?(Q=B=l,I=20):r===Dv?(Q=vI,B=bI,I=257):(Q=wI,B=xI,I=0),A=0,f=0,h=p,H=s,w=m,b=0,O=-1,v=1<<m,q=v-1,r===Dv&&v>eE||r===iE&&v>nE)return 1;for(;;){Z=h-b,l[f]+1<I?(D=0,mt=l[f]):l[f]>=I?(D=B[l[f]-I],mt=Q[l[f]-I]):(D=96,mt=0),C=1<<h-b,S=1<<w,p=S;do S-=C,i[H+(A>>b)+S]=Z<<24|D<<16|mt|0;while(S!==0);for(C=1<<h-1;A&C;)C>>=1;if(C!==0?(A&=C-1,A+=C):A=0,f++,--dt[h]===0){if(h===y)break;h=t[e+l[f]]}if(h>m&&(A&q)!==O){for(b===0&&(b=m),H+=p,w=h-b,_=1<<w;w+b<y&&(_-=dt[w+b],!(_<=0));)w++,_<<=1;if(v+=1<<w,r===Dv&&v>eE||r===iE&&v>nE)return 1;O=A&q,i[O]=m<<24|w<<16|H-s|0}}return A!==0&&(i[H+A]=h-b<<24|64<<16|0),o.bits=m,0};var Yd=_I;const AI=0,q6=1,H6=2,{Z_FINISH:sE,Z_BLOCK:SI,Z_TREES:jm,Z_OK:fh,Z_STREAM_END:EI,Z_NEED_DICT:CI,Z_STREAM_ERROR:Wo,Z_DATA_ERROR:G6,Z_MEM_ERROR:V6,Z_BUF_ERROR:TI,Z_DEFLATED:aE}=j6,s0=16180,oE=16181,lE=16182,uE=16183,cE=16184,hE=16185,fE=16186,dE=16187,pE=16188,mE=16189,Ag=16190,Fu=16191,Pv=16192,gE=16193,Mv=16194,yE=16195,vE=16196,bE=16197,wE=16198,Um=16199,zm=16200,xE=16201,_E=16202,AE=16203,SE=16204,EE=16205,Fv=16206,CE=16207,TE=16208,fi=16209,W6=16210,K6=16211,NI=852,kI=592,RI=15,LI=RI,NE=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function OI(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const vh=r=>{if(!r)return 1;const t=r.state;return!t||t.strm!==r||t.mode<s0||t.mode>K6?1:0},$6=r=>{if(vh(r))return Wo;const t=r.state;return r.total_in=r.total_out=t.total=0,r.msg="",t.wrap&&(r.adler=t.wrap&1),t.mode=s0,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(NI),t.distcode=t.distdyn=new Int32Array(kI),t.sane=1,t.back=-1,fh},X6=r=>{if(vh(r))return Wo;const t=r.state;return t.wsize=0,t.whave=0,t.wnext=0,$6(r)},Y6=(r,t)=>{let e;if(vh(r))return Wo;const n=r.state;return t<0?(e=0,t=-t):(e=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Wo:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=e,n.wbits=t,X6(r))},Q6=(r,t)=>{if(!r)return Wo;const e=new OI;r.state=e,e.strm=r,e.window=null,e.mode=s0;const n=Y6(r,t);return n!==fh&&(r.state=null),n},DI=r=>Q6(r,LI);let kE=!0,Bv,Iv;const PI=r=>{if(kE){Bv=new Int32Array(512),Iv=new Int32Array(32);let t=0;for(;t<144;)r.lens[t++]=8;for(;t<256;)r.lens[t++]=9;for(;t<280;)r.lens[t++]=7;for(;t<288;)r.lens[t++]=8;for(Yd(q6,r.lens,0,288,Bv,0,r.work,{bits:9}),t=0;t<32;)r.lens[t++]=5;Yd(H6,r.lens,0,32,Iv,0,r.work,{bits:5}),kE=!1}r.lencode=Bv,r.lenbits=9,r.distcode=Iv,r.distbits=5},Z6=(r,t,e,n)=>{let i;const s=r.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(t.subarray(e-s.wsize,e),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(t.subarray(e-n,e-n+i),s.wnext),n-=i,n?(s.window.set(t.subarray(e-n,e),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},MI=(r,t)=>{let e,n,i,s,l,o,c,h,f,p,y,m,w,b,_=0,v,A,C,S,O,q,H,Q;const I=new Uint8Array(4);let dt,nt;const B=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(vh(r)||!r.output||!r.input&&r.avail_in!==0)return Wo;e=r.state,e.mode===Fu&&(e.mode=Pv),l=r.next_out,i=r.output,c=r.avail_out,s=r.next_in,n=r.input,o=r.avail_in,h=e.hold,f=e.bits,p=o,y=c,Q=fh;t:for(;;)switch(e.mode){case s0:if(e.wrap===0){e.mode=Pv;break}for(;f<16;){if(o===0)break t;o--,h+=n[s++]<<f,f+=8}if(e.wrap&2&&h===35615){e.wbits===0&&(e.wbits=15),e.check=0,I[0]=h&255,I[1]=h>>>8&255,e.check=Yl(e.check,I,2,0),h=0,f=0,e.mode=oE;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((h&255)<<8)+(h>>8))%31){r.msg="incorrect header check",e.mode=fi;break}if((h&15)!==aE){r.msg="unknown compression method",e.mode=fi;break}if(h>>>=4,f-=4,H=(h&15)+8,e.wbits===0&&(e.wbits=H),H>15||H>e.wbits){r.msg="invalid window size",e.mode=fi;break}e.dmax=1<<e.wbits,e.flags=0,r.adler=e.check=1,e.mode=h&512?mE:Fu,h=0,f=0;break;case oE:for(;f<16;){if(o===0)break t;o--,h+=n[s++]<<f,f+=8}if(e.flags=h,(e.flags&255)!==aE){r.msg="unknown compression method",e.mode=fi;break}if(e.flags&57344){r.msg="unknown header flags set",e.mode=fi;break}e.head&&(e.head.text=h>>8&1),e.flags&512&&e.wrap&4&&(I[0]=h&255,I[1]=h>>>8&255,e.check=Yl(e.check,I,2,0)),h=0,f=0,e.mode=lE;case lE:for(;f<32;){if(o===0)break t;o--,h+=n[s++]<<f,f+=8}e.head&&(e.head.time=h),e.flags&512&&e.wrap&4&&(I[0]=h&255,I[1]=h>>>8&255,I[2]=h>>>16&255,I[3]=h>>>24&255,e.check=Yl(e.check,I,4,0)),h=0,f=0,e.mode=uE;case uE:for(;f<16;){if(o===0)break t;o--,h+=n[s++]<<f,f+=8}e.head&&(e.head.xflags=h&255,e.head.os=h>>8),e.flags&512&&e.wrap&4&&(I[0]=h&255,I[1]=h>>>8&255,e.check=Yl(e.check,I,2,0)),h=0,f=0,e.mode=cE;case cE:if(e.flags&1024){for(;f<16;){if(o===0)break t;o--,h+=n[s++]<<f,f+=8}e.length=h,e.head&&(e.head.extra_len=h),e.flags&512&&e.wrap&4&&(I[0]=h&255,I[1]=h>>>8&255,e.check=Yl(e.check,I,2,0)),h=0,f=0}else e.head&&(e.head.extra=null);e.mode=hE;case hE:if(e.flags&1024&&(m=e.length,m>o&&(m=o),m&&(e.head&&(H=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(n.subarray(s,s+m),H)),e.flags&512&&e.wrap&4&&(e.check=Yl(e.check,n,m,s)),o-=m,s+=m,e.length-=m),e.length))break t;e.length=0,e.mode=fE;case fE:if(e.flags&2048){if(o===0)break t;m=0;do H=n[s+m++],e.head&&H&&e.length<65536&&(e.head.name+=String.fromCharCode(H));while(H&&m<o);if(e.flags&512&&e.wrap&4&&(e.check=Yl(e.check,n,m,s)),o-=m,s+=m,H)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=dE;case dE:if(e.flags&4096){if(o===0)break t;m=0;do H=n[s+m++],e.head&&H&&e.length<65536&&(e.head.comment+=String.fromCharCode(H));while(H&&m<o);if(e.flags&512&&e.wrap&4&&(e.check=Yl(e.check,n,m,s)),o-=m,s+=m,H)break t}else e.head&&(e.head.comment=null);e.mode=pE;case pE:if(e.flags&512){for(;f<16;){if(o===0)break t;o--,h+=n[s++]<<f,f+=8}if(e.wrap&4&&h!==(e.check&65535)){r.msg="header crc mismatch",e.mode=fi;break}h=0,f=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),r.adler=e.check=0,e.mode=Fu;break;case mE:for(;f<32;){if(o===0)break t;o--,h+=n[s++]<<f,f+=8}r.adler=e.check=NE(h),h=0,f=0,e.mode=Ag;case Ag:if(e.havedict===0)return r.next_out=l,r.avail_out=c,r.next_in=s,r.avail_in=o,e.hold=h,e.bits=f,CI;r.adler=e.check=1,e.mode=Fu;case Fu:if(t===SI||t===jm)break t;case Pv:if(e.last){h>>>=f&7,f-=f&7,e.mode=Fv;break}for(;f<3;){if(o===0)break t;o--,h+=n[s++]<<f,f+=8}switch(e.last=h&1,h>>>=1,f-=1,h&3){case 0:e.mode=gE;break;case 1:if(PI(e),e.mode=Um,t===jm){h>>>=2,f-=2;break t}break;case 2:e.mode=vE;break;case 3:r.msg="invalid block type",e.mode=fi}h>>>=2,f-=2;break;case gE:for(h>>>=f&7,f-=f&7;f<32;){if(o===0)break t;o--,h+=n[s++]<<f,f+=8}if((h&65535)!==(h>>>16^65535)){r.msg="invalid stored block lengths",e.mode=fi;break}if(e.length=h&65535,h=0,f=0,e.mode=Mv,t===jm)break t;case Mv:e.mode=yE;case yE:if(m=e.length,m){if(m>o&&(m=o),m>c&&(m=c),m===0)break t;i.set(n.subarray(s,s+m),l),o-=m,s+=m,c-=m,l+=m,e.length-=m;break}e.mode=Fu;break;case vE:for(;f<14;){if(o===0)break t;o--,h+=n[s++]<<f,f+=8}if(e.nlen=(h&31)+257,h>>>=5,f-=5,e.ndist=(h&31)+1,h>>>=5,f-=5,e.ncode=(h&15)+4,h>>>=4,f-=4,e.nlen>286||e.ndist>30){r.msg="too many length or distance symbols",e.mode=fi;break}e.have=0,e.mode=bE;case bE:for(;e.have<e.ncode;){for(;f<3;){if(o===0)break t;o--,h+=n[s++]<<f,f+=8}e.lens[B[e.have++]]=h&7,h>>>=3,f-=3}for(;e.have<19;)e.lens[B[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,dt={bits:e.lenbits},Q=Yd(AI,e.lens,0,19,e.lencode,0,e.work,dt),e.lenbits=dt.bits,Q){r.msg="invalid code lengths set",e.mode=fi;break}e.have=0,e.mode=wE;case wE:for(;e.have<e.nlen+e.ndist;){for(;_=e.lencode[h&(1<<e.lenbits)-1],v=_>>>24,A=_>>>16&255,C=_&65535,!(v<=f);){if(o===0)break t;o--,h+=n[s++]<<f,f+=8}if(C<16)h>>>=v,f-=v,e.lens[e.have++]=C;else{if(C===16){for(nt=v+2;f<nt;){if(o===0)break t;o--,h+=n[s++]<<f,f+=8}if(h>>>=v,f-=v,e.have===0){r.msg="invalid bit length repeat",e.mode=fi;break}H=e.lens[e.have-1],m=3+(h&3),h>>>=2,f-=2}else if(C===17){for(nt=v+3;f<nt;){if(o===0)break t;o--,h+=n[s++]<<f,f+=8}h>>>=v,f-=v,H=0,m=3+(h&7),h>>>=3,f-=3}else{for(nt=v+7;f<nt;){if(o===0)break t;o--,h+=n[s++]<<f,f+=8}h>>>=v,f-=v,H=0,m=11+(h&127),h>>>=7,f-=7}if(e.have+m>e.nlen+e.ndist){r.msg="invalid bit length repeat",e.mode=fi;break}for(;m--;)e.lens[e.have++]=H}}if(e.mode===fi)break;if(e.lens[256]===0){r.msg="invalid code -- missing end-of-block",e.mode=fi;break}if(e.lenbits=9,dt={bits:e.lenbits},Q=Yd(q6,e.lens,0,e.nlen,e.lencode,0,e.work,dt),e.lenbits=dt.bits,Q){r.msg="invalid literal/lengths set",e.mode=fi;break}if(e.distbits=6,e.distcode=e.distdyn,dt={bits:e.distbits},Q=Yd(H6,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,dt),e.distbits=dt.bits,Q){r.msg="invalid distances set",e.mode=fi;break}if(e.mode=Um,t===jm)break t;case Um:e.mode=zm;case zm:if(o>=6&&c>=258){r.next_out=l,r.avail_out=c,r.next_in=s,r.avail_in=o,e.hold=h,e.bits=f,yI(r,y),l=r.next_out,i=r.output,c=r.avail_out,s=r.next_in,n=r.input,o=r.avail_in,h=e.hold,f=e.bits,e.mode===Fu&&(e.back=-1);break}for(e.back=0;_=e.lencode[h&(1<<e.lenbits)-1],v=_>>>24,A=_>>>16&255,C=_&65535,!(v<=f);){if(o===0)break t;o--,h+=n[s++]<<f,f+=8}if(A&&(A&240)===0){for(S=v,O=A,q=C;_=e.lencode[q+((h&(1<<S+O)-1)>>S)],v=_>>>24,A=_>>>16&255,C=_&65535,!(S+v<=f);){if(o===0)break t;o--,h+=n[s++]<<f,f+=8}h>>>=S,f-=S,e.back+=S}if(h>>>=v,f-=v,e.back+=v,e.length=C,A===0){e.mode=EE;break}if(A&32){e.back=-1,e.mode=Fu;break}if(A&64){r.msg="invalid literal/length code",e.mode=fi;break}e.extra=A&15,e.mode=xE;case xE:if(e.extra){for(nt=e.extra;f<nt;){if(o===0)break t;o--,h+=n[s++]<<f,f+=8}e.length+=h&(1<<e.extra)-1,h>>>=e.extra,f-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=_E;case _E:for(;_=e.distcode[h&(1<<e.distbits)-1],v=_>>>24,A=_>>>16&255,C=_&65535,!(v<=f);){if(o===0)break t;o--,h+=n[s++]<<f,f+=8}if((A&240)===0){for(S=v,O=A,q=C;_=e.distcode[q+((h&(1<<S+O)-1)>>S)],v=_>>>24,A=_>>>16&255,C=_&65535,!(S+v<=f);){if(o===0)break t;o--,h+=n[s++]<<f,f+=8}h>>>=S,f-=S,e.back+=S}if(h>>>=v,f-=v,e.back+=v,A&64){r.msg="invalid distance code",e.mode=fi;break}e.offset=C,e.extra=A&15,e.mode=AE;case AE:if(e.extra){for(nt=e.extra;f<nt;){if(o===0)break t;o--,h+=n[s++]<<f,f+=8}e.offset+=h&(1<<e.extra)-1,h>>>=e.extra,f-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){r.msg="invalid distance too far back",e.mode=fi;break}e.mode=SE;case SE:if(c===0)break t;if(m=y-c,e.offset>m){if(m=e.offset-m,m>e.whave&&e.sane){r.msg="invalid distance too far back",e.mode=fi;break}m>e.wnext?(m-=e.wnext,w=e.wsize-m):w=e.wnext-m,m>e.length&&(m=e.length),b=e.window}else b=i,w=l-e.offset,m=e.length;m>c&&(m=c),c-=m,e.length-=m;do i[l++]=b[w++];while(--m);e.length===0&&(e.mode=zm);break;case EE:if(c===0)break t;i[l++]=e.length,c--,e.mode=zm;break;case Fv:if(e.wrap){for(;f<32;){if(o===0)break t;o--,h|=n[s++]<<f,f+=8}if(y-=c,r.total_out+=y,e.total+=y,e.wrap&4&&y&&(r.adler=e.check=e.flags?Yl(e.check,i,y,l-y):zb(e.check,i,y,l-y)),y=c,e.wrap&4&&(e.flags?h:NE(h))!==e.check){r.msg="incorrect data check",e.mode=fi;break}h=0,f=0}e.mode=CE;case CE:if(e.wrap&&e.flags){for(;f<32;){if(o===0)break t;o--,h+=n[s++]<<f,f+=8}if(e.wrap&4&&h!==(e.total&4294967295)){r.msg="incorrect length check",e.mode=fi;break}h=0,f=0}e.mode=TE;case TE:Q=EI;break t;case fi:Q=G6;break t;case W6:return V6;case K6:default:return Wo}return r.next_out=l,r.avail_out=c,r.next_in=s,r.avail_in=o,e.hold=h,e.bits=f,(e.wsize||y!==r.avail_out&&e.mode<fi&&(e.mode<Fv||t!==sE))&&Z6(r,r.output,r.next_out,y-r.avail_out),p-=r.avail_in,y-=r.avail_out,r.total_in+=p,r.total_out+=y,e.total+=y,e.wrap&4&&y&&(r.adler=e.check=e.flags?Yl(e.check,i,y,r.next_out-y):zb(e.check,i,y,r.next_out-y)),r.data_type=e.bits+(e.last?64:0)+(e.mode===Fu?128:0)+(e.mode===Um||e.mode===Mv?256:0),(p===0&&y===0||t===sE)&&Q===fh&&(Q=TI),Q},FI=r=>{if(vh(r))return Wo;let t=r.state;return t.window&&(t.window=null),r.state=null,fh},BI=(r,t)=>{if(vh(r))return Wo;const e=r.state;return(e.wrap&2)===0?Wo:(e.head=t,t.done=!1,fh)},II=(r,t)=>{const e=t.length;let n,i,s;return vh(r)||(n=r.state,n.wrap!==0&&n.mode!==Ag)?Wo:n.mode===Ag&&(i=1,i=zb(i,t,e,0),i!==n.check)?G6:(s=Z6(r,t,e,e),s?(n.mode=W6,V6):(n.havedict=1,fh))};var jI=X6,UI=Y6,zI=$6,qI=DI,HI=Q6,GI=MI,VI=FI,WI=BI,KI=II,$I="pako inflate (from Nodeca project)",ju={inflateReset:jI,inflateReset2:UI,inflateResetKeep:zI,inflateInit:qI,inflateInit2:HI,inflate:GI,inflateEnd:VI,inflateGetHeader:WI,inflateSetDictionary:KI,inflateInfo:$I};function XI(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var YI=XI;const J6=Object.prototype.toString,{Z_NO_FLUSH:QI,Z_FINISH:ZI,Z_OK:ap,Z_STREAM_END:jv,Z_NEED_DICT:Uv,Z_STREAM_ERROR:JI,Z_DATA_ERROR:RE,Z_MEM_ERROR:tj}=j6;function Ap(r){this.options=U6.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(r&&r.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new mI,this.strm.avail_out=0;let e=ju.inflateInit2(this.strm,t.windowBits);if(e!==ap)throw new Error(qb[e]);if(this.header=new YI,ju.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Hb.string2buf(t.dictionary):J6.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=ju.inflateSetDictionary(this.strm,t.dictionary),e!==ap)))throw new Error(qb[e])}Ap.prototype.push=function(r,t){const e=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,l,o;if(this.ended)return!1;for(t===~~t?l=t:l=t===!0?ZI:QI,J6.call(r)==="[object ArrayBuffer]"?e.input=new Uint8Array(r):e.input=r,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(n),e.next_out=0,e.avail_out=n),s=ju.inflate(e,l),s===Uv&&i&&(s=ju.inflateSetDictionary(e,i),s===ap?s=ju.inflate(e,l):s===RE&&(s=Uv));e.avail_in>0&&s===jv&&e.state.wrap>0&&r[e.next_in]!==0;)ju.inflateReset(e),s=ju.inflate(e,l);switch(s){case JI:case RE:case Uv:case tj:return this.onEnd(s),this.ended=!0,!1}if(o=e.avail_out,e.next_out&&(e.avail_out===0||s===jv))if(this.options.to==="string"){let c=Hb.utf8border(e.output,e.next_out),h=e.next_out-c,f=Hb.buf2string(e.output,c);e.next_out=h,e.avail_out=n-h,h&&e.output.set(e.output.subarray(c,c+h),0),this.onData(f)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(s===ap&&o===0)){if(s===jv)return s=ju.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};Ap.prototype.onData=function(r){this.chunks.push(r)};Ap.prototype.onEnd=function(r){r===ap&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=U6.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function ej(r,t){const e=new Ap(t);if(e.push(r),e.err)throw e.msg||qb[e.err];return e.result}var nj=Ap,rj=ej,ij={Inflate:nj,inflate:rj};const{Inflate:sj,inflate:aj}=ij;var LE=sj,oj=aj;const tC=[];for(let r=0;r<256;r++){let t=r;for(let e=0;e<8;e++)t&1?t=3988292384^t>>>1:t=t>>>1;tC[r]=t}const OE=4294967295;function lj(r,t,e){let n=r;for(let i=0;i<e;i++)n=tC[(n^t[i])&255]^n>>>8;return n}function uj(r,t){return(lj(OE,r,t)^OE)>>>0}function DE(r,t,e){const n=r.readUint32(),i=uj(new Uint8Array(r.buffer,r.byteOffset+r.offset-t-4,t),t);if(i!==n)throw new Error(`CRC mismatch for chunk ${e}. Expected ${n}, found ${i}`)}function eC(r,t,e){for(let n=0;n<e;n++)t[n]=r[n]}function nC(r,t,e,n){let i=0;for(;i<n;i++)t[i]=r[i];for(;i<e;i++)t[i]=r[i]+t[i-n]&255}function rC(r,t,e,n){let i=0;if(e.length===0)for(;i<n;i++)t[i]=r[i];else for(;i<n;i++)t[i]=r[i]+e[i]&255}function iC(r,t,e,n,i){let s=0;if(e.length===0){for(;s<i;s++)t[s]=r[s];for(;s<n;s++)t[s]=r[s]+(t[s-i]>>1)&255}else{for(;s<i;s++)t[s]=r[s]+(e[s]>>1)&255;for(;s<n;s++)t[s]=r[s]+(t[s-i]+e[s]>>1)&255}}function sC(r,t,e,n,i){let s=0;if(e.length===0){for(;s<i;s++)t[s]=r[s];for(;s<n;s++)t[s]=r[s]+t[s-i]&255}else{for(;s<i;s++)t[s]=r[s]+e[s]&255;for(;s<n;s++)t[s]=r[s]+cj(t[s-i],e[s],e[s-i])&255}}function cj(r,t,e){const n=r+t-e,i=Math.abs(n-r),s=Math.abs(n-t),l=Math.abs(n-e);return i<=s&&i<=l?r:s<=l?t:e}function hj(r,t,e,n,i,s){switch(r){case 0:eC(t,e,i);break;case 1:nC(t,e,i,s);break;case 2:rC(t,e,n,i);break;case 3:iC(t,e,n,i,s);break;case 4:sC(t,e,n,i,s);break;default:throw new Error(`Unsupported filter: ${r}`)}}const fj=new Uint16Array([255]),dj=new Uint8Array(fj.buffer),pj=dj[0]===255;function mj(r){const{data:t,width:e,height:n,channels:i,depth:s}=r,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(s/8)*i,c=new Uint8Array(n*e*o);let h=0;for(let f=0;f<7;f++){const p=l[f],y=Math.ceil((e-p.x)/p.xStep),m=Math.ceil((n-p.y)/p.yStep);if(y<=0||m<=0)continue;const w=y*o,b=new Uint8Array(w);for(let _=0;_<m;_++){const v=t[h++],A=t.subarray(h,h+w);h+=w;const C=new Uint8Array(w);hj(v,A,C,b,w,o),b.set(C);for(let S=0;S<y;S++){const O=p.x+S*p.xStep,q=p.y+_*p.yStep;if(!(O>=e||q>=n))for(let H=0;H<o;H++)c[(q*e+O)*o+H]=C[S*o+H]}}}if(s===16){const f=new Uint16Array(c.buffer);if(pj)for(let p=0;p<f.length;p++)f[p]=gj(f[p]);return f}else return c}function gj(r){return(r&255)<<8|r>>8&255}const yj=new Uint16Array([255]),vj=new Uint8Array(yj.buffer),bj=vj[0]===255,wj=new Uint8Array(0);function PE(r){const{data:t,width:e,height:n,channels:i,depth:s}=r,l=Math.ceil(s/8)*i,o=Math.ceil(s/8*i*e),c=new Uint8Array(n*o);let h=wj,f=0,p,y;for(let m=0;m<n;m++){switch(p=t.subarray(f+1,f+1+o),y=c.subarray(m*o,(m+1)*o),t[f]){case 0:eC(p,y,o);break;case 1:nC(p,y,o,l);break;case 2:rC(p,y,h,o);break;case 3:iC(p,y,h,o,l);break;case 4:sC(p,y,h,o,l);break;default:throw new Error(`Unsupported filter: ${t[f]}`)}h=y,f+=o+1}if(s===16){const m=new Uint16Array(c.buffer);if(bj)for(let w=0;w<m.length;w++)m[w]=xj(m[w]);return m}else return c}function xj(r){return(r&255)<<8|r>>8&255}const ng=Uint8Array.of(137,80,78,71,13,10,26,10);function ME(r){if(!_j(r.readBytes(ng.length)))throw new Error("wrong PNG signature")}function _j(r){if(r.length<ng.length)return!1;for(let t=0;t<ng.length;t++)if(r[t]!==ng[t])return!1;return!0}const Aj="tEXt",Sj=0,aC=new TextDecoder("latin1");function Ej(r){if(Tj(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const Cj=/^[\u0000-\u00FF]*$/;function Tj(r){if(!Cj.test(r))throw new Error("invalid latin1 text")}function Nj(r,t,e){const n=oC(t);r[n]=kj(t,e-n.length-1)}function oC(r){for(r.mark();r.readByte()!==Sj;);const t=r.offset;r.reset();const e=aC.decode(r.readBytes(t-r.offset-1));return r.skip(1),Ej(e),e}function kj(r,t){return aC.decode(r.readBytes(t))}const wo={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},zv={UNKNOWN:-1,DEFLATE:0},FE={UNKNOWN:-1,ADAPTIVE:0},qv={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},qm={NONE:0,BACKGROUND:1,PREVIOUS:2},Hv={SOURCE:0,OVER:1};class Rj extends Y2{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(t,e={}){super(t);const{checkCrc:n=!1}=e;this._checkCrc=n,this._inflator=new LE,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=zv.UNKNOWN,this._filterMethod=FE.UNKNOWN,this._interlaceMethod=qv.UNKNOWN,this._colorType=wo.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(ME(this);!this._end;){const t=this.readUint32(),e=this.readChars(4);this.decodeChunk(t,e)}return this.decodeImage(),this._png}decodeApng(){for(ME(this);!this._end;){const t=this.readUint32(),e=this.readChars(4);this.decodeApngChunk(t,e)}return this.decodeApngImage(),this._apng}decodeChunk(t,e){const n=this.offset;switch(e){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case Aj:Nj(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${e}`);this._checkCrc?DE(this,t+4,e):this.skip(4)}decodeApngChunk(t,e){const n=this.offset;switch(e!=="fdAT"&&e!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),e){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,e),this.offset=n+t;break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${e}`);this._checkCrc?DE(this,t+4,e):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=Lj(this.readUint8());const e=this.readUint8();this._colorType=e;let n;switch(e){case wo.GREYSCALE:n=1;break;case wo.TRUECOLOUR:n=3;break;case wo.INDEXED_COLOUR:n=1;break;case wo.GREYSCALE_ALPHA:n=2;break;case wo.TRUECOLOUR_ALPHA:n=4;break;case wo.UNKNOWN:default:throw new Error(`Unknown color type: ${e}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==zv.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const e=t/3;this._hasPalette=!0;const n=[];this._palette=n;for(let i=0;i<e;i++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const e=t,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,e)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let e=t,n=this.offset+this.byteOffset;if(n+=4,e-=4,this._inflator.push(new Uint8Array(this.buffer,n,e)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case wo.GREYSCALE:case wo.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let e=0;e<t/2;e++)this._transparency[e]=this.readUint16();break}case wo.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let e=0;for(;e<t;e++){const n=this.readByte();this._palette[e].push(n)}for(;e<this._palette.length;e++)this._palette[e].push(255);break}case wo.UNKNOWN:case wo.GREYSCALE_ALPHA:case wo.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const e=oC(this),n=this.readUint8();if(n!==zv.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const i=this.readBytes(t-e.length-2);this._png.iccEmbeddedProfile={name:e,profile:oj(i)}}decodepHYs(){const t=this.readUint32(),e=this.readUint32(),n=this.readByte();this._png.resolution={x:t,y:e,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const e={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(t);if(n){if(n.data=PE({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)e.data=n.data;else{const i=this._apng.frames.at(t-1);this.disposeFrame(n,i,e),this.addFrameDataToCanvas(e,n)}this._apng.frames.push(e)}}return this._apng}disposeFrame(t,e,n){switch(t.disposeOp){case qm.NONE:break;case qm.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let s=0;s<this._png.width;s++){const l=(i*t.width+s)*this._png.channels;for(let o=0;o<this._png.channels;o++)n.data[l+o]=0}break;case qm.PREVIOUS:n.data.set(e.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,e){const n=1<<this._png.depth,i=(s,l)=>{const o=((s+e.yOffset)*this._png.width+e.xOffset+l)*this._png.channels,c=(s*e.width+l)*this._png.channels;return{index:o,frameIndex:c}};switch(e.blendOp){case Hv.SOURCE:for(let s=0;s<e.height;s++)for(let l=0;l<e.width;l++){const{index:o,frameIndex:c}=i(s,l);for(let h=0;h<this._png.channels;h++)t.data[o+h]=e.data[c+h]}break;case Hv.OVER:for(let s=0;s<e.height;s++)for(let l=0;l<e.width;l++){const{index:o,frameIndex:c}=i(s,l);for(let h=0;h<this._png.channels;h++){const f=e.data[c+this._png.channels-1]/n,p=h%(this._png.channels-1)===0?1:e.data[c+h],y=Math.floor(f*p+(1-f)*t.data[o+h]);t.data[o+h]+=y}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==FE.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===qv.NO_INTERLACE)this._png.data=PE({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===qv.ADAM7)this._png.data=mj({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,e=this._frames.at(-1);e?e.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:qm.NONE,blendOp:Hv.SOURCE,data:t}),this._inflator=new LE,this._writingDataChunks=!1}}function Lj(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var BE;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(BE||(BE={}));function Oj(r,t){return new Rj(r,t).decode()}var En=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Gv(){En.console&&typeof En.console.log=="function"&&En.console.log.apply(En.console,arguments)}var $r={log:Gv,warn:function(r){En.console&&(typeof En.console.warn=="function"?En.console.warn.apply(En.console,arguments):Gv.call(null,arguments))},error:function(r){En.console&&(typeof En.console.error=="function"?En.console.error.apply(En.console,arguments):Gv(r))}};function Vv(r,t,e){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){Kc(n.response,t,e)},n.onerror=function(){$r.error("could not download file")},n.send()}function IE(r){var t=new XMLHttpRequest;t.open("HEAD",r,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Hm(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(t)}}var Kc=En.saveAs||((typeof window>"u"?"undefined":Lr(window))!=="object"||window!==En?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,t,e){var n=En.URL||En.webkitURL,i=document.createElement("a");t=t||r.name||"download",i.download=t,i.rel="noopener",typeof r=="string"?(i.href=r,i.origin!==location.origin?IE(i.href)?Vv(r,t,e):Hm(i,i.target="_blank"):Hm(i)):(i.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){Hm(i)},0))}:"msSaveOrOpenBlob"in navigator?function(r,t,e){if(t=t||r.name||"download",typeof r=="string")if(IE(r))Vv(r,t,e);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){Hm(n)})}else navigator.msSaveOrOpenBlob((function(i,s){return s===void 0?s={autoBom:!1}:Lr(s)!=="object"&&($r.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(r,e),t)}:function(r,t,e,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return Vv(r,t,e);var i=r.type==="application/octet-stream",s=/constructor/i.test(En.HTMLElement)||En.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||i&&s)&&(typeof FileReader>"u"?"undefined":Lr(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var f=o.result;f=l?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=f:location=f,n=null},o.readAsDataURL(r)}else{var c=En.URL||En.webkitURL,h=c.createObjectURL(r);n?n.location=h:location.href=h,n=null,setTimeout(function(){c.revokeObjectURL(h)},4e4)}});function lC(r){var t;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<e.length;n++){var i=e[n].re,s=e[n].process,l=i.exec(r);l&&(t=s(l),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),h=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),h.length==1&&(h="0"+h),"#"+o+c+h}}var rg=En.atob.bind(En),jE=En.btoa.bind(En);function Wv(r,t){var e=r[0],n=r[1],i=r[2],s=r[3];e=oa(e,n,i,s,t[0],7,-680876936),s=oa(s,e,n,i,t[1],12,-389564586),i=oa(i,s,e,n,t[2],17,606105819),n=oa(n,i,s,e,t[3],22,-1044525330),e=oa(e,n,i,s,t[4],7,-176418897),s=oa(s,e,n,i,t[5],12,1200080426),i=oa(i,s,e,n,t[6],17,-1473231341),n=oa(n,i,s,e,t[7],22,-45705983),e=oa(e,n,i,s,t[8],7,1770035416),s=oa(s,e,n,i,t[9],12,-1958414417),i=oa(i,s,e,n,t[10],17,-42063),n=oa(n,i,s,e,t[11],22,-1990404162),e=oa(e,n,i,s,t[12],7,1804603682),s=oa(s,e,n,i,t[13],12,-40341101),i=oa(i,s,e,n,t[14],17,-1502002290),e=la(e,n=oa(n,i,s,e,t[15],22,1236535329),i,s,t[1],5,-165796510),s=la(s,e,n,i,t[6],9,-1069501632),i=la(i,s,e,n,t[11],14,643717713),n=la(n,i,s,e,t[0],20,-373897302),e=la(e,n,i,s,t[5],5,-701558691),s=la(s,e,n,i,t[10],9,38016083),i=la(i,s,e,n,t[15],14,-660478335),n=la(n,i,s,e,t[4],20,-405537848),e=la(e,n,i,s,t[9],5,568446438),s=la(s,e,n,i,t[14],9,-1019803690),i=la(i,s,e,n,t[3],14,-187363961),n=la(n,i,s,e,t[8],20,1163531501),e=la(e,n,i,s,t[13],5,-1444681467),s=la(s,e,n,i,t[2],9,-51403784),i=la(i,s,e,n,t[7],14,1735328473),e=ua(e,n=la(n,i,s,e,t[12],20,-1926607734),i,s,t[5],4,-378558),s=ua(s,e,n,i,t[8],11,-2022574463),i=ua(i,s,e,n,t[11],16,1839030562),n=ua(n,i,s,e,t[14],23,-35309556),e=ua(e,n,i,s,t[1],4,-1530992060),s=ua(s,e,n,i,t[4],11,1272893353),i=ua(i,s,e,n,t[7],16,-155497632),n=ua(n,i,s,e,t[10],23,-1094730640),e=ua(e,n,i,s,t[13],4,681279174),s=ua(s,e,n,i,t[0],11,-358537222),i=ua(i,s,e,n,t[3],16,-722521979),n=ua(n,i,s,e,t[6],23,76029189),e=ua(e,n,i,s,t[9],4,-640364487),s=ua(s,e,n,i,t[12],11,-421815835),i=ua(i,s,e,n,t[15],16,530742520),e=ca(e,n=ua(n,i,s,e,t[2],23,-995338651),i,s,t[0],6,-198630844),s=ca(s,e,n,i,t[7],10,1126891415),i=ca(i,s,e,n,t[14],15,-1416354905),n=ca(n,i,s,e,t[5],21,-57434055),e=ca(e,n,i,s,t[12],6,1700485571),s=ca(s,e,n,i,t[3],10,-1894986606),i=ca(i,s,e,n,t[10],15,-1051523),n=ca(n,i,s,e,t[1],21,-2054922799),e=ca(e,n,i,s,t[8],6,1873313359),s=ca(s,e,n,i,t[15],10,-30611744),i=ca(i,s,e,n,t[6],15,-1560198380),n=ca(n,i,s,e,t[13],21,1309151649),e=ca(e,n,i,s,t[4],6,-145523070),s=ca(s,e,n,i,t[11],10,-1120210379),i=ca(i,s,e,n,t[2],15,718787259),n=ca(n,i,s,e,t[9],21,-343485551),r[0]=Sc(e,r[0]),r[1]=Sc(n,r[1]),r[2]=Sc(i,r[2]),r[3]=Sc(s,r[3])}function a0(r,t,e,n,i,s){return t=Sc(Sc(t,r),Sc(n,s)),Sc(t<<i|t>>>32-i,e)}function oa(r,t,e,n,i,s,l){return a0(t&e|~t&n,r,t,i,s,l)}function la(r,t,e,n,i,s,l){return a0(t&n|e&~n,r,t,i,s,l)}function ua(r,t,e,n,i,s,l){return a0(t^e^n,r,t,i,s,l)}function ca(r,t,e,n,i,s,l){return a0(e^(t|~n),r,t,i,s,l)}function uC(r){var t,e=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=r.length;t+=64)Wv(n,Dj(r.substring(t-64,t)));r=r.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<r.length;t++)i[t>>2]|=r.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(Wv(n,i),t=0;t<16;t++)i[t]=0;return i[14]=8*e,Wv(n,i),n}function Dj(r){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=r.charCodeAt(t)+(r.charCodeAt(t+1)<<8)+(r.charCodeAt(t+2)<<16)+(r.charCodeAt(t+3)<<24);return e}var UE="0123456789abcdef".split("");function Pj(r){for(var t="",e=0;e<4;e++)t+=UE[r>>8*e+4&15]+UE[r>>8*e&15];return t}function Mj(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function Gb(r){return uC(r).map(Mj).join("")}var Fj=(function(r){for(var t=0;t<r.length;t++)r[t]=Pj(r[t]);return r.join("")})(uC("hello"))!="5d41402abc4b2a76b9719d911017c592";function Sc(r,t){if(Fj){var e=(65535&r)+(65535&t);return(r>>16)+(t>>16)+(e>>16)<<16|65535&e}return r+t&4294967295}function Vb(r,t){var e,n,i,s;if(r!==e){for(var l=(i=r,s=1+(256/r.length|0),new Array(s+1).join(i)),o=[],c=0;c<256;c++)o[c]=c;var h=0;for(c=0;c<256;c++){var f=o[c];h=(h+f+l.charCodeAt(c))%256,o[c]=o[h],o[h]=f}e=r,n=o}else o=n;var p=t.length,y=0,m=0,w="";for(c=0;c<p;c++)m=(m+(f=o[y=(y+1)%256]))%256,o[y]=o[m],o[m]=f,l=o[(o[y]+o[m])%256],w+=String.fromCharCode(t.charCodeAt(c)^l);return w}var zE={print:4,modify:8,copy:16,"annot-forms":32};function lf(r,t,e,n){this.v=1,this.r=2;var i=192;r.forEach(function(o){if(zE.perm!==void 0)throw new Error("Invalid permission: "+o);i+=zE[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),l=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,l),this.P=-(1+(255^i)),this.encryptionKey=Gb(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Vb(this.encryptionKey,this.padding)}function uf(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var t="",e=r.length,n=0;n<e;n++){var i=r.charCodeAt(n);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):r[n]}return t}function qE(r){if(Lr(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,i){if(i=i||!1,typeof e!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var s=Math.random().toString(35);return t[e][s]=[n,!!i],s},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var s in t[e]){var l=t[e][s];try{l[0].apply(r,n)}catch(o){En.console&&$r.error("jsPDF PubSub Error",o.message,o)}l[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Sg(r){if(!(this instanceof Sg))return new Sg(r);var t="opacity,stroke-opacity".split(",");for(var e in r)r.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=r[e]);this.id="",this.objectNumber=-1}function cC(r,t){this.gState=r,this.matrix=t,this.id="",this.objectNumber=-1}function $c(r,t,e,n,i){if(!(this instanceof $c))return new $c(r,t,e,n,i);this.type=r==="axial"?2:3,this.coords=t,this.colors=e,cC.call(this,n,i)}function pf(r,t,e,n,i){if(!(this instanceof pf))return new pf(r,t,e,n,i);this.boundingBox=r,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,cC.call(this,n,i)}function cn(r){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],s=arguments[3],l=[],o=1,c=16,h="S",f=null;Lr(r=r||{})==="object"&&(e=r.orientation,n=r.unit||n,i=r.format||i,s=r.compress||r.compressPdf||s,(f=r.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),o=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(t=r.precision),r.floatPrecision!==void 0&&(c=r.floatPrecision),h=r.defaultPathOperation||"S"),l=r.filters||(s===!0?["FlateEncode"]:l),n=n||"mm",e=(""+(e||"P")).toLowerCase();var p=r.putOnlyUsedFonts||!1,y={},m={internal:{},__private__:{}};m.__private__.PubSub=qE;var w="1.3",b=m.__private__.getPdfVersion=function(){return w};m.__private__.setPdfVersion=function(U){w=U};var _={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return _};var v=m.__private__.getPageFormat=function(U){return _[U]};i=i||"a4";var A="compat",C="advanced",S=A;function O(){this.saveGraphicsState(),tt(new nn(ln,0,0,-ln,0,na()*ln).toString()+" cm"),this.setFontSize(this.getFontSize()/ln),h="n",S=C}function q(){this.restoreGraphicsState(),h="S",S=A}var H=m.__private__.combineFontStyleAndFontWeight=function(U,gt){if(U=="bold"&&gt=="normal"||U=="bold"&&gt==400||U=="normal"&&gt=="italic"||U=="bold"&&gt=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return gt&&(U=gt==400||gt==="normal"?U==="italic"?"italic":"normal":gt!=700&&gt!=="bold"||U!=="normal"?(gt==700?"bold":gt)+""+U:"bold"),U};m.advancedAPI=function(U){var gt=S===A;return gt&&O.call(this),typeof U!="function"||(U(this),gt&&q.call(this)),this},m.compatAPI=function(U){var gt=S===C;return gt&&q.call(this),typeof U!="function"||(U(this),gt&&O.call(this)),this},m.isAdvancedAPI=function(){return S===C};var Q,I=function(U){if(S!==C)throw new Error(U+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},dt=m.roundToPrecision=m.__private__.roundToPrecision=function(U,gt){var Ot=t||gt;if(isNaN(U)||isNaN(Ot))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return U.toFixed(Ot).replace(/0+$/,"")};Q=m.hpf=m.__private__.hpf=typeof c=="number"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return dt(U,c)}:c==="smart"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return dt(U,U>-1&&U<1?16:5)}:function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return dt(U,16)};var nt=m.f2=m.__private__.f2=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f2");return dt(U,2)},B=m.__private__.f3=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f3");return dt(U,3)},Z=m.scale=m.__private__.scale=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.scale");return S===A?U*ln:S===C?U:void 0},D=function(U){return Z((function(gt){return S===A?na()-gt:S===C?gt:void 0})(U))};m.__private__.setPrecision=m.setPrecision=function(U){typeof parseInt(U,10)=="number"&&(t=parseInt(U,10))};var mt,it="00000000000000000000000000000000",st=m.__private__.getFileId=function(){return it},vt=m.__private__.setFileId=function(U){return it=U!==void 0&&/^[a-fA-F0-9]{32}$/.test(U)?U.toUpperCase():it.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(Gr=new lf(f.userPermissions,f.userPassword,f.ownerPassword,it)),it};m.setFileId=function(U){return vt(U),this},m.getFileId=function(){return st()};var wt=m.__private__.convertDateToPDFDate=function(U){var gt=U.getTimezoneOffset(),Ot=gt<0?"+":"-",qt=Math.floor(Math.abs(gt/60)),Qt=Math.abs(gt%60),ge=[Ot,rt(qt),"'",rt(Qt),"'"].join("");return["D:",U.getFullYear(),rt(U.getMonth()+1),rt(U.getDate()),rt(U.getHours()),rt(U.getMinutes()),rt(U.getSeconds()),ge].join("")},Ft=m.__private__.convertPDFDateToDate=function(U){var gt=parseInt(U.substr(2,4),10),Ot=parseInt(U.substr(6,2),10)-1,qt=parseInt(U.substr(8,2),10),Qt=parseInt(U.substr(10,2),10),ge=parseInt(U.substr(12,2),10),Se=parseInt(U.substr(14,2),10);return new Date(gt,Ot,qt,Qt,ge,Se,0)},$=m.__private__.setCreationDate=function(U){var gt;if(U===void 0&&(U=new Date),U instanceof Date)gt=wt(U);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(U))throw new Error("Invalid argument passed to jsPDF.setCreationDate");gt=U}return mt=gt},R=m.__private__.getCreationDate=function(U){var gt=mt;return U==="jsDate"&&(gt=Ft(mt)),gt};m.setCreationDate=function(U){return $(U),this},m.getCreationDate=function(U){return R(U)};var K,rt=m.__private__.padd2=function(U){return("0"+parseInt(U)).slice(-2)},pt=m.__private__.padd2Hex=function(U){return("00"+(U=U.toString())).substr(U.length)},ct=0,F=[],j=[],ht=0,ot=[],lt=[],ft=!1,Mt=j;m.__private__.setCustomOutputDestination=function(U){ft=!0,Mt=U};var W=function(U){ft||(Mt=U)};m.__private__.resetCustomOutputDestination=function(){ft=!1,Mt=j};var tt=m.__private__.out=function(U){return U=U.toString(),ht+=U.length+1,Mt.push(U),Mt},X=m.__private__.write=function(U){return tt(arguments.length===1?U.toString():Array.prototype.join.call(arguments," "))},P=m.__private__.getArrayBuffer=function(U){for(var gt=U.length,Ot=new ArrayBuffer(gt),qt=new Uint8Array(Ot);gt--;)qt[gt]=U.charCodeAt(gt);return Ot},k=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return k};var z=r.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(U){return z=S===C?U/ln:U,this};var _t,kt=m.__private__.getFontSize=m.getFontSize=function(){return S===A?z:z*ln},Ct=r.R2L||!1;m.__private__.setR2L=m.setR2L=function(U){return Ct=U,this},m.__private__.getR2L=m.getR2L=function(){return Ct};var $t,le=m.__private__.setZoomMode=function(U){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(U))_t=U;else if(isNaN(U)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(U)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+U+'" is not recognized.');_t=U}else _t=parseInt(U,10)};m.__private__.getZoomMode=function(){return _t};var re,fe=m.__private__.setPageMode=function(U){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(U)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+U+'" is not recognized.');$t=U};m.__private__.getPageMode=function(){return $t};var Ce=m.__private__.setLayoutMode=function(U){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(U)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+U+'" is not recognized.');re=U};m.__private__.getLayoutMode=function(){return re},m.__private__.setDisplayMode=m.setDisplayMode=function(U,gt,Ot){return le(U),Ce(gt),fe(Ot),this};var De={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(U){if(Object.keys(De).indexOf(U)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return De[U]},m.__private__.getDocumentProperties=function(){return De},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(U){for(var gt in De)De.hasOwnProperty(gt)&&U[gt]&&(De[gt]=U[gt]);return this},m.__private__.setDocumentProperty=function(U,gt){if(Object.keys(De).indexOf(U)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return De[U]=gt};var Fe,ln,Ue,Xn,Xe,rn={},sn={},Ee=[],Je={},Gn={},un={},ve={},Jn=null,gn=0,Ke=[],Vn=new qE(m),Ms=r.hotfixes||[],$i={},La={},Fi=[],nn=function U(gt,Ot,qt,Qt,ge,Se){if(!(this instanceof U))return new U(gt,Ot,qt,Qt,ge,Se);isNaN(gt)&&(gt=1),isNaN(Ot)&&(Ot=0),isNaN(qt)&&(qt=0),isNaN(Qt)&&(Qt=1),isNaN(ge)&&(ge=0),isNaN(Se)&&(Se=0),this._matrix=[gt,Ot,qt,Qt,ge,Se]};Object.defineProperty(nn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(nn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(nn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(nn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(nn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(nn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(nn.prototype,"a",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(nn.prototype,"b",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(nn.prototype,"c",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(nn.prototype,"d",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(nn.prototype,"e",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(nn.prototype,"f",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(nn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(nn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(nn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(nn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),nn.prototype.join=function(U){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Q).join(U)},nn.prototype.multiply=function(U){var gt=U.sx*this.sx+U.shy*this.shx,Ot=U.sx*this.shy+U.shy*this.sy,qt=U.shx*this.sx+U.sy*this.shx,Qt=U.shx*this.shy+U.sy*this.sy,ge=U.tx*this.sx+U.ty*this.shx+this.tx,Se=U.tx*this.shy+U.ty*this.sy+this.ty;return new nn(gt,Ot,qt,Qt,ge,Se)},nn.prototype.decompose=function(){var U=this.sx,gt=this.shy,Ot=this.shx,qt=this.sy,Qt=this.tx,ge=this.ty,Se=Math.sqrt(U*U+gt*gt),je=(U/=Se)*Ot+(gt/=Se)*qt;Ot-=U*je,qt-=gt*je;var $e=Math.sqrt(Ot*Ot+qt*qt);return je/=$e,U*(qt/=$e)<gt*(Ot/=$e)&&(U=-U,gt=-gt,je=-je,Se=-Se),{scale:new nn(Se,0,0,$e,0,0),translate:new nn(1,0,0,1,Qt,ge),rotate:new nn(U,gt,-gt,U,0,0),skew:new nn(1,0,je,1,0,0)}},nn.prototype.toString=function(U){return this.join(" ")},nn.prototype.inversed=function(){var U=this.sx,gt=this.shy,Ot=this.shx,qt=this.sy,Qt=this.tx,ge=this.ty,Se=1/(U*qt-gt*Ot),je=qt*Se,$e=-gt*Se,hn=-Ot*Se,_n=U*Se;return new nn(je,$e,hn,_n,-je*Qt-hn*ge,-$e*Qt-_n*ge)},nn.prototype.applyToPoint=function(U){var gt=U.x*this.sx+U.y*this.shx+this.tx,Ot=U.x*this.shy+U.y*this.sy+this.ty;return new ta(gt,Ot)},nn.prototype.applyToRectangle=function(U){var gt=this.applyToPoint(U),Ot=this.applyToPoint(new ta(U.x+U.w,U.y+U.h));return new ea(gt.x,gt.y,Ot.x-gt.x,Ot.y-gt.y)},nn.prototype.clone=function(){var U=this.sx,gt=this.shy,Ot=this.shx,qt=this.sy,Qt=this.tx,ge=this.ty;return new nn(U,gt,Ot,qt,Qt,ge)},m.Matrix=nn;var fa=m.matrixMult=function(U,gt){return gt.multiply(U)},Fs=new nn(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Fs;var Bn=function(U,gt){if(!Gn[U]){var Ot=(gt instanceof $c?"Sh":"P")+(Object.keys(Je).length+1).toString(10);gt.id=Ot,Gn[U]=Ot,Je[Ot]=gt,Vn.publish("addPattern",gt)}};m.ShadingPattern=$c,m.TilingPattern=pf,m.addShadingPattern=function(U,gt){return I("addShadingPattern()"),Bn(U,gt),this},m.beginTilingPattern=function(U){I("beginTilingPattern()"),lo(U.boundingBox[0],U.boundingBox[1],U.boundingBox[2]-U.boundingBox[0],U.boundingBox[3]-U.boundingBox[1],U.matrix)},m.endTilingPattern=function(U,gt){I("endTilingPattern()"),gt.stream=lt[K].join(`
`),Bn(U,gt),Vn.publish("endTilingPattern",gt),Fi.pop().restore()};var sr,Or=m.__private__.newObject=function(){var U=qr();return Jr(U,!0),U},qr=m.__private__.newObjectDeferred=function(){return ct++,F[ct]=function(){return ht},ct},Jr=function(U,gt){return gt=typeof gt=="boolean"&&gt,F[U]=ht,gt&&tt(U+" 0 obj"),U},da=m.__private__.newAdditionalObject=function(){var U={objId:qr(),content:""};return ot.push(U),U},as=qr(),Wn=qr(),dr=m.__private__.decodeColorString=function(U){var gt=U.split(" ");if(gt.length!==2||gt[1]!=="g"&&gt[1]!=="G")gt.length!==5||gt[4]!=="k"&&gt[4]!=="K"||(gt=[(1-gt[0])*(1-gt[3]),(1-gt[1])*(1-gt[3]),(1-gt[2])*(1-gt[3]),"r"]);else{var Ot=parseFloat(gt[0]);gt=[Ot,Ot,Ot,"r"]}for(var qt="#",Qt=0;Qt<3;Qt++)qt+=("0"+Math.floor(255*parseFloat(gt[Qt])).toString(16)).slice(-2);return qt},Hr=m.__private__.encodeColorString=function(U){var gt;typeof U=="string"&&(U={ch1:U});var Ot=U.ch1,qt=U.ch2,Qt=U.ch3,ge=U.ch4,Se=U.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ot=="string"&&Ot.charAt(0)!=="#"){var je=new lC(Ot);if(je.ok)Ot=je.toHex();else if(!/^\d*\.?\d*$/.test(Ot))throw new Error('Invalid color "'+Ot+'" passed to jsPDF.encodeColorString.')}if(typeof Ot=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ot)&&(Ot="#"+Ot[1]+Ot[1]+Ot[2]+Ot[2]+Ot[3]+Ot[3]),typeof Ot=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ot)){var $e=parseInt(Ot.substr(1),16);Ot=$e>>16&255,qt=$e>>8&255,Qt=255&$e}if(qt===void 0||ge===void 0&&Ot===qt&&qt===Qt)gt=typeof Ot=="string"?Ot+" "+Se[0]:U.precision===2?nt(Ot/255)+" "+Se[0]:B(Ot/255)+" "+Se[0];else if(ge===void 0||Lr(ge)==="object"){if(ge&&!isNaN(ge.a)&&ge.a===0)return["1.","1.","1.",Se[1]].join(" ");gt=typeof Ot=="string"?[Ot,qt,Qt,Se[1]].join(" "):U.precision===2?[nt(Ot/255),nt(qt/255),nt(Qt/255),Se[1]].join(" "):[B(Ot/255),B(qt/255),B(Qt/255),Se[1]].join(" ")}else gt=typeof Ot=="string"?[Ot,qt,Qt,ge,Se[2]].join(" "):U.precision===2?[nt(Ot),nt(qt),nt(Qt),nt(ge),Se[2]].join(" "):[B(Ot),B(qt),B(Qt),B(ge),Se[2]].join(" ");return gt},Xi=m.__private__.getFilters=function(){return l},Xs=m.__private__.putStream=function(U){var gt=(U=U||{}).data||"",Ot=U.filters||Xi(),qt=U.alreadyAppliedFilters||[],Qt=U.addLength1||!1,ge=gt.length,Se=U.objectId,je=function(ti){return ti};if(f!==null&&Se===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(je=Gr.encryptor(Se,0));var $e={};Ot===!0&&(Ot=["FlateEncode"]);var hn=U.additionalKeyValues||[],_n=($e=cn.API.processDataByFilters!==void 0?cn.API.processDataByFilters(gt,Ot):{data:gt,reverseChain:[]}).reverseChain+(Array.isArray(qt)?qt.join(" "):qt.toString());if($e.data.length!==0&&(hn.push({key:"Length",value:$e.data.length}),Qt===!0&&hn.push({key:"Length1",value:ge})),_n.length!=0)if(_n.split("/").length-1==1)hn.push({key:"Filter",value:_n});else{hn.push({key:"Filter",value:"["+_n+"]"});for(var In=0;In<hn.length;In+=1)if(hn[In].key==="DecodeParms"){for(var Mr=[],Qr=0;Qr<$e.reverseChain.split("/").length-1;Qr+=1)Mr.push("null");Mr.push(hn[In].value),hn[In].value="["+Mr.join(" ")+"]"}}tt("<<");for(var hr=0;hr<hn.length;hr++)tt("/"+hn[hr].key+" "+hn[hr].value);tt(">>"),$e.data.length!==0&&(tt("stream"),tt(je($e.data)),tt("endstream"))},xs=m.__private__.putPage=function(U){var gt=U.number,Ot=U.data,qt=U.objId,Qt=U.contentsObjId;Jr(qt,!0),tt("<</Type /Page"),tt("/Parent "+U.rootDictionaryObjId+" 0 R"),tt("/Resources "+U.resourceDictionaryObjId+" 0 R"),tt("/MediaBox ["+parseFloat(Q(U.mediaBox.bottomLeftX))+" "+parseFloat(Q(U.mediaBox.bottomLeftY))+" "+Q(U.mediaBox.topRightX)+" "+Q(U.mediaBox.topRightY)+"]"),U.cropBox!==null&&tt("/CropBox ["+Q(U.cropBox.bottomLeftX)+" "+Q(U.cropBox.bottomLeftY)+" "+Q(U.cropBox.topRightX)+" "+Q(U.cropBox.topRightY)+"]"),U.bleedBox!==null&&tt("/BleedBox ["+Q(U.bleedBox.bottomLeftX)+" "+Q(U.bleedBox.bottomLeftY)+" "+Q(U.bleedBox.topRightX)+" "+Q(U.bleedBox.topRightY)+"]"),U.trimBox!==null&&tt("/TrimBox ["+Q(U.trimBox.bottomLeftX)+" "+Q(U.trimBox.bottomLeftY)+" "+Q(U.trimBox.topRightX)+" "+Q(U.trimBox.topRightY)+"]"),U.artBox!==null&&tt("/ArtBox ["+Q(U.artBox.bottomLeftX)+" "+Q(U.artBox.bottomLeftY)+" "+Q(U.artBox.topRightX)+" "+Q(U.artBox.topRightY)+"]"),typeof U.userUnit=="number"&&U.userUnit!==1&&tt("/UserUnit "+U.userUnit),Vn.publish("putPage",{objId:qt,pageContext:Ke[gt],pageNumber:gt,page:Ot}),tt("/Contents "+Qt+" 0 R"),tt(">>"),tt("endobj");var ge=Ot.join(`
`);return S===C&&(ge+=`
Q`),Jr(Qt,!0),Xs({data:ge,filters:Xi(),objectId:Qt}),tt("endobj"),qt},Ys=m.__private__.putPages=function(){var U,gt,Ot=[];for(U=1;U<=gn;U++)Ke[U].objId=qr(),Ke[U].contentsObjId=qr();for(U=1;U<=gn;U++)Ot.push(xs({number:U,data:lt[U],objId:Ke[U].objId,contentsObjId:Ke[U].contentsObjId,mediaBox:Ke[U].mediaBox,cropBox:Ke[U].cropBox,bleedBox:Ke[U].bleedBox,trimBox:Ke[U].trimBox,artBox:Ke[U].artBox,userUnit:Ke[U].userUnit,rootDictionaryObjId:as,resourceDictionaryObjId:Wn}));Jr(as,!0),tt("<</Type /Pages");var qt="/Kids [";for(gt=0;gt<gn;gt++)qt+=Ot[gt]+" 0 R ";tt(qt+"]"),tt("/Count "+gn),tt(">>"),tt("endobj"),Vn.publish("postPutPages")},Bi=function(U){Vn.publish("putFont",{font:U,out:tt,newObject:Or,putStream:Xs}),U.isAlreadyPutted!==!0&&(U.objectNumber=Or(),tt("<<"),tt("/Type /Font"),tt("/BaseFont /"+uf(U.postScriptName)),tt("/Subtype /Type1"),typeof U.encoding=="string"&&tt("/Encoding /"+U.encoding),tt("/FirstChar 32"),tt("/LastChar 255"),tt(">>"),tt("endobj"))},no=function(U){U.objectNumber=Or();var gt=[];gt.push({key:"Type",value:"/XObject"}),gt.push({key:"Subtype",value:"/Form"}),gt.push({key:"BBox",value:"["+[Q(U.x),Q(U.y),Q(U.x+U.width),Q(U.y+U.height)].join(" ")+"]"}),gt.push({key:"Matrix",value:"["+U.matrix.toString()+"]"});var Ot=U.pages[1].join(`
`);Xs({data:Ot,additionalKeyValues:gt,objectId:U.objectNumber}),tt("endobj")},Bs=function(U,gt){gt||(gt=21);var Ot=Or(),qt=(function(Se,je){var $e,hn=[],_n=1/(je-1);for($e=0;$e<1;$e+=_n)hn.push($e);if(hn.push(1),Se[0].offset!=0){var In={offset:0,color:Se[0].color};Se.unshift(In)}if(Se[Se.length-1].offset!=1){var Mr={offset:1,color:Se[Se.length-1].color};Se.push(Mr)}for(var Qr="",hr=0,ti=0;ti<hn.length;ti++){for($e=hn[ti];$e>Se[hr+1].offset;)hr++;var Tr=Se[hr].offset,yi=($e-Tr)/(Se[hr+1].offset-Tr),ba=Se[hr].color,Ss=Se[hr+1].color;Qr+=pt(Math.round((1-yi)*ba[0]+yi*Ss[0]).toString(16))+pt(Math.round((1-yi)*ba[1]+yi*Ss[1]).toString(16))+pt(Math.round((1-yi)*ba[2]+yi*Ss[2]).toString(16))}return Qr.trim()})(U.colors,gt),Qt=[];Qt.push({key:"FunctionType",value:"0"}),Qt.push({key:"Domain",value:"[0.0 1.0]"}),Qt.push({key:"Size",value:"["+gt+"]"}),Qt.push({key:"BitsPerSample",value:"8"}),Qt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Qt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Xs({data:qt,additionalKeyValues:Qt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ot}),tt("endobj"),U.objectNumber=Or(),tt("<< /ShadingType "+U.type),tt("/ColorSpace /DeviceRGB");var ge="/Coords ["+Q(parseFloat(U.coords[0]))+" "+Q(parseFloat(U.coords[1]))+" ";U.type===2?ge+=Q(parseFloat(U.coords[2]))+" "+Q(parseFloat(U.coords[3])):ge+=Q(parseFloat(U.coords[2]))+" "+Q(parseFloat(U.coords[3]))+" "+Q(parseFloat(U.coords[4]))+" "+Q(parseFloat(U.coords[5])),tt(ge+="]"),U.matrix&&tt("/Matrix ["+U.matrix.toString()+"]"),tt("/Function "+Ot+" 0 R"),tt("/Extend [true true]"),tt(">>"),tt("endobj")},nr=function(U,gt){var Ot=qr(),qt=Or();gt.push({resourcesOid:Ot,objectOid:qt}),U.objectNumber=qt;var Qt=[];Qt.push({key:"Type",value:"/Pattern"}),Qt.push({key:"PatternType",value:"1"}),Qt.push({key:"PaintType",value:"1"}),Qt.push({key:"TilingType",value:"1"}),Qt.push({key:"BBox",value:"["+U.boundingBox.map(Q).join(" ")+"]"}),Qt.push({key:"XStep",value:Q(U.xStep)}),Qt.push({key:"YStep",value:Q(U.yStep)}),Qt.push({key:"Resources",value:Ot+" 0 R"}),U.matrix&&Qt.push({key:"Matrix",value:"["+U.matrix.toString()+"]"}),Xs({data:U.stream,additionalKeyValues:Qt,objectId:U.objectNumber}),tt("endobj")},Is=function(U){for(var gt in U.objectNumber=Or(),tt("<<"),U)switch(gt){case"opacity":tt("/ca "+nt(U[gt]));break;case"stroke-opacity":tt("/CA "+nt(U[gt]))}tt(">>"),tt("endobj")},Ai=function(U){Jr(U.resourcesOid,!0),tt("<<"),tt("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var gt in tt("/Font <<"),rn)rn.hasOwnProperty(gt)&&(p===!1||p===!0&&y.hasOwnProperty(gt))&&tt("/"+gt+" "+rn[gt].objectNumber+" 0 R");tt(">>")})(),(function(){if(Object.keys(Je).length>0){for(var gt in tt("/Shading <<"),Je)Je.hasOwnProperty(gt)&&Je[gt]instanceof $c&&Je[gt].objectNumber>=0&&tt("/"+gt+" "+Je[gt].objectNumber+" 0 R");Vn.publish("putShadingPatternDict"),tt(">>")}})(),(function(gt){if(Object.keys(Je).length>0){for(var Ot in tt("/Pattern <<"),Je)Je.hasOwnProperty(Ot)&&Je[Ot]instanceof m.TilingPattern&&Je[Ot].objectNumber>=0&&Je[Ot].objectNumber<gt&&tt("/"+Ot+" "+Je[Ot].objectNumber+" 0 R");Vn.publish("putTilingPatternDict"),tt(">>")}})(U.objectOid),(function(){if(Object.keys(un).length>0){var gt;for(gt in tt("/ExtGState <<"),un)un.hasOwnProperty(gt)&&un[gt].objectNumber>=0&&tt("/"+gt+" "+un[gt].objectNumber+" 0 R");Vn.publish("putGStateDict"),tt(">>")}})(),(function(){for(var gt in tt("/XObject <<"),$i)$i.hasOwnProperty(gt)&&$i[gt].objectNumber>=0&&tt("/"+gt+" "+$i[gt].objectNumber+" 0 R");Vn.publish("putXobjectDict"),tt(">>")})(),tt(">>"),tt("endobj")},Xr=function(U){sn[U.fontName]=sn[U.fontName]||{},sn[U.fontName][U.fontStyle]=U.id},Oa=function(U,gt,Ot,qt,Qt){var ge={id:"F"+(Object.keys(rn).length+1).toString(10),postScriptName:U,fontName:gt,fontStyle:Ot,encoding:qt,isStandardFont:Qt||!1,metadata:{}};return Vn.publish("addFont",{font:ge,instance:this}),rn[ge.id]=ge,Xr(ge),ge.id},Yi=m.__private__.pdfEscape=m.pdfEscape=function(U,gt){return(function(Ot,qt){var Qt,ge,Se,je,$e,hn,_n,In,Mr;if(Se=(qt=qt||{}).sourceEncoding||"Unicode",$e=qt.outputEncoding,(qt.autoencode||$e)&&rn[Fe].metadata&&rn[Fe].metadata[Se]&&rn[Fe].metadata[Se].encoding&&(je=rn[Fe].metadata[Se].encoding,!$e&&rn[Fe].encoding&&($e=rn[Fe].encoding),!$e&&je.codePages&&($e=je.codePages[0]),typeof $e=="string"&&($e=je[$e]),$e)){for(_n=!1,hn=[],Qt=0,ge=Ot.length;Qt<ge;Qt++)(In=$e[Ot.charCodeAt(Qt)])?hn.push(String.fromCharCode(In)):hn.push(Ot[Qt]),hn[Qt].charCodeAt(0)>>8&&(_n=!0);Ot=hn.join("")}for(Qt=Ot.length;_n===void 0&&Qt!==0;)Ot.charCodeAt(Qt-1)>>8&&(_n=!0),Qt--;if(!_n)return Ot;for(hn=qt.noBOM?[]:[254,255],Qt=0,ge=Ot.length;Qt<ge;Qt++){if((Mr=(In=Ot.charCodeAt(Qt))>>8)>>8)throw new Error("Character at position "+Qt+" of string '"+Ot+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");hn.push(Mr),hn.push(In-(Mr<<8))}return String.fromCharCode.apply(void 0,hn)})(U,gt).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},js=m.__private__.beginPage=function(U){lt[++gn]=[],Ke[gn]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(U[0]),topRightY:Number(U[1])}},_l(gn),W(lt[K])},pa=function(U,gt){var Ot,qt,Qt;switch(e=gt||e,typeof U=="string"&&(Ot=v(U.toLowerCase()),Array.isArray(Ot)&&(qt=Ot[0],Qt=Ot[1])),Array.isArray(U)&&(qt=U[0]*ln,Qt=U[1]*ln),isNaN(qt)&&(qt=i[0],Qt=i[1]),(qt>14400||Qt>14400)&&($r.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),qt=Math.min(14400,qt),Qt=Math.min(14400,Qt)),i=[qt,Qt],e.substr(0,1)){case"l":Qt>qt&&(i=[Qt,qt]);break;case"p":qt>Qt&&(i=[Qt,qt])}js(i),He(No),tt(ls),Cl!==0&&tt(Cl+" J"),Yr!==0&&tt(Yr+" j"),Vn.publish("addPage",{pageNumber:gn})},ma=function(U){U>0&&U<=gn&&(lt.splice(U,1),Ke.splice(U,1),gn--,K>gn&&(K=gn),this.setPage(K))},_l=function(U){U>0&&U<=gn&&(K=U)},Co=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return lt.length-1},fu=function(U,gt,Ot){var qt,Qt=void 0;return Ot=Ot||{},U=U!==void 0?U:rn[Fe].fontName,gt=gt!==void 0?gt:rn[Fe].fontStyle,qt=U.toLowerCase(),sn[qt]!==void 0&&sn[qt][gt]!==void 0?Qt=sn[qt][gt]:sn[U]!==void 0&&sn[U][gt]!==void 0?Qt=sn[U][gt]:Ot.disableWarning===!1&&$r.warn("Unable to look up font label for font '"+U+"', '"+gt+"'. Refer to getFontList() for available fonts."),Qt||Ot.noFallback||(Qt=sn.times[gt])==null&&(Qt=sn.times.normal),Qt},vn=m.__private__.putInfo=function(){var U=Or(),gt=function(qt){return qt};for(var Ot in f!==null&&(gt=Gr.encryptor(U,0)),tt("<<"),tt("/Producer ("+Yi(gt("jsPDF "+cn.version))+")"),De)De.hasOwnProperty(Ot)&&De[Ot]&&tt("/"+Ot.substr(0,1).toUpperCase()+Ot.substr(1)+" ("+Yi(gt(De[Ot]))+")");tt("/CreationDate ("+Yi(gt(mt))+")"),tt(">>"),tt("endobj")},Da=m.__private__.putCatalog=function(U){var gt=(U=U||{}).rootDictionaryObjId||as;switch(Or(),tt("<<"),tt("/Type /Catalog"),tt("/Pages "+gt+" 0 R"),_t||(_t="fullwidth"),_t){case"fullwidth":tt("/OpenAction [3 0 R /FitH null]");break;case"fullheight":tt("/OpenAction [3 0 R /FitV null]");break;case"fullpage":tt("/OpenAction [3 0 R /Fit]");break;case"original":tt("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ot=""+_t;Ot.substr(Ot.length-1)==="%"&&(_t=parseInt(_t)/100),typeof _t=="number"&&tt("/OpenAction [3 0 R /XYZ null null "+nt(_t)+"]")}switch(re||(re="continuous"),re){case"continuous":tt("/PageLayout /OneColumn");break;case"single":tt("/PageLayout /SinglePage");break;case"two":case"twoleft":tt("/PageLayout /TwoColumnLeft");break;case"tworight":tt("/PageLayout /TwoColumnRight")}$t&&tt("/PageMode /"+$t),Vn.publish("putCatalog"),tt(">>"),tt("endobj")},Qs=m.__private__.putTrailer=function(){tt("trailer"),tt("<<"),tt("/Size "+(ct+1)),tt("/Root "+ct+" 0 R"),tt("/Info "+(ct-1)+" 0 R"),f!==null&&tt("/Encrypt "+Gr.oid+" 0 R"),tt("/ID [ <"+it+"> <"+it+"> ]"),tt(">>")},Kn=m.__private__.putHeader=function(){tt("%PDF-"+w),tt("%")},ro=m.__private__.putXRef=function(){var U="0000000000";tt("xref"),tt("0 "+(ct+1)),tt("0000000000 65535 f ");for(var gt=1;gt<=ct;gt++)typeof F[gt]=="function"?tt((U+F[gt]()).slice(-10)+" 00000 n "):F[gt]!==void 0?tt((U+F[gt]).slice(-10)+" 00000 n "):tt("0000000000 00000 n ")},ga=m.__private__.buildDocument=function(){var U;ct=0,ht=0,j=[],F=[],ot=[],as=qr(),Wn=qr(),W(j),Vn.publish("buildDocument"),Kn(),Ys(),(function(){Vn.publish("putAdditionalObjects");for(var Ot=0;Ot<ot.length;Ot++){var qt=ot[Ot];Jr(qt.objId,!0),tt(qt.content),tt("endobj")}Vn.publish("postPutAdditionalObjects")})(),U=[],(function(){for(var Ot in rn)rn.hasOwnProperty(Ot)&&(p===!1||p===!0&&y.hasOwnProperty(Ot))&&Bi(rn[Ot])})(),(function(){var Ot;for(Ot in un)un.hasOwnProperty(Ot)&&Is(un[Ot])})(),(function(){for(var Ot in $i)$i.hasOwnProperty(Ot)&&no($i[Ot])})(),(function(Ot){var qt;for(qt in Je)Je.hasOwnProperty(qt)&&(Je[qt]instanceof $c?Bs(Je[qt]):Je[qt]instanceof pf&&nr(Je[qt],Ot))})(U),Vn.publish("putResources"),U.forEach(Ai),Ai({resourcesOid:Wn,objectOid:Number.MAX_SAFE_INTEGER}),Vn.publish("postPutResources"),f!==null&&(Gr.oid=Or(),tt("<<"),tt("/Filter /Standard"),tt("/V "+Gr.v),tt("/R "+Gr.r),tt("/U <"+Gr.toHexString(Gr.U)+">"),tt("/O <"+Gr.toHexString(Gr.O)+">"),tt("/P "+Gr.P),tt(">>"),tt("endobj")),vn(),Da();var gt=ht;return ro(),Qs(),tt("startxref"),tt(""+gt),tt("%%EOF"),W(lt[K]),j.join(`
`)},io=m.__private__.getBlob=function(U){return new Blob([P(U)],{type:"application/pdf"})},Al=m.output=m.__private__.output=(sr=function(U,gt){switch(typeof(gt=gt||{})=="string"?gt={filename:gt}:gt.filename=gt.filename||"generated.pdf",U){case void 0:return ga();case"save":m.save(gt.filename);break;case"arraybuffer":return P(ga());case"blob":return io(ga());case"bloburi":case"bloburl":if(En.URL!==void 0&&typeof En.URL.createObjectURL=="function")return En.URL&&En.URL.createObjectURL(io(ga()))||void 0;$r.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ot="",qt=ga();try{Ot=jE(qt)}catch{Ot=jE(unescape(encodeURIComponent(qt)))}return"data:application/pdf;filename="+gt.filename+";base64,"+Ot;case"pdfobjectnewwindow":if(Object.prototype.toString.call(En)==="[object Window]"){var Qt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ge=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';gt.pdfObjectUrl&&(Qt=gt.pdfObjectUrl,ge="");var Se='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Qt+'"'+ge+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(gt)+");<\/script></body></html>",je=En.open();return je!==null&&je.document.write(Se),je}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(En)==="[object Window]"){var $e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(gt.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+gt.filename+'" width="500px" height="400px" /></body></html>',hn=En.open();if(hn!==null){hn.document.write($e);var _n=this;hn.document.documentElement.querySelector("#pdfViewer").onload=function(){hn.document.title=gt.filename,hn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(_n.output("bloburl"))}}return hn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(En)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var In='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",gt)+'"></iframe></body></html>',Mr=En.open();if(Mr!==null&&(Mr.document.write(In),Mr.document.title=gt.filename),Mr||typeof safari>"u")return Mr;break;case"datauri":case"dataurl":return En.document.location.href=this.output("datauristring",gt);default:return null}},sr.foo=function(){try{return sr.apply(this,arguments)}catch(Ot){var U=Ot.stack||"";~U.indexOf(" at ")&&(U=U.split(" at ")[1]);var gt="Error in function "+U.split(`
`)[0].split("<")[0]+": "+Ot.message;if(!En.console)throw new Error(gt);En.console.error(gt,Ot),En.alert&&alert(gt)}},sr.foo.bar=sr,sr.foo),kn=function(U){return Array.isArray(Ms)===!0&&Ms.indexOf(U)>-1};switch(n){case"pt":ln=1;break;case"mm":ln=72/25.4;break;case"cm":ln=72/2.54;break;case"in":ln=72;break;case"px":ln=kn("px_scaling")==1?.75:96/72;break;case"pc":case"em":ln=12;break;case"ex":ln=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);ln=n}var Gr=null;$(),vt();var Dr=m.__private__.getPageInfo=m.getPageInfo=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ke[U].objId,pageNumber:U,pageContext:Ke[U]}},ya=m.__private__.getPageInfoByObjId=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var gt in Ke)if(Ke[gt].objId===U)break;return Dr(gt)},Sl=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Ke[K].objId,pageNumber:K,pageContext:Ke[K]}};m.addPage=function(){return pa.apply(this,arguments),this},m.setPage=function(){return _l.apply(this,arguments),W.call(this,lt[K]),this},m.insertPage=function(U){return this.addPage(),this.movePage(K,U),this},m.movePage=function(U,gt){var Ot,qt;if(U>gt){Ot=lt[U],qt=Ke[U];for(var Qt=U;Qt>gt;Qt--)lt[Qt]=lt[Qt-1],Ke[Qt]=Ke[Qt-1];lt[gt]=Ot,Ke[gt]=qt,this.setPage(gt)}else if(U<gt){Ot=lt[U],qt=Ke[U];for(var ge=U;ge<gt;ge++)lt[ge]=lt[ge+1],Ke[ge]=Ke[ge+1];lt[gt]=Ot,Ke[gt]=qt,this.setPage(gt)}return this},m.deletePage=function(){return ma.apply(this,arguments),this},m.__private__.text=m.text=function(U,gt,Ot,qt,Qt){var ge,Se,je,$e,hn,_n,In,Mr,Qr,hr=(qt=qt||{}).scope||this;if(typeof U=="number"&&typeof gt=="number"&&(typeof Ot=="string"||Array.isArray(Ot))){var ti=Ot;Ot=gt,gt=U,U=ti}if(arguments[3]instanceof nn==0?(je=arguments[4],$e=arguments[5],Lr(In=arguments[3])==="object"&&In!==null||(typeof je=="string"&&($e=je,je=null),typeof In=="string"&&($e=In,In=null),typeof In=="number"&&(je=In,In=null),qt={flags:In,angle:je,align:$e})):(I("The transform parameter of text() with a Matrix value"),Qr=Qt),isNaN(gt)||isNaN(Ot)||U==null)throw new Error("Invalid arguments passed to jsPDF.text");if(U.length===0)return hr;var Tr,yi="",ba=typeof qt.lineHeightFactor=="number"?qt.lineHeightFactor:Zi,Ss=hr.internal.scaleFactor;function wa(Bt){return Bt=Bt.split("	").join(Array(qt.TabLen||9).join(" ")),Yi(Bt,In)}function Tl(Bt){for(var It,zt=Bt.concat(),Ut=[],Gt=zt.length;Gt--;)typeof(It=zt.shift())=="string"?Ut.push(It):Array.isArray(Bt)&&(It.length===1||It[1]===void 0&&It[2]===void 0)?Ut.push(It[0]):Ut.push([It[0],It[1],It[2]]);return Ut}function Nl(Bt,It){var zt;if(typeof Bt=="string")zt=It(Bt)[0];else if(Array.isArray(Bt)){for(var Ut,Gt,te=Bt.concat(),ie=[],Zt=te.length;Zt--;)typeof(Ut=te.shift())=="string"?ie.push(It(Ut)[0]):Array.isArray(Ut)&&typeof Ut[0]=="string"&&(Gt=It(Ut[0],Ut[1],Ut[2]),ie.push([Gt[0],Gt[1],Gt[2]]));zt=ie}return zt}var ra=!1,Es=!0;if(typeof U=="string")ra=!0;else if(Array.isArray(U)){var tl=U.concat();Se=[];for(var xa,ai=tl.length;ai--;)(typeof(xa=tl.shift())!="string"||Array.isArray(xa)&&typeof xa[0]!="string")&&(Es=!1);ra=Es}if(ra===!1)throw new Error('Type of text must be string or Array. "'+U+'" is not recognized.');typeof U=="string"&&(U=U.match(/[\r?\n]/)?U.split(/\r\n|\r|\n/g):[U]);var Oo=z/hr.internal.scaleFactor,ho=Oo*(ba-1);switch(qt.baseline){case"bottom":Ot-=ho;break;case"top":Ot+=Oo-ho;break;case"hanging":Ot+=Oo-2*ho;break;case"middle":Ot+=Oo/2-ho}if((_n=qt.maxWidth||0)>0&&(typeof U=="string"?U=hr.splitTextToSize(U,_n):Object.prototype.toString.call(U)==="[object Array]"&&(U=U.reduce(function(Bt,It){return Bt.concat(hr.splitTextToSize(It,_n))},[]))),ge={text:U,x:gt,y:Ot,options:qt,mutex:{pdfEscape:Yi,activeFontKey:Fe,fonts:rn,activeFontSize:z}},Vn.publish("preProcessText",ge),U=ge.text,je=(qt=ge.options).angle,Qr instanceof nn==0&&je&&typeof je=="number"){je*=Math.PI/180,qt.rotationDirection===0&&(je=-je),S===C&&(je=-je);var kl=Math.cos(je),_a=Math.sin(je);Qr=new nn(kl,_a,-_a,kl,0,0)}else je&&je instanceof nn&&(Qr=je);S!==C||Qr||(Qr=Fs),(hn=qt.charSpace||As)!==void 0&&(yi+=Q(Z(hn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Mr=qt.horizontalScale)!==void 0&&(yi+=Q(100*Mr)+` Tz
`),qt.lang;var ts=-1,fo=qt.renderingMode!==void 0?qt.renderingMode:qt.stroke,el=hr.internal.getCurrentPageInfo().pageContext;switch(fo){case 0:case!1:case"fill":ts=0;break;case 1:case!0:case"stroke":ts=1;break;case 2:case"fillThenStroke":ts=2;break;case 3:case"invisible":ts=3;break;case 4:case"fillAndAddForClipping":ts=4;break;case 5:case"strokeAndAddPathForClipping":ts=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ts=6;break;case 7:case"addToPathForClipping":ts=7}var nl=el.usedRenderingMode!==void 0?el.usedRenderingMode:-1;ts!==-1?yi+=ts+` Tr
`:nl!==-1&&(yi+=`0 Tr
`),ts!==-1&&(el.usedRenderingMode=ts),$e=qt.align||"left";var Cs,ia=z*ba,po=hr.internal.pageSize.getWidth(),yu=rn[Fe];hn=qt.charSpace||As,_n=qt.maxWidth||0,In=Object.assign({autoencode:!0,noBOM:!0},qt.flags);var Aa=[],Sa=function(Bt){return hr.getStringUnitWidth(Bt,{font:yu,charSpace:hn,fontSize:z,doKerning:!1})*z/Ss};if(Object.prototype.toString.call(U)==="[object Array]"){var Zr;Se=Tl(U),$e!=="left"&&(Cs=Se.map(Sa));var qn,zs=0;if($e==="right"){gt-=Cs[0],U=[],ai=Se.length;for(var us=0;us<ai;us++)us===0?(qn=os(gt),Zr=Pr(Ot)):(qn=Z(zs-Cs[us]),Zr=-ia),U.push([Se[us],qn,Zr]),zs=Cs[us]}else if($e==="center"){gt-=Cs[0]/2,U=[],ai=Se.length;for(var mo=0;mo<ai;mo++)mo===0?(qn=os(gt),Zr=Pr(Ot)):(qn=Z((zs-Cs[mo])/2),Zr=-ia),U.push([Se[mo],qn,Zr]),zs=Cs[mo]}else if($e==="left"){U=[],ai=Se.length;for(var Do=0;Do<ai;Do++)U.push(Se[Do])}else if($e==="justify"&&yu.encoding==="Identity-H"){U=[],ai=Se.length,_n=_n!==0?_n:po;for(var rl=0,yr=0;yr<ai;yr++)if(Zr=yr===0?Pr(Ot):-ia,qn=yr===0?os(gt):rl,yr<ai-1){var Rl=Z((_n-Cs[yr])/(Se[yr].split(" ").length-1)),cs=Se[yr].split(" ");U.push([cs[0]+" ",qn,Zr]),rl=0;for(var Ii=1;Ii<cs.length;Ii++){var Ei=(Sa(cs[Ii-1]+" "+cs[Ii])-Sa(cs[Ii]))*Ss+Rl;Ii==cs.length-1?U.push([cs[Ii],Ei,0]):U.push([cs[Ii]+" ",Ei,0]),rl-=Ei}}else U.push([Se[yr],qn,Zr]);U.push(["",rl,0])}else{if($e!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(U=[],ai=Se.length,_n=_n!==0?_n:po,yr=0;yr<ai;yr++){Zr=yr===0?Pr(Ot):-ia,qn=yr===0?os(gt):0;var E=Se[yr].split(" ").length-1,M=E>0?(_n-Cs[yr])/E:0;yr<ai-1?Aa.push(Q(Z(M))):Aa.push(0),U.push([Se[yr],qn,Zr])}}}(typeof qt.R2L=="boolean"?qt.R2L:Ct)===!0&&(U=Nl(U,function(Bt,It,zt){return[Bt.split("").reverse().join(""),It,zt]})),ge={text:U,x:gt,y:Ot,options:qt,mutex:{pdfEscape:Yi,activeFontKey:Fe,fonts:rn,activeFontSize:z}},Vn.publish("postProcessText",ge),U=ge.text,Tr=ge.mutex.isHex||!1;var V=rn[Fe].encoding;V!=="WinAnsiEncoding"&&V!=="StandardEncoding"||(U=Nl(U,function(Bt,It,zt){return[wa(Bt),It,zt]})),Se=Tl(U),U=[];for(var J,ut,bt,Tt=Array.isArray(Se[0])?1:0,Rt="",Vt=function(Bt,It,zt){var Ut="";return zt instanceof nn?(zt=typeof qt.angle=="number"?fa(zt,new nn(1,0,0,1,Bt,It)):fa(new nn(1,0,0,1,Bt,It),zt),S===C&&(zt=fa(new nn(1,0,0,-1,0,0),zt)),Ut=zt.join(" ")+` Tm
`):Ut=Q(Bt)+" "+Q(It)+` Td
`,Ut},Yt=0;Yt<Se.length;Yt++){switch(Rt="",Tt){case 1:bt=(Tr?"<":"(")+Se[Yt][0]+(Tr?">":")"),J=parseFloat(Se[Yt][1]),ut=parseFloat(Se[Yt][2]);break;case 0:bt=(Tr?"<":"(")+Se[Yt]+(Tr?">":")"),J=os(gt),ut=Pr(Ot)}Aa!==void 0&&Aa[Yt]!==void 0&&(Rt=Aa[Yt]+` Tw
`),Yt===0?U.push(Rt+Vt(J,ut,Qr)+bt):Tt===0?U.push(Rt+bt):Tt===1&&U.push(Rt+Vt(J,ut,Qr)+bt)}U=Tt===0?U.join(` Tj
T* `):U.join(` Tj
`),U+=` Tj
`;var Ht=`BT
/`;return Ht+=Fe+" "+z+` Tf
`,Ht+=Q(z*ba)+` TL
`,Ht+=Js+`
`,Ht+=yi,Ht+=U,tt(Ht+="ET"),y[Fe]=!0,hr};var Ko=m.__private__.clip=m.clip=function(U){return tt(U==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Ko("evenodd")},m.__private__.discardPath=m.discardPath=function(){return tt("n"),this};var Si=m.__private__.isValidStyle=function(U){var gt=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(U)!==-1&&(gt=!0),gt};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(U){return Si(U)&&(h=U),this};var El=m.__private__.getStyle=m.getStyle=function(U){var gt=h;switch(U){case"D":case"S":gt="S";break;case"F":gt="f";break;case"FD":case"DF":gt="B";break;case"f":case"f*":case"B":case"B*":gt=U}return gt},To=m.close=function(){return tt("h"),this};m.stroke=function(){return tt("S"),this},m.fill=function(U){return Zs("f",U),this},m.fillEvenOdd=function(U){return Zs("f*",U),this},m.fillStroke=function(U){return Zs("B",U),this},m.fillStrokeEvenOdd=function(U){return Zs("B*",U),this};var Zs=function(U,gt){Lr(gt)==="object"?du(gt,U):tt(U)},$o=function(U){U===null||S===C&&U===void 0||(U=El(U),tt(U))};function zn(U,gt,Ot,qt,Qt){var ge=new pf(gt||this.boundingBox,Ot||this.xStep,qt||this.yStep,this.gState,Qt||this.matrix);ge.stream=this.stream;var Se=U+"$$"+this.cloneIndex+++"$$";return Bn(Se,ge),ge}var du=function(U,gt){var Ot=Gn[U.key],qt=Je[Ot];if(qt instanceof $c)tt("q"),tt(pu(gt)),qt.gState&&m.setGState(qt.gState),tt(U.matrix.toString()+" cm"),tt("/"+Ot+" sh"),tt("Q");else if(qt instanceof pf){var Qt=new nn(1,0,0,-1,0,na());U.matrix&&(Qt=Qt.multiply(U.matrix||Fs),Ot=zn.call(qt,U.key,U.boundingBox,U.xStep,U.yStep,Qt).id),tt("q"),tt("/Pattern cs"),tt("/"+Ot+" scn"),qt.gState&&m.setGState(qt.gState),tt(gt),tt("Q")}},pu=function(U){switch(U){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},mu=m.moveTo=function(U,gt){return tt(Q(Z(U))+" "+Q(D(gt))+" m"),this},Qi=m.lineTo=function(U,gt){return tt(Q(Z(U))+" "+Q(D(gt))+" l"),this},gi=m.curveTo=function(U,gt,Ot,qt,Qt,ge){return tt([Q(Z(U)),Q(D(gt)),Q(Z(Ot)),Q(D(qt)),Q(Z(Qt)),Q(D(ge)),"c"].join(" ")),this};m.__private__.line=m.line=function(U,gt,Ot,qt,Qt){if(isNaN(U)||isNaN(gt)||isNaN(Ot)||isNaN(qt)||!Si(Qt))throw new Error("Invalid arguments passed to jsPDF.line");return S===A?this.lines([[Ot-U,qt-gt]],U,gt,[1,1],Qt||"S"):this.lines([[Ot-U,qt-gt]],U,gt,[1,1]).stroke()},m.__private__.lines=m.lines=function(U,gt,Ot,qt,Qt,ge){var Se,je,$e,hn,_n,In,Mr,Qr,hr,ti,Tr,yi;if(typeof U=="number"&&(yi=Ot,Ot=gt,gt=U,U=yi),qt=qt||[1,1],ge=ge||!1,isNaN(gt)||isNaN(Ot)||!Array.isArray(U)||!Array.isArray(qt)||!Si(Qt)||typeof ge!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(mu(gt,Ot),Se=qt[0],je=qt[1],hn=U.length,ti=gt,Tr=Ot,$e=0;$e<hn;$e++)(_n=U[$e]).length===2?(ti=_n[0]*Se+ti,Tr=_n[1]*je+Tr,Qi(ti,Tr)):(In=_n[0]*Se+ti,Mr=_n[1]*je+Tr,Qr=_n[2]*Se+ti,hr=_n[3]*je+Tr,ti=_n[4]*Se+ti,Tr=_n[5]*je+Tr,gi(In,Mr,Qr,hr,ti,Tr));return ge&&To(),$o(Qt),this},m.path=function(U){for(var gt=0;gt<U.length;gt++){var Ot=U[gt],qt=Ot.c;switch(Ot.op){case"m":mu(qt[0],qt[1]);break;case"l":Qi(qt[0],qt[1]);break;case"c":gi.apply(this,qt);break;case"h":To()}}return this},m.__private__.rect=m.rect=function(U,gt,Ot,qt,Qt){if(isNaN(U)||isNaN(gt)||isNaN(Ot)||isNaN(qt)||!Si(Qt))throw new Error("Invalid arguments passed to jsPDF.rect");return S===A&&(qt=-qt),tt([Q(Z(U)),Q(D(gt)),Q(Z(Ot)),Q(Z(qt)),"re"].join(" ")),$o(Qt),this},m.__private__.triangle=m.triangle=function(U,gt,Ot,qt,Qt,ge,Se){if(isNaN(U)||isNaN(gt)||isNaN(Ot)||isNaN(qt)||isNaN(Qt)||isNaN(ge)||!Si(Se))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ot-U,qt-gt],[Qt-Ot,ge-qt],[U-Qt,gt-ge]],U,gt,[1,1],Se,!0),this},m.__private__.roundedRect=m.roundedRect=function(U,gt,Ot,qt,Qt,ge,Se){if(isNaN(U)||isNaN(gt)||isNaN(Ot)||isNaN(qt)||isNaN(Qt)||isNaN(ge)||!Si(Se))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var je=4/3*(Math.SQRT2-1);return Qt=Math.min(Qt,.5*Ot),ge=Math.min(ge,.5*qt),this.lines([[Ot-2*Qt,0],[Qt*je,0,Qt,ge-ge*je,Qt,ge],[0,qt-2*ge],[0,ge*je,-Qt*je,ge,-Qt,ge],[2*Qt-Ot,0],[-Qt*je,0,-Qt,-ge*je,-Qt,-ge],[0,2*ge-qt],[0,-ge*je,Qt*je,-ge,Qt,-ge]],U+Qt,gt,[1,1],Se,!0),this},m.__private__.ellipse=m.ellipse=function(U,gt,Ot,qt,Qt){if(isNaN(U)||isNaN(gt)||isNaN(Ot)||isNaN(qt)||!Si(Qt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ge=4/3*(Math.SQRT2-1)*Ot,Se=4/3*(Math.SQRT2-1)*qt;return mu(U+Ot,gt),gi(U+Ot,gt-Se,U+ge,gt-qt,U,gt-qt),gi(U-ge,gt-qt,U-Ot,gt-Se,U-Ot,gt),gi(U-Ot,gt+Se,U-ge,gt+qt,U,gt+qt),gi(U+ge,gt+qt,U+Ot,gt+Se,U+Ot,gt),$o(Qt),this},m.__private__.circle=m.circle=function(U,gt,Ot,qt){if(isNaN(U)||isNaN(gt)||isNaN(Ot)||!Si(qt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(U,gt,Ot,Ot,qt)},m.setFont=function(U,gt,Ot){return Ot&&(gt=H(gt,Ot)),Fe=fu(U,gt,{disableWarning:!1}),this};var _s=m.__private__.getFont=m.getFont=function(){return rn[fu.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var U,gt,Ot={};for(U in sn)if(sn.hasOwnProperty(U))for(gt in Ot[U]=[],sn[U])sn[U].hasOwnProperty(gt)&&Ot[U].push(gt);return Ot},m.addFont=function(U,gt,Ot,qt,Qt){var ge=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ge.indexOf(arguments[3])!==-1?Qt=arguments[3]:arguments[3]&&ge.indexOf(arguments[3])==-1&&(Ot=H(Ot,qt)),Oa.call(this,U,gt,Ot,Qt=Qt||"Identity-H")};var Zi,No=r.lineWidth||.200025,so=m.__private__.getLineWidth=m.getLineWidth=function(){return No},He=m.__private__.setLineWidth=m.setLineWidth=function(U){return No=U,tt(Q(Z(U))+" w"),this};m.__private__.setLineDash=cn.API.setLineDash=cn.API.setLineDashPattern=function(U,gt){if(U=U||[],gt=gt||0,isNaN(gt)||!Array.isArray(U))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return U=U.map(function(Ot){return Q(Z(Ot))}).join(" "),gt=Q(Z(gt)),tt("["+U+"] "+gt+" d"),this};var Us=m.__private__.getLineHeight=m.getLineHeight=function(){return z*Zi};m.__private__.getLineHeight=m.getLineHeight=function(){return z*Zi};var ao=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(U){return typeof(U=U||1.15)=="number"&&(Zi=U),this},ko=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Zi};ao(r.lineHeight);var os=m.__private__.getHorizontalCoordinate=function(U){return Z(U)},Pr=m.__private__.getVerticalCoordinate=function(U){return S===C?U:Ke[K].mediaBox.topRightY-Ke[K].mediaBox.bottomLeftY-Z(U)},gu=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(U){return Q(os(U))},Ji=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(U){return Q(Pr(U))},ls=r.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return dr(ls)},m.__private__.setStrokeColor=m.setDrawColor=function(U,gt,Ot,qt){return ls=Hr({ch1:U,ch2:gt,ch3:Ot,ch4:qt,pdfColorType:"draw",precision:2}),tt(ls),this};var Ro=r.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return dr(Ro)},m.__private__.setFillColor=m.setFillColor=function(U,gt,Ot,qt){return Ro=Hr({ch1:U,ch2:gt,ch3:Ot,ch4:qt,pdfColorType:"fill",precision:2}),tt(Ro),this};var Js=r.textColor||"0 g",Lo=m.__private__.getTextColor=m.getTextColor=function(){return dr(Js)};m.__private__.setTextColor=m.setTextColor=function(U,gt,Ot,qt){return Js=Hr({ch1:U,ch2:gt,ch3:Ot,ch4:qt,pdfColorType:"text",precision:3}),this};var As=r.charSpace,Xo=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(As||0)};m.__private__.setCharSpace=m.setCharSpace=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return As=U,this};var Cl=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(U){var gt=m.CapJoinStyles[U];if(gt===void 0)throw new Error("Line cap style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Cl=gt,tt(gt+" J"),this};var Yr=0;m.__private__.setLineJoin=m.setLineJoin=function(U){var gt=m.CapJoinStyles[U];if(gt===void 0)throw new Error("Line join style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Yr=gt,tt(gt+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(U){if(U=U||0,isNaN(U))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return tt(Q(Z(U))+" M"),this},m.GState=Sg,m.setGState=function(U){(U=typeof U=="string"?un[ve[U]]:Pa(null,U)).equals(Jn)||(tt("/"+U.id+" gs"),Jn=U)};var Pa=function(U,gt){if(!U||!ve[U]){var Ot=!1;for(var qt in un)if(un.hasOwnProperty(qt)&&un[qt].equals(gt)){Ot=!0;break}if(Ot)gt=un[qt];else{var Qt="GS"+(Object.keys(un).length+1).toString(10);un[Qt]=gt,gt.id=Qt}return U&&(ve[U]=gt.id),Vn.publish("addGState",gt),gt}};m.addGState=function(U,gt){return Pa(U,gt),this},m.saveGraphicsState=function(){return tt("q"),Ee.push({key:Fe,size:z,color:Js}),this},m.restoreGraphicsState=function(){tt("Q");var U=Ee.pop();return Fe=U.key,z=U.size,Js=U.color,Jn=null,this},m.setCurrentTransformationMatrix=function(U){return tt(U.toString()+" cm"),this},m.comment=function(U){return tt("#"+U),this};var ta=function(U,gt){var Ot=U||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ot},set:function(ge){isNaN(ge)||(Ot=parseFloat(ge))}});var qt=gt||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return qt},set:function(ge){isNaN(ge)||(qt=parseFloat(ge))}});var Qt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Qt},set:function(ge){Qt=ge.toString()}}),this},ea=function(U,gt,Ot,qt){ta.call(this,U,gt),this.type="rect";var Qt=Ot||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Qt},set:function(Se){isNaN(Se)||(Qt=parseFloat(Se))}});var ge=qt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ge},set:function(Se){isNaN(Se)||(ge=parseFloat(Se))}}),this},oo=function(){this.page=gn,this.currentPage=K,this.pages=lt.slice(0),this.pagesContext=Ke.slice(0),this.x=Ue,this.y=Xn,this.matrix=Xe,this.width=co(K),this.height=Qo(K),this.outputDestination=Mt,this.id="",this.objectNumber=-1};oo.prototype.restore=function(){gn=this.page,K=this.currentPage,Ke=this.pagesContext,lt=this.pages,Ue=this.x,Xn=this.y,Xe=this.matrix,Yo(K,this.width),va(K,this.height),Mt=this.outputDestination};var lo=function(U,gt,Ot,qt,Qt){Fi.push(new oo),gn=K=0,lt=[],Ue=U,Xn=gt,Xe=Qt,js([Ot,qt])};for(var uo in m.beginFormObject=function(U,gt,Ot,qt,Qt){return lo(U,gt,Ot,qt,Qt),this},m.endFormObject=function(U){return(function(gt){if(La[gt])Fi.pop().restore();else{var Ot=new oo,qt="Xo"+(Object.keys($i).length+1).toString(10);Ot.id=qt,La[gt]=qt,$i[qt]=Ot,Vn.publish("addFormObject",Ot),Fi.pop().restore()}})(U),this},m.doFormObject=function(U,gt){var Ot=$i[La[U]];return tt("q"),tt(gt.toString()+" cm"),tt("/"+Ot.id+" Do"),tt("Q"),this},m.getFormObject=function(U){var gt=$i[La[U]];return{x:gt.x,y:gt.y,width:gt.width,height:gt.height,matrix:gt.matrix}},m.save=function(U,gt){return U=U||"generated.pdf",(gt=gt||{}).returnPromise=gt.returnPromise||!1,gt.returnPromise===!1?(Kc(io(ga()),U),typeof Kc.unload=="function"&&En.setTimeout&&setTimeout(Kc.unload,911),this):new Promise(function(Ot,qt){try{var Qt=Kc(io(ga()),U);typeof Kc.unload=="function"&&En.setTimeout&&setTimeout(Kc.unload,911),Ot(Qt)}catch(ge){qt(ge.message)}})},cn.API)cn.API.hasOwnProperty(uo)&&(uo==="events"&&cn.API.events.length?(function(U,gt){var Ot,qt,Qt;for(Qt=gt.length-1;Qt!==-1;Qt--)Ot=gt[Qt][0],qt=gt[Qt][1],U.subscribe.apply(U,[Ot].concat(typeof qt=="function"?[qt]:qt))})(Vn,cn.API.events):m[uo]=cn.API[uo]);function co(U){return Ke[U].mediaBox.topRightX-Ke[U].mediaBox.bottomLeftX}function Yo(U,gt){Ke[U].mediaBox.topRightX=gt+Ke[U].mediaBox.bottomLeftX}function Qo(U){return Ke[U].mediaBox.topRightY-Ke[U].mediaBox.bottomLeftY}function va(U,gt){Ke[U].mediaBox.topRightY=gt+Ke[U].mediaBox.bottomLeftY}var Ma=m.getPageWidth=function(U){return co(U=U||K)/ln},Zo=m.setPageWidth=function(U,gt){Yo(U,gt*ln)},na=m.getPageHeight=function(U){return Qo(U=U||K)/ln},Jo=m.setPageHeight=function(U,gt){va(U,gt*ln)};return m.internal={pdfEscape:Yi,getStyle:El,getFont:_s,getFontSize:kt,getCharSpace:Xo,getTextColor:Lo,getLineHeight:Us,getLineHeightFactor:ko,getLineWidth:so,write:X,getHorizontalCoordinate:os,getVerticalCoordinate:Pr,getCoordinateString:gu,getVerticalCoordinateString:Ji,collections:{},newObject:Or,newAdditionalObject:da,newObjectDeferred:qr,newObjectDeferredBegin:Jr,getFilters:Xi,putStream:Xs,events:Vn,scaleFactor:ln,pageSize:{getWidth:function(){return Ma(K)},setWidth:function(U){Zo(K,U)},getHeight:function(){return na(K)},setHeight:function(U){Jo(K,U)}},encryptionOptions:f,encryption:Gr,getEncryptor:function(U){return f!==null?Gr.encryptor(U,0):function(gt){return gt}},output:Al,getNumberOfPages:Co,get pages(){return lt},out:tt,f2:nt,f3:B,getPageInfo:Dr,getPageInfoByObjId:ya,getCurrentPageInfo:Sl,getPDFVersion:b,Point:ta,Rectangle:ea,Matrix:nn,hasHotfix:kn},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Ma(K)},set:function(U){Zo(K,U)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return na(K)},set:function(U){Jo(K,U)},enumerable:!0,configurable:!0}),(function(U){for(var gt=0,Ot=k.length;gt<Ot;gt++){var qt=Oa.call(this,U[gt][0],U[gt][1],U[gt][2],k[gt][3],!0);p===!1&&(y[qt]=!0);var Qt=U[gt][0].split("-");Xr({id:qt,fontName:Qt[0],fontStyle:Qt[1]||""})}Vn.publish("addFonts",{fonts:rn,dictionary:sn})}).call(m,k),Fe="F1",pa(i,e),Vn.publish("initialized"),m}lf.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},lf.prototype.toHexString=function(r){return r.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},lf.prototype.hexToBytes=function(r){for(var t=[],e=0;e<r.length;e+=2)t.push(String.fromCharCode(parseInt(r.substr(e,2),16)));return t.join("")},lf.prototype.processOwnerPassword=function(r,t){return Vb(Gb(t).substr(0,5),r)},lf.prototype.encryptor=function(r,t){var e=Gb(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return Vb(e,n)}},Sg.prototype.equals=function(r){var t,e="id,objectNumber,equals";if(!r||Lr(r)!==Lr(this))return!1;var n=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!r.hasOwnProperty(t)||this[t]!==r[t])return!1;n++}for(t in r)r.hasOwnProperty(t)&&e.indexOf(t)<0&&n--;return n===0},cn.API={events:[]},cn.version="4.2.0";var Pi=cn.API,Q2=1,bh=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ef=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},dh=function(r){return r.toString().replace(/#/g,"#23").replace(/[\s\n\r()<>[\]{}\/%]/g,function(t){var e=t.charCodeAt(0).toString(16).toUpperCase();return"#"+(e.length===1?"0"+e:e)})},On=function(r){return r.toFixed(2)},bc=function(r){return r.toFixed(5)};Pi.__acroform__={};var eo=function(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r},HE=function(r){return r*Q2},tu=function(r){var t=new fC,e=en.internal.getHeight(r)||0,n=en.internal.getWidth(r)||0;return t.BBox=[0,0,Number(On(n)),Number(On(e))],t},Bj=Pi.__acroform__.setBit=function(r,t){if(r=r||0,t=t||0,isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<t},Ij=Pi.__acroform__.clearBit=function(r,t){if(r=r||0,t=t||0,isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<t)},jj=Pi.__acroform__.getBit=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<t?1:0},qi=Pi.__acroform__.getBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return jj(r,t-1)},Hi=Pi.__acroform__.setBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Bj(r,t-1)},Gi=Pi.__acroform__.clearBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Ij(r,t-1)},Uj=Pi.__acroform__.calculateCoordinates=function(r,t){var e=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,i=r[0],s=r[1],l=r[2],o=r[3],c={};return c.lowerLeft_X=e(i)||0,c.lowerLeft_Y=n(s+o)||0,c.upperRight_X=e(i+l)||0,c.upperRight_Y=n(s)||0,[Number(On(c.lowerLeft_X)),Number(On(c.lowerLeft_Y)),Number(On(c.upperRight_X)),Number(On(c.upperRight_Y))]},zj=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var t=[],e=r._V||r.DV,n=Wb(r,e),i=r.scope.internal.getFont(r.fontName,r.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(r.scope.__private__.encodeColorString(r.color)),t.push("/"+i+" "+On(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=tu(r);return s.scope=r.scope,s.stream=t.join(`
`),s}},Wb=function(r,t){var e=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=r.multiline?i.map(function(nt){return nt.split(`
`)}):i.map(function(nt){return[nt]});var s=e,l=en.internal.getHeight(r)||0;l=l<0?-l:l;var o=en.internal.getWidth(r)||0;o=o<0?-o:o;var c=function(nt,B,Z){if(nt+1<i.length){var D=B+" "+i[nt+1][0];return Gm(D,r,Z).width<=o-4}return!1};s++;t:for(;s>0;){t="",s--;var h,f,p=Gm("3",r,s).height,y=r.multiline?l-s:(l-p)/2,m=y+=2,w=0,b=0,_=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+Gm(t,r,s=12).width+", FieldWidth:"+o+`
`;break}for(var v="",A=0,C=0;C<i.length;C++)if(i.hasOwnProperty(C)){var S=!1;if(i[C].length!==1&&_!==i[C].length-1){if((p+2)*(A+2)+2>l)continue t;v+=i[C][_],S=!0,b=C,C--}else{v=(v+=i[C][_]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var O=parseInt(C),q=c(O,v,s),H=C>=i.length-1;if(q&&!H){v+=" ",_=0;continue}if(q||H){if(H)b=O;else if(r.multiline&&(p+2)*(A+2)+2>l)continue t}else{if(!r.multiline||(p+2)*(A+2)+2>l)continue t;b=O}}for(var Q="",I=w;I<=b;I++){var dt=i[I];if(r.multiline){if(I===b){Q+=dt[_]+" ",_=(_+1)%dt.length;continue}if(I===w){Q+=dt[dt.length-1]+" ";continue}}Q+=dt[0]+" "}switch(Q=Q.substr(Q.length-1)==" "?Q.substr(0,Q.length-1):Q,f=Gm(Q,r,s).width,r.textAlign){case"right":h=o-f-2;break;case"center":h=(o-f)/2;break;default:h=2}t+=On(h)+" "+On(m)+` Td
`,t+="("+bh(Q)+`) Tj
`,t+=-On(h)+` 0 Td
`,m=-(s+2),f=0,w=S?b:b+1,A++,v=""}break}return n.text=t,n.fontSize=s,n},Gm=function(r,t,e){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:i}},qj={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Hj=function(r,t){var e={type:"reference",object:r};t.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===e.type&&n.object===e.object})===void 0&&t.internal.getPageInfo(r.page).pageContext.annotations.push(e)},Gj=function(r,t){if(t.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(wl.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(qj)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Q2=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new dC,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var s=n[i];s.objId=void 0,s.hasAnnotation&&Hj(s,e)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(e){(function(n,i){var s=!n;for(var l in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(l)){var o=n[l],c=[],h=o.Rect;if(o.Rect&&(o.Rect=Uj(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=en.createDefaultAppearanceStream(o),Lr(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=h,o.hasAppearanceStream&&!o.appearanceStreamContent){var f=zj(o);c.push({key:"AP",value:"<</N "+f+">>"}),i.internal.acroformPlugin.xForms.push(f)}if(o.appearanceStreamContent){var p="";for(var y in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(y)){var m=o.appearanceStreamContent[y];if(p+="/"+y+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var l in m)if(m.hasOwnProperty(l)){var w=m[l];typeof w=="function"&&(w=w.call(i,o)),p+="/"+l+" "+w+" ",i.internal.acroformPlugin.xForms.indexOf(w)>=0||i.internal.acroformPlugin.xForms.push(w)}}else typeof(w=m)=="function"&&(w=w.call(i,o)),p+="/"+l+" "+w,i.internal.acroformPlugin.xForms.indexOf(w)>=0||i.internal.acroformPlugin.xForms.push(w);p+=">>"}c.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:o.objId}),i.internal.out("endobj")}s&&(function(b,_){for(var v in b)if(b.hasOwnProperty(v)){var A=v,C=b[v];_.internal.newObjectDeferredBegin(C.objId,!0),Lr(C)==="object"&&typeof C.putStream=="function"&&C.putStream(),delete b[A]}})(i.internal.acroformPlugin.xForms,i)})(e,r)}),r.internal.acroformPlugin.isInitialized=!0}},hC=Pi.__acroform__.arrayToPdfArray=function(r,t,e){var n=function(l){return l};if(Array.isArray(r)){for(var i="[",s=0;s<r.length;s++)switch(s!==0&&(i+=" "),Lr(r[s])){case"boolean":case"number":case"object":i+=r[s].toString();break;case"string":r[s].substr(0,1)==="/"?i+="/"+dh(r[s].substr(1)):(t!==void 0&&e&&(n=e.internal.getEncryptor(t)),i+="("+bh(n(r[s].toString()))+")")}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Kv=function(r,t,e){var n=function(i){return i};return t!==void 0&&e&&(n=e.internal.getEncryptor(t)),(r=r||"").toString(),"("+bh(n(r))+")"},ou=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ou.prototype.toString=function(){return this.objId+" 0 R"},ou.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},ou.prototype.getKeyValueListForStream=function(){var r=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var n=t[e],i=this[n];i&&(Array.isArray(i)?r.push({key:n,value:hC(i,this.objId,this.scope)}):i instanceof ou?(i.scope=this.scope,r.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&r.push({key:n,value:i}))}return r};var fC=function(){ou.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){r=e.trim()},get:function(){return r||null}})};eo(fC,ou);var dC=function(){ou.call(this);var r,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var e=function(n){return n};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+bh(e(r))+")"}},set:function(e){r=e}})};eo(dC,ou);var wl=function r(){ou.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');t=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!qi(t,3)},set:function(v){v?this.F=Hi(t,3):this.F=Gi(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');e=v}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(v){n=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(v){n[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(v){n[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(v){n[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(v){n[3]=v}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Eg)return;s="FieldObject"+r.FieldNum++}var v=function(A){return A};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+bh(v(s))+")"},set:function(v){s=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(v){s=v}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(v){c=v}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/Q2:h},set:function(v){h=v}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(v){f=v}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Eg||this instanceof sh))return Kv(p,this.objId,this.scope)},set:function(v){v=v.toString(),p=v}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Ps==0?Kv(y,this.objId,this.scope):y},set:function(v){v=v.toString(),y=this instanceof Ps==0?v.substr(0,1)==="("?ef(v.substr(1,v.length-2)):ef(v):v}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ps==1?ef(y.substr(1,y.length-1)):y},set:function(v){v=v.toString(),y=this instanceof Ps==1?"/"+dh(v):v}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Ps==0?Kv(m,this.objId,this.scope):m},set:function(v){v=v.toString(),m=this instanceof Ps==0?v.substr(0,1)==="("?ef(v.substr(1,v.length-2)):ef(v):v}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ps==1?ef(m.substr(1,m.length-1)):m},set:function(v){v=v.toString(),m=this instanceof Ps==1?"/"+dh(v):v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var w,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(v){v=!!v,b=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(w)return w},set:function(v){w=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,1)},set:function(v){v?this.Ff=Hi(this.Ff,1):this.Ff=Gi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,2)},set:function(v){v?this.Ff=Hi(this.Ff,2):this.Ff=Gi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,3)},set:function(v){v?this.Ff=Hi(this.Ff,3):this.Ff=Gi(this.Ff,3)}});var _=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(_!==null)return _},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');_=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(_){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:_=2;break;case"center":case 1:_=1;break;default:_=0}}})};eo(wl,ou);var _f=function(){wl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){r=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return hC(t,this.objId,this.scope)},set:function(e){var n,i;i=[],typeof(n=e)=="string"&&(i=(function(s,l,o){o||(o=1);for(var c,h=[];c=l.exec(s);)h.push(c[o]);return h})(n,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,18)},set:function(e){e?this.Ff=Hi(this.Ff,18):this.Ff=Gi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=Hi(this.Ff,19):this.Ff=Gi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,20)},set:function(e){e?(this.Ff=Hi(this.Ff,20),t.sort()):this.Ff=Gi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,22)},set:function(e){e?this.Ff=Hi(this.Ff,22):this.Ff=Gi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,23)},set:function(e){e?this.Ff=Hi(this.Ff,23):this.Ff=Gi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,27)},set:function(e){e?this.Ff=Hi(this.Ff,27):this.Ff=Gi(this.Ff,27)}}),this.hasAppearanceStream=!1};eo(_f,wl);var Af=function(){_f.call(this),this.fontName="helvetica",this.combo=!1};eo(Af,_f);var Sf=function(){Af.call(this),this.combo=!0};eo(Sf,Af);var ig=function(){Sf.call(this),this.edit=!0};eo(ig,Sf);var Ps=function(){wl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,15)},set:function(e){e?this.Ff=Hi(this.Ff,15):this.Ff=Gi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,16)},set:function(e){e?this.Ff=Hi(this.Ff,16):this.Ff=Gi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,17)},set:function(e){e?this.Ff=Hi(this.Ff,17):this.Ff=Gi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,26)},set:function(e){e?this.Ff=Hi(this.Ff,26):this.Ff=Gi(this.Ff,26)}});var r,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(s){return s};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,i=[];for(n in i.push("<<"),t)i.push("/"+n+" ("+bh(e(t[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(e){Lr(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(e){var n=e==null?"":e.toString();n.substr(0,1)==="/"&&(n=n.substr(1)),r="/"+dh(n)}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(e){r="/"+dh(e)}})};eo(Ps,wl);var sg=function(){Ps.call(this),this.pushButton=!0};eo(sg,Ps);var Ef=function(){Ps.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t!==void 0?t:[]}})};eo(Ef,Ps);var Eg=function(){var r,t;wl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var e,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,l=[];for(s in l.push("<<"),n)l.push("/"+s+" ("+bh(i(n[s]))+")");return l.push(">>"),l.join(`
`)},set:function(i){Lr(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){var s=i==null?"":i.toString();s.substr(0,1)==="/"&&(s=s.substr(1)),e="/"+dh(s)}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(i){var s=i==null?"":i.toString();s.substr(0,1)==="/"&&(s=s.substr(1)),e="/"+dh(s)}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=en.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};eo(Eg,wl),Ef.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=r.createAppearanceStream(e.optionName),e.caption=r.getCA()}},Ef.prototype.createOption=function(r){var t=new Eg;return t.Parent=this,t.optionName=r,this.Kids.push(t),Vj.call(this.scope,t),t};var ag=function(){Ps.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=en.CheckBox.createAppearanceStream()};eo(ag,Ps);var sh=function(){wl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,13)},set:function(t){t?this.Ff=Hi(this.Ff,13):this.Ff=Gi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,21)},set:function(t){t?this.Ff=Hi(this.Ff,21):this.Ff=Gi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,23)},set:function(t){t?this.Ff=Hi(this.Ff,23):this.Ff=Gi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,24)},set:function(t){t?this.Ff=Hi(this.Ff,24):this.Ff=Gi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,25)},set:function(t){t?this.Ff=Hi(this.Ff,25):this.Ff=Gi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,26)},set:function(t){t?this.Ff=Hi(this.Ff,26):this.Ff=Gi(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){Number.isInteger(t)&&(r=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};eo(sh,wl);var og=function(){sh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,14)},set:function(r){r?this.Ff=Hi(this.Ff,14):this.Ff=Gi(this.Ff,14)}}),this.password=!0};eo(og,sh);var en={CheckBox:{createAppearanceStream:function(){return{N:{On:en.CheckBox.YesNormal},D:{On:en.CheckBox.YesPushDown,Off:en.CheckBox.OffPushDown}}},YesPushDown:function(r){var t=tu(r);t.scope=r.scope;var e=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,i=r.scope.__private__.encodeColorString(r.color),s=Wb(r,r.caption);return e.push("0.749023 g"),e.push("0 0 "+On(en.internal.getWidth(r))+" "+On(en.internal.getHeight(r))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+n+" "+On(s.fontSize)+" Tf "+i),e.push("BT"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(r){var t=tu(r);t.scope=r.scope;var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),i=[],s=en.internal.getHeight(r),l=en.internal.getWidth(r),o=Wb(r,r.caption);return i.push("1 g"),i.push("0 0 "+On(l)+" "+On(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+On(l-1)+" "+On(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+e+" "+On(o.fontSize)+" Tf "+n),i.push(o.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(r){var t=tu(r);t.scope=r.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+On(en.internal.getWidth(r))+" "+On(en.internal.getHeight(r))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(r){var t={D:{Off:en.RadioButton.Circle.OffPushDown},N:{}};return t.N[r]=en.RadioButton.Circle.YesNormal,t.D[r]=en.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(r){var t=tu(r);t.scope=r.scope;var e=[],n=en.internal.getWidth(r)<=en.internal.getHeight(r)?en.internal.getWidth(r)/4:en.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=en.internal.Bezier_C,s=Number((n*i).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+bc(en.internal.getWidth(r)/2)+" "+bc(en.internal.getHeight(r)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),e.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),e.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),e.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(r){var t=tu(r);t.scope=r.scope;var e=[],n=en.internal.getWidth(r)<=en.internal.getHeight(r)?en.internal.getWidth(r)/4:en.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*en.internal.Bezier_C).toFixed(5)),l=Number((n*en.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+bc(en.internal.getWidth(r)/2)+" "+bc(en.internal.getHeight(r)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),e.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),e.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),e.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+bc(en.internal.getWidth(r)/2)+" "+bc(en.internal.getHeight(r)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+l+" "+l+" "+n+" 0 "+n+" c"),e.push("-"+l+" "+n+" -"+n+" "+l+" -"+n+" 0 c"),e.push("-"+n+" -"+l+" -"+l+" -"+n+" 0 -"+n+" c"),e.push(l+" -"+n+" "+n+" -"+l+" "+n+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(r){var t=tu(r);t.scope=r.scope;var e=[],n=en.internal.getWidth(r)<=en.internal.getHeight(r)?en.internal.getWidth(r)/4:en.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*en.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+bc(en.internal.getWidth(r)/2)+" "+bc(en.internal.getHeight(r)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),e.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),e.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),e.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(r){var t={D:{Off:en.RadioButton.Cross.OffPushDown},N:{}};return t.N[r]=en.RadioButton.Cross.YesNormal,t.D[r]=en.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(r){var t=tu(r);t.scope=r.scope;var e=[],n=en.internal.calculateCross(r);return e.push("q"),e.push("1 1 "+On(en.internal.getWidth(r)-2)+" "+On(en.internal.getHeight(r)-2)+" re"),e.push("W"),e.push("n"),e.push(On(n.x1.x)+" "+On(n.x1.y)+" m"),e.push(On(n.x2.x)+" "+On(n.x2.y)+" l"),e.push(On(n.x4.x)+" "+On(n.x4.y)+" m"),e.push(On(n.x3.x)+" "+On(n.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(r){var t=tu(r);t.scope=r.scope;var e=en.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+On(en.internal.getWidth(r))+" "+On(en.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+On(en.internal.getWidth(r)-2)+" "+On(en.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(On(e.x1.x)+" "+On(e.x1.y)+" m"),n.push(On(e.x2.x)+" "+On(e.x2.y)+" l"),n.push(On(e.x4.x)+" "+On(e.x4.y)+" m"),n.push(On(e.x3.x)+" "+On(e.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(r){var t=tu(r);t.scope=r.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+On(en.internal.getWidth(r))+" "+On(en.internal.getHeight(r))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(r){var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,e=r.scope.__private__.encodeColorString(r.color);return"/"+t+" "+r.fontSize+" Tf "+e}};en.internal={Bezier_C:.551915024494,calculateCross:function(r){var t=en.internal.getWidth(r),e=en.internal.getHeight(r),n=Math.min(t,e);return{x1:{x:(t-n)/2,y:(e-n)/2+n},x2:{x:(t-n)/2+n,y:(e-n)/2},x3:{x:(t-n)/2,y:(e-n)/2},x4:{x:(t-n)/2+n,y:(e-n)/2+n}}}},en.internal.getWidth=function(r){var t=0;return Lr(r)==="object"&&(t=HE(r.Rect[2])),t},en.internal.getHeight=function(r){var t=0;return Lr(r)==="object"&&(t=HE(r.Rect[3])),t};var Vj=Pi.addField=function(r){if(Gj(this,r),!(r instanceof wl))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=r).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};Pi.AcroFormChoiceField=_f,Pi.AcroFormListBox=Af,Pi.AcroFormComboBox=Sf,Pi.AcroFormEditBox=ig,Pi.AcroFormButton=Ps,Pi.AcroFormPushButton=sg,Pi.AcroFormRadioButton=Ef,Pi.AcroFormCheckBox=ag,Pi.AcroFormTextField=sh,Pi.AcroFormPasswordField=og,Pi.AcroFormAppearance=en,Pi.AcroForm={ChoiceField:_f,ListBox:Af,ComboBox:Sf,EditBox:ig,Button:Ps,PushButton:sg,RadioButton:Ef,CheckBox:ag,TextField:sh,PasswordField:og,Appearance:en},cn.AcroForm={ChoiceField:_f,ListBox:Af,ComboBox:Sf,EditBox:ig,Button:Ps,PushButton:sg,RadioButton:Ef,CheckBox:ag,TextField:sh,PasswordField:og,Appearance:en};cn.AcroForm;function pC(r){return r.reduce(function(t,e,n){return t[e]=n,t},{})}(function(r){var t="addImage_";r.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=r.__addimage__.getImageFileTypeByImageData=function(nt,B){var Z,D,mt,it,st,vt=e;if((B=B||e)==="RGBA"||nt.data!==void 0&&nt.data instanceof Uint8ClampedArray&&"height"in nt&&"width"in nt)return"RGBA";if(q(nt))for(st in n)for(mt=n[st],Z=0;Z<mt.length;Z+=1){for(it=!0,D=0;D<mt[Z].length;D+=1)if(mt[Z][D]!==void 0&&mt[Z][D]!==nt[D]){it=!1;break}if(it===!0){vt=st;break}}else for(st in n)for(mt=n[st],Z=0;Z<mt.length;Z+=1){for(it=!0,D=0;D<mt[Z].length;D+=1)if(mt[Z][D]!==void 0&&mt[Z][D]!==nt.charCodeAt(D)){it=!1;break}if(it===!0){vt=st;break}}return vt===e&&B!==e&&(vt=B),vt},s=function nt(B){for(var Z=this.internal.write,D=this.internal.putStream,mt=(0,this.internal.getFilters)();mt.indexOf("FlateEncode")!==-1;)mt.splice(mt.indexOf("FlateEncode"),1);B.objectId=this.internal.newObject();var it=[];if(it.push({key:"Type",value:"/XObject"}),it.push({key:"Subtype",value:"/Image"}),it.push({key:"Width",value:B.width}),it.push({key:"Height",value:B.height}),B.colorSpace===v.INDEXED?it.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(B.palette.length/3-1)+" "+("sMask"in B&&B.sMask!==void 0?B.objectId+2:B.objectId+1)+" 0 R]"}):(it.push({key:"ColorSpace",value:"/"+B.colorSpace}),B.colorSpace===v.DEVICE_CMYK&&it.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),it.push({key:"BitsPerComponent",value:B.bitsPerComponent}),"decodeParameters"in B&&B.decodeParameters!==void 0&&it.push({key:"DecodeParms",value:"<<"+B.decodeParameters+">>"}),"transparency"in B&&Array.isArray(B.transparency)&&B.transparency.length>0){for(var st="",vt=0,wt=B.transparency.length;vt<wt;vt++)st+=B.transparency[vt]+" "+B.transparency[vt]+" ";it.push({key:"Mask",value:"["+st+"]"})}B.sMask!==void 0&&it.push({key:"SMask",value:B.objectId+1+" 0 R"});var Ft=B.filter!==void 0?["/"+B.filter]:void 0;if(D({data:B.data,additionalKeyValues:it,alreadyAppliedFilters:Ft,objectId:B.objectId}),Z("endobj"),"sMask"in B&&B.sMask!==void 0){var $,R=($=B.sMaskBitsPerComponent)!==null&&$!==void 0?$:B.bitsPerComponent,K={width:B.width,height:B.height,colorSpace:"DeviceGray",bitsPerComponent:R,data:B.sMask};"filter"in B&&(K.decodeParameters="/Predictor ".concat(B.predictor," /Colors 1 /BitsPerComponent ").concat(R," /Columns ").concat(B.width),K.filter=B.filter),nt.call(this,K)}if(B.colorSpace===v.INDEXED){var rt=this.internal.newObject();D({data:Q(new Uint8Array(B.palette)),objectId:rt}),Z("endobj")}},l=function(){var nt=this.internal.collections[t+"images"];for(var B in nt)s.call(this,nt[B])},o=function(){var nt,B=this.internal.collections[t+"images"],Z=this.internal.write;for(var D in B)Z("/I"+(nt=B[D]).index,nt.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",o))},h=function(){var nt=this.internal.collections[t+"images"];return c.call(this),nt},f=function(){return Object.keys(this.internal.collections[t+"images"]).length},p=function(nt){return typeof r["process"+nt.toUpperCase()]=="function"},y=function(nt){return Lr(nt)==="object"&&nt.nodeType===1},m=function(nt,B){if(nt.nodeName==="IMG"&&nt.hasAttribute("src")){var Z=""+nt.getAttribute("src");if(Z.indexOf("data:image/")===0)return rg(unescape(Z).split("base64,").pop());var D=r.loadFile(Z,!0);if(D!==void 0)return D}if(nt.nodeName==="CANVAS"){if(nt.width===0||nt.height===0)throw new Error("Given canvas must have data. Canvas width: "+nt.width+", height: "+nt.height);var mt;switch(B){case"PNG":mt="image/png";break;case"WEBP":mt="image/webp";break;default:mt="image/jpeg"}return rg(nt.toDataURL(mt,1).split("base64,").pop())}},w=function(nt){var B=this.internal.collections[t+"images"];if(B){for(var Z in B)if(nt===B[Z].alias)return B[Z]}},b=function(nt,B,Z){return nt||B||(nt=-96,B=-96),nt<0&&(nt=-1*Z.width*72/nt/this.internal.scaleFactor),B<0&&(B=-1*Z.height*72/B/this.internal.scaleFactor),nt===0&&(nt=B*Z.width/Z.height),B===0&&(B=nt*Z.height/Z.width),[nt,B]},_=function(nt,B,Z,D,mt,it){var st=b.call(this,Z,D,mt),vt=this.internal.getCoordinateString,wt=this.internal.getVerticalCoordinateString,Ft=h.call(this);if(Z=st[0],D=st[1],Ft[mt.index]=mt,it){it*=Math.PI/180;var $=Math.cos(it),R=Math.sin(it),K=function(pt){return pt.toFixed(4)},rt=[K($),K(R),K(-1*R),K($),0,0,"cm"]}this.internal.write("q"),it?(this.internal.write([1,"0","0",1,vt(nt),wt(B+D),"cm"].join(" ")),this.internal.write(rt.join(" ")),this.internal.write([vt(Z),"0","0",vt(D),"0","0","cm"].join(" "))):this.internal.write([vt(Z),"0","0",vt(D),vt(nt),wt(B+D),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+mt.index+" Do"),this.internal.write("Q")},v=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var A=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},C=r.__addimage__.sHashCode=function(nt){var B,Z,D=0;if(typeof nt=="string")for(Z=nt.length,B=0;B<Z;B++)D=(D<<5)-D+nt.charCodeAt(B),D|=0;else if(q(nt))for(Z=nt.byteLength/2,B=0;B<Z;B++)D=(D<<5)-D+nt[B],D|=0;return D},S=r.__addimage__.validateStringAsBase64=function(nt){(nt=nt||"").toString().trim();var B=!0;return nt.length===0&&(B=!1),nt.length%4!=0&&(B=!1),/^[A-Za-z0-9+/]+$/.test(nt.substr(0,nt.length-2))===!1&&(B=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(nt.substr(-2))===!1&&(B=!1),B},O=r.__addimage__.extractImageFromDataUrl=function(nt){if(nt==null||!(nt=nt.trim()).startsWith("data:"))return null;var B=nt.indexOf(",");return B<0?null:nt.substring(0,B).trim().endsWith("base64")?nt.substring(B+1):null};r.__addimage__.isArrayBuffer=function(nt){return nt instanceof ArrayBuffer};var q=r.__addimage__.isArrayBufferView=function(nt){return nt instanceof Int8Array||nt instanceof Uint8Array||nt instanceof Uint8ClampedArray||nt instanceof Int16Array||nt instanceof Uint16Array||nt instanceof Int32Array||nt instanceof Uint32Array||nt instanceof Float32Array||nt instanceof Float64Array},H=r.__addimage__.binaryStringToUint8Array=function(nt){for(var B=nt.length,Z=new Uint8Array(B),D=0;D<B;D++)Z[D]=nt.charCodeAt(D);return Z},Q=r.__addimage__.arrayBufferToBinaryString=function(nt){for(var B="",Z=q(nt)?nt:new Uint8Array(nt),D=0;D<Z.length;D+=8192)B+=String.fromCharCode.apply(null,Z.subarray(D,D+8192));return B};r.addImage=function(){var nt,B,Z,D,mt,it,st,vt,wt;if(typeof arguments[1]=="number"?(B=e,Z=arguments[1],D=arguments[2],mt=arguments[3],it=arguments[4],st=arguments[5],vt=arguments[6],wt=arguments[7]):(B=arguments[1],Z=arguments[2],D=arguments[3],mt=arguments[4],it=arguments[5],st=arguments[6],vt=arguments[7],wt=arguments[8]),Lr(nt=arguments[0])==="object"&&!y(nt)&&"imageData"in nt){var Ft=nt;nt=Ft.imageData,B=Ft.format||B||e,Z=Ft.x||Z||0,D=Ft.y||D||0,mt=Ft.w||Ft.width||mt,it=Ft.h||Ft.height||it,st=Ft.alias||st,vt=Ft.compression||vt,wt=Ft.rotation||Ft.angle||wt}var $=this.internal.getFilters();if(vt===void 0&&$.indexOf("FlateEncode")!==-1&&(vt="SLOW"),isNaN(Z)||isNaN(D))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var R=I.call(this,nt,B,st,vt);return _.call(this,Z,D,mt,it,R,wt),this};var I=function(nt,B,Z,D){var mt,it,st;if(typeof nt=="string"&&i(nt)===e){nt=unescape(nt);var vt=dt(nt,!1);(vt!==""||(vt=r.loadFile(nt,!0))!==void 0)&&(nt=vt)}if(y(nt)&&(nt=m(nt,B)),B=i(nt,B),!p(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(((st=Z)==null||st.length===0)&&(Z=(function(wt){return typeof wt=="string"||q(wt)?C(wt):q(wt.data)?C(wt.data):null})(nt)),(mt=w.call(this,Z))||(nt instanceof Uint8Array||B==="RGBA"||(it=nt,nt=H(nt)),mt=this["process"+B.toUpperCase()](nt,f.call(this),Z,(function(wt){return wt&&typeof wt=="string"&&(wt=wt.toUpperCase()),wt in r.image_compression?wt:A.NONE})(D),it)),!mt)throw new Error("An unknown error occurred whilst processing the image.");return mt},dt=r.__addimage__.convertBase64ToBinaryString=function(nt,B){B=typeof B!="boolean"||B;var Z,D="";if(typeof nt=="string"){var mt;Z=(mt=O(nt))!==null&&mt!==void 0?mt:nt;try{D=rg(Z)}catch(it){if(B)throw S(Z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+it.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return D};r.getImageProperties=function(nt){var B,Z,D="";if(y(nt)&&(nt=m(nt)),typeof nt=="string"&&i(nt)===e&&((D=dt(nt,!1))===""&&(D=r.loadFile(nt)||""),nt=D),Z=i(nt),!p(Z))throw new Error("addImage does not support files of type '"+Z+"', please ensure that a plugin for '"+Z+"' support is added.");if(nt instanceof Uint8Array||(nt=H(nt)),!(B=this["process"+Z.toUpperCase()](nt)))throw new Error("An unknown error occurred whilst processing the image");return B.fileType=Z,B}})(cn.API),(function(r){var t=function(e){if(e!==void 0&&e!="")return!0};cn.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(e){for(var n,i,s,l=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(e.objId),h=e.pageContext.annotations,f=!1,p=0;p<h.length&&!f;p++)switch((n=h[p]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var y=0;y<h.length;y++){n=h[y];var m=this.internal.pdfEscape,w=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),_=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(b.objId),A=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+l(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+m(v(n.contents))+")",s+=" /Popup "+_.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+m(v(A))+") >>",b.content=s;var C=b.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+l(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+C,n.open&&(s+=" /Open true"),s+=" >>",_.content=s,this.internal.write(b.objId,"0 R",_.objId,"0 R");break;case"freetext":i="/Rect ["+l(n.bounds.x)+" "+o(n.bounds.y)+" "+l(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var S=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(w(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+S+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var O=this.annotations._nameMap[n.options.name];n.options.pageNumber=O.page,n.options.top=O.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(w(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var q=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+q+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),r.createAnnotation=function(e){var n=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":n.pageContext.annotations.push(e)}},r.link=function(e,n,i,s,l){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(e),y:h(n),w:c(e+i),h:h(n+s)},options:l,type:"link"})},r.textWithLink=function(e,n,i,s){var l,o,c=this.getTextWidth(e),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var f=this.splitTextToSize(e,o).length;l=Math.ceil(h*f)}else o=c,l=h;return this.text(e,n,i,s),i+=.2*h,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,i-h,o,l,s),c},r.getTextWidth=function(e){var n=this.internal.getFontSize();return this.getStringUnitWidth(e)*n/this.internal.scaleFactor}})(cn.API),(function(r){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];r.__arabicParser__={};var s=r.__arabicParser__.isInArabicSubstitutionA=function(b){return t[b.charCodeAt(0)]!==void 0},l=r.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},o=r.__arabicParser__.isArabicEndLetter=function(b){return l(b)&&s(b)&&t[b.charCodeAt(0)].length<=2},c=r.__arabicParser__.isArabicAlfLetter=function(b){return l(b)&&i.indexOf(b.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return l(b)&&s(b)&&t[b.charCodeAt(0)].length>=1};var h=r.__arabicParser__.arabicLetterHasFinalForm=function(b){return l(b)&&s(b)&&t[b.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(b){return l(b)&&s(b)&&t[b.charCodeAt(0)].length>=3};var f=r.__arabicParser__.arabicLetterHasMedialForm=function(b){return l(b)&&s(b)&&t[b.charCodeAt(0)].length==4},p=r.__arabicParser__.resolveLigatures=function(b){var _=0,v=e,A="",C=0;for(_=0;_<b.length;_+=1)v[b.charCodeAt(_)]!==void 0?(C++,typeof(v=v[b.charCodeAt(_)])=="number"&&(A+=String.fromCharCode(v),v=e,C=0),_===b.length-1&&(v=e,A+=b.charAt(_-(C-1)),_-=C-1,C=0)):(v=e,A+=b.charAt(_-C),_-=C,C=0);return A};r.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&n[b.charCodeAt(0)]!==void 0};var y=r.__arabicParser__.getCorrectForm=function(b,_,v){return l(b)?s(b)===!1?-1:!h(b)||!l(_)&&!l(v)||!l(v)&&o(_)||o(b)&&!l(_)||o(b)&&c(_)||o(b)&&o(_)?0:f(b)&&l(_)&&!o(_)&&l(v)&&h(v)?3:o(b)||!l(v)?1:2:-1},m=function(b){var _=0,v=0,A=0,C="",S="",O="",q=(b=b||"").split("\\s+"),H=[];for(_=0;_<q.length;_+=1){for(H.push(""),v=0;v<q[_].length;v+=1)C=q[_][v],S=q[_][v-1],O=q[_][v+1],l(C)?(A=y(C,S,O),H[_]+=A!==-1?String.fromCharCode(t[C.charCodeAt(0)][A]):C):H[_]+=C;H[_]=p(H[_])}return H.join(" ")},w=r.__arabicParser__.processArabic=r.processArabic=function(){var b,_=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(_)){var A=0;for(v=[],A=0;A<_.length;A+=1)Array.isArray(_[A])?v.push([m(_[A][0]),_[A][1],_[A][2]]):v.push([m(_[A])]);b=v}else b=m(_);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};r.events.push(["preProcessText",w])})(cn.API),cn.API.autoPrint=function(r){var t;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(r){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(o){e=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(o){l=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,n){var i;if((e=e||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(cn.API),(function(r){var t={left:0,top:0,bottom:0,right:0},e=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(b){c=b}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(b){h=b}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(b){f=b}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(b){p=b}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(b){y=b}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(b){m=b}});var w=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return w},set:function(b){w=b}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},r.getTextDimensions=function(c,h){n.call(this);var f=(h=h||{}).fontSize||this.getFontSize(),p=h.font||this.getFont(),y=h.scaleFactor||this.internal.scaleFactor,m=0,w=0,b=0,_=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var v=h.maxWidth;v>0?typeof c=="string"?c=this.splitTextToSize(c,v):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(C,S){return C.concat(_.splitTextToSize(S,v))},[])):c=Array.isArray(c)?c:[c];for(var A=0;A<c.length;A++)m<(b=this.getStringUnitWidth(c[A],{font:p})*f)&&(m=b);return m!==0&&(w=c.length),{w:m/=y,h:Math.max((w*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/y,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=r.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var h=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,p=this.internal.__cell__.margins||t,y=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===c.lineNumber?(c.x=(h.x||0)+(h.width||0),c.y=h.y||0):h.y+h.height+c.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=p.top,m&&y&&(this.printHeaderRow(c.lineNumber,!0),c.y+=y[0].height)):c.y=h.y+h.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,e===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-f,c.y+f,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+f,{align:"center",baseline:"top",maxWidth:c.width-f-f}):this.text(c.text,c.x+f,c.y+f,{align:"left",baseline:"top",maxWidth:c.width-f-f})),this.internal.__cell__.lastCell=c,this};r.table=function(c,h,f,p,y){if(n.call(this),!f)throw new Error("No data for PDF table.");var m,w,b,_,v=[],A=[],C=[],S={},O={},q=[],H=[],Q=(y=y||{}).autoSize||!1,I=y.printHeaders!==!1,dt=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,nt=y.margins||Object.assign({width:this.getPageWidth()},t),B=typeof y.padding=="number"?y.padding:3,Z=y.headerBackgroundColor||"#c8c8c8",D=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=nt,this.internal.__cell__.table_font_size=dt,this.internal.__cell__.padding=B,this.internal.__cell__.headerBackgroundColor=Z,this.internal.__cell__.headerTextColor=D,this.setFontSize(dt),p==null)A=v=Object.keys(f[0]),C=v.map(function(){return"left"});else if(Array.isArray(p)&&Lr(p[0])==="object")for(v=p.map(function(Ft){return Ft.name}),A=p.map(function(Ft){return Ft.prompt||Ft.name||""}),C=p.map(function(Ft){return Ft.align||"left"}),m=0;m<p.length;m+=1)O[p[m].name]=.7499990551181103*p[m].width;else Array.isArray(p)&&typeof p[0]=="string"&&(A=v=p,C=v.map(function(){return"left"}));if(Q||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<v.length;m+=1){for(S[_=v[m]]=f.map(function(Ft){return Ft[_]}),this.setFont(void 0,"bold"),q.push(this.getTextDimensions(A[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),w=S[_],this.setFont(void 0,"normal"),b=0;b<w.length;b+=1)q.push(this.getTextDimensions(w[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);O[_]=Math.max.apply(null,q)+B+B,q=[]}if(I){var mt={};for(m=0;m<v.length;m+=1)mt[v[m]]={},mt[v[m]].text=A[m],mt[v[m]].align=C[m];var it=o.call(this,mt,O);H=v.map(function(Ft){return new s(c,h,O[Ft],it,mt[Ft].text,void 0,mt[Ft].align)}),this.setTableHeaderRow(H),this.printHeaderRow(1,!1)}var st=p.reduce(function(Ft,$){return Ft[$.name]=$.align,Ft},{});for(m=0;m<f.length;m+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:m,data:f[m]},this);var vt=o.call(this,f[m],O);for(b=0;b<v.length;b+=1){var wt=f[m][v[b]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:m,col:b,data:wt},this),l.call(this,new s(c,h,O[v[b]],vt,wt,m+2,st[v[b]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=h,this};var o=function(c,h){var f=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(c).map(function(m){var w=c[m];return this.splitTextToSize(w.hasOwnProperty("text")?w.text:w,h[m]-f-f)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/y+f+f},this).reduce(function(m,w){return Math.max(m,w)},0)};r.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},r.printHeaderRow=function(c,h){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){f=this.internal.__cell__.tableHeaderRow[m].clone(),h&&(f.y=this.internal.__cell__.margins.top||0,y.push(f)),f.lineNumber=c;var w=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,f),this.setTextColor(w)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),e=!1}})(cn.API);var mC={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},gC=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Kb=pC(gC),yC=[100,200,300,400,500,600,700,800,900],Wj=pC(yC);function $v(r){var t=r.family.replace(/"|'/g,"").toLowerCase(),e=(function(s){return mC[s=s||"normal"]?s:"normal"})(r.style),n=(function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400})(r.weight),i=(function(s){return typeof Kb[s=s||"normal"]=="number"?s:"normal"})(r.stretch);return{family:t,style:e,weight:n,stretch:i,src:r.src||[],ref:r.ref||{name:t,style:[i,e,n].join(" ")}}}function GE(r,t,e,n){var i;for(i=e;i>=0&&i<t.length;i+=n)if(r[t[i]])return r[t[i]];for(i=e;i>=0&&i<t.length;i-=n)if(r[t[i]])return r[t[i]]}var Kj={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},VE={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function WE(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function KE(r){return r.trimLeft()}function $j(r,t){for(var e=0;e<r.length;){if(r.charAt(e)===t)return[r.substring(0,e),r.substring(e+1)];e+=1}return null}function Xj(r){var t=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],r.substring(t[0].length)]}var nf,Vm,$E,XE,YE,Xv=["times"];function QE(r,t,e,n,i){var s=4,l=JE;switch(i){case cn.API.image_compression.FAST:s=1,l=ZE;break;case cn.API.image_compression.MEDIUM:s=6,l=t3;break;case cn.API.image_compression.SLOW:s=9,l=e3}r=(function(c,h,f,p){for(var y,m=c.length/h,w=new Uint8Array(c.length+m),b=[Yj,ZE,JE,t3,e3],_=0;_<m;_+=1){var v=_*h,A=c.subarray(v,v+h);if(p)w.set(p(A,f,y),v+_);else{for(var C=b.length,S=[],O=0;O<C;O+=1)S[O]=b[O](A,f,y);var q=Zj(S.concat());w.set(S[q],v+_)}y=A}return w})(r,t,Math.ceil(e*n/8),l);var o=Ub(r,{level:s});return cn.API.__addimage__.arrayBufferToBinaryString(o)}function Yj(r){var t=Array.apply([],r);return t.unshift(0),t}function ZE(r,t){var e=r.length,n=[];n[0]=1;for(var i=0;i<e;i+=1){var s=r[i-t]||0;n[i+1]=r[i]-s+256&255}return n}function JE(r,t,e){var n=r.length,i=[];i[0]=2;for(var s=0;s<n;s+=1){var l=e&&e[s]||0;i[s+1]=r[s]-l+256&255}return i}function t3(r,t,e){var n=r.length,i=[];i[0]=3;for(var s=0;s<n;s+=1){var l=r[s-t]||0,o=e&&e[s]||0;i[s+1]=r[s]+256-(l+o>>>1)&255}return i}function e3(r,t,e){var n=r.length,i=[];i[0]=4;for(var s=0;s<n;s+=1){var l=Qj(r[s-t]||0,e&&e[s]||0,e&&e[s-t]||0);i[s+1]=r[s]-l+256&255}return i}function Qj(r,t,e){if(r===t&&t===e)return r;var n=Math.abs(t-e),i=Math.abs(r-e),s=Math.abs(r+t-e-e);return n<=i&&n<=s?r:i<=s?t:e}function Zj(r){var t=r.map(function(e){return e.reduce(function(n,i){return n+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function Yv(r,t,e){var n=t*e,i=Math.floor(n/8),s=16-(n-8*i+e),l=(1<<e)-1;return vC(r,i)>>s&l}function n3(r,t,e,n){var i=e*n,s=Math.floor(i/8),l=16-(i-8*s+n),o=(1<<n)-1,c=(t&o)<<l;(function(h,f,p){if(f+1<h.byteLength)h.setUint16(f,p,!1);else{var y=p>>8&255;h.setUint8(f,y)}})(r,s,vC(r,s)&~(o<<l)&65535|c)}function vC(r,t){return t+1<r.byteLength?r.getUint16(t,!1):r.getUint8(t)<<8}function Jj(r){var t=0;if(r[t++]!==71||r[t++]!==73||r[t++]!==70||r[t++]!==56||(r[t++]+1&253)!=56||r[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=r[t++]|r[t++]<<8,n=r[t++]|r[t++]<<8,i=r[t++],s=i>>7,l=1<<1+(7&i);r[t++],r[t++];var o=null,c=null;s&&(o=t,c=l,t+=3*l);var h=!0,f=[],p=0,y=null,m=0,w=null;for(this.width=e,this.height=n;h&&t<r.length;)switch(r[t++]){case 33:switch(r[t++]){case 255:if(r[t]!==11||r[t+1]==78&&r[t+2]==69&&r[t+3]==84&&r[t+4]==83&&r[t+5]==67&&r[t+6]==65&&r[t+7]==80&&r[t+8]==69&&r[t+9]==50&&r[t+10]==46&&r[t+11]==48&&r[t+12]==3&&r[t+13]==1&&r[t+16]==0)t+=14,w=r[t++]|r[t++]<<8,t++;else for(t+=12;;){if(!((nt=r[t++])>=0))throw Error("Invalid block size");if(nt===0)break;t+=nt}break;case 249:if(r[t++]!==4||r[t+4]!==0)throw new Error("Invalid graphics extension block.");var b=r[t++];p=r[t++]|r[t++]<<8,y=r[t++],1&b||(y=null),m=b>>2&7,t++;break;case 254:for(;;){if(!((nt=r[t++])>=0))throw Error("Invalid block size");if(nt===0)break;t+=nt}break;default:throw new Error("Unknown graphic control label: 0x"+r[t-1].toString(16))}break;case 44:var _=r[t++]|r[t++]<<8,v=r[t++]|r[t++]<<8,A=r[t++]|r[t++]<<8,C=r[t++]|r[t++]<<8,S=r[t++],O=S>>6&1,q=1<<1+(7&S),H=o,Q=c,I=!1;S>>7&&(I=!0,H=t,Q=q,t+=3*q);var dt=t;for(t++;;){var nt;if(!((nt=r[t++])>=0))throw Error("Invalid block size");if(nt===0)break;t+=nt}f.push({x:_,y:v,width:A,height:C,has_local_palette:I,palette_offset:H,palette_size:Q,data_offset:dt,data_length:t-dt,transparent_index:y,interlaced:!!O,delay:p,disposal:m});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+r[t-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return w},this.frameInfo=function(B){if(B<0||B>=f.length)throw new Error("Frame index out of range.");return f[B]},this.decodeAndBlitFrameBGRA=function(B,Z){var D=this.frameInfo(B),mt=D.width*D.height;if(mt>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");var it=new Uint8Array(mt);r3(r,D.data_offset,it,mt);var st=D.palette_offset,vt=D.transparent_index;vt===null&&(vt=256);var wt=D.width,Ft=e-wt,$=wt,R=4*(D.y*e+D.x),K=4*((D.y+D.height)*e+D.x),rt=R,pt=4*Ft;D.interlaced===!0&&(pt+=4*e*7);for(var ct=8,F=0,j=it.length;F<j;++F){var ht=it[F];if($===0&&($=wt,(rt+=pt)>=K&&(pt=4*Ft+4*e*(ct-1),rt=R+(wt+Ft)*(ct<<1),ct>>=1)),ht===vt)rt+=4;else{var ot=r[st+3*ht],lt=r[st+3*ht+1],ft=r[st+3*ht+2];Z[rt++]=ft,Z[rt++]=lt,Z[rt++]=ot,Z[rt++]=255}--$}},this.decodeAndBlitFrameRGBA=function(B,Z){var D=this.frameInfo(B),mt=D.width*D.height;if(mt>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");var it=new Uint8Array(mt);r3(r,D.data_offset,it,mt);var st=D.palette_offset,vt=D.transparent_index;vt===null&&(vt=256);var wt=D.width,Ft=e-wt,$=wt,R=4*(D.y*e+D.x),K=4*((D.y+D.height)*e+D.x),rt=R,pt=4*Ft;D.interlaced===!0&&(pt+=4*e*7);for(var ct=8,F=0,j=it.length;F<j;++F){var ht=it[F];if($===0&&($=wt,(rt+=pt)>=K&&(pt=4*Ft+4*e*(ct-1),rt=R+(wt+Ft)*(ct<<1),ct>>=1)),ht===vt)rt+=4;else{var ot=r[st+3*ht],lt=r[st+3*ht+1],ft=r[st+3*ht+2];Z[rt++]=ot,Z[rt++]=lt,Z[rt++]=ft,Z[rt++]=255}--$}}}function r3(r,t,e,n){for(var i=r[t++],s=1<<i,l=s+1,o=l+1,c=i+1,h=(1<<c)-1,f=0,p=0,y=0,m=r[t++],w=new Int32Array(4096),b=null;;){for(;f<16&&m!==0;)p|=r[t++]<<f,f+=8,m===1?m=r[t++]:--m;if(f<c)break;var _=p&h;if(p>>=c,f-=c,_!==s){if(_===l)break;for(var v=_<o?_:b,A=0,C=v;C>s;)C=w[C]>>8,++A;var S=C;if(y+A+(v!==_?1:0)>n)return void $r.log("Warning, gif stream longer than expected.");e[y++]=S;var O=y+=A;for(v!==_&&(e[y++]=S),C=v;A--;)C=w[C],e[--O]=255&C,C>>=8;b!==null&&o<4096&&(w[o++]=b<<8|S,o>=h+1&&c<12&&(++c,h=h<<1|1)),b=_}else o=l+1,h=(1<<(c=i+1))-1,b=null}return y!==n&&$r.log("Warning, gif stream shorter than expected."),e}function Qv(r){var t,e,n,i,s,l=Math.floor,o=new Array(64),c=new Array(64),h=new Array(64),f=new Array(64),p=new Array(65535),y=new Array(65535),m=new Array(64),w=new Array(64),b=[],_=0,v=7,A=new Array(64),C=new Array(64),S=new Array(64),O=new Array(256),q=new Array(2048),H=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Q=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],dt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],nt=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],B=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Z=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],mt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function it(R,K){for(var rt=0,pt=0,ct=new Array,F=1;F<=16;F++){for(var j=1;j<=R[F];j++)ct[K[pt]]=[],ct[K[pt]][0]=rt,ct[K[pt]][1]=F,pt++,rt++;rt*=2}return ct}function st(R){for(var K=R[0],rt=R[1]-1;rt>=0;)K&1<<rt&&(_|=1<<v),rt--,--v<0&&(_==255?(vt(255),vt(0)):vt(_),v=7,_=0)}function vt(R){b.push(R)}function wt(R){vt(R>>8&255),vt(255&R)}function Ft(R,K,rt,pt,ct){for(var F,j=ct[0],ht=ct[240],ot=(function(z,_t){var kt,Ct,$t,le,re,fe,Ce,De,Fe,ln,Ue=0;for(Fe=0;Fe<8;++Fe){kt=z[Ue],Ct=z[Ue+1],$t=z[Ue+2],le=z[Ue+3],re=z[Ue+4],fe=z[Ue+5],Ce=z[Ue+6];var Xn=kt+(De=z[Ue+7]),Xe=kt-De,rn=Ct+Ce,sn=Ct-Ce,Ee=$t+fe,Je=$t-fe,Gn=le+re,un=le-re,ve=Xn+Gn,Jn=Xn-Gn,gn=rn+Ee,Ke=rn-Ee;z[Ue]=ve+gn,z[Ue+4]=ve-gn;var Vn=.707106781*(Ke+Jn);z[Ue+2]=Jn+Vn,z[Ue+6]=Jn-Vn;var Ms=.382683433*((ve=un+Je)-(Ke=sn+Xe)),$i=.5411961*ve+Ms,La=1.306562965*Ke+Ms,Fi=.707106781*(gn=Je+sn),nn=Xe+Fi,fa=Xe-Fi;z[Ue+5]=fa+$i,z[Ue+3]=fa-$i,z[Ue+1]=nn+La,z[Ue+7]=nn-La,Ue+=8}for(Ue=0,Fe=0;Fe<8;++Fe){kt=z[Ue],Ct=z[Ue+8],$t=z[Ue+16],le=z[Ue+24],re=z[Ue+32],fe=z[Ue+40],Ce=z[Ue+48];var Fs=kt+(De=z[Ue+56]),Bn=kt-De,sr=Ct+Ce,Or=Ct-Ce,qr=$t+fe,Jr=$t-fe,da=le+re,as=le-re,Wn=Fs+da,dr=Fs-da,Hr=sr+qr,Xi=sr-qr;z[Ue]=Wn+Hr,z[Ue+32]=Wn-Hr;var Xs=.707106781*(Xi+dr);z[Ue+16]=dr+Xs,z[Ue+48]=dr-Xs;var xs=.382683433*((Wn=as+Jr)-(Xi=Or+Bn)),Ys=.5411961*Wn+xs,Bi=1.306562965*Xi+xs,no=.707106781*(Hr=Jr+Or),Bs=Bn+no,nr=Bn-no;z[Ue+40]=nr+Ys,z[Ue+24]=nr-Ys,z[Ue+8]=Bs+Bi,z[Ue+56]=Bs-Bi,Ue++}for(Fe=0;Fe<64;++Fe)ln=z[Fe]*_t[Fe],m[Fe]=ln>0?ln+.5|0:ln-.5|0;return m})(R,K),lt=0;lt<64;++lt)w[H[lt]]=ot[lt];var ft=w[0]-rt;rt=w[0],ft==0?st(pt[0]):(st(pt[y[F=32767+ft]]),st(p[F]));for(var Mt=63;Mt>0&&w[Mt]==0;)Mt--;if(Mt==0)return st(j),rt;for(var W,tt=1;tt<=Mt;){for(var X=tt;w[tt]==0&&tt<=Mt;)++tt;var P=tt-X;if(P>=16){W=P>>4;for(var k=1;k<=W;++k)st(ht);P&=15}F=32767+w[tt],st(ct[(P<<4)+y[F]]),st(p[F]),tt++}return Mt!=63&&st(j),rt}function $(R){R=Math.min(Math.max(R,1),100),s!=R&&((function(K){for(var rt=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],pt=0;pt<64;pt++){var ct=l((rt[pt]*K+50)/100);ct=Math.min(Math.max(ct,1),255),o[H[pt]]=ct}for(var F=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],j=0;j<64;j++){var ht=l((F[j]*K+50)/100);ht=Math.min(Math.max(ht,1),255),c[H[j]]=ht}for(var ot=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],lt=0,ft=0;ft<8;ft++)for(var Mt=0;Mt<8;Mt++)h[lt]=1/(o[H[lt]]*ot[ft]*ot[Mt]*8),f[lt]=1/(c[H[lt]]*ot[ft]*ot[Mt]*8),lt++})(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),s=R)}this.encode=function(R,K){K&&$(K),b=new Array,_=0,v=7,wt(65496),wt(65504),wt(16),vt(74),vt(70),vt(73),vt(70),vt(0),vt(1),vt(1),vt(0),wt(1),wt(1),vt(0),vt(0),(function(){wt(65499),wt(132),vt(0);for(var Ct=0;Ct<64;Ct++)vt(o[Ct]);vt(1);for(var $t=0;$t<64;$t++)vt(c[$t])})(),(function(Ct,$t){wt(65472),wt(17),vt(8),wt($t),wt(Ct),vt(3),vt(1),vt(17),vt(0),vt(2),vt(17),vt(1),vt(3),vt(17),vt(1)})(R.width,R.height),(function(){wt(65476),wt(418),vt(0);for(var Ct=0;Ct<16;Ct++)vt(Q[Ct+1]);for(var $t=0;$t<=11;$t++)vt(I[$t]);vt(16);for(var le=0;le<16;le++)vt(dt[le+1]);for(var re=0;re<=161;re++)vt(nt[re]);vt(1);for(var fe=0;fe<16;fe++)vt(B[fe+1]);for(var Ce=0;Ce<=11;Ce++)vt(Z[Ce]);vt(17);for(var De=0;De<16;De++)vt(D[De+1]);for(var Fe=0;Fe<=161;Fe++)vt(mt[Fe])})(),wt(65498),wt(12),vt(3),vt(1),vt(0),vt(2),vt(17),vt(3),vt(17),vt(0),vt(63),vt(0);var rt=0,pt=0,ct=0;_=0,v=7,this.encode.displayName="_encode_";for(var F,j,ht,ot,lt,ft,Mt,W,tt,X=R.data,P=R.width,k=R.height,z=4*P,_t=0;_t<k;){for(F=0;F<z;){for(lt=z*_t+F,Mt=-1,W=0,tt=0;tt<64;tt++)ft=lt+(W=tt>>3)*z+(Mt=4*(7&tt)),_t+W>=k&&(ft-=z*(_t+1+W-k)),F+Mt>=z&&(ft-=F+Mt-z+4),j=X[ft++],ht=X[ft++],ot=X[ft++],A[tt]=(q[j]+q[ht+256|0]+q[ot+512|0]>>16)-128,C[tt]=(q[j+768|0]+q[ht+1024|0]+q[ot+1280|0]>>16)-128,S[tt]=(q[j+1280|0]+q[ht+1536|0]+q[ot+1792|0]>>16)-128;rt=Ft(A,h,rt,t,n),pt=Ft(C,f,pt,e,i),ct=Ft(S,f,ct,e,i),F+=32}_t+=8}if(v>=0){var kt=[];kt[1]=v+1,kt[0]=(1<<v+1)-1,st(kt)}return wt(65497),new Uint8Array(b)},r=r||50,(function(){for(var R=String.fromCharCode,K=0;K<256;K++)O[K]=R(K)})(),t=it(Q,I),e=it(B,Z),n=it(dt,nt),i=it(D,mt),(function(){for(var R=1,K=2,rt=1;rt<=15;rt++){for(var pt=R;pt<K;pt++)y[32767+pt]=rt,p[32767+pt]=[],p[32767+pt][1]=rt,p[32767+pt][0]=pt;for(var ct=-(K-1);ct<=-R;ct++)y[32767+ct]=rt,p[32767+ct]=[],p[32767+ct][1]=rt,p[32767+ct][0]=K-1+ct;R<<=1,K<<=1}})(),(function(){for(var R=0;R<256;R++)q[R]=19595*R,q[R+256|0]=38470*R,q[R+512|0]=7471*R+32768,q[R+768|0]=-11059*R,q[R+1024|0]=-21709*R,q[R+1280|0]=32768*R+8421375,q[R+1536|0]=-27439*R,q[R+1792|0]=-5329*R})(),$(r)}function fl(r,t){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function i3(r){function t(I){if(!I)throw Error("assert :P")}function e(I,dt,nt){for(var B=0;4>B;B++)if(I[dt+B]!=nt.charCodeAt(B))return!0;return!1}function n(I,dt,nt,B,Z){for(var D=0;D<Z;D++)I[dt+D]=nt[B+D]}function i(I,dt,nt,B){for(var Z=0;Z<B;Z++)I[dt+Z]=nt}function s(I){return new Int32Array(I)}function l(I,dt){for(var nt=[],B=0;B<I;B++)nt.push(new dt);return nt}function o(I,dt){var nt=[];return(function B(Z,D,mt){for(var it=mt[D],st=0;st<it&&(Z.push(mt.length>D+1?[]:new dt),!(mt.length<D+1));st++)B(Z[st],D+1,mt)})(nt,0,I),nt}var c=function(){var I=this;function dt(x,N){for(var G=1<<N-1>>>0;x&G;)G>>>=1;return G?(x&G-1)+G:x}function nt(x,N,G,et,yt){t(!(et%G));do x[N+(et-=G)]=yt;while(0<et)}function B(x,N,G,et,yt){if(t(2328>=yt),512>=yt)var xt=s(512);else if((xt=s(yt))==null)return 0;return(function(At,Et,Nt,Pt,Wt,se){var Dt,Xt,ee=Et,pe=1<<Nt,ne=s(16),de=s(16);for(t(Wt!=0),t(Pt!=null),t(At!=null),t(0<Nt),Xt=0;Xt<Wt;++Xt){if(15<Pt[Xt])return 0;++ne[Pt[Xt]]}if(ne[0]==Wt)return 0;for(de[1]=0,Dt=1;15>Dt;++Dt){if(ne[Dt]>1<<Dt)return 0;de[Dt+1]=de[Dt]+ne[Dt]}for(Xt=0;Xt<Wt;++Xt)Dt=Pt[Xt],0<Pt[Xt]&&(se[de[Dt]++]=Xt);if(de[15]==1)return(Pt=new Z).g=0,Pt.value=se[0],nt(At,ee,1,pe,Pt),pe;var be,Oe=-1,Ae=pe-1,tn=0,Ve=1,Sn=1,Ye=1<<Nt;for(Xt=0,Dt=1,Wt=2;Dt<=Nt;++Dt,Wt<<=1){if(Ve+=Sn<<=1,0>(Sn-=ne[Dt]))return 0;for(;0<ne[Dt];--ne[Dt])(Pt=new Z).g=Dt,Pt.value=se[Xt++],nt(At,ee+tn,Wt,Ye,Pt),tn=dt(tn,Dt)}for(Dt=Nt+1,Wt=2;15>=Dt;++Dt,Wt<<=1){if(Ve+=Sn<<=1,0>(Sn-=ne[Dt]))return 0;for(;0<ne[Dt];--ne[Dt]){if(Pt=new Z,(tn&Ae)!=Oe){for(ee+=Ye,be=1<<(Oe=Dt)-Nt;15>Oe&&!(0>=(be-=ne[Oe]));)++Oe,be<<=1;pe+=Ye=1<<(be=Oe-Nt),At[Et+(Oe=tn&Ae)].g=be+Nt,At[Et+Oe].value=ee-Et-Oe}Pt.g=Dt-Nt,Pt.value=se[Xt++],nt(At,ee+(tn>>Nt),Wt,Ye,Pt),tn=dt(tn,Dt)}}return Ve!=2*de[15]-1?0:pe})(x,N,G,et,yt,xt)}function Z(){this.value=this.g=0}function D(){this.value=this.g=0}function mt(){this.G=l(5,Z),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Sa,D)}function it(x,N,G,et){t(x!=null),t(N!=null),t(2147483648>et),x.Ca=254,x.I=0,x.b=-8,x.Ka=0,x.oa=N,x.pa=G,x.Jd=N,x.Yc=G+et,x.Zc=4<=et?G+et-4+1:G,j(x)}function st(x,N){for(var G=0;0<N--;)G|=ot(x,128)<<N;return G}function vt(x,N){var G=st(x,N);return ht(x)?-G:G}function wt(x,N,G,et){var yt,xt=0;for(t(x!=null),t(N!=null),t(4294967288>et),x.Sb=et,x.Ra=0,x.u=0,x.h=0,4<et&&(et=4),yt=0;yt<et;++yt)xt+=N[G+yt]<<8*yt;x.Ra=xt,x.bb=et,x.oa=N,x.pa=G}function Ft(x){for(;8<=x.u&&x.bb<x.Sb;)x.Ra>>>=8,x.Ra+=x.oa[x.pa+x.bb]<<zs-8>>>0,++x.bb,x.u-=8;pt(x)&&(x.h=1,x.u=0)}function $(x,N){if(t(0<=N),!x.h&&N<=qn){var G=rt(x)&Zr[N];return x.u+=N,Ft(x),G}return x.h=1,x.u=0}function R(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function K(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function rt(x){return x.Ra>>>(x.u&zs-1)>>>0}function pt(x){return t(x.bb<=x.Sb),x.h||x.bb==x.Sb&&x.u>zs}function ct(x,N){x.u=N,x.h=pt(x)}function F(x){x.u>=us&&(t(x.u>=us),Ft(x))}function j(x){t(x!=null&&x.oa!=null),x.pa<x.Zc?(x.I=(x.oa[x.pa++]|x.I<<8)>>>0,x.b+=8):(t(x!=null&&x.oa!=null),x.pa<x.Yc?(x.b+=8,x.I=x.oa[x.pa++]|x.I<<8):x.Ka?x.b=0:(x.I<<=8,x.b+=8,x.Ka=1))}function ht(x){return st(x,1)}function ot(x,N){var G=x.Ca;0>x.b&&j(x);var et=x.b,yt=G*N>>>8,xt=(x.I>>>et>yt)+0;for(xt?(G-=yt,x.I-=yt+1<<et>>>0):G=yt+1,et=G,yt=0;256<=et;)yt+=8,et>>=8;return et=7^yt+mo[et],x.b-=et,x.Ca=(G<<et)-1,xt}function lt(x,N,G){x[N+0]=G>>24&255,x[N+1]=G>>16&255,x[N+2]=G>>8&255,x[N+3]=255&G}function ft(x,N){return x[N+0]|x[N+1]<<8}function Mt(x,N){return ft(x,N)|x[N+2]<<16}function W(x,N){return ft(x,N)|ft(x,N+2)<<16}function tt(x,N){var G=1<<N;return t(x!=null),t(0<N),x.X=s(G),x.X==null?0:(x.Mb=32-N,x.Xa=N,1)}function X(x,N){t(x!=null),t(N!=null),t(x.Xa==N.Xa),n(N.X,0,x.X,0,1<<N.Xa)}function P(){this.X=[],this.Xa=this.Mb=0}function k(x,N,G,et){t(G!=null),t(et!=null);var yt=G[0],xt=et[0];return yt==0&&(yt=(x*xt+N/2)/N),xt==0&&(xt=(N*yt+x/2)/x),0>=yt||0>=xt?0:(G[0]=yt,et[0]=xt,1)}function z(x,N){return x+(1<<N)-1>>>N}function _t(x,N){return((4278255360&x)+(4278255360&N)>>>0&4278255360)+((16711935&x)+(16711935&N)>>>0&16711935)>>>0}function kt(x,N){I[N]=function(G,et,yt,xt,At,Et,Nt){var Pt;for(Pt=0;Pt<At;++Pt){var Wt=I[x](Et[Nt+Pt-1],yt,xt+Pt);Et[Nt+Pt]=_t(G[et+Pt],Wt)}}}function Ct(){this.ud=this.hd=this.jd=0}function $t(x,N){return((4278124286&(x^N))>>>1)+(x&N)>>>0}function le(x){return 0<=x&&256>x?x:0>x?0:255<x?255:void 0}function re(x,N){return le(x+(x-N+.5>>1))}function fe(x,N,G){return Math.abs(N-G)-Math.abs(x-G)}function Ce(x,N,G,et,yt,xt,At){for(et=xt[At-1],G=0;G<yt;++G)xt[At+G]=et=_t(x[N+G],et)}function De(x,N,G,et,yt){var xt;for(xt=0;xt<G;++xt){var At=x[N+xt],Et=At>>8&255,Nt=16711935&(Nt=(Nt=16711935&At)+((Et<<16)+Et));et[yt+xt]=(4278255360&At)+Nt>>>0}}function Fe(x,N){N.jd=255&x,N.hd=x>>8&255,N.ud=x>>16&255}function ln(x,N,G,et,yt,xt){var At;for(At=0;At<et;++At){var Et=N[G+At],Nt=Et>>>8,Pt=Et,Wt=255&(Wt=(Wt=Et>>>16)+((x.jd<<24>>24)*(Nt<<24>>24)>>>5));Pt=255&(Pt=(Pt+=(x.hd<<24>>24)*(Nt<<24>>24)>>>5)+((x.ud<<24>>24)*(Wt<<24>>24)>>>5)),yt[xt+At]=(4278255360&Et)+(Wt<<16)+Pt}}function Ue(x,N,G,et,yt){I[N]=function(xt,At,Et,Nt,Pt,Wt,se,Dt,Xt){for(Nt=se;Nt<Dt;++Nt)for(se=0;se<Xt;++se)Pt[Wt++]=yt(Et[et(xt[At++])])},I[x]=function(xt,At,Et,Nt,Pt,Wt,se){var Dt=8>>xt.b,Xt=xt.Ea,ee=xt.K[0],pe=xt.w;if(8>Dt)for(xt=(1<<xt.b)-1,pe=(1<<Dt)-1;At<Et;++At){var ne,de=0;for(ne=0;ne<Xt;++ne)ne&xt||(de=et(Nt[Pt++])),Wt[se++]=yt(ee[de&pe]),de>>=Dt}else I["VP8LMapColor"+G](Nt,Pt,ee,pe,Wt,se,At,Et,Xt)}}function Xn(x,N,G,et,yt){for(G=N+G;N<G;){var xt=x[N++];et[yt++]=xt>>16&255,et[yt++]=xt>>8&255,et[yt++]=255&xt}}function Xe(x,N,G,et,yt){for(G=N+G;N<G;){var xt=x[N++];et[yt++]=xt>>16&255,et[yt++]=xt>>8&255,et[yt++]=255&xt,et[yt++]=xt>>24&255}}function rn(x,N,G,et,yt){for(G=N+G;N<G;){var xt=(At=x[N++])>>16&240|At>>12&15,At=240&At|At>>28&15;et[yt++]=xt,et[yt++]=At}}function sn(x,N,G,et,yt){for(G=N+G;N<G;){var xt=(At=x[N++])>>16&248|At>>13&7,At=At>>5&224|At>>3&31;et[yt++]=xt,et[yt++]=At}}function Ee(x,N,G,et,yt){for(G=N+G;N<G;){var xt=x[N++];et[yt++]=255&xt,et[yt++]=xt>>8&255,et[yt++]=xt>>16&255}}function Je(x,N,G,et,yt,xt){if(xt==0)for(G=N+G;N<G;)lt(et,((xt=x[N++])[0]>>24|xt[1]>>8&65280|xt[2]<<8&16711680|xt[3]<<24)>>>0),yt+=32;else n(et,yt,x,N,G)}function Gn(x,N){I[N][0]=I[x+"0"],I[N][1]=I[x+"1"],I[N][2]=I[x+"2"],I[N][3]=I[x+"3"],I[N][4]=I[x+"4"],I[N][5]=I[x+"5"],I[N][6]=I[x+"6"],I[N][7]=I[x+"7"],I[N][8]=I[x+"8"],I[N][9]=I[x+"9"],I[N][10]=I[x+"10"],I[N][11]=I[x+"11"],I[N][12]=I[x+"12"],I[N][13]=I[x+"13"],I[N][14]=I[x+"0"],I[N][15]=I[x+"0"]}function un(x){return x==Mc||x==_h||x==Yu||x==Ah}function ve(){this.eb=[],this.size=this.A=this.fb=0}function Jn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function gn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ve,this.f.kb=new Jn,this.sd=null}function Ke(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Vn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ms(x){return alert("todo:WebPSamplerProcessPlane"),x.T}function $i(x,N){var G=x.T,et=N.ba.f.RGBA,yt=et.eb,xt=et.fb+x.ka*et.A,At=ps[N.ba.S],Et=x.y,Nt=x.O,Pt=x.f,Wt=x.N,se=x.ea,Dt=x.W,Xt=N.cc,ee=N.dc,pe=N.Mc,ne=N.Nc,de=x.ka,be=x.ka+x.T,Oe=x.U,Ae=Oe+1>>1;for(de==0?At(Et,Nt,null,null,Pt,Wt,se,Dt,Pt,Wt,se,Dt,yt,xt,null,null,Oe):(At(N.ec,N.fc,Et,Nt,Xt,ee,pe,ne,Pt,Wt,se,Dt,yt,xt-et.A,yt,xt,Oe),++G);de+2<be;de+=2)Xt=Pt,ee=Wt,pe=se,ne=Dt,Wt+=x.Rc,Dt+=x.Rc,xt+=2*et.A,At(Et,(Nt+=2*x.fa)-x.fa,Et,Nt,Xt,ee,pe,ne,Pt,Wt,se,Dt,yt,xt-et.A,yt,xt,Oe);return Nt+=x.fa,x.j+be<x.o?(n(N.ec,N.fc,Et,Nt,Oe),n(N.cc,N.dc,Pt,Wt,Ae),n(N.Mc,N.Nc,se,Dt,Ae),G--):1&be||At(Et,Nt,null,null,Pt,Wt,se,Dt,Pt,Wt,se,Dt,yt,xt+et.A,null,null,Oe),G}function La(x,N,G){var et=x.F,yt=[x.J];if(et!=null){var xt=x.U,At=N.ba.S,Et=At==Pc||At==Yu;N=N.ba.f.RGBA;var Nt=[0],Pt=x.ka;Nt[0]=x.T,x.Kb&&(Pt==0?--Nt[0]:(--Pt,yt[0]-=x.width),x.j+x.ka+x.T==x.o&&(Nt[0]=x.o-x.j-Pt));var Wt=N.eb;Pt=N.fb+Pt*N.A,x=qe(et,yt[0],x.width,xt,Nt,Wt,Pt+(Et?0:3),N.A),t(G==Nt),x&&un(At)&&Be(Wt,Pt,Et,xt,Nt,N.A)}return 0}function Fi(x){var N=x.ma,G=N.ba.S,et=11>G,yt=G==Ts||G==Fa||G==Pc||G==Xu||G==12||un(G);if(N.memory=null,N.Ib=null,N.Jb=null,N.Nd=null,!po(N.Oa,x,yt?11:12))return 0;if(yt&&un(G)&&Tl(),x.da)alert("todo:use_scaling");else{if(et){if(N.Ib=Ms,x.Kb){if(G=x.U+1>>1,N.memory=s(x.U+2*G),N.memory==null)return 0;N.ec=N.memory,N.fc=0,N.cc=N.ec,N.dc=N.fc+x.U,N.Mc=N.cc,N.Nc=N.dc+G,N.Ib=$i,Tl()}}else alert("todo:EmitYUV");yt&&(N.Jb=La,et&&Ss())}if(et&&!Bl){for(x=0;256>x;++x)ms[x]=89858*(x-128)+Ju>>qa,o0[x]=-22014*(x-128)+Ju,Cp[x]=-45773*(x-128),Nh[x]=113618*(x-128)+Ju>>qa;for(x=wu;x<Fl;++x)N=76283*(x-16)+Ju>>qa,l0[x-wu]=vn(N,255),u0[x-wu]=vn(N+8>>4,15);Bl=1}return 1}function nn(x){var N=x.ma,G=x.U,et=x.T;return t(!(1&x.ka)),0>=G||0>=et?0:(G=N.Ib(x,N),N.Jb!=null&&N.Jb(x,N,G),N.Dc+=G,1)}function fa(x){x.ma.memory=null}function Fs(x,N,G,et){return $(x,8)!=47?0:(N[0]=$(x,14)+1,G[0]=$(x,14)+1,et[0]=$(x,1),$(x,3)!=0?0:!x.h)}function Bn(x,N){if(4>x)return x+1;var G=x-2>>1;return(2+(1&x)<<G)+$(N,G)+1}function sr(x,N){return 120<N?N-120:1<=(G=((G=Ia[N-1])>>4)*x+(8-(15&G)))?G:1;var G}function Or(x,N,G){var et=rt(G),yt=x[N+=255&et].g-8;return 0<yt&&(ct(G,G.u+8),et=rt(G),N+=x[N].value,N+=et&(1<<yt)-1),ct(G,G.u+x[N].g),x[N].value}function qr(x,N,G){return G.g+=x.g,G.value+=x.value<<N>>>0,t(8>=G.g),x.g}function Jr(x,N,G){var et=x.xc;return t((N=et==0?0:x.vc[x.md*(G>>et)+(N>>et)])<x.Wb),x.Ya[N]}function da(x,N,G,et){var yt=x.ab,xt=x.c*N,At=x.C;N=At+N;var Et=G,Nt=et;for(et=x.Ta,G=x.Ua;0<yt--;){var Pt=x.gc[yt],Wt=At,se=N,Dt=Et,Xt=Nt,ee=(Nt=et,Et=G,Pt.Ea);switch(t(Wt<se),t(se<=Pt.nc),Pt.hc){case 2:yr(Dt,Xt,(se-Wt)*ee,Nt,Et);break;case 0:var pe=Wt,ne=se,de=Nt,be=Et,Oe=(Ye=Pt).Ea;pe==0&&(Do(Dt,Xt,null,null,1,de,be),Ce(Dt,Xt+1,0,0,Oe-1,de,be+1),Xt+=Oe,be+=Oe,++pe);for(var Ae=1<<Ye.b,tn=Ae-1,Ve=z(Oe,Ye.b),Sn=Ye.K,Ye=Ye.w+(pe>>Ye.b)*Ve;pe<ne;){var $n=Sn,Wr=Ye,Rn=1;for(rl(Dt,Xt,de,be-Oe,1,de,be);Rn<Oe;){var We=(Rn&~tn)+Ae;We>Oe&&(We=Oe),(0,E[$n[Wr++]>>8&15])(Dt,Xt+ +Rn,de,be+Rn-Oe,We-Rn,de,be+Rn),Rn=We}Xt+=Oe,be+=Oe,++pe&tn||(Ye+=Ve)}se!=Pt.nc&&n(Nt,Et-ee,Nt,Et+(se-Wt-1)*ee,ee);break;case 1:for(ee=Dt,ne=Xt,Oe=(Dt=Pt.Ea)-(be=Dt&~(de=(Xt=1<<Pt.b)-1)),pe=z(Dt,Pt.b),Ae=Pt.K,Pt=Pt.w+(Wt>>Pt.b)*pe;Wt<se;){for(tn=Ae,Ve=Pt,Sn=new Ct,Ye=ne+be,$n=ne+Dt;ne<Ye;)Fe(tn[Ve++],Sn),M(Sn,ee,ne,Xt,Nt,Et),ne+=Xt,Et+=Xt;ne<$n&&(Fe(tn[Ve++],Sn),M(Sn,ee,ne,Oe,Nt,Et),ne+=Oe,Et+=Oe),++Wt&de||(Pt+=pe)}break;case 3:if(Dt==Nt&&Xt==Et&&0<Pt.b){for(ne=Nt,Dt=ee=Et+(se-Wt)*ee-(be=(se-Wt)*z(Pt.Ea,Pt.b)),Xt=Nt,de=Et,pe=[],be=(Oe=be)-1;0<=be;--be)pe[be]=Xt[de+be];for(be=Oe-1;0<=be;--be)ne[Dt+be]=pe[be];Rl(Pt,Wt,se,Nt,ee,Nt,Et)}else Rl(Pt,Wt,se,Dt,Xt,Nt,Et)}Et=et,Nt=G}Nt!=G&&n(et,G,Et,Nt,xt)}function as(x,N){var G=x.V,et=x.Ba+x.c*x.C,yt=N-x.C;if(t(N<=x.l.o),t(16>=yt),0<yt){var xt=x.l,At=x.Ta,Et=x.Ua,Nt=xt.width;if(da(x,yt,G,et),yt=Et=[Et],t((G=x.C)<(et=N)),t(xt.v<xt.va),et>xt.o&&(et=xt.o),G<xt.j){var Pt=xt.j-G;G=xt.j,yt[0]+=Pt*Nt}if(G>=et?G=0:(yt[0]+=4*xt.v,xt.ka=G-xt.j,xt.U=xt.va-xt.v,xt.T=et-G,G=1),G){if(Et=Et[0],11>(G=x.ca).S){var Wt=G.f.RGBA,se=(et=G.S,yt=xt.U,xt=xt.T,Pt=Wt.eb,Wt.A),Dt=xt;for(Wt=Wt.fb+x.Ma*Wt.A;0<Dt--;){var Xt=At,ee=Et,pe=yt,ne=Pt,de=Wt;switch(et){case wh:V(Xt,ee,pe,ne,de);break;case Ts:J(Xt,ee,pe,ne,de);break;case Mc:J(Xt,ee,pe,ne,de),Be(ne,de,0,pe,1,0);break;case xh:Tt(Xt,ee,pe,ne,de);break;case Fa:Je(Xt,ee,pe,ne,de,1);break;case _h:Je(Xt,ee,pe,ne,de,1),Be(ne,de,0,pe,1,0);break;case Pc:Je(Xt,ee,pe,ne,de,0);break;case Yu:Je(Xt,ee,pe,ne,de,0),Be(ne,de,1,pe,1,0);break;case Xu:ut(Xt,ee,pe,ne,de);break;case Ah:ut(Xt,ee,pe,ne,de),ke(ne,de,pe,1,0);break;case Ll:bt(Xt,ee,pe,ne,de);break;default:t(0)}Et+=Nt,Wt+=se}x.Ma+=xt}else alert("todo:EmitRescaledRowsYUVA");t(x.Ma<=G.height)}}x.C=N,t(x.C<=x.i)}function Wn(x){var N;if(0<x.ua)return 0;for(N=0;N<x.Wb;++N){var G=x.Ya[N].G,et=x.Ya[N].H;if(0<G[1][et[1]+0].g||0<G[2][et[2]+0].g||0<G[3][et[3]+0].g)return 0}return 1}function dr(x,N,G,et,yt,xt){if(x.Z!=0){var At=x.qd,Et=x.rd;for(t(il[x.Z]!=null);N<G;++N)il[x.Z](At,Et,et,yt,et,yt,xt),At=et,Et=yt,yt+=xt;x.qd=At,x.rd=Et}}function Hr(x,N){var G=x.l.ma,et=G.Z==0||G.Z==1?x.l.j:x.C;if(et=x.C<et?et:x.C,t(N<=x.l.o),N>et){var yt=x.l.width,xt=G.ca,At=G.tb+yt*et,Et=x.V,Nt=x.Ba+x.c*et,Pt=x.gc;t(x.ab==1),t(Pt[0].hc==3),Ii(Pt[0],et,N,Et,Nt,xt,At),dr(G,et,N,xt,At,yt)}x.C=x.Ma=N}function Xi(x,N,G,et,yt,xt,At){var Et=x.$/et,Nt=x.$%et,Pt=x.m,Wt=x.s,se=G+x.$,Dt=se;yt=G+et*yt;var Xt=G+et*xt,ee=280+Wt.ua,pe=x.Pb?Et:16777216,ne=0<Wt.ua?Wt.Wa:null,de=Wt.wc,be=se<Xt?Jr(Wt,Nt,Et):null;t(x.C<xt),t(Xt<=yt);var Oe=!1;t:for(;;){for(;Oe||se<Xt;){var Ae=0;if(Et>=pe){var tn=se-G;t((pe=x).Pb),pe.wd=pe.m,pe.xd=tn,0<pe.s.ua&&X(pe.s.Wa,pe.s.vb),pe=Et+Ol}if(Nt&de||(be=Jr(Wt,Nt,Et)),t(be!=null),be.Qb&&(N[se]=be.qb,Oe=!0),!Oe)if(F(Pt),be.jc){Ae=Pt,tn=N;var Ve=se,Sn=be.pd[rt(Ae)&Sa-1];t(be.jc),256>Sn.g?(ct(Ae,Ae.u+Sn.g),tn[Ve]=Sn.value,Ae=0):(ct(Ae,Ae.u+Sn.g-256),t(256<=Sn.value),Ae=Sn.value),Ae==0&&(Oe=!0)}else Ae=Or(be.G[0],be.H[0],Pt);if(Pt.h)break;if(Oe||256>Ae){if(!Oe)if(be.nd)N[se]=(be.qb|Ae<<8)>>>0;else{if(F(Pt),Oe=Or(be.G[1],be.H[1],Pt),F(Pt),tn=Or(be.G[2],be.H[2],Pt),Ve=Or(be.G[3],be.H[3],Pt),Pt.h)break;N[se]=(Ve<<24|Oe<<16|Ae<<8|tn)>>>0}if(Oe=!1,++se,++Nt>=et&&(Nt=0,++Et,At!=null&&Et<=xt&&!(Et%16)&&At(x,Et),ne!=null))for(;Dt<se;)Ae=N[Dt++],ne.X[(506832829*Ae&4294967295)>>>ne.Mb]=Ae}else if(280>Ae){if(Ae=Bn(Ae-256,Pt),tn=Or(be.G[4],be.H[4],Pt),F(Pt),tn=sr(et,tn=Bn(tn,Pt)),Pt.h)break;if(se-G<tn||yt-se<Ae)break t;for(Ve=0;Ve<Ae;++Ve)N[se+Ve]=N[se+Ve-tn];for(se+=Ae,Nt+=Ae;Nt>=et;)Nt-=et,++Et,At!=null&&Et<=xt&&!(Et%16)&&At(x,Et);if(t(se<=yt),Nt&de&&(be=Jr(Wt,Nt,Et)),ne!=null)for(;Dt<se;)Ae=N[Dt++],ne.X[(506832829*Ae&4294967295)>>>ne.Mb]=Ae}else{if(!(Ae<ee))break t;for(Oe=Ae-280,t(ne!=null);Dt<se;)Ae=N[Dt++],ne.X[(506832829*Ae&4294967295)>>>ne.Mb]=Ae;Ae=se,t(!(Oe>>>(tn=ne).Xa)),N[Ae]=tn.X[Oe],Oe=!0}Oe||t(Pt.h==pt(Pt))}if(x.Pb&&Pt.h&&se<yt)t(x.m.h),x.a=5,x.m=x.wd,x.$=x.xd,0<x.s.ua&&X(x.s.vb,x.s.Wa);else{if(Pt.h)break t;At?.(x,Et>xt?xt:Et),x.a=0,x.$=se-G}return 1}return x.a=3,0}function Xs(x){t(x!=null),x.vc=null,x.yc=null,x.Ya=null;var N=x.Wa;N!=null&&(N.X=null),x.vb=null,t(x!=null)}function xs(){var x=new hn;return x==null?null:(x.a=0,x.xb=Kf,Gn("Predictor","VP8LPredictors"),Gn("Predictor","VP8LPredictors_C"),Gn("PredictorAdd","VP8LPredictorsAdd"),Gn("PredictorAdd","VP8LPredictorsAdd_C"),yr=De,M=ln,V=Xn,J=Xe,ut=rn,bt=sn,Tt=Ee,I.VP8LMapColor32b=cs,I.VP8LMapColor8b=Ei,x)}function Ys(x,N,G,et,yt){var xt=1,At=[x],Et=[N],Nt=et.m,Pt=et.s,Wt=null,se=0;t:for(;;){if(G)for(;xt&&$(Nt,1);){var Dt=At,Xt=Et,ee=et,pe=1,ne=ee.m,de=ee.gc[ee.ab],be=$(ne,2);if(ee.Oc&1<<be)xt=0;else{switch(ee.Oc|=1<<be,de.hc=be,de.Ea=Dt[0],de.nc=Xt[0],de.K=[null],++ee.ab,t(4>=ee.ab),be){case 0:case 1:de.b=$(ne,3)+2,pe=Ys(z(de.Ea,de.b),z(de.nc,de.b),0,ee,de.K),de.K=de.K[0];break;case 3:var Oe,Ae=$(ne,8)+1,tn=16<Ae?0:4<Ae?1:2<Ae?2:3;if(Dt[0]=z(de.Ea,tn),de.b=tn,Oe=pe=Ys(Ae,1,0,ee,de.K)){var Ve,Sn=Ae,Ye=de,$n=1<<(8>>Ye.b),Wr=s($n);if(Wr==null)Oe=0;else{var Rn=Ye.K[0],We=Ye.w;for(Wr[0]=Ye.K[0][0],Ve=1;Ve<1*Sn;++Ve)Wr[Ve]=_t(Rn[We+Ve],Wr[Ve-1]);for(;Ve<4*$n;++Ve)Wr[Ve]=0;Ye.K[0]=null,Ye.K[0]=Wr,Oe=1}}pe=Oe;break;case 2:break;default:t(0)}xt=pe}}if(At=At[0],Et=Et[0],xt&&$(Nt,1)&&!(xt=1<=(se=$(Nt,4))&&11>=se)){et.a=3;break t}var Ie;if(Ie=xt)e:{var ei,yn,Dn,br=et,ji=At,gs=Et,Fr=se,Ti=G,Ns=br.m,Ni=br.s,jn=[null],or=1,ni=0,fr=ja[Fr];n:for(;;){if(Ti&&$(Ns,1)){var Ui=$(Ns,3)+2,ri=z(ji,Ui),lr=z(gs,Ui),bi=ri*lr;if(!Ys(ri,lr,0,br,jn))break n;for(jn=jn[0],Ni.xc=Ui,ei=0;ei<bi;++ei){var wr=jn[ei]>>8&65535;jn[ei]=wr,wr>=or&&(or=wr+1)}}if(Ns.h)break n;for(yn=0;5>yn;++yn){var ki=vu[yn];!yn&&0<Fr&&(ki+=1<<Fr),ni<ki&&(ni=ki)}var Ri=l(or*fr,Z),Nr=or,rr=l(Nr,mt);if(rr==null)var ks=null;else t(65536>=Nr),ks=rr;var li=s(ni);if(ks==null||li==null||Ri==null){br.a=1;break n}var fn=Ri;for(ei=Dn=0;ei<or;++ei){var dn=ks[ei],ur=dn.G,sa=dn.H,Ha=0,Hs=1,Li=0;for(yn=0;5>yn;++yn){ki=vu[yn],ur[yn]=fn,sa[yn]=Dn,!yn&&0<Fr&&(ki+=1<<Fr);i:{var Il,jl=ki,Rh=br,Br=li,Xf=fn,Yf=Dn,Lh=0,sl=Rh.m,c0=$(sl,1);if(i(Br,0,0,jl),c0){var Qf=$(sl,1)+1,Zf=$(sl,1),Oh=$(sl,Zf==0?1:8);Br[Oh]=1,Qf==2&&(Br[Oh=$(sl,8)]=1);var es=1}else{var ui=s(19),jc=$(sl,4)+4;if(19<jc){Rh.a=3;var Ul=0;break i}for(Il=0;Il<jc;++Il)ui[Fc[Il]]=$(sl,3);var ec=void 0,xu=void 0,Mo=Rh,Dh=ui,nc=jl,Ph=Br,Mh=0,al=Mo.m,Jf=8,td=l(128,Z);r:for(;B(td,0,7,Dh,19);){if($(al,1)){var Tp=2+2*$(al,3);if((ec=2+$(al,Tp))>nc)break r}else ec=nc;for(xu=0;xu<nc&&ec--;){F(al);var ed=td[0+(127&rt(al))];ct(al,al.u+ed.g);var zl=ed.value;if(16>zl)Ph[xu++]=zl,zl!=0&&(Jf=zl);else{var Np=zl==16,kp=zl-16,Rp=Qu[kp],nd=$(al,Ba[kp])+Rp;if(xu+nd>nc)break r;for(var Lp=Np?Jf:0;0<nd--;)Ph[xu++]=Lp}}Mh=1;break r}Mh||(Mo.a=3),es=Mh}(es=es&&!sl.h)&&(Lh=B(Xf,Yf,8,Br,jl)),es&&Lh!=0?Ul=Lh:(Rh.a=3,Ul=0)}if(Ul==0)break n;if(Hs&&Sh[yn]==1&&(Hs=fn[Dn].g==0),Ha+=fn[Dn].g,Dn+=Ul,3>=yn){var _u,Fh=li[0];for(_u=1;_u<ki;++_u)li[_u]>Fh&&(Fh=li[_u]);Li+=Fh}}if(dn.nd=Hs,dn.Qb=0,Hs&&(dn.qb=(ur[3][sa[3]+0].value<<24|ur[1][sa[1]+0].value<<16|ur[2][sa[2]+0].value)>>>0,Ha==0&&256>ur[0][sa[0]+0].value&&(dn.Qb=1,dn.qb+=ur[0][sa[0]+0].value<<8)),dn.jc=!dn.Qb&&6>Li,dn.jc){var Uc,Fo=dn;for(Uc=0;Uc<Sa;++Uc){var ol=Uc,ll=Fo.pd[ol],Bh=Fo.G[0][Fo.H[0]+ol];256<=Bh.value?(ll.g=Bh.g+256,ll.value=Bh.value):(ll.g=0,ll.value=0,ol>>=qr(Bh,8,ll),ol>>=qr(Fo.G[1][Fo.H[1]+ol],16,ll),ol>>=qr(Fo.G[2][Fo.H[2]+ol],0,ll),qr(Fo.G[3][Fo.H[3]+ol],24,ll))}}}Ni.vc=jn,Ni.Wb=or,Ni.Ya=ks,Ni.yc=Ri,Ie=1;break e}Ie=0}if(!(xt=Ie)){et.a=3;break t}if(0<se){if(Pt.ua=1<<se,!tt(Pt.Wa,se)){et.a=1,xt=0;break t}}else Pt.ua=0;var Ih=et,Au=At,Op=Et,rc=Ih.s,ic=rc.xc;if(Ih.c=Au,Ih.i=Op,rc.md=z(Au,ic),rc.wc=ic==0?-1:(1<<ic)-1,G){et.xb=Dl;break t}if((Wt=s(At*Et))==null){et.a=1,xt=0;break t}xt=(xt=Xi(et,Wt,0,At,Et,Et,null))&&!Nt.h;break t}return xt?(yt!=null?yt[0]=Wt:(t(Wt==null),t(G)),et.$=0,G||Xs(Pt)):Xs(Pt),xt}function Bi(x,N){var G=x.c*x.i,et=G+N+16*N;return t(x.c<=N),x.V=s(et),x.V==null?(x.Ta=null,x.Ua=0,x.a=1,0):(x.Ta=x.V,x.Ua=x.Ba+G+N,1)}function no(x,N){var G=x.C,et=N-G,yt=x.V,xt=x.Ba+x.c*G;for(t(N<=x.l.o);0<et;){var At=16<et?16:et,Et=x.l.ma,Nt=x.l.width,Pt=Nt*At,Wt=Et.ca,se=Et.tb+Nt*G,Dt=x.Ta,Xt=x.Ua;da(x,At,yt,xt),wn(Dt,Xt,Wt,se,Pt),dr(Et,G,G+At,Wt,se,Nt),et-=At,yt+=At*x.c,G+=At}t(G==N),x.C=x.Ma=N}function Bs(){this.ub=this.yd=this.td=this.Rb=0}function nr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Is(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ai(){this.Yb=(function(){var x=[];return(function N(G,et,yt){for(var xt=yt[et],At=0;At<xt&&(G.push(yt.length>et+1?[]:0),!(yt.length<et+1));At++)N(G[At],et+1,yt)})(x,0,[3,11]),x})()}function Xr(){this.jb=s(3),this.Wc=o([4,8],Ai),this.Xc=o([4,17],Ai)}function Oa(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Yi(){this.ld=this.La=this.dd=this.tc=0}function js(){this.Na=this.la=0}function pa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ma(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function _l(){this.uc=this.M=this.Nb=0,this.wa=Array(new Yi),this.Y=0,this.ya=Array(new ma),this.aa=0,this.l=new Da}function Co(){this.y=s(16),this.f=s(8),this.ea=s(8)}function fu(){this.cb=this.a=0,this.sc="",this.m=new R,this.Od=new Bs,this.Kc=new nr,this.ed=new Oa,this.Qa=new Is,this.Ic=this.$c=this.Aa=0,this.D=new _l,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,R),this.ia=0,this.pb=l(4,pa),this.Pa=new Xr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Co),this.Hd=0,this.rb=Array(new js),this.sb=0,this.wa=Array(new Yi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ma),this.L=this.aa=0,this.gd=o([4,2],Yi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function vn(x,N){return 0>x?0:x>N?N:x}function Da(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Qs(){var x=new fu;return x!=null&&(x.a=0,x.sc="OK",x.cb=0,x.Xb=0,Ca||(Ca=io)),x}function Kn(x,N,G){return x.a==0&&(x.a=N,x.sc=G,x.cb=0),0}function ro(x,N,G){return 3<=G&&x[N+0]==157&&x[N+1]==1&&x[N+2]==42}function ga(x,N){if(x==null)return 0;if(x.a=0,x.sc="OK",N==null)return Kn(x,2,"null VP8Io passed to VP8GetHeaders()");var G=N.data,et=N.w,yt=N.ha;if(4>yt)return Kn(x,7,"Truncated header.");var xt=G[et+0]|G[et+1]<<8|G[et+2]<<16,At=x.Od;if(At.Rb=!(1&xt),At.td=xt>>1&7,At.yd=xt>>4&1,At.ub=xt>>5,3<At.td)return Kn(x,3,"Incorrect keyframe parameters.");if(!At.yd)return Kn(x,4,"Frame not displayable.");et+=3,yt-=3;var Et=x.Kc;if(At.Rb){if(7>yt)return Kn(x,7,"cannot parse picture header");if(!ro(G,et,yt))return Kn(x,3,"Bad code word");Et.c=16383&(G[et+4]<<8|G[et+3]),Et.Td=G[et+4]>>6,Et.i=16383&(G[et+6]<<8|G[et+5]),Et.Ud=G[et+6]>>6,et+=7,yt-=7,x.za=Et.c+15>>4,x.Ub=Et.i+15>>4,N.width=Et.c,N.height=Et.i,N.Da=0,N.j=0,N.v=0,N.va=N.width,N.o=N.height,N.da=0,N.ib=N.width,N.hb=N.height,N.U=N.width,N.T=N.height,i((xt=x.Pa).jb,0,255,xt.jb.length),t((xt=x.Qa)!=null),xt.Cb=0,xt.Bb=0,xt.Fb=1,i(xt.Zb,0,0,xt.Zb.length),i(xt.Lb,0,0,xt.Lb)}if(At.ub>yt)return Kn(x,7,"bad partition length");it(xt=x.m,G,et,At.ub),et+=At.ub,yt-=At.ub,At.Rb&&(Et.Ld=ht(xt),Et.Kd=ht(xt)),Et=x.Qa;var Nt,Pt=x.Pa;if(t(xt!=null),t(Et!=null),Et.Cb=ht(xt),Et.Cb){if(Et.Bb=ht(xt),ht(xt)){for(Et.Fb=ht(xt),Nt=0;4>Nt;++Nt)Et.Zb[Nt]=ht(xt)?vt(xt,7):0;for(Nt=0;4>Nt;++Nt)Et.Lb[Nt]=ht(xt)?vt(xt,6):0}if(Et.Bb)for(Nt=0;3>Nt;++Nt)Pt.jb[Nt]=ht(xt)?st(xt,8):255}else Et.Bb=0;if(xt.Ka)return Kn(x,3,"cannot parse segment header");if((Et=x.ed).zd=ht(xt),Et.Tb=st(xt,6),Et.wb=st(xt,3),Et.Pc=ht(xt),Et.Pc&&ht(xt)){for(Pt=0;4>Pt;++Pt)ht(xt)&&(Et.vd[Pt]=vt(xt,6));for(Pt=0;4>Pt;++Pt)ht(xt)&&(Et.od[Pt]=vt(xt,6))}if(x.L=Et.Tb==0?0:Et.zd?1:2,xt.Ka)return Kn(x,3,"cannot parse filter header");var Wt=yt;if(yt=Nt=et,et=Nt+Wt,Et=Wt,x.Xb=(1<<st(x.m,2))-1,Wt<3*(Pt=x.Xb))G=7;else{for(Nt+=3*Pt,Et-=3*Pt,Wt=0;Wt<Pt;++Wt){var se=G[yt+0]|G[yt+1]<<8|G[yt+2]<<16;se>Et&&(se=Et),it(x.Jc[+Wt],G,Nt,se),Nt+=se,Et-=se,yt+=3}it(x.Jc[+Pt],G,Nt,Et),G=Nt<et?0:5}if(G!=0)return Kn(x,G,"cannot parse partitions");for(G=st(Nt=x.m,7),yt=ht(Nt)?vt(Nt,4):0,et=ht(Nt)?vt(Nt,4):0,Et=ht(Nt)?vt(Nt,4):0,Pt=ht(Nt)?vt(Nt,4):0,Nt=ht(Nt)?vt(Nt,4):0,Wt=x.Qa,se=0;4>se;++se){if(Wt.Cb){var Dt=Wt.Zb[se];Wt.Fb||(Dt+=G)}else{if(0<se){x.pb[se]=x.pb[0];continue}Dt=G}var Xt=x.pb[se];Xt.Sc[0]=Ua[vn(Dt+yt,127)],Xt.Sc[1]=za[vn(Dt+0,127)],Xt.Eb[0]=2*Ua[vn(Dt+et,127)],Xt.Eb[1]=101581*za[vn(Dt+Et,127)]>>16,8>Xt.Eb[1]&&(Xt.Eb[1]=8),Xt.Qc[0]=Ua[vn(Dt+Pt,117)],Xt.Qc[1]=za[vn(Dt+Nt,127)],Xt.lc=Dt+Nt}if(!At.Rb)return Kn(x,4,"Not a key frame.");for(ht(xt),At=x.Pa,G=0;4>G;++G){for(yt=0;8>yt;++yt)for(et=0;3>et;++et)for(Et=0;11>Et;++Et)Pt=ot(xt,Vr[G][yt][et][Et])?st(xt,8):Ep[G][yt][et][Et],At.Wc[G][yt].Yb[et][Et]=Pt;for(yt=0;17>yt;++yt)At.Xc[G][yt]=At.Wc[G][Yn[yt]]}return x.kc=ht(xt),x.kc&&(x.Bd=st(xt,8)),x.cb=1}function io(x,N,G,et,yt,xt,At){var Et=N[yt].Yb[G];for(G=0;16>yt;++yt){if(!ot(x,Et[G+0]))return yt;for(;!ot(x,Et[G+1]);)if(Et=N[++yt].Yb[0],G=0,yt==16)return 16;var Nt=N[yt+1].Yb;if(ot(x,Et[G+2])){var Pt=x,Wt=0;if(ot(Pt,(Dt=Et)[(se=G)+3]))if(ot(Pt,Dt[se+6])){for(Et=0,se=2*(Wt=ot(Pt,Dt[se+8]))+(Dt=ot(Pt,Dt[se+9+Wt])),Wt=0,Dt=Sp[se];Dt[Et];++Et)Wt+=Wt+ot(Pt,Dt[Et]);Wt+=3+(8<<se)}else ot(Pt,Dt[se+7])?(Wt=7+2*ot(Pt,165),Wt+=ot(Pt,145)):Wt=5+ot(Pt,159);else Wt=ot(Pt,Dt[se+4])?3+ot(Pt,Dt[se+5]):2;Et=Nt[2]}else Wt=1,Et=Nt[1];Nt=At+Wf[yt],0>(Pt=x).b&&j(Pt);var se,Dt=Pt.b,Xt=(se=Pt.Ca>>1)-(Pt.I>>Dt)>>31;--Pt.b,Pt.Ca+=Xt,Pt.Ca|=1,Pt.I-=(se+1&Xt)<<Dt,xt[Nt]=((Wt^Xt)-Xt)*et[(0<yt)+0]}return 16}function Al(x){var N=x.rb[x.sb-1];N.la=0,N.Na=0,i(x.zc,0,0,x.zc.length),x.ja=0}function kn(x,N,G,et,yt){yt=x[N+G+32*et]+(yt>>3),x[N+G+32*et]=-256&yt?0>yt?0:255:yt}function Gr(x,N,G,et,yt,xt){kn(x,N,0,G,et+yt),kn(x,N,1,G,et+xt),kn(x,N,2,G,et-xt),kn(x,N,3,G,et-yt)}function Dr(x){return(20091*x>>16)+x}function ya(x,N,G,et){var yt,xt=0,At=s(16);for(yt=0;4>yt;++yt){var Et=x[N+0]+x[N+8],Nt=x[N+0]-x[N+8],Pt=(35468*x[N+4]>>16)-Dr(x[N+12]),Wt=Dr(x[N+4])+(35468*x[N+12]>>16);At[xt+0]=Et+Wt,At[xt+1]=Nt+Pt,At[xt+2]=Nt-Pt,At[xt+3]=Et-Wt,xt+=4,N++}for(yt=xt=0;4>yt;++yt)Et=(x=At[xt+0]+4)+At[xt+8],Nt=x-At[xt+8],Pt=(35468*At[xt+4]>>16)-Dr(At[xt+12]),kn(G,et,0,0,Et+(Wt=Dr(At[xt+4])+(35468*At[xt+12]>>16))),kn(G,et,1,0,Nt+Pt),kn(G,et,2,0,Nt-Pt),kn(G,et,3,0,Et-Wt),xt++,et+=32}function Sl(x,N,G,et){var yt=x[N+0]+4,xt=35468*x[N+4]>>16,At=Dr(x[N+4]),Et=35468*x[N+1]>>16;Gr(G,et,0,yt+At,x=Dr(x[N+1]),Et),Gr(G,et,1,yt+xt,x,Et),Gr(G,et,2,yt-xt,x,Et),Gr(G,et,3,yt-At,x,Et)}function Ko(x,N,G,et,yt){ya(x,N,G,et),yt&&ya(x,N+16,G,et+4)}function Si(x,N,G,et){Vt(x,N+0,G,et,1),Vt(x,N+32,G,et+128,1)}function El(x,N,G,et){var yt;for(x=x[N+0]+4,yt=0;4>yt;++yt)for(N=0;4>N;++N)kn(G,et,N,yt,x)}function To(x,N,G,et){x[N+0]&&Bt(x,N+0,G,et),x[N+16]&&Bt(x,N+16,G,et+4),x[N+32]&&Bt(x,N+32,G,et+128),x[N+48]&&Bt(x,N+48,G,et+128+4)}function Zs(x,N,G,et){var yt,xt=s(16);for(yt=0;4>yt;++yt){var At=x[N+0+yt]+x[N+12+yt],Et=x[N+4+yt]+x[N+8+yt],Nt=x[N+4+yt]-x[N+8+yt],Pt=x[N+0+yt]-x[N+12+yt];xt[0+yt]=At+Et,xt[8+yt]=At-Et,xt[4+yt]=Pt+Nt,xt[12+yt]=Pt-Nt}for(yt=0;4>yt;++yt)At=(x=xt[0+4*yt]+3)+xt[3+4*yt],Et=xt[1+4*yt]+xt[2+4*yt],Nt=xt[1+4*yt]-xt[2+4*yt],Pt=x-xt[3+4*yt],G[et+0]=At+Et>>3,G[et+16]=Pt+Nt>>3,G[et+32]=At-Et>>3,G[et+48]=Pt-Nt>>3,et+=64}function $o(x,N,G){var et,yt=N-32,xt=Ci,At=255-x[yt-1];for(et=0;et<G;++et){var Et,Nt=xt,Pt=At+x[N-1];for(Et=0;Et<G;++Et)x[N+Et]=Nt[Pt+x[yt+Et]];N+=32}}function zn(x,N){$o(x,N,4)}function du(x,N){$o(x,N,8)}function pu(x,N){$o(x,N,16)}function mu(x,N){var G;for(G=0;16>G;++G)n(x,N+32*G,x,N-32,16)}function Qi(x,N){var G;for(G=16;0<G;--G)i(x,N,x[N-1],16),N+=32}function gi(x,N,G){var et;for(et=0;16>et;++et)i(N,G+32*et,x,16)}function _s(x,N){var G,et=16;for(G=0;16>G;++G)et+=x[N-1+32*G]+x[N+G-32];gi(et>>5,x,N)}function Zi(x,N){var G,et=8;for(G=0;16>G;++G)et+=x[N-1+32*G];gi(et>>4,x,N)}function No(x,N){var G,et=8;for(G=0;16>G;++G)et+=x[N+G-32];gi(et>>4,x,N)}function so(x,N){gi(128,x,N)}function He(x,N,G){return x+2*N+G+2>>2}function Us(x,N){var G,et=N-32;for(et=new Uint8Array([He(x[et-1],x[et+0],x[et+1]),He(x[et+0],x[et+1],x[et+2]),He(x[et+1],x[et+2],x[et+3]),He(x[et+2],x[et+3],x[et+4])]),G=0;4>G;++G)n(x,N+32*G,et,0,et.length)}function ao(x,N){var G=x[N-1],et=x[N-1+32],yt=x[N-1+64],xt=x[N-1+96];lt(x,N+0,16843009*He(x[N-1-32],G,et)),lt(x,N+32,16843009*He(G,et,yt)),lt(x,N+64,16843009*He(et,yt,xt)),lt(x,N+96,16843009*He(yt,xt,xt))}function ko(x,N){var G,et=4;for(G=0;4>G;++G)et+=x[N+G-32]+x[N-1+32*G];for(et>>=3,G=0;4>G;++G)i(x,N+32*G,et,4)}function os(x,N){var G=x[N-1+0],et=x[N-1+32],yt=x[N-1+64],xt=x[N-1-32],At=x[N+0-32],Et=x[N+1-32],Nt=x[N+2-32],Pt=x[N+3-32];x[N+0+96]=He(et,yt,x[N-1+96]),x[N+1+96]=x[N+0+64]=He(G,et,yt),x[N+2+96]=x[N+1+64]=x[N+0+32]=He(xt,G,et),x[N+3+96]=x[N+2+64]=x[N+1+32]=x[N+0+0]=He(At,xt,G),x[N+3+64]=x[N+2+32]=x[N+1+0]=He(Et,At,xt),x[N+3+32]=x[N+2+0]=He(Nt,Et,At),x[N+3+0]=He(Pt,Nt,Et)}function Pr(x,N){var G=x[N+1-32],et=x[N+2-32],yt=x[N+3-32],xt=x[N+4-32],At=x[N+5-32],Et=x[N+6-32],Nt=x[N+7-32];x[N+0+0]=He(x[N+0-32],G,et),x[N+1+0]=x[N+0+32]=He(G,et,yt),x[N+2+0]=x[N+1+32]=x[N+0+64]=He(et,yt,xt),x[N+3+0]=x[N+2+32]=x[N+1+64]=x[N+0+96]=He(yt,xt,At),x[N+3+32]=x[N+2+64]=x[N+1+96]=He(xt,At,Et),x[N+3+64]=x[N+2+96]=He(At,Et,Nt),x[N+3+96]=He(Et,Nt,Nt)}function gu(x,N){var G=x[N-1+0],et=x[N-1+32],yt=x[N-1+64],xt=x[N-1-32],At=x[N+0-32],Et=x[N+1-32],Nt=x[N+2-32],Pt=x[N+3-32];x[N+0+0]=x[N+1+64]=xt+At+1>>1,x[N+1+0]=x[N+2+64]=At+Et+1>>1,x[N+2+0]=x[N+3+64]=Et+Nt+1>>1,x[N+3+0]=Nt+Pt+1>>1,x[N+0+96]=He(yt,et,G),x[N+0+64]=He(et,G,xt),x[N+0+32]=x[N+1+96]=He(G,xt,At),x[N+1+32]=x[N+2+96]=He(xt,At,Et),x[N+2+32]=x[N+3+96]=He(At,Et,Nt),x[N+3+32]=He(Et,Nt,Pt)}function Ji(x,N){var G=x[N+0-32],et=x[N+1-32],yt=x[N+2-32],xt=x[N+3-32],At=x[N+4-32],Et=x[N+5-32],Nt=x[N+6-32],Pt=x[N+7-32];x[N+0+0]=G+et+1>>1,x[N+1+0]=x[N+0+64]=et+yt+1>>1,x[N+2+0]=x[N+1+64]=yt+xt+1>>1,x[N+3+0]=x[N+2+64]=xt+At+1>>1,x[N+0+32]=He(G,et,yt),x[N+1+32]=x[N+0+96]=He(et,yt,xt),x[N+2+32]=x[N+1+96]=He(yt,xt,At),x[N+3+32]=x[N+2+96]=He(xt,At,Et),x[N+3+64]=He(At,Et,Nt),x[N+3+96]=He(Et,Nt,Pt)}function ls(x,N){var G=x[N-1+0],et=x[N-1+32],yt=x[N-1+64],xt=x[N-1+96];x[N+0+0]=G+et+1>>1,x[N+2+0]=x[N+0+32]=et+yt+1>>1,x[N+2+32]=x[N+0+64]=yt+xt+1>>1,x[N+1+0]=He(G,et,yt),x[N+3+0]=x[N+1+32]=He(et,yt,xt),x[N+3+32]=x[N+1+64]=He(yt,xt,xt),x[N+3+64]=x[N+2+64]=x[N+0+96]=x[N+1+96]=x[N+2+96]=x[N+3+96]=xt}function Ro(x,N){var G=x[N-1+0],et=x[N-1+32],yt=x[N-1+64],xt=x[N-1+96],At=x[N-1-32],Et=x[N+0-32],Nt=x[N+1-32],Pt=x[N+2-32];x[N+0+0]=x[N+2+32]=G+At+1>>1,x[N+0+32]=x[N+2+64]=et+G+1>>1,x[N+0+64]=x[N+2+96]=yt+et+1>>1,x[N+0+96]=xt+yt+1>>1,x[N+3+0]=He(Et,Nt,Pt),x[N+2+0]=He(At,Et,Nt),x[N+1+0]=x[N+3+32]=He(G,At,Et),x[N+1+32]=x[N+3+64]=He(et,G,At),x[N+1+64]=x[N+3+96]=He(yt,et,G),x[N+1+96]=He(xt,yt,et)}function Js(x,N){var G;for(G=0;8>G;++G)n(x,N+32*G,x,N-32,8)}function Lo(x,N){var G;for(G=0;8>G;++G)i(x,N,x[N-1],8),N+=32}function As(x,N,G){var et;for(et=0;8>et;++et)i(N,G+32*et,x,8)}function Xo(x,N){var G,et=8;for(G=0;8>G;++G)et+=x[N+G-32]+x[N-1+32*G];As(et>>4,x,N)}function Cl(x,N){var G,et=4;for(G=0;8>G;++G)et+=x[N+G-32];As(et>>3,x,N)}function Yr(x,N){var G,et=4;for(G=0;8>G;++G)et+=x[N-1+32*G];As(et>>3,x,N)}function Pa(x,N){As(128,x,N)}function ta(x,N,G){var et=x[N-G],yt=x[N+0],xt=3*(yt-et)+ar[1020+x[N-2*G]-x[N+G]],At=Ea[112+(xt+4>>3)];x[N-G]=Ci[255+et+Ea[112+(xt+3>>3)]],x[N+0]=Ci[255+yt-At]}function ea(x,N,G,et){var yt=x[N+0],xt=x[N+G];return fs[255+x[N-2*G]-x[N-G]]>et||fs[255+xt-yt]>et}function oo(x,N,G,et){return 4*fs[255+x[N-G]-x[N+0]]+fs[255+x[N-2*G]-x[N+G]]<=et}function lo(x,N,G,et,yt){var xt=x[N-3*G],At=x[N-2*G],Et=x[N-G],Nt=x[N+0],Pt=x[N+G],Wt=x[N+2*G],se=x[N+3*G];return 4*fs[255+Et-Nt]+fs[255+At-Pt]>et?0:fs[255+x[N-4*G]-xt]<=yt&&fs[255+xt-At]<=yt&&fs[255+At-Et]<=yt&&fs[255+se-Wt]<=yt&&fs[255+Wt-Pt]<=yt&&fs[255+Pt-Nt]<=yt}function uo(x,N,G,et){var yt=2*et+1;for(et=0;16>et;++et)oo(x,N+et,G,yt)&&ta(x,N+et,G)}function co(x,N,G,et){var yt=2*et+1;for(et=0;16>et;++et)oo(x,N+et*G,1,yt)&&ta(x,N+et*G,1)}function Yo(x,N,G,et){var yt;for(yt=3;0<yt;--yt)uo(x,N+=4*G,G,et)}function Qo(x,N,G,et){var yt;for(yt=3;0<yt;--yt)co(x,N+=4,G,et)}function va(x,N,G,et,yt,xt,At,Et){for(xt=2*xt+1;0<yt--;){if(lo(x,N,G,xt,At))if(ea(x,N,G,Et))ta(x,N,G);else{var Nt=x,Pt=N,Wt=G,se=Nt[Pt-2*Wt],Dt=Nt[Pt-Wt],Xt=Nt[Pt+0],ee=Nt[Pt+Wt],pe=Nt[Pt+2*Wt],ne=27*(be=ar[1020+3*(Xt-Dt)+ar[1020+se-ee]])+63>>7,de=18*be+63>>7,be=9*be+63>>7;Nt[Pt-3*Wt]=Ci[255+Nt[Pt-3*Wt]+be],Nt[Pt-2*Wt]=Ci[255+se+de],Nt[Pt-Wt]=Ci[255+Dt+ne],Nt[Pt+0]=Ci[255+Xt-ne],Nt[Pt+Wt]=Ci[255+ee-de],Nt[Pt+2*Wt]=Ci[255+pe-be]}N+=et}}function Ma(x,N,G,et,yt,xt,At,Et){for(xt=2*xt+1;0<yt--;){if(lo(x,N,G,xt,At))if(ea(x,N,G,Et))ta(x,N,G);else{var Nt=x,Pt=N,Wt=G,se=Nt[Pt-Wt],Dt=Nt[Pt+0],Xt=Nt[Pt+Wt],ee=Ea[112+(4+(pe=3*(Dt-se))>>3)],pe=Ea[112+(pe+3>>3)],ne=ee+1>>1;Nt[Pt-2*Wt]=Ci[255+Nt[Pt-2*Wt]+ne],Nt[Pt-Wt]=Ci[255+se+pe],Nt[Pt+0]=Ci[255+Dt-ee],Nt[Pt+Wt]=Ci[255+Xt-ne]}N+=et}}function Zo(x,N,G,et,yt,xt){va(x,N,G,1,16,et,yt,xt)}function na(x,N,G,et,yt,xt){va(x,N,1,G,16,et,yt,xt)}function Jo(x,N,G,et,yt,xt){var At;for(At=3;0<At;--At)Ma(x,N+=4*G,G,1,16,et,yt,xt)}function U(x,N,G,et,yt,xt){var At;for(At=3;0<At;--At)Ma(x,N+=4,1,G,16,et,yt,xt)}function gt(x,N,G,et,yt,xt,At,Et){va(x,N,yt,1,8,xt,At,Et),va(G,et,yt,1,8,xt,At,Et)}function Ot(x,N,G,et,yt,xt,At,Et){va(x,N,1,yt,8,xt,At,Et),va(G,et,1,yt,8,xt,At,Et)}function qt(x,N,G,et,yt,xt,At,Et){Ma(x,N+4*yt,yt,1,8,xt,At,Et),Ma(G,et+4*yt,yt,1,8,xt,At,Et)}function Qt(x,N,G,et,yt,xt,At,Et){Ma(x,N+4,1,yt,8,xt,At,Et),Ma(G,et+4,1,yt,8,xt,At,Et)}function ge(){this.ba=new gn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Vn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Se(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function je(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function $e(){this.ua=0,this.Wa=new P,this.vb=new P,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new mt,this.yc=new Z}function hn(){this.xb=this.a=0,this.l=new Da,this.ca=new gn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new K,this.Pb=0,this.wd=new K,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new $e,this.ab=0,this.gc=l(4,je),this.Oc=0}function _n(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Da,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function In(x,N,G,et,yt,xt,At){for(x=x==null?0:x[N+0],N=0;N<At;++N)yt[xt+N]=x+G[et+N]&255,x=yt[xt+N]}function Mr(x,N,G,et,yt,xt,At){var Et;if(x==null)In(null,null,G,et,yt,xt,At);else for(Et=0;Et<At;++Et)yt[xt+Et]=x[N+Et]+G[et+Et]&255}function Qr(x,N,G,et,yt,xt,At){if(x==null)In(null,null,G,et,yt,xt,At);else{var Et,Nt=x[N+0],Pt=Nt,Wt=Nt;for(Et=0;Et<At;++Et)Pt=Wt+(Nt=x[N+Et])-Pt,Wt=G[et+Et]+(-256&Pt?0>Pt?0:255:Pt)&255,Pt=Nt,yt[xt+Et]=Wt}}function hr(x,N,G,et){var yt=N.width,xt=N.o;if(t(x!=null&&N!=null),0>G||0>=et||G+et>xt)return null;if(!x.Cc){if(x.ga==null){var At;if(x.ga=new _n,(At=x.ga==null)||(At=N.width*N.o,t(x.Gb.length==0),x.Gb=s(At),x.Uc=0,x.Gb==null?At=0:(x.mb=x.Gb,x.nb=x.Uc,x.rc=null,At=1),At=!At),!At){At=x.ga;var Et=x.Fa,Nt=x.P,Pt=x.qc,Wt=x.mb,se=x.nb,Dt=Nt+1,Xt=Pt-1,ee=At.l;if(t(Et!=null&&Wt!=null&&N!=null),il[0]=null,il[1]=In,il[2]=Mr,il[3]=Qr,At.ca=Wt,At.tb=se,At.c=N.width,At.i=N.height,t(0<At.c&&0<At.i),1>=Pt)N=0;else if(At.$a=3&Et[Nt+0],At.Z=Et[Nt+0]>>2&3,At.Lc=Et[Nt+0]>>4&3,Nt=Et[Nt+0]>>6&3,0>At.$a||1<At.$a||4<=At.Z||1<At.Lc||Nt)N=0;else if(ee.put=nn,ee.ac=Fi,ee.bc=fa,ee.ma=At,ee.width=N.width,ee.height=N.height,ee.Da=N.Da,ee.v=N.v,ee.va=N.va,ee.j=N.j,ee.o=N.o,At.$a)t:{t(At.$a==1),N=xs();e:for(;;){if(N==null){N=0;break t}if(t(At!=null),At.mc=N,N.c=At.c,N.i=At.i,N.l=At.l,N.l.ma=At,N.l.width=At.c,N.l.height=At.i,N.a=0,wt(N.m,Et,Dt,Xt),!Ys(At.c,At.i,1,N,null)||(N.ab==1&&N.gc[0].hc==3&&Wn(N.s)?(At.ic=1,Et=N.c*N.i,N.Ta=null,N.Ua=0,N.V=s(Et),N.Ba=0,N.V==null?(N.a=1,N=0):N=1):(At.ic=0,N=Bi(N,At.c)),!N))break e;N=1;break t}At.mc=null,N=0}else N=Xt>=At.c*At.i;At=!N}if(At)return null;x.ga.Lc!=1?x.Ga=0:et=xt-G}t(x.ga!=null),t(G+et<=xt);t:{if(N=(Et=x.ga).c,xt=Et.l.o,Et.$a==0){if(Dt=x.rc,Xt=x.Vc,ee=x.Fa,Nt=x.P+1+G*N,Pt=x.mb,Wt=x.nb+G*N,t(Nt<=x.P+x.qc),Et.Z!=0)for(t(il[Et.Z]!=null),At=0;At<et;++At)il[Et.Z](Dt,Xt,ee,Nt,Pt,Wt,N),Dt=Pt,Xt=Wt,Wt+=N,Nt+=N;else for(At=0;At<et;++At)n(Pt,Wt,ee,Nt,N),Dt=Pt,Xt=Wt,Wt+=N,Nt+=N;x.rc=Dt,x.Vc=Xt}else{if(t(Et.mc!=null),N=G+et,t((At=Et.mc)!=null),t(N<=At.i),At.C>=N)N=1;else if(Et.ic||Ss(),Et.ic){Et=At.V,Dt=At.Ba,Xt=At.c;var pe=At.i,ne=(ee=1,Nt=At.$/Xt,Pt=At.$%Xt,Wt=At.m,se=At.s,At.$),de=Xt*pe,be=Xt*N,Oe=se.wc,Ae=ne<be?Jr(se,Pt,Nt):null;t(ne<=de),t(N<=pe),t(Wn(se));e:for(;;){for(;!Wt.h&&ne<be;){if(Pt&Oe||(Ae=Jr(se,Pt,Nt)),t(Ae!=null),F(Wt),256>(pe=Or(Ae.G[0],Ae.H[0],Wt)))Et[Dt+ne]=pe,++ne,++Pt>=Xt&&(Pt=0,++Nt<=N&&!(Nt%16)&&Hr(At,Nt));else{if(!(280>pe)){ee=0;break e}pe=Bn(pe-256,Wt);var tn,Ve=Or(Ae.G[4],Ae.H[4],Wt);if(F(Wt),!(ne>=(Ve=sr(Xt,Ve=Bn(Ve,Wt)))&&de-ne>=pe)){ee=0;break e}for(tn=0;tn<pe;++tn)Et[Dt+ne+tn]=Et[Dt+ne+tn-Ve];for(ne+=pe,Pt+=pe;Pt>=Xt;)Pt-=Xt,++Nt<=N&&!(Nt%16)&&Hr(At,Nt);ne<be&&Pt&Oe&&(Ae=Jr(se,Pt,Nt))}t(Wt.h==pt(Wt))}Hr(At,Nt>N?N:Nt);break e}!ee||Wt.h&&ne<de?(ee=0,At.a=Wt.h?5:3):At.$=ne,N=ee}else N=Xi(At,At.V,At.Ba,At.c,At.i,N,no);if(!N){et=0;break t}}G+et>=xt&&(x.Cc=1),et=1}if(!et)return null;if(x.Cc&&((et=x.ga)!=null&&(et.mc=null),x.ga=null,0<x.Ga))return alert("todo:WebPDequantizeLevels"),null}return x.nb+G*yt}function ti(x,N,G,et,yt,xt){for(;0<yt--;){var At,Et=x,Nt=N+(G?1:0),Pt=x,Wt=N+(G?0:3);for(At=0;At<et;++At){var se=Pt[Wt+4*At];se!=255&&(se*=32897,Et[Nt+4*At+0]=Et[Nt+4*At+0]*se>>23,Et[Nt+4*At+1]=Et[Nt+4*At+1]*se>>23,Et[Nt+4*At+2]=Et[Nt+4*At+2]*se>>23)}N+=xt}}function Tr(x,N,G,et,yt){for(;0<et--;){var xt;for(xt=0;xt<G;++xt){var At=x[N+2*xt+0],Et=15&(Pt=x[N+2*xt+1]),Nt=4369*Et,Pt=(240&Pt|Pt>>4)*Nt>>16;x[N+2*xt+0]=(240&At|At>>4)*Nt>>16&240|(15&At|At<<4)*Nt>>16>>4&15,x[N+2*xt+1]=240&Pt|Et}N+=yt}}function yi(x,N,G,et,yt,xt,At,Et){var Nt,Pt,Wt=255;for(Pt=0;Pt<yt;++Pt){for(Nt=0;Nt<et;++Nt){var se=x[N+Nt];xt[At+4*Nt]=se,Wt&=se}N+=G,At+=Et}return Wt!=255}function ba(x,N,G,et,yt){var xt;for(xt=0;xt<yt;++xt)G[et+xt]=x[N+xt]>>8}function Ss(){Be=ti,ke=Tr,qe=yi,wn=ba}function wa(x,N,G){I[x]=function(et,yt,xt,At,Et,Nt,Pt,Wt,se,Dt,Xt,ee,pe,ne,de,be,Oe){var Ae,tn=Oe-1>>1,Ve=Et[Nt+0]|Pt[Wt+0]<<16,Sn=se[Dt+0]|Xt[ee+0]<<16;t(et!=null);var Ye=3*Ve+Sn+131074>>2;for(N(et[yt+0],255&Ye,Ye>>16,pe,ne),xt!=null&&(Ye=3*Sn+Ve+131074>>2,N(xt[At+0],255&Ye,Ye>>16,de,be)),Ae=1;Ae<=tn;++Ae){var $n=Et[Nt+Ae]|Pt[Wt+Ae]<<16,Wr=se[Dt+Ae]|Xt[ee+Ae]<<16,Rn=Ve+$n+Sn+Wr+524296,We=Rn+2*($n+Sn)>>3;Ye=We+Ve>>1,Ve=(Rn=Rn+2*(Ve+Wr)>>3)+$n>>1,N(et[yt+2*Ae-1],255&Ye,Ye>>16,pe,ne+(2*Ae-1)*G),N(et[yt+2*Ae-0],255&Ve,Ve>>16,pe,ne+(2*Ae-0)*G),xt!=null&&(Ye=Rn+Sn>>1,Ve=We+Wr>>1,N(xt[At+2*Ae-1],255&Ye,Ye>>16,de,be+(2*Ae-1)*G),N(xt[At+2*Ae+0],255&Ve,Ve>>16,de,be+(2*Ae+0)*G)),Ve=$n,Sn=Wr}1&Oe||(Ye=3*Ve+Sn+131074>>2,N(et[yt+Oe-1],255&Ye,Ye>>16,pe,ne+(Oe-1)*G),xt!=null&&(Ye=3*Sn+Ve+131074>>2,N(xt[At+Oe-1],255&Ye,Ye>>16,de,be+(Oe-1)*G)))}}function Tl(){ps[wh]=bu,ps[Ts]=Zu,ps[xh]=$f,ps[Fa]=Ch,ps[Pc]=Pl,ps[Xu]=Po,ps[Ll]=Ml,ps[Mc]=Zu,ps[_h]=Ch,ps[Yu]=Pl,ps[Ah]=Po}function Nl(x){return x&-16384?0>x?0:255:x>>Th}function ra(x,N){return Nl((19077*x>>8)+(26149*N>>8)-14234)}function Es(x,N,G){return Nl((19077*x>>8)-(6419*N>>8)-(13320*G>>8)+8708)}function tl(x,N){return Nl((19077*x>>8)+(33050*N>>8)-17685)}function xa(x,N,G,et,yt){et[yt+0]=ra(x,G),et[yt+1]=Es(x,N,G),et[yt+2]=tl(x,N)}function ai(x,N,G,et,yt){et[yt+0]=tl(x,N),et[yt+1]=Es(x,N,G),et[yt+2]=ra(x,G)}function Oo(x,N,G,et,yt){var xt=Es(x,N,G);N=xt<<3&224|tl(x,N)>>3,et[yt+0]=248&ra(x,G)|xt>>5,et[yt+1]=N}function ho(x,N,G,et,yt){var xt=240&tl(x,N)|15;et[yt+0]=240&ra(x,G)|Es(x,N,G)>>4,et[yt+1]=xt}function kl(x,N,G,et,yt){et[yt+0]=255,xa(x,N,G,et,yt+1)}function _a(x,N,G,et,yt){ai(x,N,G,et,yt),et[yt+3]=255}function ts(x,N,G,et,yt){xa(x,N,G,et,yt),et[yt+3]=255}function fo(x,N,G){I[x]=function(et,yt,xt,At,Et,Nt,Pt,Wt,se){for(var Dt=Wt+(-2&se)*G;Wt!=Dt;)N(et[yt+0],xt[At+0],Et[Nt+0],Pt,Wt),N(et[yt+1],xt[At+0],Et[Nt+0],Pt,Wt+G),yt+=2,++At,++Nt,Wt+=2*G;1&se&&N(et[yt+0],xt[At+0],Et[Nt+0],Pt,Wt)}}function el(x,N,G){return G==0?x==0?N==0?6:5:N==0?4:0:G}function nl(x,N,G,et,yt){switch(x>>>30){case 3:Vt(N,G,et,yt,0);break;case 2:Yt(N,G,et,yt);break;case 1:Bt(N,G,et,yt)}}function Cs(x,N){var G,et,yt=N.M,xt=N.Nb,At=x.oc,Et=x.pc+40,Nt=x.oc,Pt=x.pc+584,Wt=x.oc,se=x.pc+600;for(G=0;16>G;++G)At[Et+32*G-1]=129;for(G=0;8>G;++G)Nt[Pt+32*G-1]=129,Wt[se+32*G-1]=129;for(0<yt?At[Et-1-32]=Nt[Pt-1-32]=Wt[se-1-32]=129:(i(At,Et-32-1,127,21),i(Nt,Pt-32-1,127,9),i(Wt,se-32-1,127,9)),et=0;et<x.za;++et){var Dt=N.ya[N.aa+et];if(0<et){for(G=-1;16>G;++G)n(At,Et+32*G-4,At,Et+32*G+12,4);for(G=-1;8>G;++G)n(Nt,Pt+32*G-4,Nt,Pt+32*G+4,4),n(Wt,se+32*G-4,Wt,se+32*G+4,4)}var Xt=x.Gd,ee=x.Hd+et,pe=Dt.ad,ne=Dt.Hc;if(0<yt&&(n(At,Et-32,Xt[ee].y,0,16),n(Nt,Pt-32,Xt[ee].f,0,8),n(Wt,se-32,Xt[ee].ea,0,8)),Dt.Za){var de=At,be=Et-32+16;for(0<yt&&(et>=x.za-1?i(de,be,Xt[ee].y[15],4):n(de,be,Xt[ee+1].y,0,4)),G=0;4>G;G++)de[be+128+G]=de[be+256+G]=de[be+384+G]=de[be+0+G];for(G=0;16>G;++G,ne<<=2)de=At,be=Et+vi[G],oi[Dt.Ob[G]](de,be),nl(ne,pe,16*+G,de,be)}else if(de=el(et,yt,Dt.Ob[0]),qs[de](At,Et),ne!=0)for(G=0;16>G;++G,ne<<=2)nl(ne,pe,16*+G,At,Et+vi[G]);for(G=Dt.Gc,de=el(et,yt,Dt.Dd),go[de](Nt,Pt),go[de](Wt,se),ne=pe,de=Nt,be=Pt,255&(Dt=0|G)&&(170&Dt?Ht(ne,256,de,be):It(ne,256,de,be)),Dt=Wt,ne=se,255&(G>>=8)&&(170&G?Ht(pe,320,Dt,ne):It(pe,320,Dt,ne)),yt<x.Ub-1&&(n(Xt[ee].y,0,At,Et+480,16),n(Xt[ee].f,0,Nt,Pt+224,8),n(Xt[ee].ea,0,Wt,se+224,8)),G=8*xt*x.B,Xt=x.sa,ee=x.ta+16*et+16*xt*x.R,pe=x.qa,Dt=x.ra+8*et+G,ne=x.Ha,de=x.Ia+8*et+G,G=0;16>G;++G)n(Xt,ee+G*x.R,At,Et+32*G,16);for(G=0;8>G;++G)n(pe,Dt+G*x.B,Nt,Pt+32*G,8),n(ne,de+G*x.B,Wt,se+32*G,8)}}function ia(x,N,G,et,yt,xt,At,Et,Nt){var Pt=[0],Wt=[0],se=0,Dt=Nt!=null?Nt.kd:0,Xt=Nt??new Se;if(x==null||12>G)return 7;Xt.data=x,Xt.w=N,Xt.ha=G,N=[N],G=[G],Xt.gb=[Xt.gb];t:{var ee=N,pe=G,ne=Xt.gb;if(t(x!=null),t(pe!=null),t(ne!=null),ne[0]=0,12<=pe[0]&&!e(x,ee[0],"RIFF")){if(e(x,ee[0]+8,"WEBP")){ne=3;break t}var de=W(x,ee[0]+4);if(12>de||4294967286<de){ne=3;break t}if(Dt&&de>pe[0]-8){ne=7;break t}ne[0]=de,ee[0]+=12,pe[0]-=12}ne=0}if(ne!=0)return ne;for(de=0<Xt.gb[0],G=G[0];;){t:{var be=x;pe=N,ne=G;var Oe=Pt,Ae=Wt,tn=ee=[0];if((Ye=se=[se])[0]=0,8>ne[0])ne=7;else{if(!e(be,pe[0],"VP8X")){if(W(be,pe[0]+4)!=10){ne=3;break t}if(18>ne[0]){ne=7;break t}var Ve=W(be,pe[0]+8),Sn=1+Mt(be,pe[0]+12);if(2147483648<=Sn*(be=1+Mt(be,pe[0]+15))){ne=3;break t}tn!=null&&(tn[0]=Ve),Oe!=null&&(Oe[0]=Sn),Ae!=null&&(Ae[0]=be),pe[0]+=18,ne[0]-=18,Ye[0]=1}ne=0}}if(se=se[0],ee=ee[0],ne!=0)return ne;if(pe=!!(2&ee),!de&&se)return 3;if(xt!=null&&(xt[0]=!!(16&ee)),At!=null&&(At[0]=pe),Et!=null&&(Et[0]=0),At=Pt[0],ee=Wt[0],se&&pe&&Nt==null){ne=0;break}if(4>G){ne=7;break}if(de&&se||!de&&!se&&!e(x,N[0],"ALPH")){G=[G],Xt.na=[Xt.na],Xt.P=[Xt.P],Xt.Sa=[Xt.Sa];t:{Ve=x,ne=N,de=G;var Ye=Xt.gb;Oe=Xt.na,Ae=Xt.P,tn=Xt.Sa,Sn=22,t(Ve!=null),t(de!=null),be=ne[0];var $n=de[0];for(t(Oe!=null),t(tn!=null),Oe[0]=null,Ae[0]=null,tn[0]=0;;){if(ne[0]=be,de[0]=$n,8>$n){ne=7;break t}var Wr=W(Ve,be+4);if(4294967286<Wr){ne=3;break t}var Rn=8+Wr+1&-2;if(Sn+=Rn,0<Ye&&Sn>Ye){ne=3;break t}if(!e(Ve,be,"VP8 ")||!e(Ve,be,"VP8L")){ne=0;break t}if($n[0]<Rn){ne=7;break t}e(Ve,be,"ALPH")||(Oe[0]=Ve,Ae[0]=be+8,tn[0]=Wr),be+=Rn,$n-=Rn}}if(G=G[0],Xt.na=Xt.na[0],Xt.P=Xt.P[0],Xt.Sa=Xt.Sa[0],ne!=0)break}G=[G],Xt.Ja=[Xt.Ja],Xt.xa=[Xt.xa];t:if(Ye=x,ne=N,de=G,Oe=Xt.gb[0],Ae=Xt.Ja,tn=Xt.xa,Ve=ne[0],be=!e(Ye,Ve,"VP8 "),Sn=!e(Ye,Ve,"VP8L"),t(Ye!=null),t(de!=null),t(Ae!=null),t(tn!=null),8>de[0])ne=7;else{if(be||Sn){if(Ye=W(Ye,Ve+4),12<=Oe&&Ye>Oe-12){ne=3;break t}if(Dt&&Ye>de[0]-8){ne=7;break t}Ae[0]=Ye,ne[0]+=8,de[0]-=8,tn[0]=Sn}else tn[0]=5<=de[0]&&Ye[Ve+0]==47&&!(Ye[Ve+4]>>5),Ae[0]=de[0];ne=0}if(G=G[0],Xt.Ja=Xt.Ja[0],Xt.xa=Xt.xa[0],N=N[0],ne!=0)break;if(4294967286<Xt.Ja)return 3;if(Et==null||pe||(Et[0]=Xt.xa?2:1),At=[At],ee=[ee],Xt.xa){if(5>G){ne=7;break}Et=At,Dt=ee,pe=xt,x==null||5>G?x=0:5<=G&&x[N+0]==47&&!(x[N+4]>>5)?(de=[0],Ye=[0],Oe=[0],wt(Ae=new K,x,N,G),Fs(Ae,de,Ye,Oe)?(Et!=null&&(Et[0]=de[0]),Dt!=null&&(Dt[0]=Ye[0]),pe!=null&&(pe[0]=Oe[0]),x=1):x=0):x=0}else{if(10>G){ne=7;break}Et=ee,x==null||10>G||!ro(x,N+3,G-3)?x=0:(Dt=x[N+0]|x[N+1]<<8|x[N+2]<<16,pe=16383&(x[N+7]<<8|x[N+6]),x=16383&(x[N+9]<<8|x[N+8]),1&Dt||3<(Dt>>1&7)||!(Dt>>4&1)||Dt>>5>=Xt.Ja||!pe||!x?x=0:(At&&(At[0]=pe),Et&&(Et[0]=x),x=1))}if(!x||(At=At[0],ee=ee[0],se&&(Pt[0]!=At||Wt[0]!=ee)))return 3;Nt!=null&&(Nt[0]=Xt,Nt.offset=N-Nt.w,t(4294967286>N-Nt.w),t(Nt.offset==Nt.ha-G));break}return ne==0||ne==7&&se&&Nt==null?(xt!=null&&(xt[0]|=Xt.na!=null&&0<Xt.na.length),et!=null&&(et[0]=At),yt!=null&&(yt[0]=ee),0):ne}function po(x,N,G){var et=N.width,yt=N.height,xt=0,At=0,Et=et,Nt=yt;if(N.Da=x!=null&&0<x.Da,N.Da&&(Et=x.cd,Nt=x.bd,xt=x.v,At=x.j,11>G||(xt&=-2,At&=-2),0>xt||0>At||0>=Et||0>=Nt||xt+Et>et||At+Nt>yt))return 0;if(N.v=xt,N.j=At,N.va=xt+Et,N.o=At+Nt,N.U=Et,N.T=Nt,N.da=x!=null&&0<x.da,N.da){if(!k(Et,Nt,G=[x.ib],xt=[x.hb]))return 0;N.ib=G[0],N.hb=xt[0]}return N.ob=x!=null&&x.ob,N.Kb=x==null||!x.Sd,N.da&&(N.ob=N.ib<3*et/4&&N.hb<3*yt/4,N.Kb=0),1}function yu(x){if(x==null)return 2;if(11>x.S){var N=x.f.RGBA;N.fb+=(x.height-1)*N.A,N.A=-N.A}else N=x.f.kb,x=x.height,N.O+=(x-1)*N.fa,N.fa=-N.fa,N.N+=(x-1>>1)*N.Ab,N.Ab=-N.Ab,N.W+=(x-1>>1)*N.Db,N.Db=-N.Db,N.F!=null&&(N.J+=(x-1)*N.lb,N.lb=-N.lb);return 0}function Aa(x,N,G,et){if(et==null||0>=x||0>=N)return 2;if(G!=null){if(G.Da){var yt=G.cd,xt=G.bd,At=-2&G.v,Et=-2&G.j;if(0>At||0>Et||0>=yt||0>=xt||At+yt>x||Et+xt>N)return 2;x=yt,N=xt}if(G.da){if(!k(x,N,yt=[G.ib],xt=[G.hb]))return 2;x=yt[0],N=xt[0]}}et.width=x,et.height=N;t:{var Nt=et.width,Pt=et.height;if(x=et.S,0>=Nt||0>=Pt||!(x>=wh&&13>x))x=2;else{if(0>=et.Rd&&et.sd==null){At=xt=yt=N=0;var Wt=(Et=Nt*kh[x])*Pt;if(11>x||(xt=(Pt+1)/2*(N=(Nt+1)/2),x==12&&(At=(yt=Nt)*Pt)),(Pt=s(Wt+2*xt+At))==null){x=1;break t}et.sd=Pt,11>x?((Nt=et.f.RGBA).eb=Pt,Nt.fb=0,Nt.A=Et,Nt.size=Wt):((Nt=et.f.kb).y=Pt,Nt.O=0,Nt.fa=Et,Nt.Fd=Wt,Nt.f=Pt,Nt.N=0+Wt,Nt.Ab=N,Nt.Cd=xt,Nt.ea=Pt,Nt.W=0+Wt+xt,Nt.Db=N,Nt.Ed=xt,x==12&&(Nt.F=Pt,Nt.J=0+Wt+2*xt),Nt.Tc=At,Nt.lb=yt)}if(N=1,yt=et.S,xt=et.width,At=et.height,yt>=wh&&13>yt)if(11>yt)x=et.f.RGBA,N&=(Et=Math.abs(x.A))*(At-1)+xt<=x.size,N&=Et>=xt*kh[yt],N&=x.eb!=null;else{x=et.f.kb,Et=(xt+1)/2,Wt=(At+1)/2,Nt=Math.abs(x.fa),Pt=Math.abs(x.Ab);var se=Math.abs(x.Db),Dt=Math.abs(x.lb),Xt=Dt*(At-1)+xt;N&=Nt*(At-1)+xt<=x.Fd,N&=Pt*(Wt-1)+Et<=x.Cd,N=(N&=se*(Wt-1)+Et<=x.Ed)&Nt>=xt&Pt>=Et&se>=Et,N&=x.y!=null,N&=x.f!=null,N&=x.ea!=null,yt==12&&(N&=Dt>=xt,N&=Xt<=x.Tc,N&=x.F!=null)}else N=0;x=N?0:2}}return x!=0||G!=null&&G.fd&&(x=yu(et)),x}var Sa=64,Zr=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],qn=24,zs=32,us=8,mo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];kt("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(x){return x},I.Predictor2=function(x,N,G){return N[G+0]},I.Predictor3=function(x,N,G){return N[G+1]},I.Predictor4=function(x,N,G){return N[G-1]},I.Predictor5=function(x,N,G){return $t($t(x,N[G+1]),N[G+0])},I.Predictor6=function(x,N,G){return $t(x,N[G-1])},I.Predictor7=function(x,N,G){return $t(x,N[G+0])},I.Predictor8=function(x,N,G){return $t(N[G-1],N[G+0])},I.Predictor9=function(x,N,G){return $t(N[G+0],N[G+1])},I.Predictor10=function(x,N,G){return $t($t(x,N[G-1]),$t(N[G+0],N[G+1]))},I.Predictor11=function(x,N,G){var et=N[G+0];return 0>=fe(et>>24&255,x>>24&255,(N=N[G-1])>>24&255)+fe(et>>16&255,x>>16&255,N>>16&255)+fe(et>>8&255,x>>8&255,N>>8&255)+fe(255&et,255&x,255&N)?et:x},I.Predictor12=function(x,N,G){var et=N[G+0];return(le((x>>24&255)+(et>>24&255)-((N=N[G-1])>>24&255))<<24|le((x>>16&255)+(et>>16&255)-(N>>16&255))<<16|le((x>>8&255)+(et>>8&255)-(N>>8&255))<<8|le((255&x)+(255&et)-(255&N)))>>>0},I.Predictor13=function(x,N,G){var et=N[G-1];return(re((x=$t(x,N[G+0]))>>24&255,et>>24&255)<<24|re(x>>16&255,et>>16&255)<<16|re(x>>8&255,et>>8&255)<<8|re(255&x,255&et))>>>0};var Do=I.PredictorAdd0;I.PredictorAdd1=Ce,kt("Predictor2","PredictorAdd2"),kt("Predictor3","PredictorAdd3"),kt("Predictor4","PredictorAdd4"),kt("Predictor5","PredictorAdd5"),kt("Predictor6","PredictorAdd6"),kt("Predictor7","PredictorAdd7"),kt("Predictor8","PredictorAdd8"),kt("Predictor9","PredictorAdd9"),kt("Predictor10","PredictorAdd10"),kt("Predictor11","PredictorAdd11"),kt("Predictor12","PredictorAdd12"),kt("Predictor13","PredictorAdd13");var rl=I.PredictorAdd2;Ue("ColorIndexInverseTransform","MapARGB","32b",function(x){return x>>8&255},function(x){return x}),Ue("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(x){return x},function(x){return x>>8&255});var yr,Rl=I.ColorIndexInverseTransform,cs=I.MapARGB,Ii=I.VP8LColorIndexInverseTransformAlpha,Ei=I.MapAlpha,E=I.VP8LPredictorsAdd=[];E.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var M,V,J,ut,bt,Tt,Rt,Vt,Yt,Ht,Bt,It,zt,Ut,Gt,te,ie,Zt,me,Te,Pe,Me,Ne,ze,Be,ke,qe,wn,Mn=s(511),on=s(2041),An=s(225),vr=s(767),hs=0,ar=on,Ea=An,Ci=vr,fs=Mn,wh=0,Ts=1,xh=2,Fa=3,Pc=4,Xu=5,Ll=6,Mc=7,_h=8,Yu=9,Ah=10,Ba=[2,3,7],Qu=[3,3,11],vu=[280,256,256,256,40],Sh=[0,1,1,1,0],Fc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ia=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ja=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ol=8,Ua=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],za=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ca=null,Sp=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Wf=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Eh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ep=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ds=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Vr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Yn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],qs=[],oi=[],go=[],Dl=1,Kf=2,il=[],ps=[];wa("UpsampleRgbLinePair",xa,3),wa("UpsampleBgrLinePair",ai,3),wa("UpsampleRgbaLinePair",ts,4),wa("UpsampleBgraLinePair",_a,4),wa("UpsampleArgbLinePair",kl,4),wa("UpsampleRgba4444LinePair",ho,2),wa("UpsampleRgb565LinePair",Oo,2);var bu=I.UpsampleRgbLinePair,$f=I.UpsampleBgrLinePair,Zu=I.UpsampleRgbaLinePair,Ch=I.UpsampleBgraLinePair,Pl=I.UpsampleArgbLinePair,Po=I.UpsampleRgba4444LinePair,Ml=I.UpsampleRgb565LinePair,qa=16,Ju=1<<qa-1,wu=-227,Fl=482,Th=6,Bl=0,ms=s(256),Nh=s(256),Cp=s(256),o0=s(256),l0=s(Fl-wu),u0=s(Fl-wu);fo("YuvToRgbRow",xa,3),fo("YuvToBgrRow",ai,3),fo("YuvToRgbaRow",ts,4),fo("YuvToBgraRow",_a,4),fo("YuvToArgbRow",kl,4),fo("YuvToRgba4444Row",ho,2),fo("YuvToRgb565Row",Oo,2);var vi=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],tc=[0,2,8],Bc=[8,7,6,4,4,2,2,2,1,1,1,1],Ic=1;this.WebPDecodeRGBA=function(x,N,G,et,yt){var xt=Ts,At=new ge,Et=new gn;At.ba=Et,Et.S=xt,Et.width=[Et.width],Et.height=[Et.height];var Nt=Et.width,Pt=Et.height,Wt=new Ke;if(Wt==null||x==null)var se=2;else t(Wt!=null),se=ia(x,N,G,Wt.width,Wt.height,Wt.Pd,Wt.Qd,Wt.format,null);if(se!=0?Nt=0:(Nt!=null&&(Nt[0]=Wt.width[0]),Pt!=null&&(Pt[0]=Wt.height[0]),Nt=1),Nt){Et.width=Et.width[0],Et.height=Et.height[0],et!=null&&(et[0]=Et.width),yt!=null&&(yt[0]=Et.height);t:{if(et=new Da,(yt=new Se).data=x,yt.w=N,yt.ha=G,yt.kd=1,N=[0],t(yt!=null),((x=ia(yt.data,yt.w,yt.ha,null,null,null,N,null,yt))==0||x==7)&&N[0]&&(x=4),(N=x)==0){if(t(At!=null),et.data=yt.data,et.w=yt.w+yt.offset,et.ha=yt.ha-yt.offset,et.put=nn,et.ac=Fi,et.bc=fa,et.ma=At,yt.xa){if((x=xs())==null){At=1;break t}if((function(Dt,Xt){var ee=[0],pe=[0],ne=[0];e:for(;;){if(Dt==null)return 0;if(Xt==null)return Dt.a=2,0;if(Dt.l=Xt,Dt.a=0,wt(Dt.m,Xt.data,Xt.w,Xt.ha),!Fs(Dt.m,ee,pe,ne)){Dt.a=3;break e}if(Dt.xb=Kf,Xt.width=ee[0],Xt.height=pe[0],!Ys(ee[0],pe[0],1,Dt,null))break e;return 1}return t(Dt.a!=0),0})(x,et)){if(et=(N=Aa(et.width,et.height,At.Oa,At.ba))==0){e:{et=x;n:for(;;){if(et==null){et=0;break e}if(t(et.s.yc!=null),t(et.s.Ya!=null),t(0<et.s.Wb),t((G=et.l)!=null),t((yt=G.ma)!=null),et.xb!=0){if(et.ca=yt.ba,et.tb=yt.tb,t(et.ca!=null),!po(yt.Oa,G,Fa)){et.a=2;break n}if(!Bi(et,G.width)||G.da)break n;if((G.da||un(et.ca.S))&&Ss(),11>et.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),et.ca.f.kb.F!=null&&Ss()),et.Pb&&0<et.s.ua&&et.s.vb.X==null&&!tt(et.s.vb,et.s.Wa.Xa)){et.a=1;break n}et.xb=0}if(!Xi(et,et.V,et.Ba,et.c,et.i,G.o,as))break n;yt.Dc=et.Ma,et=1;break e}t(et.a!=0),et=0}et=!et}et&&(N=x.a)}else N=x.a}else{if((x=new Qs)==null){At=1;break t}if(x.Fa=yt.na,x.P=yt.P,x.qc=yt.Sa,ga(x,et)){if((N=Aa(et.width,et.height,At.Oa,At.ba))==0){if(x.Aa=0,G=At.Oa,t((yt=x)!=null),G!=null){if(0<(Nt=0>(Nt=G.Md)?0:100<Nt?255:255*Nt/100)){for(Pt=Wt=0;4>Pt;++Pt)12>(se=yt.pb[Pt]).lc&&(se.ia=Nt*Bc[0>se.lc?0:se.lc]>>3),Wt|=se.ia;Wt&&(alert("todo:VP8InitRandom"),yt.ia=1)}yt.Ga=G.Id,100<yt.Ga?yt.Ga=100:0>yt.Ga&&(yt.Ga=0)}(function(Dt,Xt){if(Dt==null)return 0;if(Xt==null)return Kn(Dt,2,"NULL VP8Io parameter in VP8Decode().");if(!Dt.cb&&!ga(Dt,Xt))return 0;if(t(Dt.cb),Xt.ac==null||Xt.ac(Xt)){Xt.ob&&(Dt.L=0);var ee=tc[Dt.L];if(Dt.L==2?(Dt.yb=0,Dt.zb=0):(Dt.yb=Xt.v-ee>>4,Dt.zb=Xt.j-ee>>4,0>Dt.yb&&(Dt.yb=0),0>Dt.zb&&(Dt.zb=0)),Dt.Va=Xt.o+15+ee>>4,Dt.Hb=Xt.va+15+ee>>4,Dt.Hb>Dt.za&&(Dt.Hb=Dt.za),Dt.Va>Dt.Ub&&(Dt.Va=Dt.Ub),0<Dt.L){var pe=Dt.ed;for(ee=0;4>ee;++ee){var ne;if(Dt.Qa.Cb){var de=Dt.Qa.Lb[ee];Dt.Qa.Fb||(de+=pe.Tb)}else de=pe.Tb;for(ne=0;1>=ne;++ne){var be=Dt.gd[ee][ne],Oe=de;if(pe.Pc&&(Oe+=pe.vd[0],ne&&(Oe+=pe.od[0])),0<(Oe=0>Oe?0:63<Oe?63:Oe)){var Ae=Oe;0<pe.wb&&(Ae=4<pe.wb?Ae>>2:Ae>>1)>9-pe.wb&&(Ae=9-pe.wb),1>Ae&&(Ae=1),be.dd=Ae,be.tc=2*Oe+Ae,be.ld=40<=Oe?2:15<=Oe?1:0}else be.tc=0;be.La=ne}}}ee=0}else Kn(Dt,6,"Frame setup failed"),ee=Dt.a;if(ee=ee==0){if(ee){Dt.$c=0,0<Dt.Aa||(Dt.Ic=Ic);e:{ee=Dt.Ic,pe=4*(Ae=Dt.za);var tn=32*Ae,Ve=Ae+1,Sn=0<Dt.L?Ae*(0<Dt.Aa?2:1):0,Ye=(Dt.Aa==2?2:1)*Ae;if((be=pe+832+(ne=3*(16*ee+tc[Dt.L])/2*tn)+(de=Dt.Fa!=null&&0<Dt.Fa.length?Dt.Kc.c*Dt.Kc.i:0))!=be)ee=0;else{if(be>Dt.Vb){if(Dt.Vb=0,Dt.Ec=s(be),Dt.Fc=0,Dt.Ec==null){ee=Kn(Dt,1,"no memory during frame initialization.");break e}Dt.Vb=be}be=Dt.Ec,Oe=Dt.Fc,Dt.Ac=be,Dt.Bc=Oe,Oe+=pe,Dt.Gd=l(tn,Co),Dt.Hd=0,Dt.rb=l(Ve+1,js),Dt.sb=1,Dt.wa=Sn?l(Sn,Yi):null,Dt.Y=0,Dt.D.Nb=0,Dt.D.wa=Dt.wa,Dt.D.Y=Dt.Y,0<Dt.Aa&&(Dt.D.Y+=Ae),t(!0),Dt.oc=be,Dt.pc=Oe,Oe+=832,Dt.ya=l(Ye,ma),Dt.aa=0,Dt.D.ya=Dt.ya,Dt.D.aa=Dt.aa,Dt.Aa==2&&(Dt.D.aa+=Ae),Dt.R=16*Ae,Dt.B=8*Ae,Ae=(tn=tc[Dt.L])*Dt.R,tn=tn/2*Dt.B,Dt.sa=be,Dt.ta=Oe+Ae,Dt.qa=Dt.sa,Dt.ra=Dt.ta+16*ee*Dt.R+tn,Dt.Ha=Dt.qa,Dt.Ia=Dt.ra+8*ee*Dt.B+tn,Dt.$c=0,Oe+=ne,Dt.mb=de?be:null,Dt.nb=de?Oe:null,t(Oe+de<=Dt.Fc+Dt.Vb),Al(Dt),i(Dt.Ac,Dt.Bc,0,pe),ee=1}}if(ee){if(Xt.ka=0,Xt.y=Dt.sa,Xt.O=Dt.ta,Xt.f=Dt.qa,Xt.N=Dt.ra,Xt.ea=Dt.Ha,Xt.Vd=Dt.Ia,Xt.fa=Dt.R,Xt.Rc=Dt.B,Xt.F=null,Xt.J=0,!hs){for(ee=-255;255>=ee;++ee)Mn[255+ee]=0>ee?-ee:ee;for(ee=-1020;1020>=ee;++ee)on[1020+ee]=-128>ee?-128:127<ee?127:ee;for(ee=-112;112>=ee;++ee)An[112+ee]=-16>ee?-16:15<ee?15:ee;for(ee=-255;510>=ee;++ee)vr[255+ee]=0>ee?0:255<ee?255:ee;hs=1}Rt=Zs,Vt=Ko,Ht=Si,Bt=El,It=To,Yt=Sl,zt=Zo,Ut=na,Gt=gt,te=Ot,ie=Jo,Zt=U,me=qt,Te=Qt,Pe=uo,Me=co,Ne=Yo,ze=Qo,oi[0]=ko,oi[1]=zn,oi[2]=Us,oi[3]=ao,oi[4]=os,oi[5]=gu,oi[6]=Pr,oi[7]=Ji,oi[8]=Ro,oi[9]=ls,qs[0]=_s,qs[1]=pu,qs[2]=mu,qs[3]=Qi,qs[4]=Zi,qs[5]=No,qs[6]=so,go[0]=Xo,go[1]=du,go[2]=Js,go[3]=Lo,go[4]=Yr,go[5]=Cl,go[6]=Pa,ee=1}else ee=0}ee&&(ee=(function($n,Wr){for($n.M=0;$n.M<$n.Va;++$n.M){var Rn,We=$n.Jc[$n.M&$n.Xb],Ie=$n.m,ei=$n;for(Rn=0;Rn<ei.za;++Rn){var yn=Ie,Dn=ei,br=Dn.Ac,ji=Dn.Bc+4*Rn,gs=Dn.zc,Fr=Dn.ya[Dn.aa+Rn];if(Dn.Qa.Bb?Fr.$b=ot(yn,Dn.Pa.jb[0])?2+ot(yn,Dn.Pa.jb[2]):ot(yn,Dn.Pa.jb[1]):Fr.$b=0,Dn.kc&&(Fr.Ad=ot(yn,Dn.Bd)),Fr.Za=!ot(yn,145)+0,Fr.Za){var Ti=Fr.Ob,Ns=0;for(Dn=0;4>Dn;++Dn){var Ni,jn=gs[0+Dn];for(Ni=0;4>Ni;++Ni){jn=ds[br[ji+Ni]][jn];for(var or=Eh[ot(yn,jn[0])];0<or;)or=Eh[2*or+ot(yn,jn[or])];jn=-or,br[ji+Ni]=jn}n(Ti,Ns,br,ji,4),Ns+=4,gs[0+Dn]=jn}}else jn=ot(yn,156)?ot(yn,128)?1:3:ot(yn,163)?2:0,Fr.Ob[0]=jn,i(br,ji,jn,4),i(gs,0,jn,4);Fr.Dd=ot(yn,142)?ot(yn,114)?ot(yn,183)?1:3:2:0}if(ei.m.Ka)return Kn($n,7,"Premature end-of-partition0 encountered.");for(;$n.ja<$n.za;++$n.ja){if(ei=We,yn=(Ie=$n).rb[Ie.sb-1],br=Ie.rb[Ie.sb+Ie.ja],Rn=Ie.ya[Ie.aa+Ie.ja],ji=Ie.kc?Rn.Ad:0)yn.la=br.la=0,Rn.Za||(yn.Na=br.Na=0),Rn.Hc=0,Rn.Gc=0,Rn.ia=0;else{var ni,fr;if(yn=br,br=ei,ji=Ie.Pa.Xc,gs=Ie.ya[Ie.aa+Ie.ja],Fr=Ie.pb[gs.$b],Dn=gs.ad,Ti=0,Ns=Ie.rb[Ie.sb-1],jn=Ni=0,i(Dn,Ti,0,384),gs.Za)var Ui=0,ri=ji[3];else{or=s(16);var lr=yn.Na+Ns.Na;if(lr=Ca(br,ji[1],lr,Fr.Eb,0,or,0),yn.Na=Ns.Na=(0<lr)+0,1<lr)Rt(or,0,Dn,Ti);else{var bi=or[0]+3>>3;for(or=0;256>or;or+=16)Dn[Ti+or]=bi}Ui=1,ri=ji[0]}var wr=15&yn.la,ki=15&Ns.la;for(or=0;4>or;++or){var Ri=1&ki;for(bi=fr=0;4>bi;++bi)wr=wr>>1|(Ri=(lr=Ca(br,ri,lr=Ri+(1&wr),Fr.Sc,Ui,Dn,Ti))>Ui)<<7,fr=fr<<2|(3<lr?3:1<lr?2:Dn[Ti+0]!=0),Ti+=16;wr>>=4,ki=ki>>1|Ri<<7,Ni=(Ni<<8|fr)>>>0}for(ri=wr,Ui=ki>>4,ni=0;4>ni;ni+=2){for(fr=0,wr=yn.la>>4+ni,ki=Ns.la>>4+ni,or=0;2>or;++or){for(Ri=1&ki,bi=0;2>bi;++bi)lr=Ri+(1&wr),wr=wr>>1|(Ri=0<(lr=Ca(br,ji[2],lr,Fr.Qc,0,Dn,Ti)))<<3,fr=fr<<2|(3<lr?3:1<lr?2:Dn[Ti+0]!=0),Ti+=16;wr>>=2,ki=ki>>1|Ri<<5}jn|=fr<<4*ni,ri|=wr<<4<<ni,Ui|=(240&ki)<<ni}yn.la=ri,Ns.la=Ui,gs.Hc=Ni,gs.Gc=jn,gs.ia=43690&jn?0:Fr.ia,ji=!(Ni|jn)}if(0<Ie.L&&(Ie.wa[Ie.Y+Ie.ja]=Ie.gd[Rn.$b][Rn.Za],Ie.wa[Ie.Y+Ie.ja].La|=!ji),ei.Ka)return Kn($n,7,"Premature end-of-file encountered.")}if(Al($n),Ie=Wr,ei=1,Rn=(We=$n).D,yn=0<We.L&&We.M>=We.zb&&We.M<=We.Va,We.Aa==0)e:{if(Rn.M=We.M,Rn.uc=yn,Cs(We,Rn),ei=1,Rn=(fr=We.D).Nb,yn=(jn=tc[We.L])*We.R,br=jn/2*We.B,or=16*Rn*We.R,bi=8*Rn*We.B,ji=We.sa,gs=We.ta-yn+or,Fr=We.qa,Dn=We.ra-br+bi,Ti=We.Ha,Ns=We.Ia-br+bi,ki=(wr=fr.M)==0,Ni=wr>=We.Va-1,We.Aa==2&&Cs(We,fr),fr.uc)for(Ri=(lr=We).D.M,t(lr.D.uc),fr=lr.yb;fr<lr.Hb;++fr){Ui=fr,ri=Ri;var Nr=(rr=(Li=lr).D).Nb;ni=Li.R;var rr=rr.wa[rr.Y+Ui],ks=Li.sa,li=Li.ta+16*Nr*ni+16*Ui,fn=rr.dd,dn=rr.tc;if(dn!=0)if(t(3<=dn),Li.L==1)0<Ui&&Me(ks,li,ni,dn+4),rr.La&&ze(ks,li,ni,dn),0<ri&&Pe(ks,li,ni,dn+4),rr.La&&Ne(ks,li,ni,dn);else{var ur=Li.B,sa=Li.qa,Ha=Li.ra+8*Nr*ur+8*Ui,Hs=Li.Ha,Li=Li.Ia+8*Nr*ur+8*Ui;Nr=rr.ld,0<Ui&&(Ut(ks,li,ni,dn+4,fn,Nr),te(sa,Ha,Hs,Li,ur,dn+4,fn,Nr)),rr.La&&(Zt(ks,li,ni,dn,fn,Nr),Te(sa,Ha,Hs,Li,ur,dn,fn,Nr)),0<ri&&(zt(ks,li,ni,dn+4,fn,Nr),Gt(sa,Ha,Hs,Li,ur,dn+4,fn,Nr)),rr.La&&(ie(ks,li,ni,dn,fn,Nr),me(sa,Ha,Hs,Li,ur,dn,fn,Nr))}}if(We.ia&&alert("todo:DitherRow"),Ie.put!=null){if(fr=16*wr,wr=16*(wr+1),ki?(Ie.y=We.sa,Ie.O=We.ta+or,Ie.f=We.qa,Ie.N=We.ra+bi,Ie.ea=We.Ha,Ie.W=We.Ia+bi):(fr-=jn,Ie.y=ji,Ie.O=gs,Ie.f=Fr,Ie.N=Dn,Ie.ea=Ti,Ie.W=Ns),Ni||(wr-=jn),wr>Ie.o&&(wr=Ie.o),Ie.F=null,Ie.J=null,We.Fa!=null&&0<We.Fa.length&&fr<wr&&(Ie.J=hr(We,Ie,fr,wr-fr),Ie.F=We.mb,Ie.F==null&&Ie.F.length==0)){ei=Kn(We,3,"Could not decode alpha data.");break e}fr<Ie.j&&(jn=Ie.j-fr,fr=Ie.j,t(!(1&jn)),Ie.O+=We.R*jn,Ie.N+=We.B*(jn>>1),Ie.W+=We.B*(jn>>1),Ie.F!=null&&(Ie.J+=Ie.width*jn)),fr<wr&&(Ie.O+=Ie.v,Ie.N+=Ie.v>>1,Ie.W+=Ie.v>>1,Ie.F!=null&&(Ie.J+=Ie.v),Ie.ka=fr-Ie.j,Ie.U=Ie.va-Ie.v,Ie.T=wr-fr,ei=Ie.put(Ie))}Rn+1!=We.Ic||Ni||(n(We.sa,We.ta-yn,ji,gs+16*We.R,yn),n(We.qa,We.ra-br,Fr,Dn+8*We.B,br),n(We.Ha,We.Ia-br,Ti,Ns+8*We.B,br))}if(!ei)return Kn($n,6,"Output aborted.")}return 1})(Dt,Xt)),Xt.bc!=null&&Xt.bc(Xt),ee&=1}return ee?(Dt.cb=0,ee):0})(x,et)||(N=x.a)}}else N=x.a}N==0&&At.Oa!=null&&At.Oa.fd&&(N=yu(At.ba))}At=N}xt=At!=0?null:11>xt?Et.f.RGBA.eb:Et.f.kb.y}else xt=null;return xt};var kh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(I,dt){for(var nt="",B=0;B<4;B++)nt+=String.fromCharCode(I[dt++]);return nt}function f(I,dt){return I[dt+0]|I[dt+1]<<8}function p(I,dt){return(I[dt+0]|I[dt+1]<<8|I[dt+2]<<16)>>>0}function y(I,dt){return(I[dt+0]|I[dt+1]<<8|I[dt+2]<<16|I[dt+3]<<24)>>>0}new c;var m=[0],w=[0],b=[],_=new c,v=r,A=(function(I,dt){var nt={},B=0,Z=!1,D=0,mt=0;if(nt.frames=[],!(function(R,K){for(var rt=0;rt<4;rt++)if(R[K+rt]!="RIFF".charCodeAt(rt))return!0;return!1})(I,dt)){for(y(I,dt+=4),dt+=8;dt<I.length;){var it=h(I,dt),st=y(I,dt+=4);dt+=4;var vt=st+(1&st);switch(it){case"VP8 ":case"VP8L":nt.frames[B]===void 0&&(nt.frames[B]={}),($=nt.frames[B]).src_off=Z?mt:dt-8,$.src_size=D+st+8,B++,Z&&(Z=!1,D=0,mt=0);break;case"VP8X":($=nt.header={}).feature_flags=I[dt];var wt=dt+4;$.canvas_width=1+p(I,wt),wt+=3,$.canvas_height=1+p(I,wt),wt+=3;break;case"ALPH":Z=!0,D=vt+8,mt=dt-8;break;case"ANIM":($=nt.header).bgcolor=y(I,dt),wt=dt+4,$.loop_count=f(I,wt),wt+=2;break;case"ANMF":var Ft,$;($=nt.frames[B]={}).offset_x=2*p(I,dt),dt+=3,$.offset_y=2*p(I,dt),dt+=3,$.width=1+p(I,dt),dt+=3,$.height=1+p(I,dt),dt+=3,$.duration=p(I,dt),dt+=3,Ft=I[dt++],$.dispose=1&Ft,$.blend=Ft>>1&1}it!="ANMF"&&(dt+=vt)}return nt}})(v,0);A.response=v,A.rgbaoutput=!0,A.dataurl=!1;var C=A.header?A.header:null,S=A.frames?A.frames:null;if(C){C.loop_counter=C.loop_count,m=[C.canvas_height],w=[C.canvas_width];for(var O=0;O<S.length&&S[O].blend!=0;O++);}var q=S[0],H=_.WebPDecodeRGBA(v,q.src_off,q.src_size,w,m);q.rgba=H,q.imgwidth=w[0],q.imgheight=m[0];for(var Q=0;Q<w[0]*m[0]*4;Q++)b[Q]=H[Q];return this.width=w,this.height=m,this.data=b,this}function t9(){var r,t=this.internal.__metadata__.metadata,e=unescape(encodeURIComponent(t));r=this.internal.__metadata__.rawXml?e:'<x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceUri+'"><jspdf:metadata>'+e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+"</jspdf:metadata></rdf:Description></rdf:RDF></x:xmpmeta>",this.internal.__metadata__.metadataObjectNumber=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+r.length+" >>"),this.internal.write("stream"),this.internal.write(r),this.internal.write("endstream"),this.internal.write("endobj")}function e9(){this.internal.__metadata__.metadataObjectNumber&&this.internal.write("/Metadata "+this.internal.__metadata__.metadataObjectNumber+" 0 R")}(function(r){var t,e,n,i,s,l,o,c,h,f=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new c,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new l,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new l,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new p(this),t=this.internal.f2,e=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,l=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,h=new f}]);var p=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=R;Object.defineProperty(this,"pdf",{get:function(){return K}});var rt=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return rt},set:function(tt){rt=!!tt}});var pt=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return pt},set:function(tt){pt=!!tt}});var ct=0;Object.defineProperty(this,"posX",{get:function(){return ct},set:function(tt){isNaN(tt)||(ct=tt)}});var F=0;Object.defineProperty(this,"posY",{get:function(){return F},set:function(tt){isNaN(tt)||(F=tt)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(tt){var X;typeof tt=="number"?X=[tt,tt,tt,tt]:((X=new Array(4))[0]=tt[0],X[1]=tt.length>=2?tt[1]:X[0],X[2]=tt.length>=3?tt[2]:X[0],X[3]=tt.length>=4?tt[3]:X[1]),h.margin=X}});var j=!1;Object.defineProperty(this,"autoPaging",{get:function(){return j},set:function(tt){j=tt}});var ht=0;Object.defineProperty(this,"lastBreak",{get:function(){return ht},set:function(tt){ht=tt}});var ot=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ot},set:function(tt){ot=tt}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(tt){tt instanceof f&&(h=tt)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(tt){h.path=tt}});var lt=[];Object.defineProperty(this,"ctxStack",{get:function(){return lt},set:function(tt){lt=tt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(tt){var X;X=y(tt),this.ctx.fillStyle=X.style,this.ctx.isFillTransparent=X.a===0,this.ctx.fillOpacity=X.a,this.pdf.setFillColor(X.r,X.g,X.b,{a:X.a}),this.pdf.setTextColor(X.r,X.g,X.b,{a:X.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(tt){var X=y(tt);this.ctx.strokeStyle=X.style,this.ctx.isStrokeTransparent=X.a===0,this.ctx.strokeOpacity=X.a,X.a===0?this.pdf.setDrawColor(255,255,255):(X.a,this.pdf.setDrawColor(X.r,X.g,X.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(tt){["butt","round","square"].indexOf(tt)!==-1&&(this.ctx.lineCap=tt,this.pdf.setLineCap(tt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(tt){isNaN(tt)||(this.ctx.lineWidth=tt,this.pdf.setLineWidth(tt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(tt){["bevel","round","miter"].indexOf(tt)!==-1&&(this.ctx.lineJoin=tt,this.pdf.setLineJoin(tt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(tt){isNaN(tt)||(this.ctx.miterLimit=tt,this.pdf.setMiterLimit(tt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(tt){this.ctx.textBaseline=tt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(tt){["right","end","center","left","start"].indexOf(tt)!==-1&&(this.ctx.textAlign=tt)}});var ft=null,Mt=null,W=null;Object.defineProperty(this,"fontFaces",{get:function(){return W},set:function(tt){ft=null,Mt=null,W=tt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(tt){var X;if(this.ctx.font=tt,(X=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(tt))!==null){var P=X[1];X[2];var k=X[3],z=X[4];X[5];var _t=X[6],kt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(z)[2];z=Math.floor(kt==="px"?parseFloat(z)*this.pdf.internal.scaleFactor:kt==="em"?parseFloat(z)*this.pdf.getFontSize():parseFloat(z)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(z);var Ct=(function(Ue){var Xn,Xe,rn=[],sn=Ue.trim();if(sn==="")return Xv;if(sn in VE)return[VE[sn]];for(;sn!=="";){switch(Xe=null,Xn=(sn=KE(sn)).charAt(0)){case'"':case"'":Xe=$j(sn.substring(1),Xn);break;default:Xe=Xj(sn)}if(Xe===null||(rn.push(Xe[0]),(sn=KE(Xe[1]))!==""&&sn.charAt(0)!==","))return Xv;sn=sn.replace(/^,/,"")}return rn})(_t);if(this.fontFaces){var $t=(function(Ue,Xn){var Xe=Ue.getFontList(),rn=JSON.stringify(Xe);if(ft===null||Mt!==rn){var sn=(function(Ee){var Je=[];return Object.keys(Ee).forEach(function(Gn){Ee[Gn].forEach(function(un){var ve=null;switch(un){case"bold":ve={family:Gn,weight:"bold"};break;case"italic":ve={family:Gn,style:"italic"};break;case"bolditalic":ve={family:Gn,weight:"bold",style:"italic"};break;case"":case"normal":ve={family:Gn}}ve!==null&&(ve.ref={name:Gn,style:un},Je.push(ve))})}),Je})(Xe);ft=(function(Ee){for(var Je={},Gn=0;Gn<Ee.length;++Gn){var un=$v(Ee[Gn]),ve=un.family,Jn=un.stretch,gn=un.style,Ke=un.weight;Je[ve]=Je[ve]||{},Je[ve][Jn]=Je[ve][Jn]||{},Je[ve][Jn][gn]=Je[ve][Jn][gn]||{},Je[ve][Jn][gn][Ke]=un}return Je})(sn.concat(Xn)),Mt=rn}return ft})(this.pdf,this.fontFaces),le=Ct.map(function(Ue){return{family:Ue,stretch:"normal",weight:k,style:P}}),re=(function(Ue,Xn,Xe){for(var rn=(Xe=Xe||{}).defaultFontFamily||"times",sn=Object.assign({},Kj,Xe.genericFontFamilies||{}),Ee=null,Je=null,Gn=0;Gn<Xn.length;++Gn)if(sn[(Ee=$v(Xn[Gn])).family]&&(Ee.family=sn[Ee.family]),Ue.hasOwnProperty(Ee.family)){Je=Ue[Ee.family];break}if(!(Je=Je||Ue[rn]))throw new Error("Could not find a font-family for the rule '"+WE(Ee)+"' and default family '"+rn+"'.");if(Je=(function(un,ve){if(ve[un])return ve[un];var Jn=Kb[un],gn=Jn<=Kb.normal?-1:1,Ke=GE(ve,gC,Jn,gn);if(!Ke)throw new Error("Could not find a matching font-stretch value for "+un);return Ke})(Ee.stretch,Je),Je=(function(un,ve){if(ve[un])return ve[un];for(var Jn=mC[un],gn=0;gn<Jn.length;++gn)if(ve[Jn[gn]])return ve[Jn[gn]];throw new Error("Could not find a matching font-style for "+un)})(Ee.style,Je),!(Je=(function(un,ve){if(ve[un])return ve[un];if(un===400&&ve[500])return ve[500];if(un===500&&ve[400])return ve[400];var Jn=Wj[un],gn=GE(ve,yC,Jn,un<400?-1:1);if(!gn)throw new Error("Could not find a matching font-weight for value "+un);return gn})(Ee.weight,Je)))throw new Error("Failed to resolve a font for the rule '"+WE(Ee)+"'.");return Je})($t,le);this.pdf.setFont(re.ref.name,re.ref.style)}else{var fe="";(k==="bold"||parseInt(k,10)>=700||P==="bold")&&(fe="bold"),P==="italic"&&(fe+="italic"),fe.length===0&&(fe="normal");for(var Ce="",De={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Fe=0;Fe<Ct.length;Fe++){if(this.pdf.internal.getFont(Ct[Fe],fe,{noFallback:!0,disableWarning:!0})!==void 0){Ce=Ct[Fe];break}if(fe==="bolditalic"&&this.pdf.internal.getFont(Ct[Fe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ce=Ct[Fe],fe="bold";else if(this.pdf.internal.getFont(Ct[Fe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ce=Ct[Fe],fe="normal";break}}if(Ce===""){for(var ln=0;ln<Ct.length;ln++)if(De[Ct[ln]]){Ce=De[Ct[ln]];break}}Ce=Ce===""?"Times":Ce,this.pdf.setFont(Ce,fe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(tt){this.ctx.globalCompositeOperation=tt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(tt){this.ctx.globalAlpha=tt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(tt){this.ctx.lineDashOffset=tt,$.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(tt){this.ctx.lineDash=tt,$.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(tt){this.ctx.ignoreClearRect=!!tt}})};p.prototype.setLineDash=function(R){this.lineDash=R},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){S.call(this,"fill",!1)},p.prototype.stroke=function(){S.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(R,K){if(isNaN(R)||isNaN(K))throw $r.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var rt=this.ctx.transform.applyToPoint(new l(R,K));this.path.push({type:"mt",x:rt.x,y:rt.y}),this.ctx.lastPoint=new l(R,K)},p.prototype.closePath=function(){var R=new l(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&Lr(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){R=new l(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(R.x,R.y)},p.prototype.lineTo=function(R,K){if(isNaN(R)||isNaN(K))throw $r.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var rt=this.ctx.transform.applyToPoint(new l(R,K));this.path.push({type:"lt",x:rt.x,y:rt.y}),this.ctx.lastPoint=new l(rt.x,rt.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),S.call(this,null,!0)},p.prototype.quadraticCurveTo=function(R,K,rt,pt){if(isNaN(rt)||isNaN(pt)||isNaN(R)||isNaN(K))throw $r.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ct=this.ctx.transform.applyToPoint(new l(rt,pt)),F=this.ctx.transform.applyToPoint(new l(R,K));this.path.push({type:"qct",x1:F.x,y1:F.y,x:ct.x,y:ct.y}),this.ctx.lastPoint=new l(ct.x,ct.y)},p.prototype.bezierCurveTo=function(R,K,rt,pt,ct,F){if(isNaN(ct)||isNaN(F)||isNaN(R)||isNaN(K)||isNaN(rt)||isNaN(pt))throw $r.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var j=this.ctx.transform.applyToPoint(new l(ct,F)),ht=this.ctx.transform.applyToPoint(new l(R,K)),ot=this.ctx.transform.applyToPoint(new l(rt,pt));this.path.push({type:"bct",x1:ht.x,y1:ht.y,x2:ot.x,y2:ot.y,x:j.x,y:j.y}),this.ctx.lastPoint=new l(j.x,j.y)},p.prototype.arc=function(R,K,rt,pt,ct,F){if(isNaN(R)||isNaN(K)||isNaN(rt)||isNaN(pt)||isNaN(ct))throw $r.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(F=!!F,!this.ctx.transform.isIdentity){var j=this.ctx.transform.applyToPoint(new l(R,K));R=j.x,K=j.y;var ht=this.ctx.transform.applyToPoint(new l(0,rt)),ot=this.ctx.transform.applyToPoint(new l(0,0));rt=Math.sqrt(Math.pow(ht.x-ot.x,2)+Math.pow(ht.y-ot.y,2))}Math.abs(ct-pt)>=2*Math.PI&&(pt=0,ct=2*Math.PI),this.path.push({type:"arc",x:R,y:K,radius:rt,startAngle:pt,endAngle:ct,counterclockwise:F})},p.prototype.arcTo=function(R,K,rt,pt,ct){throw new Error("arcTo not implemented.")},p.prototype.rect=function(R,K,rt,pt){if(isNaN(R)||isNaN(K)||isNaN(rt)||isNaN(pt))throw $r.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,K),this.lineTo(R+rt,K),this.lineTo(R+rt,K+pt),this.lineTo(R,K+pt),this.lineTo(R,K),this.lineTo(R+rt,K),this.lineTo(R,K)},p.prototype.fillRect=function(R,K,rt,pt){if(isNaN(R)||isNaN(K)||isNaN(rt)||isNaN(pt))throw $r.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ct={};this.lineCap!=="butt"&&(ct.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ct.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,K,rt,pt),this.fill(),ct.hasOwnProperty("lineCap")&&(this.lineCap=ct.lineCap),ct.hasOwnProperty("lineJoin")&&(this.lineJoin=ct.lineJoin)}},p.prototype.strokeRect=function(R,K,rt,pt){if(isNaN(R)||isNaN(K)||isNaN(rt)||isNaN(pt))throw $r.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");w.call(this)||(this.beginPath(),this.rect(R,K,rt,pt),this.stroke())},p.prototype.clearRect=function(R,K,rt,pt){if(isNaN(R)||isNaN(K)||isNaN(rt)||isNaN(pt))throw $r.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,K,rt,pt))},p.prototype.save=function(R){R=typeof R!="boolean"||R;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,rt=0;rt<this.pdf.internal.getNumberOfPages();rt++)this.pdf.setPage(rt+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var pt=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=pt}},p.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,rt=0;rt<this.pdf.internal.getNumberOfPages();rt++)this.pdf.setPage(rt+1),this.pdf.internal.out("Q");this.pdf.setPage(K),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(R){var K,rt,pt,ct;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))K=0,rt=0,pt=0,ct=0;else{var F=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(F!==null)K=parseInt(F[1]),rt=parseInt(F[2]),pt=parseInt(F[3]),ct=1;else if((F=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)K=parseInt(F[1]),rt=parseInt(F[2]),pt=parseInt(F[3]),ct=parseFloat(F[4]);else{if(ct=1,typeof R=="string"&&R.charAt(0)!=="#"){var j=new lC(R);R=j.ok?j.toHex():"#000000"}R.length===4?(K=R.substring(1,2),K+=K,rt=R.substring(2,3),rt+=rt,pt=R.substring(3,4),pt+=pt):(K=R.substring(1,3),rt=R.substring(3,5),pt=R.substring(5,7)),K=parseInt(K,16),rt=parseInt(rt,16),pt=parseInt(pt,16)}}return{r:K,g:rt,b:pt,a:ct,style:R}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},w=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(R,K,rt,pt){if(isNaN(K)||isNaN(rt)||typeof R!="string")throw $r.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(pt=isNaN(pt)?void 0:pt,!m.call(this)){var ct=vt(this.ctx.transform.rotation),F=this.ctx.transform.scaleX;B.call(this,{text:R,x:K,y:rt,scale:F,angle:ct,align:this.textAlign,maxWidth:pt})}},p.prototype.strokeText=function(R,K,rt,pt){if(isNaN(K)||isNaN(rt)||typeof R!="string")throw $r.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!w.call(this)){pt=isNaN(pt)?void 0:pt;var ct=vt(this.ctx.transform.rotation),F=this.ctx.transform.scaleX;B.call(this,{text:R,x:K,y:rt,scale:F,renderingMode:"stroke",angle:ct,align:this.textAlign,maxWidth:pt})}},p.prototype.measureText=function(R){if(typeof R!="string")throw $r.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,rt=this.pdf.internal.scaleFactor,pt=K.internal.getFontSize(),ct=K.getStringUnitWidth(R)*pt/K.internal.scaleFactor;return new function(F){var j=(F=F||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return j}}),this}({width:ct*=Math.round(96*rt/72*1e4)/1e4})},p.prototype.scale=function(R,K){if(isNaN(R)||isNaN(K))throw $r.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var rt=new c(R,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(rt)},p.prototype.rotate=function(R){if(isNaN(R))throw $r.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new c(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},p.prototype.translate=function(R,K){if(isNaN(R)||isNaN(K))throw $r.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var rt=new c(1,0,0,1,R,K);this.ctx.transform=this.ctx.transform.multiply(rt)},p.prototype.transform=function(R,K,rt,pt,ct,F){if(isNaN(R)||isNaN(K)||isNaN(rt)||isNaN(pt)||isNaN(ct)||isNaN(F))throw $r.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var j=new c(R,K,rt,pt,ct,F);this.ctx.transform=this.ctx.transform.multiply(j)},p.prototype.setTransform=function(R,K,rt,pt,ct,F){R=isNaN(R)?1:R,K=isNaN(K)?0:K,rt=isNaN(rt)?0:rt,pt=isNaN(pt)?1:pt,ct=isNaN(ct)?0:ct,F=isNaN(F)?0:F,this.ctx.transform=new c(R,K,rt,pt,ct,F)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(R,K,rt,pt,ct,F,j,ht,ot){var lt=this.pdf.getImageProperties(R),ft=1,Mt=1,W=1,tt=1;pt!==void 0&&ht!==void 0&&(W=ht/pt,tt=ot/ct,ft=lt.width/pt*ht/pt,Mt=lt.height/ct*ot/ct),F===void 0&&(F=K,j=rt,K=0,rt=0),pt!==void 0&&ht===void 0&&(ht=pt,ot=ct),pt===void 0&&ht===void 0&&(ht=lt.width,ot=lt.height);var X=this.ctx.transform.decompose(),P=vt(X.rotate.shx),k=new c,z=(k=(k=(k=k.multiply(X.translate)).multiply(X.skew)).multiply(X.scale)).applyToRectangle(new o(F-K*W,j-rt*tt,pt*ft,ct*Mt));if(this.autoPaging){for(var _t,kt=_.call(this,z),Ct=[],$t=0;$t<kt.length;$t+=1)Ct.indexOf(kt[$t])===-1&&Ct.push(kt[$t]);C(Ct);for(var le=Ct[0],re=Ct[Ct.length-1],fe=le;fe<re+1;fe++){this.pdf.setPage(fe);var Ce=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],De=fe===1?this.posY+this.margin[0]:this.margin[0],Fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ln=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ue=fe===1?0:Fe+(fe-2)*ln;if(this.ctx.clip_path.length!==0){var Xn=this.path;_t=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(_t,this.posX+this.margin[3],-Ue+De+this.ctx.prevPageLastElemOffset),O.call(this,"fill",!0),this.path=Xn}var Xe=JSON.parse(JSON.stringify(z));Xe=A([Xe],this.posX+this.margin[3],-Ue+De+this.ctx.prevPageLastElemOffset)[0];var rn=(fe>le||fe<re)&&b.call(this);rn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ce,ln,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",Xe.x,Xe.y,Xe.w,Xe.h,null,null,P),rn&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(R,"JPEG",z.x,z.y,z.w,z.h,null,null,P)};var _=function(R,K,rt){var pt=[];K=K||this.pdf.internal.pageSize.width,rt=rt||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ct=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":pt.push(Math.floor((R.y+ct)/rt)+1);break;case"arc":pt.push(Math.floor((R.y+ct-R.radius)/rt)+1),pt.push(Math.floor((R.y+ct+R.radius)/rt)+1);break;case"qct":var F=wt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);pt.push(Math.floor((F.y+ct)/rt)+1),pt.push(Math.floor((F.y+F.h+ct)/rt)+1);break;case"bct":var j=Ft(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);pt.push(Math.floor((j.y+ct)/rt)+1),pt.push(Math.floor((j.y+j.h+ct)/rt)+1);break;case"rect":pt.push(Math.floor((R.y+ct)/rt)+1),pt.push(Math.floor((R.y+R.h+ct)/rt)+1)}for(var ht=0;ht<pt.length;ht+=1)for(;this.pdf.internal.getNumberOfPages()<pt[ht];)v.call(this);return pt},v=function(){var R=this.fillStyle,K=this.strokeStyle,rt=this.font,pt=this.lineCap,ct=this.lineWidth,F=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=K,this.font=rt,this.lineCap=pt,this.lineWidth=ct,this.lineJoin=F},A=function(R,K,rt){for(var pt=0;pt<R.length;pt++)switch(R[pt].type){case"bct":R[pt].x2+=K,R[pt].y2+=rt;case"qct":R[pt].x1+=K,R[pt].y1+=rt;default:R[pt].x+=K,R[pt].y+=rt}return R},C=function(R){return R.sort(function(K,rt){return K-rt})},S=function(R,K){var rt=this.fillStyle,pt=this.strokeStyle,ct=this.lineCap,F=this.lineWidth,j=Math.abs(F*this.ctx.transform.scaleX),ht=this.lineJoin;if(this.autoPaging){for(var ot,lt,ft=JSON.parse(JSON.stringify(this.path)),Mt=JSON.parse(JSON.stringify(this.path)),W=[],tt=0;tt<Mt.length;tt++)if(Mt[tt].x!==void 0)for(var X=_.call(this,Mt[tt]),P=0;P<X.length;P+=1)W.indexOf(X[P])===-1&&W.push(X[P]);for(var k=0;k<W.length;k++)for(;this.pdf.internal.getNumberOfPages()<W[k];)v.call(this);C(W);for(var z=W[0],_t=W[W.length-1],kt=z;kt<_t+1;kt++){this.pdf.setPage(kt),this.fillStyle=rt,this.strokeStyle=pt,this.lineCap=ct,this.lineWidth=j,this.lineJoin=ht;var Ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],$t=kt===1?this.posY+this.margin[0]:this.margin[0],le=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],re=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],fe=kt===1?0:le+(kt-2)*re;if(this.ctx.clip_path.length!==0){var Ce=this.path;ot=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(ot,this.posX+this.margin[3],-fe+$t+this.ctx.prevPageLastElemOffset),O.call(this,R,!0),this.path=Ce}if(lt=JSON.parse(JSON.stringify(ft)),this.path=A(lt,this.posX+this.margin[3],-fe+$t+this.ctx.prevPageLastElemOffset),K===!1||kt===0){var De=(kt>z||kt<_t)&&b.call(this);De&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ct,re,null).clip().discardPath()),O.call(this,R,K),De&&this.pdf.restoreGraphicsState()}this.lineWidth=F}this.path=ft}else this.lineWidth=j,O.call(this,R,K),this.lineWidth=F},O=function(R,K){if((R!=="stroke"||K||!w.call(this))&&(R==="stroke"||K||!m.call(this))){for(var rt,pt,ct=[],F=this.path,j=0;j<F.length;j++){var ht=F[j];switch(ht.type){case"begin":ct.push({begin:!0});break;case"close":ct.push({close:!0});break;case"mt":ct.push({start:ht,deltas:[],abs:[]});break;case"lt":var ot=ct.length;if(F[j-1]&&!isNaN(F[j-1].x)&&(rt=[ht.x-F[j-1].x,ht.y-F[j-1].y],ot>0)){for(;ot>=0;ot--)if(ct[ot-1].close!==!0&&ct[ot-1].begin!==!0){ct[ot-1].deltas.push(rt),ct[ot-1].abs.push(ht);break}}break;case"bct":rt=[ht.x1-F[j-1].x,ht.y1-F[j-1].y,ht.x2-F[j-1].x,ht.y2-F[j-1].y,ht.x-F[j-1].x,ht.y-F[j-1].y],ct[ct.length-1].deltas.push(rt);break;case"qct":var lt=F[j-1].x+2/3*(ht.x1-F[j-1].x),ft=F[j-1].y+2/3*(ht.y1-F[j-1].y),Mt=ht.x+2/3*(ht.x1-ht.x),W=ht.y+2/3*(ht.y1-ht.y),tt=ht.x,X=ht.y;rt=[lt-F[j-1].x,ft-F[j-1].y,Mt-F[j-1].x,W-F[j-1].y,tt-F[j-1].x,X-F[j-1].y],ct[ct.length-1].deltas.push(rt);break;case"arc":ct.push({deltas:[],abs:[],arc:!0}),Array.isArray(ct[ct.length-1].abs)&&ct[ct.length-1].abs.push(ht)}}pt=K?null:R==="stroke"?"stroke":"fill";for(var P=!1,k=0;k<ct.length;k++)if(ct[k].arc)for(var z=ct[k].abs,_t=0;_t<z.length;_t++){var kt=z[_t];kt.type==="arc"?Q.call(this,kt.x,kt.y,kt.radius,kt.startAngle,kt.endAngle,kt.counterclockwise,void 0,K,!P):Z.call(this,kt.x,kt.y),P=!0}else if(ct[k].close===!0)this.pdf.internal.out("h"),P=!1;else if(ct[k].begin!==!0){var Ct=ct[k].start.x,$t=ct[k].start.y;D.call(this,ct[k].deltas,Ct,$t),P=!0}pt&&I.call(this,pt),K&&dt.call(this)}},q=function(R){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,rt=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-rt;case"top":return R+K-rt;case"hanging":return R+K-2*rt;case"middle":return R+K/2-rt;default:return R}},H=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function(K,rt){this.colorStops.push([K,rt])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Q=function(R,K,rt,pt,ct,F,j,ht,ot){for(var lt=it.call(this,rt,pt,ct,F),ft=0;ft<lt.length;ft++){var Mt=lt[ft];ft===0&&(ot?nt.call(this,Mt.x1+R,Mt.y1+K):Z.call(this,Mt.x1+R,Mt.y1+K)),mt.call(this,R,K,Mt.x2,Mt.y2,Mt.x3,Mt.y3,Mt.x4,Mt.y4)}ht?dt.call(this):I.call(this,j)},I=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},dt=function(){this.pdf.clip(),this.pdf.discardPath()},nt=function(R,K){this.pdf.internal.out(e(R)+" "+n(K)+" m")},B=function(R){var K;switch(R.align){case"right":case"end":K="right";break;case"center":K="center";break;default:K="left"}var rt,pt,ct,F=this.pdf.getTextDimensions(R.text),j=q.call(this,R.y),ht=H.call(this,j)-F.h,ot=this.ctx.transform.applyToPoint(new l(R.x,j));if(this.autoPaging){var lt=this.ctx.transform.decompose(),ft=new c;ft=(ft=(ft=ft.multiply(lt.translate)).multiply(lt.skew)).multiply(lt.scale);for(var Mt=this.ctx.transform.applyToRectangle(new o(R.x,j,F.w,F.h)),W=ft.applyToRectangle(new o(R.x,ht,F.w,F.h)),tt=_.call(this,W),X=[],P=0;P<tt.length;P+=1)X.indexOf(tt[P])===-1&&X.push(tt[P]);C(X);for(var k=X[0],z=X[X.length-1],_t=k;_t<z+1;_t++){this.pdf.setPage(_t);var kt=_t===1?this.posY+this.margin[0]:this.margin[0],Ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$t=this.pdf.internal.pageSize.height-this.margin[2],le=$t-this.margin[0],re=this.pdf.internal.pageSize.width-this.margin[1],fe=re-this.margin[3],Ce=_t===1?0:Ct+(_t-2)*le;if(this.ctx.clip_path.length!==0){var De=this.path;rt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(rt,this.posX+this.margin[3],-1*Ce+kt),O.call(this,"fill",!0),this.path=De}var Fe=A([JSON.parse(JSON.stringify(W))],this.posX+this.margin[3],-Ce+kt+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(pt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(pt*R.scale),ct=this.lineWidth,this.lineWidth=ct*R.scale);var ln=this.autoPaging!=="text";if(ln||Fe.y+Fe.h<=$t){if(ln||Fe.y>=kt&&Fe.x<=re){var Ue=ln?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||re-Fe.x)[0],Xn=A([JSON.parse(JSON.stringify(Mt))],this.posX+this.margin[3],-Ce+kt+this.ctx.prevPageLastElemOffset)[0],Xe=ln&&(_t>k||_t<z)&&b.call(this);Xe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],fe,le,null).clip().discardPath()),this.pdf.text(Ue,Xn.x,Xn.y,{angle:R.angle,align:K,renderingMode:R.renderingMode}),Xe&&this.pdf.restoreGraphicsState()}}else Fe.y<$t&&(this.ctx.prevPageLastElemOffset+=$t-Fe.y);R.scale>=.01&&(this.pdf.setFontSize(pt),this.lineWidth=ct)}}else R.scale>=.01&&(pt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(pt*R.scale),ct=this.lineWidth,this.lineWidth=ct*R.scale),this.pdf.text(R.text,ot.x+this.posX,ot.y+this.posY,{angle:R.angle,align:K,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(pt),this.lineWidth=ct)},Z=function(R,K,rt,pt){rt=rt||0,pt=pt||0,this.pdf.internal.out(e(R+rt)+" "+n(K+pt)+" l")},D=function(R,K,rt){return this.pdf.lines(R,K,rt,null,null)},mt=function(R,K,rt,pt,ct,F,j,ht){this.pdf.internal.out([t(i(rt+R)),t(s(pt+K)),t(i(ct+R)),t(s(F+K)),t(i(j+R)),t(s(ht+K)),"c"].join(" "))},it=function(R,K,rt,pt){for(var ct=2*Math.PI,F=Math.PI/2;K>rt;)K-=ct;var j=Math.abs(rt-K);j<ct&&pt&&(j=ct-j);for(var ht=[],ot=pt?-1:1,lt=K;j>1e-5;){var ft=lt+ot*Math.min(j,F);ht.push(st.call(this,R,lt,ft)),j-=Math.abs(ft-lt),lt=ft}return ht},st=function(R,K,rt){var pt=(rt-K)/2,ct=R*Math.cos(pt),F=R*Math.sin(pt),j=ct,ht=-F,ot=j*j+ht*ht,lt=ot+j*ct+ht*F,ft=4/3*(Math.sqrt(2*ot*lt)-lt)/(j*F-ht*ct),Mt=j-ft*ht,W=ht+ft*j,tt=Mt,X=-W,P=pt+K,k=Math.cos(P),z=Math.sin(P);return{x1:R*Math.cos(K),y1:R*Math.sin(K),x2:Mt*k-W*z,y2:Mt*z+W*k,x3:tt*k-X*z,y3:tt*z+X*k,x4:R*Math.cos(rt),y4:R*Math.sin(rt)}},vt=function(R){return 180*R/Math.PI},wt=function(R,K,rt,pt,ct,F){var j=R+.5*(rt-R),ht=K+.5*(pt-K),ot=ct+.5*(rt-ct),lt=F+.5*(pt-F),ft=Math.min(R,ct,j,ot),Mt=Math.max(R,ct,j,ot),W=Math.min(K,F,ht,lt),tt=Math.max(K,F,ht,lt);return new o(ft,W,Mt-ft,tt-W)},Ft=function(R,K,rt,pt,ct,F,j,ht){var ot,lt,ft,Mt,W,tt,X,P,k,z,_t,kt,Ct,$t,le=rt-R,re=pt-K,fe=ct-rt,Ce=F-pt,De=j-ct,Fe=ht-F;for(lt=0;lt<41;lt++)k=(X=(ft=R+(ot=lt/40)*le)+ot*((W=rt+ot*fe)-ft))+ot*(W+ot*(ct+ot*De-W)-X),z=(P=(Mt=K+ot*re)+ot*((tt=pt+ot*Ce)-Mt))+ot*(tt+ot*(F+ot*Fe-tt)-P),lt==0?(_t=k,kt=z,Ct=k,$t=z):(_t=Math.min(_t,k),kt=Math.min(kt,z),Ct=Math.max(Ct,k),$t=Math.max($t,z));return new o(Math.round(_t),Math.round(kt),Math.round(Ct-_t),Math.round($t-kt))},$=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,K,rt=(R=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:K}));this.prevLineDash!==rt&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=rt)}}})(cn.API),(function(r){var t=function(l){var o,c,h,f,p,y,m,w,b,_;for(c=[],h=0,f=(l+=o="\0\0\0\0".slice(l.length%4||4)).length;f>h;h+=4)(p=(l.charCodeAt(h)<<24)+(l.charCodeAt(h+1)<<16)+(l.charCodeAt(h+2)<<8)+l.charCodeAt(h+3))!==0?(y=(p=((p=((p=((p=(p-(_=p%85))/85)-(b=p%85))/85)-(w=p%85))/85)-(m=p%85))/85)%85,c.push(y+33,m+33,w+33,b+33,_+33)):c.push(122);return(function(v,A){for(var C=A;C>0;C--)v.pop()})(c,o.length),String.fromCharCode.apply(String,c)+"~>"},e=function(l){var o,c,h,f,p,y=String,m="length",w=255,b="charCodeAt",_="slice",v="replace";for(l[_](-2),l=l[_](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),h=[],f=0,p=(l+=o="uuuuu"[_](l[m]%5||5))[m];p>f;f+=5)c=52200625*(l[b](f)-33)+614125*(l[b](f+1)-33)+7225*(l[b](f+2)-33)+85*(l[b](f+3)-33)+(l[b](f+4)-33),h.push(w&c>>24,w&c>>16,w&c>>8,w&c);return(function(A,C){for(var S=C;S>0;S--)A.pop()})(h,o[m]),y.fromCharCode.apply(y,h)},n=function(l){return l.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(l){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),o.test(l)===!1)return"";for(var c="",h=0;h<l.length;h+=2)c+=String.fromCharCode("0x"+(l[h]+l[h+1]));return c},s=function(l){for(var o=new Uint8Array(l.length),c=l.length;c--;)o[c]=l.charCodeAt(c);return(o=Ub(o)).reduce(function(h,f){return h+String.fromCharCode(f)},"")};r.processDataByFilters=function(l,o){var c=0,h=l||"",f=[];for(typeof(o=o||[])=="string"&&(o=[o]),c=0;c<o.length;c+=1)switch(o[c]){case"ASCII85Decode":case"/ASCII85Decode":h=e(h),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=t(h),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=i(h),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=n(h),f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=s(h),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[c]+'" is not implemented')}return{data:h,reverseChain:f.reverse().join(" ")}}})(cn.API),(function(r){r.loadFile=function(t,e,n){return(function(i,s,l){s=s!==!1,l=typeof l=="function"?l:function(){};var o=void 0;try{o=(function(c,h,f){var p=new XMLHttpRequest,y=0,m=function(w){var b=w.length,_=[],v=String.fromCharCode;for(y=0;y<b;y+=1)_.push(v(255&w.charCodeAt(y)));return _.join("")};if(p.open("GET",c,!h),p.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(p.onload=function(){p.status===200?f(m(this.responseText)):f(void 0)}),p.send(null),h&&p.status===200)return m(p.responseText)})(i,s,l)}catch{}return o})(t,e,n)},r.allowFsRead=void 0,r.loadImageFile=r.loadFile})(cn.API),(function(r){function t(){return(En.html2canvas?Promise.resolve(En.html2canvas):Rv(()=>import("./html2canvas.esm-DXEQVQnt.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function e(){return(En.DOMPurify?Promise.resolve(En.DOMPurify):Rv(()=>import("./purify.es-Bzr520pe.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var c=Lr(o);return c==="undefined"?"undefined":c==="string"||o instanceof String?"string":c==="number"||o instanceof Number?"number":c==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(o,c){var h=document.createElement(o);for(var f in c.className&&(h.className=c.className),c.innerHTML&&c.dompurify&&(h.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)h.style[f]=c.style[f];return h},s=function o(c,h){for(var f=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),p=c.firstChild;p;p=p.nextSibling)h!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||f.appendChild(o(p,h));return c.nodeType===1&&(c.nodeName==="CANVAS"?(f.width=c.width,f.height=c.height,f.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(f.value=c.value),f.addEventListener("load",function(){f.scrollTop=c.scrollTop,f.scrollLeft=c.scrollLeft},!0)),f},l=function o(c){var h=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),f=o.convert(Promise.resolve(),h);return(f=f.setProgress(1,o,1,[o])).set(c)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(o,c){return o.__proto__=c||l.prototype,o},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(o,c){return this.then(function(){switch(c=c||(function(h){switch(n(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o),c){case"string":return this.then(e).then(function(h){return this.set({src:i("div",{innerHTML:o,dompurify:h})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},l.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(c){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,c(this.prop.container,h)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(c){var h=this.opt.jsPDF,f=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=f,f)for(var m=0;m<f.length;++m){var w=f[m],b=w.src.find(function(_){return _.format==="truetype"});b&&h.addFont(b.url,w.ref.name,w.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,h.context2d.save(!0),c(this.prop.container,y)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(o,c,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(o,c):this.outputPdf(o,c)},l.prototype.outputPdf=function(o,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,c)})},l.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},l.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(o){if(n(o)!=="object")return this;var c=Object.keys(o||{}).map(function(h){if(h in l.template.prop)return function(){this.prop[h]=o[h]};switch(h){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[h]=o[h]}}},this);return this.then(function(){return this.thenList(c)})},l.prototype.get=function(o,c){return this.then(function(){var h=o in l.template.prop?this.prop[o]:this.opt[o];return c?c(h):h})},l.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},l.prototype.setPageSize=function(o){function c(h,f){return Math.floor(h*f/72*96)}return this.then(function(){(o=o||cn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:c(o.inner.width,o.k),height:c(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},l.prototype.setProgress=function(o,c,h,f){return o!=null&&(this.progress.val=o),c!=null&&(this.progress.state=c),h!=null&&(this.progress.n=h),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(o,c,h,f){return this.setProgress(o?this.progress.val+o:null,c||null,h?this.progress.n+h:null,f?this.progress.stack.concat(f):null)},l.prototype.then=function(o,c){var h=this;return this.thenCore(o,c,function(f,p){return h.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(y){return h.updateProgress(null,f),y}).then(f,p).then(function(y){return h.updateProgress(1),y})})},l.prototype.thenCore=function(o,c,h){h=h||Promise.prototype.then;var f=this;o&&(o=o.bind(f)),c&&(c=c.bind(f));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?f:l.convert(Object.assign({},f),Promise.prototype),y=h.call(p,o,c);return l.convert(y,f.__proto__)},l.prototype.thenExternal=function(o,c){return Promise.prototype.then.call(this,o,c)},l.prototype.thenList=function(o){var c=this;return o.forEach(function(h){c=c.thenCore(h)}),c},l.prototype.catch=function(o){o&&(o=o.bind(this));var c=Promise.prototype.catch.call(this,o);return l.convert(c,this)},l.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},l.prototype.error=function(o){return this.then(function(){throw new Error(o)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,cn.getPageSize=function(o,c,h){if(Lr(o)==="object"){var f=o;o=f.orientation,c=f.unit||c,h=f.format||h}c=c||"mm",h=h||"a4",o=(""+(o||"P")).toLowerCase();var p,y=(""+h).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+c}var w,b=0,_=0;if(m.hasOwnProperty(y))b=m[y][1]/p,_=m[y][0]/p;else try{b=h[1],_=h[0]}catch{throw new Error("Invalid format: "+h)}if(o==="p"||o==="portrait")o="p",_>b&&(w=_,_=b,b=w);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",b>_&&(w=_,_=b,b=w)}return{width:_,height:b,unit:c,k:p,orientation:o}},r.html=function(o,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map($v):null;var h=new l(c);return c.worker?h:h.from(o).doCallback()}})(cn.API),cn.API.addJS=function(r){var t,e,n=(function(i){for(var s="",l=0;l<i.length;l++){var o=i[l];if(o==="("||o===")"){for(var c=0,h=l-1;h>=0&&i[h]==="\\";h--)c++;s+=c%2==0?"\\"+o:o}else s+=o}return s})(r);return this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(t+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+n+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){t!==void 0&&e!==void 0&&this.internal.out("/Names <</JavaScript "+t+" 0 R>>")}),this},(function(r){var t;r.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=e.outline.render().split(/\r\n/),s=0;s<i.length;s++){var l=i[s],o=n.exec(l);if(o!=null){var c=o[1];e.internal.newObjectDeferredBegin(c,!1)}e.internal.write(l)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,f=[];for(s=0;s<h;s++){var p=e.internal.newObject();f.push(p);var y=e.internal.getPageInfo(s+1);e.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var m=e.internal.newObject();for(e.internal.write("<< /Names [ "),s=0;s<f.length;s++)e.internal.write("(page_"+(s+1)+")"+f[s]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+m+" 0 R"),e.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var e=this;e.outline.root.children.length>0&&(e.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&e.internal.write("/Names "+t+" 0 R"))}]),r.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(n,i,s){var l={title:i,options:s,children:[]};return n==null&&(n=this.root),n.children.push(l),l},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(n){n.id=e.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},e.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},e.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var l=n.children[s];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var o=this.count=this.count_r({count:0},l);if(o>0&&this.line("/Count "+o),l.options&&l.options.pageNumber){var c=e.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var h=0;h<n.children.length;h++)this.renderItems(n.children[h])},e.outline.line=function(n){this.ctx.val+=n+`\r
`},e.outline.makeRef=function(n){return n.id+" 0 R"},e.outline.makeString=function(n){return"("+e.internal.pdfEscape(n)+")"},e.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(n,i){for(var s=0;s<i.children.length;s++)n.count++,this.count_r(n,i.children[s]);return n.count}}])})(cn.API),(function(r){var t=[192,193,194,195,196,197,198,199];r.processJPEG=function(e,n,i,s,l,o){var c,h=this.decode.DCT_DECODE,f=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=l||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,c=(function(p){for(var y,m=256*p.charCodeAt(4)+p.charCodeAt(5),w=p.length,b={width:0,height:0,numcomponents:1},_=4;_<w;_+=2){if(_+=m,t.indexOf(p.charCodeAt(_+1))!==-1){y=256*p.charCodeAt(_+5)+p.charCodeAt(_+6),b={width:256*p.charCodeAt(_+7)+p.charCodeAt(_+8),height:y,numcomponents:p.charCodeAt(_+9)};break}m=256*p.charCodeAt(_+2)+p.charCodeAt(_+3)}return b})(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e),c.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}f={data:e,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:h,index:n,alias:i}}return f}})(cn.API),cn.API.processPNG=function(r,t,e,n){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var i,s=Oj(r,{checkCrc:!0}),l=s.width,o=s.height,c=s.channels,h=s.palette,f=s.depth;i=h&&c===1?(function(Q){for(var I=Q.width,dt=Q.height,nt=Q.data,B=Q.palette,Z=Q.depth,D=!1,mt=[],it=[],st=void 0,vt=!1,wt=0,Ft=0;Ft<B.length;Ft++){var $=JS(B[Ft],4),R=$[0],K=$[1],rt=$[2],pt=$[3];mt.push(R,K,rt),pt!=null&&(pt===0?(wt++,it.length<1&&it.push(Ft)):pt<255&&(vt=!0))}if(vt||wt>1){D=!0,it=void 0;var ct=I*dt;st=new Uint8Array(ct);for(var F=new DataView(nt.buffer),j=0;j<ct;j++){var ht=Yv(F,j,Z),ot=JS(B[ht],4)[3];st[j]=ot}}else wt===0&&(it=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:D?8:void 0,colorBytes:nt,alphaBytes:st,needSMask:D,palette:mt,mask:it}})(s):c===2||c===4?(function(Q){for(var I=Q.data,dt=Q.width,nt=Q.height,B=Q.channels,Z=Q.depth,D=B===2?"DeviceGray":"DeviceRGB",mt=B-1,it=dt*nt,st=mt,vt=it*st,wt=1*it,Ft=Math.ceil(vt*Z/8),$=Math.ceil(wt*Z/8),R=new Uint8Array(Ft),K=new Uint8Array($),rt=new DataView(I.buffer),pt=new DataView(R.buffer),ct=new DataView(K.buffer),F=!1,j=0;j<it;j++){for(var ht=j*B,ot=0;ot<st;ot++)n3(pt,Yv(rt,ht+ot,Z),j*st+ot,Z);var lt=Yv(rt,ht+st,Z);lt<(1<<Z)-1&&(F=!0),n3(ct,lt,1*j,Z)}return{colorSpace:D,colorsPerPixel:mt,sMaskBitsPerComponent:F?Z:void 0,colorBytes:R,alphaBytes:K,needSMask:F}})(s):(function(Q){var I=Q.data,dt=Q.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:dt,colorsPerPixel:dt==="DeviceGray"?1:3,colorBytes:I instanceof Uint16Array?(function(nt){for(var B=nt.length,Z=new Uint8Array(2*B),D=new DataView(Z.buffer,Z.byteOffset,Z.byteLength),mt=0;mt<B;mt++)D.setUint16(2*mt,nt[mt],!1);return Z})(I):I,needSMask:!1}})(s);var p,y,m,w=i,b=w.colorSpace,_=w.colorsPerPixel,v=w.sMaskBitsPerComponent,A=w.colorBytes,C=w.alphaBytes,S=w.needSMask,O=w.palette,q=w.mask,H=null;return n!==cn.API.image_compression.NONE&&typeof Ub=="function"?(H=(function(Q){var I;switch(Q){case cn.API.image_compression.FAST:I=11;break;case cn.API.image_compression.MEDIUM:I=13;break;case cn.API.image_compression.SLOW:I=14;break;default:I=12}return I})(n),p=this.decode.FLATE_DECODE,y="/Predictor ".concat(H," /Colors ").concat(_," /BitsPerComponent ").concat(f," /Columns ").concat(l),r=QE(A,Math.ceil(l*_*f/8),_,f,n),S&&(m=QE(C,Math.ceil(l*v/8),1,v,n))):(p=void 0,y=void 0,r=A,S&&(m=C)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:e,data:r,index:t,filter:p,decodeParameters:y,transparency:q,palette:O,sMask:m,predictor:H,width:l,height:o,bitsPerComponent:f,sMaskBitsPerComponent:v,colorSpace:b}}},(function(r){r.processGIF89A=function(t,e,n,i){var s=new Jj(t),l=s.width,o=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var h={data:c,width:l,height:o},f=new Qv(100).encode(h,100);return r.processJPEG.call(this,f,e,n,i)},r.processGIF87A=r.processGIF89A})(cn.API),fl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var t=0;t<r;t++){var e=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:n,blue:e,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},fl.prototype.parseBGR=function(){this.pos=this.offset;var r="bit"+this.bitPP,t=this.width*this.height*4;if(t>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");this.data=new Uint8Array(t);try{this[r]()}catch(e){$r.log("bit decode error:"+e)}},fl.prototype.bit1=function(){var r,t=Math.ceil(this.width/8),e=t%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<t;i++)for(var s=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var c=this.palette[s>>7-o&1];this.data[l+4*o]=c.blue,this.data[l+4*o+1]=c.green,this.data[l+4*o+2]=c.red,this.data[l+4*o+3]=255}e!==0&&(this.pos+=4-e)}},fl.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),t=r%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<r;i++){var s=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+2*i*4,o=s>>4,c=15&s,h=this.palette[o];if(this.data[l]=h.blue,this.data[l+1]=h.green,this.data[l+2]=h.red,this.data[l+3]=255,2*i+1>=this.width)break;h=this.palette[c],this.data[l+4]=h.blue,this.data[l+4+1]=h.green,this.data[l+4+2]=h.red,this.data[l+4+3]=255}t!==0&&(this.pos+=4-t)}},fl.prototype.bit8=function(){for(var r=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*n;if(i<this.palette.length){var l=this.palette[i];this.data[s]=l.red,this.data[s+1]=l.green,this.data[s+2]=l.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}r!==0&&(this.pos+=4-r)}},fl.prototype.bit15=function(){for(var r=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,h=s>>15?255:0,f=n*this.width*4+4*i;this.data[f]=c,this.data[f+1]=o,this.data[f+2]=l,this.data[f+3]=h}this.pos+=r}},fl.prototype.bit16=function(){for(var r=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(l&t)/t*255|0,c=(l>>5&e)/e*255|0,h=(l>>11)/t*255|0,f=i*this.width*4+4*s;this.data[f]=h,this.data[f+1]=c,this.data[f+2]=o,this.data[f+3]=255}this.pos+=r}},fl.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var t=this.bottom_up?r:this.height-1-r,e=0;e<this.width;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*e;this.data[l]=s,this.data[l+1]=i,this.data[l+2]=n,this.data[l+3]=255}this.pos+=this.width%4}},fl.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var t=this.bottom_up?r:this.height-1-r,e=0;e<this.width;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*e;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=l}},fl.prototype.getData=function(){return this.data},(function(r){r.processBMP=function(t,e,n,i){var s=new fl(t,!1),l=s.width,o=s.height,c={data:s.getData(),width:l,height:o},h=new Qv(100).encode(c,100);return r.processJPEG.call(this,h,e,n,i)}})(cn.API),i3.prototype.getData=function(){return this.data},(function(r){r.processWEBP=function(t,e,n,i){var s=new i3(t),l=s.width,o=s.height,c={data:s.getData(),width:l,height:o},h=new Qv(100).encode(c,100);return r.processJPEG.call(this,h,e,n,i)}})(cn.API),cn.API.processRGBA=function(r,t,e){for(var n=r.data,i=n.length,s=new Uint8Array(i/4*3),l=new Uint8Array(i/4),o=0,c=0,h=0;h<i;h+=4){var f=n[h],p=n[h+1],y=n[h+2],m=n[h+3];s[o++]=f,s[o++]=p,s[o++]=y,l[c++]=m}var w=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:w,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},cn.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},nf=cn.API,Vm=nf.getCharWidthsArray=function(r,t){var e,n,i=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),l=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:i.metadata.Unicode.widths,c=o.fof?o.fof:1,h=t.kerning?t.kerning:i.metadata.Unicode.kerning,f=h.fof?h.fof:1,p=t.doKerning!==!1,y=0,m=r.length,w=0,b=o[0]||c,_=[];for(e=0;e<m;e++)n=r.charCodeAt(e),typeof i.metadata.widthOfString=="function"?_.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+l*(1e3/s)||0)/1e3):(y=p&&Lr(h[n])==="object"&&!isNaN(parseInt(h[n][w],10))?h[n][w]/f:0,_.push((o[n]||b)/c+y)),w=n;return _},$E=nf.getStringUnitWidth=function(r,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return nf.processArabic&&(r=nf.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,e,i)/e:Vm.apply(this,arguments).reduce(function(s,l){return s+l},0)},XE=function(r,t,e,n){for(var i=[],s=0,l=r.length,o=0;s!==l&&o+t[s]<e;)o+=t[s],s++;i.push(r.slice(0,s));var c=s;for(o=0;s!==l;)o+t[s]>n&&(i.push(r.slice(c,s)),o=0,c=s),o+=t[s],s++;return c!==s&&i.push(r.slice(c,s)),i},YE=function(r,t,e){e||(e={});var n,i,s,l,o,c,h,f=[],p=[f],y=e.textIndent||0,m=0,w=0,b=r.split(" "),_=Vm.apply(this,[" ",e])[0];if(c=e.lineIndent===-1?b[0].length+2:e.lineIndent||0){var v=Array(c).join(" "),A=[];b.map(function(S){(S=S.split(/\s*\n/)).length>1?A=A.concat(S.map(function(O,q){return(q&&O.length?`
`:"")+O})):A.push(S[0])}),b=A,c=$E.apply(this,[v,e])}for(s=0,l=b.length;s<l;s++){var C=0;if(n=b[s],c&&n[0]==`
`&&(n=n.substr(1),C=1),y+m+(w=(i=Vm.apply(this,[n,e])).reduce(function(S,O){return S+O},0))>t||C){if(w>t){for(o=XE.apply(this,[n,i,t-(y+m),t]),f.push(o.shift()),f=[o.pop()];o.length;)p.push([o.shift()]);w=i.slice(n.length-(f[0]?f[0].length:0)).reduce(function(S,O){return S+O},0)}else f=[n];p.push(f),y=w+c,m=_}else f.push(n),y+=m+w,m=_}return h=c?function(S,O){return(O?v:"")+S.join(" ")}:function(S){return S.join(" ")},p.map(h)},nf.splitTextToSize=function(r,t,e){var n,i=(e=e||{}).fontSize||this.internal.getFontSize(),s=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var p=this.internal.getFont(f.fontName,f.fontStyle),y="Unicode";return p.metadata[y]?{widths:p.metadata[y].widths||{0:1},kerning:p.metadata[y].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,e);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var l=1*this.internal.scaleFactor*t/i;s.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=e.lineIndent;var o,c,h=[];for(o=0,c=n.length;o<c;o++)h=h.concat(YE.apply(this,[n[o],l,s]));return h},(function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var t="0123456789abcdef",e="klmnopqrstuvwxyz",n={},i={},s=0;s<16;s++)n[e[s]]=t[s],i[t[s]]=e[s];var l=function(y){return"0x"+parseInt(y,10).toString(16)},o=r.__fontmetrics__.compress=function(y){var m,w,b,_,v=["{"];for(var A in y){if(m=y[A],isNaN(parseInt(A,10))?w="'"+A+"'":(A=parseInt(A,10),w=(w=l(A).slice(2)).slice(0,-1)+i[w.slice(-1)]),typeof m=="number")m<0?(b=l(m).slice(3),_="-"):(b=l(m).slice(2),_=""),b=_+b.slice(0,-1)+i[b.slice(-1)];else{if(Lr(m)!=="object")throw new Error("Don't know what to do with value type "+Lr(m)+".");b=o(m)}v.push(w+b)}return v.push("}"),v.join("")},c=r.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,w,b,_,v={},A=1,C=v,S=[],O="",q="",H=y.length-1,Q=1;Q<H;Q+=1)(_=y[Q])=="'"?m?(b=m.join(""),m=void 0):m=[]:m?m.push(_):_=="{"?(S.push([C,b]),C={},b=void 0):_=="}"?((w=S.pop())[0][w[1]]=C,b=void 0,C=w[0]):_=="-"?A=-1:b===void 0?n.hasOwnProperty(_)?(O+=n[_],b=parseInt(O,16)*A,A=1,O=""):O+=_:n.hasOwnProperty(_)?(q+=n[_],C[b]=parseInt(q,16)*A,A=1,b=void 0,q=""):q+=_;return v},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},p={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(y){var m=y.font,w=p.Unicode[m.postScriptName];w&&(m.metadata.Unicode={},m.metadata.Unicode.widths=w.widths,m.metadata.Unicode.kerning=w.kerning);var b=f.Unicode[m.postScriptName];b&&(m.metadata.Unicode.encoding=b,m.encoding=b.codePages[0])}])})(cn.API),(function(r){var t=function(e){for(var n=e.length,i=new Uint8Array(n),s=0;s<n;s++)i[s]=e.charCodeAt(s);return i};r.API.events.push(["addFont",function(e){var n=void 0,i=e.font,s=e.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(l,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(rg(o)),l.metadata=r.API.TTFFont.open(o),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(i,n)}}])})(cn),cn.API.addSvgAsImage=function(r,t,e,n,i,s,l,o){if(isNaN(t)||isNaN(e))throw $r.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw $r.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=i;var h=c.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,c.width,c.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(En.canvg?Promise.resolve(En.canvg):Rv(()=>import("./index.es-Fpv0Lrp-.js"),[])).catch(function(y){return Promise.reject(new Error("Could not load canvg: "+y))}).then(function(y){return y.default?y.default:y}).then(function(y){return y.fromString(h,r,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(f)}).then(function(){p.addImage(c.toDataURL("image/jpeg",1),t,e,n,i,l,o)})},cn.API.putTotalPages=function(r){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(r,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(t,e);return this},cn.API.viewerPreferences=function(r,t){var e;r=r||{},t=t||!1;var n,i,s,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(l),c=[],h=0,f=0,p=0;function y(w,b){var _,v=!1;for(_=0;_<w.length;_+=1)w[_]===b&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,r==="reset"||t===!0){var m=o.length;for(p=0;p<m;p+=1)e[o[p]].value=e[o[p]].defaultValue,e[o[p]].explicitSet=!1}if(Lr(r)==="object"){for(i in r)if(s=r[i],y(o,i)&&s!==void 0){if(e[i].type==="boolean"&&typeof s=="boolean")e[i].value=s;else if(e[i].type==="name"&&y(e[i].valueSet,s))e[i].value=s;else if(e[i].type==="integer"&&Number.isInteger(s))e[i].value=s;else if(e[i].type==="array"){for(h=0;h<s.length;h+=1)if(n=!0,s[h].length===1&&typeof s[h][0]=="number")c.push(String(s[h]-1));else if(s[h].length>1){for(f=0;f<s[h].length;f+=1)typeof s[h][f]!="number"&&(n=!1);n===!0&&c.push([s[h][0]-1,s[h][1]-1].join(" "))}e[i].value="["+c.join(" ")+"]"}else e[i].value=e[i].defaultValue;e[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var w,b=[];for(w in e)e[w].explicitSet===!0&&(e[w].type==="name"?b.push("/"+w+" /"+e[w].value):b.push("/"+w+" "+e[w].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},cn.API.addMetadata=function(r,t){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceUri:t??"http://jspdf.default.namespaceuri/",rawXml:typeof t=="boolean"&&t},this.internal.events.subscribe("putCatalog",e9),this.internal.events.subscribe("postPutResources",t9)),this},(function(r){var t=r.API,e=t.pdfEscape16=function(s,l){for(var o,c=l.metadata.Unicode.widths,h=["","0","00","000","0000"],f=[""],p=0,y=s.length;p<y;++p){if(o=l.metadata.characterToGlyph(s.charCodeAt(p)),l.metadata.glyIdsUsed.push(o),l.metadata.toUnicode[o]=s.charCodeAt(p),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(l.metadata.widthOfGlyph(o),10)])),o=="0")return f.join("");o=o.toString(16),f.push(h[4-o.length],o)}return f.join("")},n=function(s){var l,o,c,h,f,p,y;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],p=0,y=(o=Object.keys(s).sort(function(m,w){return m-w})).length;p<y;p++)l=o[p],c.length>=100&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[l]!==void 0&&s[l]!==null&&typeof s[l].toString=="function"&&(h=("0000"+s[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),c.push("<"+l+"><"+h+">"));return c.length&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),f+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(l){var o=l.font,c=l.out,h=l.newObject,f=l.putStream;if(o.metadata instanceof r.API.TTFFont&&o.encoding==="Identity-H"){for(var p=o.metadata.Unicode.widths,y=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),m="",w=0;w<y.length;w++)m+=String.fromCharCode(y[w]);var b=h();f({data:m,addLength1:!0,objectId:b}),c("endobj");var _=h();f({data:n(o.metadata.toUnicode),addLength1:!0,objectId:_}),c("endobj");var v=h();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+uf(o.fontName)),c("/FontFile2 "+b+" 0 R"),c("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var A=h();c("<<"),c("/Type /Font"),c("/BaseFont /"+uf(o.fontName)),c("/FontDescriptor "+v+" 0 R"),c("/W "+r.API.PDFObject.convert(p)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=h(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+_+" 0 R"),c("/BaseFont /"+uf(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+A+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(l){var o=l.font,c=l.out,h=l.newObject,f=l.putStream;if(o.metadata instanceof r.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var p=o.metadata.rawData,y="",m=0;m<p.length;m++)y+=String.fromCharCode(p[m]);var w=h();f({data:y,addLength1:!0,objectId:w}),c("endobj");var b=h();f({data:n(o.metadata.toUnicode),addLength1:!0,objectId:b}),c("endobj");var _=h();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+w+" 0 R"),c("/Flags 96"),c("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+uf(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=h();for(var v=0;v<o.metadata.hmtx.widths.length;v++)o.metadata.hmtx.widths[v]=parseInt(o.metadata.hmtx.widths[v]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+uf(o.fontName)+"/FontDescriptor "+_+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var l,o=s.text||"",c=s.x,h=s.y,f=s.options||{},p=s.mutex||{},y=p.pdfEscape,m=p.activeFontKey,w=p.fonts,b=m,_="",v=0,A="",C=w[b].encoding;if(w[b].encoding!=="Identity-H")return{text:o,x:c,y:h,options:f,mutex:p};for(A=o,b=m,Array.isArray(o)&&(A=o[0]),v=0;v<A.length;v+=1)w[b].metadata.hasOwnProperty("cmap")&&(l=w[b].metadata.cmap.unicode.codeMap[A[v].charCodeAt(0)]),l||A[v].charCodeAt(0)<256&&w[b].metadata.hasOwnProperty("Unicode")?_+=A[v]:_+="";var S="";return parseInt(b.slice(1))<14||C==="WinAnsiEncoding"?S=y(_,b).split("").map(function(O){return O.charCodeAt(0).toString(16)}).join(""):C==="Identity-H"&&(S=e(_,w[b])),p.isHex=!0,{text:S,x:c,y:h,options:f,mutex:p}};t.events.push(["postProcessText",function(s){var l=s.text||"",o=[],c={text:l,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(l)){var h=0;for(h=0;h<l.length;h+=1)Array.isArray(l[h])&&l[h].length===3?o.push([i(Object.assign({},c,{text:l[h][0]})).text,l[h][1],l[h][2]]):o.push(i(Object.assign({},c,{text:l[h]})).text);s.text=o}else s.text=i(Object.assign({},c,{text:l})).text}])})(cn),(function(r){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},r.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},r.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}})(cn.API),(function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var i,s,l,o,c,h,f,p=t,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],w={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},_=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),A=!1,C=0;this.__bidiEngine__={};var S=function(nt){var B=nt.charCodeAt(),Z=B>>8,D=b[Z];return D!==void 0?p[256*D+(255&B)]:Z===252||Z===253?"AL":v.test(Z)?"L":Z===8?"R":"N"},O=function(nt){for(var B,Z=0;Z<nt.length;Z++){if((B=S(nt.charAt(Z)))==="L")return!1;if(B==="R")return!0}return!1},q=function(nt,B,Z,D){var mt,it,st,vt,wt=B[D];switch(wt){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":A=!1;break;case"N":case"AN":break;case"EN":A&&(wt="AN");break;case"AL":A=!0,wt="R";break;case"WS":case"BN":wt="N";break;case"CS":D<1||D+1>=B.length||(mt=Z[D-1])!=="EN"&&mt!=="AN"||(it=B[D+1])!=="EN"&&it!=="AN"?wt="N":A&&(it="AN"),wt=it===mt?it:"N";break;case"ES":wt=(mt=D>0?Z[D-1]:"B")==="EN"&&D+1<B.length&&B[D+1]==="EN"?"EN":"N";break;case"ET":if(D>0&&Z[D-1]==="EN"){wt="EN";break}if(A){wt="N";break}for(st=D+1,vt=B.length;st<vt&&B[st]==="ET";)st++;wt=st<vt&&B[st]==="EN"?"EN":"N";break;case"NSM":if(l&&!o){for(vt=B.length,st=D+1;st<vt&&B[st]==="NSM";)st++;if(st<vt){var Ft=nt[D],$=Ft>=1425&&Ft<=2303||Ft===64286;if(mt=B[st],$&&(mt==="R"||mt==="AL")){wt="R";break}}}wt=D<1||(mt=B[D-1])==="B"?"N":Z[D-1];break;case"B":A=!1,i=!0,wt=C;break;case"S":s=!0,wt="N"}return wt},H=function(nt,B,Z){var D=nt.split("");return Z&&Q(D,Z,{hiLevel:C}),D.reverse(),B&&B.reverse(),D.join("")},Q=function(nt,B,Z){var D,mt,it,st,vt,wt=-1,Ft=nt.length,$=0,R=[],K=C?m:y,rt=[];for(A=!1,i=!1,s=!1,mt=0;mt<Ft;mt++)rt[mt]=S(nt[mt]);for(it=0;it<Ft;it++){if(vt=$,R[it]=q(nt,rt,R,it),D=240&($=K[vt][w[R[it]]]),$&=15,B[it]=st=K[$][5],D>0)if(D===16){for(mt=wt;mt<it;mt++)B[mt]=1;wt=-1}else wt=-1;if(K[$][6])wt===-1&&(wt=it);else if(wt>-1){for(mt=wt;mt<it;mt++)B[mt]=st;wt=-1}rt[it]==="B"&&(B[it]=0),Z.hiLevel|=st}s&&(function(pt,ct,F){for(var j=0;j<F;j++)if(pt[j]==="S"){ct[j]=C;for(var ht=j-1;ht>=0&&pt[ht]==="WS";ht--)ct[ht]=C}})(rt,B,Ft)},I=function(nt,B,Z,D,mt){if(!(mt.hiLevel<nt)){if(nt===1&&C===1&&!i)return B.reverse(),void(Z&&Z.reverse());for(var it,st,vt,wt,Ft=B.length,$=0;$<Ft;){if(D[$]>=nt){for(vt=$+1;vt<Ft&&D[vt]>=nt;)vt++;for(wt=$,st=vt-1;wt<st;wt++,st--)it=B[wt],B[wt]=B[st],B[st]=it,Z&&(it=Z[wt],Z[wt]=Z[st],Z[st]=it);$=vt}$++}}},dt=function(nt,B,Z){var D=nt.split(""),mt={hiLevel:C};return Z||(Z=[]),Q(D,Z,mt),(function(it,st,vt){if(vt.hiLevel!==0&&f)for(var wt,Ft=0;Ft<it.length;Ft++)st[Ft]===1&&(wt=_.indexOf(it[Ft]))>=0&&(it[Ft]=_[wt+1])})(D,Z,mt),I(2,D,B,Z,mt),I(1,D,B,Z,mt),D.join("")};return this.__bidiEngine__.doBidiReorder=function(nt,B,Z){if((function(mt,it){if(it)for(var st=0;st<mt.length;st++)it[st]=st;o===void 0&&(o=O(mt)),h===void 0&&(h=O(mt))})(nt,B),l||!c||h)if(l&&c&&o^h)C=o?1:0,nt=H(nt,B,Z);else if(!l&&c&&h)C=o?1:0,nt=dt(nt,B,Z),nt=H(nt,B);else if(!l||o||c||h){if(l&&!c&&o^h)nt=H(nt,B),o?(C=0,nt=dt(nt,B,Z)):(C=1,nt=dt(nt,B,Z),nt=H(nt,B));else if(l&&o&&!c&&h)C=1,nt=dt(nt,B,Z),nt=H(nt,B);else if(!l&&!c&&o^h){var D=f;o?(C=1,nt=dt(nt,B,Z),C=0,f=!1,nt=dt(nt,B,Z),f=D):(C=0,nt=dt(nt,B,Z),nt=H(nt,B),C=1,f=!1,nt=dt(nt,B,Z),f=D,nt=H(nt,B))}}else C=0,nt=dt(nt,B,Z);else C=o?1:0,nt=dt(nt,B,Z);return nt},this.__bidiEngine__.setOptions=function(nt){nt&&(l=nt.isInputVisual,c=nt.isOutputVisual,o=nt.isInputRtl,h=nt.isOutputRtl,f=nt.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var l=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,e.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(l=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?l.push([e.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):l.push([e.doBidiReorder(i[o])]);n.text=l}else n.text=e.doBidiReorder(i);e.setOptions({isInputVisual:!0})}])})(cn),cn.API.TTFFont=(function(){function r(t){var e;if(this.rawData=t,e=this.contents=new kc(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new g9(this),this.registerTTF()}return r.open=function(t){return new r(t)},r.prototype.parse=function(){return this.directory=new n9(this.contents),this.head=new i9(this),this.name=new u9(this),this.cmap=new bC(this),this.toUnicode={},this.hhea=new s9(this),this.maxp=new c9(this),this.hmtx=new h9(this),this.post=new o9(this),this.os2=new a9(this),this.loca=new m9(this),this.glyf=new f9(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var t,e,n,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,o,c,h;for(h=[],l=0,o=(c=this.bbox).length;l<o;l++)t=c[l],h.push(Math.round(t*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(e=i>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},r.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},r.prototype.widthOfString=function(t,e,n){var i,s,l,o;for(l=0,s=0,o=(t=""+t).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=t.charCodeAt(s),l+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/e)||0;return l*(e/1e3)},r.prototype.lineHeight=function(t,e){var n;return e==null&&(e=!1),n=e?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},r})();var xl,kc=(function(){function r(t){this.data=t??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(t){return this.data[this.pos++]=t},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},r.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},r.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},r.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},r.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},r.prototype.readString=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)n[e]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(t){var e,n,i;for(i=[],e=0,n=t.length;0<=n?e<n:e>n;e=0<=n?++e:--e)i.push(this.writeByte(t.charCodeAt(e)));return i},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(t){return this.writeInt16(t)},r.prototype.readLongLong=function(){var t,e,n,i,s,l,o,c;return t=this.readByte(),e=this.readByte(),n=this.readByte(),i=this.readByte(),s=this.readByte(),l=this.readByte(),o=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^s)+65536*(255^l)+256*(255^o)+(255^c)+1):72057594037927940*t+281474976710656*e+1099511627776*n+4294967296*i+16777216*s+65536*l+256*o+c},r.prototype.writeLongLong=function(t){var e,n;return e=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(t){return this.writeInt32(t)},r.prototype.read=function(t){var e,n;for(e=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)e.push(this.readByte());return e},r.prototype.write=function(t){var e,n,i,s;for(s=[],n=0,i=t.length;n<i;n++)e=t[n],s.push(this.writeByte(e));return s},r})(),n9=(function(){var r;function t(e){var n,i,s;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)n={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(e){var n,i,s,l,o,c,h,f,p,y,m,w,b;for(b in m=Object.keys(e).length,c=Math.log(2),p=16*Math.floor(Math.log(m)/c),l=Math.floor(p/c),f=16*m-p,(i=new kc).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(l),i.writeShort(f),s=16*m,h=i.pos+s,o=null,w=[],e)for(y=e[b],i.writeString(b),i.writeInt(r(y)),i.writeInt(h),i.writeInt(y.length),w=w.concat(y),b==="head"&&(o=h),h+=y.length;h%4;)w.push(0),h++;return i.write(w),n=2981146554-r(i.data),i.pos=o+8,i.writeUInt32(n),i.data},r=function(e){var n,i,s,l;for(e=wC.call(e);e.length%4;)e.push(0);for(s=new kc(e),i=0,n=0,l=e.length;n<l;n=n+=4)i+=s.readUInt32();return 4294967295&i},t})(),r9={}.hasOwnProperty,hu=function(r,t){for(var e in t)r9.call(t,e)&&(r[e]=t[e]);function n(){this.constructor=r}return n.prototype=t.prototype,r.prototype=new n,r.__super__=t.prototype,r};xl=(function(){function r(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r})();var i9=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return hu(r,xl),r.prototype.tag="head",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},r.prototype.encode=function(t){var e;return(e=new kc).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},r})(),s3=(function(){function r(t,e){var n,i,s,l,o,c,h,f,p,y,m,w,b,_,v,A,C;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),p=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),y=m/2,t.pos+=6,s=(function(){var S,O;for(O=[],c=S=0;0<=y?S<y:S>y;c=0<=y?++S:--S)O.push(t.readUInt16());return O})(),t.pos+=2,b=(function(){var S,O;for(O=[],c=S=0;0<=y?S<y:S>y;c=0<=y?++S:--S)O.push(t.readUInt16());return O})(),h=(function(){var S,O;for(O=[],c=S=0;0<=y?S<y:S>y;c=0<=y?++S:--S)O.push(t.readUInt16());return O})(),f=(function(){var S,O;for(O=[],c=S=0;0<=y?S<y:S>y;c=0<=y?++S:--S)O.push(t.readUInt16());return O})(),i=(this.length-t.pos+this.offset)/2,o=(function(){var S,O;for(O=[],c=S=0;0<=i?S<i:S>i;c=0<=i?++S:--S)O.push(t.readUInt16());return O})(),c=v=0,C=s.length;v<C;c=++v)for(_=s[c],n=A=w=b[c];w<=_?A<=_:A>=_;n=w<=_?++A:--A)f[c]===0?l=n+h[c]:(l=o[f[c]/2+(n-w)-(y-c)]||0)!==0&&(l+=h[c]),this.codeMap[n]=65535&l}t.pos=p}return r.encode=function(t,e){var n,i,s,l,o,c,h,f,p,y,m,w,b,_,v,A,C,S,O,q,H,Q,I,dt,nt,B,Z,D,mt,it,st,vt,wt,Ft,$,R,K,rt,pt,ct,F,j,ht,ot,lt,ft;switch(D=new kc,l=Object.keys(t).sort(function(Mt,W){return Mt-W}),e){case"macroman":for(b=0,_=(function(){var Mt=[];for(w=0;w<256;++w)Mt.push(0);return Mt})(),A={0:0},s={},mt=0,wt=l.length;mt<wt;mt++)A[ht=t[i=l[mt]]]==null&&(A[ht]=++b),s[i]={old:t[i],new:A[t[i]]},_[i]=A[t[i]];return D.writeUInt16(1),D.writeUInt16(0),D.writeUInt32(12),D.writeUInt16(0),D.writeUInt16(262),D.writeUInt16(0),D.write(_),{charMap:s,subtable:D.data,maxGlyphID:b+1};case"unicode":for(B=[],p=[],C=0,A={},n={},v=h=null,it=0,Ft=l.length;it<Ft;it++)A[O=t[i=l[it]]]==null&&(A[O]=++C),n[i]={old:O,new:A[O]},o=A[O]-i,v!=null&&o===h||(v&&p.push(v),B.push(i),h=o),v=i;for(v&&p.push(v),p.push(65535),B.push(65535),dt=2*(I=B.length),Q=2*Math.pow(Math.log(I)/Math.LN2,2),y=Math.log(Q/2)/Math.LN2,H=2*I-Q,c=[],q=[],m=[],w=st=0,$=B.length;st<$;w=++st){if(nt=B[w],f=p[w],nt===65535){c.push(0),q.push(0);break}if(nt-(Z=n[nt].new)>=32768)for(c.push(0),q.push(2*(m.length+I-w)),i=vt=nt;nt<=f?vt<=f:vt>=f;i=nt<=f?++vt:--vt)m.push(n[i].new);else c.push(Z-nt),q.push(0)}for(D.writeUInt16(3),D.writeUInt16(1),D.writeUInt32(12),D.writeUInt16(4),D.writeUInt16(16+8*I+2*m.length),D.writeUInt16(0),D.writeUInt16(dt),D.writeUInt16(Q),D.writeUInt16(y),D.writeUInt16(H),F=0,R=p.length;F<R;F++)i=p[F],D.writeUInt16(i);for(D.writeUInt16(0),j=0,K=B.length;j<K;j++)i=B[j],D.writeUInt16(i);for(ot=0,rt=c.length;ot<rt;ot++)o=c[ot],D.writeUInt16(o);for(lt=0,pt=q.length;lt<pt;lt++)S=q[lt],D.writeUInt16(S);for(ft=0,ct=m.length;ft<ct;ft++)b=m[ft],D.writeUInt16(b);return{charMap:n,subtable:D.data,maxGlyphID:C+1}}},r})(),bC=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return hu(r,xl),r.prototype.tag="cmap",r.prototype.parse=function(t){var e,n,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)e=new s3(t,this.offset),this.tables.push(e),e.isUnicode&&this.unicode==null&&(this.unicode=e);return!0},r.encode=function(t,e){var n,i;return e==null&&(e="macroman"),n=s3.encode(t,e),(i=new kc).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},r})(),s9=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return hu(r,xl),r.prototype.tag="hhea",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},r})(),a9=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return hu(r,xl),r.prototype.tag="OS/2",r.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var e,n;for(n=[],e=0;e<10;++e)n.push(t.readByte());return n})(),this.charRange=(function(){var e,n;for(n=[],e=0;e<4;++e)n.push(t.readInt());return n})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var e,n;for(n=[],e=0;e<2;e=++e)n.push(t.readInt());return n})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},r})(),o9=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return hu(r,xl),r.prototype.tag="post",r.prototype.parse=function(t){var e,n,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)e=t.readByte(),i.push(this.names.push(t.readString(e)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var l,o,c;for(c=[],s=l=0,o=this.file.maxp.numGlyphs;0<=o?l<o:l>o;s=0<=o?++l:--l)c.push(t.readUInt32());return c}).call(this)}},r})(),l9=function(r,t){this.raw=r,this.length=r.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},u9=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return hu(r,xl),r.prototype.tag="name",r.prototype.parse=function(t){var e,n,i,s,l,o,c,h,f,p,y;for(t.pos=this.offset,t.readShort(),e=t.readShort(),o=t.readShort(),n=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+o+t.readShort()});for(c={},s=f=0,p=n.length;f<p;s=++f)i=n[s],t.pos=i.offset,h=t.readString(i.length),l=new l9(h,i),c[y=i.nameID]==null&&(c[y]=[]),c[i.nameID].push(l);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},r})(),c9=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return hu(r,xl),r.prototype.tag="maxp",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},r})(),h9=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return hu(r,xl),r.prototype.tag="hmtx",r.prototype.parse=function(t){var e,n,i,s,l,o,c;for(t.pos=this.offset,this.metrics=[],e=0,o=this.file.hhea.numberOfMetrics;0<=o?e<o:e>o;e=0<=o?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var h,f;for(f=[],e=h=0;0<=i?h<i:h>i;e=0<=i?++h:--h)f.push(t.readInt16());return f})(),this.widths=(function(){var h,f,p,y;for(y=[],h=0,f=(p=this.metrics).length;h<f;h++)s=p[h],y.push(s.advance);return y}).call(this),n=this.widths[this.widths.length-1],c=[],e=l=0;0<=i?l<i:l>i;e=0<=i?++l:--l)c.push(this.widths.push(n));return c},r.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},r})(),wC=[].slice,f9=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return hu(r,xl),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(t){var e,n,i,s,l,o,c,h,f,p;return t in this.cache?this.cache[t]:(s=this.file.loca,e=this.file.contents,n=s.indexOf(t),(i=s.lengthOf(t))===0?this.cache[t]=null:(e.pos=this.offset+n,l=(o=new kc(e.read(i))).readShort(),h=o.readShort(),p=o.readShort(),c=o.readShort(),f=o.readShort(),this.cache[t]=l===-1?new p9(o,h,p,c,f):new d9(o,l,h,p,c,f),this.cache[t]))},r.prototype.encode=function(t,e,n){var i,s,l,o,c;for(l=[],s=[],o=0,c=e.length;o<c;o++)i=t[e[o]],s.push(l.length),i&&(l=l.concat(i.encode(n)));return s.push(l.length),{table:l,offsets:s}},r})(),d9=(function(){function r(t,e,n,i,s,l){this.raw=t,this.numberOfContours=e,this.xMin=n,this.yMin=i,this.xMax=s,this.yMax=l,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r})(),p9=(function(){function r(t,e,n,i,s){var l,o;for(this.raw=t,this.xMin=e,this.yMin=n,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;o=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&o;)l.pos+=1&o?4:2,128&o?l.pos+=8:64&o?l.pos+=4:8&o&&(l.pos+=2)}return r.prototype.encode=function(){var t,e,n;for(e=new kc(wC.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)e.pos=this.glyphOffsets[t];return e.data},r})(),m9=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return hu(r,xl),r.prototype.tag="loca",r.prototype.parse=function(t){var e,n;return t.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=e===0?(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=2)s.push(2*t.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=4)s.push(t.readUInt32());return s}).call(this)},r.prototype.indexOf=function(t){return this.offsets[t]},r.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},r.prototype.encode=function(t,e){for(var n=new Uint32Array(this.offsets.length),i=0,s=0,l=0;l<n.length;++l)if(n[l]=i,s<e.length&&e[s]==l){++s,n[l]=i;var o=this.offsets[l],c=this.offsets[l+1]-o;c>0&&(i+=c)}for(var h=new Array(4*n.length),f=0;f<n.length;++f)h[4*f+3]=255&n[f],h[4*f+2]=(65280&n[f])>>8,h[4*f+1]=(16711680&n[f])>>16,h[4*f]=(4278190080&n[f])>>24;return h},r})(),g9=(function(){function r(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var t,e,n,i,s;for(e in i=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[e],t[e]=i[n];return t},r.prototype.glyphsFor=function(t){var e,n,i,s,l,o,c;for(i={},l=0,o=t.length;l<o;l++)i[s=t[l]]=this.font.glyf.glyphFor(s);for(s in e=[],i)(n=i[s])!=null&&n.compound&&e.push.apply(e,n.glyphIDs);if(e.length>0)for(s in c=this.glyphsFor(e))n=c[s],i[s]=n;return i},r.prototype.encode=function(t,e){var n,i,s,l,o,c,h,f,p,y,m,w,b,_,v;for(i in n=bC.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(t),m={0:0},v=n.charMap)m[(c=v[i]).old]=c.new;for(w in y=n.maxGlyphID,l)w in m||(m[w]=y++);return f=(function(A){var C,S;for(C in S={},A)S[A[C]]=C;return S})(m),p=Object.keys(f).sort(function(A,C){return A-C}),b=(function(){var A,C,S;for(S=[],A=0,C=p.length;A<C;A++)o=p[A],S.push(f[o]);return S})(),s=this.font.glyf.encode(l,b,m),h=this.font.loca.encode(s.offsets,b),_={cmap:this.font.cmap.raw(),glyf:s.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(_["OS/2"]=this.font.os2.raw()),this.font.directory.encode(_)},r})();cn.API.PDFObject=(function(){var r;function t(){}return r=function(e,n){return(Array(n+1).join("0")+e).slice(-n)},t.convert=function(e){var n,i,s,l;if(Array.isArray(e))return"["+(function(){var o,c,h;for(h=[],o=0,c=e.length;o<c;o++)n=e[o],h.push(t.convert(n));return h})().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e?.isString)return"("+e+")";if(e instanceof Date)return"(D:"+r(e.getUTCFullYear(),4)+r(e.getUTCMonth(),2)+r(e.getUTCDate(),2)+r(e.getUTCHours(),2)+r(e.getUTCMinutes(),2)+r(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(i in s=["<<"],e)l=e[i],s.push("/"+i+" "+t.convert(l));return s.push(">>"),s.join(`
`)}return""+e},t})();var lg={exports:{}},y9=lg.exports,a3;function v9(){return a3||(a3=1,(function(r,t){(function(e,n){n()})(y9,function(){function e(h,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function n(h,f,p){var y=new XMLHttpRequest;y.open("GET",h),y.responseType="blob",y.onload=function(){c(y.response,f,p)},y.onerror=function(){console.error("could not download file")},y.send()}function i(h){var f=new XMLHttpRequest;f.open("HEAD",h,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function s(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(f)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof zd=="object"&&zd.global===zd?zd:void 0,o=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(h,f,p){var y=l.URL||l.webkitURL,m=document.createElement("a");f=f||h.name||"download",m.download=f,m.rel="noopener",typeof h=="string"?(m.href=h,m.origin===location.origin?s(m):i(m.href)?n(h,f,p):s(m,m.target="_blank")):(m.href=y.createObjectURL(h),setTimeout(function(){y.revokeObjectURL(m.href)},4e4),setTimeout(function(){s(m)},0))}:"msSaveOrOpenBlob"in navigator?function(h,f,p){if(f=f||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(e(h,p),f);else if(i(h))n(h,f,p);else{var y=document.createElement("a");y.href=h,y.target="_blank",setTimeout(function(){s(y)})}}:function(h,f,p,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof h=="string")return n(h,f,p);var m=h.type==="application/octet-stream",w=/constructor/i.test(l.HTMLElement)||l.safari,b=/CriOS\/[\d]+/.test(navigator.userAgent);if((b||m&&w||o)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var C=_.result;C=b?C:C.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=C:location=C,y=null},_.readAsDataURL(h)}else{var v=l.URL||l.webkitURL,A=v.createObjectURL(h);y?y.location=A:location.href=A,y=null,setTimeout(function(){v.revokeObjectURL(A)},4e4)}});l.saveAs=c.saveAs=c,r.exports=c})})(lg)),lg.exports}var xC=v9();function b9(r){return Lt.useMemo(()=>{const t={};return r?.length&&r.forEach(e=>{t[e.key]={hex:e.hex,displayName:e.display_name}}),t},[r])}function Cf(r,t){if(t[r])return t[r].hex;const e=Gu[r];return e?.hex??e?.solid??"#94a3b8"}function w9(r){const t=parseInt((r||"#94a3b8").replace("#",""),16);return[t>>16&255,t>>8&255,t&255]}function x9(r,t,e,n,i){return[...r].sort((l,o)=>l.page_number!==o.page_number?l.page_number-o.page_number:new Date(l.created_at)-new Date(o.created_at)).map((l,o)=>({seq:o+1,text:l.highlighted_text||"",note:l.note?.content||"",page:l.page_number,category:Cc(l.color,t,e),colorKey:l.color,hex:Cf(l.color,n)}))}function _9(r,t,e,n,i){const s={};return r.forEach(l=>{(s[l.colorKey]??=[]).push(l)}),t.map(l=>({topic:Cc(l,e,n),hex:Cf(l,i),items:s[l]||[]})).filter(l=>l.items.length>0)}async function A9(r,t,e){const n=[];n.push(new xc({text:r,heading:t7.HEADING_1,spacing:{after:200}})),n.push(new xc({text:`${t.length} annotations`,spacing:{after:300},style:"Subtitle"})),e.forEach(({topic:l,hex:o,items:c})=>{n.push(new xc({spacing:{before:300,after:100},border:{bottom:{style:t0.SINGLE,size:1,color:o.replace("#","")}},children:[new df({text:`${l} (${c.length})`,bold:!0,size:24,color:o.replace("#","")})]})),c.forEach(h=>{n.push(new xc({spacing:{before:120,after:40},children:[new df({text:`"${h.text}"`,italics:!0,size:21}),new df({text:`   p.${h.page}`,size:18,color:"94A3B8"})]})),h.note&&n.push(new xc({spacing:{after:60},children:[new df({text:h.note,size:18,italics:!0,color:o.replace("#","")})]}))})});const i=new uB({sections:[{children:n}]}),s=await SB.toBlob(i);xC.saveAs(s,`${r.replace(/\.pdf$/i,"")}  Summary.docx`)}function S9(r,t,e){const n=new cn({unit:"mm",format:"a4"}),i=n.internal.pageSize.getWidth(),s=18,l=i-s*2;let o=s;const c=h=>{o+h>n.internal.pageSize.getHeight()-s&&(n.addPage(),o=s)};n.setFont("helvetica","bold"),n.setFontSize(16),n.text(r,s,o),o+=8,n.setFont("helvetica","normal"),n.setFontSize(10),n.setTextColor(100),n.text(`${t.length} annotations`,s,o),o+=12,e.forEach(({topic:h,hex:f,items:p})=>{c(18);const[y,m,w]=w9(f);n.setDrawColor(y,m,w),n.setLineWidth(.5),n.line(s,o,s+l,o),o+=5,n.setFont("helvetica","bold"),n.setFontSize(11),n.setTextColor(y,m,w),n.text(`${h} (${p.length})`,s,o),o+=7,p.forEach(b=>{c(14),n.setFont("helvetica","italic"),n.setFontSize(9.5),n.setTextColor(30),n.splitTextToSize(`"${b.text}"`,l-10).forEach(v=>{c(5),n.text(v,s+2,o),o+=4.2}),n.setFont("helvetica","normal"),n.setFontSize(8),n.setTextColor(148,163,184),n.text(`p.${b.page}  #${b.seq}`,s+2,o),o+=4,b.note&&(c(5),n.setFont("helvetica","italic"),n.setFontSize(8.5),n.setTextColor(y,m,w),n.splitTextToSize(b.note,l-10).forEach(A=>{c(4.5),n.text(A,s+2,o),o+=4})),o+=3}),o+=4}),n.save(`${r.replace(/\.pdf$/i,"")}  Summary.pdf`)}function E9(r,t){const e=new Blob([JSON.stringify({document:r,exported_at:new Date().toISOString(),annotations:t},null,2)],{type:"application/json"});xC.saveAs(e,`${r.replace(/\.pdf$/i,"")}  Summary.json`)}function C9(){const{id:r}=Zb(),t=Wu(),e=Lc(),[n,i]=Lt.useState("sequence"),[s,l]=Lt.useState(""),[o,c]=Lt.useState([]),[h,f]=Lt.useState(null),[p,y]=Lt.useState(new Set),[m,w]=Lt.useState(new Set),[b,_]=Lt.useState(null),[v,A]=Lt.useState(""),[C,S]=Lt.useState(!1),O=Lt.useRef(null);Lt.useEffect(()=>{if(!C)return;const F=j=>{O.current&&!O.current.contains(j.target)&&S(!1)};return window.addEventListener("mousedown",F),()=>window.removeEventListener("mousedown",F)},[C]);const{data:q,isLoading:H,isError:Q}=Go({queryKey:["document",r],queryFn:async()=>(await Ds.get(r)).data,enabled:!!r}),{data:I=[]}=Go({queryKey:["highlights",r],queryFn:async()=>(await Ds.highlights(r)).data,enabled:!!r}),{data:dt=[]}=Go({queryKey:["presets"],queryFn:async()=>(await pl.list()).data}),nt=Lt.useMemo(()=>dt.length?q?.highlight_preset!=null?dt.find(F=>F.id===q.highlight_preset)??null:dt.find(F=>F.is_system)??dt[0]??null:null,[dt,q?.highlight_preset]),B=Lt.useMemo(()=>nt?.colors??q?.highlight_preset_detail?.colors??[],[nt?.colors,q?.highlight_preset_detail?.colors]),Z=q?.color_labels||{},D=b9(B),mt=Lt.useMemo(()=>B?.length?B.map(F=>F.key):y2,[B]),it=ka({mutationFn:({highlightId:F,note:j})=>Ds.updateHighlight(r,F,{note:j}),onSuccess:()=>{e.invalidateQueries({queryKey:["highlights",r]}),_(null),A("")}}),st=Lt.useCallback(F=>{c(j=>j.includes(F)?j.filter(ht=>ht!==F):[...j,F])},[]),vt=Lt.useCallback(F=>{y(j=>{const ht=new Set(j);return ht.has(F)?ht.delete(F):ht.add(F),ht})},[]),wt=Lt.useCallback(F=>{w(j=>{const ht=new Set(j);return ht.has(F)?ht.delete(F):ht.add(F),ht})},[]),Ft=Lt.useCallback(F=>{S(!1);const j=x9(I,Z,B,D),ht=_9(j,mt,Z,B,D),ot=q?.filename||"Document";F==="docx"?A9(ot,j,ht):F==="pdf"?S9(ot,j,ht):E9(ot,j)},[I,Z,B,D,mt,q?.filename]),$=Lt.useMemo(()=>{const F={};return I.forEach(j=>{F[j.color]=(F[j.color]||0)+1}),F},[I]),R=Lt.useMemo(()=>I.filter(F=>{if(o.length>0&&!o.includes(F.color))return!1;if(s.trim()){const j=s.toLowerCase();return F.highlighted_text?.toLowerCase().includes(j)||F.note?.content?.toLowerCase().includes(j)}return!0}),[I,o,s]),K=Lt.useMemo(()=>[...R].sort((F,j)=>F.page_number!==j.page_number?F.page_number-j.page_number:new Date(F.created_at)-new Date(j.created_at)),[R]),rt=Lt.useMemo(()=>{if(n!=="topic")return[];const F={};return R.forEach(j=>{F[j.color]||(F[j.color]=[]),F[j.color].push(j)}),mt.map(j=>({colorKey:j,topic:Cc(j,Z,B),hex:Cf(j,D),items:(F[j]||[]).sort((ht,ot)=>ht.page_number!==ot.page_number?ht.page_number-ot.page_number:new Date(ht.created_at)-new Date(ot.created_at))})).filter(j=>j.items.length>0)},[n,R,mt,Z,B,D]),pt=Lt.useMemo(()=>{if(n!=="page")return[];const F={};return R.forEach(j=>{const ht=j.page_number;F[ht]||(F[ht]=[]),F[ht].push(j)}),Object.entries(F).map(([j,ht])=>({page:Number(j),items:ht.sort((ot,lt)=>new Date(ot.created_at)-new Date(lt.created_at))})).sort((j,ht)=>j.page-ht.page)},[n,R]);if(!r)return t("/",{replace:!0}),null;if(H)return Y.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:Y.jsx(su,{className:"w-8 h-8 text-slate-400 animate-spin"})});if(Q||!q)return Y.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col items-center justify-center",children:[Y.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Document not found"}),Y.jsx("button",{type:"button",onClick:()=>t("/"),className:"bg-slate-800 text-white rounded-lg px-4 py-2 text-sm font-medium hover:bg-slate-700",children:"Back"})]});const ct=new Map;return[...I].sort((F,j)=>F.page_number!==j.page_number?F.page_number-j.page_number:new Date(F.created_at)-new Date(j.created_at)).forEach((F,j)=>ct.set(F.id,j+1)),Y.jsxs("div",{className:"min-h-screen bg-[#F8FAFB]",style:{fontFamily:"'DM Sans', -apple-system, sans-serif"},children:[Y.jsx("div",{className:"bg-white border-b border-slate-200 sticky top-0 z-50",style:{padding:"16px 32px"},children:Y.jsxs("div",{className:"max-w-[1060px] mx-auto",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-1",children:[Y.jsxs("div",{className:"flex items-center gap-3",children:[Y.jsxs("button",{type:"button",onClick:()=>t(`/document/${r}`),className:"text-slate-500 hover:text-slate-700 text-sm flex items-center gap-1",children:[Y.jsx(Mg,{className:"w-4 h-4"}),"Back"]}),Y.jsx("div",{className:"w-px h-5 bg-slate-200"}),Y.jsxs("div",{children:[Y.jsx("h1",{className:"text-[16px] font-semibold text-slate-900 tracking-tight",children:"Summary"}),Y.jsx("p",{className:"text-xs text-slate-400 truncate max-w-[300px]",children:q.filename})]})]}),Y.jsxs("div",{className:"relative",ref:O,children:[Y.jsxs("button",{type:"button",onClick:()=>S(F=>!F),disabled:!I.length,className:"flex items-center gap-1.5 px-3.5 py-1.5 rounded-md bg-slate-800 text-white text-[13px] font-medium hover:bg-slate-700 disabled:opacity-40 disabled:cursor-not-allowed transition-colors",children:[Y.jsx(ZR,{className:"w-3.5 h-3.5"}),"Export"]}),C&&Y.jsx("div",{className:"absolute right-0 top-full mt-1.5 bg-white border border-slate-200 rounded-lg shadow-lg py-1.5 z-50 min-w-[200px]",children:[{key:"docx",icon:d2,label:"Word (.docx)",desc:"Formatted summary"},{key:"pdf",icon:tL,label:"PDF (.pdf)",desc:"Print-ready export"},{key:"json",icon:GR,label:"JSON (.json)",desc:"Structured data"}].map(F=>Y.jsxs("button",{type:"button",onClick:()=>Ft(F.key),className:"flex items-center gap-2.5 w-full px-3 py-2 text-left hover:bg-slate-50 transition-colors",children:[Y.jsx(F.icon,{className:"w-4 h-4 text-slate-400 shrink-0"}),Y.jsxs("div",{children:[Y.jsx("div",{className:"text-[13px] font-medium text-slate-800",children:F.label}),Y.jsx("div",{className:"text-[11px] text-slate-400",children:F.desc})]})]},F.key))})]})]}),Y.jsxs("div",{className:"flex items-center gap-1.5 mt-3 mb-3.5",children:[Y.jsxs("span",{className:"text-xs font-semibold text-slate-600",children:[I.length," annotation",I.length!==1?"s":""]}),Y.jsx("span",{className:"text-slate-300 mx-0.5",children:""}),mt.map(F=>{const j=$[F]||0;if(!j)return null;const ht=Cf(F,D);return Y.jsxs("span",{className:"flex items-center gap-1",children:[Y.jsx("span",{className:"w-[7px] h-[7px] rounded-full",style:{backgroundColor:ht}}),Y.jsx("span",{className:"text-[11px] text-slate-500",children:j})]},F)})]}),Y.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[Y.jsx("div",{className:"flex bg-slate-100 rounded-md p-0.5",children:[{key:"sequence",label:"Sequence"},{key:"topic",label:"Topic"},{key:"page",label:"Page"}].map(F=>Y.jsx("button",{type:"button",onClick:()=>i(F.key),className:`px-3 py-1.5 rounded text-[12.5px] font-medium transition-all ${n===F.key?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:F.label},F.key))}),Y.jsxs("div",{className:"flex items-center gap-1.5 bg-slate-50 border border-slate-200 rounded-md px-2.5 py-1.5 flex-1 max-w-[280px]",children:[Y.jsx(o4,{className:"w-3.5 h-3.5 text-slate-400"}),Y.jsx("input",{type:"text",value:s,onChange:F=>l(F.target.value),placeholder:"Search annotations...",className:"border-0 bg-transparent outline-none text-[12.5px] text-slate-900 w-full placeholder:text-slate-400"}),s&&Y.jsx("button",{type:"button",onClick:()=>l(""),className:"text-slate-400 hover:text-slate-600",children:Y.jsx(Rf,{className:"w-3.5 h-3.5"})})]}),p.size>0&&Y.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-blue-50 rounded-md border border-blue-200",children:[Y.jsxs("span",{className:"text-xs font-medium text-blue-600",children:[p.size," selected"]}),Y.jsx("button",{type:"button",onClick:()=>{const j=I.filter(ht=>p.has(ht.id)).map(ht=>`"${ht.highlighted_text}"  p.${ht.page_number}`).join(`

`);navigator.clipboard?.writeText(j)},className:"text-[11px] font-medium text-blue-600 border border-blue-300 rounded px-2 py-0.5 hover:bg-blue-100",children:"Copy selected"}),Y.jsx("button",{type:"button",onClick:()=>y(new Set),className:"text-blue-400 hover:text-blue-600",children:Y.jsx(Rf,{className:"w-3.5 h-3.5"})})]})]}),Y.jsx("div",{className:"flex flex-wrap gap-1.5 mt-3",children:mt.map(F=>{const j=$[F]||0;if(!j)return null;const ht=Cf(F,D),ot=Cc(F,Z,B),lt=o.length===0||o.includes(F);return Y.jsxs("button",{type:"button",onClick:()=>st(F),className:"flex items-center gap-1.5 px-2.5 py-1 rounded-md border transition-all",style:{borderColor:lt?ht:"#E2E8F0",background:lt?Lf(ht,.08):"#fff",opacity:lt?1:.5},children:[Y.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:ht}}),Y.jsx("span",{className:"text-xs font-medium",style:{color:lt?ht:"#94A3B8"},children:ot}),Y.jsx("span",{className:"text-[11px] font-semibold px-1.5 rounded",style:{color:lt?ht:"#CBD5E1",background:lt?Lf(ht,.1):"#F8FAFC"},children:j})]},F)})})]})}),Y.jsx("div",{className:"max-w-[1060px] mx-auto",style:{padding:"24px 32px 60px 64px"},children:I.length?R.length===0?Y.jsx("div",{className:"text-center py-16 text-slate-400 text-sm",children:"No annotations match your search."}):n==="sequence"?Y.jsx("div",{className:"flex flex-col gap-2",children:K.map(F=>Y.jsx(Zv,{h:F,seq:ct.get(F.id),showCategory:!0,presetColorMap:D,colorLabels:Z,presetColors:B,hovered:h===F.id,selected:p.has(F.id),onHover:f,onLeave:()=>f(null),onSelect:vt,editingNoteId:b,editingNoteValue:v,onEditNote:j=>{_(j),A(F.note?.content??"")},onChangeNote:A,onSaveNote:()=>it.mutate({highlightId:b,note:v.trim()}),onCancelNote:()=>{_(null),A("")},savingNote:it.isPending},F.id))}):n==="topic"?Y.jsx("div",{className:"flex flex-col gap-5",children:rt.map(({colorKey:F,topic:j,hex:ht,items:ot})=>{const lt=m.has(F);return Y.jsxs("div",{children:[Y.jsxs("button",{type:"button",onClick:()=>wt(F),className:"flex items-center gap-2 w-full pb-2.5 sticky top-[160px] z-10",children:[Y.jsx(fb,{className:"w-4 h-4 text-slate-500 transition-transform",style:{transform:lt?"rotate(0deg)":"rotate(90deg)"}}),Y.jsx("span",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:ht}}),Y.jsx("span",{className:"text-sm font-semibold text-slate-900",children:j}),Y.jsx("span",{className:"text-xs font-medium text-slate-400 bg-slate-100 px-1.5 rounded",children:ot.length})]}),!lt&&Y.jsx("div",{className:"flex flex-col gap-2",children:ot.map(ft=>Y.jsx(Zv,{h:ft,seq:ct.get(ft.id),showCategory:!1,presetColorMap:D,colorLabels:Z,presetColors:B,hovered:h===ft.id,selected:p.has(ft.id),onHover:f,onLeave:()=>f(null),onSelect:vt,editingNoteId:b,editingNoteValue:v,onEditNote:Mt=>{_(Mt),A(ft.note?.content??"")},onChangeNote:A,onSaveNote:()=>it.mutate({highlightId:b,note:v.trim()}),onCancelNote:()=>{_(null),A("")},savingNote:it.isPending},ft.id))})]},F)})}):Y.jsx("div",{className:"flex flex-col gap-5",children:pt.map(({page:F,items:j})=>{const ht=`p${F}`,ot=m.has(ht);return Y.jsxs("div",{children:[Y.jsxs("button",{type:"button",onClick:()=>wt(ht),className:"flex items-center gap-2 pb-2.5 sticky top-[160px] z-10",children:[Y.jsx(fb,{className:"w-4 h-4 text-slate-500 transition-transform",style:{transform:ot?"rotate(0deg)":"rotate(90deg)"}}),Y.jsxs("span",{className:"text-sm font-semibold text-slate-900",children:["Page ",F]}),Y.jsx("span",{className:"text-xs font-medium text-slate-400 bg-slate-100 px-1.5 rounded",children:j.length})]}),!ot&&Y.jsx("div",{className:"flex flex-col gap-2",children:j.map(lt=>Y.jsx(Zv,{h:lt,seq:ct.get(lt.id),showCategory:!0,presetColorMap:D,colorLabels:Z,presetColors:B,hovered:h===lt.id,selected:p.has(lt.id),onHover:f,onLeave:()=>f(null),onSelect:vt,editingNoteId:b,editingNoteValue:v,onEditNote:ft=>{_(ft),A(lt.note?.content??"")},onChangeNote:A,onSaveNote:()=>it.mutate({highlightId:b,note:v.trim()}),onCancelNote:()=>{_(null),A("")},savingNote:it.isPending},lt.id))})]},ht)})}):Y.jsxs("div",{className:"text-center py-16 text-slate-400 text-sm",children:[Y.jsx("p",{children:"No highlights yet."}),Y.jsx("p",{className:"mt-1",children:"Select text in the document to create highlights, then return here."}),Y.jsx("button",{type:"button",onClick:()=>t(`/document/${r}`),className:"bg-slate-800 text-white rounded-lg px-4 py-2 text-sm font-medium hover:bg-slate-700 mt-4",children:"Open document"})]})})]})}function Zv({h:r,seq:t,showCategory:e,presetColorMap:n,colorLabels:i,presetColors:s,hovered:l,selected:o,onHover:c,onLeave:h,onSelect:f,editingNoteId:p,editingNoteValue:y,onEditNote:m,onChangeNote:w,onSaveNote:b,onCancelNote:_,savingNote:v}){const[A,C]=Lt.useState(!1),S=Cf(r.color,n),O=Cc(r.color,i,s),q=p===r.id,H=Q=>{Q.stopPropagation(),navigator.clipboard?.writeText(`"${r.highlighted_text}"  p.${r.page_number}`),C(!0),setTimeout(()=>C(!1),1500)};return Y.jsxs("div",{className:"relative rounded-lg bg-white transition-all",style:{border:`1px solid ${l?Lf(S,.3):"#E8ECF0"}`,borderLeft:`3px solid ${S}`,padding:"14px 16px 12px 16px",boxShadow:l?"0 2px 8px rgba(0,0,0,0.06)":"none"},onMouseEnter:()=>c?.(r.id),onMouseLeave:()=>h?.(),children:[Y.jsx("div",{className:"absolute transition-opacity",style:{top:14,left:-32,opacity:l||o?1:0},children:Y.jsx("div",{onClick:Q=>{Q.stopPropagation(),f?.(r.id)},className:"w-[18px] h-[18px] rounded flex items-center justify-center cursor-pointer transition-all",style:{border:o?`2px solid ${S}`:"2px solid #CBD5E1",background:o?S:"#fff"},children:o&&Y.jsx(mg,{className:"w-3 h-3 text-white",strokeWidth:3})})}),Y.jsxs("p",{className:"text-[13.5px] leading-[1.55] text-slate-900",style:{fontFamily:"'Charter', 'Georgia', serif"},children:["",r.highlighted_text||"(No text captured)",""]}),q?Y.jsxs("div",{className:"mt-2 space-y-1.5",children:[Y.jsx("textarea",{value:y,onChange:Q=>w(Q.target.value),rows:2,autoFocus:!0,className:"w-full text-[12.5px] border border-slate-200 rounded-lg px-2.5 py-1.5 resize-none outline-none focus:ring-1 focus:ring-slate-300 text-slate-800",placeholder:"Add a note..."}),Y.jsxs("div",{className:"flex gap-1.5",children:[Y.jsx("button",{type:"button",onClick:b,disabled:v,className:"text-[11px] font-medium px-2 py-1 rounded bg-slate-800 text-white hover:bg-slate-700 disabled:opacity-50",children:v?"Saving":"Save"}),Y.jsx("button",{type:"button",onClick:_,className:"text-[11px] font-medium px-2 py-1 rounded text-slate-600 hover:bg-slate-100",children:"Cancel"})]})]}):r.note?.content?Y.jsx("p",{className:"mt-2 text-[12.5px] leading-normal italic",style:{color:S},children:r.note.content}):l&&Y.jsx("button",{type:"button",onClick:()=>m(r.id),className:"mt-2 text-xs text-slate-400 hover:text-slate-600 cursor-pointer",children:"+ Add a note..."}),Y.jsxs("div",{className:"flex items-center gap-2 mt-2.5 pt-2 border-t border-slate-100",children:[e&&Y.jsx("span",{className:"text-[11px] font-semibold px-2 py-0.5 rounded",style:{color:S,background:Lf(S,.08)},children:O}),Y.jsxs("span",{className:"text-[11px] font-medium text-slate-400",children:["p.",r.page_number]}),t!=null&&Y.jsxs("span",{className:"text-[10px] text-slate-300",children:["#",t]}),Y.jsxs("div",{className:"ml-auto flex gap-1 transition-opacity",style:{opacity:l?1:0},children:[Y.jsxs("button",{type:"button",onClick:H,className:"flex items-center gap-1 text-[11px] border border-slate-200 rounded px-2 py-0.5 hover:bg-slate-50",style:{color:A?"#16A34A":"#64748B"},children:[A?Y.jsx(mg,{className:"w-3 h-3"}):Y.jsx(YR,{className:"w-3 h-3"}),A?"Copied":"Copy"]}),Y.jsxs("button",{type:"button",onClick:()=>m(r.id),className:"flex items-center gap-1 text-[11px] text-slate-500 border border-slate-200 rounded px-2 py-0.5 hover:bg-slate-50",children:[Y.jsx(gg,{className:"w-3 h-3"}),"Edit"]})]})]})]})}const o3=["#FBBF24","#34D399","#60A5FA","#F472B6","#FB923C","#f59e0b","#3b82f6","#10b981","#ef4444","#8b5cf6","#ec4899","#06b6d4","#f97316","#84cc16","#14b8a6"],T9=10;function N9(){const r=Lc(),[t,e]=Lt.useState(0),[n,i]=Lt.useState(""),[s,l]=Lt.useState(null),[o,c]=Lt.useState(""),[h,f]=Lt.useState(null),[p,y]=Lt.useState(null),[m,w]=Lt.useState(""),[b,_]=Lt.useState(null),[v,A]=Lt.useState(""),{data:C=[]}=Go({queryKey:["presets"],queryFn:async()=>{const{data:B}=await pl.list();return B}}),S=()=>{e(0),i(""),l(null),c("")},O=ka({mutationFn:B=>pl.create(B),onSuccess:()=>{r.invalidateQueries({queryKey:["presets"]}),S()}}),q=ka({mutationFn:B=>pl.delete(B),onSuccess:()=>r.invalidateQueries({queryKey:["presets"]})}),H=ka({mutationFn:({presetId:B,data:Z})=>pl.addColor(B,Z),onSuccess:()=>{r.invalidateQueries({queryKey:["presets"]}),f(null),y(null),w("")}}),Q=ka({mutationFn:({presetId:B,colorId:Z})=>pl.removeColor(B,Z),onSuccess:()=>r.invalidateQueries({queryKey:["presets"]})}),I=ka({mutationFn:({presetId:B,colorId:Z,displayName:D})=>pl.updateColor(B,Z,{display_name:D}),onSuccess:()=>{r.invalidateQueries({queryKey:["presets"]}),_(null),A("")}}),dt=()=>{!n.trim()||!s||!o.trim()||O.mutate({name:n.trim(),colors:[{key:`color_${Date.now()}`,display_name:o.trim(),hex:s}]})},nt=()=>{!h||!p||!m.trim()||H.mutate({presetId:h,data:{key:`custom_${Date.now()}`,display_name:m.trim(),hex:p}})};return Y.jsxs("section",{className:"mt-8 p-6 bg-white border border-slate-200 rounded-xl",children:[Y.jsxs("h2",{className:"text-base font-semibold text-slate-800 mb-1 flex items-center gap-2",children:[Y.jsx(oL,{className:"w-4 h-4 text-slate-500"}),"Highlight presets"]}),Y.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Create custom colour presets for documents."}),Y.jsx("ul",{className:"space-y-2 mb-4",children:C.map(B=>Y.jsxs("li",{className:"py-2.5 px-3 rounded-lg bg-slate-50 border border-slate-100",children:[Y.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1.5",children:[Y.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[Y.jsx("span",{className:"font-medium text-slate-800 truncate",children:B.name}),B.is_system&&Y.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 rounded bg-slate-200 text-slate-600 shrink-0",children:"System"})]}),!B.is_system&&Y.jsx("button",{type:"button",onClick:()=>{window.confirm(`Delete preset "${B.name}"?`)&&q.mutate(B.id)},className:"p-1 rounded text-slate-400 hover:text-red-600 hover:bg-red-50 shrink-0",title:"Delete preset",children:Y.jsx(Jd,{className:"w-3.5 h-3.5"})})]}),Y.jsxs("div",{className:"flex flex-wrap gap-1.5 items-center",children:[(B.colors??[]).map(Z=>{const D=b?.presetId===B.id&&b?.colorId===Z.id;return Y.jsxs("div",{className:"relative group flex items-center gap-1 bg-white rounded-full border border-slate-200 pl-1 pr-2 py-0.5 min-w-0",children:[Y.jsx("div",{className:"w-4 h-4 rounded-full shrink-0",style:{backgroundColor:Z.hex}}),D?Y.jsx("input",{type:"text",value:v,onChange:mt=>A(mt.target.value),onBlur:()=>{const mt=v.trim();mt&&mt!==Z.display_name?I.mutate({presetId:B.id,colorId:Z.id,displayName:mt}):(_(null),A(""))},onKeyDown:mt=>{if(mt.key==="Enter"){const it=v.trim();it&&I.mutate({presetId:B.id,colorId:Z.id,displayName:it})}mt.key==="Escape"&&(_(null),A(""))},autoFocus:!0,className:"text-[11px] text-slate-600 bg-transparent border-0 outline-none focus:ring-0 min-w-[72px] max-w-[140px] py-0"}):Y.jsx("button",{type:"button",onClick:()=>{B.is_system||(_({presetId:B.id,colorId:Z.id}),A(Z.display_name))},className:`text-[11px] text-slate-600 text-left truncate max-w-[120px] ${B.is_system?"cursor-default":"cursor-pointer hover:text-slate-800"}`,children:Z.display_name}),!B.is_system&&(B.colors?.length??0)>1&&!D&&Y.jsx("button",{type:"button",onClick:mt=>{mt.stopPropagation(),Q.mutate({presetId:B.id,colorId:Z.id})},className:"ml-0.5 text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity shrink-0",children:Y.jsx(Rf,{className:"w-3 h-3",strokeWidth:2.5})})]},Z.id)}),!B.is_system&&(B.colors?.length??0)<T9&&Y.jsx("button",{type:"button",onClick:()=>{f(B.id),y(null),w("")},className:"w-5 h-5 rounded-full border-2 border-dashed border-slate-300 flex items-center justify-center text-slate-400 hover:border-slate-400 hover:text-slate-500 transition-colors",title:"Add colour",children:Y.jsx(l_,{className:"w-3 h-3",strokeWidth:2.5})})]})]},B.id))}),Y.jsxs("button",{type:"button",onClick:()=>e(1),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg border border-slate-200 bg-white text-slate-700 hover:bg-slate-50",children:[Y.jsx(l_,{className:"w-4 h-4"}),"Create preset"]}),t>0&&Y.jsx("div",{className:"fixed inset-0 z-9999 flex items-center justify-center bg-black/40",onClick:()=>!O.isPending&&S(),children:Y.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-slate-200 w-full max-w-sm mx-4 p-5",onClick:B=>B.stopPropagation(),children:[t===1&&Y.jsxs(Y.Fragment,{children:[Y.jsx("h3",{className:"text-base font-semibold text-slate-800 mb-3",children:"New preset"}),Y.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Preset name"}),Y.jsx("input",{type:"text",value:n,onChange:B=>i(B.target.value),placeholder:"e.g. Private Equity",autoFocus:!0,onKeyDown:B=>{B.key==="Enter"&&n.trim()&&e(2)},className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-800 placeholder:text-slate-400 outline-none focus:ring-2 focus:ring-slate-300 mb-4"}),Y.jsxs("div",{className:"flex justify-end gap-2",children:[Y.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 text-sm text-slate-600 hover:bg-slate-100 rounded-lg",children:"Cancel"}),Y.jsx("button",{type:"button",onClick:()=>e(2),disabled:!n.trim(),className:"px-4 py-2 text-sm font-medium rounded-lg bg-slate-800 text-white hover:bg-slate-700 disabled:opacity-50",children:"Next"})]})]}),t===2&&Y.jsxs(Y.Fragment,{children:[Y.jsx("h3",{className:"text-base font-semibold text-slate-800 mb-1",children:"Add your first colour"}),Y.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Pick a colour, then give it a label."}),Y.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:o3.map(B=>Y.jsx("button",{type:"button",onClick:()=>l(B),className:"w-7 h-7 rounded-full shrink-0 transition-all border-2 focus:outline-none",style:{background:B,borderColor:s===B?"#1e293b":"transparent",transform:s===B?"scale(1.15)":"scale(1)"}},B))}),s&&Y.jsxs("div",{className:"flex items-center gap-2.5 mb-4",children:[Y.jsx("div",{className:"w-6 h-6 rounded-full shrink-0 border-2 border-slate-200",style:{backgroundColor:s}}),Y.jsx("input",{type:"text",value:o,onChange:B=>c(B.target.value),placeholder:"Label, e.g. Key Metrics",autoFocus:!0,onKeyDown:B=>{B.key==="Enter"&&dt()},className:"flex-1 rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-800 placeholder:text-slate-400 outline-none focus:ring-2 focus:ring-slate-300"})]}),Y.jsxs("div",{className:"flex justify-end gap-2",children:[Y.jsx("button",{type:"button",onClick:()=>e(1),className:"px-4 py-2 text-sm text-slate-600 hover:bg-slate-100 rounded-lg",children:"Back"}),Y.jsx("button",{type:"button",onClick:dt,disabled:!s||!o.trim()||O.isPending,className:"px-4 py-2 text-sm font-medium rounded-lg bg-slate-800 text-white hover:bg-slate-700 disabled:opacity-50",children:O.isPending?"Creating":"Create preset"})]})]})]})}),h&&Y.jsx("div",{className:"fixed inset-0 z-9999 flex items-center justify-center bg-black/40",onClick:()=>!H.isPending&&f(null),children:Y.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-slate-200 w-full max-w-sm mx-4 p-5",onClick:B=>B.stopPropagation(),children:[Y.jsx("h3",{className:"text-base font-semibold text-slate-800 mb-3",children:"Add colour"}),p?Y.jsx("div",{className:"space-y-2.5",children:Y.jsxs("div",{className:"flex items-center gap-2.5",children:[Y.jsx("div",{className:"w-7 h-7 rounded-full shrink-0 border-2 border-slate-300",style:{backgroundColor:p}}),Y.jsx("input",{type:"text",value:m,onChange:B=>w(B.target.value),placeholder:"Label, e.g. Investment Risks",autoFocus:!0,onKeyDown:B=>{B.key==="Enter"&&nt()},className:"flex-1 min-w-0 rounded-lg border border-slate-200 px-2.5 py-1.5 text-sm text-slate-800 placeholder:text-slate-400 outline-none focus:ring-2 focus:ring-slate-300"})]})}):Y.jsxs(Y.Fragment,{children:[Y.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Pick a colour"}),Y.jsx("div",{className:"flex flex-wrap gap-2",children:(()=>{const B=C.find(D=>D.id===h),Z=new Set((B?.colors??[]).map(D=>D.hex.toLowerCase()));return o3.filter(D=>!Z.has(D.toLowerCase()))})().map(B=>Y.jsx("button",{type:"button",onClick:()=>y(B),className:"w-7 h-7 rounded-full border-2 border-transparent hover:border-slate-400 transition-all hover:scale-110",style:{backgroundColor:B}},B))})]}),Y.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[Y.jsx("button",{type:"button",onClick:()=>{p?(y(null),w("")):f(null)},disabled:H.isPending,className:"px-4 py-2 text-sm text-slate-600 hover:bg-slate-100 rounded-lg",children:p?"Back":"Cancel"}),p&&Y.jsx("button",{type:"button",onClick:nt,disabled:!m.trim()||H.isPending,className:"px-4 py-2 text-sm font-medium rounded-lg bg-slate-800 text-white hover:bg-slate-700 disabled:opacity-50",children:H.isPending?"Adding":"Add"})]})]})})]})}function k9({onClose:r,onConfirm:t,isDeleting:e}){return Y.jsx("div",{className:"fixed inset-0 bg-slate-950/40 backdrop-blur-sm flex items-center justify-center z-1000",onClick:r,children:Y.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-[400px] mx-4 shadow-xl",onClick:n=>n.stopPropagation(),children:[Y.jsx("h3",{className:"m-0 text-lg font-semibold text-slate-900",style:{fontFamily:"'Instrument Serif', serif"},children:"Delete account?"}),Y.jsx("p",{className:"mt-2 mb-6 text-sm text-slate-600",style:{fontFamily:"'DM Sans', sans-serif"},children:"This will permanently delete your account and all your data. This cannot be undone."}),Y.jsxs("div",{className:"flex justify-end gap-2",children:[Y.jsx("button",{type:"button",onClick:r,disabled:e,className:"px-4 py-2 text-sm font-medium border border-slate-200 rounded-lg bg-white text-slate-600 hover:bg-slate-50",children:"Cancel"}),Y.jsx("button",{type:"button",onClick:t,disabled:e,className:"px-4 py-2 text-sm font-medium rounded-lg text-white bg-red-600 hover:bg-red-700 disabled:opacity-70",children:e?Y.jsxs(Y.Fragment,{children:[Y.jsx(su,{className:"w-4 h-4 animate-spin inline-block mr-1.5 align-middle"}),"Deleting"]}):"Delete account"})]})]})})}function R9(){const r=Wu(),t=Ku(f=>f.logout),[e,n]=Lt.useState(!1),[i,s]=Lt.useState(!1),[l,o]=Lt.useState(""),c=()=>{t(),r("/login",{replace:!0})},h=async()=>{o(""),s(!0);try{await kf.deleteAccount(),t(),r("/",{replace:!0})}catch(f){o(f.response?.data?.detail||f.message||"Something went wrong."),s(!1)}};return Y.jsxs("div",{className:"min-h-screen bg-slate-50 antialiased",style:{fontFamily:"'DM Sans', sans-serif"},children:[Y.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=DM+Sans:ital,wght@0,400;0,500;0,600;1,400&display=swap",rel:"stylesheet"}),Y.jsxs("header",{className:"bg-white/92 backdrop-blur-md border-b border-slate-200 py-4 px-10 flex items-center justify-between",children:[Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx("button",{type:"button",onClick:()=>r("/app"),className:"p-2 rounded-lg text-slate-500 hover:text-slate-700 hover:bg-slate-100",title:"Back to projects",children:Y.jsx(Mg,{className:"w-4 h-4"})}),Y.jsx("span",{className:"text-[1.05rem] font-semibold text-slate-900",style:{fontFamily:"'Instrument Serif', serif"},children:"WiseMark"})]}),Y.jsx("button",{type:"button",onClick:c,className:"p-2 rounded-lg text-slate-500 hover:text-slate-700 hover:bg-slate-100",title:"Sign out",children:Y.jsx(p2,{className:"w-4 h-4"})})]}),Y.jsxs("div",{className:"max-w-[560px] mx-auto px-6 py-10",children:[Y.jsx("h1",{className:"m-0 text-[28px] font-normal text-slate-950 tracking-tight",style:{fontFamily:"'Instrument Serif', serif"},children:"Account settings"}),Y.jsx(N9,{}),Y.jsxs("section",{className:"mt-8 p-6 bg-white border border-slate-200 rounded-xl",children:[Y.jsx("h2",{className:"text-base font-semibold text-slate-800 mb-1",children:"Delete account"}),Y.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Permanently delete your account and all your projects and documents."}),Y.jsx("button",{type:"button",onClick:()=>n(!0),className:"px-4 py-2 text-sm font-medium rounded-lg text-red-600 border border-red-200 bg-white hover:bg-red-50",children:"Delete account"})]}),l&&Y.jsx("p",{className:"mt-4 text-sm text-red-600",children:l})]}),e&&Y.jsx(k9,{onClose:()=>!i&&n(!1),onConfirm:h,isDeleting:i})]})}const L9=new Ik({defaultOptions:{queries:{staleTime:3e4,retry:1}}});function Ud({children:r}){return Ku(e=>e.token)?r:Y.jsx(cg,{to:"/login",replace:!0})}function l3({children:r}){return Ku(e=>e.token)?Y.jsx(cg,{to:"/app",replace:!0}):r}function O9(){return Y.jsx(jk,{client:L9,children:Y.jsx(ik,{children:Y.jsxs(PN,{children:[Y.jsx(Ql,{path:"/login",element:Y.jsx(l3,{children:Y.jsx(MR,{})})}),Y.jsx(Ql,{path:"/register",element:Y.jsx(l3,{children:Y.jsx(FR,{})})}),Y.jsx(Ql,{path:"/",element:Y.jsx(cg,{to:"/app",replace:!0})}),Y.jsx(Ql,{path:"/app",element:Y.jsx(Ud,{children:Y.jsx(TL,{})})}),Y.jsx(Ql,{path:"/app/settings",element:Y.jsx(Ud,{children:Y.jsx(R9,{})})}),Y.jsx(Ql,{path:"/project/:projectId",element:Y.jsx(Ud,{children:Y.jsx(DL,{})})}),Y.jsx(Ql,{path:"/document/:id",element:Y.jsx(Ud,{children:Y.jsx(VD,{})})}),Y.jsx(Ql,{path:"/document/:id/summary",element:Y.jsx(Ud,{children:Y.jsx(C9,{})})}),Y.jsx(Ql,{path:"*",element:Y.jsx(cg,{to:"/app",replace:!0})})]})})})}BT.createRoot(document.getElementById("root")).render(Y.jsx(Lt.StrictMode,{children:Y.jsx(O9,{})}));export{Lr as _,zd as c,u3 as g};
