var e0=r=>{throw TypeError(r)};var gp=(r,t,e)=>t.has(r)||e0("Cannot "+e);var We=(r,t,e)=>(gp(r,t,"read from private field"),e?e.call(r):t.get(r)),ws=(r,t,e)=>t.has(r)?e0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),di=(r,t,e,i)=>(gp(r,t,"write to private field"),i?i.call(r,e):t.set(r,e),e),Ss=(r,t,e)=>(gp(r,t,"access private method"),e);var n0=(r,t,e,i)=>({set _(a){di(r,t,a,e)},get _(){return We(r,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();var N1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var yp={exports:{}},Ac={};var i0;function O1(){if(i0)return Ac;i0=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var u in a)u!=="key"&&(l[u]=a[u])}else l=a;return a=l.ref,{$$typeof:r,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Ac.Fragment=t,Ac.jsx=e,Ac.jsxs=e,Ac}var s0;function k1(){return s0||(s0=1,yp.exports=O1()),yp.exports}var R=k1(),bp={exports:{}},ae={};var a0;function L1(){if(a0)return ae;a0=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),x=Symbol.iterator;function S(B){return B===null||typeof B!="object"?null:(B=x&&B[x]||B["@@iterator"],typeof B=="function"?B:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,T={};function M(B,J,ft){this.props=B,this.context=J,this.refs=T,this.updater=ft||A}M.prototype.isReactComponent={},M.prototype.setState=function(B,J){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,J,"setState")},M.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function k(){}k.prototype=M.prototype;function N(B,J,ft){this.props=B,this.context=J,this.refs=T,this.updater=ft||A}var F=N.prototype=new k;F.constructor=N,E(F,M.prototype),F.isPureReactComponent=!0;var I=Array.isArray;function z(){}var H={H:null,A:null,T:null,S:null},ct=Object.prototype.hasOwnProperty;function ut(B,J,ft){var wt=ft.ref;return{$$typeof:r,type:B,key:J,ref:wt!==void 0?wt:null,props:ft}}function At(B,J){return ut(B.type,J,B.props)}function Ct(B){return typeof B=="object"&&B!==null&&B.$$typeof===r}function Rt(B){var J={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ft){return J[ft]})}var Vt=/\/+/g;function xt(B,J){return typeof B=="object"&&B!==null&&B.key!=null?Rt(""+B.key):J.toString(36)}function zt(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(z,z):(B.status="pending",B.then(function(J){B.status==="pending"&&(B.status="fulfilled",B.value=J)},function(J){B.status==="pending"&&(B.status="rejected",B.reason=J)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function G(B,J,ft,wt,Mt){var qt=typeof B;(qt==="undefined"||qt==="boolean")&&(B=null);var jt=!1;if(B===null)jt=!0;else switch(qt){case"bigint":case"string":case"number":jt=!0;break;case"object":switch(B.$$typeof){case r:case t:jt=!0;break;case p:return jt=B._init,G(jt(B._payload),J,ft,wt,Mt)}}if(jt)return Mt=Mt(B),jt=wt===""?"."+xt(B,0):wt,I(Mt)?(ft="",jt!=null&&(ft=jt.replace(Vt,"$&/")+"/"),G(Mt,J,ft,"",function(Tt){return Tt})):Mt!=null&&(Ct(Mt)&&(Mt=At(Mt,ft+(Mt.key==null||B&&B.key===Mt.key?"":(""+Mt.key).replace(Vt,"$&/")+"/")+jt)),J.push(Mt)),1;jt=0;var he=wt===""?".":wt+":";if(I(B))for(var re=0;re<B.length;re++)wt=B[re],qt=he+xt(wt,re),jt+=G(wt,J,ft,qt,Mt);else if(re=S(B),typeof re=="function")for(B=re.call(B),re=0;!(wt=B.next()).done;)wt=wt.value,qt=he+xt(wt,re++),jt+=G(wt,J,ft,qt,Mt);else if(qt==="object"){if(typeof B.then=="function")return G(zt(B),J,ft,wt,Mt);throw J=String(B),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return jt}function it(B,J,ft){if(B==null)return B;var wt=[],Mt=0;return G(B,wt,"","",function(qt){return J.call(ft,qt,Mt++)}),wt}function vt(B){if(B._status===-1){var J=B._result;J=J(),J.then(function(ft){(B._status===0||B._status===-1)&&(B._status=1,B._result=ft)},function(ft){(B._status===0||B._status===-1)&&(B._status=2,B._result=ft)}),B._status===-1&&(B._status=0,B._result=J)}if(B._status===1)return B._result.default;throw B._result}var Ht=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},Ot={map:it,forEach:function(B,J,ft){it(B,function(){J.apply(this,arguments)},ft)},count:function(B){var J=0;return it(B,function(){J++}),J},toArray:function(B){return it(B,function(J){return J})||[]},only:function(B){if(!Ct(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return ae.Activity=y,ae.Children=Ot,ae.Component=M,ae.Fragment=e,ae.Profiler=a,ae.PureComponent=N,ae.StrictMode=i,ae.Suspense=d,ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,ae.__COMPILER_RUNTIME={__proto__:null,c:function(B){return H.H.useMemoCache(B)}},ae.cache=function(B){return function(){return B.apply(null,arguments)}},ae.cacheSignal=function(){return null},ae.cloneElement=function(B,J,ft){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var wt=E({},B.props),Mt=B.key;if(J!=null)for(qt in J.key!==void 0&&(Mt=""+J.key),J)!ct.call(J,qt)||qt==="key"||qt==="__self"||qt==="__source"||qt==="ref"&&J.ref===void 0||(wt[qt]=J[qt]);var qt=arguments.length-2;if(qt===1)wt.children=ft;else if(1<qt){for(var jt=Array(qt),he=0;he<qt;he++)jt[he]=arguments[he+2];wt.children=jt}return ut(B.type,Mt,wt)},ae.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:l,_context:B},B},ae.createElement=function(B,J,ft){var wt,Mt={},qt=null;if(J!=null)for(wt in J.key!==void 0&&(qt=""+J.key),J)ct.call(J,wt)&&wt!=="key"&&wt!=="__self"&&wt!=="__source"&&(Mt[wt]=J[wt]);var jt=arguments.length-2;if(jt===1)Mt.children=ft;else if(1<jt){for(var he=Array(jt),re=0;re<jt;re++)he[re]=arguments[re+2];Mt.children=he}if(B&&B.defaultProps)for(wt in jt=B.defaultProps,jt)Mt[wt]===void 0&&(Mt[wt]=jt[wt]);return ut(B,qt,Mt)},ae.createRef=function(){return{current:null}},ae.forwardRef=function(B){return{$$typeof:u,render:B}},ae.isValidElement=Ct,ae.lazy=function(B){return{$$typeof:p,_payload:{_status:-1,_result:B},_init:vt}},ae.memo=function(B,J){return{$$typeof:f,type:B,compare:J===void 0?null:J}},ae.startTransition=function(B){var J=H.T,ft={};H.T=ft;try{var wt=B(),Mt=H.S;Mt!==null&&Mt(ft,wt),typeof wt=="object"&&wt!==null&&typeof wt.then=="function"&&wt.then(z,Ht)}catch(qt){Ht(qt)}finally{J!==null&&ft.types!==null&&(J.types=ft.types),H.T=J}},ae.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},ae.use=function(B){return H.H.use(B)},ae.useActionState=function(B,J,ft){return H.H.useActionState(B,J,ft)},ae.useCallback=function(B,J){return H.H.useCallback(B,J)},ae.useContext=function(B){return H.H.useContext(B)},ae.useDebugValue=function(){},ae.useDeferredValue=function(B,J){return H.H.useDeferredValue(B,J)},ae.useEffect=function(B,J){return H.H.useEffect(B,J)},ae.useEffectEvent=function(B){return H.H.useEffectEvent(B)},ae.useId=function(){return H.H.useId()},ae.useImperativeHandle=function(B,J,ft){return H.H.useImperativeHandle(B,J,ft)},ae.useInsertionEffect=function(B,J){return H.H.useInsertionEffect(B,J)},ae.useLayoutEffect=function(B,J){return H.H.useLayoutEffect(B,J)},ae.useMemo=function(B,J){return H.H.useMemo(B,J)},ae.useOptimistic=function(B,J){return H.H.useOptimistic(B,J)},ae.useReducer=function(B,J,ft){return H.H.useReducer(B,J,ft)},ae.useRef=function(B){return H.H.useRef(B)},ae.useState=function(B){return H.H.useState(B)},ae.useSyncExternalStore=function(B,J,ft){return H.H.useSyncExternalStore(B,J,ft)},ae.useTransition=function(){return H.H.useTransition()},ae.version="19.2.4",ae}var r0;function ym(){return r0||(r0=1,bp.exports=L1()),bp.exports}var U=ym();const yh=Dv(U);var vp={exports:{}},Ec={},xp={exports:{}},wp={};var o0;function P1(){return o0||(o0=1,(function(r){function t(G,it){var vt=G.length;G.push(it);t:for(;0<vt;){var Ht=vt-1>>>1,Ot=G[Ht];if(0<a(Ot,it))G[Ht]=it,G[vt]=Ot,vt=Ht;else break t}}function e(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var it=G[0],vt=G.pop();if(vt!==it){G[0]=vt;t:for(var Ht=0,Ot=G.length,B=Ot>>>1;Ht<B;){var J=2*(Ht+1)-1,ft=G[J],wt=J+1,Mt=G[wt];if(0>a(ft,vt))wt<Ot&&0>a(Mt,ft)?(G[Ht]=Mt,G[wt]=vt,Ht=wt):(G[Ht]=ft,G[J]=vt,Ht=J);else if(wt<Ot&&0>a(Mt,vt))G[Ht]=Mt,G[wt]=vt,Ht=wt;else break t}}return it}function a(G,it){var vt=G.sortIndex-it.sortIndex;return vt!==0?vt:G.id-it.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();r.unstable_now=function(){return c.now()-u}}var d=[],f=[],p=1,y=null,x=3,S=!1,A=!1,E=!1,T=!1,M=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function F(G){for(var it=e(f);it!==null;){if(it.callback===null)i(f);else if(it.startTime<=G)i(f),it.sortIndex=it.expirationTime,t(d,it);else break;it=e(f)}}function I(G){if(E=!1,F(G),!A)if(e(d)!==null)A=!0,z||(z=!0,Rt());else{var it=e(f);it!==null&&zt(I,it.startTime-G)}}var z=!1,H=-1,ct=5,ut=-1;function At(){return T?!0:!(r.unstable_now()-ut<ct)}function Ct(){if(T=!1,z){var G=r.unstable_now();ut=G;var it=!0;try{t:{A=!1,E&&(E=!1,k(H),H=-1),S=!0;var vt=x;try{e:{for(F(G),y=e(d);y!==null&&!(y.expirationTime>G&&At());){var Ht=y.callback;if(typeof Ht=="function"){y.callback=null,x=y.priorityLevel;var Ot=Ht(y.expirationTime<=G);if(G=r.unstable_now(),typeof Ot=="function"){y.callback=Ot,F(G),it=!0;break e}y===e(d)&&i(d),F(G)}else i(d);y=e(d)}if(y!==null)it=!0;else{var B=e(f);B!==null&&zt(I,B.startTime-G),it=!1}}break t}finally{y=null,x=vt,S=!1}it=void 0}}finally{it?Rt():z=!1}}}var Rt;if(typeof N=="function")Rt=function(){N(Ct)};else if(typeof MessageChannel<"u"){var Vt=new MessageChannel,xt=Vt.port2;Vt.port1.onmessage=Ct,Rt=function(){xt.postMessage(null)}}else Rt=function(){M(Ct,0)};function zt(G,it){H=M(function(){G(r.unstable_now())},it)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ct=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_next=function(G){switch(x){case 1:case 2:case 3:var it=3;break;default:it=x}var vt=x;x=it;try{return G()}finally{x=vt}},r.unstable_requestPaint=function(){T=!0},r.unstable_runWithPriority=function(G,it){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var vt=x;x=G;try{return it()}finally{x=vt}},r.unstable_scheduleCallback=function(G,it,vt){var Ht=r.unstable_now();switch(typeof vt=="object"&&vt!==null?(vt=vt.delay,vt=typeof vt=="number"&&0<vt?Ht+vt:Ht):vt=Ht,G){case 1:var Ot=-1;break;case 2:Ot=250;break;case 5:Ot=1073741823;break;case 4:Ot=1e4;break;default:Ot=5e3}return Ot=vt+Ot,G={id:p++,callback:it,priorityLevel:G,startTime:vt,expirationTime:Ot,sortIndex:-1},vt>Ht?(G.sortIndex=vt,t(f,G),e(d)===null&&G===e(f)&&(E?(k(H),H=-1):E=!0,zt(I,vt-Ht))):(G.sortIndex=Ot,t(d,G),A||S||(A=!0,z||(z=!0,Rt()))),G},r.unstable_shouldYield=At,r.unstable_wrapCallback=function(G){var it=x;return function(){var vt=x;x=it;try{return G.apply(this,arguments)}finally{x=vt}}}})(wp)),wp}var l0;function j1(){return l0||(l0=1,xp.exports=P1()),xp.exports}var Sp={exports:{}},Zn={};var c0;function B1(){if(c0)return Zn;c0=1;var r=ym();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(d,f,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:f,implementation:p}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Zn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Zn.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return l(d,f,null,p)},Zn.flushSync=function(d){var f=c.T,p=i.p;try{if(c.T=null,i.p=2,d)return d()}finally{c.T=f,i.p=p,i.d.f()}},Zn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},Zn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Zn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,y=u(p,f.crossOrigin),x=typeof f.integrity=="string"?f.integrity:void 0,S=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:x,fetchPriority:S}):p==="script"&&i.d.X(d,{crossOrigin:y,integrity:x,fetchPriority:S,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Zn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},Zn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,y=u(p,f.crossOrigin);i.d.L(d,p,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Zn.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=u(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},Zn.requestFormReset=function(d){i.d.r(d)},Zn.unstable_batchedUpdates=function(d,f){return d(f)},Zn.useFormState=function(d,f,p){return c.H.useFormState(d,f,p)},Zn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Zn.version="19.2.4",Zn}var u0;function Nv(){if(u0)return Sp.exports;u0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Sp.exports=B1(),Sp.exports}var h0;function F1(){if(h0)return Ec;h0=1;var r=j1(),t=ym(),e=Nv();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function u(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(i(188))}function f(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,h=s;;){var g=o.return;if(g===null)break;var b=g.alternate;if(b===null){if(h=g.return,h!==null){o=h;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===o)return d(g),n;if(b===h)return d(g),s;b=b.sibling}throw Error(i(188))}if(o.return!==h.return)o=g,h=b;else{for(var C=!1,L=g.child;L;){if(L===o){C=!0,o=g,h=b;break}if(L===h){C=!0,h=g,o=b;break}L=L.sibling}if(!C){for(L=b.child;L;){if(L===o){C=!0,o=b,h=g;break}if(L===h){C=!0,h=b,o=g;break}L=L.sibling}if(!C)throw Error(i(189))}}if(o.alternate!==h)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function p(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=p(n),s!==null)return s;n=n.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),N=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),ct=Symbol.for("react.lazy"),ut=Symbol.for("react.activity"),At=Symbol.for("react.memo_cache_sentinel"),Ct=Symbol.iterator;function Rt(n){return n===null||typeof n!="object"?null:(n=Ct&&n[Ct]||n["@@iterator"],typeof n=="function"?n:null)}var Vt=Symbol.for("react.client.reference");function xt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Vt?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case E:return"Fragment";case M:return"Profiler";case T:return"StrictMode";case I:return"Suspense";case z:return"SuspenseList";case ut:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case A:return"Portal";case N:return n.displayName||"Context";case k:return(n._context.displayName||"Context")+".Consumer";case F:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case H:return s=n.displayName||null,s!==null?s:xt(n.type)||"Memo";case ct:s=n._payload,n=n._init;try{return xt(n(s))}catch{}}return null}var zt=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vt={pending:!1,data:null,method:null,action:null},Ht=[],Ot=-1;function B(n){return{current:n}}function J(n){0>Ot||(n.current=Ht[Ot],Ht[Ot]=null,Ot--)}function ft(n,s){Ot++,Ht[Ot]=n.current,n.current=s}var wt=B(null),Mt=B(null),qt=B(null),jt=B(null);function he(n,s){switch(ft(qt,s),ft(Mt,n),ft(wt,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?Eb(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=Eb(s),n=_b(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}J(wt),ft(wt,n)}function re(){J(wt),J(Mt),J(qt)}function Tt(n){n.memoizedState!==null&&ft(jt,n);var s=wt.current,o=_b(s,n.type);s!==o&&(ft(Mt,n),ft(wt,o))}function de(n){Mt.current===n&&(J(wt),J(Mt)),jt.current===n&&(J(jt),vc._currentValue=vt)}var Wt,Ee;function Pt(n){if(Wt===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Wt=s&&s[1]||"",Ee=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wt+n+Ee}var gt=!1;function pe(n,s){if(!n||gt)return"";gt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(s){var bt=function(){throw Error()};if(Object.defineProperty(bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(bt,[])}catch(dt){var lt=dt}Reflect.construct(n,[],bt)}else{try{bt.call()}catch(dt){lt=dt}n.call(bt.prototype)}}else{try{throw Error()}catch(dt){lt=dt}(bt=n())&&typeof bt.catch=="function"&&bt.catch(function(){})}}catch(dt){if(dt&&lt&&typeof dt.stack=="string")return[dt.stack,lt.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=h.DetermineComponentFrameRoot(),C=b[0],L=b[1];if(C&&L){var q=C.split(`
`),rt=L.split(`
`);for(g=h=0;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;for(;g<rt.length&&!rt[g].includes("DetermineComponentFrameRoot");)g++;if(h===q.length||g===rt.length)for(h=q.length-1,g=rt.length-1;1<=h&&0<=g&&q[h]!==rt[g];)g--;for(;1<=h&&0<=g;h--,g--)if(q[h]!==rt[g]){if(h!==1||g!==1)do if(h--,g--,0>g||q[h]!==rt[g]){var mt=`
`+q[h].replace(" at new "," at ");return n.displayName&&mt.includes("<anonymous>")&&(mt=mt.replace("<anonymous>",n.displayName)),mt}while(1<=h&&0<=g);break}}}finally{gt=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Pt(o):""}function Le(n,s){switch(n.tag){case 26:case 27:case 5:return Pt(n.type);case 16:return Pt("Lazy");case 13:return n.child!==s&&s!==null?Pt("Suspense Fallback"):Pt("Suspense");case 19:return Pt("SuspenseList");case 0:case 15:return pe(n.type,!1);case 11:return pe(n.type.render,!1);case 1:return pe(n.type,!0);case 31:return Pt("Activity");default:return""}}function Ln(n){try{var s="",o=null;do s+=Le(n,o),o=n,n=n.return;while(n);return s}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Cn=Object.prototype.hasOwnProperty,nn=r.unstable_scheduleCallback,Tn=r.unstable_cancelCallback,iu=r.unstable_shouldYield,cr=r.unstable_requestPaint,Vn=r.unstable_now,ur=r.unstable_getCurrentPriorityLevel,$n=r.unstable_ImmediatePriority,as=r.unstable_UserBlockingPriority,xa=r.unstable_NormalPriority,hr=r.unstable_LowPriority,ro=r.unstable_IdlePriority,oo=r.log,Ps=r.unstable_setDisableYieldValue,rs=null,Pn=null;function jn(n){if(typeof oo=="function"&&Ps(n),Pn&&typeof Pn.setStrictMode=="function")try{Pn.setStrictMode(rs,n)}catch{}}var Bt=Math.clz32?Math.clz32:lo,dr=Math.log,js=Math.LN2;function lo(n){return n>>>=0,n===0?32:31-(dr(n)/js|0)|0}var kt=256,wa=262144,fr=4194304;function Xi(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function pr(n,s,o){var h=n.pendingLanes;if(h===0)return 0;var g=0,b=n.suspendedLanes,C=n.pingedLanes;n=n.warmLanes;var L=h&134217727;return L!==0?(h=L&~b,h!==0?g=Xi(h):(C&=L,C!==0?g=Xi(C):o||(o=L&~n,o!==0&&(g=Xi(o))))):(L=h&~b,L!==0?g=Xi(L):C!==0?g=Xi(C):o||(o=h&~n,o!==0&&(g=Xi(o)))),g===0?0:s!==0&&s!==g&&(s&b)===0&&(b=g&-g,o=s&-s,b>=o||b===32&&(o&4194048)!==0)?s:g}function Bs(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Sd(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function su(){var n=fr;return fr<<=1,(fr&62914560)===0&&(fr=4194304),n}function os(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Ni(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Al(n,s,o,h,g,b){var C=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var L=n.entanglements,q=n.expirationTimes,rt=n.hiddenUpdates;for(o=C&~o;0<o;){var mt=31-Bt(o),bt=1<<mt;L[mt]=0,q[mt]=-1;var lt=rt[mt];if(lt!==null)for(rt[mt]=null,mt=0;mt<lt.length;mt++){var dt=lt[mt];dt!==null&&(dt.lane&=-536870913)}o&=~bt}h!==0&&mr(n,h,0),b!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=b&~(C&~s))}function mr(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var h=31-Bt(s);n.entangledLanes|=s,n.entanglements[h]=n.entanglements[h]|1073741824|o&261930}function qe(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var h=31-Bt(o),g=1<<h;g&s|n[h]&s&&(n[h]|=s),o&=~g}}function ln(n,s){var o=s&-s;return o=(o&42)!==0?1:El(o),(o&(n.suspendedLanes|s))!==0?0:o}function El(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Sa(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function gr(){var n=it.p;return n!==0?n:(n=window.event,n===void 0?32:Xb(n.type))}function yr(n,s){var o=it.p;try{return it.p=n,s()}finally{it.p=o}}var ls=Math.random().toString(36).slice(2),Ke="__reactFiber$"+ls,cn="__reactProps$"+ls,ti="__reactContainer$"+ls,Aa="__reactEvents$"+ls,Ad="__reactListeners$"+ls,cs="__reactHandles$"+ls,_l="__reactResources$"+ls,bi="__reactMarker$"+ls;function co(n){delete n[Ke],delete n[cn],delete n[Aa],delete n[Ad],delete n[cs]}function us(n){var s=n[Ke];if(s)return s;for(var o=n.parentNode;o;){if(s=o[ti]||o[Ke]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=Ob(n);n!==null;){if(o=n[Ke])return o;n=Ob(n)}return s}n=o,o=n.parentNode}return null}function Be(n){if(n=n[Ke]||n[ti]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function vi(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function Xn(n){var s=n[_l];return s||(s=n[_l]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function un(n){n[bi]=!0}var Fs=new Set,br={};function Yi(n,s){hs(n,s),hs(n+"Capture",s)}function hs(n,s){for(br[n]=s,n=0;n<s.length;n++)Fs.add(s[n])}var Is=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cl={},vr={};function au(n){return Cn.call(vr,n)?!0:Cn.call(Cl,n)?!1:Is.test(n)?vr[n]=!0:(Cl[n]=!0,!1)}function ue(n,s,o){if(au(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var h=s.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function xr(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Oi(n,s,o,h){if(h===null)n.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+h)}}function Bn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ea(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ru(n,s,o){var h=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var g=h.get,b=h.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(C){o=""+C,b.call(this,C)}}),Object.defineProperty(n,s,{enumerable:h.enumerable}),{getValue:function(){return o},setValue:function(C){o=""+C},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function uo(n){if(!n._valueTracker){var s=Ea(n)?"checked":"value";n._valueTracker=ru(n,s,""+n[s])}}function Tl(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),h="";return n&&(h=Ea(n)?n.checked?"true":"false":n.value),n=h,n!==o?(s.setValue(n),!0):!1}function _e(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var wr=/[\n"\\]/g;function Rn(n){return n.replace(wr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ds(n,s,o,h,g,b,C,L){n.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?n.type=C:n.removeAttribute("type"),s!=null?C==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Bn(s)):n.value!==""+Bn(s)&&(n.value=""+Bn(s)):C!=="submit"&&C!=="reset"||n.removeAttribute("value"),s!=null?Sr(n,C,Bn(s)):o!=null?Sr(n,C,Bn(o)):h!=null&&n.removeAttribute("value"),g==null&&b!=null&&(n.defaultChecked=!!b),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?n.name=""+Bn(L):n.removeAttribute("name")}function ho(n,s,o,h,g,b,C,L){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.type=b),s!=null||o!=null){if(!(b!=="submit"&&b!=="reset"||s!=null)){uo(n);return}o=o!=null?""+Bn(o):"",s=s!=null?""+Bn(s):o,L||s===n.value||(n.value=s),n.defaultValue=s}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,n.checked=L?n.checked:!!h,n.defaultChecked=!!h,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(n.name=C),uo(n)}function Sr(n,s,o){s==="number"&&_e(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Qi(n,s,o,h){if(n=n.options,s){s={};for(var g=0;g<o.length;g++)s["$"+o[g]]=!0;for(o=0;o<n.length;o++)g=s.hasOwnProperty("$"+n[o].value),n[o].selected!==g&&(n[o].selected=g),g&&h&&(n[o].defaultSelected=!0)}else{for(o=""+Bn(o),s=null,g=0;g<n.length;g++){if(n[g].value===o){n[g].selected=!0,h&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function Rl(n,s,o){if(s!=null&&(s=""+Bn(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+Bn(o):""}function Ar(n,s,o,h){if(s==null){if(h!=null){if(o!=null)throw Error(i(92));if(zt(h)){if(1<h.length)throw Error(i(93));h=h[0]}o=h}o==null&&(o=""),s=o}o=Bn(s),n.defaultValue=o,h=n.textContent,h===o&&h!==""&&h!==null&&(n.value=h),uo(n)}function Us(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var Ed=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ve(n,s,o){var h=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?h?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":h?n.setProperty(s,o):typeof o!="number"||o===0||Ed.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function Ml(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var h in o)!o.hasOwnProperty(h)||s!=null&&s.hasOwnProperty(h)||(h.indexOf("--")===0?n.setProperty(h,""):h==="float"?n.cssFloat="":n[h]="");for(var g in s)h=s[g],s.hasOwnProperty(g)&&o[g]!==h&&ve(n,g,h)}else for(var b in s)s.hasOwnProperty(b)&&ve(n,b,s[b])}function Dl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _d=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ei=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wi(n){return ei.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ri(){}var ki=null;function fo(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var zs=null,Ve=null;function xi(n){var s=Be(n);if(s&&(n=s.stateNode)){var o=n[cn]||null;t:switch(n=s.stateNode,s.type){case"input":if(ds(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Rn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var h=o[s];if(h!==n&&h.form===n.form){var g=h[cn]||null;if(!g)throw Error(i(90));ds(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<o.length;s++)h=o[s],h.form===n.form&&Tl(h)}break t;case"textarea":Rl(n,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&Qi(n,!!o.multiple,s,!1)}}}var Hs=!1;function _a(n,s,o){if(Hs)return n(s,o);Hs=!0;try{var h=n(s);return h}finally{if(Hs=!1,(zs!==null||Ve!==null)&&(Yu(),zs&&(s=zs,n=Ve,Ve=zs=null,xi(s),n)))for(s=0;s<n.length;s++)xi(n[s])}}function qs(n,s){var o=n.stateNode;if(o===null)return null;var h=o[cn]||null;if(h===null)return null;o=h[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break t;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nl=!1;if(Mn)try{var Yn={};Object.defineProperty(Yn,"passive",{get:function(){Nl=!0}}),window.addEventListener("test",Yn,Yn),window.removeEventListener("test",Yn,Yn)}catch{Nl=!1}var Li=null,po=null,Ca=null;function Ta(){if(Ca)return Ca;var n,s=po,o=s.length,h,g="value"in Li?Li.value:Li.textContent,b=g.length;for(n=0;n<o&&s[n]===g[n];n++);var C=o-n;for(h=1;h<=C&&s[o-h]===g[b-h];h++);return Ca=g.slice(n,1<h?1-h:void 0)}function Ra(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Er(){return!0}function ou(){return!1}function mn(n){function s(o,h,g,b,C){this._reactName=o,this._targetInst=g,this.type=h,this.nativeEvent=b,this.target=C,this.currentTarget=null;for(var L in n)n.hasOwnProperty(L)&&(o=n[L],this[L]=o?o(b):b[L]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Er:ou,this.isPropagationStopped=ou,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Er)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Er)},persist:function(){},isPersistent:Er}),s}var Gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mo=mn(Gs),fs=y({},Gs,{view:0,detail:0}),go=mn(fs),_r,Ol,Cr,yo=y({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ks,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Cr&&(Cr&&n.type==="mousemove"?(_r=n.screenX-Cr.screenX,Ol=n.screenY-Cr.screenY):Ol=_r=0,Cr=n),_r)},movementY:function(n){return"movementY"in n?n.movementY:Ol}}),bo=mn(yo),kl=y({},yo,{dataTransfer:0}),lu=mn(kl),vo=y({},fs,{relatedTarget:0}),Ma=mn(vo),xo=y({},Gs,{animationName:0,elapsedTime:0,pseudoElement:0}),cu=mn(xo),Cd=y({},Gs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Da=mn(Cd),Ll=y({},Gs,{data:0}),wo=mn(Ll),Pl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tr(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Dn[n])?!!s[n]:!1}function Ks(){return Tr}var uu=y({},fs,{key:function(n){if(n.key){var s=Pl[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ra(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?jl[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ks,charCode:function(n){return n.type==="keypress"?Ra(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ra(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),So=mn(uu),hu=y({},yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bl=mn(hu),Ao=y({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ks}),Fl=mn(Ao),Vs=y({},Gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Il=mn(Vs),Ul=y({},yo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Eo=mn(Ul),zl=y({},Gs,{newState:0,oldState:0}),du=mn(zl),Td=[9,13,27,32],Rr=Mn&&"CompositionEvent"in window,ps=null;Mn&&"documentMode"in document&&(ps=document.documentMode);var Rd=Mn&&"TextEvent"in window&&!ps,_o=Mn&&(!Rr||ps&&8<ps&&11>=ps),Co=" ",fu=!1;function Hl(n,s){switch(n){case"keyup":return Td.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pu(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var $s=!1;function mu(n,s){switch(n){case"compositionend":return pu(s);case"keypress":return s.which!==32?null:(fu=!0,Co);case"textInput":return n=s.data,n===Co&&fu?null:n;default:return null}}function Md(n,s){if($s)return n==="compositionend"||!Rr&&Hl(n,s)?(n=Ta(),Ca=po=Li=null,$s=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return _o&&s.locale!=="ko"?null:s.data;default:return null}}var gu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function To(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!gu[n.type]:s==="textarea"}function ql(n,s,o,h){zs?Ve?Ve.push(h):Ve=[h]:zs=h,s=nh(s,"onChange"),0<s.length&&(o=new mo("onChange","change",null,o,h),n.push({event:o,listeners:s}))}var Na=null,Mr=null;function Dd(n){bb(n,0)}function Ro(n){var s=vi(n);if(Tl(s))return n}function Dr(n,s){if(n==="change")return s}var Pi=!1;if(Mn){var $e;if(Mn){var Oa="oninput"in document;if(!Oa){var Xs=document.createElement("div");Xs.setAttribute("oninput","return;"),Oa=typeof Xs.oninput=="function"}$e=Oa}else $e=!1;Pi=$e&&(!document.documentMode||9<document.documentMode)}function yu(){Na&&(Na.detachEvent("onpropertychange",Mo),Mr=Na=null)}function Mo(n){if(n.propertyName==="value"&&Ro(Mr)){var s=[];ql(s,Mr,n,fo(n)),_a(Dd,s)}}function bu(n,s,o){n==="focusin"?(yu(),Na=s,Mr=o,Na.attachEvent("onpropertychange",Mo)):n==="focusout"&&yu()}function Ys(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ro(Mr)}function Gl(n,s){if(n==="click")return Ro(s)}function ka(n,s){if(n==="input"||n==="change")return Ro(s)}function ms(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Qn=typeof Object.is=="function"?Object.is:ms;function m(n,s){if(Qn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),h=Object.keys(s);if(o.length!==h.length)return!1;for(h=0;h<o.length;h++){var g=o[h];if(!Cn.call(s,g)||!Qn(n[g],s[g]))return!1}return!0}function v(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function w(n,s){var o=v(n);n=0;for(var h;o;){if(o.nodeType===3){if(h=n+o.textContent.length,n<=s&&h>=s)return{node:o,offset:s-n};n=h}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=v(o)}}function _(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?_(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function D(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=_e(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=_e(n.document)}return s}function O(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var P=Mn&&"documentMode"in document&&11>=document.documentMode,j=null,V=null,et=null,$=!1;function K(n,s,o){var h=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;$||j==null||j!==_e(h)||(h=j,"selectionStart"in h&&O(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),et&&m(et,h)||(et=h,h=nh(V,"onSelect"),0<h.length&&(s=new mo("onSelect","select",null,s,o),n.push({event:s,listeners:h}),s.target=j)))}function Q(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var Z={animationend:Q("Animation","AnimationEnd"),animationiteration:Q("Animation","AnimationIteration"),animationstart:Q("Animation","AnimationStart"),transitionrun:Q("Transition","TransitionRun"),transitionstart:Q("Transition","TransitionStart"),transitioncancel:Q("Transition","TransitionCancel"),transitionend:Q("Transition","TransitionEnd")},X={},Y={};Mn&&(Y=document.createElement("div").style,"AnimationEvent"in window||(delete Z.animationend.animation,delete Z.animationiteration.animation,delete Z.animationstart.animation),"TransitionEvent"in window||delete Z.transitionend.transition);function st(n){if(X[n])return X[n];if(!Z[n])return n;var s=Z[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in Y)return X[n]=s[o];return n}var ot=st("animationend"),nt=st("animationiteration"),pt=st("animationstart"),St=st("transitionrun"),Dt=st("transitionstart"),Nt=st("transitioncancel"),Et=st("transitionend"),Ft=new Map,Lt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lt.push("scrollEnd");function _t(n,s){Ft.set(n,s),Yi(s,[n])}var It=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},ee=[],fe=0,Xt=0;function se(){for(var n=fe,s=Xt=fe=0;s<n;){var o=ee[s];ee[s++]=null;var h=ee[s];ee[s++]=null;var g=ee[s];ee[s++]=null;var b=ee[s];if(ee[s++]=null,h!==null&&g!==null){var C=h.pending;C===null?g.next=g:(g.next=C.next,C.next=g),h.pending=g}b!==0&&gs(o,g,b)}}function Fe(n,s,o,h){ee[fe++]=n,ee[fe++]=s,ee[fe++]=o,ee[fe++]=h,Xt|=h,n.lanes|=h,n=n.alternate,n!==null&&(n.lanes|=h)}function Wn(n,s,o,h){return Fe(n,s,o,h),La(n)}function ke(n,s){return Fe(n,null,null,s),La(n)}function gs(n,s,o){n.lanes|=o;var h=n.alternate;h!==null&&(h.lanes|=o);for(var g=!1,b=n.return;b!==null;)b.childLanes|=o,h=b.alternate,h!==null&&(h.childLanes|=o),b.tag===22&&(n=b.stateNode,n===null||n._visibility&1||(g=!0)),n=b,b=b.return;return n.tag===3?(b=n.stateNode,g&&s!==null&&(g=31-Bt(o),n=b.hiddenUpdates,h=n[g],h===null?n[g]=[s]:h.push(s),s.lane=o|536870912),b):null}function La(n){if(50<dc)throw dc=0,Uf=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Do={};function pw(n,s,o,h){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wi(n,s,o,h){return new pw(n,s,o,h)}function Nd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Qs(n,s){var o=n.alternate;return o===null?(o=wi(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function tg(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function vu(n,s,o,h,g,b){var C=0;if(h=n,typeof n=="function")Nd(n)&&(C=1);else if(typeof n=="string")C=v1(n,o,wt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case ut:return n=wi(31,o,s,g),n.elementType=ut,n.lanes=b,n;case E:return Nr(o.children,g,b,s);case T:C=8,g|=24;break;case M:return n=wi(12,o,s,g|2),n.elementType=M,n.lanes=b,n;case I:return n=wi(13,o,s,g),n.elementType=I,n.lanes=b,n;case z:return n=wi(19,o,s,g),n.elementType=z,n.lanes=b,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case N:C=10;break t;case k:C=9;break t;case F:C=11;break t;case H:C=14;break t;case ct:C=16,h=null;break t}C=29,o=Error(i(130,n===null?"null":typeof n,"")),h=null}return s=wi(C,o,s,g),s.elementType=n,s.type=h,s.lanes=b,s}function Nr(n,s,o,h){return n=wi(7,n,h,s),n.lanes=o,n}function Od(n,s,o){return n=wi(6,n,null,s),n.lanes=o,n}function eg(n){var s=wi(18,null,null,0);return s.stateNode=n,s}function kd(n,s,o){return s=wi(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var ng=new WeakMap;function ji(n,s){if(typeof n=="object"&&n!==null){var o=ng.get(n);return o!==void 0?o:(s={value:n,source:s,stack:Ln(s)},ng.set(n,s),s)}return{value:n,source:s,stack:Ln(s)}}var No=[],Oo=0,xu=null,Kl=0,Bi=[],Fi=0,Pa=null,ys=1,bs="";function Ws(n,s){No[Oo++]=Kl,No[Oo++]=xu,xu=n,Kl=s}function ig(n,s,o){Bi[Fi++]=ys,Bi[Fi++]=bs,Bi[Fi++]=Pa,Pa=n;var h=ys;n=bs;var g=32-Bt(h)-1;h&=~(1<<g),o+=1;var b=32-Bt(s)+g;if(30<b){var C=g-g%5;b=(h&(1<<C)-1).toString(32),h>>=C,g-=C,ys=1<<32-Bt(s)+g|o<<g|h,bs=b+n}else ys=1<<b|o<<g|h,bs=n}function Ld(n){n.return!==null&&(Ws(n,1),ig(n,1,0))}function Pd(n){for(;n===xu;)xu=No[--Oo],No[Oo]=null,Kl=No[--Oo],No[Oo]=null;for(;n===Pa;)Pa=Bi[--Fi],Bi[Fi]=null,bs=Bi[--Fi],Bi[Fi]=null,ys=Bi[--Fi],Bi[Fi]=null}function sg(n,s){Bi[Fi++]=ys,Bi[Fi++]=bs,Bi[Fi++]=Pa,ys=s.id,bs=s.overflow,Pa=n}var Fn=null,Xe=null,xe=!1,ja=null,Ii=!1,jd=Error(i(519));function Ba(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Vl(ji(s,n)),jd}function ag(n){var s=n.stateNode,o=n.type,h=n.memoizedProps;switch(s[Ke]=n,s[cn]=h,o){case"dialog":ge("cancel",s),ge("close",s);break;case"iframe":case"object":case"embed":ge("load",s);break;case"video":case"audio":for(o=0;o<pc.length;o++)ge(pc[o],s);break;case"source":ge("error",s);break;case"img":case"image":case"link":ge("error",s),ge("load",s);break;case"details":ge("toggle",s);break;case"input":ge("invalid",s),ho(s,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":ge("invalid",s);break;case"textarea":ge("invalid",s),Ar(s,h.value,h.defaultValue,h.children)}o=h.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||h.suppressHydrationWarning===!0||Sb(s.textContent,o)?(h.popover!=null&&(ge("beforetoggle",s),ge("toggle",s)),h.onScroll!=null&&ge("scroll",s),h.onScrollEnd!=null&&ge("scrollend",s),h.onClick!=null&&(s.onclick=ri),s=!0):s=!1,s||Ba(n,!0)}function rg(n){for(Fn=n.return;Fn;)switch(Fn.tag){case 5:case 31:case 13:Ii=!1;return;case 27:case 3:Ii=!0;return;default:Fn=Fn.return}}function ko(n){if(n!==Fn)return!1;if(!xe)return rg(n),xe=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||ep(n.type,n.memoizedProps)),o=!o),o&&Xe&&Ba(n),rg(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Xe=Nb(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Xe=Nb(n)}else s===27?(s=Xe,Wa(n.type)?(n=rp,rp=null,Xe=n):Xe=s):Xe=Fn?zi(n.stateNode.nextSibling):null;return!0}function Or(){Xe=Fn=null,xe=!1}function Bd(){var n=ja;return n!==null&&(ui===null?ui=n:ui.push.apply(ui,n),ja=null),n}function Vl(n){ja===null?ja=[n]:ja.push(n)}var Fd=B(null),kr=null,Zs=null;function Fa(n,s,o){ft(Fd,s._currentValue),s._currentValue=o}function Js(n){n._currentValue=Fd.current,J(Fd)}function Id(n,s,o){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===o)break;n=n.return}}function Ud(n,s,o,h){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var b=g.dependencies;if(b!==null){var C=g.child;b=b.firstContext;t:for(;b!==null;){var L=b;b=g;for(var q=0;q<s.length;q++)if(L.context===s[q]){b.lanes|=o,L=b.alternate,L!==null&&(L.lanes|=o),Id(b.return,o,n),h||(C=null);break t}b=L.next}}else if(g.tag===18){if(C=g.return,C===null)throw Error(i(341));C.lanes|=o,b=C.alternate,b!==null&&(b.lanes|=o),Id(C,o,n),C=null}else C=g.child;if(C!==null)C.return=g;else for(C=g;C!==null;){if(C===n){C=null;break}if(g=C.sibling,g!==null){g.return=C.return,C=g;break}C=C.return}g=C}}function Lo(n,s,o,h){n=null;for(var g=s,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var C=g.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var L=g.type;Qn(g.pendingProps.value,C.value)||(n!==null?n.push(L):n=[L])}}else if(g===jt.current){if(C=g.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(vc):n=[vc])}g=g.return}n!==null&&Ud(s,n,o,h),s.flags|=262144}function wu(n){for(n=n.firstContext;n!==null;){if(!Qn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Lr(n){kr=n,Zs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function In(n){return og(kr,n)}function Su(n,s){return kr===null&&Lr(n),og(n,s)}function og(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Zs===null){if(n===null)throw Error(i(308));Zs=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Zs=Zs.next=s;return o}var mw=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,h){n.push(h)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},gw=r.unstable_scheduleCallback,yw=r.unstable_NormalPriority,gn={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zd(){return{controller:new mw,data:new Map,refCount:0}}function $l(n){n.refCount--,n.refCount===0&&gw(yw,function(){n.controller.abort()})}var Xl=null,Hd=0,Po=0,jo=null;function bw(n,s){if(Xl===null){var o=Xl=[];Hd=0,Po=Vf(),jo={status:"pending",value:void 0,then:function(h){o.push(h)}}}return Hd++,s.then(lg,lg),s}function lg(){if(--Hd===0&&Xl!==null){jo!==null&&(jo.status="fulfilled");var n=Xl;Xl=null,Po=0,jo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function vw(n,s){var o=[],h={status:"pending",value:null,reason:null,then:function(g){o.push(g)}};return n.then(function(){h.status="fulfilled",h.value=s;for(var g=0;g<o.length;g++)(0,o[g])(s)},function(g){for(h.status="rejected",h.reason=g,g=0;g<o.length;g++)(0,o[g])(void 0)}),h}var cg=G.S;G.S=function(n,s){Vy=Vn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&bw(n,s),cg!==null&&cg(n,s)};var Pr=B(null);function qd(){var n=Pr.current;return n!==null?n:Ge.pooledCache}function Au(n,s){s===null?ft(Pr,Pr.current):ft(Pr,s.pool)}function ug(){var n=qd();return n===null?null:{parent:gn._currentValue,pool:n}}var Bo=Error(i(460)),Gd=Error(i(474)),Eu=Error(i(542)),_u={then:function(){}};function hg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function dg(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(ri,ri),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,pg(n),n;default:if(typeof s.status=="string")s.then(ri,ri);else{if(n=Ge,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(h){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=h}},function(h){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=h}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,pg(n),n}throw Br=s,Bo}}function jr(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Br=o,Bo):o}}var Br=null;function fg(){if(Br===null)throw Error(i(459));var n=Br;return Br=null,n}function pg(n){if(n===Bo||n===Eu)throw Error(i(483))}var Fo=null,Yl=0;function Cu(n){var s=Yl;return Yl+=1,Fo===null&&(Fo=[]),dg(Fo,n,s)}function Ql(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Tu(n,s){throw s.$$typeof===x?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function mg(n){function s(tt,W){if(n){var at=tt.deletions;at===null?(tt.deletions=[W],tt.flags|=16):at.push(W)}}function o(tt,W){if(!n)return null;for(;W!==null;)s(tt,W),W=W.sibling;return null}function h(tt){for(var W=new Map;tt!==null;)tt.key!==null?W.set(tt.key,tt):W.set(tt.index,tt),tt=tt.sibling;return W}function g(tt,W){return tt=Qs(tt,W),tt.index=0,tt.sibling=null,tt}function b(tt,W,at){return tt.index=at,n?(at=tt.alternate,at!==null?(at=at.index,at<W?(tt.flags|=67108866,W):at):(tt.flags|=67108866,W)):(tt.flags|=1048576,W)}function C(tt){return n&&tt.alternate===null&&(tt.flags|=67108866),tt}function L(tt,W,at,yt){return W===null||W.tag!==6?(W=Od(at,tt.mode,yt),W.return=tt,W):(W=g(W,at),W.return=tt,W)}function q(tt,W,at,yt){var Yt=at.type;return Yt===E?mt(tt,W,at.props.children,yt,at.key):W!==null&&(W.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===ct&&jr(Yt)===W.type)?(W=g(W,at.props),Ql(W,at),W.return=tt,W):(W=vu(at.type,at.key,at.props,null,tt.mode,yt),Ql(W,at),W.return=tt,W)}function rt(tt,W,at,yt){return W===null||W.tag!==4||W.stateNode.containerInfo!==at.containerInfo||W.stateNode.implementation!==at.implementation?(W=kd(at,tt.mode,yt),W.return=tt,W):(W=g(W,at.children||[]),W.return=tt,W)}function mt(tt,W,at,yt,Yt){return W===null||W.tag!==7?(W=Nr(at,tt.mode,yt,Yt),W.return=tt,W):(W=g(W,at),W.return=tt,W)}function bt(tt,W,at){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Od(""+W,tt.mode,at),W.return=tt,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case S:return at=vu(W.type,W.key,W.props,null,tt.mode,at),Ql(at,W),at.return=tt,at;case A:return W=kd(W,tt.mode,at),W.return=tt,W;case ct:return W=jr(W),bt(tt,W,at)}if(zt(W)||Rt(W))return W=Nr(W,tt.mode,at,null),W.return=tt,W;if(typeof W.then=="function")return bt(tt,Cu(W),at);if(W.$$typeof===N)return bt(tt,Su(tt,W),at);Tu(tt,W)}return null}function lt(tt,W,at,yt){var Yt=W!==null?W.key:null;if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return Yt!==null?null:L(tt,W,""+at,yt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case S:return at.key===Yt?q(tt,W,at,yt):null;case A:return at.key===Yt?rt(tt,W,at,yt):null;case ct:return at=jr(at),lt(tt,W,at,yt)}if(zt(at)||Rt(at))return Yt!==null?null:mt(tt,W,at,yt,null);if(typeof at.then=="function")return lt(tt,W,Cu(at),yt);if(at.$$typeof===N)return lt(tt,W,Su(tt,at),yt);Tu(tt,at)}return null}function dt(tt,W,at,yt,Yt){if(typeof yt=="string"&&yt!==""||typeof yt=="number"||typeof yt=="bigint")return tt=tt.get(at)||null,L(W,tt,""+yt,Yt);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case S:return tt=tt.get(yt.key===null?at:yt.key)||null,q(W,tt,yt,Yt);case A:return tt=tt.get(yt.key===null?at:yt.key)||null,rt(W,tt,yt,Yt);case ct:return yt=jr(yt),dt(tt,W,at,yt,Yt)}if(zt(yt)||Rt(yt))return tt=tt.get(at)||null,mt(W,tt,yt,Yt,null);if(typeof yt.then=="function")return dt(tt,W,at,Cu(yt),Yt);if(yt.$$typeof===N)return dt(tt,W,at,Su(W,yt),Yt);Tu(W,yt)}return null}function Kt(tt,W,at,yt){for(var Yt=null,Se=null,$t=W,ce=W=0,be=null;$t!==null&&ce<at.length;ce++){$t.index>ce?(be=$t,$t=null):be=$t.sibling;var Ae=lt(tt,$t,at[ce],yt);if(Ae===null){$t===null&&($t=be);break}n&&$t&&Ae.alternate===null&&s(tt,$t),W=b(Ae,W,ce),Se===null?Yt=Ae:Se.sibling=Ae,Se=Ae,$t=be}if(ce===at.length)return o(tt,$t),xe&&Ws(tt,ce),Yt;if($t===null){for(;ce<at.length;ce++)$t=bt(tt,at[ce],yt),$t!==null&&(W=b($t,W,ce),Se===null?Yt=$t:Se.sibling=$t,Se=$t);return xe&&Ws(tt,ce),Yt}for($t=h($t);ce<at.length;ce++)be=dt($t,tt,ce,at[ce],yt),be!==null&&(n&&be.alternate!==null&&$t.delete(be.key===null?ce:be.key),W=b(be,W,ce),Se===null?Yt=be:Se.sibling=be,Se=be);return n&&$t.forEach(function(nr){return s(tt,nr)}),xe&&Ws(tt,ce),Yt}function Zt(tt,W,at,yt){if(at==null)throw Error(i(151));for(var Yt=null,Se=null,$t=W,ce=W=0,be=null,Ae=at.next();$t!==null&&!Ae.done;ce++,Ae=at.next()){$t.index>ce?(be=$t,$t=null):be=$t.sibling;var nr=lt(tt,$t,Ae.value,yt);if(nr===null){$t===null&&($t=be);break}n&&$t&&nr.alternate===null&&s(tt,$t),W=b(nr,W,ce),Se===null?Yt=nr:Se.sibling=nr,Se=nr,$t=be}if(Ae.done)return o(tt,$t),xe&&Ws(tt,ce),Yt;if($t===null){for(;!Ae.done;ce++,Ae=at.next())Ae=bt(tt,Ae.value,yt),Ae!==null&&(W=b(Ae,W,ce),Se===null?Yt=Ae:Se.sibling=Ae,Se=Ae);return xe&&Ws(tt,ce),Yt}for($t=h($t);!Ae.done;ce++,Ae=at.next())Ae=dt($t,tt,ce,Ae.value,yt),Ae!==null&&(n&&Ae.alternate!==null&&$t.delete(Ae.key===null?ce:Ae.key),W=b(Ae,W,ce),Se===null?Yt=Ae:Se.sibling=Ae,Se=Ae);return n&&$t.forEach(function(D1){return s(tt,D1)}),xe&&Ws(tt,ce),Yt}function ze(tt,W,at,yt){if(typeof at=="object"&&at!==null&&at.type===E&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case S:t:{for(var Yt=at.key;W!==null;){if(W.key===Yt){if(Yt=at.type,Yt===E){if(W.tag===7){o(tt,W.sibling),yt=g(W,at.props.children),yt.return=tt,tt=yt;break t}}else if(W.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===ct&&jr(Yt)===W.type){o(tt,W.sibling),yt=g(W,at.props),Ql(yt,at),yt.return=tt,tt=yt;break t}o(tt,W);break}else s(tt,W);W=W.sibling}at.type===E?(yt=Nr(at.props.children,tt.mode,yt,at.key),yt.return=tt,tt=yt):(yt=vu(at.type,at.key,at.props,null,tt.mode,yt),Ql(yt,at),yt.return=tt,tt=yt)}return C(tt);case A:t:{for(Yt=at.key;W!==null;){if(W.key===Yt)if(W.tag===4&&W.stateNode.containerInfo===at.containerInfo&&W.stateNode.implementation===at.implementation){o(tt,W.sibling),yt=g(W,at.children||[]),yt.return=tt,tt=yt;break t}else{o(tt,W);break}else s(tt,W);W=W.sibling}yt=kd(at,tt.mode,yt),yt.return=tt,tt=yt}return C(tt);case ct:return at=jr(at),ze(tt,W,at,yt)}if(zt(at))return Kt(tt,W,at,yt);if(Rt(at)){if(Yt=Rt(at),typeof Yt!="function")throw Error(i(150));return at=Yt.call(at),Zt(tt,W,at,yt)}if(typeof at.then=="function")return ze(tt,W,Cu(at),yt);if(at.$$typeof===N)return ze(tt,W,Su(tt,at),yt);Tu(tt,at)}return typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint"?(at=""+at,W!==null&&W.tag===6?(o(tt,W.sibling),yt=g(W,at),yt.return=tt,tt=yt):(o(tt,W),yt=Od(at,tt.mode,yt),yt.return=tt,tt=yt),C(tt)):o(tt,W)}return function(tt,W,at,yt){try{Yl=0;var Yt=ze(tt,W,at,yt);return Fo=null,Yt}catch($t){if($t===Bo||$t===Eu)throw $t;var Se=wi(29,$t,null,tt.mode);return Se.lanes=yt,Se.return=tt,Se}}}var Fr=mg(!0),gg=mg(!1),Ia=!1;function Kd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vd(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ua(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function za(n,s,o){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(Ce&2)!==0){var g=h.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),h.pending=s,s=La(n),gs(n,null,o),s}return Fe(n,h,s,o),La(n)}function Wl(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var h=s.lanes;h&=n.pendingLanes,o|=h,s.lanes=o,qe(n,o)}}function $d(n,s){var o=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,o===h)){var g=null,b=null;if(o=o.firstBaseUpdate,o!==null){do{var C={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};b===null?g=b=C:b=b.next=C,o=o.next}while(o!==null);b===null?g=b=s:b=b.next=s}else g=b=s;o={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:h.shared,callbacks:h.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Xd=!1;function Zl(){if(Xd){var n=jo;if(n!==null)throw n}}function Jl(n,s,o,h){Xd=!1;var g=n.updateQueue;Ia=!1;var b=g.firstBaseUpdate,C=g.lastBaseUpdate,L=g.shared.pending;if(L!==null){g.shared.pending=null;var q=L,rt=q.next;q.next=null,C===null?b=rt:C.next=rt,C=q;var mt=n.alternate;mt!==null&&(mt=mt.updateQueue,L=mt.lastBaseUpdate,L!==C&&(L===null?mt.firstBaseUpdate=rt:L.next=rt,mt.lastBaseUpdate=q))}if(b!==null){var bt=g.baseState;C=0,mt=rt=q=null,L=b;do{var lt=L.lane&-536870913,dt=lt!==L.lane;if(dt?(ye&lt)===lt:(h&lt)===lt){lt!==0&&lt===Po&&(Xd=!0),mt!==null&&(mt=mt.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});t:{var Kt=n,Zt=L;lt=s;var ze=o;switch(Zt.tag){case 1:if(Kt=Zt.payload,typeof Kt=="function"){bt=Kt.call(ze,bt,lt);break t}bt=Kt;break t;case 3:Kt.flags=Kt.flags&-65537|128;case 0:if(Kt=Zt.payload,lt=typeof Kt=="function"?Kt.call(ze,bt,lt):Kt,lt==null)break t;bt=y({},bt,lt);break t;case 2:Ia=!0}}lt=L.callback,lt!==null&&(n.flags|=64,dt&&(n.flags|=8192),dt=g.callbacks,dt===null?g.callbacks=[lt]:dt.push(lt))}else dt={lane:lt,tag:L.tag,payload:L.payload,callback:L.callback,next:null},mt===null?(rt=mt=dt,q=bt):mt=mt.next=dt,C|=lt;if(L=L.next,L===null){if(L=g.shared.pending,L===null)break;dt=L,L=dt.next,dt.next=null,g.lastBaseUpdate=dt,g.shared.pending=null}}while(!0);mt===null&&(q=bt),g.baseState=q,g.firstBaseUpdate=rt,g.lastBaseUpdate=mt,b===null&&(g.shared.lanes=0),Va|=C,n.lanes=C,n.memoizedState=bt}}function yg(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function bg(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)yg(o[n],s)}var Io=B(null),Ru=B(0);function vg(n,s){n=la,ft(Ru,n),ft(Io,s),la=n|s.baseLanes}function Yd(){ft(Ru,la),ft(Io,Io.current)}function Qd(){la=Ru.current,J(Io),J(Ru)}var Si=B(null),Ui=null;function Ha(n){var s=n.alternate;ft(hn,hn.current&1),ft(Si,n),Ui===null&&(s===null||Io.current!==null||s.memoizedState!==null)&&(Ui=n)}function Wd(n){ft(hn,hn.current),ft(Si,n),Ui===null&&(Ui=n)}function xg(n){n.tag===22?(ft(hn,hn.current),ft(Si,n),Ui===null&&(Ui=n)):qa()}function qa(){ft(hn,hn.current),ft(Si,Si.current)}function Ai(n){J(Si),Ui===n&&(Ui=null),J(hn)}var hn=B(0);function Mu(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||sp(o)||ap(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ta=0,le=null,Ie=null,yn=null,Du=!1,Uo=!1,Ir=!1,Nu=0,tc=0,zo=null,xw=0;function sn(){throw Error(i(321))}function Zd(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!Qn(n[o],s[o]))return!1;return!0}function Jd(n,s,o,h,g,b){return ta=b,le=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,G.H=n===null||n.memoizedState===null?iy:mf,Ir=!1,b=o(h,g),Ir=!1,Uo&&(b=Sg(s,o,h,g)),wg(n),b}function wg(n){G.H=ic;var s=Ie!==null&&Ie.next!==null;if(ta=0,yn=Ie=le=null,Du=!1,tc=0,zo=null,s)throw Error(i(300));n===null||bn||(n=n.dependencies,n!==null&&wu(n)&&(bn=!0))}function Sg(n,s,o,h){le=n;var g=0;do{if(Uo&&(zo=null),tc=0,Uo=!1,25<=g)throw Error(i(301));if(g+=1,yn=Ie=null,n.updateQueue!=null){var b=n.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}G.H=sy,b=s(o,h)}while(Uo);return b}function ww(){var n=G.H,s=n.useState()[0];return s=typeof s.then=="function"?ec(s):s,n=n.useState()[0],(Ie!==null?Ie.memoizedState:null)!==n&&(le.flags|=1024),s}function tf(){var n=Nu!==0;return Nu=0,n}function ef(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function nf(n){if(Du){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Du=!1}ta=0,yn=Ie=le=null,Uo=!1,tc=Nu=0,zo=null}function ni(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?le.memoizedState=yn=n:yn=yn.next=n,yn}function dn(){if(Ie===null){var n=le.alternate;n=n!==null?n.memoizedState:null}else n=Ie.next;var s=yn===null?le.memoizedState:yn.next;if(s!==null)yn=s,Ie=n;else{if(n===null)throw le.alternate===null?Error(i(467)):Error(i(310));Ie=n,n={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},yn===null?le.memoizedState=yn=n:yn=yn.next=n}return yn}function Ou(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ec(n){var s=tc;return tc+=1,zo===null&&(zo=[]),n=dg(zo,n,s),s=le,(yn===null?s.memoizedState:yn.next)===null&&(s=s.alternate,G.H=s===null||s.memoizedState===null?iy:mf),n}function ku(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ec(n);if(n.$$typeof===N)return In(n)}throw Error(i(438,String(n)))}function sf(n){var s=null,o=le.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var h=le.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(s={data:h.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Ou(),le.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),h=0;h<n;h++)o[h]=At;return s.index++,o}function ea(n,s){return typeof s=="function"?s(n):s}function Lu(n){var s=dn();return af(s,Ie,n)}function af(n,s,o){var h=n.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=o;var g=n.baseQueue,b=h.pending;if(b!==null){if(g!==null){var C=g.next;g.next=b.next,b.next=C}s.baseQueue=g=b,h.pending=null}if(b=n.baseState,g===null)n.memoizedState=b;else{s=g.next;var L=C=null,q=null,rt=s,mt=!1;do{var bt=rt.lane&-536870913;if(bt!==rt.lane?(ye&bt)===bt:(ta&bt)===bt){var lt=rt.revertLane;if(lt===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),bt===Po&&(mt=!0);else if((ta&lt)===lt){rt=rt.next,lt===Po&&(mt=!0);continue}else bt={lane:0,revertLane:rt.revertLane,gesture:null,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},q===null?(L=q=bt,C=b):q=q.next=bt,le.lanes|=lt,Va|=lt;bt=rt.action,Ir&&o(b,bt),b=rt.hasEagerState?rt.eagerState:o(b,bt)}else lt={lane:bt,revertLane:rt.revertLane,gesture:rt.gesture,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},q===null?(L=q=lt,C=b):q=q.next=lt,le.lanes|=bt,Va|=bt;rt=rt.next}while(rt!==null&&rt!==s);if(q===null?C=b:q.next=L,!Qn(b,n.memoizedState)&&(bn=!0,mt&&(o=jo,o!==null)))throw o;n.memoizedState=b,n.baseState=C,n.baseQueue=q,h.lastRenderedState=b}return g===null&&(h.lanes=0),[n.memoizedState,h.dispatch]}function rf(n){var s=dn(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var h=o.dispatch,g=o.pending,b=s.memoizedState;if(g!==null){o.pending=null;var C=g=g.next;do b=n(b,C.action),C=C.next;while(C!==g);Qn(b,s.memoizedState)||(bn=!0),s.memoizedState=b,s.baseQueue===null&&(s.baseState=b),o.lastRenderedState=b}return[b,h]}function Ag(n,s,o){var h=le,g=dn(),b=xe;if(b){if(o===void 0)throw Error(i(407));o=o()}else o=s();var C=!Qn((Ie||g).memoizedState,o);if(C&&(g.memoizedState=o,bn=!0),g=g.queue,cf(Cg.bind(null,h,g,n),[n]),g.getSnapshot!==s||C||yn!==null&&yn.memoizedState.tag&1){if(h.flags|=2048,Ho(9,{destroy:void 0},_g.bind(null,h,g,o,s),null),Ge===null)throw Error(i(349));b||(ta&127)!==0||Eg(h,s,o)}return o}function Eg(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=le.updateQueue,s===null?(s=Ou(),le.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function _g(n,s,o,h){s.value=o,s.getSnapshot=h,Tg(s)&&Rg(n)}function Cg(n,s,o){return o(function(){Tg(s)&&Rg(n)})}function Tg(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!Qn(n,o)}catch{return!0}}function Rg(n){var s=ke(n,2);s!==null&&hi(s,n,2)}function of(n){var s=ni();if(typeof n=="function"){var o=n;if(n=o(),Ir){jn(!0);try{o()}finally{jn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:n},s}function Mg(n,s,o,h){return n.baseState=o,af(n,Ie,typeof h=="function"?h:ea)}function Sw(n,s,o,h,g){if(Bu(n))throw Error(i(485));if(n=s.action,n!==null){var b={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){b.listeners.push(C)}};G.T!==null?o(!0):b.isTransition=!1,h(b),o=s.pending,o===null?(b.next=s.pending=b,Dg(s,b)):(b.next=o.next,s.pending=o.next=b)}}function Dg(n,s){var o=s.action,h=s.payload,g=n.state;if(s.isTransition){var b=G.T,C={};G.T=C;try{var L=o(g,h),q=G.S;q!==null&&q(C,L),Ng(n,s,L)}catch(rt){lf(n,s,rt)}finally{b!==null&&C.types!==null&&(b.types=C.types),G.T=b}}else try{b=o(g,h),Ng(n,s,b)}catch(rt){lf(n,s,rt)}}function Ng(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(h){Og(n,s,h)},function(h){return lf(n,s,h)}):Og(n,s,o)}function Og(n,s,o){s.status="fulfilled",s.value=o,kg(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,Dg(n,o)))}function lf(n,s,o){var h=n.pending;if(n.pending=null,h!==null){h=h.next;do s.status="rejected",s.reason=o,kg(s),s=s.next;while(s!==h)}n.action=null}function kg(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Lg(n,s){return s}function Pg(n,s){if(xe){var o=Ge.formState;if(o!==null){t:{var h=le;if(xe){if(Xe){e:{for(var g=Xe,b=Ii;g.nodeType!==8;){if(!b){g=null;break e}if(g=zi(g.nextSibling),g===null){g=null;break e}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){Xe=zi(g.nextSibling),h=g.data==="F!";break t}}Ba(h)}h=!1}h&&(s=o[0])}}return o=ni(),o.memoizedState=o.baseState=s,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lg,lastRenderedState:s},o.queue=h,o=ty.bind(null,le,h),h.dispatch=o,h=of(!1),b=pf.bind(null,le,!1,h.queue),h=ni(),g={state:s,dispatch:null,action:n,pending:null},h.queue=g,o=Sw.bind(null,le,g,b,o),g.dispatch=o,h.memoizedState=n,[s,o,!1]}function jg(n){var s=dn();return Bg(s,Ie,n)}function Bg(n,s,o){if(s=af(n,s,Lg)[0],n=Lu(ea)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var h=ec(s)}catch(C){throw C===Bo?Eu:C}else h=s;s=dn();var g=s.queue,b=g.dispatch;return o!==s.memoizedState&&(le.flags|=2048,Ho(9,{destroy:void 0},Aw.bind(null,g,o),null)),[h,b,n]}function Aw(n,s){n.action=s}function Fg(n){var s=dn(),o=Ie;if(o!==null)return Bg(s,o,n);dn(),s=s.memoizedState,o=dn();var h=o.queue.dispatch;return o.memoizedState=n,[s,h,!1]}function Ho(n,s,o,h){return n={tag:n,create:o,deps:h,inst:s,next:null},s=le.updateQueue,s===null&&(s=Ou(),le.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(h=o.next,o.next=n,n.next=h,s.lastEffect=n),n}function Ig(){return dn().memoizedState}function Pu(n,s,o,h){var g=ni();le.flags|=n,g.memoizedState=Ho(1|s,{destroy:void 0},o,h===void 0?null:h)}function ju(n,s,o,h){var g=dn();h=h===void 0?null:h;var b=g.memoizedState.inst;Ie!==null&&h!==null&&Zd(h,Ie.memoizedState.deps)?g.memoizedState=Ho(s,b,o,h):(le.flags|=n,g.memoizedState=Ho(1|s,b,o,h))}function Ug(n,s){Pu(8390656,8,n,s)}function cf(n,s){ju(2048,8,n,s)}function Ew(n){le.flags|=4;var s=le.updateQueue;if(s===null)s=Ou(),le.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function zg(n){var s=dn().memoizedState;return Ew({ref:s,nextImpl:n}),function(){if((Ce&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Hg(n,s){return ju(4,2,n,s)}function qg(n,s){return ju(4,4,n,s)}function Gg(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Kg(n,s,o){o=o!=null?o.concat([n]):null,ju(4,4,Gg.bind(null,s,n),o)}function uf(){}function Vg(n,s){var o=dn();s=s===void 0?null:s;var h=o.memoizedState;return s!==null&&Zd(s,h[1])?h[0]:(o.memoizedState=[n,s],n)}function $g(n,s){var o=dn();s=s===void 0?null:s;var h=o.memoizedState;if(s!==null&&Zd(s,h[1]))return h[0];if(h=n(),Ir){jn(!0);try{n()}finally{jn(!1)}}return o.memoizedState=[h,s],h}function hf(n,s,o){return o===void 0||(ta&1073741824)!==0&&(ye&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=Xy(),le.lanes|=n,Va|=n,o)}function Xg(n,s,o,h){return Qn(o,s)?o:Io.current!==null?(n=hf(n,o,h),Qn(n,s)||(bn=!0),n):(ta&42)===0||(ta&1073741824)!==0&&(ye&261930)===0?(bn=!0,n.memoizedState=o):(n=Xy(),le.lanes|=n,Va|=n,s)}function Yg(n,s,o,h,g){var b=it.p;it.p=b!==0&&8>b?b:8;var C=G.T,L={};G.T=L,pf(n,!1,s,o);try{var q=g(),rt=G.S;if(rt!==null&&rt(L,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var mt=vw(q,h);nc(n,s,mt,Ci(n))}else nc(n,s,h,Ci(n))}catch(bt){nc(n,s,{then:function(){},status:"rejected",reason:bt},Ci())}finally{it.p=b,C!==null&&L.types!==null&&(C.types=L.types),G.T=C}}function _w(){}function df(n,s,o,h){if(n.tag!==5)throw Error(i(476));var g=Qg(n).queue;Yg(n,g,s,vt,o===null?_w:function(){return Wg(n),o(h)})}function Qg(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:vt,baseState:vt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:vt},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Wg(n){var s=Qg(n);s.next===null&&(s=n.alternate.memoizedState),nc(n,s.next.queue,{},Ci())}function ff(){return In(vc)}function Zg(){return dn().memoizedState}function Jg(){return dn().memoizedState}function Cw(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=Ci();n=Ua(o);var h=za(s,n,o);h!==null&&(hi(h,s,o),Wl(h,s,o)),s={cache:zd()},n.payload=s;return}s=s.return}}function Tw(n,s,o){var h=Ci();o={lane:h,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Bu(n)?ey(s,o):(o=Wn(n,s,o,h),o!==null&&(hi(o,n,h),ny(o,s,h)))}function ty(n,s,o){var h=Ci();nc(n,s,o,h)}function nc(n,s,o,h){var g={lane:h,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Bu(n))ey(s,g);else{var b=n.alternate;if(n.lanes===0&&(b===null||b.lanes===0)&&(b=s.lastRenderedReducer,b!==null))try{var C=s.lastRenderedState,L=b(C,o);if(g.hasEagerState=!0,g.eagerState=L,Qn(L,C))return Fe(n,s,g,0),Ge===null&&se(),!1}catch{}if(o=Wn(n,s,g,h),o!==null)return hi(o,n,h),ny(o,s,h),!0}return!1}function pf(n,s,o,h){if(h={lane:2,revertLane:Vf(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Bu(n)){if(s)throw Error(i(479))}else s=Wn(n,o,h,2),s!==null&&hi(s,n,2)}function Bu(n){var s=n.alternate;return n===le||s!==null&&s===le}function ey(n,s){Uo=Du=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function ny(n,s,o){if((o&4194048)!==0){var h=s.lanes;h&=n.pendingLanes,o|=h,s.lanes=o,qe(n,o)}}var ic={readContext:In,use:ku,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useLayoutEffect:sn,useInsertionEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useSyncExternalStore:sn,useId:sn,useHostTransitionStatus:sn,useFormState:sn,useActionState:sn,useOptimistic:sn,useMemoCache:sn,useCacheRefresh:sn};ic.useEffectEvent=sn;var iy={readContext:In,use:ku,useCallback:function(n,s){return ni().memoizedState=[n,s===void 0?null:s],n},useContext:In,useEffect:Ug,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Pu(4194308,4,Gg.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Pu(4194308,4,n,s)},useInsertionEffect:function(n,s){Pu(4,2,n,s)},useMemo:function(n,s){var o=ni();s=s===void 0?null:s;var h=n();if(Ir){jn(!0);try{n()}finally{jn(!1)}}return o.memoizedState=[h,s],h},useReducer:function(n,s,o){var h=ni();if(o!==void 0){var g=o(s);if(Ir){jn(!0);try{o(s)}finally{jn(!1)}}}else g=s;return h.memoizedState=h.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},h.queue=n,n=n.dispatch=Tw.bind(null,le,n),[h.memoizedState,n]},useRef:function(n){var s=ni();return n={current:n},s.memoizedState=n},useState:function(n){n=of(n);var s=n.queue,o=ty.bind(null,le,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:uf,useDeferredValue:function(n,s){var o=ni();return hf(o,n,s)},useTransition:function(){var n=of(!1);return n=Yg.bind(null,le,n.queue,!0,!1),ni().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var h=le,g=ni();if(xe){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),Ge===null)throw Error(i(349));(ye&127)!==0||Eg(h,s,o)}g.memoizedState=o;var b={value:o,getSnapshot:s};return g.queue=b,Ug(Cg.bind(null,h,b,n),[n]),h.flags|=2048,Ho(9,{destroy:void 0},_g.bind(null,h,b,o,s),null),o},useId:function(){var n=ni(),s=Ge.identifierPrefix;if(xe){var o=bs,h=ys;o=(h&~(1<<32-Bt(h)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Nu++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=xw++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:ff,useFormState:Pg,useActionState:Pg,useOptimistic:function(n){var s=ni();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=pf.bind(null,le,!0,o),o.dispatch=s,[n,s]},useMemoCache:sf,useCacheRefresh:function(){return ni().memoizedState=Cw.bind(null,le)},useEffectEvent:function(n){var s=ni(),o={impl:n};return s.memoizedState=o,function(){if((Ce&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},mf={readContext:In,use:ku,useCallback:Vg,useContext:In,useEffect:cf,useImperativeHandle:Kg,useInsertionEffect:Hg,useLayoutEffect:qg,useMemo:$g,useReducer:Lu,useRef:Ig,useState:function(){return Lu(ea)},useDebugValue:uf,useDeferredValue:function(n,s){var o=dn();return Xg(o,Ie.memoizedState,n,s)},useTransition:function(){var n=Lu(ea)[0],s=dn().memoizedState;return[typeof n=="boolean"?n:ec(n),s]},useSyncExternalStore:Ag,useId:Zg,useHostTransitionStatus:ff,useFormState:jg,useActionState:jg,useOptimistic:function(n,s){var o=dn();return Mg(o,Ie,n,s)},useMemoCache:sf,useCacheRefresh:Jg};mf.useEffectEvent=zg;var sy={readContext:In,use:ku,useCallback:Vg,useContext:In,useEffect:cf,useImperativeHandle:Kg,useInsertionEffect:Hg,useLayoutEffect:qg,useMemo:$g,useReducer:rf,useRef:Ig,useState:function(){return rf(ea)},useDebugValue:uf,useDeferredValue:function(n,s){var o=dn();return Ie===null?hf(o,n,s):Xg(o,Ie.memoizedState,n,s)},useTransition:function(){var n=rf(ea)[0],s=dn().memoizedState;return[typeof n=="boolean"?n:ec(n),s]},useSyncExternalStore:Ag,useId:Zg,useHostTransitionStatus:ff,useFormState:Fg,useActionState:Fg,useOptimistic:function(n,s){var o=dn();return Ie!==null?Mg(o,Ie,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:sf,useCacheRefresh:Jg};sy.useEffectEvent=zg;function gf(n,s,o,h){s=n.memoizedState,o=o(h,s),o=o==null?s:y({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var yf={enqueueSetState:function(n,s,o){n=n._reactInternals;var h=Ci(),g=Ua(h);g.payload=s,o!=null&&(g.callback=o),s=za(n,g,h),s!==null&&(hi(s,n,h),Wl(s,n,h))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var h=Ci(),g=Ua(h);g.tag=1,g.payload=s,o!=null&&(g.callback=o),s=za(n,g,h),s!==null&&(hi(s,n,h),Wl(s,n,h))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=Ci(),h=Ua(o);h.tag=2,s!=null&&(h.callback=s),s=za(n,h,o),s!==null&&(hi(s,n,o),Wl(s,n,o))}};function ay(n,s,o,h,g,b,C){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,b,C):s.prototype&&s.prototype.isPureReactComponent?!m(o,h)||!m(g,b):!0}function ry(n,s,o,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,h),s.state!==n&&yf.enqueueReplaceState(s,s.state,null)}function Ur(n,s){var o=s;if("ref"in s){o={};for(var h in s)h!=="ref"&&(o[h]=s[h])}if(n=n.defaultProps){o===s&&(o=y({},o));for(var g in n)o[g]===void 0&&(o[g]=n[g])}return o}function oy(n){It(n)}function ly(n){console.error(n)}function cy(n){It(n)}function Fu(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(h){setTimeout(function(){throw h})}}function uy(n,s,o){try{var h=n.onCaughtError;h(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function bf(n,s,o){return o=Ua(o),o.tag=3,o.payload={element:null},o.callback=function(){Fu(n,s)},o}function hy(n){return n=Ua(n),n.tag=3,n}function dy(n,s,o,h){var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var b=h.value;n.payload=function(){return g(b)},n.callback=function(){uy(s,o,h)}}var C=o.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(n.callback=function(){uy(s,o,h),typeof g!="function"&&($a===null?$a=new Set([this]):$a.add(this));var L=h.stack;this.componentDidCatch(h.value,{componentStack:L!==null?L:""})})}function Rw(n,s,o,h,g){if(o.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(s=o.alternate,s!==null&&Lo(s,o,g,!0),o=Si.current,o!==null){switch(o.tag){case 31:case 13:return Ui===null?Qu():o.alternate===null&&an===0&&(an=3),o.flags&=-257,o.flags|=65536,o.lanes=g,h===_u?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([h]):s.add(h),qf(n,h,g)),!1;case 22:return o.flags|=65536,h===_u?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([h])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([h]):o.add(h)),qf(n,h,g)),!1}throw Error(i(435,o.tag))}return qf(n,h,g),Qu(),!1}if(xe)return s=Si.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,h!==jd&&(n=Error(i(422),{cause:h}),Vl(ji(n,o)))):(h!==jd&&(s=Error(i(423),{cause:h}),Vl(ji(s,o))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,h=ji(h,o),g=bf(n.stateNode,h,g),$d(n,g),an!==4&&(an=2)),!1;var b=Error(i(520),{cause:h});if(b=ji(b,o),hc===null?hc=[b]:hc.push(b),an!==4&&(an=2),s===null)return!0;h=ji(h,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=g&-g,o.lanes|=n,n=bf(o.stateNode,h,n),$d(o,n),!1;case 1:if(s=o.type,b=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&($a===null||!$a.has(b))))return o.flags|=65536,g&=-g,o.lanes|=g,g=hy(g),dy(g,n,o,h),$d(o,g),!1}o=o.return}while(o!==null);return!1}var vf=Error(i(461)),bn=!1;function Un(n,s,o,h){s.child=n===null?gg(s,null,o,h):Fr(s,n.child,o,h)}function fy(n,s,o,h,g){o=o.render;var b=s.ref;if("ref"in h){var C={};for(var L in h)L!=="ref"&&(C[L]=h[L])}else C=h;return Lr(s),h=Jd(n,s,o,C,b,g),L=tf(),n!==null&&!bn?(ef(n,s,g),na(n,s,g)):(xe&&L&&Ld(s),s.flags|=1,Un(n,s,h,g),s.child)}function py(n,s,o,h,g){if(n===null){var b=o.type;return typeof b=="function"&&!Nd(b)&&b.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=b,my(n,s,b,h,g)):(n=vu(o.type,null,h,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(b=n.child,!Tf(n,g)){var C=b.memoizedProps;if(o=o.compare,o=o!==null?o:m,o(C,h)&&n.ref===s.ref)return na(n,s,g)}return s.flags|=1,n=Qs(b,h),n.ref=s.ref,n.return=s,s.child=n}function my(n,s,o,h,g){if(n!==null){var b=n.memoizedProps;if(m(b,h)&&n.ref===s.ref)if(bn=!1,s.pendingProps=h=b,Tf(n,g))(n.flags&131072)!==0&&(bn=!0);else return s.lanes=n.lanes,na(n,s,g)}return xf(n,s,o,h,g)}function gy(n,s,o,h){var g=h.children,b=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((s.flags&128)!==0){if(b=b!==null?b.baseLanes|o:o,n!==null){for(h=s.child=n.child,g=0;h!==null;)g=g|h.lanes|h.childLanes,h=h.sibling;h=g&~b}else h=0,s.child=null;return yy(n,s,b,o,h)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Au(s,b!==null?b.cachePool:null),b!==null?vg(s,b):Yd(),xg(s);else return h=s.lanes=536870912,yy(n,s,b!==null?b.baseLanes|o:o,o,h)}else b!==null?(Au(s,b.cachePool),vg(s,b),qa(),s.memoizedState=null):(n!==null&&Au(s,null),Yd(),qa());return Un(n,s,g,o),s.child}function sc(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function yy(n,s,o,h,g){var b=qd();return b=b===null?null:{parent:gn._currentValue,pool:b},s.memoizedState={baseLanes:o,cachePool:b},n!==null&&Au(s,null),Yd(),xg(s),n!==null&&Lo(n,s,h,!0),s.childLanes=g,null}function Iu(n,s){return s=zu({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function by(n,s,o){return Fr(s,n.child,null,o),n=Iu(s,s.pendingProps),n.flags|=2,Ai(s),s.memoizedState=null,n}function Mw(n,s,o){var h=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(xe){if(h.mode==="hidden")return n=Iu(s,h),s.lanes=536870912,sc(null,n);if(Wd(s),(n=Xe)?(n=Db(n,Ii),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Pa!==null?{id:ys,overflow:bs}:null,retryLane:536870912,hydrationErrors:null},o=eg(n),o.return=s,s.child=o,Fn=s,Xe=null)):n=null,n===null)throw Ba(s);return s.lanes=536870912,null}return Iu(s,h)}var b=n.memoizedState;if(b!==null){var C=b.dehydrated;if(Wd(s),g)if(s.flags&256)s.flags&=-257,s=by(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(bn||Lo(n,s,o,!1),g=(o&n.childLanes)!==0,bn||g){if(h=Ge,h!==null&&(C=ln(h,o),C!==0&&C!==b.retryLane))throw b.retryLane=C,ke(n,C),hi(h,n,C),vf;Qu(),s=by(n,s,o)}else n=b.treeContext,Xe=zi(C.nextSibling),Fn=s,xe=!0,ja=null,Ii=!1,n!==null&&sg(s,n),s=Iu(s,h),s.flags|=4096;return s}return n=Qs(n.child,{mode:h.mode,children:h.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Uu(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function xf(n,s,o,h,g){return Lr(s),o=Jd(n,s,o,h,void 0,g),h=tf(),n!==null&&!bn?(ef(n,s,g),na(n,s,g)):(xe&&h&&Ld(s),s.flags|=1,Un(n,s,o,g),s.child)}function vy(n,s,o,h,g,b){return Lr(s),s.updateQueue=null,o=Sg(s,h,o,g),wg(n),h=tf(),n!==null&&!bn?(ef(n,s,b),na(n,s,b)):(xe&&h&&Ld(s),s.flags|=1,Un(n,s,o,b),s.child)}function xy(n,s,o,h,g){if(Lr(s),s.stateNode===null){var b=Do,C=o.contextType;typeof C=="object"&&C!==null&&(b=In(C)),b=new o(h,b),s.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=yf,s.stateNode=b,b._reactInternals=s,b=s.stateNode,b.props=h,b.state=s.memoizedState,b.refs={},Kd(s),C=o.contextType,b.context=typeof C=="object"&&C!==null?In(C):Do,b.state=s.memoizedState,C=o.getDerivedStateFromProps,typeof C=="function"&&(gf(s,o,C,h),b.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(C=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),C!==b.state&&yf.enqueueReplaceState(b,b.state,null),Jl(s,h,b,g),Zl(),b.state=s.memoizedState),typeof b.componentDidMount=="function"&&(s.flags|=4194308),h=!0}else if(n===null){b=s.stateNode;var L=s.memoizedProps,q=Ur(o,L);b.props=q;var rt=b.context,mt=o.contextType;C=Do,typeof mt=="object"&&mt!==null&&(C=In(mt));var bt=o.getDerivedStateFromProps;mt=typeof bt=="function"||typeof b.getSnapshotBeforeUpdate=="function",L=s.pendingProps!==L,mt||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(L||rt!==C)&&ry(s,b,h,C),Ia=!1;var lt=s.memoizedState;b.state=lt,Jl(s,h,b,g),Zl(),rt=s.memoizedState,L||lt!==rt||Ia?(typeof bt=="function"&&(gf(s,o,bt,h),rt=s.memoizedState),(q=Ia||ay(s,o,q,h,lt,rt,C))?(mt||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=rt),b.props=h,b.state=rt,b.context=C,h=q):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{b=s.stateNode,Vd(n,s),C=s.memoizedProps,mt=Ur(o,C),b.props=mt,bt=s.pendingProps,lt=b.context,rt=o.contextType,q=Do,typeof rt=="object"&&rt!==null&&(q=In(rt)),L=o.getDerivedStateFromProps,(rt=typeof L=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(C!==bt||lt!==q)&&ry(s,b,h,q),Ia=!1,lt=s.memoizedState,b.state=lt,Jl(s,h,b,g),Zl();var dt=s.memoizedState;C!==bt||lt!==dt||Ia||n!==null&&n.dependencies!==null&&wu(n.dependencies)?(typeof L=="function"&&(gf(s,o,L,h),dt=s.memoizedState),(mt=Ia||ay(s,o,mt,h,lt,dt,q)||n!==null&&n.dependencies!==null&&wu(n.dependencies))?(rt||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(h,dt,q),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(h,dt,q)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||C===n.memoizedProps&&lt===n.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&lt===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=dt),b.props=h,b.state=dt,b.context=q,h=mt):(typeof b.componentDidUpdate!="function"||C===n.memoizedProps&&lt===n.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&lt===n.memoizedState||(s.flags|=1024),h=!1)}return b=h,Uu(n,s),h=(s.flags&128)!==0,b||h?(b=s.stateNode,o=h&&typeof o.getDerivedStateFromError!="function"?null:b.render(),s.flags|=1,n!==null&&h?(s.child=Fr(s,n.child,null,g),s.child=Fr(s,null,o,g)):Un(n,s,o,g),s.memoizedState=b.state,n=s.child):n=na(n,s,g),n}function wy(n,s,o,h){return Or(),s.flags|=256,Un(n,s,o,h),s.child}var wf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sf(n){return{baseLanes:n,cachePool:ug()}}function Af(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=_i),n}function Sy(n,s,o){var h=s.pendingProps,g=!1,b=(s.flags&128)!==0,C;if((C=b)||(C=n!==null&&n.memoizedState===null?!1:(hn.current&2)!==0),C&&(g=!0,s.flags&=-129),C=(s.flags&32)!==0,s.flags&=-33,n===null){if(xe){if(g?Ha(s):qa(),(n=Xe)?(n=Db(n,Ii),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Pa!==null?{id:ys,overflow:bs}:null,retryLane:536870912,hydrationErrors:null},o=eg(n),o.return=s,s.child=o,Fn=s,Xe=null)):n=null,n===null)throw Ba(s);return ap(n)?s.lanes=32:s.lanes=536870912,null}var L=h.children;return h=h.fallback,g?(qa(),g=s.mode,L=zu({mode:"hidden",children:L},g),h=Nr(h,g,o,null),L.return=s,h.return=s,L.sibling=h,s.child=L,h=s.child,h.memoizedState=Sf(o),h.childLanes=Af(n,C,o),s.memoizedState=wf,sc(null,h)):(Ha(s),Ef(s,L))}var q=n.memoizedState;if(q!==null&&(L=q.dehydrated,L!==null)){if(b)s.flags&256?(Ha(s),s.flags&=-257,s=_f(n,s,o)):s.memoizedState!==null?(qa(),s.child=n.child,s.flags|=128,s=null):(qa(),L=h.fallback,g=s.mode,h=zu({mode:"visible",children:h.children},g),L=Nr(L,g,o,null),L.flags|=2,h.return=s,L.return=s,h.sibling=L,s.child=h,Fr(s,n.child,null,o),h=s.child,h.memoizedState=Sf(o),h.childLanes=Af(n,C,o),s.memoizedState=wf,s=sc(null,h));else if(Ha(s),ap(L)){if(C=L.nextSibling&&L.nextSibling.dataset,C)var rt=C.dgst;C=rt,h=Error(i(419)),h.stack="",h.digest=C,Vl({value:h,source:null,stack:null}),s=_f(n,s,o)}else if(bn||Lo(n,s,o,!1),C=(o&n.childLanes)!==0,bn||C){if(C=Ge,C!==null&&(h=ln(C,o),h!==0&&h!==q.retryLane))throw q.retryLane=h,ke(n,h),hi(C,n,h),vf;sp(L)||Qu(),s=_f(n,s,o)}else sp(L)?(s.flags|=192,s.child=n.child,s=null):(n=q.treeContext,Xe=zi(L.nextSibling),Fn=s,xe=!0,ja=null,Ii=!1,n!==null&&sg(s,n),s=Ef(s,h.children),s.flags|=4096);return s}return g?(qa(),L=h.fallback,g=s.mode,q=n.child,rt=q.sibling,h=Qs(q,{mode:"hidden",children:h.children}),h.subtreeFlags=q.subtreeFlags&65011712,rt!==null?L=Qs(rt,L):(L=Nr(L,g,o,null),L.flags|=2),L.return=s,h.return=s,h.sibling=L,s.child=h,sc(null,h),h=s.child,L=n.child.memoizedState,L===null?L=Sf(o):(g=L.cachePool,g!==null?(q=gn._currentValue,g=g.parent!==q?{parent:q,pool:q}:g):g=ug(),L={baseLanes:L.baseLanes|o,cachePool:g}),h.memoizedState=L,h.childLanes=Af(n,C,o),s.memoizedState=wf,sc(n.child,h)):(Ha(s),o=n.child,n=o.sibling,o=Qs(o,{mode:"visible",children:h.children}),o.return=s,o.sibling=null,n!==null&&(C=s.deletions,C===null?(s.deletions=[n],s.flags|=16):C.push(n)),s.child=o,s.memoizedState=null,o)}function Ef(n,s){return s=zu({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function zu(n,s){return n=wi(22,n,null,s),n.lanes=0,n}function _f(n,s,o){return Fr(s,n.child,null,o),n=Ef(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Ay(n,s,o){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),Id(n.return,s,o)}function Cf(n,s,o,h,g,b){var C=n.memoizedState;C===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:o,tailMode:g,treeForkCount:b}:(C.isBackwards=s,C.rendering=null,C.renderingStartTime=0,C.last=h,C.tail=o,C.tailMode=g,C.treeForkCount=b)}function Ey(n,s,o){var h=s.pendingProps,g=h.revealOrder,b=h.tail;h=h.children;var C=hn.current,L=(C&2)!==0;if(L?(C=C&1|2,s.flags|=128):C&=1,ft(hn,C),Un(n,s,h,o),h=xe?Kl:0,!L&&n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ay(n,o,s);else if(n.tag===19)Ay(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(o=s.child,g=null;o!==null;)n=o.alternate,n!==null&&Mu(n)===null&&(g=o),o=o.sibling;o=g,o===null?(g=s.child,s.child=null):(g=o.sibling,o.sibling=null),Cf(s,!1,g,o,b,h);break;case"backwards":case"unstable_legacy-backwards":for(o=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&Mu(n)===null){s.child=g;break}n=g.sibling,g.sibling=o,o=g,g=n}Cf(s,!0,o,null,b,h);break;case"together":Cf(s,!1,null,null,void 0,h);break;default:s.memoizedState=null}return s.child}function na(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),Va|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(Lo(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=Qs(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=Qs(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function Tf(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&wu(n)))}function Dw(n,s,o){switch(s.tag){case 3:he(s,s.stateNode.containerInfo),Fa(s,gn,n.memoizedState.cache),Or();break;case 27:case 5:Tt(s);break;case 4:he(s,s.stateNode.containerInfo);break;case 10:Fa(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Wd(s),null;break;case 13:var h=s.memoizedState;if(h!==null)return h.dehydrated!==null?(Ha(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Sy(n,s,o):(Ha(s),n=na(n,s,o),n!==null?n.sibling:null);Ha(s);break;case 19:var g=(n.flags&128)!==0;if(h=(o&s.childLanes)!==0,h||(Lo(n,s,o,!1),h=(o&s.childLanes)!==0),g){if(h)return Ey(n,s,o);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ft(hn,hn.current),h)break;return null;case 22:return s.lanes=0,gy(n,s,o,s.pendingProps);case 24:Fa(s,gn,n.memoizedState.cache)}return na(n,s,o)}function _y(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)bn=!0;else{if(!Tf(n,o)&&(s.flags&128)===0)return bn=!1,Dw(n,s,o);bn=(n.flags&131072)!==0}else bn=!1,xe&&(s.flags&1048576)!==0&&ig(s,Kl,s.index);switch(s.lanes=0,s.tag){case 16:t:{var h=s.pendingProps;if(n=jr(s.elementType),s.type=n,typeof n=="function")Nd(n)?(h=Ur(n,h),s.tag=1,s=xy(null,s,n,h,o)):(s.tag=0,s=xf(null,s,n,h,o));else{if(n!=null){var g=n.$$typeof;if(g===F){s.tag=11,s=fy(null,s,n,h,o);break t}else if(g===H){s.tag=14,s=py(null,s,n,h,o);break t}}throw s=xt(n)||n,Error(i(306,s,""))}}return s;case 0:return xf(n,s,s.type,s.pendingProps,o);case 1:return h=s.type,g=Ur(h,s.pendingProps),xy(n,s,h,g,o);case 3:t:{if(he(s,s.stateNode.containerInfo),n===null)throw Error(i(387));h=s.pendingProps;var b=s.memoizedState;g=b.element,Vd(n,s),Jl(s,h,null,o);var C=s.memoizedState;if(h=C.cache,Fa(s,gn,h),h!==b.cache&&Ud(s,[gn],o,!0),Zl(),h=C.element,b.isDehydrated)if(b={element:h,isDehydrated:!1,cache:C.cache},s.updateQueue.baseState=b,s.memoizedState=b,s.flags&256){s=wy(n,s,h,o);break t}else if(h!==g){g=ji(Error(i(424)),s),Vl(g),s=wy(n,s,h,o);break t}else for(n=s.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Xe=zi(n.firstChild),Fn=s,xe=!0,ja=null,Ii=!0,o=gg(s,null,h,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Or(),h===g){s=na(n,s,o);break t}Un(n,s,h,o)}s=s.child}return s;case 26:return Uu(n,s),n===null?(o=jb(s.type,null,s.pendingProps,null))?s.memoizedState=o:xe||(o=s.type,n=s.pendingProps,h=ih(qt.current).createElement(o),h[Ke]=s,h[cn]=n,zn(h,o,n),un(h),s.stateNode=h):s.memoizedState=jb(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Tt(s),n===null&&xe&&(h=s.stateNode=kb(s.type,s.pendingProps,qt.current),Fn=s,Ii=!0,g=Xe,Wa(s.type)?(rp=g,Xe=zi(h.firstChild)):Xe=g),Un(n,s,s.pendingProps.children,o),Uu(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&xe&&((g=h=Xe)&&(h=r1(h,s.type,s.pendingProps,Ii),h!==null?(s.stateNode=h,Fn=s,Xe=zi(h.firstChild),Ii=!1,g=!0):g=!1),g||Ba(s)),Tt(s),g=s.type,b=s.pendingProps,C=n!==null?n.memoizedProps:null,h=b.children,ep(g,b)?h=null:C!==null&&ep(g,C)&&(s.flags|=32),s.memoizedState!==null&&(g=Jd(n,s,ww,null,null,o),vc._currentValue=g),Uu(n,s),Un(n,s,h,o),s.child;case 6:return n===null&&xe&&((n=o=Xe)&&(o=o1(o,s.pendingProps,Ii),o!==null?(s.stateNode=o,Fn=s,Xe=null,n=!0):n=!1),n||Ba(s)),null;case 13:return Sy(n,s,o);case 4:return he(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=Fr(s,null,h,o):Un(n,s,h,o),s.child;case 11:return fy(n,s,s.type,s.pendingProps,o);case 7:return Un(n,s,s.pendingProps,o),s.child;case 8:return Un(n,s,s.pendingProps.children,o),s.child;case 12:return Un(n,s,s.pendingProps.children,o),s.child;case 10:return h=s.pendingProps,Fa(s,s.type,h.value),Un(n,s,h.children,o),s.child;case 9:return g=s.type._context,h=s.pendingProps.children,Lr(s),g=In(g),h=h(g),s.flags|=1,Un(n,s,h,o),s.child;case 14:return py(n,s,s.type,s.pendingProps,o);case 15:return my(n,s,s.type,s.pendingProps,o);case 19:return Ey(n,s,o);case 31:return Mw(n,s,o);case 22:return gy(n,s,o,s.pendingProps);case 24:return Lr(s),h=In(gn),n===null?(g=qd(),g===null&&(g=Ge,b=zd(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=o),g=b),s.memoizedState={parent:h,cache:g},Kd(s),Fa(s,gn,g)):((n.lanes&o)!==0&&(Vd(n,s),Jl(s,null,null,o),Zl()),g=n.memoizedState,b=s.memoizedState,g.parent!==h?(g={parent:h,cache:h},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),Fa(s,gn,h)):(h=b.cache,Fa(s,gn,h),h!==g.cache&&Ud(s,[gn],o,!0))),Un(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ia(n){n.flags|=4}function Rf(n,s,o,h,g){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(Zy())n.flags|=8192;else throw Br=_u,Gd}else n.flags&=-16777217}function Cy(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!zb(s))if(Zy())n.flags|=8192;else throw Br=_u,Gd}function Hu(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?su():536870912,n.lanes|=s,Vo|=s)}function ac(n,s){if(!xe)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Ye(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,h=0;if(s)for(var g=n.child;g!==null;)o|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)o|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=h,n.childLanes=o,s}function Nw(n,s,o){var h=s.pendingProps;switch(Pd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(s),null;case 1:return Ye(s),null;case 3:return o=s.stateNode,h=null,n!==null&&(h=n.memoizedState.cache),s.memoizedState.cache!==h&&(s.flags|=2048),Js(gn),re(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(ko(s)?ia(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Bd())),Ye(s),null;case 26:var g=s.type,b=s.memoizedState;return n===null?(ia(s),b!==null?(Ye(s),Cy(s,b)):(Ye(s),Rf(s,g,null,h,o))):b?b!==n.memoizedState?(ia(s),Ye(s),Cy(s,b)):(Ye(s),s.flags&=-16777217):(n=n.memoizedProps,n!==h&&ia(s),Ye(s),Rf(s,g,n,h,o)),null;case 27:if(de(s),o=qt.current,g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==h&&ia(s);else{if(!h){if(s.stateNode===null)throw Error(i(166));return Ye(s),null}n=wt.current,ko(s)?ag(s):(n=kb(g,h,o),s.stateNode=n,ia(s))}return Ye(s),null;case 5:if(de(s),g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==h&&ia(s);else{if(!h){if(s.stateNode===null)throw Error(i(166));return Ye(s),null}if(b=wt.current,ko(s))ag(s);else{var C=ih(qt.current);switch(b){case 1:b=C.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:b=C.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":b=C.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":b=C.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":b=C.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof h.is=="string"?C.createElement("select",{is:h.is}):C.createElement("select"),h.multiple?b.multiple=!0:h.size&&(b.size=h.size);break;default:b=typeof h.is=="string"?C.createElement(g,{is:h.is}):C.createElement(g)}}b[Ke]=s,b[cn]=h;t:for(C=s.child;C!==null;){if(C.tag===5||C.tag===6)b.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===s)break t;for(;C.sibling===null;){if(C.return===null||C.return===s)break t;C=C.return}C.sibling.return=C.return,C=C.sibling}s.stateNode=b;t:switch(zn(b,g,h),g){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break t;case"img":h=!0;break t;default:h=!1}h&&ia(s)}}return Ye(s),Rf(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==h&&ia(s);else{if(typeof h!="string"&&s.stateNode===null)throw Error(i(166));if(n=qt.current,ko(s)){if(n=s.stateNode,o=s.memoizedProps,h=null,g=Fn,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}n[Ke]=s,n=!!(n.nodeValue===o||h!==null&&h.suppressHydrationWarning===!0||Sb(n.nodeValue,o)),n||Ba(s,!0)}else n=ih(n).createTextNode(h),n[Ke]=s,s.stateNode=n}return Ye(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(h=ko(s),o!==null){if(n===null){if(!h)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Ke]=s}else Or(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ye(s),n=!1}else o=Bd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(Ai(s),s):(Ai(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Ye(s),null;case 13:if(h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=ko(s),h!==null&&h.dehydrated!==null){if(n===null){if(!g)throw Error(i(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Ke]=s}else Or(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ye(s),g=!1}else g=Bd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(Ai(s),s):(Ai(s),null)}return Ai(s),(s.flags&128)!==0?(s.lanes=o,s):(o=h!==null,n=n!==null&&n.memoizedState!==null,o&&(h=s.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool),b=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),b!==g&&(h.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),Hu(s,s.updateQueue),Ye(s),null);case 4:return re(),n===null&&Qf(s.stateNode.containerInfo),Ye(s),null;case 10:return Js(s.type),Ye(s),null;case 19:if(J(hn),h=s.memoizedState,h===null)return Ye(s),null;if(g=(s.flags&128)!==0,b=h.rendering,b===null)if(g)ac(h,!1);else{if(an!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(b=Mu(n),b!==null){for(s.flags|=128,ac(h,!1),n=b.updateQueue,s.updateQueue=n,Hu(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)tg(o,n),o=o.sibling;return ft(hn,hn.current&1|2),xe&&Ws(s,h.treeForkCount),s.child}n=n.sibling}h.tail!==null&&Vn()>$u&&(s.flags|=128,g=!0,ac(h,!1),s.lanes=4194304)}else{if(!g)if(n=Mu(b),n!==null){if(s.flags|=128,g=!0,n=n.updateQueue,s.updateQueue=n,Hu(s,n),ac(h,!0),h.tail===null&&h.tailMode==="hidden"&&!b.alternate&&!xe)return Ye(s),null}else 2*Vn()-h.renderingStartTime>$u&&o!==536870912&&(s.flags|=128,g=!0,ac(h,!1),s.lanes=4194304);h.isBackwards?(b.sibling=s.child,s.child=b):(n=h.last,n!==null?n.sibling=b:s.child=b,h.last=b)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=Vn(),n.sibling=null,o=hn.current,ft(hn,g?o&1|2:o&1),xe&&Ws(s,h.treeForkCount),n):(Ye(s),null);case 22:case 23:return Ai(s),Qd(),h=s.memoizedState!==null,n!==null?n.memoizedState!==null!==h&&(s.flags|=8192):h&&(s.flags|=8192),h?(o&536870912)!==0&&(s.flags&128)===0&&(Ye(s),s.subtreeFlags&6&&(s.flags|=8192)):Ye(s),o=s.updateQueue,o!==null&&Hu(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),h=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==o&&(s.flags|=2048),n!==null&&J(Pr),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Js(gn),Ye(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function Ow(n,s){switch(Pd(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Js(gn),re(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return de(s),null;case 31:if(s.memoizedState!==null){if(Ai(s),s.alternate===null)throw Error(i(340));Or()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Ai(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Or()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return J(hn),null;case 4:return re(),null;case 10:return Js(s.type),null;case 22:case 23:return Ai(s),Qd(),n!==null&&J(Pr),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Js(gn),null;case 25:return null;default:return null}}function Ty(n,s){switch(Pd(s),s.tag){case 3:Js(gn),re();break;case 26:case 27:case 5:de(s);break;case 4:re();break;case 31:s.memoizedState!==null&&Ai(s);break;case 13:Ai(s);break;case 19:J(hn);break;case 10:Js(s.type);break;case 22:case 23:Ai(s),Qd(),n!==null&&J(Pr);break;case 24:Js(gn)}}function rc(n,s){try{var o=s.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var g=h.next;o=g;do{if((o.tag&n)===n){h=void 0;var b=o.create,C=o.inst;h=b(),C.destroy=h}o=o.next}while(o!==g)}}catch(L){je(s,s.return,L)}}function Ga(n,s,o){try{var h=s.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var b=g.next;h=b;do{if((h.tag&n)===n){var C=h.inst,L=C.destroy;if(L!==void 0){C.destroy=void 0,g=s;var q=o,rt=L;try{rt()}catch(mt){je(g,q,mt)}}}h=h.next}while(h!==b)}}catch(mt){je(s,s.return,mt)}}function Ry(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{bg(s,o)}catch(h){je(n,n.return,h)}}}function My(n,s,o){o.props=Ur(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(h){je(n,s,h)}}function oc(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var h=n.stateNode;break;case 30:h=n.stateNode;break;default:h=n.stateNode}typeof o=="function"?n.refCleanup=o(h):o.current=h}}catch(g){je(n,s,g)}}function vs(n,s){var o=n.ref,h=n.refCleanup;if(o!==null)if(typeof h=="function")try{h()}catch(g){je(n,s,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(g){je(n,s,g)}else o.current=null}function Dy(n){var s=n.type,o=n.memoizedProps,h=n.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&h.focus();break t;case"img":o.src?h.src=o.src:o.srcSet&&(h.srcset=o.srcSet)}}catch(g){je(n,n.return,g)}}function Mf(n,s,o){try{var h=n.stateNode;t1(h,n.type,o,s),h[cn]=s}catch(g){je(n,n.return,g)}}function Ny(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Wa(n.type)||n.tag===4}function Df(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Ny(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Wa(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Nf(n,s,o){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=ri));else if(h!==4&&(h===27&&Wa(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(Nf(n,s,o),n=n.sibling;n!==null;)Nf(n,s,o),n=n.sibling}function qu(n,s,o){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(h!==4&&(h===27&&Wa(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(qu(n,s,o),n=n.sibling;n!==null;)qu(n,s,o),n=n.sibling}function Oy(n){var s=n.stateNode,o=n.memoizedProps;try{for(var h=n.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);zn(s,h,o),s[Ke]=n,s[cn]=o}catch(b){je(n,n.return,b)}}var sa=!1,vn=!1,Of=!1,ky=typeof WeakSet=="function"?WeakSet:Set,Nn=null;function kw(n,s){if(n=n.containerInfo,Jf=uh,n=D(n),O(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else t:{o=(o=n.ownerDocument)&&o.defaultView||window;var h=o.getSelection&&o.getSelection();if(h&&h.rangeCount!==0){o=h.anchorNode;var g=h.anchorOffset,b=h.focusNode;h=h.focusOffset;try{o.nodeType,b.nodeType}catch{o=null;break t}var C=0,L=-1,q=-1,rt=0,mt=0,bt=n,lt=null;e:for(;;){for(var dt;bt!==o||g!==0&&bt.nodeType!==3||(L=C+g),bt!==b||h!==0&&bt.nodeType!==3||(q=C+h),bt.nodeType===3&&(C+=bt.nodeValue.length),(dt=bt.firstChild)!==null;)lt=bt,bt=dt;for(;;){if(bt===n)break e;if(lt===o&&++rt===g&&(L=C),lt===b&&++mt===h&&(q=C),(dt=bt.nextSibling)!==null)break;bt=lt,lt=bt.parentNode}bt=dt}o=L===-1||q===-1?null:{start:L,end:q}}else o=null}o=o||{start:0,end:0}}else o=null;for(tp={focusedElem:n,selectionRange:o},uh=!1,Nn=s;Nn!==null;)if(s=Nn,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Nn=n;else for(;Nn!==null;){switch(s=Nn,b=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)g=n[o],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&b!==null){n=void 0,o=s,g=b.memoizedProps,b=b.memoizedState,h=o.stateNode;try{var Kt=Ur(o.type,g);n=h.getSnapshotBeforeUpdate(Kt,b),h.__reactInternalSnapshotBeforeUpdate=n}catch(Zt){je(o,o.return,Zt)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)ip(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":ip(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Nn=n;break}Nn=s.return}}function Ly(n,s,o){var h=o.flags;switch(o.tag){case 0:case 11:case 15:ra(n,o),h&4&&rc(5,o);break;case 1:if(ra(n,o),h&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(C){je(o,o.return,C)}else{var g=Ur(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(g,s,n.__reactInternalSnapshotBeforeUpdate)}catch(C){je(o,o.return,C)}}h&64&&Ry(o),h&512&&oc(o,o.return);break;case 3:if(ra(n,o),h&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{bg(n,s)}catch(C){je(o,o.return,C)}}break;case 27:s===null&&h&4&&Oy(o);case 26:case 5:ra(n,o),s===null&&h&4&&Dy(o),h&512&&oc(o,o.return);break;case 12:ra(n,o);break;case 31:ra(n,o),h&4&&By(n,o);break;case 13:ra(n,o),h&4&&Fy(n,o),h&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=Hw.bind(null,o),l1(n,o))));break;case 22:if(h=o.memoizedState!==null||sa,!h){s=s!==null&&s.memoizedState!==null||vn,g=sa;var b=vn;sa=h,(vn=s)&&!b?oa(n,o,(o.subtreeFlags&8772)!==0):ra(n,o),sa=g,vn=b}break;case 30:break;default:ra(n,o)}}function Py(n){var s=n.alternate;s!==null&&(n.alternate=null,Py(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&co(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Qe=null,oi=!1;function aa(n,s,o){for(o=o.child;o!==null;)jy(n,s,o),o=o.sibling}function jy(n,s,o){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(rs,o)}catch{}switch(o.tag){case 26:vn||vs(o,s),aa(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:vn||vs(o,s);var h=Qe,g=oi;Wa(o.type)&&(Qe=o.stateNode,oi=!1),aa(n,s,o),gc(o.stateNode),Qe=h,oi=g;break;case 5:vn||vs(o,s);case 6:if(h=Qe,g=oi,Qe=null,aa(n,s,o),Qe=h,oi=g,Qe!==null)if(oi)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(o.stateNode)}catch(b){je(o,s,b)}else try{Qe.removeChild(o.stateNode)}catch(b){je(o,s,b)}break;case 18:Qe!==null&&(oi?(n=Qe,Rb(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),tl(n)):Rb(Qe,o.stateNode));break;case 4:h=Qe,g=oi,Qe=o.stateNode.containerInfo,oi=!0,aa(n,s,o),Qe=h,oi=g;break;case 0:case 11:case 14:case 15:Ga(2,o,s),vn||Ga(4,o,s),aa(n,s,o);break;case 1:vn||(vs(o,s),h=o.stateNode,typeof h.componentWillUnmount=="function"&&My(o,s,h)),aa(n,s,o);break;case 21:aa(n,s,o);break;case 22:vn=(h=vn)||o.memoizedState!==null,aa(n,s,o),vn=h;break;default:aa(n,s,o)}}function By(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{tl(n)}catch(o){je(s,s.return,o)}}}function Fy(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{tl(n)}catch(o){je(s,s.return,o)}}function Lw(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new ky),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new ky),s;default:throw Error(i(435,n.tag))}}function Gu(n,s){var o=Lw(n);s.forEach(function(h){if(!o.has(h)){o.add(h);var g=qw.bind(null,n,h);h.then(g,g)}})}function li(n,s){var o=s.deletions;if(o!==null)for(var h=0;h<o.length;h++){var g=o[h],b=n,C=s,L=C;t:for(;L!==null;){switch(L.tag){case 27:if(Wa(L.type)){Qe=L.stateNode,oi=!1;break t}break;case 5:Qe=L.stateNode,oi=!1;break t;case 3:case 4:Qe=L.stateNode.containerInfo,oi=!0;break t}L=L.return}if(Qe===null)throw Error(i(160));jy(b,C,g),Qe=null,oi=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Iy(s,n),s=s.sibling}var Zi=null;function Iy(n,s){var o=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:li(s,n),ci(n),h&4&&(Ga(3,n,n.return),rc(3,n),Ga(5,n,n.return));break;case 1:li(s,n),ci(n),h&512&&(vn||o===null||vs(o,o.return)),h&64&&sa&&(n=n.updateQueue,n!==null&&(h=n.callbacks,h!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?h:o.concat(h))));break;case 26:var g=Zi;if(li(s,n),ci(n),h&512&&(vn||o===null||vs(o,o.return)),h&4){var b=o!==null?o.memoizedState:null;if(h=n.memoizedState,o===null)if(h===null)if(n.stateNode===null){t:{h=n.type,o=n.memoizedProps,g=g.ownerDocument||g;e:switch(h){case"title":b=g.getElementsByTagName("title")[0],(!b||b[bi]||b[Ke]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(h),g.head.insertBefore(b,g.querySelector("head > title"))),zn(b,h,o),b[Ke]=n,un(b),h=b;break t;case"link":var C=Ib("link","href",g).get(h+(o.href||""));if(C){for(var L=0;L<C.length;L++)if(b=C[L],b.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&b.getAttribute("rel")===(o.rel==null?null:o.rel)&&b.getAttribute("title")===(o.title==null?null:o.title)&&b.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){C.splice(L,1);break e}}b=g.createElement(h),zn(b,h,o),g.head.appendChild(b);break;case"meta":if(C=Ib("meta","content",g).get(h+(o.content||""))){for(L=0;L<C.length;L++)if(b=C[L],b.getAttribute("content")===(o.content==null?null:""+o.content)&&b.getAttribute("name")===(o.name==null?null:o.name)&&b.getAttribute("property")===(o.property==null?null:o.property)&&b.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&b.getAttribute("charset")===(o.charSet==null?null:o.charSet)){C.splice(L,1);break e}}b=g.createElement(h),zn(b,h,o),g.head.appendChild(b);break;default:throw Error(i(468,h))}b[Ke]=n,un(b),h=b}n.stateNode=h}else Ub(g,n.type,n.stateNode);else n.stateNode=Fb(g,h,n.memoizedProps);else b!==h?(b===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):b.count--,h===null?Ub(g,n.type,n.stateNode):Fb(g,h,n.memoizedProps)):h===null&&n.stateNode!==null&&Mf(n,n.memoizedProps,o.memoizedProps)}break;case 27:li(s,n),ci(n),h&512&&(vn||o===null||vs(o,o.return)),o!==null&&h&4&&Mf(n,n.memoizedProps,o.memoizedProps);break;case 5:if(li(s,n),ci(n),h&512&&(vn||o===null||vs(o,o.return)),n.flags&32){g=n.stateNode;try{Us(g,"")}catch(Kt){je(n,n.return,Kt)}}h&4&&n.stateNode!=null&&(g=n.memoizedProps,Mf(n,g,o!==null?o.memoizedProps:g)),h&1024&&(Of=!0);break;case 6:if(li(s,n),ci(n),h&4){if(n.stateNode===null)throw Error(i(162));h=n.memoizedProps,o=n.stateNode;try{o.nodeValue=h}catch(Kt){je(n,n.return,Kt)}}break;case 3:if(rh=null,g=Zi,Zi=sh(s.containerInfo),li(s,n),Zi=g,ci(n),h&4&&o!==null&&o.memoizedState.isDehydrated)try{tl(s.containerInfo)}catch(Kt){je(n,n.return,Kt)}Of&&(Of=!1,Uy(n));break;case 4:h=Zi,Zi=sh(n.stateNode.containerInfo),li(s,n),ci(n),Zi=h;break;case 12:li(s,n),ci(n);break;case 31:li(s,n),ci(n),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,Gu(n,h)));break;case 13:li(s,n),ci(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Vu=Vn()),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,Gu(n,h)));break;case 22:g=n.memoizedState!==null;var q=o!==null&&o.memoizedState!==null,rt=sa,mt=vn;if(sa=rt||g,vn=mt||q,li(s,n),vn=mt,sa=rt,ci(n),h&8192)t:for(s=n.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(o===null||q||sa||vn||zr(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){q=o=s;try{if(b=q.stateNode,g)C=b.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{L=q.stateNode;var bt=q.memoizedProps.style,lt=bt!=null&&bt.hasOwnProperty("display")?bt.display:null;L.style.display=lt==null||typeof lt=="boolean"?"":(""+lt).trim()}}catch(Kt){je(q,q.return,Kt)}}}else if(s.tag===6){if(o===null){q=s;try{q.stateNode.nodeValue=g?"":q.memoizedProps}catch(Kt){je(q,q.return,Kt)}}}else if(s.tag===18){if(o===null){q=s;try{var dt=q.stateNode;g?Mb(dt,!0):Mb(q.stateNode,!1)}catch(Kt){je(q,q.return,Kt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}h&4&&(h=n.updateQueue,h!==null&&(o=h.retryQueue,o!==null&&(h.retryQueue=null,Gu(n,o))));break;case 19:li(s,n),ci(n),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,Gu(n,h)));break;case 30:break;case 21:break;default:li(s,n),ci(n)}}function ci(n){var s=n.flags;if(s&2){try{for(var o,h=n.return;h!==null;){if(Ny(h)){o=h;break}h=h.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var g=o.stateNode,b=Df(n);qu(n,b,g);break;case 5:var C=o.stateNode;o.flags&32&&(Us(C,""),o.flags&=-33);var L=Df(n);qu(n,L,C);break;case 3:case 4:var q=o.stateNode.containerInfo,rt=Df(n);Nf(n,rt,q);break;default:throw Error(i(161))}}catch(mt){je(n,n.return,mt)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Uy(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Uy(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function ra(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Ly(n,s.alternate,s),s=s.sibling}function zr(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Ga(4,s,s.return),zr(s);break;case 1:vs(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&My(s,s.return,o),zr(s);break;case 27:gc(s.stateNode);case 26:case 5:vs(s,s.return),zr(s);break;case 22:s.memoizedState===null&&zr(s);break;case 30:zr(s);break;default:zr(s)}n=n.sibling}}function oa(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var h=s.alternate,g=n,b=s,C=b.flags;switch(b.tag){case 0:case 11:case 15:oa(g,b,o),rc(4,b);break;case 1:if(oa(g,b,o),h=b,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(rt){je(h,h.return,rt)}if(h=b,g=h.updateQueue,g!==null){var L=h.stateNode;try{var q=g.shared.hiddenCallbacks;if(q!==null)for(g.shared.hiddenCallbacks=null,g=0;g<q.length;g++)yg(q[g],L)}catch(rt){je(h,h.return,rt)}}o&&C&64&&Ry(b),oc(b,b.return);break;case 27:Oy(b);case 26:case 5:oa(g,b,o),o&&h===null&&C&4&&Dy(b),oc(b,b.return);break;case 12:oa(g,b,o);break;case 31:oa(g,b,o),o&&C&4&&By(g,b);break;case 13:oa(g,b,o),o&&C&4&&Fy(g,b);break;case 22:b.memoizedState===null&&oa(g,b,o),oc(b,b.return);break;case 30:break;default:oa(g,b,o)}s=s.sibling}}function kf(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&$l(o))}function Lf(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&$l(n))}function Ji(n,s,o,h){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)zy(n,s,o,h),s=s.sibling}function zy(n,s,o,h){var g=s.flags;switch(s.tag){case 0:case 11:case 15:Ji(n,s,o,h),g&2048&&rc(9,s);break;case 1:Ji(n,s,o,h);break;case 3:Ji(n,s,o,h),g&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&$l(n)));break;case 12:if(g&2048){Ji(n,s,o,h),n=s.stateNode;try{var b=s.memoizedProps,C=b.id,L=b.onPostCommit;typeof L=="function"&&L(C,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(q){je(s,s.return,q)}}else Ji(n,s,o,h);break;case 31:Ji(n,s,o,h);break;case 13:Ji(n,s,o,h);break;case 23:break;case 22:b=s.stateNode,C=s.alternate,s.memoizedState!==null?b._visibility&2?Ji(n,s,o,h):lc(n,s):b._visibility&2?Ji(n,s,o,h):(b._visibility|=2,qo(n,s,o,h,(s.subtreeFlags&10256)!==0||!1)),g&2048&&kf(C,s);break;case 24:Ji(n,s,o,h),g&2048&&Lf(s.alternate,s);break;default:Ji(n,s,o,h)}}function qo(n,s,o,h,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var b=n,C=s,L=o,q=h,rt=C.flags;switch(C.tag){case 0:case 11:case 15:qo(b,C,L,q,g),rc(8,C);break;case 23:break;case 22:var mt=C.stateNode;C.memoizedState!==null?mt._visibility&2?qo(b,C,L,q,g):lc(b,C):(mt._visibility|=2,qo(b,C,L,q,g)),g&&rt&2048&&kf(C.alternate,C);break;case 24:qo(b,C,L,q,g),g&&rt&2048&&Lf(C.alternate,C);break;default:qo(b,C,L,q,g)}s=s.sibling}}function lc(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,h=s,g=h.flags;switch(h.tag){case 22:lc(o,h),g&2048&&kf(h.alternate,h);break;case 24:lc(o,h),g&2048&&Lf(h.alternate,h);break;default:lc(o,h)}s=s.sibling}}var cc=8192;function Go(n,s,o){if(n.subtreeFlags&cc)for(n=n.child;n!==null;)Hy(n,s,o),n=n.sibling}function Hy(n,s,o){switch(n.tag){case 26:Go(n,s,o),n.flags&cc&&n.memoizedState!==null&&x1(o,Zi,n.memoizedState,n.memoizedProps);break;case 5:Go(n,s,o);break;case 3:case 4:var h=Zi;Zi=sh(n.stateNode.containerInfo),Go(n,s,o),Zi=h;break;case 22:n.memoizedState===null&&(h=n.alternate,h!==null&&h.memoizedState!==null?(h=cc,cc=16777216,Go(n,s,o),cc=h):Go(n,s,o));break;default:Go(n,s,o)}}function qy(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function uc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var h=s[o];Nn=h,Ky(h,n)}qy(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Gy(n),n=n.sibling}function Gy(n){switch(n.tag){case 0:case 11:case 15:uc(n),n.flags&2048&&Ga(9,n,n.return);break;case 3:uc(n);break;case 12:uc(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Ku(n)):uc(n);break;default:uc(n)}}function Ku(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var h=s[o];Nn=h,Ky(h,n)}qy(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Ga(8,s,s.return),Ku(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Ku(s));break;default:Ku(s)}n=n.sibling}}function Ky(n,s){for(;Nn!==null;){var o=Nn;switch(o.tag){case 0:case 11:case 15:Ga(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var h=o.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:$l(o.memoizedState.cache)}if(h=o.child,h!==null)h.return=o,Nn=h;else t:for(o=n;Nn!==null;){h=Nn;var g=h.sibling,b=h.return;if(Py(h),h===o){Nn=null;break t}if(g!==null){g.return=b,Nn=g;break t}Nn=b}}}var Pw={getCacheForType:function(n){var s=In(gn),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return In(gn).controller.signal}},jw=typeof WeakMap=="function"?WeakMap:Map,Ce=0,Ge=null,me=null,ye=0,Pe=0,Ei=null,Ka=!1,Ko=!1,Pf=!1,la=0,an=0,Va=0,Hr=0,jf=0,_i=0,Vo=0,hc=null,ui=null,Bf=!1,Vu=0,Vy=0,$u=1/0,Xu=null,$a=null,Sn=0,Xa=null,$o=null,ca=0,Ff=0,If=null,$y=null,dc=0,Uf=null;function Ci(){return(Ce&2)!==0&&ye!==0?ye&-ye:G.T!==null?Vf():gr()}function Xy(){if(_i===0)if((ye&536870912)===0||xe){var n=wa;wa<<=1,(wa&3932160)===0&&(wa=262144),_i=n}else _i=536870912;return n=Si.current,n!==null&&(n.flags|=32),_i}function hi(n,s,o){(n===Ge&&(Pe===2||Pe===9)||n.cancelPendingCommit!==null)&&(Xo(n,0),Ya(n,ye,_i,!1)),Ni(n,o),((Ce&2)===0||n!==Ge)&&(n===Ge&&((Ce&2)===0&&(Hr|=o),an===4&&Ya(n,ye,_i,!1)),xs(n))}function Yy(n,s,o){if((Ce&6)!==0)throw Error(i(327));var h=!o&&(s&127)===0&&(s&n.expiredLanes)===0||Bs(n,s),g=h?Iw(n,s):Hf(n,s,!0),b=h;do{if(g===0){Ko&&!h&&Ya(n,s,0,!1);break}else{if(o=n.current.alternate,b&&!Bw(o)){g=Hf(n,s,!1),b=!1;continue}if(g===2){if(b=s,n.errorRecoveryDisabledLanes&b)var C=0;else C=n.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){s=C;t:{var L=n;g=hc;var q=L.current.memoizedState.isDehydrated;if(q&&(Xo(L,C).flags|=256),C=Hf(L,C,!1),C!==2){if(Pf&&!q){L.errorRecoveryDisabledLanes|=b,Hr|=b,g=4;break t}b=ui,ui=g,b!==null&&(ui===null?ui=b:ui.push.apply(ui,b))}g=C}if(b=!1,g!==2)continue}}if(g===1){Xo(n,0),Ya(n,s,0,!0);break}t:{switch(h=n,b=g,b){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ya(h,s,_i,!Ka);break t;case 2:ui=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(g=Vu+300-Vn(),10<g)){if(Ya(h,s,_i,!Ka),pr(h,0,!0)!==0)break t;ca=s,h.timeoutHandle=Cb(Qy.bind(null,h,o,ui,Xu,Bf,s,_i,Hr,Vo,Ka,b,"Throttled",-0,0),g);break t}Qy(h,o,ui,Xu,Bf,s,_i,Hr,Vo,Ka,b,null,-0,0)}}break}while(!0);xs(n)}function Qy(n,s,o,h,g,b,C,L,q,rt,mt,bt,lt,dt){if(n.timeoutHandle=-1,bt=s.subtreeFlags,bt&8192||(bt&16785408)===16785408){bt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ri},Hy(s,b,bt);var Kt=(b&62914560)===b?Vu-Vn():(b&4194048)===b?Vy-Vn():0;if(Kt=w1(bt,Kt),Kt!==null){ca=b,n.cancelPendingCommit=Kt(sb.bind(null,n,s,b,o,h,g,C,L,q,mt,bt,null,lt,dt)),Ya(n,b,C,!rt);return}}sb(n,s,b,o,h,g,C,L,q)}function Bw(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var h=0;h<o.length;h++){var g=o[h],b=g.getSnapshot;g=g.value;try{if(!Qn(b(),g))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ya(n,s,o,h){s&=~jf,s&=~Hr,n.suspendedLanes|=s,n.pingedLanes&=~s,h&&(n.warmLanes|=s),h=n.expirationTimes;for(var g=s;0<g;){var b=31-Bt(g),C=1<<b;h[b]=-1,g&=~C}o!==0&&mr(n,o,s)}function Yu(){return(Ce&6)===0?(fc(0),!1):!0}function zf(){if(me!==null){if(Pe===0)var n=me.return;else n=me,Zs=kr=null,nf(n),Fo=null,Yl=0,n=me;for(;n!==null;)Ty(n.alternate,n),n=n.return;me=null}}function Xo(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,i1(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),ca=0,zf(),Ge=n,me=o=Qs(n.current,null),ye=s,Pe=0,Ei=null,Ka=!1,Ko=Bs(n,s),Pf=!1,Vo=_i=jf=Hr=Va=an=0,ui=hc=null,Bf=!1,(s&8)!==0&&(s|=s&32);var h=n.entangledLanes;if(h!==0)for(n=n.entanglements,h&=s;0<h;){var g=31-Bt(h),b=1<<g;s|=n[g],h&=~b}return la=s,se(),o}function Wy(n,s){le=null,G.H=ic,s===Bo||s===Eu?(s=fg(),Pe=3):s===Gd?(s=fg(),Pe=4):Pe=s===vf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Ei=s,me===null&&(an=1,Fu(n,ji(s,n.current)))}function Zy(){var n=Si.current;return n===null?!0:(ye&4194048)===ye?Ui===null:(ye&62914560)===ye||(ye&536870912)!==0?n===Ui:!1}function Jy(){var n=G.H;return G.H=ic,n===null?ic:n}function tb(){var n=G.A;return G.A=Pw,n}function Qu(){an=4,Ka||(ye&4194048)!==ye&&Si.current!==null||(Ko=!0),(Va&134217727)===0&&(Hr&134217727)===0||Ge===null||Ya(Ge,ye,_i,!1)}function Hf(n,s,o){var h=Ce;Ce|=2;var g=Jy(),b=tb();(Ge!==n||ye!==s)&&(Xu=null,Xo(n,s)),s=!1;var C=an;t:do try{if(Pe!==0&&me!==null){var L=me,q=Ei;switch(Pe){case 8:zf(),C=6;break t;case 3:case 2:case 9:case 6:Si.current===null&&(s=!0);var rt=Pe;if(Pe=0,Ei=null,Yo(n,L,q,rt),o&&Ko){C=0;break t}break;default:rt=Pe,Pe=0,Ei=null,Yo(n,L,q,rt)}}Fw(),C=an;break}catch(mt){Wy(n,mt)}while(!0);return s&&n.shellSuspendCounter++,Zs=kr=null,Ce=h,G.H=g,G.A=b,me===null&&(Ge=null,ye=0,se()),C}function Fw(){for(;me!==null;)eb(me)}function Iw(n,s){var o=Ce;Ce|=2;var h=Jy(),g=tb();Ge!==n||ye!==s?(Xu=null,$u=Vn()+500,Xo(n,s)):Ko=Bs(n,s);t:do try{if(Pe!==0&&me!==null){s=me;var b=Ei;e:switch(Pe){case 1:Pe=0,Ei=null,Yo(n,s,b,1);break;case 2:case 9:if(hg(b)){Pe=0,Ei=null,nb(s);break}s=function(){Pe!==2&&Pe!==9||Ge!==n||(Pe=7),xs(n)},b.then(s,s);break t;case 3:Pe=7;break t;case 4:Pe=5;break t;case 7:hg(b)?(Pe=0,Ei=null,nb(s)):(Pe=0,Ei=null,Yo(n,s,b,7));break;case 5:var C=null;switch(me.tag){case 26:C=me.memoizedState;case 5:case 27:var L=me;if(C?zb(C):L.stateNode.complete){Pe=0,Ei=null;var q=L.sibling;if(q!==null)me=q;else{var rt=L.return;rt!==null?(me=rt,Wu(rt)):me=null}break e}}Pe=0,Ei=null,Yo(n,s,b,5);break;case 6:Pe=0,Ei=null,Yo(n,s,b,6);break;case 8:zf(),an=6;break t;default:throw Error(i(462))}}Uw();break}catch(mt){Wy(n,mt)}while(!0);return Zs=kr=null,G.H=h,G.A=g,Ce=o,me!==null?0:(Ge=null,ye=0,se(),an)}function Uw(){for(;me!==null&&!iu();)eb(me)}function eb(n){var s=_y(n.alternate,n,la);n.memoizedProps=n.pendingProps,s===null?Wu(n):me=s}function nb(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=vy(o,s,s.pendingProps,s.type,void 0,ye);break;case 11:s=vy(o,s,s.pendingProps,s.type.render,s.ref,ye);break;case 5:nf(s);default:Ty(o,s),s=me=tg(s,la),s=_y(o,s,la)}n.memoizedProps=n.pendingProps,s===null?Wu(n):me=s}function Yo(n,s,o,h){Zs=kr=null,nf(s),Fo=null,Yl=0;var g=s.return;try{if(Rw(n,g,s,o,ye)){an=1,Fu(n,ji(o,n.current)),me=null;return}}catch(b){if(g!==null)throw me=g,b;an=1,Fu(n,ji(o,n.current)),me=null;return}s.flags&32768?(xe||h===1?n=!0:Ko||(ye&536870912)!==0?n=!1:(Ka=n=!0,(h===2||h===9||h===3||h===6)&&(h=Si.current,h!==null&&h.tag===13&&(h.flags|=16384))),ib(s,n)):Wu(s)}function Wu(n){var s=n;do{if((s.flags&32768)!==0){ib(s,Ka);return}n=s.return;var o=Nw(s.alternate,s,la);if(o!==null){me=o;return}if(s=s.sibling,s!==null){me=s;return}me=s=n}while(s!==null);an===0&&(an=5)}function ib(n,s){do{var o=Ow(n.alternate,n);if(o!==null){o.flags&=32767,me=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){me=n;return}me=n=o}while(n!==null);an=6,me=null}function sb(n,s,o,h,g,b,C,L,q){n.cancelPendingCommit=null;do Zu();while(Sn!==0);if((Ce&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(b=s.lanes|s.childLanes,b|=Xt,Al(n,o,b,C,L,q),n===Ge&&(me=Ge=null,ye=0),$o=s,Xa=n,ca=o,Ff=b,If=g,$y=h,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Gw(xa,function(){return cb(),null})):(n.callbackNode=null,n.callbackPriority=0),h=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||h){h=G.T,G.T=null,g=it.p,it.p=2,C=Ce,Ce|=4;try{kw(n,s,o)}finally{Ce=C,it.p=g,G.T=h}}Sn=1,ab(),rb(),ob()}}function ab(){if(Sn===1){Sn=0;var n=Xa,s=$o,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=G.T,G.T=null;var h=it.p;it.p=2;var g=Ce;Ce|=4;try{Iy(s,n);var b=tp,C=D(n.containerInfo),L=b.focusedElem,q=b.selectionRange;if(C!==L&&L&&L.ownerDocument&&_(L.ownerDocument.documentElement,L)){if(q!==null&&O(L)){var rt=q.start,mt=q.end;if(mt===void 0&&(mt=rt),"selectionStart"in L)L.selectionStart=rt,L.selectionEnd=Math.min(mt,L.value.length);else{var bt=L.ownerDocument||document,lt=bt&&bt.defaultView||window;if(lt.getSelection){var dt=lt.getSelection(),Kt=L.textContent.length,Zt=Math.min(q.start,Kt),ze=q.end===void 0?Zt:Math.min(q.end,Kt);!dt.extend&&Zt>ze&&(C=ze,ze=Zt,Zt=C);var tt=w(L,Zt),W=w(L,ze);if(tt&&W&&(dt.rangeCount!==1||dt.anchorNode!==tt.node||dt.anchorOffset!==tt.offset||dt.focusNode!==W.node||dt.focusOffset!==W.offset)){var at=bt.createRange();at.setStart(tt.node,tt.offset),dt.removeAllRanges(),Zt>ze?(dt.addRange(at),dt.extend(W.node,W.offset)):(at.setEnd(W.node,W.offset),dt.addRange(at))}}}}for(bt=[],dt=L;dt=dt.parentNode;)dt.nodeType===1&&bt.push({element:dt,left:dt.scrollLeft,top:dt.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<bt.length;L++){var yt=bt[L];yt.element.scrollLeft=yt.left,yt.element.scrollTop=yt.top}}uh=!!Jf,tp=Jf=null}finally{Ce=g,it.p=h,G.T=o}}n.current=s,Sn=2}}function rb(){if(Sn===2){Sn=0;var n=Xa,s=$o,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=G.T,G.T=null;var h=it.p;it.p=2;var g=Ce;Ce|=4;try{Ly(n,s.alternate,s)}finally{Ce=g,it.p=h,G.T=o}}Sn=3}}function ob(){if(Sn===4||Sn===3){Sn=0,cr();var n=Xa,s=$o,o=ca,h=$y;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Sn=5:(Sn=0,$o=Xa=null,lb(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&($a=null),Sa(o),s=s.stateNode,Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(rs,s,void 0,(s.current.flags&128)===128)}catch{}if(h!==null){s=G.T,g=it.p,it.p=2,G.T=null;try{for(var b=n.onRecoverableError,C=0;C<h.length;C++){var L=h[C];b(L.value,{componentStack:L.stack})}}finally{G.T=s,it.p=g}}(ca&3)!==0&&Zu(),xs(n),g=n.pendingLanes,(o&261930)!==0&&(g&42)!==0?n===Uf?dc++:(dc=0,Uf=n):dc=0,fc(0)}}function lb(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,$l(s)))}function Zu(){return ab(),rb(),ob(),cb()}function cb(){if(Sn!==5)return!1;var n=Xa,s=Ff;Ff=0;var o=Sa(ca),h=G.T,g=it.p;try{it.p=32>o?32:o,G.T=null,o=If,If=null;var b=Xa,C=ca;if(Sn=0,$o=Xa=null,ca=0,(Ce&6)!==0)throw Error(i(331));var L=Ce;if(Ce|=4,Gy(b.current),zy(b,b.current,C,o),Ce=L,fc(0,!1),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(rs,b)}catch{}return!0}finally{it.p=g,G.T=h,lb(n,s)}}function ub(n,s,o){s=ji(o,s),s=bf(n.stateNode,s,2),n=za(n,s,2),n!==null&&(Ni(n,2),xs(n))}function je(n,s,o){if(n.tag===3)ub(n,n,o);else for(;s!==null;){if(s.tag===3){ub(s,n,o);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&($a===null||!$a.has(h))){n=ji(o,n),o=hy(2),h=za(s,o,2),h!==null&&(dy(o,h,s,n),Ni(h,2),xs(h));break}}s=s.return}}function qf(n,s,o){var h=n.pingCache;if(h===null){h=n.pingCache=new jw;var g=new Set;h.set(s,g)}else g=h.get(s),g===void 0&&(g=new Set,h.set(s,g));g.has(o)||(Pf=!0,g.add(o),n=zw.bind(null,n,s,o),s.then(n,n))}function zw(n,s,o){var h=n.pingCache;h!==null&&h.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Ge===n&&(ye&o)===o&&(an===4||an===3&&(ye&62914560)===ye&&300>Vn()-Vu?(Ce&2)===0&&Xo(n,0):jf|=o,Vo===ye&&(Vo=0)),xs(n)}function hb(n,s){s===0&&(s=su()),n=ke(n,s),n!==null&&(Ni(n,s),xs(n))}function Hw(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),hb(n,o)}function qw(n,s){var o=0;switch(n.tag){case 31:case 13:var h=n.stateNode,g=n.memoizedState;g!==null&&(o=g.retryLane);break;case 19:h=n.stateNode;break;case 22:h=n.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(s),hb(n,o)}function Gw(n,s){return nn(n,s)}var Ju=null,Qo=null,Gf=!1,th=!1,Kf=!1,Qa=0;function xs(n){n!==Qo&&n.next===null&&(Qo===null?Ju=Qo=n:Qo=Qo.next=n),th=!0,Gf||(Gf=!0,Vw())}function fc(n,s){if(!Kf&&th){Kf=!0;do for(var o=!1,h=Ju;h!==null;){if(n!==0){var g=h.pendingLanes;if(g===0)var b=0;else{var C=h.suspendedLanes,L=h.pingedLanes;b=(1<<31-Bt(42|n)+1)-1,b&=g&~(C&~L),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(o=!0,mb(h,b))}else b=ye,b=pr(h,h===Ge?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(b&3)===0||Bs(h,b)||(o=!0,mb(h,b));h=h.next}while(o);Kf=!1}}function Kw(){db()}function db(){th=Gf=!1;var n=0;Qa!==0&&n1()&&(n=Qa);for(var s=Vn(),o=null,h=Ju;h!==null;){var g=h.next,b=fb(h,s);b===0?(h.next=null,o===null?Ju=g:o.next=g,g===null&&(Qo=o)):(o=h,(n!==0||(b&3)!==0)&&(th=!0)),h=g}Sn!==0&&Sn!==5||fc(n),Qa!==0&&(Qa=0)}function fb(n,s){for(var o=n.suspendedLanes,h=n.pingedLanes,g=n.expirationTimes,b=n.pendingLanes&-62914561;0<b;){var C=31-Bt(b),L=1<<C,q=g[C];q===-1?((L&o)===0||(L&h)!==0)&&(g[C]=Sd(L,s)):q<=s&&(n.expiredLanes|=L),b&=~L}if(s=Ge,o=ye,o=pr(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),h=n.callbackNode,o===0||n===s&&(Pe===2||Pe===9)||n.cancelPendingCommit!==null)return h!==null&&h!==null&&Tn(h),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Bs(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(h!==null&&Tn(h),Sa(o)){case 2:case 8:o=as;break;case 32:o=xa;break;case 268435456:o=ro;break;default:o=xa}return h=pb.bind(null,n),o=nn(o,h),n.callbackPriority=s,n.callbackNode=o,s}return h!==null&&h!==null&&Tn(h),n.callbackPriority=2,n.callbackNode=null,2}function pb(n,s){if(Sn!==0&&Sn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Zu()&&n.callbackNode!==o)return null;var h=ye;return h=pr(n,n===Ge?h:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),h===0?null:(Yy(n,h,s),fb(n,Vn()),n.callbackNode!=null&&n.callbackNode===o?pb.bind(null,n):null)}function mb(n,s){if(Zu())return null;Yy(n,s,!0)}function Vw(){s1(function(){(Ce&6)!==0?nn($n,Kw):db()})}function Vf(){if(Qa===0){var n=Po;n===0&&(n=kt,kt<<=1,(kt&261888)===0&&(kt=256)),Qa=n}return Qa}function gb(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Wi(""+n)}function yb(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function $w(n,s,o,h,g){if(s==="submit"&&o&&o.stateNode===g){var b=gb((g[cn]||null).action),C=h.submitter;C&&(s=(s=C[cn]||null)?gb(s.formAction):C.getAttribute("formAction"),s!==null&&(b=s,C=null));var L=new mo("action","action",null,h,g);n.push({event:L,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Qa!==0){var q=C?yb(g,C):new FormData(g);df(o,{pending:!0,data:q,method:g.method,action:b},null,q)}}else typeof b=="function"&&(L.preventDefault(),q=C?yb(g,C):new FormData(g),df(o,{pending:!0,data:q,method:g.method,action:b},b,q))},currentTarget:g}]})}}for(var $f=0;$f<Lt.length;$f++){var Xf=Lt[$f],Xw=Xf.toLowerCase(),Yw=Xf[0].toUpperCase()+Xf.slice(1);_t(Xw,"on"+Yw)}_t(ot,"onAnimationEnd"),_t(nt,"onAnimationIteration"),_t(pt,"onAnimationStart"),_t("dblclick","onDoubleClick"),_t("focusin","onFocus"),_t("focusout","onBlur"),_t(St,"onTransitionRun"),_t(Dt,"onTransitionStart"),_t(Nt,"onTransitionCancel"),_t(Et,"onTransitionEnd"),hs("onMouseEnter",["mouseout","mouseover"]),hs("onMouseLeave",["mouseout","mouseover"]),hs("onPointerEnter",["pointerout","pointerover"]),hs("onPointerLeave",["pointerout","pointerover"]),Yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pc));function bb(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var h=n[o],g=h.event;h=h.listeners;t:{var b=void 0;if(s)for(var C=h.length-1;0<=C;C--){var L=h[C],q=L.instance,rt=L.currentTarget;if(L=L.listener,q!==b&&g.isPropagationStopped())break t;b=L,g.currentTarget=rt;try{b(g)}catch(mt){It(mt)}g.currentTarget=null,b=q}else for(C=0;C<h.length;C++){if(L=h[C],q=L.instance,rt=L.currentTarget,L=L.listener,q!==b&&g.isPropagationStopped())break t;b=L,g.currentTarget=rt;try{b(g)}catch(mt){It(mt)}g.currentTarget=null,b=q}}}}function ge(n,s){var o=s[Aa];o===void 0&&(o=s[Aa]=new Set);var h=n+"__bubble";o.has(h)||(vb(s,n,2,!1),o.add(h))}function Yf(n,s,o){var h=0;s&&(h|=4),vb(o,n,h,s)}var eh="_reactListening"+Math.random().toString(36).slice(2);function Qf(n){if(!n[eh]){n[eh]=!0,Fs.forEach(function(o){o!=="selectionchange"&&(Qw.has(o)||Yf(o,!1,n),Yf(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[eh]||(s[eh]=!0,Yf("selectionchange",!1,s))}}function vb(n,s,o,h){switch(Xb(s)){case 2:var g=E1;break;case 8:g=_1;break;default:g=hp}o=g.bind(null,s,o,n),g=void 0,!Nl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),h?g!==void 0?n.addEventListener(s,o,{capture:!0,passive:g}):n.addEventListener(s,o,!0):g!==void 0?n.addEventListener(s,o,{passive:g}):n.addEventListener(s,o,!1)}function Wf(n,s,o,h,g){var b=h;if((s&1)===0&&(s&2)===0&&h!==null)t:for(;;){if(h===null)return;var C=h.tag;if(C===3||C===4){var L=h.stateNode.containerInfo;if(L===g)break;if(C===4)for(C=h.return;C!==null;){var q=C.tag;if((q===3||q===4)&&C.stateNode.containerInfo===g)return;C=C.return}for(;L!==null;){if(C=us(L),C===null)return;if(q=C.tag,q===5||q===6||q===26||q===27){h=b=C;continue t}L=L.parentNode}}h=h.return}_a(function(){var rt=b,mt=fo(o),bt=[];t:{var lt=Ft.get(n);if(lt!==void 0){var dt=mo,Kt=n;switch(n){case"keypress":if(Ra(o)===0)break t;case"keydown":case"keyup":dt=So;break;case"focusin":Kt="focus",dt=Ma;break;case"focusout":Kt="blur",dt=Ma;break;case"beforeblur":case"afterblur":dt=Ma;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":dt=bo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":dt=lu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":dt=Fl;break;case ot:case nt:case pt:dt=cu;break;case Et:dt=Il;break;case"scroll":case"scrollend":dt=go;break;case"wheel":dt=Eo;break;case"copy":case"cut":case"paste":dt=Da;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":dt=Bl;break;case"toggle":case"beforetoggle":dt=du}var Zt=(s&4)!==0,ze=!Zt&&(n==="scroll"||n==="scrollend"),tt=Zt?lt!==null?lt+"Capture":null:lt;Zt=[];for(var W=rt,at;W!==null;){var yt=W;if(at=yt.stateNode,yt=yt.tag,yt!==5&&yt!==26&&yt!==27||at===null||tt===null||(yt=qs(W,tt),yt!=null&&Zt.push(mc(W,yt,at))),ze)break;W=W.return}0<Zt.length&&(lt=new dt(lt,Kt,null,o,mt),bt.push({event:lt,listeners:Zt}))}}if((s&7)===0){t:{if(lt=n==="mouseover"||n==="pointerover",dt=n==="mouseout"||n==="pointerout",lt&&o!==ki&&(Kt=o.relatedTarget||o.fromElement)&&(us(Kt)||Kt[ti]))break t;if((dt||lt)&&(lt=mt.window===mt?mt:(lt=mt.ownerDocument)?lt.defaultView||lt.parentWindow:window,dt?(Kt=o.relatedTarget||o.toElement,dt=rt,Kt=Kt?us(Kt):null,Kt!==null&&(ze=l(Kt),Zt=Kt.tag,Kt!==ze||Zt!==5&&Zt!==27&&Zt!==6)&&(Kt=null)):(dt=null,Kt=rt),dt!==Kt)){if(Zt=bo,yt="onMouseLeave",tt="onMouseEnter",W="mouse",(n==="pointerout"||n==="pointerover")&&(Zt=Bl,yt="onPointerLeave",tt="onPointerEnter",W="pointer"),ze=dt==null?lt:vi(dt),at=Kt==null?lt:vi(Kt),lt=new Zt(yt,W+"leave",dt,o,mt),lt.target=ze,lt.relatedTarget=at,yt=null,us(mt)===rt&&(Zt=new Zt(tt,W+"enter",Kt,o,mt),Zt.target=at,Zt.relatedTarget=ze,yt=Zt),ze=yt,dt&&Kt)e:{for(Zt=Ww,tt=dt,W=Kt,at=0,yt=tt;yt;yt=Zt(yt))at++;yt=0;for(var Yt=W;Yt;Yt=Zt(Yt))yt++;for(;0<at-yt;)tt=Zt(tt),at--;for(;0<yt-at;)W=Zt(W),yt--;for(;at--;){if(tt===W||W!==null&&tt===W.alternate){Zt=tt;break e}tt=Zt(tt),W=Zt(W)}Zt=null}else Zt=null;dt!==null&&xb(bt,lt,dt,Zt,!1),Kt!==null&&ze!==null&&xb(bt,ze,Kt,Zt,!0)}}t:{if(lt=rt?vi(rt):window,dt=lt.nodeName&&lt.nodeName.toLowerCase(),dt==="select"||dt==="input"&&lt.type==="file")var Se=Dr;else if(To(lt))if(Pi)Se=ka;else{Se=Ys;var $t=bu}else dt=lt.nodeName,!dt||dt.toLowerCase()!=="input"||lt.type!=="checkbox"&&lt.type!=="radio"?rt&&Dl(rt.elementType)&&(Se=Dr):Se=Gl;if(Se&&(Se=Se(n,rt))){ql(bt,Se,o,mt);break t}$t&&$t(n,lt,rt),n==="focusout"&&rt&&lt.type==="number"&&rt.memoizedProps.value!=null&&Sr(lt,"number",lt.value)}switch($t=rt?vi(rt):window,n){case"focusin":(To($t)||$t.contentEditable==="true")&&(j=$t,V=rt,et=null);break;case"focusout":et=V=j=null;break;case"mousedown":$=!0;break;case"contextmenu":case"mouseup":case"dragend":$=!1,K(bt,o,mt);break;case"selectionchange":if(P)break;case"keydown":case"keyup":K(bt,o,mt)}var ce;if(Rr)t:{switch(n){case"compositionstart":var be="onCompositionStart";break t;case"compositionend":be="onCompositionEnd";break t;case"compositionupdate":be="onCompositionUpdate";break t}be=void 0}else $s?Hl(n,o)&&(be="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(be="onCompositionStart");be&&(_o&&o.locale!=="ko"&&($s||be!=="onCompositionStart"?be==="onCompositionEnd"&&$s&&(ce=Ta()):(Li=mt,po="value"in Li?Li.value:Li.textContent,$s=!0)),$t=nh(rt,be),0<$t.length&&(be=new wo(be,n,null,o,mt),bt.push({event:be,listeners:$t}),ce?be.data=ce:(ce=pu(o),ce!==null&&(be.data=ce)))),(ce=Rd?mu(n,o):Md(n,o))&&(be=nh(rt,"onBeforeInput"),0<be.length&&($t=new wo("onBeforeInput","beforeinput",null,o,mt),bt.push({event:$t,listeners:be}),$t.data=ce)),$w(bt,n,rt,o,mt)}bb(bt,s)})}function mc(n,s,o){return{instance:n,listener:s,currentTarget:o}}function nh(n,s){for(var o=s+"Capture",h=[];n!==null;){var g=n,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=qs(n,o),g!=null&&h.unshift(mc(n,g,b)),g=qs(n,s),g!=null&&h.push(mc(n,g,b))),n.tag===3)return h;n=n.return}return[]}function Ww(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function xb(n,s,o,h,g){for(var b=s._reactName,C=[];o!==null&&o!==h;){var L=o,q=L.alternate,rt=L.stateNode;if(L=L.tag,q!==null&&q===h)break;L!==5&&L!==26&&L!==27||rt===null||(q=rt,g?(rt=qs(o,b),rt!=null&&C.unshift(mc(o,rt,q))):g||(rt=qs(o,b),rt!=null&&C.push(mc(o,rt,q)))),o=o.return}C.length!==0&&n.push({event:s,listeners:C})}var Zw=/\r\n?/g,Jw=/\u0000|\uFFFD/g;function wb(n){return(typeof n=="string"?n:""+n).replace(Zw,`
`).replace(Jw,"")}function Sb(n,s){return s=wb(s),wb(n)===s}function Ue(n,s,o,h,g,b){switch(o){case"children":typeof h=="string"?s==="body"||s==="textarea"&&h===""||Us(n,h):(typeof h=="number"||typeof h=="bigint")&&s!=="body"&&Us(n,""+h);break;case"className":xr(n,"class",h);break;case"tabIndex":xr(n,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":xr(n,o,h);break;case"style":Ml(n,h,b);break;case"data":if(s!=="object"){xr(n,"data",h);break}case"src":case"href":if(h===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){n.removeAttribute(o);break}h=Wi(""+h),n.setAttribute(o,h);break;case"action":case"formAction":if(typeof h=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(o==="formAction"?(s!=="input"&&Ue(n,s,"name",g.name,g,null),Ue(n,s,"formEncType",g.formEncType,g,null),Ue(n,s,"formMethod",g.formMethod,g,null),Ue(n,s,"formTarget",g.formTarget,g,null)):(Ue(n,s,"encType",g.encType,g,null),Ue(n,s,"method",g.method,g,null),Ue(n,s,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){n.removeAttribute(o);break}h=Wi(""+h),n.setAttribute(o,h);break;case"onClick":h!=null&&(n.onclick=ri);break;case"onScroll":h!=null&&ge("scroll",n);break;case"onScrollEnd":h!=null&&ge("scrollend",n);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(o=h.__html,o!=null){if(g.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":n.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){n.removeAttribute("xlink:href");break}o=Wi(""+h),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(o,""+h):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":h===!0?n.setAttribute(o,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(o,h):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?n.setAttribute(o,h):n.removeAttribute(o);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?n.removeAttribute(o):n.setAttribute(o,h);break;case"popover":ge("beforetoggle",n),ge("toggle",n),ue(n,"popover",h);break;case"xlinkActuate":Oi(n,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Oi(n,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Oi(n,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Oi(n,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Oi(n,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Oi(n,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Oi(n,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Oi(n,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Oi(n,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":ue(n,"is",h);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=_d.get(o)||o,ue(n,o,h))}}function Zf(n,s,o,h,g,b){switch(o){case"style":Ml(n,h,b);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(o=h.__html,o!=null){if(g.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof h=="string"?Us(n,h):(typeof h=="number"||typeof h=="bigint")&&Us(n,""+h);break;case"onScroll":h!=null&&ge("scroll",n);break;case"onScrollEnd":h!=null&&ge("scrollend",n);break;case"onClick":h!=null&&(n.onclick=ri);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!br.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(g=o.endsWith("Capture"),s=o.slice(2,g?o.length-7:void 0),b=n[cn]||null,b=b!=null?b[o]:null,typeof b=="function"&&n.removeEventListener(s,b,g),typeof h=="function")){typeof b!="function"&&b!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,h,g);break t}o in n?n[o]=h:h===!0?n.setAttribute(o,""):ue(n,o,h)}}}function zn(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ge("error",n),ge("load",n);var h=!1,g=!1,b;for(b in o)if(o.hasOwnProperty(b)){var C=o[b];if(C!=null)switch(b){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ue(n,s,b,C,o,null)}}g&&Ue(n,s,"srcSet",o.srcSet,o,null),h&&Ue(n,s,"src",o.src,o,null);return;case"input":ge("invalid",n);var L=b=C=g=null,q=null,rt=null;for(h in o)if(o.hasOwnProperty(h)){var mt=o[h];if(mt!=null)switch(h){case"name":g=mt;break;case"type":C=mt;break;case"checked":q=mt;break;case"defaultChecked":rt=mt;break;case"value":b=mt;break;case"defaultValue":L=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(i(137,s));break;default:Ue(n,s,h,mt,o,null)}}ho(n,b,L,q,rt,C,g,!1);return;case"select":ge("invalid",n),h=C=b=null;for(g in o)if(o.hasOwnProperty(g)&&(L=o[g],L!=null))switch(g){case"value":b=L;break;case"defaultValue":C=L;break;case"multiple":h=L;default:Ue(n,s,g,L,o,null)}s=b,o=C,n.multiple=!!h,s!=null?Qi(n,!!h,s,!1):o!=null&&Qi(n,!!h,o,!0);return;case"textarea":ge("invalid",n),b=g=h=null;for(C in o)if(o.hasOwnProperty(C)&&(L=o[C],L!=null))switch(C){case"value":h=L;break;case"defaultValue":g=L;break;case"children":b=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(i(91));break;default:Ue(n,s,C,L,o,null)}Ar(n,h,g,b);return;case"option":for(q in o)o.hasOwnProperty(q)&&(h=o[q],h!=null)&&(q==="selected"?n.selected=h&&typeof h!="function"&&typeof h!="symbol":Ue(n,s,q,h,o,null));return;case"dialog":ge("beforetoggle",n),ge("toggle",n),ge("cancel",n),ge("close",n);break;case"iframe":case"object":ge("load",n);break;case"video":case"audio":for(h=0;h<pc.length;h++)ge(pc[h],n);break;case"image":ge("error",n),ge("load",n);break;case"details":ge("toggle",n);break;case"embed":case"source":case"link":ge("error",n),ge("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(rt in o)if(o.hasOwnProperty(rt)&&(h=o[rt],h!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ue(n,s,rt,h,o,null)}return;default:if(Dl(s)){for(mt in o)o.hasOwnProperty(mt)&&(h=o[mt],h!==void 0&&Zf(n,s,mt,h,o,void 0));return}}for(L in o)o.hasOwnProperty(L)&&(h=o[L],h!=null&&Ue(n,s,L,h,o,null))}function t1(n,s,o,h){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,C=null,L=null,q=null,rt=null,mt=null;for(dt in o){var bt=o[dt];if(o.hasOwnProperty(dt)&&bt!=null)switch(dt){case"checked":break;case"value":break;case"defaultValue":q=bt;default:h.hasOwnProperty(dt)||Ue(n,s,dt,null,h,bt)}}for(var lt in h){var dt=h[lt];if(bt=o[lt],h.hasOwnProperty(lt)&&(dt!=null||bt!=null))switch(lt){case"type":b=dt;break;case"name":g=dt;break;case"checked":rt=dt;break;case"defaultChecked":mt=dt;break;case"value":C=dt;break;case"defaultValue":L=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(i(137,s));break;default:dt!==bt&&Ue(n,s,lt,dt,h,bt)}}ds(n,C,L,q,rt,mt,b,g);return;case"select":dt=C=L=lt=null;for(b in o)if(q=o[b],o.hasOwnProperty(b)&&q!=null)switch(b){case"value":break;case"multiple":dt=q;default:h.hasOwnProperty(b)||Ue(n,s,b,null,h,q)}for(g in h)if(b=h[g],q=o[g],h.hasOwnProperty(g)&&(b!=null||q!=null))switch(g){case"value":lt=b;break;case"defaultValue":L=b;break;case"multiple":C=b;default:b!==q&&Ue(n,s,g,b,h,q)}s=L,o=C,h=dt,lt!=null?Qi(n,!!o,lt,!1):!!h!=!!o&&(s!=null?Qi(n,!!o,s,!0):Qi(n,!!o,o?[]:"",!1));return;case"textarea":dt=lt=null;for(L in o)if(g=o[L],o.hasOwnProperty(L)&&g!=null&&!h.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:Ue(n,s,L,null,h,g)}for(C in h)if(g=h[C],b=o[C],h.hasOwnProperty(C)&&(g!=null||b!=null))switch(C){case"value":lt=g;break;case"defaultValue":dt=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==b&&Ue(n,s,C,g,h,b)}Rl(n,lt,dt);return;case"option":for(var Kt in o)lt=o[Kt],o.hasOwnProperty(Kt)&&lt!=null&&!h.hasOwnProperty(Kt)&&(Kt==="selected"?n.selected=!1:Ue(n,s,Kt,null,h,lt));for(q in h)lt=h[q],dt=o[q],h.hasOwnProperty(q)&&lt!==dt&&(lt!=null||dt!=null)&&(q==="selected"?n.selected=lt&&typeof lt!="function"&&typeof lt!="symbol":Ue(n,s,q,lt,h,dt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Zt in o)lt=o[Zt],o.hasOwnProperty(Zt)&&lt!=null&&!h.hasOwnProperty(Zt)&&Ue(n,s,Zt,null,h,lt);for(rt in h)if(lt=h[rt],dt=o[rt],h.hasOwnProperty(rt)&&lt!==dt&&(lt!=null||dt!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(i(137,s));break;default:Ue(n,s,rt,lt,h,dt)}return;default:if(Dl(s)){for(var ze in o)lt=o[ze],o.hasOwnProperty(ze)&&lt!==void 0&&!h.hasOwnProperty(ze)&&Zf(n,s,ze,void 0,h,lt);for(mt in h)lt=h[mt],dt=o[mt],!h.hasOwnProperty(mt)||lt===dt||lt===void 0&&dt===void 0||Zf(n,s,mt,lt,h,dt);return}}for(var tt in o)lt=o[tt],o.hasOwnProperty(tt)&&lt!=null&&!h.hasOwnProperty(tt)&&Ue(n,s,tt,null,h,lt);for(bt in h)lt=h[bt],dt=o[bt],!h.hasOwnProperty(bt)||lt===dt||lt==null&&dt==null||Ue(n,s,bt,lt,h,dt)}function Ab(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function e1(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),h=0;h<o.length;h++){var g=o[h],b=g.transferSize,C=g.initiatorType,L=g.duration;if(b&&L&&Ab(C)){for(C=0,L=g.responseEnd,h+=1;h<o.length;h++){var q=o[h],rt=q.startTime;if(rt>L)break;var mt=q.transferSize,bt=q.initiatorType;mt&&Ab(bt)&&(q=q.responseEnd,C+=mt*(q<L?1:(L-rt)/(q-rt)))}if(--h,s+=8*(b+C)/(g.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Jf=null,tp=null;function ih(n){return n.nodeType===9?n:n.ownerDocument}function Eb(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _b(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function ep(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var np=null;function n1(){var n=window.event;return n&&n.type==="popstate"?n===np?!1:(np=n,!0):(np=null,!1)}var Cb=typeof setTimeout=="function"?setTimeout:void 0,i1=typeof clearTimeout=="function"?clearTimeout:void 0,Tb=typeof Promise=="function"?Promise:void 0,s1=typeof queueMicrotask=="function"?queueMicrotask:typeof Tb<"u"?function(n){return Tb.resolve(null).then(n).catch(a1)}:Cb;function a1(n){setTimeout(function(){throw n})}function Wa(n){return n==="head"}function Rb(n,s){var o=s,h=0;do{var g=o.nextSibling;if(n.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"||o==="/&"){if(h===0){n.removeChild(g),tl(s);return}h--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")h++;else if(o==="html")gc(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,gc(o);for(var b=o.firstChild;b;){var C=b.nextSibling,L=b.nodeName;b[bi]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&b.rel.toLowerCase()==="stylesheet"||o.removeChild(b),b=C}}else o==="body"&&gc(n.ownerDocument.body);o=g}while(o);tl(s)}function Mb(n,s){var o=n;n=0;do{var h=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=h}while(o)}function ip(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":ip(o),co(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function r1(n,s,o,h){for(;n.nodeType===1;){var g=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!h&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(h){if(!n[bi])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(b=n.getAttribute("rel"),b==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(b!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(b=n.getAttribute("src"),(b!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===b)return n}else return n;if(n=zi(n.nextSibling),n===null)break}return null}function o1(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=zi(n.nextSibling),n===null))return null;return n}function Db(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=zi(n.nextSibling),n===null))return null;return n}function sp(n){return n.data==="$?"||n.data==="$~"}function ap(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function l1(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var h=function(){s(),o.removeEventListener("DOMContentLoaded",h)};o.addEventListener("DOMContentLoaded",h),n._reactRetry=h}}function zi(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var rp=null;function Nb(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return zi(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function Ob(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function kb(n,s,o){switch(s=ih(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function gc(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);co(n)}var Hi=new Map,Lb=new Set;function sh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ua=it.d;it.d={f:c1,r:u1,D:h1,C:d1,L:f1,m:p1,X:g1,S:m1,M:y1};function c1(){var n=ua.f(),s=Yu();return n||s}function u1(n){var s=Be(n);s!==null&&s.tag===5&&s.type==="form"?Wg(s):ua.r(n)}var Wo=typeof document>"u"?null:document;function Pb(n,s,o){var h=Wo;if(h&&typeof s=="string"&&s){var g=Rn(s);g='link[rel="'+n+'"][href="'+g+'"]',typeof o=="string"&&(g+='[crossorigin="'+o+'"]'),Lb.has(g)||(Lb.add(g),n={rel:n,crossOrigin:o,href:s},h.querySelector(g)===null&&(s=h.createElement("link"),zn(s,"link",n),un(s),h.head.appendChild(s)))}}function h1(n){ua.D(n),Pb("dns-prefetch",n,null)}function d1(n,s){ua.C(n,s),Pb("preconnect",n,s)}function f1(n,s,o){ua.L(n,s,o);var h=Wo;if(h&&n&&s){var g='link[rel="preload"][as="'+Rn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(g+='[imagesrcset="'+Rn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(g+='[imagesizes="'+Rn(o.imageSizes)+'"]')):g+='[href="'+Rn(n)+'"]';var b=g;switch(s){case"style":b=Zo(n);break;case"script":b=Jo(n)}Hi.has(b)||(n=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Hi.set(b,n),h.querySelector(g)!==null||s==="style"&&h.querySelector(yc(b))||s==="script"&&h.querySelector(bc(b))||(s=h.createElement("link"),zn(s,"link",n),un(s),h.head.appendChild(s)))}}function p1(n,s){ua.m(n,s);var o=Wo;if(o&&n){var h=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+Rn(h)+'"][href="'+Rn(n)+'"]',b=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Jo(n)}if(!Hi.has(b)&&(n=y({rel:"modulepreload",href:n},s),Hi.set(b,n),o.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(bc(b)))return}h=o.createElement("link"),zn(h,"link",n),un(h),o.head.appendChild(h)}}}function m1(n,s,o){ua.S(n,s,o);var h=Wo;if(h&&n){var g=Xn(h).hoistableStyles,b=Zo(n);s=s||"default";var C=g.get(b);if(!C){var L={loading:0,preload:null};if(C=h.querySelector(yc(b)))L.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Hi.get(b))&&op(n,o);var q=C=h.createElement("link");un(q),zn(q,"link",n),q._p=new Promise(function(rt,mt){q.onload=rt,q.onerror=mt}),q.addEventListener("load",function(){L.loading|=1}),q.addEventListener("error",function(){L.loading|=2}),L.loading|=4,ah(C,s,h)}C={type:"stylesheet",instance:C,count:1,state:L},g.set(b,C)}}}function g1(n,s){ua.X(n,s);var o=Wo;if(o&&n){var h=Xn(o).hoistableScripts,g=Jo(n),b=h.get(g);b||(b=o.querySelector(bc(g)),b||(n=y({src:n,async:!0},s),(s=Hi.get(g))&&lp(n,s),b=o.createElement("script"),un(b),zn(b,"link",n),o.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(g,b))}}function y1(n,s){ua.M(n,s);var o=Wo;if(o&&n){var h=Xn(o).hoistableScripts,g=Jo(n),b=h.get(g);b||(b=o.querySelector(bc(g)),b||(n=y({src:n,async:!0,type:"module"},s),(s=Hi.get(g))&&lp(n,s),b=o.createElement("script"),un(b),zn(b,"link",n),o.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(g,b))}}function jb(n,s,o,h){var g=(g=qt.current)?sh(g):null;if(!g)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Zo(o.href),o=Xn(g).hoistableStyles,h=o.get(s),h||(h={type:"style",instance:null,count:0,state:null},o.set(s,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Zo(o.href);var b=Xn(g).hoistableStyles,C=b.get(n);if(C||(g=g.ownerDocument||g,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(n,C),(b=g.querySelector(yc(n)))&&!b._p&&(C.instance=b,C.state.loading=5),Hi.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Hi.set(n,o),b||b1(g,n,o,C.state))),s&&h===null)throw Error(i(528,""));return C}if(s&&h!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Jo(o),o=Xn(g).hoistableScripts,h=o.get(s),h||(h={type:"script",instance:null,count:0,state:null},o.set(s,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Zo(n){return'href="'+Rn(n)+'"'}function yc(n){return'link[rel="stylesheet"]['+n+"]"}function Bb(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function b1(n,s,o,h){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?h.loading=1:(s=n.createElement("link"),h.preload=s,s.addEventListener("load",function(){return h.loading|=1}),s.addEventListener("error",function(){return h.loading|=2}),zn(s,"link",o),un(s),n.head.appendChild(s))}function Jo(n){return'[src="'+Rn(n)+'"]'}function bc(n){return"script[async]"+n}function Fb(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var h=n.querySelector('style[data-href~="'+Rn(o.href)+'"]');if(h)return s.instance=h,un(h),h;var g=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return h=(n.ownerDocument||n).createElement("style"),un(h),zn(h,"style",g),ah(h,o.precedence,n),s.instance=h;case"stylesheet":g=Zo(o.href);var b=n.querySelector(yc(g));if(b)return s.state.loading|=4,s.instance=b,un(b),b;h=Bb(o),(g=Hi.get(g))&&op(h,g),b=(n.ownerDocument||n).createElement("link"),un(b);var C=b;return C._p=new Promise(function(L,q){C.onload=L,C.onerror=q}),zn(b,"link",h),s.state.loading|=4,ah(b,o.precedence,n),s.instance=b;case"script":return b=Jo(o.src),(g=n.querySelector(bc(b)))?(s.instance=g,un(g),g):(h=o,(g=Hi.get(b))&&(h=y({},o),lp(h,g)),n=n.ownerDocument||n,g=n.createElement("script"),un(g),zn(g,"link",h),n.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(h=s.instance,s.state.loading|=4,ah(h,o.precedence,n));return s.instance}function ah(n,s,o){for(var h=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,b=g,C=0;C<h.length;C++){var L=h[C];if(L.dataset.precedence===s)b=L;else if(b!==g)break}b?b.parentNode.insertBefore(n,b.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function op(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function lp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var rh=null;function Ib(n,s,o){if(rh===null){var h=new Map,g=rh=new Map;g.set(o,h)}else g=rh,h=g.get(o),h||(h=new Map,g.set(o,h));if(h.has(n))return h;for(h.set(n,null),o=o.getElementsByTagName(n),g=0;g<o.length;g++){var b=o[g];if(!(b[bi]||b[Ke]||n==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var C=b.getAttribute(s)||"";C=n+C;var L=h.get(C);L?L.push(b):h.set(C,[b])}}return h}function Ub(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function v1(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(n=s.disabled,typeof s.precedence=="string"&&n==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function zb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function x1(n,s,o,h){if(o.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=Zo(h.href),b=s.querySelector(yc(g));if(b){s=b._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=oh.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=b,un(b);return}b=s.ownerDocument||s,h=Bb(h),(g=Hi.get(g))&&op(h,g),b=b.createElement("link"),un(b);var C=b;C._p=new Promise(function(L,q){C.onload=L,C.onerror=q}),zn(b,"link",h),o.instance=b}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=oh.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var cp=0;function w1(n,s){return n.stylesheets&&n.count===0&&ch(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var h=setTimeout(function(){if(n.stylesheets&&ch(n,n.stylesheets),n.unsuspend){var b=n.unsuspend;n.unsuspend=null,b()}},6e4+s);0<n.imgBytes&&cp===0&&(cp=62500*e1());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&ch(n,n.stylesheets),n.unsuspend)){var b=n.unsuspend;n.unsuspend=null,b()}},(n.imgBytes>cp?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(h),clearTimeout(g)}}:null}function oh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ch(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var lh=null;function ch(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,lh=new Map,s.forEach(S1,n),lh=null,oh.call(n))}function S1(n,s){if(!(s.state.loading&4)){var o=lh.get(n);if(o)var h=o.get(null);else{o=new Map,lh.set(n,o);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var C=g[b];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(o.set(C.dataset.precedence,C),h=C)}h&&o.set(null,h)}g=s.instance,C=g.getAttribute("data-precedence"),b=o.get(C)||h,b===h&&o.set(null,g),o.set(C,g),this.count++,h=oh.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),b?b.parentNode.insertBefore(g,b.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),s.state.loading|=4}}var vc={$$typeof:N,Provider:null,Consumer:null,_currentValue:vt,_currentValue2:vt,_threadCount:0};function A1(n,s,o,h,g,b,C,L,q){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=os(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=os(0),this.hiddenUpdates=os(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function Hb(n,s,o,h,g,b,C,L,q,rt,mt,bt){return n=new A1(n,s,o,C,q,rt,mt,bt,L),s=1,b===!0&&(s|=24),b=wi(3,null,null,s),n.current=b,b.stateNode=n,s=zd(),s.refCount++,n.pooledCache=s,s.refCount++,b.memoizedState={element:h,isDehydrated:o,cache:s},Kd(b),n}function qb(n){return n?(n=Do,n):Do}function Gb(n,s,o,h,g,b){g=qb(g),h.context===null?h.context=g:h.pendingContext=g,h=Ua(s),h.payload={element:o},b=b===void 0?null:b,b!==null&&(h.callback=b),o=za(n,h,s),o!==null&&(hi(o,n,s),Wl(o,n,s))}function Kb(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function up(n,s){Kb(n,s),(n=n.alternate)&&Kb(n,s)}function Vb(n){if(n.tag===13||n.tag===31){var s=ke(n,67108864);s!==null&&hi(s,n,67108864),up(n,67108864)}}function $b(n){if(n.tag===13||n.tag===31){var s=Ci();s=El(s);var o=ke(n,s);o!==null&&hi(o,n,s),up(n,s)}}var uh=!0;function E1(n,s,o,h){var g=G.T;G.T=null;var b=it.p;try{it.p=2,hp(n,s,o,h)}finally{it.p=b,G.T=g}}function _1(n,s,o,h){var g=G.T;G.T=null;var b=it.p;try{it.p=8,hp(n,s,o,h)}finally{it.p=b,G.T=g}}function hp(n,s,o,h){if(uh){var g=dp(h);if(g===null)Wf(n,s,h,hh,o),Yb(n,h);else if(T1(g,n,s,o,h))h.stopPropagation();else if(Yb(n,h),s&4&&-1<C1.indexOf(n)){for(;g!==null;){var b=Be(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var C=Xi(b.pendingLanes);if(C!==0){var L=b;for(L.pendingLanes|=2,L.entangledLanes|=2;C;){var q=1<<31-Bt(C);L.entanglements[1]|=q,C&=~q}xs(b),(Ce&6)===0&&($u=Vn()+500,fc(0))}}break;case 31:case 13:L=ke(b,2),L!==null&&hi(L,b,2),Yu(),up(b,2)}if(b=dp(h),b===null&&Wf(n,s,h,hh,o),b===g)break;g=b}g!==null&&h.stopPropagation()}else Wf(n,s,h,null,o)}}function dp(n){return n=fo(n),fp(n)}var hh=null;function fp(n){if(hh=null,n=us(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===31){if(n=u(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return hh=n,null}function Xb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ur()){case $n:return 2;case as:return 8;case xa:case hr:return 32;case ro:return 268435456;default:return 32}default:return 32}}var pp=!1,Za=null,Ja=null,tr=null,xc=new Map,wc=new Map,er=[],C1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yb(n,s){switch(n){case"focusin":case"focusout":Za=null;break;case"dragenter":case"dragleave":Ja=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":xc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":wc.delete(s.pointerId)}}function Sc(n,s,o,h,g,b){return n===null||n.nativeEvent!==b?(n={blockedOn:s,domEventName:o,eventSystemFlags:h,nativeEvent:b,targetContainers:[g]},s!==null&&(s=Be(s),s!==null&&Vb(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function T1(n,s,o,h,g){switch(s){case"focusin":return Za=Sc(Za,n,s,o,h,g),!0;case"dragenter":return Ja=Sc(Ja,n,s,o,h,g),!0;case"mouseover":return tr=Sc(tr,n,s,o,h,g),!0;case"pointerover":var b=g.pointerId;return xc.set(b,Sc(xc.get(b)||null,n,s,o,h,g)),!0;case"gotpointercapture":return b=g.pointerId,wc.set(b,Sc(wc.get(b)||null,n,s,o,h,g)),!0}return!1}function Qb(n){var s=us(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,yr(n.priority,function(){$b(o)});return}}else if(s===31){if(s=u(o),s!==null){n.blockedOn=s,yr(n.priority,function(){$b(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function dh(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=dp(n.nativeEvent);if(o===null){o=n.nativeEvent;var h=new o.constructor(o.type,o);ki=h,o.target.dispatchEvent(h),ki=null}else return s=Be(o),s!==null&&Vb(s),n.blockedOn=o,!1;s.shift()}return!0}function Wb(n,s,o){dh(n)&&o.delete(s)}function R1(){pp=!1,Za!==null&&dh(Za)&&(Za=null),Ja!==null&&dh(Ja)&&(Ja=null),tr!==null&&dh(tr)&&(tr=null),xc.forEach(Wb),wc.forEach(Wb)}function fh(n,s){n.blockedOn===s&&(n.blockedOn=null,pp||(pp=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,R1)))}var ph=null;function Zb(n){ph!==n&&(ph=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){ph===n&&(ph=null);for(var s=0;s<n.length;s+=3){var o=n[s],h=n[s+1],g=n[s+2];if(typeof h!="function"){if(fp(h||o)===null)continue;break}var b=Be(o);b!==null&&(n.splice(s,3),s-=3,df(b,{pending:!0,data:g,method:o.method,action:h},h,g))}}))}function tl(n){function s(q){return fh(q,n)}Za!==null&&fh(Za,n),Ja!==null&&fh(Ja,n),tr!==null&&fh(tr,n),xc.forEach(s),wc.forEach(s);for(var o=0;o<er.length;o++){var h=er[o];h.blockedOn===n&&(h.blockedOn=null)}for(;0<er.length&&(o=er[0],o.blockedOn===null);)Qb(o),o.blockedOn===null&&er.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(h=0;h<o.length;h+=3){var g=o[h],b=o[h+1],C=g[cn]||null;if(typeof b=="function")C||Zb(o);else if(C){var L=null;if(b&&b.hasAttribute("formAction")){if(g=b,C=b[cn]||null)L=C.formAction;else if(fp(g)!==null)continue}else L=C.action;typeof L=="function"?o[h+1]=L:(o.splice(h,3),h-=3),Zb(o)}}}function Jb(){function n(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(C){return g=C})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),h||setTimeout(o,20)}function o(){if(!h&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){h=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function mp(n){this._internalRoot=n}mh.prototype.render=mp.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,h=Ci();Gb(o,h,n,s,null,null)},mh.prototype.unmount=mp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Gb(n.current,2,null,n,null,null),Yu(),s[ti]=null}};function mh(n){this._internalRoot=n}mh.prototype.unstable_scheduleHydration=function(n){if(n){var s=gr();n={blockedOn:null,target:n,priority:s};for(var o=0;o<er.length&&s!==0&&s<er[o].priority;o++);er.splice(o,0,n),o===0&&Qb(n)}};var t0=t.version;if(t0!=="19.2.4")throw Error(i(527,t0,"19.2.4"));it.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=f(s),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var M1={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gh.isDisabled&&gh.supportsFiber)try{rs=gh.inject(M1),Pn=gh}catch{}}return Ec.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,h="",g=oy,b=ly,C=cy;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(C=s.onRecoverableError)),s=Hb(n,1,!1,null,null,o,h,null,g,b,C,Jb),n[ti]=s.current,Qf(n),new mp(s)},Ec.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var h=!1,g="",b=oy,C=ly,L=cy,q=null;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(b=o.onUncaughtError),o.onCaughtError!==void 0&&(C=o.onCaughtError),o.onRecoverableError!==void 0&&(L=o.onRecoverableError),o.formState!==void 0&&(q=o.formState)),s=Hb(n,1,!0,s,o??null,h,g,q,b,C,L,Jb),s.context=qb(null),o=s.current,h=Ci(),h=El(h),g=Ua(h),g.callback=null,za(o,g,h),o=h,s.current.lanes=o,Ni(s,o),xs(s),n[ti]=s.current,Qf(n),new mh(s)},Ec.version="19.2.4",Ec}var d0;function I1(){if(d0)return vp.exports;d0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),vp.exports=F1(),vp.exports}var U1=I1();var f0="popstate";function z1(r={}){function t(i,a){let{pathname:l,search:c,hash:u}=i.location;return Fp("",{pathname:l,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(i,a){return typeof a=="string"?a:Fc(a)}return q1(t,e,null,r)}function Je(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function ns(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function H1(){return Math.random().toString(36).substring(2,10)}function p0(r,t){return{usr:r.state,key:r.key,idx:t}}function Fp(r,t,e=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof t=="string"?bl(t):t,state:e,key:t&&t.key||i||H1()}}function Fc({pathname:r="/",search:t="",hash:e=""}){return t&&t!=="?"&&(r+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(r+=e.charAt(0)==="#"?e:"#"+e),r}function bl(r){let t={};if(r){let e=r.indexOf("#");e>=0&&(t.hash=r.substring(e),r=r.substring(0,e));let i=r.indexOf("?");i>=0&&(t.search=r.substring(i),r=r.substring(0,i)),r&&(t.pathname=r)}return t}function q1(r,t,e,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,u="POP",d=null,f=p();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function p(){return(c.state||{idx:null}).idx}function y(){u="POP";let T=p(),M=T==null?null:T-f;f=T,d&&d({action:u,location:E.location,delta:M})}function x(T,M){u="PUSH";let k=Fp(E.location,T,M);f=p()+1;let N=p0(k,f),F=E.createHref(k);try{c.pushState(N,"",F)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;a.location.assign(F)}l&&d&&d({action:u,location:E.location,delta:1})}function S(T,M){u="REPLACE";let k=Fp(E.location,T,M);f=p();let N=p0(k,f),F=E.createHref(k);c.replaceState(N,"",F),l&&d&&d({action:u,location:E.location,delta:0})}function A(T){return G1(T)}let E={get action(){return u},get location(){return r(a,c)},listen(T){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(f0,y),d=T,()=>{a.removeEventListener(f0,y),d=null}},createHref(T){return t(a,T)},createURL:A,encodeLocation(T){let M=A(T);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:x,replace:S,go(T){return c.go(T)}};return E}function G1(r,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Je(e,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:Fc(r);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=e+i),new URL(i,e)}function Ov(r,t,e="/"){return K1(r,t,e,!1)}function K1(r,t,e,i){let a=typeof t=="string"?bl(t):t,l=ya(a.pathname||"/",e);if(l==null)return null;let c=kv(r);V1(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let f=iS(l);u=eS(c[d],f,i)}return u}function kv(r,t=[],e=[],i="",a=!1){let l=(c,u,d=a,f)=>{let p={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(i)&&d)return;Je(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length)}let y=ga([i,p.relativePath]),x=e.concat(p);c.children&&c.children.length>0&&(Je(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),kv(c.children,t,x,y,d)),!(c.path==null&&!c.index)&&t.push({path:y,score:J1(y,c.index),routesMeta:x})};return r.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))l(c,u);else for(let d of Lv(c.path))l(c,u,!0,d)}),t}function Lv(r){let t=r.split("/");if(t.length===0)return[];let[e,...i]=t,a=e.endsWith("?"),l=e.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=Lv(i.join("/")),u=[];return u.push(...c.map(d=>d===""?l:[l,d].join("/"))),a&&u.push(...c),u.map(d=>r.startsWith("/")&&d===""?"/":d)}function V1(r){r.sort((t,e)=>t.score!==e.score?e.score-t.score:tS(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var $1=/^:[\w-]+$/,X1=3,Y1=2,Q1=1,W1=10,Z1=-2,m0=r=>r==="*";function J1(r,t){let e=r.split("/"),i=e.length;return e.some(m0)&&(i+=Z1),t&&(i+=Y1),e.filter(a=>!m0(a)).reduce((a,l)=>a+($1.test(l)?X1:l===""?Q1:W1),i)}function tS(r,t){return r.length===t.length&&r.slice(0,-1).every((i,a)=>i===t[a])?r[r.length-1]-t[t.length-1]:0}function eS(r,t,e=!1){let{routesMeta:i}=r,a={},l="/",c=[];for(let u=0;u<i.length;++u){let d=i[u],f=u===i.length-1,p=l==="/"?t:t.slice(l.length)||"/",y=qh({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},p),x=d.route;if(!y&&f&&e&&!i[i.length-1].route.index&&(y=qh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!y)return null;Object.assign(a,y.params),c.push({params:a,pathname:ga([l,y.pathname]),pathnameBase:oS(ga([l,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(l=ga([l,y.pathnameBase]))}return c}function qh(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[e,i]=nS(r.path,r.caseSensitive,r.end),a=t.match(e);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:i.reduce((f,{paramName:p,isOptional:y},x)=>{if(p==="*"){let A=u[x]||"";c=l.slice(0,l.length-A.length).replace(/(.)\/+$/,"$1")}const S=u[x];return y&&!S?f[p]=void 0:f[p]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:c,pattern:r}}function nS(r,t=!1,e=!0){ns(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(i.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(i.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function iS(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ns(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),r}}function ya(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=r.charAt(e);return i&&i!=="/"?null:r.slice(e)||"/"}var sS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function aS(r,t="/"){let{pathname:e,search:i="",hash:a=""}=typeof r=="string"?bl(r):r,l;return e?(e=e.replace(/\/\/+/g,"/"),e.startsWith("/")?l=g0(e.substring(1),"/"):l=g0(e,t)):l=t,{pathname:l,search:lS(i),hash:cS(a)}}function g0(r,t){let e=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function Ap(r,t,e,i){return`Cannot include a '${r}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rS(r){return r.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function bm(r){let t=rS(r);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function vm(r,t,e,i=!1){let a;typeof r=="string"?a=bl(r):(a={...r},Je(!a.pathname||!a.pathname.includes("?"),Ap("?","pathname","search",a)),Je(!a.pathname||!a.pathname.includes("#"),Ap("#","pathname","hash",a)),Je(!a.search||!a.search.includes("#"),Ap("#","search","hash",a)));let l=r===""||a.pathname==="",c=l?"/":a.pathname,u;if(c==null)u=e;else{let y=t.length-1;if(!i&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),y-=1;a.pathname=x.join("/")}u=y>=0?t[y]:"/"}let d=aS(a,u),f=c&&c!=="/"&&c.endsWith("/"),p=(l||c===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(f||p)&&(d.pathname+="/"),d}var ga=r=>r.join("/").replace(/\/\/+/g,"/"),oS=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),lS=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,cS=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,uS=class{constructor(r,t,e,i=!1){this.status=r,this.statusText=t||"",this.internal=i,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function hS(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function dS(r){return r.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Pv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function jv(r,t){let e=r;if(typeof e!="string"||!sS.test(e))return{absoluteURL:void 0,isExternal:!1,to:e};let i=e,a=!1;if(Pv)try{let l=new URL(window.location.href),c=e.startsWith("//")?new URL(l.protocol+e):new URL(e),u=ya(c.pathname,t);c.origin===l.origin&&u!=null?e=u+c.search+c.hash:a=!0}catch{ns(!1,`<Link to="${e}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Bv=["POST","PUT","PATCH","DELETE"];new Set(Bv);var fS=["GET",...Bv];new Set(fS);var vl=U.createContext(null);vl.displayName="DataRouter";var td=U.createContext(null);td.displayName="DataRouterState";var pS=U.createContext(!1),Fv=U.createContext({isTransitioning:!1});Fv.displayName="ViewTransition";var mS=U.createContext(new Map);mS.displayName="Fetchers";var gS=U.createContext(null);gS.displayName="Await";var Di=U.createContext(null);Di.displayName="Navigation";var Kc=U.createContext(null);Kc.displayName="Location";var is=U.createContext({outlet:null,matches:[],isDataRoute:!1});is.displayName="Route";var xm=U.createContext(null);xm.displayName="RouteError";var Iv="REACT_ROUTER_ERROR",yS="REDIRECT",bS="ROUTE_ERROR_RESPONSE";function vS(r){if(r.startsWith(`${Iv}:${yS}:{`))try{let t=JSON.parse(r.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function xS(r){if(r.startsWith(`${Iv}:${bS}:{`))try{let t=JSON.parse(r.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new uS(t.status,t.statusText,t.data)}catch{}}function wS(r,{relative:t}={}){Je(xl(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=U.useContext(Di),{hash:a,pathname:l,search:c}=Vc(r,{relative:t}),u=l;return e!=="/"&&(u=l==="/"?e:ga([e,l])),i.createHref({pathname:u,search:c,hash:a})}function xl(){return U.useContext(Kc)!=null}function lr(){return Je(xl(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(Kc).location}var Uv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zv(r){U.useContext(Di).static||U.useLayoutEffect(r)}function ba(){let{isDataRoute:r}=U.useContext(is);return r?LS():SS()}function SS(){Je(xl(),"useNavigate() may be used only in the context of a <Router> component.");let r=U.useContext(vl),{basename:t,navigator:e}=U.useContext(Di),{matches:i}=U.useContext(is),{pathname:a}=lr(),l=JSON.stringify(bm(i)),c=U.useRef(!1);return zv(()=>{c.current=!0}),U.useCallback((d,f={})=>{if(ns(c.current,Uv),!c.current)return;if(typeof d=="number"){e.go(d);return}let p=vm(d,JSON.parse(l),a,f.relative==="path");r==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:ga([t,p.pathname])),(f.replace?e.replace:e.push)(p,f.state,f)},[t,e,l,a,r])}U.createContext(null);function wm(){let{matches:r}=U.useContext(is),t=r[r.length-1];return t?t.params:{}}function Vc(r,{relative:t}={}){let{matches:e}=U.useContext(is),{pathname:i}=lr(),a=JSON.stringify(bm(e));return U.useMemo(()=>vm(r,JSON.parse(a),i,t==="path"),[r,a,i,t])}function AS(r,t){return Hv(r,t)}function Hv(r,t,e,i,a){Je(xl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=U.useContext(Di),{matches:c}=U.useContext(is),u=c[c.length-1],d=u?u.params:{},f=u?u.pathname:"/",p=u?u.pathnameBase:"/",y=u&&u.route;{let k=y&&y.path||"";Gv(f,!y||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let x=lr(),S;if(t){let k=typeof t=="string"?bl(t):t;Je(p==="/"||k.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${k.pathname}" was given in the \`location\` prop.`),S=k}else S=x;let A=S.pathname||"/",E=A;if(p!=="/"){let k=p.replace(/^\//,"").split("/");E="/"+A.replace(/^\//,"").split("/").slice(k.length).join("/")}let T=Ov(r,{pathname:E});ns(y||T!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),ns(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=RS(T&&T.map(k=>Object.assign({},k,{params:Object.assign({},d,k.params),pathname:ga([p,l.encodeLocation?l.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?p:ga([p,l.encodeLocation?l.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),c,e,i,a);return t&&M?U.createElement(Kc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},M):M}function ES(){let r=kS(),t=hS(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),e=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:l},"ErrorBoundary")," or"," ",U.createElement("code",{style:l},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},t),e?U.createElement("pre",{style:a},e):null,c)}var _S=U.createElement(ES,null),qv=class extends U.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,t){return t.location!==r.location||t.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:t.error,location:t.location,revalidation:r.revalidation||t.revalidation}}componentDidCatch(r,t){this.props.onError?this.props.onError(r,t):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const e=xS(r.digest);e&&(r=e)}let t=r!==void 0?U.createElement(is.Provider,{value:this.props.routeContext},U.createElement(xm.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?U.createElement(CS,{error:r},t):t}};qv.contextType=pS;var Ep=new WeakMap;function CS({children:r,error:t}){let{basename:e}=U.useContext(Di);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let i=vS(t.digest);if(i){let a=Ep.get(t);if(a)throw a;let l=jv(i.location,e);if(Pv&&!Ep.get(t))if(l.isExternal||i.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:i.replace}));throw Ep.set(t,c),c}return U.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return r}function TS({routeContext:r,match:t,children:e}){let i=U.useContext(vl);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),U.createElement(is.Provider,{value:r},e)}function RS(r,t=[],e=null,i=null,a=null){if(r==null){if(!e)return null;if(e.errors)r=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)r=e.matches;else return null}let l=r,c=e?.errors;if(c!=null){let p=l.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);Je(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,p+1))}let u=!1,d=-1;if(e)for(let p=0;p<l.length;p++){let y=l[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=p),y.route.id){let{loaderData:x,errors:S}=e,A=y.route.loader&&!x.hasOwnProperty(y.route.id)&&(!S||S[y.route.id]===void 0);if(y.route.lazy||A){u=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}let f=e&&i?(p,y)=>{i(p,{location:e.location,params:e.matches?.[0]?.params??{},unstable_pattern:dS(e.matches),errorInfo:y})}:void 0;return l.reduceRight((p,y,x)=>{let S,A=!1,E=null,T=null;e&&(S=c&&y.route.id?c[y.route.id]:void 0,E=y.route.errorElement||_S,u&&(d<0&&x===0?(Gv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,T=null):d===x&&(A=!0,T=y.route.hydrateFallbackElement||null)));let M=t.concat(l.slice(0,x+1)),k=()=>{let N;return S?N=E:A?N=T:y.route.Component?N=U.createElement(y.route.Component,null):y.route.element?N=y.route.element:N=p,U.createElement(TS,{match:y,routeContext:{outlet:p,matches:M,isDataRoute:e!=null},children:N})};return e&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?U.createElement(qv,{location:e.location,revalidation:e.revalidation,component:E,error:S,children:k(),routeContext:{outlet:null,matches:M,isDataRoute:!0},onError:f}):k()},null)}function Sm(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MS(r){let t=U.useContext(vl);return Je(t,Sm(r)),t}function DS(r){let t=U.useContext(td);return Je(t,Sm(r)),t}function NS(r){let t=U.useContext(is);return Je(t,Sm(r)),t}function Am(r){let t=NS(r),e=t.matches[t.matches.length-1];return Je(e.route.id,`${r} can only be used on routes that contain a unique "id"`),e.route.id}function OS(){return Am("useRouteId")}function kS(){let r=U.useContext(xm),t=DS("useRouteError"),e=Am("useRouteError");return r!==void 0?r:t.errors?.[e]}function LS(){let{router:r}=MS("useNavigate"),t=Am("useNavigate"),e=U.useRef(!1);return zv(()=>{e.current=!0}),U.useCallback(async(a,l={})=>{ns(e.current,Uv),e.current&&(typeof a=="number"?await r.navigate(a):await r.navigate(a,{fromRouteId:t,...l}))},[r,t])}var y0={};function Gv(r,t,e){!t&&!y0[r]&&(y0[r]=!0,ns(!1,e))}U.memo(PS);function PS({routes:r,future:t,state:e,onError:i}){return Hv(r,void 0,e,i,t)}function Gh({to:r,replace:t,state:e,relative:i}){Je(xl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=U.useContext(Di);ns(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=U.useContext(is),{pathname:c}=lr(),u=ba(),d=vm(r,bm(l),c,i==="path"),f=JSON.stringify(d);return U.useEffect(()=>{u(JSON.parse(f),{replace:t,state:e,relative:i})},[u,f,i,t,e]),null}function Cs(r){Je(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jS({basename:r="/",children:t=null,location:e,navigationType:i="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){Je(!xl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=r.replace(/^\/*/,"/"),d=U.useMemo(()=>({basename:u,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[u,a,l,c]);typeof e=="string"&&(e=bl(e));let{pathname:f="/",search:p="",hash:y="",state:x=null,key:S="default"}=e,A=U.useMemo(()=>{let E=ya(f,u);return E==null?null:{location:{pathname:E,search:p,hash:y,state:x,key:S},navigationType:i}},[u,f,p,y,x,S,i]);return ns(A!=null,`<Router basename="${u}"> is not able to match the URL "${f}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:U.createElement(Di.Provider,{value:d},U.createElement(Kc.Provider,{children:t,value:A}))}function BS({children:r,location:t}){return AS(Ip(r),t)}function Ip(r,t=[]){let e=[];return U.Children.forEach(r,(i,a)=>{if(!U.isValidElement(i))return;let l=[...t,a];if(i.type===U.Fragment){e.push.apply(e,Ip(i.props.children,l));return}Je(i.type===Cs,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Je(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Ip(i.props.children,l)),e.push(c)}),e}var Lh="get",Ph="application/x-www-form-urlencoded";function ed(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function FS(r){return ed(r)&&r.tagName.toLowerCase()==="button"}function IS(r){return ed(r)&&r.tagName.toLowerCase()==="form"}function US(r){return ed(r)&&r.tagName.toLowerCase()==="input"}function zS(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function HS(r,t){return r.button===0&&(!t||t==="_self")&&!zS(r)}var bh=null;function qS(){if(bh===null)try{new FormData(document.createElement("form"),0),bh=!1}catch{bh=!0}return bh}var GS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _p(r){return r!=null&&!GS.has(r)?(ns(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ph}"`),null):r}function KS(r,t){let e,i,a,l,c;if(IS(r)){let u=r.getAttribute("action");i=u?ya(u,t):null,e=r.getAttribute("method")||Lh,a=_p(r.getAttribute("enctype"))||Ph,l=new FormData(r)}else if(FS(r)||US(r)&&(r.type==="submit"||r.type==="image")){let u=r.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=r.getAttribute("formaction")||u.getAttribute("action");if(i=d?ya(d,t):null,e=r.getAttribute("formmethod")||u.getAttribute("method")||Lh,a=_p(r.getAttribute("formenctype"))||_p(u.getAttribute("enctype"))||Ph,l=new FormData(u,r),!qS()){let{name:f,type:p,value:y}=r;if(p==="image"){let x=f?`${f}.`:"";l.append(`${x}x`,"0"),l.append(`${x}y`,"0")}else f&&l.append(f,y)}}else{if(ed(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Lh,i=null,a=Ph,c=r}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:e.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Em(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function VS(r,t,e,i){let a=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${i}`:a.pathname=`${a.pathname}.${i}`:a.pathname==="/"?a.pathname=`_root.${i}`:t&&ya(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function $S(r,t){if(r.id in t)return t[r.id];try{let e=await import(r.module);return t[r.id]=e,e}catch(e){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function XS(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function YS(r,t,e){let i=await Promise.all(r.map(async a=>{let l=t.routes[a.route.id];if(l){let c=await $S(l,e);return c.links?c.links():[]}return[]}));return JS(i.flat(1).filter(XS).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function b0(r,t,e,i,a,l){let c=(d,f)=>e[f]?d.route.id!==e[f].route.id:!0,u=(d,f)=>e[f].pathname!==d.pathname||e[f].route.path?.endsWith("*")&&e[f].params["*"]!==d.params["*"];return l==="assets"?t.filter((d,f)=>c(d,f)||u(d,f)):l==="data"?t.filter((d,f)=>{let p=i.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(c(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function QS(r,t,{includeHydrateFallback:e}={}){return WS(r.map(i=>{let a=t.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function WS(r){return[...new Set(r)]}function ZS(r){let t={},e=Object.keys(r).sort();for(let i of e)t[i]=r[i];return t}function JS(r,t){let e=new Set;return new Set(t),r.reduce((i,a)=>{let l=JSON.stringify(ZS(a));return e.has(l)||(e.add(l),i.push({key:l,link:a})),i},[])}function Kv(){let r=U.useContext(vl);return Em(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function tA(){let r=U.useContext(td);return Em(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var _m=U.createContext(void 0);_m.displayName="FrameworkContext";function Vv(){let r=U.useContext(_m);return Em(r,"You must render this element inside a <HydratedRouter> element"),r}function eA(r,t){let e=U.useContext(_m),[i,a]=U.useState(!1),[l,c]=U.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:p,onTouchStart:y}=t,x=U.useRef(null);U.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let E=M=>{M.forEach(k=>{c(k.isIntersecting)})},T=new IntersectionObserver(E,{threshold:.5});return x.current&&T.observe(x.current),()=>{T.disconnect()}}},[r]),U.useEffect(()=>{if(i){let E=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(E)}}},[i]);let S=()=>{a(!0)},A=()=>{a(!1),c(!1)};return e?r!=="intent"?[l,x,{}]:[l,x,{onFocus:_c(u,S),onBlur:_c(d,A),onMouseEnter:_c(f,S),onMouseLeave:_c(p,A),onTouchStart:_c(y,S)}]:[!1,x,{}]}function _c(r,t){return e=>{r&&r(e),e.defaultPrevented||t(e)}}function nA({page:r,...t}){let{router:e}=Kv(),i=U.useMemo(()=>Ov(e.routes,r,e.basename),[e.routes,r,e.basename]);return i?U.createElement(sA,{page:r,matches:i,...t}):null}function iA(r){let{manifest:t,routeModules:e}=Vv(),[i,a]=U.useState([]);return U.useEffect(()=>{let l=!1;return YS(r,t,e).then(c=>{l||a(c)}),()=>{l=!0}},[r,t,e]),i}function sA({page:r,matches:t,...e}){let i=lr(),{future:a,manifest:l,routeModules:c}=Vv(),{basename:u}=Kv(),{loaderData:d,matches:f}=tA(),p=U.useMemo(()=>b0(r,t,f,l,i,"data"),[r,t,f,l,i]),y=U.useMemo(()=>b0(r,t,f,l,i,"assets"),[r,t,f,l,i]),x=U.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let E=new Set,T=!1;if(t.forEach(k=>{let N=l.routes[k.route.id];!N||!N.hasLoader||(!p.some(F=>F.route.id===k.route.id)&&k.route.id in d&&c[k.route.id]?.shouldRevalidate||N.hasClientLoader?T=!0:E.add(k.route.id))}),E.size===0)return[];let M=VS(r,u,a.unstable_trailingSlashAwareDataRequests,"data");return T&&E.size>0&&M.searchParams.set("_routes",t.filter(k=>E.has(k.route.id)).map(k=>k.route.id).join(",")),[M.pathname+M.search]},[u,a.unstable_trailingSlashAwareDataRequests,d,i,l,p,t,r,c]),S=U.useMemo(()=>QS(y,l),[y,l]),A=iA(y);return U.createElement(U.Fragment,null,x.map(E=>U.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...e})),S.map(E=>U.createElement("link",{key:E,rel:"modulepreload",href:E,...e})),A.map(({key:E,link:T})=>U.createElement("link",{key:E,nonce:e.nonce,...T,crossOrigin:T.crossOrigin??e.crossOrigin})))}function aA(...r){return t=>{r.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var rA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rA&&(window.__reactRouterVersion="7.13.0")}catch{}function oA({basename:r,children:t,unstable_useTransitions:e,window:i}){let a=U.useRef();a.current==null&&(a.current=z1({window:i,v5Compat:!0}));let l=a.current,[c,u]=U.useState({action:l.action,location:l.location}),d=U.useCallback(f=>{e===!1?u(f):U.startTransition(()=>u(f))},[e]);return U.useLayoutEffect(()=>l.listen(d),[l,d]),U.createElement(jS,{basename:r,children:t,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:e})}var $v=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nd=U.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:u,target:d,to:f,preventScrollReset:p,viewTransition:y,unstable_defaultShouldRevalidate:x,...S},A){let{basename:E,unstable_useTransitions:T}=U.useContext(Di),M=typeof f=="string"&&$v.test(f),k=jv(f,E);f=k.to;let N=wS(f,{relative:a}),[F,I,z]=eA(i,S),H=hA(f,{replace:c,state:u,target:d,preventScrollReset:p,relative:a,viewTransition:y,unstable_defaultShouldRevalidate:x,unstable_useTransitions:T});function ct(At){t&&t(At),At.defaultPrevented||H(At)}let ut=U.createElement("a",{...S,...z,href:k.absoluteURL||N,onClick:k.isExternal||l?t:ct,ref:aA(A,I),target:d,"data-discover":!M&&e==="render"?"true":void 0});return F&&!M?U.createElement(U.Fragment,null,ut,U.createElement(nA,{page:N})):ut});nd.displayName="Link";var lA=U.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:u,children:d,...f},p){let y=Vc(c,{relative:f.relative}),x=lr(),S=U.useContext(td),{navigator:A,basename:E}=U.useContext(Di),T=S!=null&&gA(y)&&u===!0,M=A.encodeLocation?A.encodeLocation(y).pathname:y.pathname,k=x.pathname,N=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;e||(k=k.toLowerCase(),N=N?N.toLowerCase():null,M=M.toLowerCase()),N&&E&&(N=ya(N,E)||N);const F=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let I=k===M||!a&&k.startsWith(M)&&k.charAt(F)==="/",z=N!=null&&(N===M||!a&&N.startsWith(M)&&N.charAt(M.length)==="/"),H={isActive:I,isPending:z,isTransitioning:T},ct=I?t:void 0,ut;typeof i=="function"?ut=i(H):ut=[i,I?"active":null,z?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let At=typeof l=="function"?l(H):l;return U.createElement(nd,{...f,"aria-current":ct,className:ut,ref:p,style:At,to:c,viewTransition:u},typeof d=="function"?d(H):d)});lA.displayName="NavLink";var cA=U.forwardRef(({discover:r="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:a,state:l,method:c=Lh,action:u,onSubmit:d,relative:f,preventScrollReset:p,viewTransition:y,unstable_defaultShouldRevalidate:x,...S},A)=>{let{unstable_useTransitions:E}=U.useContext(Di),T=pA(),M=mA(u,{relative:f}),k=c.toLowerCase()==="get"?"get":"post",N=typeof u=="string"&&$v.test(u),F=I=>{if(d&&d(I),I.defaultPrevented)return;I.preventDefault();let z=I.nativeEvent.submitter,H=z?.getAttribute("formmethod")||c,ct=()=>T(z||I.currentTarget,{fetcherKey:t,method:H,navigate:e,replace:a,state:l,relative:f,preventScrollReset:p,viewTransition:y,unstable_defaultShouldRevalidate:x});E&&e!==!1?U.startTransition(()=>ct()):ct()};return U.createElement("form",{ref:A,method:k,action:M,onSubmit:i?d:F,...S,"data-discover":!N&&r==="render"?"true":void 0})});cA.displayName="Form";function uA(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xv(r){let t=U.useContext(vl);return Je(t,uA(r)),t}function hA(r,{target:t,replace:e,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:u,unstable_useTransitions:d}={}){let f=ba(),p=lr(),y=Vc(r,{relative:l});return U.useCallback(x=>{if(HS(x,t)){x.preventDefault();let S=e!==void 0?e:Fc(p)===Fc(y),A=()=>f(r,{replace:S,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:u});d?U.startTransition(()=>A()):A()}},[p,f,y,e,i,t,r,a,l,c,u,d])}var dA=0,fA=()=>`__${String(++dA)}__`;function pA(){let{router:r}=Xv("useSubmit"),{basename:t}=U.useContext(Di),e=OS(),i=r.fetch,a=r.navigate;return U.useCallback(async(l,c={})=>{let{action:u,method:d,encType:f,formData:p,body:y}=KS(l,t);if(c.navigate===!1){let x=c.fetcherKey||fA();await i(x,e,c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:p,body:y,formMethod:c.method||d,formEncType:c.encType||f,flushSync:c.flushSync})}else await a(c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:p,body:y,formMethod:c.method||d,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:e,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,a,t,e])}function mA(r,{relative:t}={}){let{basename:e}=U.useContext(Di),i=U.useContext(is);Je(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...Vc(r||".",{relative:t})},c=lr();if(r==null){l.search=c.search;let u=new URLSearchParams(l.search),d=u.getAll("index");if(d.some(p=>p==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let p=u.toString();l.search=p?`?${p}`:""}}return(!r||r===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(l.pathname=l.pathname==="/"?e:ga([e,l.pathname])),Fc(l)}function gA(r,{relative:t}={}){let e=U.useContext(Fv);Je(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Xv("useViewTransitionState"),a=Vc(r,{relative:t});if(!e.isTransitioning)return!1;let l=ya(e.currentLocation.pathname,i)||e.currentLocation.pathname,c=ya(e.nextLocation.pathname,i)||e.nextLocation.pathname;return qh(a.pathname,c)!=null||qh(a.pathname,l)!=null}var yA=Nv(),wl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},bA={setTimeout:(r,t)=>setTimeout(r,t),clearTimeout:r=>clearTimeout(r),setInterval:(r,t)=>setInterval(r,t),clearInterval:r=>clearInterval(r)},vA=class{#t=bA;#e=!1;setTimeoutProvider(r){this.#t=r}setTimeout(r,t){return this.#t.setTimeout(r,t)}clearTimeout(r){this.#t.clearTimeout(r)}setInterval(r,t){return this.#t.setInterval(r,t)}clearInterval(r){this.#t.clearInterval(r)}},qr=new vA;function xA(r){setTimeout(r,0)}var Wr=typeof window>"u"||"Deno"in globalThis;function si(){}function wA(r,t){return typeof r=="function"?r(t):r}function Up(r){return typeof r=="number"&&r>=0&&r!==1/0}function Yv(r,t){return Math.max(r+(t||0)-Date.now(),0)}function ar(r,t){return typeof r=="function"?r(t):r}function Vi(r,t){return typeof r=="function"?r(t):r}function v0(r,t){const{type:e="all",exact:i,fetchStatus:a,predicate:l,queryKey:c,stale:u}=r;if(c){if(i){if(t.queryHash!==Cm(c,t.options))return!1}else if(!Ic(t.queryKey,c))return!1}if(e!=="all"){const d=t.isActive();if(e==="active"&&!d||e==="inactive"&&d)return!1}return!(typeof u=="boolean"&&t.isStale()!==u||a&&a!==t.state.fetchStatus||l&&!l(t))}function x0(r,t){const{exact:e,status:i,predicate:a,mutationKey:l}=r;if(l){if(!t.options.mutationKey)return!1;if(e){if(Zr(t.options.mutationKey)!==Zr(l))return!1}else if(!Ic(t.options.mutationKey,l))return!1}return!(i&&t.state.status!==i||a&&!a(t))}function Cm(r,t){return(t?.queryKeyHashFn||Zr)(r)}function Zr(r){return JSON.stringify(r,(t,e)=>zp(e)?Object.keys(e).sort().reduce((i,a)=>(i[a]=e[a],i),{}):e)}function Ic(r,t){return r===t?!0:typeof r!=typeof t?!1:r&&t&&typeof r=="object"&&typeof t=="object"?Object.keys(t).every(e=>Ic(r[e],t[e])):!1}var SA=Object.prototype.hasOwnProperty;function Qv(r,t,e=0){if(r===t)return r;if(e>500)return t;const i=w0(r)&&w0(t);if(!i&&!(zp(r)&&zp(t)))return t;const l=(i?r:Object.keys(r)).length,c=i?t:Object.keys(t),u=c.length,d=i?new Array(u):{};let f=0;for(let p=0;p<u;p++){const y=i?p:c[p],x=r[y],S=t[y];if(x===S){d[y]=x,(i?p<l:SA.call(r,y))&&f++;continue}if(x===null||S===null||typeof x!="object"||typeof S!="object"){d[y]=S;continue}const A=Qv(x,S,e+1);d[y]=A,A===x&&f++}return l===u&&f===l?r:d}function Kh(r,t){if(!t||Object.keys(r).length!==Object.keys(t).length)return!1;for(const e in r)if(r[e]!==t[e])return!1;return!0}function w0(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function zp(r){if(!S0(r))return!1;const t=r.constructor;if(t===void 0)return!0;const e=t.prototype;return!(!S0(e)||!e.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function S0(r){return Object.prototype.toString.call(r)==="[object Object]"}function AA(r){return new Promise(t=>{qr.setTimeout(t,r)})}function Hp(r,t,e){return typeof e.structuralSharing=="function"?e.structuralSharing(r,t):e.structuralSharing!==!1?Qv(r,t):t}function EA(r,t,e=0){const i=[...r,t];return e&&i.length>e?i.slice(1):i}function _A(r,t,e=0){const i=[t,...r];return e&&i.length>e?i.slice(0,-1):i}var Tm=Symbol();function Wv(r,t){return!r.queryFn&&t?.initialPromise?()=>t.initialPromise:!r.queryFn||r.queryFn===Tm?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}function Rm(r,t){return typeof r=="function"?r(...t):!!r}function CA(r,t,e){let i=!1,a;return Object.defineProperty(r,"signal",{enumerable:!0,get:()=>(a??=t(),i||(i=!0,a.aborted?e():a.addEventListener("abort",e,{once:!0})),a)}),r}var TA=class extends wl{#t;#e;#i;constructor(){super(),this.#i=r=>{if(!Wr&&window.addEventListener){const t=()=>r();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#e||this.setEventListener(this.#i)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(r){this.#i=r,this.#e?.(),this.#e=r(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(r){this.#t!==r&&(this.#t=r,this.onFocus())}onFocus(){const r=this.isFocused();this.listeners.forEach(t=>{t(r)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},Mm=new TA;function qp(){let r,t;const e=new Promise((a,l)=>{r=a,t=l});e.status="pending",e.catch(()=>{});function i(a){Object.assign(e,a),delete e.resolve,delete e.reject}return e.resolve=a=>{i({status:"fulfilled",value:a}),r(a)},e.reject=a=>{i({status:"rejected",reason:a}),t(a)},e}var RA=xA;function MA(){let r=[],t=0,e=u=>{u()},i=u=>{u()},a=RA;const l=u=>{t?r.push(u):a(()=>{e(u)})},c=()=>{const u=r;r=[],u.length&&a(()=>{i(()=>{u.forEach(d=>{e(d)})})})};return{batch:u=>{let d;t++;try{d=u()}finally{t--,t||c()}return d},batchCalls:u=>(...d)=>{l(()=>{u(...d)})},schedule:l,setNotifyFunction:u=>{e=u},setBatchNotifyFunction:u=>{i=u},setScheduler:u=>{a=u}}}var En=MA(),DA=class extends wl{#t=!0;#e;#i;constructor(){super(),this.#i=r=>{if(!Wr&&window.addEventListener){const t=()=>r(!0),e=()=>r(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",e,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",e)}}}}onSubscribe(){this.#e||this.setEventListener(this.#i)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(r){this.#i=r,this.#e?.(),this.#e=r(this.setOnline.bind(this))}setOnline(r){this.#t!==r&&(this.#t=r,this.listeners.forEach(e=>{e(r)}))}isOnline(){return this.#t}},Vh=new DA;function NA(r){return Math.min(1e3*2**r,3e4)}function Zv(r){return(r??"online")==="online"?Vh.isOnline():!0}var Gp=class extends Error{constructor(r){super("CancelledError"),this.revert=r?.revert,this.silent=r?.silent}};function Jv(r){let t=!1,e=0,i;const a=qp(),l=()=>a.status!=="pending",c=E=>{if(!l()){const T=new Gp(E);x(T),r.onCancel?.(T)}},u=()=>{t=!0},d=()=>{t=!1},f=()=>Mm.isFocused()&&(r.networkMode==="always"||Vh.isOnline())&&r.canRun(),p=()=>Zv(r.networkMode)&&r.canRun(),y=E=>{l()||(i?.(),a.resolve(E))},x=E=>{l()||(i?.(),a.reject(E))},S=()=>new Promise(E=>{i=T=>{(l()||f())&&E(T)},r.onPause?.()}).then(()=>{i=void 0,l()||r.onContinue?.()}),A=()=>{if(l())return;let E;const T=e===0?r.initialPromise:void 0;try{E=T??r.fn()}catch(M){E=Promise.reject(M)}Promise.resolve(E).then(y).catch(M=>{if(l())return;const k=r.retry??(Wr?0:3),N=r.retryDelay??NA,F=typeof N=="function"?N(e,M):N,I=k===!0||typeof k=="number"&&e<k||typeof k=="function"&&k(e,M);if(t||!I){x(M);return}e++,r.onFail?.(e,M),AA(F).then(()=>f()?void 0:S()).then(()=>{t?x(M):A()})})};return{promise:a,status:()=>a.status,cancel:c,continue:()=>(i?.(),a),cancelRetry:u,continueRetry:d,canStart:p,start:()=>(p()?A():S().then(A),a)}}var tx=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Up(this.gcTime)&&(this.#t=qr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(Wr?1/0:300*1e3))}clearGcTimeout(){this.#t&&(qr.clearTimeout(this.#t),this.#t=void 0)}},OA=class extends tx{#t;#e;#i;#n;#s;#r;#a;constructor(r){super(),this.#a=!1,this.#r=r.defaultOptions,this.setOptions(r.options),this.observers=[],this.#n=r.client,this.#i=this.#n.getQueryCache(),this.queryKey=r.queryKey,this.queryHash=r.queryHash,this.#t=E0(this.options),this.state=r.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(r){if(this.options={...this.#r,...r},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=E0(this.options);t.data!==void 0&&(this.setState(A0(t.data,t.dataUpdatedAt)),this.#t=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#i.remove(this)}setData(r,t){const e=Hp(this.state.data,r,this.options);return this.#o({data:e,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),e}setState(r,t){this.#o({type:"setState",state:r,setStateOptions:t})}cancel(r){const t=this.#s?.promise;return this.#s?.cancel(r),t?t.then(si).catch(si):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(r=>Vi(r.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Tm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(r=>ar(r.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(r=>r.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(r=0){return this.state.data===void 0?!0:r==="static"?!1:this.state.isInvalidated?!0:!Yv(this.state.dataUpdatedAt,r)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(r){this.observers.includes(r)||(this.observers.push(r),this.clearGcTimeout(),this.#i.notify({type:"observerAdded",query:this,observer:r}))}removeObserver(r){this.observers.includes(r)&&(this.observers=this.observers.filter(t=>t!==r),this.observers.length||(this.#s&&(this.#a?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#i.notify({type:"observerRemoved",query:this,observer:r}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}async fetch(r,t){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(r&&this.setOptions(r),!this.options.queryFn){const u=this.observers.find(d=>d.options.queryFn);u&&this.setOptions(u.options)}const e=new AbortController,i=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#a=!0,e.signal)})},a=()=>{const u=Wv(this.options,t),f=(()=>{const p={client:this.#n,queryKey:this.queryKey,meta:this.meta};return i(p),p})();return this.#a=!1,this.options.persister?this.options.persister(u,f,this):u(f)},c=(()=>{const u={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:a};return i(u),u})();this.options.behavior?.onFetch(c,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==c.fetchOptions?.meta)&&this.#o({type:"fetch",meta:c.fetchOptions?.meta}),this.#s=Jv({initialPromise:t?.initialPromise,fn:c.fetchFn,onCancel:u=>{u instanceof Gp&&u.revert&&this.setState({...this.#e,fetchStatus:"idle"}),e.abort()},onFail:(u,d)=>{this.#o({type:"failed",failureCount:u,error:d})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0});try{const u=await this.#s.start();if(u===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(u),this.#i.config.onSuccess?.(u,this),this.#i.config.onSettled?.(u,this.state.error,this),u}catch(u){if(u instanceof Gp){if(u.silent)return this.#s.promise;if(u.revert){if(this.state.data===void 0)throw u;return this.state.data}}throw this.#o({type:"error",error:u}),this.#i.config.onError?.(u,this),this.#i.config.onSettled?.(this.state.data,u,this),u}finally{this.scheduleGc()}}#o(r){const t=e=>{switch(r.type){case"failed":return{...e,fetchFailureCount:r.failureCount,fetchFailureReason:r.error};case"pause":return{...e,fetchStatus:"paused"};case"continue":return{...e,fetchStatus:"fetching"};case"fetch":return{...e,...ex(e.data,this.options),fetchMeta:r.meta??null};case"success":const i={...e,...A0(r.data,r.dataUpdatedAt),dataUpdateCount:e.dataUpdateCount+1,...!r.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#e=r.manual?i:void 0,i;case"error":const a=r.error;return{...e,error:a,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...e,isInvalidated:!0};case"setState":return{...e,...r.state}}};this.state=t(this.state),En.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),this.#i.notify({query:this,type:"updated",action:r})})}};function ex(r,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Zv(t.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function A0(r,t){return{data:r,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function E0(r){const t=typeof r.initialData=="function"?r.initialData():r.initialData,e=t!==void 0,i=e?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:e?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:e?"success":"pending",fetchStatus:"idle"}}var kA=class extends wl{constructor(r,t){super(),this.options=t,this.#t=r,this.#o=null,this.#a=qp(),this.bindMethods(),this.setOptions(t)}#t;#e=void 0;#i=void 0;#n=void 0;#s;#r;#a;#o;#c;#l;#d;#h;#f;#g;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),_0(this.#e,this.options)?this.#u():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Kp(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Kp(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#E(),this.#A(),this.#e.removeObserver(this)}setOptions(r){const t=this.options,e=this.#e;if(this.options=this.#t.defaultQueryOptions(r),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Vi(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#x(),this.#e.setOptions(this.options),t._defaulted&&!Kh(this.options,t)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const i=this.hasListeners();i&&C0(this.#e,e,this.options,t)&&this.#u(),this.updateResult(),i&&(this.#e!==e||Vi(this.options.enabled,this.#e)!==Vi(t.enabled,this.#e)||ar(this.options.staleTime,this.#e)!==ar(t.staleTime,this.#e))&&this.#p();const a=this.#y();i&&(this.#e!==e||Vi(this.options.enabled,this.#e)!==Vi(t.enabled,this.#e)||a!==this.#g)&&this.#v(a)}getOptimisticResult(r){const t=this.#t.getQueryCache().build(this.#t,r),e=this.createResult(t,r);return PA(this,e)&&(this.#n=e,this.#r=this.options,this.#s=this.#e.state),e}getCurrentResult(){return this.#n}trackResult(r,t){return new Proxy(r,{get:(e,i)=>(this.trackProp(i),t?.(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,i))})}trackProp(r){this.#m.add(r)}getCurrentQuery(){return this.#e}refetch({...r}={}){return this.fetch({...r})}fetchOptimistic(r){const t=this.#t.defaultQueryOptions(r),e=this.#t.getQueryCache().build(this.#t,t);return e.fetch().then(()=>this.createResult(e,t))}fetch(r){return this.#u({...r,cancelRefetch:r.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#u(r){this.#x();let t=this.#e.fetch(this.options,r);return r?.throwOnError||(t=t.catch(si)),t}#p(){this.#E();const r=ar(this.options.staleTime,this.#e);if(Wr||this.#n.isStale||!Up(r))return;const e=Yv(this.#n.dataUpdatedAt,r)+1;this.#h=qr.setTimeout(()=>{this.#n.isStale||this.updateResult()},e)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#v(r){this.#A(),this.#g=r,!(Wr||Vi(this.options.enabled,this.#e)===!1||!Up(this.#g)||this.#g===0)&&(this.#f=qr.setInterval(()=>{(this.options.refetchIntervalInBackground||Mm.isFocused())&&this.#u()},this.#g))}#b(){this.#p(),this.#v(this.#y())}#E(){this.#h&&(qr.clearTimeout(this.#h),this.#h=void 0)}#A(){this.#f&&(qr.clearInterval(this.#f),this.#f=void 0)}createResult(r,t){const e=this.#e,i=this.options,a=this.#n,l=this.#s,c=this.#r,d=r!==e?r.state:this.#i,{state:f}=r;let p={...f},y=!1,x;if(t._optimisticResults){const ct=this.hasListeners(),ut=!ct&&_0(r,t),At=ct&&C0(r,e,t,i);(ut||At)&&(p={...p,...ex(f.data,r.options)}),t._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:S,errorUpdatedAt:A,status:E}=p;x=p.data;let T=!1;if(t.placeholderData!==void 0&&x===void 0&&E==="pending"){let ct;a?.isPlaceholderData&&t.placeholderData===c?.placeholderData?(ct=a.data,T=!0):ct=typeof t.placeholderData=="function"?t.placeholderData(this.#d?.state.data,this.#d):t.placeholderData,ct!==void 0&&(E="success",x=Hp(a?.data,ct,t),y=!0)}if(t.select&&x!==void 0&&!T)if(a&&x===l?.data&&t.select===this.#c)x=this.#l;else try{this.#c=t.select,x=t.select(x),x=Hp(a?.data,x,t),this.#l=x,this.#o=null}catch(ct){this.#o=ct}this.#o&&(S=this.#o,x=this.#l,A=Date.now(),E="error");const M=p.fetchStatus==="fetching",k=E==="pending",N=E==="error",F=k&&M,I=x!==void 0,H={status:E,fetchStatus:p.fetchStatus,isPending:k,isSuccess:E==="success",isError:N,isInitialLoading:F,isLoading:F,data:x,dataUpdatedAt:p.dataUpdatedAt,error:S,errorUpdatedAt:A,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>d.dataUpdateCount||p.errorUpdateCount>d.errorUpdateCount,isFetching:M,isRefetching:M&&!k,isLoadingError:N&&!I,isPaused:p.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:N&&I,isStale:Dm(r,t),refetch:this.refetch,promise:this.#a,isEnabled:Vi(t.enabled,r)!==!1};if(this.options.experimental_prefetchInRender){const ct=H.data!==void 0,ut=H.status==="error"&&!ct,At=Vt=>{ut?Vt.reject(H.error):ct&&Vt.resolve(H.data)},Ct=()=>{const Vt=this.#a=H.promise=qp();At(Vt)},Rt=this.#a;switch(Rt.status){case"pending":r.queryHash===e.queryHash&&At(Rt);break;case"fulfilled":(ut||H.data!==Rt.value)&&Ct();break;case"rejected":(!ut||H.error!==Rt.reason)&&Ct();break}}return H}updateResult(){const r=this.#n,t=this.createResult(this.#e,this.options);if(this.#s=this.#e.state,this.#r=this.options,this.#s.data!==void 0&&(this.#d=this.#e),Kh(t,r))return;this.#n=t;const e=()=>{if(!r)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!this.#m.size)return!0;const l=new Set(a??this.#m);return this.options.throwOnError&&l.add("error"),Object.keys(this.#n).some(c=>{const u=c;return this.#n[u]!==r[u]&&l.has(u)})};this.#C({listeners:e()})}#x(){const r=this.#t.getQueryCache().build(this.#t,this.options);if(r===this.#e)return;const t=this.#e;this.#e=r,this.#i=r.state,this.hasListeners()&&(t?.removeObserver(this),r.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#C(r){En.batch(()=>{r.listeners&&this.listeners.forEach(t=>{t(this.#n)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function LA(r,t){return Vi(t.enabled,r)!==!1&&r.state.data===void 0&&!(r.state.status==="error"&&t.retryOnMount===!1)}function _0(r,t){return LA(r,t)||r.state.data!==void 0&&Kp(r,t,t.refetchOnMount)}function Kp(r,t,e){if(Vi(t.enabled,r)!==!1&&ar(t.staleTime,r)!=="static"){const i=typeof e=="function"?e(r):e;return i==="always"||i!==!1&&Dm(r,t)}return!1}function C0(r,t,e,i){return(r!==t||Vi(i.enabled,r)===!1)&&(!e.suspense||r.state.status!=="error")&&Dm(r,e)}function Dm(r,t){return Vi(t.enabled,r)!==!1&&r.isStaleByTime(ar(t.staleTime,r))}function PA(r,t){return!Kh(r.getCurrentResult(),t)}function T0(r){return{onFetch:(t,e)=>{const i=t.options,a=t.fetchOptions?.meta?.fetchMore?.direction,l=t.state.data?.pages||[],c=t.state.data?.pageParams||[];let u={pages:[],pageParams:[]},d=0;const f=async()=>{let p=!1;const y=A=>{CA(A,()=>t.signal,()=>p=!0)},x=Wv(t.options,t.fetchOptions),S=async(A,E,T)=>{if(p)return Promise.reject();if(E==null&&A.pages.length)return Promise.resolve(A);const k=(()=>{const z={client:t.client,queryKey:t.queryKey,pageParam:E,direction:T?"backward":"forward",meta:t.options.meta};return y(z),z})(),N=await x(k),{maxPages:F}=t.options,I=T?_A:EA;return{pages:I(A.pages,N,F),pageParams:I(A.pageParams,E,F)}};if(a&&l.length){const A=a==="backward",E=A?jA:R0,T={pages:l,pageParams:c},M=E(i,T);u=await S(T,M,A)}else{const A=r??l.length;do{const E=d===0?c[0]??i.initialPageParam:R0(i,u);if(d>0&&E==null)break;u=await S(u,E),d++}while(d<A)}return u};t.options.persister?t.fetchFn=()=>t.options.persister?.(f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},e):t.fetchFn=f}}}function R0(r,{pages:t,pageParams:e}){const i=t.length-1;return t.length>0?r.getNextPageParam(t[i],t,e[i],e):void 0}function jA(r,{pages:t,pageParams:e}){return t.length>0?r.getPreviousPageParam?.(t[0],t,e[0],e):void 0}var BA=class extends tx{#t;#e;#i;#n;constructor(r){super(),this.#t=r.client,this.mutationId=r.mutationId,this.#i=r.mutationCache,this.#e=[],this.state=r.state||nx(),this.setOptions(r.options),this.scheduleGc()}setOptions(r){this.options=r,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(r){this.#e.includes(r)||(this.#e.push(r),this.clearGcTimeout(),this.#i.notify({type:"observerAdded",mutation:this,observer:r}))}removeObserver(r){this.#e=this.#e.filter(t=>t!==r),this.scheduleGc(),this.#i.notify({type:"observerRemoved",mutation:this,observer:r})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#i.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(r){const t=()=>{this.#s({type:"continue"})},e={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#n=Jv({fn:()=>this.options.mutationFn?this.options.mutationFn(r,e):Promise.reject(new Error("No mutationFn found")),onFail:(l,c)=>{this.#s({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#s({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#i.canRun(this)});const i=this.state.status==="pending",a=!this.#n.canStart();try{if(i)t();else{this.#s({type:"pending",variables:r,isPaused:a}),this.#i.config.onMutate&&await this.#i.config.onMutate(r,this,e);const c=await this.options.onMutate?.(r,e);c!==this.state.context&&this.#s({type:"pending",context:c,variables:r,isPaused:a})}const l=await this.#n.start();return await this.#i.config.onSuccess?.(l,r,this.state.context,this,e),await this.options.onSuccess?.(l,r,this.state.context,e),await this.#i.config.onSettled?.(l,null,this.state.variables,this.state.context,this,e),await this.options.onSettled?.(l,null,r,this.state.context,e),this.#s({type:"success",data:l}),l}catch(l){try{await this.#i.config.onError?.(l,r,this.state.context,this,e)}catch(c){Promise.reject(c)}try{await this.options.onError?.(l,r,this.state.context,e)}catch(c){Promise.reject(c)}try{await this.#i.config.onSettled?.(void 0,l,this.state.variables,this.state.context,this,e)}catch(c){Promise.reject(c)}try{await this.options.onSettled?.(void 0,l,r,this.state.context,e)}catch(c){Promise.reject(c)}throw this.#s({type:"error",error:l}),l}finally{this.#i.runNext(this)}}#s(r){const t=e=>{switch(r.type){case"failed":return{...e,failureCount:r.failureCount,failureReason:r.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:r.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:r.isPaused,status:"pending",variables:r.variables,submittedAt:Date.now()};case"success":return{...e,data:r.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:r.error,failureCount:e.failureCount+1,failureReason:r.error,isPaused:!1,status:"error"}}};this.state=t(this.state),En.batch(()=>{this.#e.forEach(e=>{e.onMutationUpdate(r)}),this.#i.notify({mutation:this,type:"updated",action:r})})}};function nx(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var FA=class extends wl{constructor(r={}){super(),this.config=r,this.#t=new Set,this.#e=new Map,this.#i=0}#t;#e;#i;build(r,t,e){const i=new BA({client:r,mutationCache:this,mutationId:++this.#i,options:r.defaultMutationOptions(t),state:e});return this.add(i),i}add(r){this.#t.add(r);const t=vh(r);if(typeof t=="string"){const e=this.#e.get(t);e?e.push(r):this.#e.set(t,[r])}this.notify({type:"added",mutation:r})}remove(r){if(this.#t.delete(r)){const t=vh(r);if(typeof t=="string"){const e=this.#e.get(t);if(e)if(e.length>1){const i=e.indexOf(r);i!==-1&&e.splice(i,1)}else e[0]===r&&this.#e.delete(t)}}this.notify({type:"removed",mutation:r})}canRun(r){const t=vh(r);if(typeof t=="string"){const i=this.#e.get(t)?.find(a=>a.state.status==="pending");return!i||i===r}else return!0}runNext(r){const t=vh(r);return typeof t=="string"?this.#e.get(t)?.find(i=>i!==r&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){En.batch(()=>{this.#t.forEach(r=>{this.notify({type:"removed",mutation:r})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(r){const t={exact:!0,...r};return this.getAll().find(e=>x0(t,e))}findAll(r={}){return this.getAll().filter(t=>x0(r,t))}notify(r){En.batch(()=>{this.listeners.forEach(t=>{t(r)})})}resumePausedMutations(){const r=this.getAll().filter(t=>t.state.isPaused);return En.batch(()=>Promise.all(r.map(t=>t.continue().catch(si))))}};function vh(r){return r.options.scope?.id}var IA=class extends wl{#t;#e=void 0;#i;#n;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const e=this.options;this.options=this.#t.defaultMutationOptions(t),Kh(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#i,observer:this}),e?.mutationKey&&this.options.mutationKey&&Zr(e.mutationKey)!==Zr(this.options.mutationKey)?this.reset():this.#i?.state.status==="pending"&&this.#i.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#i?.removeObserver(this)}onMutationUpdate(t){this.#s(),this.#r(t)}getCurrentResult(){return this.#e}reset(){this.#i?.removeObserver(this),this.#i=void 0,this.#s(),this.#r()}mutate(t,e){return this.#n=e,this.#i?.removeObserver(this),this.#i=this.#t.getMutationCache().build(this.#t,this.options),this.#i.addObserver(this),this.#i.execute(t)}#s(){const t=this.#i?.state??nx();this.#e={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#r(t){En.batch(()=>{if(this.#n&&this.hasListeners()){const e=this.#e.variables,i=this.#e.context,a={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#n.onSuccess?.(t.data,e,i,a)}catch(l){Promise.reject(l)}try{this.#n.onSettled?.(t.data,null,e,i,a)}catch(l){Promise.reject(l)}}else if(t?.type==="error"){try{this.#n.onError?.(t.error,e,i,a)}catch(l){Promise.reject(l)}try{this.#n.onSettled?.(void 0,t.error,e,i,a)}catch(l){Promise.reject(l)}}}this.listeners.forEach(e=>{e(this.#e)})})}},UA=class extends wl{constructor(r={}){super(),this.config=r,this.#t=new Map}#t;build(r,t,e){const i=t.queryKey,a=t.queryHash??Cm(i,t);let l=this.get(a);return l||(l=new OA({client:r,queryKey:i,queryHash:a,options:r.defaultQueryOptions(t),state:e,defaultOptions:r.getQueryDefaults(i)}),this.add(l)),l}add(r){this.#t.has(r.queryHash)||(this.#t.set(r.queryHash,r),this.notify({type:"added",query:r}))}remove(r){const t=this.#t.get(r.queryHash);t&&(r.destroy(),t===r&&this.#t.delete(r.queryHash),this.notify({type:"removed",query:r}))}clear(){En.batch(()=>{this.getAll().forEach(r=>{this.remove(r)})})}get(r){return this.#t.get(r)}getAll(){return[...this.#t.values()]}find(r){const t={exact:!0,...r};return this.getAll().find(e=>v0(t,e))}findAll(r={}){const t=this.getAll();return Object.keys(r).length>0?t.filter(e=>v0(r,e)):t}notify(r){En.batch(()=>{this.listeners.forEach(t=>{t(r)})})}onFocus(){En.batch(()=>{this.getAll().forEach(r=>{r.onFocus()})})}onOnline(){En.batch(()=>{this.getAll().forEach(r=>{r.onOnline()})})}},zA=class{#t;#e;#i;#n;#s;#r;#a;#o;constructor(r={}){this.#t=r.queryCache||new UA,this.#e=r.mutationCache||new FA,this.#i=r.defaultOptions||{},this.#n=new Map,this.#s=new Map,this.#r=0}mount(){this.#r++,this.#r===1&&(this.#a=Mm.subscribe(async r=>{r&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#o=Vh.subscribe(async r=>{r&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#r--,this.#r===0&&(this.#a?.(),this.#a=void 0,this.#o?.(),this.#o=void 0)}isFetching(r){return this.#t.findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return this.#e.findAll({...r,status:"pending"}).length}getQueryData(r){const t=this.defaultQueryOptions({queryKey:r});return this.#t.get(t.queryHash)?.state.data}ensureQueryData(r){const t=this.defaultQueryOptions(r),e=this.#t.build(this,t),i=e.state.data;return i===void 0?this.fetchQuery(r):(r.revalidateIfStale&&e.isStaleByTime(ar(t.staleTime,e))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(r){return this.#t.findAll(r).map(({queryKey:t,state:e})=>{const i=e.data;return[t,i]})}setQueryData(r,t,e){const i=this.defaultQueryOptions({queryKey:r}),l=this.#t.get(i.queryHash)?.state.data,c=wA(t,l);if(c!==void 0)return this.#t.build(this,i).setData(c,{...e,manual:!0})}setQueriesData(r,t,e){return En.batch(()=>this.#t.findAll(r).map(({queryKey:i})=>[i,this.setQueryData(i,t,e)]))}getQueryState(r){const t=this.defaultQueryOptions({queryKey:r});return this.#t.get(t.queryHash)?.state}removeQueries(r){const t=this.#t;En.batch(()=>{t.findAll(r).forEach(e=>{t.remove(e)})})}resetQueries(r,t){const e=this.#t;return En.batch(()=>(e.findAll(r).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...r},t)))}cancelQueries(r,t={}){const e={revert:!0,...t},i=En.batch(()=>this.#t.findAll(r).map(a=>a.cancel(e)));return Promise.all(i).then(si).catch(si)}invalidateQueries(r,t={}){return En.batch(()=>(this.#t.findAll(r).forEach(e=>{e.invalidate()}),r?.refetchType==="none"?Promise.resolve():this.refetchQueries({...r,type:r?.refetchType??r?.type??"active"},t)))}refetchQueries(r,t={}){const e={...t,cancelRefetch:t.cancelRefetch??!0},i=En.batch(()=>this.#t.findAll(r).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let l=a.fetch(void 0,e);return e.throwOnError||(l=l.catch(si)),a.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(i).then(si)}fetchQuery(r){const t=this.defaultQueryOptions(r);t.retry===void 0&&(t.retry=!1);const e=this.#t.build(this,t);return e.isStaleByTime(ar(t.staleTime,e))?e.fetch(t):Promise.resolve(e.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(si).catch(si)}fetchInfiniteQuery(r){return r.behavior=T0(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(si).catch(si)}ensureInfiniteQueryData(r){return r.behavior=T0(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return Vh.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#i}setDefaultOptions(r){this.#i=r}setQueryDefaults(r,t){this.#n.set(Zr(r),{queryKey:r,defaultOptions:t})}getQueryDefaults(r){const t=[...this.#n.values()],e={};return t.forEach(i=>{Ic(r,i.queryKey)&&Object.assign(e,i.defaultOptions)}),e}setMutationDefaults(r,t){this.#s.set(Zr(r),{mutationKey:r,defaultOptions:t})}getMutationDefaults(r){const t=[...this.#s.values()],e={};return t.forEach(i=>{Ic(r,i.mutationKey)&&Object.assign(e,i.defaultOptions)}),e}defaultQueryOptions(r){if(r._defaulted)return r;const t={...this.#i.queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return t.queryHash||(t.queryHash=Cm(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Tm&&(t.enabled=!1),t}defaultMutationOptions(r){return r?._defaulted?r:{...this.#i.mutations,...r?.mutationKey&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},ix=U.createContext(void 0),io=r=>{const t=U.useContext(ix);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},HA=({client:r,children:t})=>(U.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),R.jsx(ix.Provider,{value:r,children:t})),sx=U.createContext(!1),qA=()=>U.useContext(sx);sx.Provider;function GA(){let r=!1;return{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r}}var KA=U.createContext(GA()),VA=()=>U.useContext(KA),$A=(r,t,e)=>{const i=e?.state.error&&typeof r.throwOnError=="function"?Rm(r.throwOnError,[e.state.error,e]):r.throwOnError;(r.suspense||r.experimental_prefetchInRender||i)&&(t.isReset()||(r.retryOnMount=!1))},XA=r=>{U.useEffect(()=>{r.clearReset()},[r])},YA=({result:r,errorResetBoundary:t,throwOnError:e,query:i,suspense:a})=>r.isError&&!t.isReset()&&!r.isFetching&&i&&(a&&r.data===void 0||Rm(e,[r.error,i])),QA=r=>{if(r.suspense){const e=a=>a==="static"?a:Math.max(a??1e3,1e3),i=r.staleTime;r.staleTime=typeof i=="function"?(...a)=>e(i(...a)):e(i),typeof r.gcTime=="number"&&(r.gcTime=Math.max(r.gcTime,1e3))}},WA=(r,t)=>r.isLoading&&r.isFetching&&!t,ZA=(r,t)=>r?.suspense&&t.isPending,M0=(r,t,e)=>t.fetchOptimistic(r).catch(()=>{e.clearReset()});function JA(r,t,e){const i=qA(),a=VA(),l=io(),c=l.defaultQueryOptions(r);l.getDefaultOptions().queries?._experimental_beforeQuery?.(c);const u=l.getQueryCache().get(c.queryHash);c._optimisticResults=i?"isRestoring":"optimistic",QA(c),$A(c,a,u),XA(a);const d=!l.getQueryCache().get(c.queryHash),[f]=U.useState(()=>new t(l,c)),p=f.getOptimisticResult(c),y=!i&&r.subscribed!==!1;if(U.useSyncExternalStore(U.useCallback(x=>{const S=y?f.subscribe(En.batchCalls(x)):si;return f.updateResult(),S},[f,y]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),U.useEffect(()=>{f.setOptions(c)},[c,f]),ZA(c,p))throw M0(c,f,a);if(YA({result:p,errorResetBoundary:a,throwOnError:c.throwOnError,query:u,suspense:c.suspense}))throw p.error;return l.getDefaultOptions().queries?._experimental_afterQuery?.(c,p),c.experimental_prefetchInRender&&!Wr&&WA(p,i)&&(d?M0(c,f,a):u?.promise)?.catch(si).finally(()=>{f.updateResult()}),c.notifyOnChangeProps?p:f.trackResult(p)}function es(r,t){return JA(r,kA)}function Os(r,t){const e=io(),[i]=U.useState(()=>new IA(e,r));U.useEffect(()=>{i.setOptions(r)},[i,r]);const a=U.useSyncExternalStore(U.useCallback(c=>i.subscribe(En.batchCalls(c)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),l=U.useCallback((c,u)=>{i.mutate(c,u).catch(si)},[i]);if(a.error&&Rm(i.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:l,mutateAsync:a.mutate}}const D0=r=>{let t;const e=new Set,i=(f,p)=>{const y=typeof f=="function"?f(t):f;if(!Object.is(y,t)){const x=t;t=p??(typeof y!="object"||y===null)?y:Object.assign({},t,y),e.forEach(S=>S(t,x))}},a=()=>t,u={setState:i,getState:a,getInitialState:()=>d,subscribe:f=>(e.add(f),()=>e.delete(f))},d=t=r(i,a,u);return u},tE=(r=>r?D0(r):D0),eE=r=>r;function nE(r,t=eE){const e=yh.useSyncExternalStore(r.subscribe,yh.useCallback(()=>t(r.getState()),[r,t]),yh.useCallback(()=>t(r.getInitialState()),[r,t]));return yh.useDebugValue(e),e}const N0=r=>{const t=tE(r),e=i=>nE(t,i);return Object.assign(e,t),e},iE=(r=>r?N0(r):N0);function sE(r,t){let e;try{e=r()}catch{return}return{getItem:a=>{var l;const c=d=>d===null?null:JSON.parse(d,void 0),u=(l=e.getItem(a))!=null?l:null;return u instanceof Promise?u.then(c):c(u)},setItem:(a,l)=>e.setItem(a,JSON.stringify(l,void 0)),removeItem:a=>e.removeItem(a)}}const Vp=r=>t=>{try{const e=r(t);return e instanceof Promise?e:{then(i){return Vp(i)(e)},catch(i){return this}}}catch(e){return{then(i){return this},catch(i){return Vp(i)(e)}}}},aE=(r,t)=>(e,i,a)=>{let l={storage:sE(()=>window.localStorage),partialize:T=>T,version:0,merge:(T,M)=>({...M,...T}),...t},c=!1,u=0;const d=new Set,f=new Set;let p=l.storage;if(!p)return r((...T)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),e(...T)},i,a);const y=()=>{const T=l.partialize({...i()});return p.setItem(l.name,{state:T,version:l.version})},x=a.setState;a.setState=(T,M)=>(x(T,M),y());const S=r((...T)=>(e(...T),y()),i,a);a.getInitialState=()=>S;let A;const E=()=>{var T,M;if(!p)return;const k=++u;c=!1,d.forEach(F=>{var I;return F((I=i())!=null?I:S)});const N=((M=l.onRehydrateStorage)==null?void 0:M.call(l,(T=i())!=null?T:S))||void 0;return Vp(p.getItem.bind(p))(l.name).then(F=>{if(F)if(typeof F.version=="number"&&F.version!==l.version){if(l.migrate){const I=l.migrate(F.state,F.version);return I instanceof Promise?I.then(z=>[!0,z]):[!0,I]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,F.state];return[!1,void 0]}).then(F=>{var I;if(k!==u)return;const[z,H]=F;if(A=l.merge(H,(I=i())!=null?I:S),e(A,!0),z)return y()}).then(()=>{k===u&&(N?.(A,void 0),A=i(),c=!0,f.forEach(F=>F(A)))}).catch(F=>{k===u&&N?.(void 0,F)})};return a.persist={setOptions:T=>{l={...l,...T},T.storage&&(p=T.storage)},clearStorage:()=>{p?.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>E(),hasHydrated:()=>c,onHydrate:T=>(d.add(T),()=>{d.delete(T)}),onFinishHydration:T=>(f.add(T),()=>{f.delete(T)})},l.skipHydration||E(),A||S},rE=aE,va=iE(rE(r=>({token:null,setToken:t=>r({token:t}),logout:()=>r({token:null})}),{name:"wisemark-auth",partialize:r=>({token:r.token})}));function ax(r,t){return function(){return r.apply(t,arguments)}}const{toString:oE}=Object.prototype,{getPrototypeOf:Nm}=Object,{iterator:id,toStringTag:rx}=Symbol,sd=(r=>t=>{const e=oE.call(t);return r[e]||(r[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),ss=r=>(r=r.toLowerCase(),t=>sd(t)===r),ad=r=>t=>typeof t===r,{isArray:Sl}=Array,ml=ad("undefined");function $c(r){return r!==null&&!ml(r)&&r.constructor!==null&&!ml(r.constructor)&&gi(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const ox=ss("ArrayBuffer");function lE(r){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(r):t=r&&r.buffer&&ox(r.buffer),t}const cE=ad("string"),gi=ad("function"),lx=ad("number"),Xc=r=>r!==null&&typeof r=="object",uE=r=>r===!0||r===!1,jh=r=>{if(sd(r)!=="object")return!1;const t=Nm(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(rx in r)&&!(id in r)},hE=r=>{if(!Xc(r)||$c(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},dE=ss("Date"),fE=ss("File"),pE=ss("Blob"),mE=ss("FileList"),gE=r=>Xc(r)&&gi(r.pipe),yE=r=>{let t;return r&&(typeof FormData=="function"&&r instanceof FormData||gi(r.append)&&((t=sd(r))==="formdata"||t==="object"&&gi(r.toString)&&r.toString()==="[object FormData]"))},bE=ss("URLSearchParams"),[vE,xE,wE,SE]=["ReadableStream","Request","Response","Headers"].map(ss),AE=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Yc(r,t,{allOwnKeys:e=!1}={}){if(r===null||typeof r>"u")return;let i,a;if(typeof r!="object"&&(r=[r]),Sl(r))for(i=0,a=r.length;i<a;i++)t.call(null,r[i],i,r);else{if($c(r))return;const l=e?Object.getOwnPropertyNames(r):Object.keys(r),c=l.length;let u;for(i=0;i<c;i++)u=l[i],t.call(null,r[u],u,r)}}function cx(r,t){if($c(r))return null;t=t.toLowerCase();const e=Object.keys(r);let i=e.length,a;for(;i-- >0;)if(a=e[i],t===a.toLowerCase())return a;return null}const Gr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ux=r=>!ml(r)&&r!==Gr;function $p(){const{caseless:r,skipUndefined:t}=ux(this)&&this||{},e={},i=(a,l)=>{if(l==="__proto__"||l==="constructor"||l==="prototype")return;const c=r&&cx(e,l)||l;jh(e[c])&&jh(a)?e[c]=$p(e[c],a):jh(a)?e[c]=$p({},a):Sl(a)?e[c]=a.slice():(!t||!ml(a))&&(e[c]=a)};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&Yc(arguments[a],i);return e}const EE=(r,t,e,{allOwnKeys:i}={})=>(Yc(t,(a,l)=>{e&&gi(a)?Object.defineProperty(r,l,{value:ax(a,e),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(r,l,{value:a,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:i}),r),_E=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),CE=(r,t,e,i)=>{r.prototype=Object.create(t.prototype,i),Object.defineProperty(r.prototype,"constructor",{value:r,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(r,"super",{value:t.prototype}),e&&Object.assign(r.prototype,e)},TE=(r,t,e,i)=>{let a,l,c;const u={};if(t=t||{},r==null)return t;do{for(a=Object.getOwnPropertyNames(r),l=a.length;l-- >0;)c=a[l],(!i||i(c,r,t))&&!u[c]&&(t[c]=r[c],u[c]=!0);r=e!==!1&&Nm(r)}while(r&&(!e||e(r,t))&&r!==Object.prototype);return t},RE=(r,t,e)=>{r=String(r),(e===void 0||e>r.length)&&(e=r.length),e-=t.length;const i=r.indexOf(t,e);return i!==-1&&i===e},ME=r=>{if(!r)return null;if(Sl(r))return r;let t=r.length;if(!lx(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=r[t];return e},DE=(r=>t=>r&&t instanceof r)(typeof Uint8Array<"u"&&Nm(Uint8Array)),NE=(r,t)=>{const i=(r&&r[id]).call(r);let a;for(;(a=i.next())&&!a.done;){const l=a.value;t.call(r,l[0],l[1])}},OE=(r,t)=>{let e;const i=[];for(;(e=r.exec(t))!==null;)i.push(e);return i},kE=ss("HTMLFormElement"),LE=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,i,a){return i.toUpperCase()+a}),O0=(({hasOwnProperty:r})=>(t,e)=>r.call(t,e))(Object.prototype),PE=ss("RegExp"),hx=(r,t)=>{const e=Object.getOwnPropertyDescriptors(r),i={};Yc(e,(a,l)=>{let c;(c=t(a,l,r))!==!1&&(i[l]=c||a)}),Object.defineProperties(r,i)},jE=r=>{hx(r,(t,e)=>{if(gi(r)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const i=r[e];if(gi(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},BE=(r,t)=>{const e={},i=a=>{a.forEach(l=>{e[l]=!0})};return Sl(r)?i(r):i(String(r).split(t)),e},FE=()=>{},IE=(r,t)=>r!=null&&Number.isFinite(r=+r)?r:t;function UE(r){return!!(r&&gi(r.append)&&r[rx]==="FormData"&&r[id])}const zE=r=>{const t=new Array(10),e=(i,a)=>{if(Xc(i)){if(t.indexOf(i)>=0)return;if($c(i))return i;if(!("toJSON"in i)){t[a]=i;const l=Sl(i)?[]:{};return Yc(i,(c,u)=>{const d=e(c,a+1);!ml(d)&&(l[u]=d)}),t[a]=void 0,l}}return i};return e(r,0)},HE=ss("AsyncFunction"),qE=r=>r&&(Xc(r)||gi(r))&&gi(r.then)&&gi(r.catch),dx=((r,t)=>r?setImmediate:t?((e,i)=>(Gr.addEventListener("message",({source:a,data:l})=>{a===Gr&&l===e&&i.length&&i.shift()()},!1),a=>{i.push(a),Gr.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",gi(Gr.postMessage)),GE=typeof queueMicrotask<"u"?queueMicrotask.bind(Gr):typeof process<"u"&&process.nextTick||dx,KE=r=>r!=null&&gi(r[id]),ht={isArray:Sl,isArrayBuffer:ox,isBuffer:$c,isFormData:yE,isArrayBufferView:lE,isString:cE,isNumber:lx,isBoolean:uE,isObject:Xc,isPlainObject:jh,isEmptyObject:hE,isReadableStream:vE,isRequest:xE,isResponse:wE,isHeaders:SE,isUndefined:ml,isDate:dE,isFile:fE,isBlob:pE,isRegExp:PE,isFunction:gi,isStream:gE,isURLSearchParams:bE,isTypedArray:DE,isFileList:mE,forEach:Yc,merge:$p,extend:EE,trim:AE,stripBOM:_E,inherits:CE,toFlatObject:TE,kindOf:sd,kindOfTest:ss,endsWith:RE,toArray:ME,forEachEntry:NE,matchAll:OE,isHTMLForm:kE,hasOwnProperty:O0,hasOwnProp:O0,reduceDescriptors:hx,freezeMethods:jE,toObjectSet:BE,toCamelCase:LE,noop:FE,toFiniteNumber:IE,findKey:cx,global:Gr,isContextDefined:ux,isSpecCompliantForm:UE,toJSONObject:zE,isAsyncFn:HE,isThenable:qE,setImmediate:dx,asap:GE,isIterable:KE};let te=class fx extends Error{static from(t,e,i,a,l,c){const u=new fx(t.message,e||t.code,i,a,l);return u.cause=t,u.name=t.name,c&&Object.assign(u,c),u}constructor(t,e,i,a,l){super(t),this.name="AxiosError",this.isAxiosError=!0,e&&(this.code=e),i&&(this.config=i),a&&(this.request=a),l&&(this.response=l,this.status=l.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ht.toJSONObject(this.config),code:this.code,status:this.status}}};te.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";te.ERR_BAD_OPTION="ERR_BAD_OPTION";te.ECONNABORTED="ECONNABORTED";te.ETIMEDOUT="ETIMEDOUT";te.ERR_NETWORK="ERR_NETWORK";te.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";te.ERR_DEPRECATED="ERR_DEPRECATED";te.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";te.ERR_BAD_REQUEST="ERR_BAD_REQUEST";te.ERR_CANCELED="ERR_CANCELED";te.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";te.ERR_INVALID_URL="ERR_INVALID_URL";const VE=null;function Xp(r){return ht.isPlainObject(r)||ht.isArray(r)}function px(r){return ht.endsWith(r,"[]")?r.slice(0,-2):r}function k0(r,t,e){return r?r.concat(t).map(function(a,l){return a=px(a),!e&&l?"["+a+"]":a}).join(e?".":""):t}function $E(r){return ht.isArray(r)&&!r.some(Xp)}const XE=ht.toFlatObject(ht,{},null,function(t){return/^is[A-Z]/.test(t)});function rd(r,t,e){if(!ht.isObject(r))throw new TypeError("target must be an object");t=t||new FormData,e=ht.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,T){return!ht.isUndefined(T[E])});const i=e.metaTokens,a=e.visitor||p,l=e.dots,c=e.indexes,d=(e.Blob||typeof Blob<"u"&&Blob)&&ht.isSpecCompliantForm(t);if(!ht.isFunction(a))throw new TypeError("visitor must be a function");function f(A){if(A===null)return"";if(ht.isDate(A))return A.toISOString();if(ht.isBoolean(A))return A.toString();if(!d&&ht.isBlob(A))throw new te("Blob is not supported. Use a Buffer instead.");return ht.isArrayBuffer(A)||ht.isTypedArray(A)?d&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function p(A,E,T){let M=A;if(A&&!T&&typeof A=="object"){if(ht.endsWith(E,"{}"))E=i?E:E.slice(0,-2),A=JSON.stringify(A);else if(ht.isArray(A)&&$E(A)||(ht.isFileList(A)||ht.endsWith(E,"[]"))&&(M=ht.toArray(A)))return E=px(E),M.forEach(function(N,F){!(ht.isUndefined(N)||N===null)&&t.append(c===!0?k0([E],F,l):c===null?E:E+"[]",f(N))}),!1}return Xp(A)?!0:(t.append(k0(T,E,l),f(A)),!1)}const y=[],x=Object.assign(XE,{defaultVisitor:p,convertValue:f,isVisitable:Xp});function S(A,E){if(!ht.isUndefined(A)){if(y.indexOf(A)!==-1)throw Error("Circular reference detected in "+E.join("."));y.push(A),ht.forEach(A,function(M,k){(!(ht.isUndefined(M)||M===null)&&a.call(t,M,ht.isString(k)?k.trim():k,E,x))===!0&&S(M,E?E.concat(k):[k])}),y.pop()}}if(!ht.isObject(r))throw new TypeError("data must be an object");return S(r),t}function L0(r){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function Om(r,t){this._pairs=[],r&&rd(r,this,t)}const mx=Om.prototype;mx.append=function(t,e){this._pairs.push([t,e])};mx.toString=function(t){const e=t?function(i){return t.call(this,i,L0)}:L0;return this._pairs.map(function(a){return e(a[0])+"="+e(a[1])},"").join("&")};function YE(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function gx(r,t,e){if(!t)return r;const i=e&&e.encode||YE,a=ht.isFunction(e)?{serialize:e}:e,l=a&&a.serialize;let c;if(l?c=l(t,a):c=ht.isURLSearchParams(t)?t.toString():new Om(t,a).toString(i),c){const u=r.indexOf("#");u!==-1&&(r=r.slice(0,u)),r+=(r.indexOf("?")===-1?"?":"&")+c}return r}class P0{constructor(){this.handlers=[]}use(t,e,i){return this.handlers.push({fulfilled:t,rejected:e,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ht.forEach(this.handlers,function(i){i!==null&&t(i)})}}const km={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},QE=typeof URLSearchParams<"u"?URLSearchParams:Om,WE=typeof FormData<"u"?FormData:null,ZE=typeof Blob<"u"?Blob:null,JE={isBrowser:!0,classes:{URLSearchParams:QE,FormData:WE,Blob:ZE},protocols:["http","https","file","blob","url","data"]},Lm=typeof window<"u"&&typeof document<"u",Yp=typeof navigator=="object"&&navigator||void 0,t_=Lm&&(!Yp||["ReactNative","NativeScript","NS"].indexOf(Yp.product)<0),e_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",n_=Lm&&window.location.href||"http://localhost",i_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Lm,hasStandardBrowserEnv:t_,hasStandardBrowserWebWorkerEnv:e_,navigator:Yp,origin:n_},Symbol.toStringTag,{value:"Module"})),Jn={...i_,...JE};function s_(r,t){return rd(r,new Jn.classes.URLSearchParams,{visitor:function(e,i,a,l){return Jn.isNode&&ht.isBuffer(e)?(this.append(i,e.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function a_(r){return ht.matchAll(/\w+|\[(\w*)]/g,r).map(t=>t[0]==="[]"?"":t[1]||t[0])}function r_(r){const t={},e=Object.keys(r);let i;const a=e.length;let l;for(i=0;i<a;i++)l=e[i],t[l]=r[l];return t}function yx(r){function t(e,i,a,l){let c=e[l++];if(c==="__proto__")return!0;const u=Number.isFinite(+c),d=l>=e.length;return c=!c&&ht.isArray(a)?a.length:c,d?(ht.hasOwnProp(a,c)?a[c]=[a[c],i]:a[c]=i,!u):((!a[c]||!ht.isObject(a[c]))&&(a[c]=[]),t(e,i,a[c],l)&&ht.isArray(a[c])&&(a[c]=r_(a[c])),!u)}if(ht.isFormData(r)&&ht.isFunction(r.entries)){const e={};return ht.forEachEntry(r,(i,a)=>{t(a_(i),a,e,0)}),e}return null}function o_(r,t,e){if(ht.isString(r))try{return(t||JSON.parse)(r),ht.trim(r)}catch(i){if(i.name!=="SyntaxError")throw i}return(e||JSON.stringify)(r)}const Qc={transitional:km,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const i=e.getContentType()||"",a=i.indexOf("application/json")>-1,l=ht.isObject(t);if(l&&ht.isHTMLForm(t)&&(t=new FormData(t)),ht.isFormData(t))return a?JSON.stringify(yx(t)):t;if(ht.isArrayBuffer(t)||ht.isBuffer(t)||ht.isStream(t)||ht.isFile(t)||ht.isBlob(t)||ht.isReadableStream(t))return t;if(ht.isArrayBufferView(t))return t.buffer;if(ht.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return s_(t,this.formSerializer).toString();if((u=ht.isFileList(t))||i.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return rd(u?{"files[]":t}:t,d&&new d,this.formSerializer)}}return l||a?(e.setContentType("application/json",!1),o_(t)):t}],transformResponse:[function(t){const e=this.transitional||Qc.transitional,i=e&&e.forcedJSONParsing,a=this.responseType==="json";if(ht.isResponse(t)||ht.isReadableStream(t))return t;if(t&&ht.isString(t)&&(i&&!this.responseType||a)){const c=!(e&&e.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(u){if(c)throw u.name==="SyntaxError"?te.from(u,te.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Jn.classes.FormData,Blob:Jn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ht.forEach(["delete","get","head","post","put","patch"],r=>{Qc.headers[r]={}});const l_=ht.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),c_=r=>{const t={};let e,i,a;return r&&r.split(`
`).forEach(function(c){a=c.indexOf(":"),e=c.substring(0,a).trim().toLowerCase(),i=c.substring(a+1).trim(),!(!e||t[e]&&l_[e])&&(e==="set-cookie"?t[e]?t[e].push(i):t[e]=[i]:t[e]=t[e]?t[e]+", "+i:i)}),t},j0=Symbol("internals");function Cc(r){return r&&String(r).trim().toLowerCase()}function Bh(r){return r===!1||r==null?r:ht.isArray(r)?r.map(Bh):String(r)}function u_(r){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=e.exec(r);)t[i[1]]=i[2];return t}const h_=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function Cp(r,t,e,i,a){if(ht.isFunction(i))return i.call(this,t,e);if(a&&(t=e),!!ht.isString(t)){if(ht.isString(i))return t.indexOf(i)!==-1;if(ht.isRegExp(i))return i.test(t)}}function d_(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,i)=>e.toUpperCase()+i)}function f_(r,t){const e=ht.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(r,i+e,{value:function(a,l,c){return this[i].call(this,t,a,l,c)},configurable:!0})})}let yi=class{constructor(t){t&&this.set(t)}set(t,e,i){const a=this;function l(u,d,f){const p=Cc(d);if(!p)throw new Error("header name must be a non-empty string");const y=ht.findKey(a,p);(!y||a[y]===void 0||f===!0||f===void 0&&a[y]!==!1)&&(a[y||d]=Bh(u))}const c=(u,d)=>ht.forEach(u,(f,p)=>l(f,p,d));if(ht.isPlainObject(t)||t instanceof this.constructor)c(t,e);else if(ht.isString(t)&&(t=t.trim())&&!h_(t))c(c_(t),e);else if(ht.isObject(t)&&ht.isIterable(t)){let u={},d,f;for(const p of t){if(!ht.isArray(p))throw TypeError("Object iterator must return a key-value pair");u[f=p[0]]=(d=u[f])?ht.isArray(d)?[...d,p[1]]:[d,p[1]]:p[1]}c(u,e)}else t!=null&&l(e,t,i);return this}get(t,e){if(t=Cc(t),t){const i=ht.findKey(this,t);if(i){const a=this[i];if(!e)return a;if(e===!0)return u_(a);if(ht.isFunction(e))return e.call(this,a,i);if(ht.isRegExp(e))return e.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Cc(t),t){const i=ht.findKey(this,t);return!!(i&&this[i]!==void 0&&(!e||Cp(this,this[i],i,e)))}return!1}delete(t,e){const i=this;let a=!1;function l(c){if(c=Cc(c),c){const u=ht.findKey(i,c);u&&(!e||Cp(i,i[u],u,e))&&(delete i[u],a=!0)}}return ht.isArray(t)?t.forEach(l):l(t),a}clear(t){const e=Object.keys(this);let i=e.length,a=!1;for(;i--;){const l=e[i];(!t||Cp(this,this[l],l,t,!0))&&(delete this[l],a=!0)}return a}normalize(t){const e=this,i={};return ht.forEach(this,(a,l)=>{const c=ht.findKey(i,l);if(c){e[c]=Bh(a),delete e[l];return}const u=t?d_(l):String(l).trim();u!==l&&delete e[l],e[u]=Bh(a),i[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return ht.forEach(this,(i,a)=>{i!=null&&i!==!1&&(e[a]=t&&ht.isArray(i)?i.join(", "):i)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const i=new this(t);return e.forEach(a=>i.set(a)),i}static accessor(t){const i=(this[j0]=this[j0]={accessors:{}}).accessors,a=this.prototype;function l(c){const u=Cc(c);i[u]||(f_(a,c),i[u]=!0)}return ht.isArray(t)?t.forEach(l):l(t),this}};yi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ht.reduceDescriptors(yi.prototype,({value:r},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(i){this[e]=i}}});ht.freezeMethods(yi);function Tp(r,t){const e=this||Qc,i=t||e,a=yi.from(i.headers);let l=i.data;return ht.forEach(r,function(u){l=u.call(e,l,a.normalize(),t?t.status:void 0)}),a.normalize(),l}function bx(r){return!!(r&&r.__CANCEL__)}let Wc=class extends te{constructor(t,e,i){super(t??"canceled",te.ERR_CANCELED,e,i),this.name="CanceledError",this.__CANCEL__=!0}};function vx(r,t,e){const i=e.config.validateStatus;!e.status||!i||i(e.status)?r(e):t(new te("Request failed with status code "+e.status,[te.ERR_BAD_REQUEST,te.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function p_(r){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return t&&t[1]||""}function m_(r,t){r=r||10;const e=new Array(r),i=new Array(r);let a=0,l=0,c;return t=t!==void 0?t:1e3,function(d){const f=Date.now(),p=i[l];c||(c=f),e[a]=d,i[a]=f;let y=l,x=0;for(;y!==a;)x+=e[y++],y=y%r;if(a=(a+1)%r,a===l&&(l=(l+1)%r),f-c<t)return;const S=p&&f-p;return S?Math.round(x*1e3/S):void 0}}function g_(r,t){let e=0,i=1e3/t,a,l;const c=(f,p=Date.now())=>{e=p,a=null,l&&(clearTimeout(l),l=null),r(...f)};return[(...f)=>{const p=Date.now(),y=p-e;y>=i?c(f,p):(a=f,l||(l=setTimeout(()=>{l=null,c(a)},i-y)))},()=>a&&c(a)]}const $h=(r,t,e=3)=>{let i=0;const a=m_(50,250);return g_(l=>{const c=l.loaded,u=l.lengthComputable?l.total:void 0,d=c-i,f=a(d),p=c<=u;i=c;const y={loaded:c,total:u,progress:u?c/u:void 0,bytes:d,rate:f||void 0,estimated:f&&u&&p?(u-c)/f:void 0,event:l,lengthComputable:u!=null,[t?"download":"upload"]:!0};r(y)},e)},B0=(r,t)=>{const e=r!=null;return[i=>t[0]({lengthComputable:e,total:r,loaded:i}),t[1]]},F0=r=>(...t)=>ht.asap(()=>r(...t)),y_=Jn.hasStandardBrowserEnv?((r,t)=>e=>(e=new URL(e,Jn.origin),r.protocol===e.protocol&&r.host===e.host&&(t||r.port===e.port)))(new URL(Jn.origin),Jn.navigator&&/(msie|trident)/i.test(Jn.navigator.userAgent)):()=>!0,b_=Jn.hasStandardBrowserEnv?{write(r,t,e,i,a,l,c){if(typeof document>"u")return;const u=[`${r}=${encodeURIComponent(t)}`];ht.isNumber(e)&&u.push(`expires=${new Date(e).toUTCString()}`),ht.isString(i)&&u.push(`path=${i}`),ht.isString(a)&&u.push(`domain=${a}`),l===!0&&u.push("secure"),ht.isString(c)&&u.push(`SameSite=${c}`),document.cookie=u.join("; ")},read(r){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+r+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(r){this.write(r,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function v_(r){return typeof r!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function x_(r,t){return t?r.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):r}function xx(r,t,e){let i=!v_(t);return r&&(i||e==!1)?x_(r,t):t}const I0=r=>r instanceof yi?{...r}:r;function Jr(r,t){t=t||{};const e={};function i(f,p,y,x){return ht.isPlainObject(f)&&ht.isPlainObject(p)?ht.merge.call({caseless:x},f,p):ht.isPlainObject(p)?ht.merge({},p):ht.isArray(p)?p.slice():p}function a(f,p,y,x){if(ht.isUndefined(p)){if(!ht.isUndefined(f))return i(void 0,f,y,x)}else return i(f,p,y,x)}function l(f,p){if(!ht.isUndefined(p))return i(void 0,p)}function c(f,p){if(ht.isUndefined(p)){if(!ht.isUndefined(f))return i(void 0,f)}else return i(void 0,p)}function u(f,p,y){if(y in t)return i(f,p);if(y in r)return i(void 0,f)}const d={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:u,headers:(f,p,y)=>a(I0(f),I0(p),y,!0)};return ht.forEach(Object.keys({...r,...t}),function(p){if(p==="__proto__"||p==="constructor"||p==="prototype")return;const y=ht.hasOwnProp(d,p)?d[p]:a,x=y(r[p],t[p],p);ht.isUndefined(x)&&y!==u||(e[p]=x)}),e}const wx=r=>{const t=Jr({},r);let{data:e,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:l,headers:c,auth:u}=t;if(t.headers=c=yi.from(c),t.url=gx(xx(t.baseURL,t.url,t.allowAbsoluteUrls),r.params,r.paramsSerializer),u&&c.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),ht.isFormData(e)){if(Jn.hasStandardBrowserEnv||Jn.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if(ht.isFunction(e.getHeaders)){const d=e.getHeaders(),f=["content-type","content-length"];Object.entries(d).forEach(([p,y])=>{f.includes(p.toLowerCase())&&c.set(p,y)})}}if(Jn.hasStandardBrowserEnv&&(i&&ht.isFunction(i)&&(i=i(t)),i||i!==!1&&y_(t.url))){const d=a&&l&&b_.read(l);d&&c.set(a,d)}return t},w_=typeof XMLHttpRequest<"u",S_=w_&&function(r){return new Promise(function(e,i){const a=wx(r);let l=a.data;const c=yi.from(a.headers).normalize();let{responseType:u,onUploadProgress:d,onDownloadProgress:f}=a,p,y,x,S,A;function E(){S&&S(),A&&A(),a.cancelToken&&a.cancelToken.unsubscribe(p),a.signal&&a.signal.removeEventListener("abort",p)}let T=new XMLHttpRequest;T.open(a.method.toUpperCase(),a.url,!0),T.timeout=a.timeout;function M(){if(!T)return;const N=yi.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),I={data:!u||u==="text"||u==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:N,config:r,request:T};vx(function(H){e(H),E()},function(H){i(H),E()},I),T=null}"onloadend"in T?T.onloadend=M:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(M)},T.onabort=function(){T&&(i(new te("Request aborted",te.ECONNABORTED,r,T)),T=null)},T.onerror=function(F){const I=F&&F.message?F.message:"Network Error",z=new te(I,te.ERR_NETWORK,r,T);z.event=F||null,i(z),T=null},T.ontimeout=function(){let F=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const I=a.transitional||km;a.timeoutErrorMessage&&(F=a.timeoutErrorMessage),i(new te(F,I.clarifyTimeoutError?te.ETIMEDOUT:te.ECONNABORTED,r,T)),T=null},l===void 0&&c.setContentType(null),"setRequestHeader"in T&&ht.forEach(c.toJSON(),function(F,I){T.setRequestHeader(I,F)}),ht.isUndefined(a.withCredentials)||(T.withCredentials=!!a.withCredentials),u&&u!=="json"&&(T.responseType=a.responseType),f&&([x,A]=$h(f,!0),T.addEventListener("progress",x)),d&&T.upload&&([y,S]=$h(d),T.upload.addEventListener("progress",y),T.upload.addEventListener("loadend",S)),(a.cancelToken||a.signal)&&(p=N=>{T&&(i(!N||N.type?new Wc(null,r,T):N),T.abort(),T=null)},a.cancelToken&&a.cancelToken.subscribe(p),a.signal&&(a.signal.aborted?p():a.signal.addEventListener("abort",p)));const k=p_(a.url);if(k&&Jn.protocols.indexOf(k)===-1){i(new te("Unsupported protocol "+k+":",te.ERR_BAD_REQUEST,r));return}T.send(l||null)})},A_=(r,t)=>{const{length:e}=r=r?r.filter(Boolean):[];if(t||e){let i=new AbortController,a;const l=function(f){if(!a){a=!0,u();const p=f instanceof Error?f:this.reason;i.abort(p instanceof te?p:new Wc(p instanceof Error?p.message:p))}};let c=t&&setTimeout(()=>{c=null,l(new te(`timeout of ${t}ms exceeded`,te.ETIMEDOUT))},t);const u=()=>{r&&(c&&clearTimeout(c),c=null,r.forEach(f=>{f.unsubscribe?f.unsubscribe(l):f.removeEventListener("abort",l)}),r=null)};r.forEach(f=>f.addEventListener("abort",l));const{signal:d}=i;return d.unsubscribe=()=>ht.asap(u),d}},E_=function*(r,t){let e=r.byteLength;if(e<t){yield r;return}let i=0,a;for(;i<e;)a=i+t,yield r.slice(i,a),i=a},__=async function*(r,t){for await(const e of C_(r))yield*E_(e,t)},C_=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const t=r.getReader();try{for(;;){const{done:e,value:i}=await t.read();if(e)break;yield i}}finally{await t.cancel()}},U0=(r,t,e,i)=>{const a=__(r,t);let l=0,c,u=d=>{c||(c=!0,i&&i(d))};return new ReadableStream({async pull(d){try{const{done:f,value:p}=await a.next();if(f){u(),d.close();return}let y=p.byteLength;if(e){let x=l+=y;e(x)}d.enqueue(new Uint8Array(p))}catch(f){throw u(f),f}},cancel(d){return u(d),a.return()}},{highWaterMark:2})},z0=64*1024,{isFunction:xh}=ht,T_=(({Request:r,Response:t})=>({Request:r,Response:t}))(ht.global),{ReadableStream:H0,TextEncoder:q0}=ht.global,G0=(r,...t)=>{try{return!!r(...t)}catch{return!1}},R_=r=>{r=ht.merge.call({skipUndefined:!0},T_,r);const{fetch:t,Request:e,Response:i}=r,a=t?xh(t):typeof fetch=="function",l=xh(e),c=xh(i);if(!a)return!1;const u=a&&xh(H0),d=a&&(typeof q0=="function"?(A=>E=>A.encode(E))(new q0):async A=>new Uint8Array(await new e(A).arrayBuffer())),f=l&&u&&G0(()=>{let A=!1;const E=new e(Jn.origin,{body:new H0,method:"POST",get duplex(){return A=!0,"half"}}).headers.has("Content-Type");return A&&!E}),p=c&&u&&G0(()=>ht.isReadableStream(new i("").body)),y={stream:p&&(A=>A.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(A=>{!y[A]&&(y[A]=(E,T)=>{let M=E&&E[A];if(M)return M.call(E);throw new te(`Response type '${A}' is not supported`,te.ERR_NOT_SUPPORT,T)})});const x=async A=>{if(A==null)return 0;if(ht.isBlob(A))return A.size;if(ht.isSpecCompliantForm(A))return(await new e(Jn.origin,{method:"POST",body:A}).arrayBuffer()).byteLength;if(ht.isArrayBufferView(A)||ht.isArrayBuffer(A))return A.byteLength;if(ht.isURLSearchParams(A)&&(A=A+""),ht.isString(A))return(await d(A)).byteLength},S=async(A,E)=>{const T=ht.toFiniteNumber(A.getContentLength());return T??x(E)};return async A=>{let{url:E,method:T,data:M,signal:k,cancelToken:N,timeout:F,onDownloadProgress:I,onUploadProgress:z,responseType:H,headers:ct,withCredentials:ut="same-origin",fetchOptions:At}=wx(A),Ct=t||fetch;H=H?(H+"").toLowerCase():"text";let Rt=A_([k,N&&N.toAbortSignal()],F),Vt=null;const xt=Rt&&Rt.unsubscribe&&(()=>{Rt.unsubscribe()});let zt;try{if(z&&f&&T!=="get"&&T!=="head"&&(zt=await S(ct,M))!==0){let B=new e(E,{method:"POST",body:M,duplex:"half"}),J;if(ht.isFormData(M)&&(J=B.headers.get("content-type"))&&ct.setContentType(J),B.body){const[ft,wt]=B0(zt,$h(F0(z)));M=U0(B.body,z0,ft,wt)}}ht.isString(ut)||(ut=ut?"include":"omit");const G=l&&"credentials"in e.prototype,it={...At,signal:Rt,method:T.toUpperCase(),headers:ct.normalize().toJSON(),body:M,duplex:"half",credentials:G?ut:void 0};Vt=l&&new e(E,it);let vt=await(l?Ct(Vt,At):Ct(E,it));const Ht=p&&(H==="stream"||H==="response");if(p&&(I||Ht&&xt)){const B={};["status","statusText","headers"].forEach(Mt=>{B[Mt]=vt[Mt]});const J=ht.toFiniteNumber(vt.headers.get("content-length")),[ft,wt]=I&&B0(J,$h(F0(I),!0))||[];vt=new i(U0(vt.body,z0,ft,()=>{wt&&wt(),xt&&xt()}),B)}H=H||"text";let Ot=await y[ht.findKey(y,H)||"text"](vt,A);return!Ht&&xt&&xt(),await new Promise((B,J)=>{vx(B,J,{data:Ot,headers:yi.from(vt.headers),status:vt.status,statusText:vt.statusText,config:A,request:Vt})})}catch(G){throw xt&&xt(),G&&G.name==="TypeError"&&/Load failed|fetch/i.test(G.message)?Object.assign(new te("Network Error",te.ERR_NETWORK,A,Vt,G&&G.response),{cause:G.cause||G}):te.from(G,G&&G.code,A,Vt,G&&G.response)}}},M_=new Map,Sx=r=>{let t=r&&r.env||{};const{fetch:e,Request:i,Response:a}=t,l=[i,a,e];let c=l.length,u=c,d,f,p=M_;for(;u--;)d=l[u],f=p.get(d),f===void 0&&p.set(d,f=u?new Map:R_(t)),p=f;return f};Sx();const Pm={http:VE,xhr:S_,fetch:{get:Sx}};ht.forEach(Pm,(r,t)=>{if(r){try{Object.defineProperty(r,"name",{value:t})}catch{}Object.defineProperty(r,"adapterName",{value:t})}});const K0=r=>`- ${r}`,D_=r=>ht.isFunction(r)||r===null||r===!1;function N_(r,t){r=ht.isArray(r)?r:[r];const{length:e}=r;let i,a;const l={};for(let c=0;c<e;c++){i=r[c];let u;if(a=i,!D_(i)&&(a=Pm[(u=String(i)).toLowerCase()],a===void 0))throw new te(`Unknown adapter '${u}'`);if(a&&(ht.isFunction(a)||(a=a.get(t))))break;l[u||"#"+c]=a}if(!a){const c=Object.entries(l).map(([d,f])=>`adapter ${d} `+(f===!1?"is not supported by the environment":"is not available in the build"));let u=e?c.length>1?`since :
`+c.map(K0).join(`
`):" "+K0(c[0]):"as no adapter specified";throw new te("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return a}const Ax={getAdapter:N_,adapters:Pm};function Rp(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Wc(null,r)}function V0(r){return Rp(r),r.headers=yi.from(r.headers),r.data=Tp.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),Ax.getAdapter(r.adapter||Qc.adapter,r)(r).then(function(i){return Rp(r),i.data=Tp.call(r,r.transformResponse,i),i.headers=yi.from(i.headers),i},function(i){return bx(i)||(Rp(r),i&&i.response&&(i.response.data=Tp.call(r,r.transformResponse,i.response),i.response.headers=yi.from(i.response.headers))),Promise.reject(i)})}const Ex="1.13.5",od={};["object","boolean","number","function","string","symbol"].forEach((r,t)=>{od[r]=function(i){return typeof i===r||"a"+(t<1?"n ":" ")+r}});const $0={};od.transitional=function(t,e,i){function a(l,c){return"[Axios v"+Ex+"] Transitional option '"+l+"'"+c+(i?". "+i:"")}return(l,c,u)=>{if(t===!1)throw new te(a(c," has been removed"+(e?" in "+e:"")),te.ERR_DEPRECATED);return e&&!$0[c]&&($0[c]=!0,console.warn(a(c," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(l,c,u):!0}};od.spelling=function(t){return(e,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function O_(r,t,e){if(typeof r!="object")throw new te("options must be an object",te.ERR_BAD_OPTION_VALUE);const i=Object.keys(r);let a=i.length;for(;a-- >0;){const l=i[a],c=t[l];if(c){const u=r[l],d=u===void 0||c(u,l,r);if(d!==!0)throw new te("option "+l+" must be "+d,te.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new te("Unknown option "+l,te.ERR_BAD_OPTION)}}const Fh={assertOptions:O_,validators:od},qi=Fh.validators;let Yr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new P0,response:new P0}}async request(t,e){try{return await this._request(t,e)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}catch{}}throw i}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Jr(this.defaults,e);const{transitional:i,paramsSerializer:a,headers:l}=e;i!==void 0&&Fh.assertOptions(i,{silentJSONParsing:qi.transitional(qi.boolean),forcedJSONParsing:qi.transitional(qi.boolean),clarifyTimeoutError:qi.transitional(qi.boolean),legacyInterceptorReqResOrdering:qi.transitional(qi.boolean)},!1),a!=null&&(ht.isFunction(a)?e.paramsSerializer={serialize:a}:Fh.assertOptions(a,{encode:qi.function,serialize:qi.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Fh.assertOptions(e,{baseUrl:qi.spelling("baseURL"),withXsrfToken:qi.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let c=l&&ht.merge(l.common,l[e.method]);l&&ht.forEach(["delete","get","head","post","put","patch","common"],A=>{delete l[A]}),e.headers=yi.concat(c,l);const u=[];let d=!0;this.interceptors.request.forEach(function(E){if(typeof E.runWhen=="function"&&E.runWhen(e)===!1)return;d=d&&E.synchronous;const T=e.transitional||km;T&&T.legacyInterceptorReqResOrdering?u.unshift(E.fulfilled,E.rejected):u.push(E.fulfilled,E.rejected)});const f=[];this.interceptors.response.forEach(function(E){f.push(E.fulfilled,E.rejected)});let p,y=0,x;if(!d){const A=[V0.bind(this),void 0];for(A.unshift(...u),A.push(...f),x=A.length,p=Promise.resolve(e);y<x;)p=p.then(A[y++],A[y++]);return p}x=u.length;let S=e;for(;y<x;){const A=u[y++],E=u[y++];try{S=A(S)}catch(T){E.call(this,T);break}}try{p=V0.call(this,S)}catch(A){return Promise.reject(A)}for(y=0,x=f.length;y<x;)p=p.then(f[y++],f[y++]);return p}getUri(t){t=Jr(this.defaults,t);const e=xx(t.baseURL,t.url,t.allowAbsoluteUrls);return gx(e,t.params,t.paramsSerializer)}};ht.forEach(["delete","get","head","options"],function(t){Yr.prototype[t]=function(e,i){return this.request(Jr(i||{},{method:t,url:e,data:(i||{}).data}))}});ht.forEach(["post","put","patch"],function(t){function e(i){return function(l,c,u){return this.request(Jr(u||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}Yr.prototype[t]=e(),Yr.prototype[t+"Form"]=e(!0)});let k_=class _x{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(l){e=l});const i=this;this.promise.then(a=>{if(!i._listeners)return;let l=i._listeners.length;for(;l-- >0;)i._listeners[l](a);i._listeners=null}),this.promise.then=a=>{let l;const c=new Promise(u=>{i.subscribe(u),l=u}).then(a);return c.cancel=function(){i.unsubscribe(l)},c},t(function(l,c,u){i.reason||(i.reason=new Wc(l,c,u),e(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=i=>{t.abort(i)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new _x(function(a){t=a}),cancel:t}}};function L_(r){return function(e){return r.apply(null,e)}}function P_(r){return ht.isObject(r)&&r.isAxiosError===!0}const Qp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Qp).forEach(([r,t])=>{Qp[t]=r});function Cx(r){const t=new Yr(r),e=ax(Yr.prototype.request,t);return ht.extend(e,Yr.prototype,t,{allOwnKeys:!0}),ht.extend(e,t,null,{allOwnKeys:!0}),e.create=function(a){return Cx(Jr(r,a))},e}const pn=Cx(Qc);pn.Axios=Yr;pn.CanceledError=Wc;pn.CancelToken=k_;pn.isCancel=bx;pn.VERSION=Ex;pn.toFormData=rd;pn.AxiosError=te;pn.Cancel=pn.CanceledError;pn.all=function(t){return Promise.all(t)};pn.spread=L_;pn.isAxiosError=P_;pn.mergeConfig=Jr;pn.AxiosHeaders=yi;pn.formToJSON=r=>yx(ht.isHTMLForm(r)?new FormData(r):r);pn.getAdapter=Ax.getAdapter;pn.HttpStatusCode=Qp;pn.default=pn;const{Axios:sR,AxiosError:aR,CanceledError:rR,isCancel:oR,CancelToken:lR,VERSION:cR,all:uR,Cancel:hR,isAxiosError:dR,spread:fR,toFormData:pR,AxiosHeaders:mR,HttpStatusCode:gR,formToJSON:yR,getAdapter:bR,mergeConfig:vR}=pn,De=pn.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});De.interceptors.request.use(r=>{const t=va.getState().token;return t&&(r.headers.Authorization=`Token ${t}`),r.data instanceof FormData&&delete r.headers["Content-Type"],r});De.interceptors.response.use(r=>r,r=>(r.response?.status===401&&va.getState().logout(),Promise.reject(r)));const gl={login:(r,t)=>De.post("/auth/login/",{email:r,password:t}),register:r=>De.post("/auth/register/",r),logout:()=>De.post("/auth/logout/"),me:()=>De.get("/auth/me/"),deleteAccount:()=>De.post("/auth/me/delete/")},Xh={list:()=>De.get("/projects/"),get:r=>De.get(`/projects/${r}/`),create:r=>De.post("/projects/",r),update:(r,t)=>De.patch(`/projects/${r}/`,t),delete:r=>De.delete(`/projects/${r}/`)},nl={list:()=>De.get("/presets/"),get:r=>De.get(`/presets/${r}/`),create:r=>De.post("/presets/",r),update:(r,t)=>De.patch(`/presets/${r}/`,t),delete:r=>De.delete(`/presets/${r}/`),addColor:(r,t)=>De.post(`/presets/${r}/colors/`,t),removeColor:(r,t)=>De.delete(`/presets/${r}/colors/${t}/`)},Gn={list:r=>De.get("/documents/",{params:r}),get:r=>De.get(`/documents/${r}/`),create:r=>De.post("/documents/",r),createWithFile:r=>De.post("/documents/",r),getPdf:r=>De.get(`/documents/${r}/pdf/`,{responseType:"arraybuffer"}),uploadPdf:(r,t)=>De.post(`/documents/${r}/upload_pdf/`,t),update:(r,t)=>De.patch(`/documents/${r}/`,t),delete:r=>De.delete(`/documents/${r}/`),highlights:r=>De.get(`/documents/${r}/highlights/`),createHighlight:(r,t)=>De.post(`/documents/${r}/highlights/`,t),updateHighlight:(r,t,e)=>De.patch(`/documents/${r}/highlights/${t}/`,e),deleteHighlight:(r,t)=>De.delete(`/documents/${r}/highlights/${t}/`)},j_={page:"bg-slate-50",surface:"bg-white",muted:"bg-slate-100"},Jt={body:"text-slate-800",heading:"text-slate-900",secondary:"text-slate-600",muted:"text-slate-500"},ma={default:"border-slate-200"},Qr="min-h-screen p-6",Tx="bg-white border-b border-slate-200",to="bg-slate-800 text-white rounded-lg px-4 py-2 text-sm font-medium hover:bg-slate-700 cursor-pointer",kc="p-2 rounded-lg text-slate-600 hover:bg-slate-100 cursor-pointer",X0="w-px h-6 bg-slate-200",ks=j_;function B_(){const r=ba(),t=va(y=>y.setToken),[e,i]=U.useState(""),[a,l]=U.useState(""),[c,u]=U.useState(""),[d,f]=U.useState(!1),p=async y=>{y.preventDefault(),u(""),f(!0);try{const{data:x}=await gl.login(e,a);t(x.token),r("/",{replace:!0})}catch(x){u(x.response?.data?.detail||x.response?.data?.email?.[0]||"Login failed")}finally{f(!1)}};return R.jsx("div",{className:`${Qr} ${ks.page} flex items-center justify-center`,children:R.jsxs("div",{className:"w-full max-w-sm",children:[R.jsx("h1",{className:`text-2xl font-semibold ${Jt.heading} mb-6`,children:"Sign in"}),R.jsxs("form",{onSubmit:p,className:"flex flex-col gap-4",children:[c&&R.jsx("p",{className:"text-sm text-red-600",children:c}),R.jsxs("label",{className:"flex flex-col gap-1",children:[R.jsx("span",{className:`text-sm ${Jt.secondary}`,children:"Email"}),R.jsx("input",{type:"email",value:e,onChange:y=>i(y.target.value),className:"border border-slate-200 rounded-lg px-3 py-2 text-slate-900",required:!0,autoComplete:"email"})]}),R.jsxs("label",{className:"flex flex-col gap-1",children:[R.jsx("span",{className:`text-sm ${Jt.secondary}`,children:"Password"}),R.jsx("input",{type:"password",value:a,onChange:y=>l(y.target.value),className:"border border-slate-200 rounded-lg px-3 py-2 text-slate-900",required:!0,autoComplete:"current-password"})]}),R.jsx("button",{type:"submit",disabled:d,className:to,children:d?"Signing in...":"Sign in"})]}),R.jsxs("p",{className:`mt-4 text-sm ${Jt.muted}`,children:["No account? ",R.jsx(nd,{to:"/register",className:"text-slate-700 underline",children:"Register"})]})]})})}function F_(){const r=ba(),t=va(y=>y.setToken),[e,i]=U.useState(""),[a,l]=U.useState(""),[c,u]=U.useState(""),[d,f]=U.useState(!1),p=async y=>{y.preventDefault(),u(""),f(!0);try{await gl.register({email:e,password:a});const{data:x}=await gl.login(e,a);t(x.token),r("/",{replace:!0})}catch(x){const S=x.response?.data;u(S?.email?.[0]||S?.password?.[0]||"Registration failed")}finally{f(!1)}};return R.jsx("div",{className:`${Qr} ${ks.page} flex items-center justify-center`,children:R.jsxs("div",{className:"w-full max-w-sm",children:[R.jsx("h1",{className:`text-2xl font-semibold ${Jt.heading} mb-6`,children:"Create account"}),R.jsxs("form",{onSubmit:p,className:"flex flex-col gap-4",children:[c&&R.jsx("p",{className:"text-sm text-red-600",children:c}),R.jsxs("label",{className:"flex flex-col gap-1",children:[R.jsx("span",{className:`text-sm ${Jt.secondary}`,children:"Email"}),R.jsx("input",{type:"email",value:e,onChange:y=>i(y.target.value),className:"border border-slate-200 rounded-lg px-3 py-2 text-slate-900",required:!0,autoComplete:"email"})]}),R.jsxs("label",{className:"flex flex-col gap-1",children:[R.jsx("span",{className:`text-sm ${Jt.secondary}`,children:"Password"}),R.jsx("input",{type:"password",value:a,onChange:y=>l(y.target.value),className:"border border-slate-200 rounded-lg px-3 py-2 text-slate-900",required:!0,autoComplete:"new-password"})]}),R.jsx("button",{type:"submit",disabled:d,className:to,children:d?"Creating account...":"Register"})]}),R.jsxs("p",{className:`mt-4 text-sm ${Jt.muted}`,children:["Already have an account? ",R.jsx(nd,{to:"/login",className:"text-slate-700 underline",children:"Sign in"})]})]})})}const Rx=(...r)=>r.filter((t,e,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===e).join(" ").trim();const I_=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const U_=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,i)=>i?i.toUpperCase():e.toLowerCase());const Y0=r=>{const t=U_(r);return t.charAt(0).toUpperCase()+t.slice(1)};var z_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const H_=r=>{for(const t in r)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const q_=U.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:i,className:a="",children:l,iconNode:c,...u},d)=>U.createElement("svg",{ref:d,...z_,width:t,height:t,stroke:r,strokeWidth:i?Number(e)*24/Number(t):e,className:Rx("lucide",a),...!l&&!H_(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,p])=>U.createElement(f,p)),...Array.isArray(l)?l:[l]]));const on=(r,t)=>{const e=U.forwardRef(({className:i,...a},l)=>U.createElement(q_,{ref:l,iconNode:t,className:Rx(`lucide-${I_(Y0(r))}`,`lucide-${r}`,i),...a}));return e.displayName=Y0(r),e};const G_=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ld=on("arrow-left",G_);const K_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Q0=on("check",K_);const V_=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],$_=on("chevron-down",V_);const X_=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Y_=on("chevron-right",X_);const Q_=[["path",{d:"M11 21a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1",key:"likhh7"}],["path",{d:"M16 16a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1",key:"17ky3x"}],["path",{d:"M21 6a2 2 0 0 0-.586-1.414l-2-2A2 2 0 0 0 17 2h-3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1z",key:"1hyeo0"}]],W_=on("file-stack",Q_);const Z_=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Mx=on("file-text",Z_);const J_=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],tC=on("layers",J_);const eC=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],nC=on("list-ordered",eC);const iC=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ns=on("loader-circle",iC);const sC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],jm=on("log-out",sC);const aC=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],rC=on("palette",aC);const oC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],lC=on("panel-right-close",oC);const cC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],uC=on("panel-right-open",cC);const hC=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Wp=on("pencil",hC);const dC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Zp=on("plus",dC);const fC=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],pC=on("search",fC);const mC=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],gC=on("settings-2",mC);const yC=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],cd=on("trash-2",yC);const bC=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Jp=on("upload",bC);const vC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],tm=on("x",vC);const xC=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],wC=on("zoom-in",xC);const SC=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],AC=on("zoom-out",SC),pa=["#f59e0b","#3b82f6","#10b981","#ef4444","#8b5cf6","#ec4899","#06b6d4","#f97316"];function EC(r){if(!r)return"";const t=new Date(r);if(Number.isNaN(t.getTime()))return"";const e=new Date,i=e-t,a=Math.floor(i/6e4),l=Math.floor(i/36e5),c=Math.floor(i/864e5);return a<1?"Just now":a<60?`${a} min ago`:l<24?`${l} hour${l===1?"":"s"} ago`:c===1?"Yesterday":c<7?`${c} days ago`:t.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:t.getFullYear()!==e.getFullYear()?"numeric":void 0})}function _C({project:r,onOpen:t}){const[e,i]=U.useState(!1),a=r.document_count??0,l=r.annotation_count??0,c=r.color&&pa.includes(r.color)?r.color:pa[r.id%pa.length];return R.jsxs("div",{onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onClick:()=>t(r.id),role:"button",tabIndex:0,onKeyDown:u=>u.key==="Enter"&&t(r.id),className:"flex items-center gap-4 rounded-xl border border-slate-200 bg-white px-5 py-5 cursor-pointer transition-all duration-200",style:{boxShadow:e?"0 4px 12px rgba(71,85,105,0.08)":"0 1px 3px rgba(0,0,0,0.04)",transform:e?"translateY(-1px)":"none",background:e?"#f8fafc":"#fff"},children:[R.jsx("div",{className:"shrink-0 rounded-sm",style:{width:4,height:48,background:c}}),R.jsxs("div",{className:"flex-1 min-w-0",children:[R.jsx("div",{className:"text-base font-normal text-slate-900 truncate",style:{fontFamily:"'Instrument Serif', serif"},children:r.name}),R.jsxs("div",{className:"flex items-center gap-3 mt-1 text-[13px] text-slate-400",style:{fontFamily:"'JetBrains Mono', monospace"},children:[R.jsxs("span",{className:"flex items-center gap-1",children:[R.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-slate-400",children:[R.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),R.jsx("polyline",{points:"14 2 14 8 20 8"})]}),a," ",a===1?"doc":"docs"]}),R.jsx("span",{className:"w-0.5 h-0.5 rounded-full bg-slate-300"}),R.jsxs("span",{className:"flex items-center gap-1",children:[R.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-slate-400",children:[R.jsx("path",{d:"M12 20h9"}),R.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})]}),l," ",l===1?"annotation":"annotations"]})]})]}),R.jsx("div",{className:"text-[13px] text-slate-400 whitespace-nowrap shrink-0",style:{fontFamily:"'JetBrains Mono', monospace"},children:EC(r.updated_at)}),R.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:e?"#475569":"#cbd5e1",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"shrink-0 transition-colors",children:R.jsx("polyline",{points:"9 18 15 12 9 6"})})]})}function CC({onClose:r,onCreate:t,isPending:e,defaultColorIndex:i=0}){const[a,l]=U.useState(""),[c,u]=U.useState(pa[i%pa.length]),d=()=>{const f=a.trim();f&&(t(f,c),l(""),u(pa[i%pa.length]))};return R.jsx("div",{className:"fixed inset-0 bg-slate-950/40 backdrop-blur-sm flex items-center justify-center z-[1000]",onClick:r,children:R.jsxs("div",{className:"bg-white rounded-xl p-8 w-full max-w-[420px] shadow-xl mx-4",onClick:f=>f.stopPropagation(),children:[R.jsx("h2",{className:"m-0 text-xl font-normal text-slate-900",style:{fontFamily:"'Instrument Serif', serif"},children:"New project"}),R.jsx("p",{className:"mt-2 mb-6 text-sm text-slate-500",style:{fontFamily:"'DM Sans', sans-serif"},children:"Group related deal documents together."}),R.jsx("label",{className:"block text-[13px] font-medium text-slate-600 mb-1.5 uppercase tracking-wider",style:{fontFamily:"'JetBrains Mono', monospace"},children:"Project name"}),R.jsx("input",{type:"text",value:a,onChange:f=>l(f.target.value),placeholder:"e.g. Meridian Healthcare CIM",autoFocus:!0,className:"w-full px-3.5 py-2.5 text-[15px] border border-slate-200 rounded-lg outline-none text-slate-800 focus:border-slate-600 transition-colors box-border",style:{fontFamily:"'DM Sans', sans-serif"}}),R.jsx("label",{className:"block text-[13px] font-medium text-slate-600 mt-5 mb-2 uppercase tracking-wider",style:{fontFamily:"'JetBrains Mono', monospace"},children:"Colour"}),R.jsx("div",{className:"flex gap-2",children:pa.map(f=>R.jsx("button",{type:"button",onClick:()=>u(f),className:"w-7 h-7 rounded-full shrink-0 transition-all border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2",style:{background:f,borderColor:c===f?"#1e293b":"transparent",outline:c===f?"2px solid #fff":"none",outlineOffset:-4}},f))}),R.jsxs("div",{className:"flex justify-end gap-2.5 mt-7",style:{fontFamily:"'DM Sans', sans-serif"},children:[R.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium border border-slate-200 rounded-lg bg-white text-slate-500 hover:bg-slate-50",children:"Cancel"}),R.jsx("button",{type:"button",onClick:d,disabled:!a.trim()||e,className:"px-4 py-2 text-sm font-medium rounded-lg text-white transition-colors disabled:bg-slate-300 disabled:cursor-default hover:bg-slate-700",style:{background:a.trim()&&!e?"#1e293b":"#cbd5e1"},children:e?"Creating":"Create project"})]})]})})}function TC(){const r=ba(),t=io(),e=va(k=>k.logout),[i,a]=U.useState(!1),[l,c]=U.useState(""),{data:u}=es({queryKey:["me"],queryFn:async()=>{const{data:k}=await gl.me();return k}}),{data:d,isLoading:f}=es({queryKey:["projects"],queryFn:async()=>{const{data:k}=await Xh.list();return k}}),p=Array.isArray(d)?d:d?.results??[],y=p.filter(k=>k.name.toLowerCase().includes(l.toLowerCase())),x=p.reduce((k,N)=>k+(N.document_count??0),0),S=p.reduce((k,N)=>k+(N.annotation_count??0),0),A=Os({mutationFn:({name:k,color:N})=>Xh.create({name:k.trim(),color:N}),onSuccess:()=>{t.invalidateQueries({queryKey:["projects"]}),a(!1)}}),E=(k,N)=>{A.mutate({name:k,color:N})},T=()=>{e(),r("/login",{replace:!0})},M=(u?.email?.[0]||u?.username?.[0]||"?").toUpperCase();return R.jsxs("div",{className:"min-h-screen bg-slate-50 antialiased",style:{fontFamily:"'DM Sans', sans-serif",color:"#1e293b"},children:[R.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=DM+Sans:ital,wght@0,400;0,500;0,600;1,400&family=JetBrains+Mono:wght@400;500&display=swap",rel:"stylesheet"}),R.jsxs("header",{className:"bg-white/92 backdrop-blur-md border-b border-slate-200 py-4 px-10 flex items-center justify-between",children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("div",{className:"w-6 h-6 rounded-md bg-slate-700 flex items-center justify-center text-white text-xs font-semibold",style:{fontFamily:"'DM Sans', sans-serif"},children:"W"}),R.jsx("span",{className:"text-[1.05rem] font-semibold text-slate-900",style:{fontFamily:"'Instrument Serif', serif"},children:"WiseMark"})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("button",{type:"button",onClick:T,className:"p-2 rounded-lg text-slate-500 hover:text-slate-700 hover:bg-slate-100",title:"Sign out",children:R.jsx(jm,{className:"w-4 h-4"})}),R.jsx("button",{type:"button",onClick:()=>r("/app/settings"),className:"w-8 h-8 rounded-full bg-slate-700 text-white flex items-center justify-center text-[13px] font-semibold hover:bg-slate-600 transition-colors cursor-pointer",style:{fontFamily:"'DM Sans', sans-serif"},title:"Account settings",children:M})]})]}),R.jsxs("div",{className:"max-w-[720px] mx-auto px-6 py-10",style:{fontFamily:"'DM Sans', sans-serif"},children:[R.jsxs("div",{className:"flex items-start justify-between mb-2",children:[R.jsx("h1",{className:"m-0 text-[28px] text-slate-950",style:{fontFamily:"'Instrument Serif', serif",fontWeight:700,letterSpacing:"0.01em"},children:"Projects"}),R.jsxs("button",{type:"button",onClick:()=>a(!0),className:"flex items-center gap-1.5 px-4 py-2 text-sm font-medium rounded-lg text-white transition-colors hover:bg-slate-700",style:{background:"#1e293b",fontFamily:"'DM Sans', sans-serif"},children:[R.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[R.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),R.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"New project"]})]}),R.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-400 mb-6 uppercase",style:{fontFamily:"'JetBrains Mono', monospace",letterSpacing:"0.08em"},children:[R.jsxs("span",{children:[p.length," project",p.length!==1?"s":""]}),R.jsx("span",{className:"w-0.5 h-0.5 rounded-full bg-slate-300"}),R.jsxs("span",{children:[x," document",x!==1?"s":""]}),R.jsx("span",{className:"w-0.5 h-0.5 rounded-full bg-slate-300"}),R.jsxs("span",{children:[S," annotation",S!==1?"s":""]})]}),p.length>3&&R.jsxs("div",{className:"relative mb-4",children:[R.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#94a3b8",strokeWidth:"2",className:"absolute left-3 top-1/2 -translate-y-1/2",children:[R.jsx("circle",{cx:"11",cy:"11",r:"8"}),R.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),R.jsx("input",{type:"text",placeholder:"Search projects",value:l,onChange:k=>c(k.target.value),className:"w-full py-2.5 pl-9 pr-3.5 text-sm border border-slate-200 rounded-lg outline-none text-slate-800 bg-white box-border",style:{fontFamily:"'DM Sans', sans-serif"}})]}),f?R.jsxs("div",{className:"flex items-center gap-2 text-slate-500 py-12",style:{fontFamily:"'DM Sans', sans-serif"},children:[R.jsx(Ns,{className:"w-5 h-5 animate-spin"}),"Loading projects"]}):R.jsx("div",{className:"flex flex-col gap-2",children:y.map(k=>R.jsx(_C,{project:k,onOpen:N=>r(`/project/${N}`)},k.id))}),!f&&y.length===0&&l&&R.jsxs("div",{className:"text-center py-12 text-slate-500 text-sm",style:{fontFamily:"'DM Sans', sans-serif"},children:['No projects match "',l,'"']}),!f&&p.length===0&&R.jsxs("div",{className:"text-center py-16 text-slate-500",style:{fontFamily:"'DM Sans', sans-serif"},children:[R.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#cbd5e1",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"mx-auto mb-4",children:R.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),R.jsx("div",{className:"text-base font-medium text-slate-600 mb-1.5",children:"No projects yet"}),R.jsx("div",{className:"text-sm text-slate-500",children:"Create a project to start organising your deal documents."})]})]}),i&&R.jsx(CC,{onClose:()=>a(!1),onCreate:E,isPending:A.isPending,defaultColorIndex:p.length%pa.length})]})}var Ih={exports:{}},RC=Ih.exports,W0;function MC(){return W0||(W0=1,(function(r,t){((e,i)=>{r.exports=i()})(RC,function(){var e=function(m,v){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(w,_){w.__proto__=_}:function(w,_){for(var D in _)Object.prototype.hasOwnProperty.call(_,D)&&(w[D]=_[D])}))(m,v)},i=function(){return(i=Object.assign||function(m){for(var v,w=1,_=arguments.length;w<_;w++)for(var D in v=arguments[w])Object.prototype.hasOwnProperty.call(v,D)&&(m[D]=v[D]);return m}).apply(this,arguments)};function a(m,v,w){for(var _,D=0,O=v.length;D<O;D++)!_&&D in v||((_=_||Array.prototype.slice.call(v,0,D))[D]=v[D]);return m.concat(_||Array.prototype.slice.call(v))}var l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:N1,c=Object.keys,u=Array.isArray;function d(m,v){return typeof v=="object"&&c(v).forEach(function(w){m[w]=v[w]}),m}typeof Promise>"u"||l.Promise||(l.Promise=Promise);var f=Object.getPrototypeOf,p={}.hasOwnProperty;function y(m,v){return p.call(m,v)}function x(m,v){typeof v=="function"&&(v=v(f(m))),(typeof Reflect>"u"?c:Reflect.ownKeys)(v).forEach(function(w){A(m,w,v[w])})}var S=Object.defineProperty;function A(m,v,w,_){S(m,v,d(w&&y(w,"get")&&typeof w.get=="function"?{get:w.get,set:w.set,configurable:!0}:{value:w,configurable:!0,writable:!0},_))}function E(m){return{from:function(v){return m.prototype=Object.create(v.prototype),A(m.prototype,"constructor",m),{extend:x.bind(null,m.prototype)}}}}var T=Object.getOwnPropertyDescriptor,M=[].slice;function k(m,v,w){return M.call(m,v,w)}function N(m,v){return v(m)}function F(m){if(!m)throw new Error("Assertion Failed")}function I(m){l.setImmediate?setImmediate(m):setTimeout(m,0)}function z(m,v){if(typeof v=="string"&&y(m,v))return m[v];if(!v)return m;if(typeof v!="string"){for(var w=[],_=0,D=v.length;_<D;++_){var O=z(m,v[_]);w.push(O)}return w}var P,j=v.indexOf(".");return j===-1||(P=m[v.substr(0,j)])==null?void 0:z(P,v.substr(j+1))}function H(m,v,w){if(m&&v!==void 0&&!("isFrozen"in Object&&Object.isFrozen(m)))if(typeof v!="string"&&"length"in v){F(typeof w!="string"&&"length"in w);for(var _=0,D=v.length;_<D;++_)H(m,v[_],w[_])}else{var O,P,j=v.indexOf(".");j!==-1?(O=v.substr(0,j),(j=v.substr(j+1))===""?w===void 0?u(m)&&!isNaN(parseInt(O))?m.splice(O,1):delete m[O]:m[O]=w:H(P=(P=m[O])&&y(m,O)?P:m[O]={},j,w)):w===void 0?u(m)&&!isNaN(parseInt(v))?m.splice(v,1):delete m[v]:m[v]=w}}function ct(m){var v,w={};for(v in m)y(m,v)&&(w[v]=m[v]);return w}var ut=[].concat;function At(m){return ut.apply([],m)}var J="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(At([8,16,32,64].map(function(m){return["Int","Uint","Float"].map(function(v){return v+m+"Array"})}))).filter(function(m){return l[m]}),Ct=new Set(J.map(function(m){return l[m]})),Rt=null;function Vt(m){return Rt=new WeakMap,m=(function v(w){if(!w||typeof w!="object")return w;var _=Rt.get(w);if(_)return _;if(u(w)){_=[],Rt.set(w,_);for(var D=0,O=w.length;D<O;++D)_.push(v(w[D]))}else if(Ct.has(w.constructor))_=w;else{var P,j=f(w);for(P in _=j===Object.prototype?{}:Object.create(j),Rt.set(w,_),w)y(w,P)&&(_[P]=v(w[P]))}return _})(m),Rt=null,m}var xt={}.toString;function zt(m){return xt.call(m).slice(8,-1)}var G=typeof Symbol<"u"?Symbol.iterator:"@@iterator",it=typeof G=="symbol"?function(m){var v;return m!=null&&(v=m[G])&&v.apply(m)}:function(){return null};function vt(m,v){v=m.indexOf(v),0<=v&&m.splice(v,1)}var Ht={};function Ot(m){var v,w,_,D;if(arguments.length===1){if(u(m))return m.slice();if(this===Ht&&typeof m=="string")return[m];if(D=it(m))for(w=[];!(_=D.next()).done;)w.push(_.value);else{if(m==null)return[m];if(typeof(v=m.length)!="number")return[m];for(w=new Array(v);v--;)w[v]=m[v]}}else for(v=arguments.length,w=new Array(v);v--;)w[v]=arguments[v];return w}var B=typeof Symbol<"u"?function(m){return m[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},J=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],$n=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(J),ft={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function wt(m,v){this.name=m,this.message=v}function Mt(m,v){return m+". Errors: "+Object.keys(v).map(function(w){return v[w].toString()}).filter(function(w,_,D){return D.indexOf(w)===_}).join(`
`)}function qt(m,v,w,_){this.failures=v,this.failedKeys=_,this.successCount=w,this.message=Mt(m,v)}function jt(m,v){this.name="BulkError",this.failures=Object.keys(v).map(function(w){return v[w]}),this.failuresByPos=v,this.message=Mt(m,this.failures)}E(wt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),E(qt).from(wt),E(jt).from(wt);var he=$n.reduce(function(m,v){return m[v]=v+"Error",m},{}),re=wt,Tt=$n.reduce(function(m,v){var w=v+"Error";function _(D,O){this.name=w,D?typeof D=="string"?(this.message="".concat(D).concat(O?`
 `+O:""),this.inner=O||null):typeof D=="object"&&(this.message="".concat(D.name," ").concat(D.message),this.inner=D):(this.message=ft[v]||w,this.inner=null)}return E(_).from(re),m[v]=_,m},{}),de=(Tt.Syntax=SyntaxError,Tt.Type=TypeError,Tt.Range=RangeError,J.reduce(function(m,v){return m[v+"Error"]=Tt[v],m},{}));J=$n.reduce(function(m,v){return["Syntax","Type","Range"].indexOf(v)===-1&&(m[v+"Error"]=Tt[v]),m},{});function Wt(){}function Ee(m){return m}function Pt(m,v){return m==null||m===Ee?v:function(w){return v(m(w))}}function gt(m,v){return function(){m.apply(this,arguments),v.apply(this,arguments)}}function pe(m,v){return m===Wt?v:function(){var w=m.apply(this,arguments),_=(w!==void 0&&(arguments[0]=w),this.onsuccess),D=this.onerror,O=(this.onsuccess=null,this.onerror=null,v.apply(this,arguments));return _&&(this.onsuccess=this.onsuccess?gt(_,this.onsuccess):_),D&&(this.onerror=this.onerror?gt(D,this.onerror):D),O!==void 0?O:w}}function Le(m,v){return m===Wt?v:function(){m.apply(this,arguments);var w=this.onsuccess,_=this.onerror;this.onsuccess=this.onerror=null,v.apply(this,arguments),w&&(this.onsuccess=this.onsuccess?gt(w,this.onsuccess):w),_&&(this.onerror=this.onerror?gt(_,this.onerror):_)}}function Ln(m,v){return m===Wt?v:function(D){var _=m.apply(this,arguments),D=(d(D,_),this.onsuccess),O=this.onerror,P=(this.onsuccess=null,this.onerror=null,v.apply(this,arguments));return D&&(this.onsuccess=this.onsuccess?gt(D,this.onsuccess):D),O&&(this.onerror=this.onerror?gt(O,this.onerror):O),_===void 0?P===void 0?void 0:P:d(_,P)}}function Cn(m,v){return m===Wt?v:function(){return v.apply(this,arguments)!==!1&&m.apply(this,arguments)}}function nn(m,v){return m===Wt?v:function(){var w=m.apply(this,arguments);if(w&&typeof w.then=="function"){for(var _=this,D=arguments.length,O=new Array(D);D--;)O[D]=arguments[D];return w.then(function(){return v.apply(_,O)})}return v.apply(this,arguments)}}J.ModifyError=qt,J.DexieError=wt,J.BulkError=jt;var Tn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function iu(m){Tn=m}var cr={},Vn=100,ur=typeof Promise>"u"?[]:($n=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[ur=crypto.subtle.digest("SHA-512",new Uint8Array([0])),f(ur),$n]:[$n,f($n),$n]),$n=ur[0],Xs=ur[1],Xs=Xs&&Xs.then,as=$n&&$n.constructor,xa=!!ur[2],hr=function(m,v){dr.push([m,v]),oo&&(queueMicrotask(su),oo=!1)},ro=!0,oo=!0,Ps=[],rs=[],Pn=Ee,jn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Wt,pgp:!1,env:{},finalize:Wt},Bt=jn,dr=[],js=0,lo=[];function kt(m){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var v=this._PSD=Bt;if(typeof m!="function"){if(m!==cr)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Xi(this,this._value)}else this._state=null,this._value=null,++v.ref,(function w(_,D){try{D(function(O){if(_._state===null){if(O===_)throw new TypeError("A promise cannot be resolved with itself.");var P=_._lib&&os();O&&typeof O.then=="function"?w(_,function(j,V){O instanceof kt?O._then(j,V):O.then(j,V)}):(_._state=!0,_._value=O,pr(_)),P&&Ni()}},Xi.bind(null,_))}catch(O){Xi(_,O)}})(this,m)}var wa={get:function(){var m=Bt,v=yr;function w(_,D){var O=this,P=!m.global&&(m!==Bt||v!==yr),j=P&&!ti(),V=new kt(function(et,$){Bs(O,new fr(co(_,m,P,j),co(D,m,P,j),et,$,m))});return this._consoleTask&&(V._consoleTask=this._consoleTask),V}return w.prototype=cr,w},set:function(m){A(this,"then",m&&m.prototype===cr?wa:{get:function(){return m},set:wa.set})}};function fr(m,v,w,_,D){this.onFulfilled=typeof m=="function"?m:null,this.onRejected=typeof v=="function"?v:null,this.resolve=w,this.reject=_,this.psd=D}function Xi(m,v){var w,_;rs.push(v),m._state===null&&(w=m._lib&&os(),v=Pn(v),m._state=!1,m._value=v,_=m,Ps.some(function(D){return D._value===_._value})||Ps.push(_),pr(m),w)&&Ni()}function pr(m){var v=m._listeners;m._listeners=[];for(var w=0,_=v.length;w<_;++w)Bs(m,v[w]);var D=m._PSD;--D.ref||D.finalize(),js===0&&(++js,hr(function(){--js==0&&Al()},[]))}function Bs(m,v){if(m._state===null)m._listeners.push(v);else{var w=m._state?v.onFulfilled:v.onRejected;if(w===null)return(m._state?v.resolve:v.reject)(m._value);++v.psd.ref,++js,hr(Sd,[w,m,v])}}function Sd(m,v,w){try{var _,D=v._value;!v._state&&rs.length&&(rs=[]),_=Tn&&v._consoleTask?v._consoleTask.run(function(){return m(D)}):m(D),v._state||rs.indexOf(D)!==-1||(O=>{for(var P=Ps.length;P;)if(Ps[--P]._value===O._value)return Ps.splice(P,1)})(v),w.resolve(_)}catch(O){w.reject(O)}finally{--js==0&&Al(),--w.psd.ref||w.psd.finalize()}}function su(){bi(jn,function(){os()&&Ni()})}function os(){var m=ro;return oo=ro=!1,m}function Ni(){var m,v,w;do for(;0<dr.length;)for(m=dr,dr=[],w=m.length,v=0;v<w;++v){var _=m[v];_[0].apply(null,_[1])}while(0<dr.length);oo=ro=!0}function Al(){for(var m=Ps,v=(Ps=[],m.forEach(function(_){_._PSD.onunhandled.call(null,_._value,_)}),lo.slice(0)),w=v.length;w;)v[--w]()}function mr(m){return new kt(cr,!1,m)}function qe(m,v){var w=Bt;return function(){var _=os(),D=Bt;try{return cs(w,!0),m.apply(this,arguments)}catch(O){v&&v(O)}finally{cs(D,!1),_&&Ni()}}}x(kt.prototype,{then:wa,_then:function(m,v){Bs(this,new fr(null,null,m,v,Bt))},catch:function(m){var v,w;return arguments.length===1?this.then(null,m):(v=m,w=arguments[1],typeof v=="function"?this.then(null,function(_){return(_ instanceof v?w:mr)(_)}):this.then(null,function(_){return(_&&_.name===v?w:mr)(_)}))},finally:function(m){return this.then(function(v){return kt.resolve(m()).then(function(){return v})},function(v){return kt.resolve(m()).then(function(){return mr(v)})})},timeout:function(m,v){var w=this;return m<1/0?new kt(function(_,D){var O=setTimeout(function(){return D(new Tt.Timeout(v))},m);w.then(_,D).finally(clearTimeout.bind(null,O))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&A(kt.prototype,Symbol.toStringTag,"Dexie.Promise"),jn.env=_l(),x(kt,{all:function(){var m=Ot.apply(null,arguments).map(Aa);return new kt(function(v,w){m.length===0&&v([]);var _=m.length;m.forEach(function(D,O){return kt.resolve(D).then(function(P){m[O]=P,--_||v(m)},w)})})},resolve:function(m){return m instanceof kt?m:m&&typeof m.then=="function"?new kt(function(v,w){m.then(v,w)}):new kt(cr,!0,m)},reject:mr,race:function(){var m=Ot.apply(null,arguments).map(Aa);return new kt(function(v,w){m.map(function(_){return kt.resolve(_).then(v,w)})})},PSD:{get:function(){return Bt},set:function(m){return Bt=m}},totalEchoes:{get:function(){return yr}},newPSD:Ke,usePSD:bi,scheduler:{get:function(){return hr},set:function(m){hr=m}},rejectionMapper:{get:function(){return Pn},set:function(m){Pn=m}},follow:function(m,v){return new kt(function(w,_){return Ke(function(D,O){var P=Bt;P.unhandleds=[],P.onunhandled=O,P.finalize=gt(function(){var j,V=this;j=function(){V.unhandleds.length===0?D():O(V.unhandleds[0])},lo.push(function et(){j(),lo.splice(lo.indexOf(et),1)}),++js,hr(function(){--js==0&&Al()},[])},P.finalize),m()},v,w,_)})}}),as&&(as.allSettled&&A(kt,"allSettled",function(){var m=Ot.apply(null,arguments).map(Aa);return new kt(function(v){m.length===0&&v([]);var w=m.length,_=new Array(w);m.forEach(function(D,O){return kt.resolve(D).then(function(P){return _[O]={status:"fulfilled",value:P}},function(P){return _[O]={status:"rejected",reason:P}}).then(function(){return--w||v(_)})})})}),as.any&&typeof AggregateError<"u"&&A(kt,"any",function(){var m=Ot.apply(null,arguments).map(Aa);return new kt(function(v,w){m.length===0&&w(new AggregateError([]));var _=m.length,D=new Array(_);m.forEach(function(O,P){return kt.resolve(O).then(function(j){return v(j)},function(j){D[P]=j,--_||w(new AggregateError(D))})})})}),as.withResolvers)&&(kt.withResolvers=as.withResolvers);var ln={awaits:0,echoes:0,id:0},El=0,Sa=[],gr=0,yr=0,ls=0;function Ke(m,P,w,_){var D=Bt,O=Object.create(D),P=(O.parent=D,O.ref=0,O.global=!1,O.id=++ls,jn.env,O.env=xa?{Promise:kt,PromiseProp:{value:kt,configurable:!0,writable:!0},all:kt.all,race:kt.race,allSettled:kt.allSettled,any:kt.any,resolve:kt.resolve,reject:kt.reject}:{},P&&d(O,P),++D.ref,O.finalize=function(){--this.parent.ref||this.parent.finalize()},bi(O,m,w,_));return O.ref===0&&O.finalize(),P}function cn(){return ln.id||(ln.id=++El),++ln.awaits,ln.echoes+=Vn,ln.id}function ti(){return!!ln.awaits&&(--ln.awaits==0&&(ln.id=0),ln.echoes=ln.awaits*Vn,!0)}function Aa(m){return ln.echoes&&m&&m.constructor===as?(cn(),m.then(function(v){return ti(),v},function(v){return ti(),Be(v)})):m}function Ad(){var m=Sa[Sa.length-1];Sa.pop(),cs(m,!1)}function cs(m,v){var w,_,D=Bt;(v?!ln.echoes||gr++&&m===Bt:!gr||--gr&&m===Bt)||queueMicrotask(v?(function(O){++yr,ln.echoes&&--ln.echoes!=0||(ln.echoes=ln.awaits=ln.id=0),Sa.push(Bt),cs(O,!0)}).bind(null,m):Ad),m!==Bt&&(Bt=m,D===jn&&(jn.env=_l()),xa)&&(w=jn.env.Promise,_=m.env,D.global||m.global)&&(Object.defineProperty(l,"Promise",_.PromiseProp),w.all=_.all,w.race=_.race,w.resolve=_.resolve,w.reject=_.reject,_.allSettled&&(w.allSettled=_.allSettled),_.any)&&(w.any=_.any)}function _l(){var m=l.Promise;return xa?{Promise:m,PromiseProp:Object.getOwnPropertyDescriptor(l,"Promise"),all:m.all,race:m.race,allSettled:m.allSettled,any:m.any,resolve:m.resolve,reject:m.reject}:{}}function bi(m,v,w,_,D){var O=Bt;try{return cs(m,!0),v(w,_,D)}finally{cs(O,!1)}}function co(m,v,w,_){return typeof m!="function"?m:function(){var D=Bt;w&&cn(),cs(v,!0);try{return m.apply(this,arguments)}finally{cs(D,!1),_&&queueMicrotask(ti)}}}function us(m){Promise===as&&ln.echoes===0?gr===0?m():enqueueNativeMicroTask(m):setTimeout(m,0)}(""+Xs).indexOf("[native code]")===-1&&(cn=ti=Wt);var Be=kt.reject,vi="",Xn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",un="String expected.",Fs=[],br="__dbnames",Yi="readonly",hs="readwrite";function Is(m,v){return m?v?function(){return m.apply(this,arguments)&&v.apply(this,arguments)}:m:v}var Cl={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function vr(m){return typeof m!="string"||/\./.test(m)?function(v){return v}:function(v){return v[m]===void 0&&m in v&&delete(v=Vt(v))[m],v}}function au(){throw Tt.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ue(m,v){try{var w=xr(m),_=xr(v);if(w!==_)return w==="Array"?1:_==="Array"?-1:w==="binary"?1:_==="binary"?-1:w==="string"?1:_==="string"?-1:w==="Date"?1:_!=="Date"?NaN:-1;switch(w){case"number":case"Date":case"string":return v<m?1:m<v?-1:0;case"binary":for(var D=Oi(m),O=Oi(v),P=D.length,j=O.length,V=P<j?P:j,et=0;et<V;++et)if(D[et]!==O[et])return D[et]<O[et]?-1:1;return P===j?0:P<j?-1:1;case"Array":for(var $=m,K=v,Q=$.length,Z=K.length,X=Q<Z?Q:Z,Y=0;Y<X;++Y){var st=ue($[Y],K[Y]);if(st!==0)return st}return Q===Z?0:Q<Z?-1:1}}catch{}return NaN}function xr(m){var v=typeof m;return v=="object"&&(ArrayBuffer.isView(m)||(v=zt(m))==="ArrayBuffer")?"binary":v}function Oi(m){return m instanceof Uint8Array?m:ArrayBuffer.isView(m)?new Uint8Array(m.buffer,m.byteOffset,m.byteLength):new Uint8Array(m)}function Bn(m,v,w){var _=m.schema.yProps;return _?(v&&0<w.numFailures&&(v=v.filter(function(D,O){return!w.failures[O]})),Promise.all(_.map(function(D){return D=D.updatesTable,v?m.db.table(D).where("k").anyOf(v).delete():m.db.table(D).clear()})).then(function(){return w})):w}ru.prototype.execute=function(m){var v=this["@@propmod"];if(v.add!==void 0){var w=v.add;if(u(w))return a(a([],u(m)?m:[],!0),w).sort();if(typeof w=="number")return(Number(m)||0)+w;if(typeof w=="bigint")try{return BigInt(m)+w}catch{return BigInt(0)+w}throw new TypeError("Invalid term ".concat(w))}if(v.remove!==void 0){var _=v.remove;if(u(_))return u(m)?m.filter(function(D){return!_.includes(D)}).sort():[];if(typeof _=="number")return Number(m)-_;if(typeof _=="bigint")try{return BigInt(m)-_}catch{return BigInt(0)-_}throw new TypeError("Invalid subtrahend ".concat(_))}return w=(w=v.replacePrefix)==null?void 0:w[0],w&&typeof m=="string"&&m.startsWith(w)?v.replacePrefix[1]+m.substring(w.length):m};var Ea=ru;function ru(m){this["@@propmod"]=m}function uo(m,v){for(var w=c(v),_=w.length,D=!1,O=0;O<_;++O){var P=w[O],j=v[P],V=z(m,P);j instanceof Ea?(H(m,P,j.execute(V)),D=!0):V!==j&&(H(m,P,j),D=!0)}return D}_e.prototype._trans=function(m,v,w){var _=this._tx||Bt.trans,D=this.name,O=Tn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(m==="readonly"?"read":"write"," ").concat(this.name));function P(et,$,K){if(K.schema[D])return v(K.idbtrans,K);throw new Tt.NotFound("Table "+D+" not part of transaction")}var j=os();try{var V=_&&_.db._novip===this.db._novip?_===Bt.trans?_._promise(m,P,w):Ke(function(){return _._promise(m,P,w)},{trans:_,transless:Bt.transless||Bt}):(function et($,K,Q,Z){if($.idbdb&&($._state.openComplete||Bt.letThrough||$._vip)){var X=$._createTransaction(K,Q,$._dbSchema);try{X.create(),$._state.PR1398_maxLoop=3}catch(Y){return Y.name===he.InvalidState&&$.isOpen()&&0<--$._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),$.close({disableAutoOpen:!1}),$.open().then(function(){return et($,K,Q,Z)})):Be(Y)}return X._promise(K,function(Y,st){return Ke(function(){return Bt.trans=X,Z(Y,st,X)})}).then(function(Y){if(K==="readwrite")try{X.idbtrans.commit()}catch{}return K==="readonly"?Y:X._completion.then(function(){return Y})})}if($._state.openComplete)return Be(new Tt.DatabaseClosed($._state.dbOpenError));if(!$._state.isBeingOpened){if(!$._state.autoOpen)return Be(new Tt.DatabaseClosed);$.open().catch(Wt)}return $._state.dbReadyPromise.then(function(){return et($,K,Q,Z)})})(this.db,m,[this.name],P);return O&&(V._consoleTask=O,V=V.catch(function(et){return console.trace(et),Be(et)})),V}finally{j&&Ni()}},_e.prototype.get=function(m,v){var w=this;return m&&m.constructor===Object?this.where(m).first(v):m==null?Be(new Tt.Type("Invalid argument to Table.get()")):this._trans("readonly",function(_){return w.core.get({trans:_,key:m}).then(function(D){return w.hook.reading.fire(D)})}).then(v)},_e.prototype.where=function(m){if(typeof m=="string")return new this.db.WhereClause(this,m);if(u(m))return new this.db.WhereClause(this,"[".concat(m.join("+"),"]"));var v=c(m);if(v.length===1)return this.where(v[0]).equals(m[v[0]]);var w=this.schema.indexes.concat(this.schema.primKey).filter(function(j){if(j.compound&&v.every(function(et){return 0<=j.keyPath.indexOf(et)})){for(var V=0;V<v.length;++V)if(v.indexOf(j.keyPath[V])===-1)return!1;return!0}return!1}).sort(function(j,V){return j.keyPath.length-V.keyPath.length})[0];if(w&&this.db._maxKey!==vi)return P=w.keyPath.slice(0,v.length),this.where(P).equals(P.map(function(j){return m[j]}));!w&&Tn&&console.warn("The query ".concat(JSON.stringify(m)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(v.join("+"),"]"));var _=this.schema.idxByName;function D(j,V){return ue(j,V)===0}var P=v.reduce(function($,V){var et=$[0],$=$[1],K=_[V],Q=m[V];return[et||K,et||!K?Is($,K&&K.multi?function(Z){return Z=z(Z,V),u(Z)&&Z.some(function(X){return D(Q,X)})}:function(Z){return D(Q,z(Z,V))}):$]},[null,null]),O=P[0],P=P[1];return O?this.where(O.name).equals(m[O.keyPath]).filter(P):w?this.filter(P):this.where(v).equals("")},_e.prototype.filter=function(m){return this.toCollection().and(m)},_e.prototype.count=function(m){return this.toCollection().count(m)},_e.prototype.offset=function(m){return this.toCollection().offset(m)},_e.prototype.limit=function(m){return this.toCollection().limit(m)},_e.prototype.each=function(m){return this.toCollection().each(m)},_e.prototype.toArray=function(m){return this.toCollection().toArray(m)},_e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},_e.prototype.orderBy=function(m){return new this.db.Collection(new this.db.WhereClause(this,u(m)?"[".concat(m.join("+"),"]"):m))},_e.prototype.reverse=function(){return this.toCollection().reverse()},_e.prototype.mapToClass=function(m){for(var v=this.db,w=this.name,_=((this.schema.mappedClass=m).prototype instanceof au&&(m=(P=>{var j=$,V=P;if(typeof V!="function"&&V!==null)throw new TypeError("Class extends value "+String(V)+" is not a constructor or null");function et(){this.constructor=j}function $(){return P!==null&&P.apply(this,arguments)||this}return e(j,V),j.prototype=V===null?Object.create(V):(et.prototype=V.prototype,new et),Object.defineProperty($.prototype,"db",{get:function(){return v},enumerable:!1,configurable:!0}),$.prototype.table=function(){return w},$})(m)),new Set),D=m.prototype;D;D=f(D))Object.getOwnPropertyNames(D).forEach(function(P){return _.add(P)});function O(P){if(!P)return P;var j,V=Object.create(m.prototype);for(j in P)if(!_.has(j))try{V[j]=P[j]}catch{}return V}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=O,this.hook("reading",O),m},_e.prototype.defineClass=function(){return this.mapToClass(function(m){d(this,m)})},_e.prototype.add=function(m,v){var w=this,_=this.schema.primKey,D=_.auto,O=_.keyPath,P=m;return O&&D&&(P=vr(O)(m)),this._trans("readwrite",function(j){return w.core.mutate({trans:j,type:"add",keys:v!=null?[v]:null,values:[P]})}).then(function(j){return j.numFailures?kt.reject(j.failures[0]):j.lastResult}).then(function(j){if(O)try{H(m,O,j)}catch{}return j})},_e.prototype.upsert=function(m,v){var w=this,_=this.schema.primKey.keyPath;return this._trans("readwrite",function(D){return w.core.get({trans:D,key:m}).then(function(O){var P=O??{};return uo(P,v),_&&H(P,_,m),w.core.mutate({trans:D,type:"put",values:[P],keys:[m],upsert:!0,updates:{keys:[m],changeSpecs:[v]}}).then(function(j){return j.numFailures?kt.reject(j.failures[0]):!!O})})})},_e.prototype.update=function(m,v){return typeof m!="object"||u(m)?this.where(":id").equals(m).modify(v):(m=z(m,this.schema.primKey.keyPath))===void 0?Be(new Tt.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(m).modify(v)},_e.prototype.put=function(m,v){var w=this,_=this.schema.primKey,D=_.auto,O=_.keyPath,P=m;return O&&D&&(P=vr(O)(m)),this._trans("readwrite",function(j){return w.core.mutate({trans:j,type:"put",values:[P],keys:v!=null?[v]:null})}).then(function(j){return j.numFailures?kt.reject(j.failures[0]):j.lastResult}).then(function(j){if(O)try{H(m,O,j)}catch{}return j})},_e.prototype.delete=function(m){var v=this;return this._trans("readwrite",function(w){return v.core.mutate({trans:w,type:"delete",keys:[m]}).then(function(_){return Bn(v,[m],_)}).then(function(_){return _.numFailures?kt.reject(_.failures[0]):void 0})})},_e.prototype.clear=function(){var m=this;return this._trans("readwrite",function(v){return m.core.mutate({trans:v,type:"deleteRange",range:Cl}).then(function(w){return Bn(m,null,w)})}).then(function(v){return v.numFailures?kt.reject(v.failures[0]):void 0})},_e.prototype.bulkGet=function(m){var v=this;return this._trans("readonly",function(w){return v.core.getMany({keys:m,trans:w}).then(function(_){return _.map(function(D){return v.hook.reading.fire(D)})})})},_e.prototype.bulkAdd=function(m,v,w){var _=this,D=Array.isArray(v)?v:void 0,O=(w=w||(D?void 0:v))?w.allKeys:void 0;return this._trans("readwrite",function(P){var j=_.schema.primKey,et=j.auto,j=j.keyPath;if(j&&D)throw new Tt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(D&&D.length!==m.length)throw new Tt.InvalidArgument("Arguments objects and keys must have the same length");var V=m.length,et=j&&et?m.map(vr(j)):m;return _.core.mutate({trans:P,type:"add",keys:D,values:et,wantResults:O}).then(function($){var K=$.numFailures,Q=$.failures;if(K===0)return O?$.results:$.lastResult;throw new jt("".concat(_.name,".bulkAdd(): ").concat(K," of ").concat(V," operations failed"),Q)})})},_e.prototype.bulkPut=function(m,v,w){var _=this,D=Array.isArray(v)?v:void 0,O=(w=w||(D?void 0:v))?w.allKeys:void 0;return this._trans("readwrite",function(P){var j=_.schema.primKey,et=j.auto,j=j.keyPath;if(j&&D)throw new Tt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(D&&D.length!==m.length)throw new Tt.InvalidArgument("Arguments objects and keys must have the same length");var V=m.length,et=j&&et?m.map(vr(j)):m;return _.core.mutate({trans:P,type:"put",keys:D,values:et,wantResults:O}).then(function($){var K=$.numFailures,Q=$.failures;if(K===0)return O?$.results:$.lastResult;throw new jt("".concat(_.name,".bulkPut(): ").concat(K," of ").concat(V," operations failed"),Q)})})},_e.prototype.bulkUpdate=function(m){var v=this,w=this.core,_=m.map(function(P){return P.key}),D=m.map(function(P){return P.changes}),O=[];return this._trans("readwrite",function(P){return w.getMany({trans:P,keys:_,cache:"clone"}).then(function(j){var V=[],et=[],$=(m.forEach(function(K,Q){var Z=K.key,X=K.changes,Y=j[Q];if(Y){for(var st=0,ot=Object.keys(X);st<ot.length;st++){var nt=ot[st],pt=X[nt];if(nt===v.schema.primKey.keyPath){if(ue(pt,Z)!==0)throw new Tt.Constraint("Cannot update primary key in bulkUpdate()")}else H(Y,nt,pt)}O.push(Q),V.push(Z),et.push(Y)}}),V.length);return w.mutate({trans:P,type:"put",keys:V,values:et,updates:{keys:_,changeSpecs:D}}).then(function(K){var Q=K.numFailures,Z=K.failures;if(Q===0)return $;for(var X=0,Y=Object.keys(Z);X<Y.length;X++){var st,ot=Y[X],nt=O[Number(ot)];nt!=null&&(st=Z[ot],delete Z[ot],Z[nt]=st)}throw new jt("".concat(v.name,".bulkUpdate(): ").concat(Q," of ").concat($," operations failed"),Z)})})})},_e.prototype.bulkDelete=function(m){var v=this,w=m.length;return this._trans("readwrite",function(_){return v.core.mutate({trans:_,type:"delete",keys:m}).then(function(D){return Bn(v,m,D)})}).then(function(_){var D=_.numFailures,O=_.failures;if(D===0)return _.lastResult;throw new jt("".concat(v.name,".bulkDelete(): ").concat(D," of ").concat(w," operations failed"),O)})};var Tl=_e;function _e(){}function wr(m){function v(P,j){if(j){for(var V=arguments.length,et=new Array(V-1);--V;)et[V-1]=arguments[V];return w[P].subscribe.apply(null,et),m}if(typeof P=="string")return w[P]}var w={};v.addEventType=O;for(var _=1,D=arguments.length;_<D;++_)O(arguments[_]);return v;function O(P,j,V){var et,$;if(typeof P!="object")return j=j||Cn,$={subscribers:[],fire:V=V||Wt,subscribe:function(K){$.subscribers.indexOf(K)===-1&&($.subscribers.push(K),$.fire=j($.fire,K))},unsubscribe:function(K){$.subscribers=$.subscribers.filter(function(Q){return Q!==K}),$.fire=$.subscribers.reduce(j,V)}},w[P]=v[P]=$;c(et=P).forEach(function(K){var Q=et[K];if(u(Q))O(K,et[K][0],et[K][1]);else{if(Q!=="asap")throw new Tt.InvalidArgument("Invalid event config");var Z=O(K,Ee,function(){for(var X=arguments.length,Y=new Array(X);X--;)Y[X]=arguments[X];Z.subscribers.forEach(function(st){I(function(){st.apply(null,Y)})})})}})}}function Rn(m,v){return E(v).from({prototype:m}),v}function ds(m,v){return!(m.filter||m.algorithm||m.or)&&(v?m.justLimit:!m.replayFilter)}function ho(m,v){m.filter=Is(m.filter,v)}function Sr(m,v,w){var _=m.replayFilter;m.replayFilter=_?function(){return Is(_(),v())}:v,m.justLimit=w&&!_}function Qi(m,v){if(m.isPrimKey)return v.primaryKey;var w=v.getIndexByKeyPath(m.index);if(w)return w;throw new Tt.Schema("KeyPath "+m.index+" on object store "+v.name+" is not indexed")}function Rl(m,v,w){var _=Qi(m,v.schema);return v.openCursor({trans:w,values:!m.keysOnly,reverse:m.dir==="prev",unique:!!m.unique,query:{index:_,range:m.range}})}function Ar(m,v,w,_){var D,O,P=m.replayFilter?Is(m.filter,m.replayFilter()):m.filter;return m.or?(D={},O=function(j,V,et){var $,K;P&&!P(V,et,function(Q){return V.stop(Q)},function(Q){return V.fail(Q)})||((K=""+($=V.primaryKey))=="[object ArrayBuffer]"&&(K=""+new Uint8Array($)),y(D,K))||(D[K]=!0,v(j,V,et))},Promise.all([m.or._iterate(O,w),Us(Rl(m,_,w),m.algorithm,O,!m.keysOnly&&m.valueMapper)])):Us(Rl(m,_,w),Is(m.algorithm,P),v,!m.keysOnly&&m.valueMapper)}function Us(m,v,w,_){var D=qe(_?function(O,P,j){return w(_(O),P,j)}:w);return m.then(function(O){if(O)return O.start(function(){var P=function(){return O.continue()};v&&!v(O,function(j){return P=j},function(j){O.stop(j),P=Wt},function(j){O.fail(j),P=Wt})||D(O.value,O,function(j){return P=j}),P()})})}ve.prototype._read=function(m,v){var w=this._ctx;return w.error?w.table._trans(null,Be.bind(null,w.error)):w.table._trans("readonly",m).then(v)},ve.prototype._write=function(m){var v=this._ctx;return v.error?v.table._trans(null,Be.bind(null,v.error)):v.table._trans("readwrite",m,"locked")},ve.prototype._addAlgorithm=function(m){var v=this._ctx;v.algorithm=Is(v.algorithm,m)},ve.prototype._iterate=function(m,v){return Ar(this._ctx,m,v,this._ctx.table.core)},ve.prototype.clone=function(m){var v=Object.create(this.constructor.prototype),w=Object.create(this._ctx);return m&&d(w,m),v._ctx=w,v},ve.prototype.raw=function(){return this._ctx.valueMapper=null,this},ve.prototype.each=function(m){var v=this._ctx;return this._read(function(w){return Ar(v,m,w,v.table.core)})},ve.prototype.count=function(m){var v=this;return this._read(function(w){var _,D=v._ctx,O=D.table.core;return ds(D,!0)?O.count({trans:w,query:{index:Qi(D,O.schema),range:D.range}}).then(function(P){return Math.min(P,D.limit)}):(_=0,Ar(D,function(){return++_,!1},w,O).then(function(){return _}))}).then(m)},ve.prototype.sortBy=function(m,v){var w=m.split(".").reverse(),_=w[0],D=w.length-1;function O(V,et){return et?O(V[w[et]],et-1):V[_]}var P=this._ctx.dir==="next"?1:-1;function j(V,et){return ue(O(V,D),O(et,D))*P}return this.toArray(function(V){return V.sort(j)}).then(v)},ve.prototype.toArray=function(m){var v=this;return this._read(function(w){var _,D,O,P=v._ctx;return P.dir==="next"&&ds(P,!0)&&0<P.limit?(_=P.valueMapper,D=Qi(P,P.table.core.schema),P.table.core.query({trans:w,limit:P.limit,values:!0,query:{index:D,range:P.range}}).then(function(j){return j=j.result,_?j.map(_):j})):(O=[],Ar(P,function(j){return O.push(j)},w,P.table.core).then(function(){return O}))},m)},ve.prototype.offset=function(m){var v=this._ctx;return m<=0||(v.offset+=m,ds(v)?Sr(v,function(){var w=m;return function(_,D){return w===0||(w===1?--w:D(function(){_.advance(w),w=0}),!1)}}):Sr(v,function(){var w=m;return function(){return--w<0}})),this},ve.prototype.limit=function(m){return this._ctx.limit=Math.min(this._ctx.limit,m),Sr(this._ctx,function(){var v=m;return function(w,_,D){return--v<=0&&_(D),0<=v}},!0),this},ve.prototype.until=function(m,v){return ho(this._ctx,function(w,_,D){return!m(w.value)||(_(D),v)}),this},ve.prototype.first=function(m){return this.limit(1).toArray(function(v){return v[0]}).then(m)},ve.prototype.last=function(m){return this.reverse().first(m)},ve.prototype.filter=function(m){var v;return ho(this._ctx,function(w){return m(w.value)}),(v=this._ctx).isMatch=Is(v.isMatch,m),this},ve.prototype.and=function(m){return this.filter(m)},ve.prototype.or=function(m){return new this.db.WhereClause(this._ctx.table,m,this)},ve.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ve.prototype.desc=function(){return this.reverse()},ve.prototype.eachKey=function(m){var v=this._ctx;return v.keysOnly=!v.isMatch,this.each(function(w,_){m(_.key,_)})},ve.prototype.eachUniqueKey=function(m){return this._ctx.unique="unique",this.eachKey(m)},ve.prototype.eachPrimaryKey=function(m){var v=this._ctx;return v.keysOnly=!v.isMatch,this.each(function(w,_){m(_.primaryKey,_)})},ve.prototype.keys=function(m){var v=this._ctx,w=(v.keysOnly=!v.isMatch,[]);return this.each(function(_,D){w.push(D.key)}).then(function(){return w}).then(m)},ve.prototype.primaryKeys=function(m){var v=this._ctx;if(v.dir==="next"&&ds(v,!0)&&0<v.limit)return this._read(function(_){var D=Qi(v,v.table.core.schema);return v.table.core.query({trans:_,values:!1,limit:v.limit,query:{index:D,range:v.range}})}).then(function(_){return _.result}).then(m);v.keysOnly=!v.isMatch;var w=[];return this.each(function(_,D){w.push(D.primaryKey)}).then(function(){return w}).then(m)},ve.prototype.uniqueKeys=function(m){return this._ctx.unique="unique",this.keys(m)},ve.prototype.firstKey=function(m){return this.limit(1).keys(function(v){return v[0]}).then(m)},ve.prototype.lastKey=function(m){return this.reverse().firstKey(m)},ve.prototype.distinct=function(){var m,v=this._ctx,v=v.index&&v.table.schema.idxByName[v.index];return v&&v.multi&&(m={},ho(this._ctx,function(_){var _=_.primaryKey.toString(),D=y(m,_);return m[_]=!0,!D})),this},ve.prototype.modify=function(m){var v=this,w=this._ctx;return this._write(function(_){function D(Y,st){var ot=st.failures;Q+=Y-st.numFailures;for(var nt=0,pt=c(ot);nt<pt.length;nt++){var St=pt[nt];K.push(ot[St])}}var O=typeof m=="function"?m:function(Y){return uo(Y,m)},P=w.table.core,$=P.schema.primaryKey,j=$.outbound,V=$.extractKey,et=200,$=v.db._options.modifyChunkSize,K=($&&(et=typeof $=="object"?$[P.name]||$["*"]||200:$),[]),Q=0,Z=[],X=m===Ml;return v.clone().primaryKeys().then(function(Y){function st(nt){var pt=Math.min(et,Y.length-nt),St=Y.slice(nt,nt+pt);return(X?Promise.resolve([]):P.getMany({trans:_,keys:St,cache:"immutable"})).then(function(Dt){var Nt=[],Et=[],Ft=j?[]:null,Lt=X?St:[];if(!X)for(var _t=0;_t<pt;++_t){var It=Dt[_t],ee={value:Vt(It),primKey:Y[nt+_t]};O.call(ee,ee.value,ee)!==!1&&(ee.value==null?Lt.push(Y[nt+_t]):j||ue(V(It),V(ee.value))===0?(Et.push(ee.value),j&&Ft.push(Y[nt+_t])):(Lt.push(Y[nt+_t]),Nt.push(ee.value)))}return Promise.resolve(0<Nt.length&&P.mutate({trans:_,type:"add",values:Nt}).then(function(fe){for(var Xt in fe.failures)Lt.splice(parseInt(Xt),1);D(Nt.length,fe)})).then(function(){return(0<Et.length||ot&&typeof m=="object")&&P.mutate({trans:_,type:"put",keys:Ft,values:Et,criteria:ot,changeSpec:typeof m!="function"&&m,isAdditionalChunk:0<nt}).then(function(fe){return D(Et.length,fe)})}).then(function(){return(0<Lt.length||ot&&X)&&P.mutate({trans:_,type:"delete",keys:Lt,criteria:ot,isAdditionalChunk:0<nt}).then(function(fe){return Bn(w.table,Lt,fe)}).then(function(fe){return D(Lt.length,fe)})}).then(function(){return Y.length>nt+pt&&st(nt+et)})})}var ot=ds(w)&&w.limit===1/0&&(typeof m!="function"||X)&&{index:w.index,range:w.range};return st(0).then(function(){if(0<K.length)throw new qt("Error modifying one or more objects",K,Q,Z);return Y.length})})})},ve.prototype.delete=function(){var m=this._ctx,v=m.range;return!ds(m)||m.table.schema.yProps||!m.isPrimKey&&v.type!==3?this.modify(Ml):this._write(function(w){var _=m.table.core.schema.primaryKey,D=v;return m.table.core.count({trans:w,query:{index:_,range:D}}).then(function(O){return m.table.core.mutate({trans:w,type:"deleteRange",range:D}).then(function(V){var j=V.failures,V=V.numFailures;if(V)throw new qt("Could not delete some values",Object.keys(j).map(function(et){return j[et]}),O-V);return O-V})})})};var Ed=ve;function ve(){}var Ml=function(m,v){return v.value=null};function Dl(m,v){return m<v?-1:m===v?0:1}function _d(m,v){return v<m?-1:m===v?0:1}function ei(m,v,w){return m=m instanceof zs?new m.Collection(m):m,m._ctx.error=new(w||TypeError)(v),m}function Wi(m){return new m.Collection(m,function(){return fo("")}).limit(0)}function ri(Z,v,w,_){var D,O,P,j,V,et,$,K=w.length;if(!w.every(function(Y){return typeof Y=="string"}))return ei(Z,un);function Q(Y){D=Y==="next"?function(ot){return ot.toUpperCase()}:function(ot){return ot.toLowerCase()},O=Y==="next"?function(ot){return ot.toLowerCase()}:function(ot){return ot.toUpperCase()},P=Y==="next"?Dl:_d;var st=w.map(function(ot){return{lower:O(ot),upper:D(ot)}}).sort(function(ot,nt){return P(ot.lower,nt.lower)});j=st.map(function(ot){return ot.upper}),V=st.map(function(ot){return ot.lower}),$=(et=Y)==="next"?"":_}Q("next");var Z=new Z.Collection(Z,function(){return ki(j[0],V[K-1]+_)}),X=(Z._ondirectionchange=function(Y){Q(Y)},0);return Z._addAlgorithm(function(Y,st,ot){var nt=Y.key;if(typeof nt=="string"){var pt=O(nt);if(v(pt,V,X))return!0;for(var St=null,Dt=X;Dt<K;++Dt){var Nt=((Et,Ft,Lt,_t,It,ee)=>{for(var fe=Math.min(Et.length,_t.length),Xt=-1,se=0;se<fe;++se){var Fe=Ft[se];if(Fe!==_t[se])return It(Et[se],Lt[se])<0?Et.substr(0,se)+Lt[se]+Lt.substr(se+1):It(Et[se],_t[se])<0?Et.substr(0,se)+_t[se]+Lt.substr(se+1):0<=Xt?Et.substr(0,Xt)+Ft[Xt]+Lt.substr(Xt+1):null;It(Et[se],Fe)<0&&(Xt=se)}return fe<_t.length&&ee==="next"?Et+Lt.substr(Et.length):fe<Et.length&&ee==="prev"?Et.substr(0,Lt.length):Xt<0?null:Et.substr(0,Xt)+_t[Xt]+Lt.substr(Xt+1)})(nt,pt,j[Dt],V[Dt],P,et);Nt===null&&St===null?X=Dt+1:(St===null||0<P(St,Nt))&&(St=Nt)}st(St!==null?function(){Y.continue(St+$)}:ot)}return!1}),Z}function ki(m,v,w,_){return{type:2,lower:m,upper:v,lowerOpen:w,upperOpen:_}}function fo(m){return{type:1,lower:m,upper:m}}Object.defineProperty(Ve.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ve.prototype.between=function(m,v,w,_){w=w!==!1,_=_===!0;try{return 0<this._cmp(m,v)||this._cmp(m,v)===0&&(w||_)&&(!w||!_)?Wi(this):new this.Collection(this,function(){return ki(m,v,!w,!_)})}catch{return ei(this,Xn)}},Ve.prototype.equals=function(m){return m==null?ei(this,Xn):new this.Collection(this,function(){return fo(m)})},Ve.prototype.above=function(m){return m==null?ei(this,Xn):new this.Collection(this,function(){return ki(m,void 0,!0)})},Ve.prototype.aboveOrEqual=function(m){return m==null?ei(this,Xn):new this.Collection(this,function(){return ki(m,void 0,!1)})},Ve.prototype.below=function(m){return m==null?ei(this,Xn):new this.Collection(this,function(){return ki(void 0,m,!1,!0)})},Ve.prototype.belowOrEqual=function(m){return m==null?ei(this,Xn):new this.Collection(this,function(){return ki(void 0,m)})},Ve.prototype.startsWith=function(m){return typeof m!="string"?ei(this,un):this.between(m,m+vi,!0,!0)},Ve.prototype.startsWithIgnoreCase=function(m){return m===""?this.startsWith(m):ri(this,function(v,w){return v.indexOf(w[0])===0},[m],vi)},Ve.prototype.equalsIgnoreCase=function(m){return ri(this,function(v,w){return v===w[0]},[m],"")},Ve.prototype.anyOfIgnoreCase=function(){var m=Ot.apply(Ht,arguments);return m.length===0?Wi(this):ri(this,function(v,w){return w.indexOf(v)!==-1},m,"")},Ve.prototype.startsWithAnyOfIgnoreCase=function(){var m=Ot.apply(Ht,arguments);return m.length===0?Wi(this):ri(this,function(v,w){return w.some(function(_){return v.indexOf(_)===0})},m,vi)},Ve.prototype.anyOf=function(){var m,v,w=this,_=Ot.apply(Ht,arguments),D=this._cmp;try{_.sort(D)}catch{return ei(this,Xn)}return _.length===0?Wi(this):((m=new this.Collection(this,function(){return ki(_[0],_[_.length-1])}))._ondirectionchange=function(O){D=O==="next"?w._ascending:w._descending,_.sort(D)},v=0,m._addAlgorithm(function(O,P,j){for(var V=O.key;0<D(V,_[v]);)if(++v===_.length)return P(j),!1;return D(V,_[v])===0||(P(function(){O.continue(_[v])}),!1)}),m)},Ve.prototype.notEqual=function(m){return this.inAnyRange([[-1/0,m],[m,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ve.prototype.noneOf=function(){var m=Ot.apply(Ht,arguments);if(m.length===0)return new this.Collection(this);try{m.sort(this._ascending)}catch{return ei(this,Xn)}var v=m.reduce(function(w,_){return w?w.concat([[w[w.length-1][1],_]]):[[-1/0,_]]},null);return v.push([m[m.length-1],this.db._maxKey]),this.inAnyRange(v,{includeLowers:!1,includeUppers:!1})},Ve.prototype.inAnyRange=function(m,ot){var w=this,_=this._cmp,D=this._ascending,O=this._descending,P=this._min,j=this._max;if(m.length===0)return Wi(this);if(!m.every(function(nt){return nt[0]!==void 0&&nt[1]!==void 0&&D(nt[0],nt[1])<=0}))return ei(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Tt.InvalidArgument);var V=!ot||ot.includeLowers!==!1,et=ot&&ot.includeUppers===!0,$,K=D;function Q(nt,pt){return K(nt[0],pt[0])}try{($=m.reduce(function(nt,pt){for(var St=0,Dt=nt.length;St<Dt;++St){var Nt=nt[St];if(_(pt[0],Nt[1])<0&&0<_(pt[1],Nt[0])){Nt[0]=P(Nt[0],pt[0]),Nt[1]=j(Nt[1],pt[1]);break}}return St===Dt&&nt.push(pt),nt},[])).sort(Q)}catch{return ei(this,Xn)}var Z=0,X=et?function(nt){return 0<D(nt,$[Z][1])}:function(nt){return 0<=D(nt,$[Z][1])},Y=V?function(nt){return 0<O(nt,$[Z][0])}:function(nt){return 0<=O(nt,$[Z][0])},st=X,ot=new this.Collection(this,function(){return ki($[0][0],$[$.length-1][1],!V,!et)});return ot._ondirectionchange=function(nt){K=nt==="next"?(st=X,D):(st=Y,O),$.sort(Q)},ot._addAlgorithm(function(nt,pt,St){for(var Dt,Nt=nt.key;st(Nt);)if(++Z===$.length)return pt(St),!1;return!X(Dt=Nt)&&!Y(Dt)||(w._cmp(Nt,$[Z][1])===0||w._cmp(Nt,$[Z][0])===0||pt(function(){K===D?nt.continue($[Z][0]):nt.continue($[Z][1])}),!1)}),ot},Ve.prototype.startsWithAnyOf=function(){var m=Ot.apply(Ht,arguments);return m.every(function(v){return typeof v=="string"})?m.length===0?Wi(this):this.inAnyRange(m.map(function(v){return[v,v+vi]})):ei(this,"startsWithAnyOf() only works with strings")};var zs=Ve;function Ve(){}function xi(m){return qe(function(v){return Hs(v),m(v.target.error),!1})}function Hs(m){m.stopPropagation&&m.stopPropagation(),m.preventDefault&&m.preventDefault()}var _a="storagemutated",qs="x-storagemutated-1",Mn=wr(null,_a),Nl=(Yn.prototype._lock=function(){return F(!Bt.global),++this._reculock,this._reculock!==1||Bt.global||(Bt.lockOwnerFor=this),this},Yn.prototype._unlock=function(){if(F(!Bt.global),--this._reculock==0)for(Bt.global||(Bt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var m=this._blockedFuncs.shift();try{bi(m[1],m[0])}catch{}}return this},Yn.prototype._locked=function(){return this._reculock&&Bt.lockOwnerFor!==this},Yn.prototype.create=function(m){var v=this;if(this.mode){var w=this.db.idbdb,_=this.db._state.dbOpenError;if(F(!this.idbtrans),!m&&!w)switch(_&&_.name){case"DatabaseClosedError":throw new Tt.DatabaseClosed(_);case"MissingAPIError":throw new Tt.MissingAPI(_.message,_);default:throw new Tt.OpenFailed(_)}if(!this.active)throw new Tt.TransactionInactive;F(this._completion._state===null),(m=this.idbtrans=m||(this.db.core||w).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=qe(function(D){Hs(D),v._reject(m.error)}),m.onabort=qe(function(D){Hs(D),v.active&&v._reject(new Tt.Abort(m.error)),v.active=!1,v.on("abort").fire(D)}),m.oncomplete=qe(function(){v.active=!1,v._resolve(),"mutatedParts"in m&&Mn.storagemutated.fire(m.mutatedParts)})}return this},Yn.prototype._promise=function(m,v,w){var _,D=this;return m==="readwrite"&&this.mode!=="readwrite"?Be(new Tt.ReadOnly("Transaction is readonly")):this.active?this._locked()?new kt(function(O,P){D._blockedFuncs.push([function(){D._promise(m,v,w).then(O,P)},Bt])}):w?Ke(function(){var O=new kt(function(P,j){D._lock();var V=v(P,j,D);V&&V.then&&V.then(P,j)});return O.finally(function(){return D._unlock()}),O._lib=!0,O}):((_=new kt(function(O,P){var j=v(O,P,D);j&&j.then&&j.then(O,P)}))._lib=!0,_):Be(new Tt.TransactionInactive)},Yn.prototype._root=function(){return this.parent?this.parent._root():this},Yn.prototype.waitFor=function(m){var v,w=this._root(),_=kt.resolve(m),D=(w._waitingFor?w._waitingFor=w._waitingFor.then(function(){return _}):(w._waitingFor=_,w._waitingQueue=[],v=w.idbtrans.objectStore(w.storeNames[0]),(function O(){for(++w._spinCount;w._waitingQueue.length;)w._waitingQueue.shift()();w._waitingFor&&(v.get(-1/0).onsuccess=O)})()),w._waitingFor);return new kt(function(O,P){_.then(function(j){return w._waitingQueue.push(qe(O.bind(null,j)))},function(j){return w._waitingQueue.push(qe(P.bind(null,j)))}).finally(function(){w._waitingFor===D&&(w._waitingFor=null)})})},Yn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Tt.Abort))},Yn.prototype.table=function(m){var v=this._memoizedTables||(this._memoizedTables={});if(y(v,m))return v[m];var w=this.schema[m];if(w)return(w=new this.db.Table(m,w,this)).core=this.db.core.table(m),v[m]=w;throw new Tt.NotFound("Table "+m+" not part of transaction")},Yn);function Yn(){}function Li(m,v,w,_,D,O,P,j){return{name:m,keyPath:v,unique:w,multi:_,auto:D,compound:O,src:(w&&!P?"&":"")+(_?"*":"")+(D?"++":"")+po(v),type:j}}function po(m){return typeof m=="string"?m:m?"["+[].join.call(m,"+")+"]":""}function Ca(m,v,w){return{name:m,primKey:v,indexes:w,mappedClass:null,idxByName:(_=function(D){return[D.name,D]},w.reduce(function(D,O,P){return O=_(O,P),O&&(D[O[0]]=O[1]),D},{}))};var _}var Ta=function(m){try{return m.only([[]]),Ta=function(){return[[]]},[[]]}catch{return Ta=function(){return vi},vi}};function Ra(m){return m==null?function(){}:typeof m=="string"?(v=m).split(".").length===1?function(w){return w[v]}:function(w){return z(w,v)}:function(w){return z(w,m)};var v}function Er(m){return[].slice.call(m)}var ou=0;function mn(m){return m==null?":id":typeof m=="string"?m:"[".concat(m.join("+"),"]")}function Gs(m,v,V){function _(X){if(X.type===3)return null;if(X.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var K=X.lower,Q=X.upper,Z=X.lowerOpen,X=X.upperOpen;return K===void 0?Q===void 0?null:v.upperBound(Q,!!X):Q===void 0?v.lowerBound(K,!!Z):v.bound(K,Q,!!Z,!!X)}function D($){var K,Q=$.name;return{name:Q,schema:$,mutate:function(Z){var X=Z.trans,Y=Z.type,st=Z.keys,ot=Z.values,nt=Z.range;return new Promise(function(pt,St){pt=qe(pt);var Dt=X.objectStore(Q),Nt=Dt.keyPath==null,Et=Y==="put"||Y==="add";if(!Et&&Y!=="delete"&&Y!=="deleteRange")throw new Error("Invalid operation type: "+Y);var Ft,Lt=(st||ot||{length:1}).length;if(st&&ot&&st.length!==ot.length)throw new Error("Given keys array must have same length as given values array.");if(Lt===0)return pt({numFailures:0,failures:{},results:[],lastResult:void 0});function _t(ke){++fe,Hs(ke)}var It=[],ee=[],fe=0;if(Y==="deleteRange"){if(nt.type===4)return pt({numFailures:fe,failures:ee,results:[],lastResult:void 0});nt.type===3?It.push(Ft=Dt.clear()):It.push(Ft=Dt.delete(_(nt)))}else{var Nt=Et?Nt?[ot,st]:[ot,null]:[st,null],Xt=Nt[0],se=Nt[1];if(Et)for(var Fe=0;Fe<Lt;++Fe)It.push(Ft=se&&se[Fe]!==void 0?Dt[Y](Xt[Fe],se[Fe]):Dt[Y](Xt[Fe])),Ft.onerror=_t;else for(Fe=0;Fe<Lt;++Fe)It.push(Ft=Dt[Y](Xt[Fe])),Ft.onerror=_t}function Wn(ke){ke=ke.target.result,It.forEach(function(gs,La){return gs.error!=null&&(ee[La]=gs.error)}),pt({numFailures:fe,failures:ee,results:Y==="delete"?st:It.map(function(gs){return gs.result}),lastResult:ke})}Ft.onerror=function(ke){_t(ke),Wn(ke)},Ft.onsuccess=Wn})},getMany:function(Z){var X=Z.trans,Y=Z.keys;return new Promise(function(st,ot){st=qe(st);for(var nt,pt=X.objectStore(Q),St=Y.length,Dt=new Array(St),Nt=0,Et=0,Ft=function(It){It=It.target,Dt[It._pos]=It.result,++Et===Nt&&st(Dt)},Lt=xi(ot),_t=0;_t<St;++_t)Y[_t]!=null&&((nt=pt.get(Y[_t]))._pos=_t,nt.onsuccess=Ft,nt.onerror=Lt,++Nt);Nt===0&&st(Dt)})},get:function(Z){var X=Z.trans,Y=Z.key;return new Promise(function(st,ot){st=qe(st);var nt=X.objectStore(Q).get(Y);nt.onsuccess=function(pt){return st(pt.target.result)},nt.onerror=xi(ot)})},query:(K=j,function(Z){return new Promise(function(X,Y){X=qe(X);var st,ot,nt,Et=Z.trans,pt=Z.values,St=Z.limit,Nt=Z.query,Dt=St===1/0?void 0:St,Ft=Nt.index,Nt=Nt.range,Et=Et.objectStore(Q),Et=Ft.isPrimaryKey?Et:Et.index(Ft.name),Ft=_(Nt);if(St===0)return X({result:[]});K?((Nt=pt?Et.getAll(Ft,Dt):Et.getAllKeys(Ft,Dt)).onsuccess=function(Lt){return X({result:Lt.target.result})},Nt.onerror=xi(Y)):(st=0,ot=!pt&&"openKeyCursor"in Et?Et.openKeyCursor(Ft):Et.openCursor(Ft),nt=[],ot.onsuccess=function(Lt){var _t=ot.result;return!_t||(nt.push(pt?_t.value:_t.primaryKey),++st===St)?X({result:nt}):void _t.continue()},ot.onerror=xi(Y))})}),openCursor:function(Z){var X=Z.trans,Y=Z.values,st=Z.query,ot=Z.reverse,nt=Z.unique;return new Promise(function(pt,St){pt=qe(pt);var Et=st.index,Dt=st.range,Nt=X.objectStore(Q),Nt=Et.isPrimaryKey?Nt:Nt.index(Et.name),Et=ot?nt?"prevunique":"prev":nt?"nextunique":"next",Ft=!Y&&"openKeyCursor"in Nt?Nt.openKeyCursor(_(Dt),Et):Nt.openCursor(_(Dt),Et);Ft.onerror=xi(St),Ft.onsuccess=qe(function(Lt){var _t,It,ee,fe,Xt=Ft.result;Xt?(Xt.___id=++ou,Xt.done=!1,_t=Xt.continue.bind(Xt),It=(It=Xt.continuePrimaryKey)&&It.bind(Xt),ee=Xt.advance.bind(Xt),fe=function(){throw new Error("Cursor not stopped")},Xt.trans=X,Xt.stop=Xt.continue=Xt.continuePrimaryKey=Xt.advance=function(){throw new Error("Cursor not started")},Xt.fail=qe(St),Xt.next=function(){var se=this,Fe=1;return this.start(function(){return Fe--?se.continue():se.stop()}).then(function(){return se})},Xt.start=function(se){function Fe(){if(Ft.result)try{se()}catch(ke){Xt.fail(ke)}else Xt.done=!0,Xt.start=function(){throw new Error("Cursor behind last entry")},Xt.stop()}var Wn=new Promise(function(ke,gs){ke=qe(ke),Ft.onerror=xi(gs),Xt.fail=gs,Xt.stop=function(La){Xt.stop=Xt.continue=Xt.continuePrimaryKey=Xt.advance=fe,ke(La)}});return Ft.onsuccess=qe(function(ke){Ft.onsuccess=Fe,Fe()}),Xt.continue=_t,Xt.continuePrimaryKey=It,Xt.advance=ee,Fe(),Wn},pt(Xt)):pt(null)},St)})},count:function(Z){var X=Z.query,Y=Z.trans,st=X.index,ot=X.range;return new Promise(function(nt,pt){var St=Y.objectStore(Q),St=st.isPrimaryKey?St:St.index(st.name),Dt=_(ot),Dt=Dt?St.count(Dt):St.count();Dt.onsuccess=qe(function(Nt){return nt(Nt.target.result)}),Dt.onerror=xi(pt)})}}}O=V,P=Er((V=m).objectStoreNames);var O,V={schema:{name:V.name,tables:P.map(function($){return O.objectStore($)}).map(function($){var K=$.keyPath,Q=$.autoIncrement,X=u(K),Z={},X={name:$.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:K==null,compound:X,keyPath:K,autoIncrement:Q,unique:!0,extractKey:Ra(K)},indexes:Er($.indexNames).map(function(Y){return $.index(Y)}).map(function(nt){var pt=nt.name,st=nt.unique,ot=nt.multiEntry,nt=nt.keyPath,pt={name:pt,compound:u(nt),keyPath:nt,unique:st,multiEntry:ot,extractKey:Ra(nt)};return Z[mn(nt)]=pt}),getIndexByKeyPath:function(Y){return Z[mn(Y)]}};return Z[":id"]=X.primaryKey,K!=null&&(Z[mn(K)]=X.primaryKey),X})},hasGetAll:0<P.length&&"getAll"in O.objectStore(P[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},P=V.schema,j=V.hasGetAll,V=P.tables.map(D),et={};return V.forEach(function($){return et[$.name]=$}),{stack:"dbcore",transaction:m.transaction.bind(m),table:function($){if(et[$])return et[$];throw new Error("Table '".concat($,"' not found"))},MIN_KEY:-1/0,MAX_KEY:Ta(v),schema:P}}function mo(m,v,w,_){return w=w.IDBKeyRange,v=Gs(v,w,_),{dbcore:m.dbcore.reduce(function(D,O){return O=O.create,i(i({},D),O(D))},v)}}function fs(m,v){var w=v.db,w=mo(m._middlewares,w,m._deps,v);m.core=w.dbcore,m.tables.forEach(function(_){var D=_.name;m.core.schema.tables.some(function(O){return O.name===D})&&(_.core=m.core.table(D),m[D]instanceof m.Table)&&(m[D].core=_.core)})}function go(m,v,w,_){w.forEach(function(D){var O=_[D];v.forEach(function(P){var j=(function V(et,$){return T(et,$)||(et=f(et))&&V(et,$)})(P,D);(!j||"value"in j&&j.value===void 0)&&(P===m.Transaction.prototype||P instanceof m.Transaction?A(P,D,{get:function(){return this.table(D)},set:function(V){S(this,D,{value:V,writable:!0,configurable:!0,enumerable:!0})}}):P[D]=new m.Table(D,O))})})}function _r(m,v){v.forEach(function(w){for(var _ in w)w[_]instanceof m.Table&&delete w[_]})}function Ol(m,v){return m._cfg.version-v._cfg.version}function Cr(m,v,w,_){var D=m._dbSchema,O=(w.objectStoreNames.contains("$meta")&&!D.$meta&&(D.$meta=Ca("$meta",cu("")[0],[]),m._storeNames.push("$meta")),m._createTransaction("readwrite",m._storeNames,D)),P=(O.create(w),O._completion.catch(_),O._reject.bind(O)),j=Bt.transless||Bt;Ke(function(){if(Bt.trans=O,Bt.transless=j,v!==0)return fs(m,w),et=v,((V=O).storeNames.includes("$meta")?V.table("$meta").get("version").then(function($){return $??et}):kt.resolve(et)).then(function(st){var K=m,Q=st,Z=O,X=w,Y=[],st=K._versions,ot=K._dbSchema=Ma(0,K.idbdb,X);return(st=st.filter(function(nt){return nt._cfg.version>=Q})).length===0?kt.resolve():(st.forEach(function(nt){Y.push(function(){var pt,St,Dt,Nt=ot,Et=nt._cfg.dbschema,Ft=(xo(K,Nt,X),xo(K,Et,X),ot=K._dbSchema=Et,bo(Nt,Et)),Lt=(Ft.add.forEach(function(_t){kl(X,_t[0],_t[1].primKey,_t[1].indexes)}),Ft.change.forEach(function(_t){if(_t.recreate)throw new Tt.Upgrade("Not yet support for changing primary key");var It=X.objectStore(_t.name);_t.add.forEach(function(ee){return vo(It,ee)}),_t.change.forEach(function(ee){It.deleteIndex(ee.name),vo(It,ee)}),_t.del.forEach(function(ee){return It.deleteIndex(ee)})}),nt._cfg.contentUpgrade);if(Lt&&nt._cfg.version>Q)return fs(K,X),Z._memoizedTables={},pt=ct(Et),Ft.del.forEach(function(_t){pt[_t]=Nt[_t]}),_r(K,[K.Transaction.prototype]),go(K,[K.Transaction.prototype],c(pt),pt),Z.schema=pt,(St=B(Lt))&&cn(),Et=kt.follow(function(){var _t;(Dt=Lt(Z))&&St&&(_t=ti.bind(null,null),Dt.then(_t,_t))}),Dt&&typeof Dt.then=="function"?kt.resolve(Dt):Et.then(function(){return Dt})}),Y.push(function(pt){var St,Dt,Nt=nt._cfg.dbschema;St=Nt,Dt=pt,[].slice.call(Dt.db.objectStoreNames).forEach(function(Et){return St[Et]==null&&Dt.db.deleteObjectStore(Et)}),_r(K,[K.Transaction.prototype]),go(K,[K.Transaction.prototype],K._storeNames,K._dbSchema),Z.schema=K._dbSchema}),Y.push(function(pt){K.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(K.idbdb.version/10)===nt._cfg.version?(K.idbdb.deleteObjectStore("$meta"),delete K._dbSchema.$meta,K._storeNames=K._storeNames.filter(function(St){return St!=="$meta"})):pt.objectStore("$meta").put(nt._cfg.version,"version"))})}),(function nt(){return Y.length?kt.resolve(Y.shift()(Z.idbtrans)).then(nt):kt.resolve()})().then(function(){lu(ot,X)}))}).catch(P);var V,et;c(D).forEach(function($){kl(w,$,D[$].primKey,D[$].indexes)}),fs(m,w),kt.follow(function(){return m.on.populate.fire(O)}).catch(P)})}function yo(m,v){lu(m._dbSchema,v),v.db.version%10!=0||v.objectStoreNames.contains("$meta")||v.db.createObjectStore("$meta").add(Math.ceil(v.db.version/10-1),"version");var w=Ma(0,m.idbdb,v);xo(m,m._dbSchema,v);for(var _=0,D=bo(w,m._dbSchema).change;_<D.length;_++){var O=(P=>{if(P.change.length||P.recreate)return console.warn("Unable to patch indexes of table ".concat(P.name," because it has changes on the type of index or primary key.")),{value:void 0};var j=v.objectStore(P.name);P.add.forEach(function(V){Tn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(P.name,".").concat(V.src)),vo(j,V)})})(D[_]);if(typeof O=="object")return O.value}}function bo(m,v){var w,_={del:[],add:[],change:[]};for(w in m)v[w]||_.del.push(w);for(w in v){var D=m[w],O=v[w];if(D){var P={name:w,def:O,recreate:!1,del:[],add:[],change:[]};if(""+(D.primKey.keyPath||"")!=""+(O.primKey.keyPath||"")||D.primKey.auto!==O.primKey.auto)P.recreate=!0,_.change.push(P);else{var j=D.idxByName,V=O.idxByName,et=void 0;for(et in j)V[et]||P.del.push(et);for(et in V){var $=j[et],K=V[et];$?$.src!==K.src&&P.change.push(K):P.add.push(K)}(0<P.del.length||0<P.add.length||0<P.change.length)&&_.change.push(P)}}else _.add.push([w,O])}return _}function kl(m,v,w,_){var D=m.db.createObjectStore(v,w.keyPath?{keyPath:w.keyPath,autoIncrement:w.auto}:{autoIncrement:w.auto});_.forEach(function(O){return vo(D,O)})}function lu(m,v){c(m).forEach(function(w){v.db.objectStoreNames.contains(w)||(Tn&&console.debug("Dexie: Creating missing table",w),kl(v,w,m[w].primKey,m[w].indexes))})}function vo(m,v){m.createIndex(v.name,v.keyPath,{unique:v.unique,multiEntry:v.multi})}function Ma(m,v,w){var _={};return k(v.objectStoreNames,0).forEach(function(D){for(var O=w.objectStore(D),P=Li(po(et=O.keyPath),et||"",!0,!1,!!O.autoIncrement,et&&typeof et!="string",!0),j=[],V=0;V<O.indexNames.length;++V){var $=O.index(O.indexNames[V]),et=$.keyPath,$=Li($.name,et,!!$.unique,!!$.multiEntry,!1,et&&typeof et!="string",!1);j.push($)}_[D]=Ca(D,P,j)}),_}function xo(m,v,w){for(var _=w.db.objectStoreNames,D=0;D<_.length;++D){var O=_[D],P=w.objectStore(O);m._hasGetAll="getAll"in P;for(var j=0;j<P.indexNames.length;++j){var V,et=P.indexNames[j],$=P.index(et).keyPath,$=typeof $=="string"?$:"["+k($).join("+")+"]";v[O]&&(V=v[O].idxByName[$])&&(V.name=et,delete v[O].idxByName[$],v[O].idxByName[et]=V)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&l.WorkerGlobalScope&&l instanceof l.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(m._hasGetAll=!1)}function cu(m){return m.split(",").map(function(v,w){var D=v.split(":"),_=(_=D[1])==null?void 0:_.trim(),D=(v=D[0].trim()).replace(/([&*]|\+\+)/g,""),O=/^\[/.test(D)?D.match(/^\[(.*)\]$/)[1].split("+"):D;return Li(D,O||null,/\&/.test(v),/\*/.test(v),/\+\+/.test(v),u(O),w===0,_)})}Da.prototype._createTableSchema=Ca,Da.prototype._parseIndexSyntax=cu,Da.prototype._parseStoresSpec=function(m,v){var w=this;c(m).forEach(function(_){if(m[_]!==null){var D=w._parseIndexSyntax(m[_]),O=D.shift();if(!O)throw new Tt.Schema("Invalid schema for table "+_+": "+m[_]);if(O.unique=!0,O.multi)throw new Tt.Schema("Primary key cannot be multiEntry*");D.forEach(function(P){if(P.auto)throw new Tt.Schema("Only primary key can be marked as autoIncrement (++)");if(!P.keyPath)throw new Tt.Schema("Index must have a name and cannot be an empty string")}),O=w._createTableSchema(_,O,D),v[_]=O}})},Da.prototype.stores=function(w){var v=this.db,w=(this._cfg.storesSource=this._cfg.storesSource?d(this._cfg.storesSource,w):w,v._versions),_={},D={};return w.forEach(function(O){d(_,O._cfg.storesSource),D=O._cfg.dbschema={},O._parseStoresSpec(_,D)}),v._dbSchema=D,_r(v,[v._allTables,v,v.Transaction.prototype]),go(v,[v._allTables,v,v.Transaction.prototype,this._cfg.tables],c(D),D),v._storeNames=c(D),this},Da.prototype.upgrade=function(m){return this._cfg.contentUpgrade=nn(this._cfg.contentUpgrade||Wt,m),this};var Cd=Da;function Da(){}function Ll(m,v){var w=m._dbNamesDB;return w||(w=m._dbNamesDB=new Pi(br,{addons:[],indexedDB:m,IDBKeyRange:v})).version(1).stores({dbnames:"name"}),w.table("dbnames")}function wo(m){return m&&typeof m.databases=="function"}function Pl(m){return Ke(function(){return Bt.letThrough=!0,m()})}function jl(m){return!("from"in m)}var Dn=function(m,v){var w;if(!this)return w=new Dn,m&&"d"in m&&d(w,m),w;d(this,arguments.length?{d:1,from:m,to:1<arguments.length?v:m}:{d:0})};function Tr(m,v,w){var _=ue(v,w);if(!isNaN(_)){if(0<_)throw RangeError();if(jl(m))return d(m,{from:v,to:w,d:1});var _=m.l,D=m.r;if(ue(w,m.from)<0)return _?Tr(_,v,w):m.l={from:v,to:w,d:1,l:null,r:null},hu(m);if(0<ue(v,m.to))return D?Tr(D,v,w):m.r={from:v,to:w,d:1,l:null,r:null},hu(m);ue(v,m.from)<0&&(m.from=v,m.l=null,m.d=D?D.d+1:1),0<ue(w,m.to)&&(m.to=w,m.r=null,m.d=m.l?m.l.d+1:1),v=!m.r,_&&!m.l&&Ks(m,_),D&&v&&Ks(m,D)}}function Ks(m,v){jl(v)||(function w(_,D){var O=D.from,P=D.l,j=D.r;Tr(_,O,D.to),P&&w(_,P),j&&w(_,j)})(m,v)}function uu(m,v){var w=So(v),_=w.next();if(!_.done)for(var D=_.value,O=So(m),P=O.next(D.from),j=P.value;!_.done&&!P.done;){if(ue(j.from,D.to)<=0&&0<=ue(j.to,D.from))return!0;ue(D.from,j.from)<0?D=(_=w.next(j.from)).value:j=(P=O.next(D.from)).value}return!1}function So(m){var v=jl(m)?null:{s:0,n:m};return{next:function(w){for(var _=0<arguments.length;v;)switch(v.s){case 0:if(v.s=1,_)for(;v.n.l&&ue(w,v.n.from)<0;)v={up:v,n:v.n.l,s:1};else for(;v.n.l;)v={up:v,n:v.n.l,s:1};case 1:if(v.s=2,!_||ue(w,v.n.to)<=0)return{value:v.n,done:!1};case 2:if(v.n.r){v.s=3,v={up:v,n:v.n.r,s:0};continue}case 3:v=v.up}return{done:!0}}}}function hu(m){var v,w,_,D=(((D=m.r)==null?void 0:D.d)||0)-(((D=m.l)==null?void 0:D.d)||0),D=1<D?"r":D<-1?"l":"";D&&(v=D=="r"?"l":"r",w=i({},m),_=m[D],m.from=_.from,m.to=_.to,m[D]=_[D],w[D]=_[v],(m[v]=w).d=Bl(w)),m.d=Bl(m)}function Bl(w){var v=w.r,w=w.l;return(v?w?Math.max(v.d,w.d):v.d:w?w.d:0)+1}function Ao(m,v){return c(v).forEach(function(w){m[w]?Ks(m[w],v[w]):m[w]=(function _(D){var O,P,j={};for(O in D)y(D,O)&&(P=D[O],j[O]=!P||typeof P!="object"||Ct.has(P.constructor)?P:_(P));return j})(v[w])}),m}function Fl(m,v){return m.all||v.all||Object.keys(m).some(function(w){return v[w]&&uu(v[w],m[w])})}x(Dn.prototype,(($n={add:function(m){return Ks(this,m),this},addKey:function(m){return Tr(this,m,m),this},addKeys:function(m){var v=this;return m.forEach(function(w){return Tr(v,w,w)}),this},hasKey:function(m){var v=So(this).next(m).value;return v&&ue(v.from,m)<=0&&0<=ue(v.to,m)}})[G]=function(){return So(this)},$n));var Vs={},Il={},Ul=!1;function Eo(m){Ao(Il,m),Ul||(Ul=!0,setTimeout(function(){Ul=!1,zl(Il,!(Il={}))},0))}function zl(m,v){v===void 0&&(v=!1);var w=new Set;if(m.all)for(var _=0,D=Object.values(Vs);_<D.length;_++)du(j=D[_],m,w,v);else for(var O in m){var P,j,O=/^idb\:\/\/(.*)\/(.*)\//.exec(O);O&&(P=O[1],O=O[2],j=Vs["idb://".concat(P,"/").concat(O)])&&du(j,m,w,v)}w.forEach(function(V){return V()})}function du(m,v,w,_){for(var D=[],O=0,P=Object.entries(m.queries.query);O<P.length;O++){for(var j=P[O],V=j[0],et=[],$=0,K=j[1];$<K.length;$++){var Q=K[$];Fl(v,Q.obsSet)?Q.subscribers.forEach(function(st){return w.add(st)}):_&&et.push(Q)}_&&D.push([V,et])}if(_)for(var Z=0,X=D;Z<X.length;Z++){var Y=X[Z],V=Y[0],et=Y[1];m.queries.query[V]=et}}function Td(m){var v=m._state,w=m._deps.indexedDB;if(v.isBeingOpened||m.idbdb)return v.dbReadyPromise.then(function(){return v.dbOpenError?Be(v.dbOpenError):m});v.isBeingOpened=!0,v.dbOpenError=null,v.openComplete=!1;var _=v.openCanceller,D=Math.round(10*m.verno),O=!1;function P(){if(v.openCanceller!==_)throw new Tt.DatabaseClosed("db.open() was cancelled")}function j(){return new kt(function(Q,Z){if(P(),!w)throw new Tt.MissingAPI;var X=m.name,Y=v.autoSchema||!D?w.open(X):w.open(X,D);if(!Y)throw new Tt.MissingAPI;Y.onerror=xi(Z),Y.onblocked=qe(m._fireOnBlocked),Y.onupgradeneeded=qe(function(st){var ot;$=Y.transaction,v.autoSchema&&!m._options.allowEmptyDB?(Y.onerror=Hs,$.abort(),Y.result.close(),(ot=w.deleteDatabase(X)).onsuccess=ot.onerror=qe(function(){Z(new Tt.NoSuchDatabase("Database ".concat(X," doesnt exist")))})):($.onerror=xi(Z),ot=st.oldVersion>Math.pow(2,62)?0:st.oldVersion,K=ot<1,m.idbdb=Y.result,O&&yo(m,$),Cr(m,ot/10,$,Z))},Z),Y.onsuccess=qe(function(){$=null;var st,ot,nt,pt,St,Dt,Nt=m.idbdb=Y.result,Et=k(Nt.objectStoreNames);if(0<Et.length)try{var Ft=Nt.transaction((St=Et).length===1?St[0]:St,"readonly");if(v.autoSchema)Dt=Nt,pt=Ft,(nt=m).verno=Dt.version/10,pt=nt._dbSchema=Ma(0,Dt,pt),nt._storeNames=k(Dt.objectStoreNames,0),go(nt,[nt._allTables],c(pt),pt);else if(xo(m,m._dbSchema,Ft),ot=Ft,((ot=bo(Ma(0,(st=m).idbdb,ot),st._dbSchema)).add.length||ot.change.some(function(Lt){return Lt.add.length||Lt.change.length}))&&!O)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Nt.close(),D=Nt.version+1,O=!0,Q(j());fs(m,Ft)}catch{}Fs.push(m),Nt.onversionchange=qe(function(Lt){v.vcFired=!0,m.on("versionchange").fire(Lt)}),Nt.onclose=qe(function(){m.close({disableAutoOpen:!1})}),K&&(Et=m._deps,St=X,wo(Dt=Et.indexedDB)||St===br||Ll(Dt,Et.IDBKeyRange).put({name:St}).catch(Wt)),Q()},Z)}).catch(function(Q){switch(Q?.name){case"UnknownError":if(0<v.PR1398_maxLoop)return v.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),j();break;case"VersionError":if(0<D)return D=0,j()}return kt.reject(Q)})}var V,et=v.dbReadyResolve,$=null,K=!1;return kt.race([_,(typeof navigator>"u"?kt.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Q){function Z(){return indexedDB.databases().finally(Q)}V=setInterval(Z,100),Z()}).finally(function(){return clearInterval(V)}):Promise.resolve()).then(j)]).then(function(){return P(),v.onReadyBeingFired=[],kt.resolve(Pl(function(){return m.on.ready.fire(m.vip)})).then(function Q(){var Z;if(0<v.onReadyBeingFired.length)return Z=v.onReadyBeingFired.reduce(nn,Wt),v.onReadyBeingFired=[],kt.resolve(Pl(function(){return Z(m.vip)})).then(Q)})}).finally(function(){v.openCanceller===_&&(v.onReadyBeingFired=null,v.isBeingOpened=!1)}).catch(function(Q){v.dbOpenError=Q;try{$&&$.abort()}catch{}return _===v.openCanceller&&m._close(),Be(Q)}).finally(function(){v.openComplete=!0,et()}).then(function(){var Q;return K&&(Q={},m.tables.forEach(function(Z){Z.schema.indexes.forEach(function(X){X.name&&(Q["idb://".concat(m.name,"/").concat(Z.name,"/").concat(X.name)]=new Dn(-1/0,[[[]]]))}),Q["idb://".concat(m.name,"/").concat(Z.name,"/")]=Q["idb://".concat(m.name,"/").concat(Z.name,"/:dels")]=new Dn(-1/0,[[[]]])}),Mn(_a).fire(Q),zl(Q,!0)),m})}function Rr(m){function v(O){return m.next(O)}var w=D(v),_=D(function(O){return m.throw(O)});function D(O){return function(j){var j=O(j),V=j.value;return j.done?V:V&&typeof V.then=="function"?V.then(w,_):u(V)?Promise.all(V).then(w,_):w(V)}}return D(v)()}function ps(m,v,w){for(var _=u(m)?m.slice():[m],D=0;D<w;++D)_.push(v);return _}var Rd={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(m){return i(i({},m),{table:function(_){var w=m.table(_),_=w.schema,D={},O=[];function P(Q,Z,X){var nt=mn(Q),Y=D[nt]=D[nt]||[],st=Q==null?0:typeof Q=="string"?1:Q.length,ot=0<Z,nt=i(i({},X),{name:ot?"".concat(nt,"(virtual-from:").concat(X.name,")"):X.name,lowLevelIndex:X,isVirtual:ot,keyTail:Z,keyLength:st,extractKey:Ra(Q),unique:!ot&&X.unique});return Y.push(nt),nt.isPrimaryKey||O.push(nt),1<st&&P(st===2?Q[0]:Q.slice(0,st-1),Z+1,X),Y.sort(function(pt,St){return pt.keyTail-St.keyTail}),nt}var j=P(_.primaryKey.keyPath,0,_.primaryKey);D[":id"]=[j];for(var V=0,et=_.indexes;V<et.length;V++){var $=et[V];P($.keyPath,0,$)}function K(Q){var Z,X=Q.query.index;return X.isVirtual?i(i({},Q),{query:{index:X.lowLevelIndex,range:(Z=Q.query.range,X=X.keyTail,{type:Z.type===1?2:Z.type,lower:ps(Z.lower,Z.lowerOpen?m.MAX_KEY:m.MIN_KEY,X),lowerOpen:!0,upper:ps(Z.upper,Z.upperOpen?m.MIN_KEY:m.MAX_KEY,X),upperOpen:!0})}}):Q}return i(i({},w),{schema:i(i({},_),{primaryKey:j,indexes:O,getIndexByKeyPath:function(Q){return(Q=D[mn(Q)])&&Q[0]}}),count:function(Q){return w.count(K(Q))},query:function(Q){return w.query(K(Q))},openCursor:function(Q){var Z=Q.query.index,X=Z.keyTail,Y=Z.keyLength;return Z.isVirtual?w.openCursor(K(Q)).then(function(ot){return ot&&st(ot)}):w.openCursor(Q);function st(ot){return Object.create(ot,{continue:{value:function(nt){nt!=null?ot.continue(ps(nt,Q.reverse?m.MAX_KEY:m.MIN_KEY,X)):Q.unique?ot.continue(ot.key.slice(0,Y).concat(Q.reverse?m.MIN_KEY:m.MAX_KEY,X)):ot.continue()}},continuePrimaryKey:{value:function(nt,pt){ot.continuePrimaryKey(ps(nt,m.MAX_KEY,X),pt)}},primaryKey:{get:function(){return ot.primaryKey}},key:{get:function(){var nt=ot.key;return Y===1?nt[0]:nt.slice(0,Y)}},value:{get:function(){return ot.value}}})}}})}})}};function _o(m,v,w,_){return w=w||{},_=_||"",c(m).forEach(function(D){var O,P,j;y(v,D)?(O=m[D],P=v[D],typeof O=="object"&&typeof P=="object"&&O&&P?(j=zt(O))!==zt(P)?w[_+D]=v[D]:j==="Object"?_o(O,P,w,_+D+"."):O!==P&&(w[_+D]=v[D]):O!==P&&(w[_+D]=v[D])):w[_+D]=void 0}),c(v).forEach(function(D){y(m,D)||(w[_+D]=v[D])}),w}function Co(m,v){return v.type==="delete"?v.keys:v.keys||v.values.map(m.extractKey)}var fu={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(m){return i(i({},m),{table:function(v){var w=m.table(v),_=w.schema.primaryKey;return i(i({},w),{mutate:function(D){var O=Bt.trans,P=O.table(v).hook,j=P.deleting,V=P.creating,et=P.updating;switch(D.type){case"add":if(V.fire===Wt)break;return O._promise("readwrite",function(){return $(D)},!0);case"put":if(V.fire===Wt&&et.fire===Wt)break;return O._promise("readwrite",function(){return $(D)},!0);case"delete":if(j.fire===Wt)break;return O._promise("readwrite",function(){return $(D)},!0);case"deleteRange":if(j.fire===Wt)break;return O._promise("readwrite",function(){return(function K(Q,Z,X){return w.query({trans:Q,values:!1,query:{index:_,range:Z},limit:X}).then(function(Y){var st=Y.result;return $({type:"delete",keys:st,trans:Q}).then(function(ot){return 0<ot.numFailures?Promise.reject(ot.failures[0]):st.length<X?{failures:[],numFailures:0,lastResult:void 0}:K(Q,i(i({},Z),{lower:st[st.length-1],lowerOpen:!0}),X)})})})(D.trans,D.range,1e4)},!0)}return w.mutate(D);function $(K){var Q,Z,X,Y=Bt.trans,st=K.keys||Co(_,K);if(st)return(K=K.type==="add"||K.type==="put"?i(i({},K),{keys:st}):i({},K)).type!=="delete"&&(K.values=a([],K.values)),K.keys&&(K.keys=a([],K.keys)),Q=w,X=st,((Z=K).type==="add"?Promise.resolve([]):Q.getMany({trans:Z.trans,keys:X,cache:"immutable"})).then(function(ot){var nt=st.map(function(pt,St){var Dt,Nt,Et,Ft=ot[St],Lt={onerror:null,onsuccess:null};return K.type==="delete"?j.fire.call(Lt,pt,Ft,Y):K.type==="add"||Ft===void 0?(Dt=V.fire.call(Lt,pt,K.values[St],Y),pt==null&&Dt!=null&&(K.keys[St]=pt=Dt,_.outbound||H(K.values[St],_.keyPath,pt))):(Dt=_o(Ft,K.values[St]),(Nt=et.fire.call(Lt,Dt,pt,Ft,Y))&&(Et=K.values[St],Object.keys(Nt).forEach(function(_t){y(Et,_t)?Et[_t]=Nt[_t]:H(Et,_t,Nt[_t])}))),Lt});return w.mutate(K).then(function(pt){for(var St=pt.failures,Dt=pt.results,Nt=pt.numFailures,pt=pt.lastResult,Et=0;Et<st.length;++Et){var Ft=(Dt||st)[Et],Lt=nt[Et];Ft==null?Lt.onerror&&Lt.onerror(St[Et]):Lt.onsuccess&&Lt.onsuccess(K.type==="put"&&ot[Et]?K.values[Et]:Ft)}return{failures:St,results:Dt,numFailures:Nt,lastResult:pt}}).catch(function(pt){return nt.forEach(function(St){return St.onerror&&St.onerror(pt)}),Promise.reject(pt)})});throw new Error("Keys missing")}}})}})}};function Hl(m,v,w){try{if(!v||v.keys.length<m.length)return null;for(var _=[],D=0,O=0;D<v.keys.length&&O<m.length;++D)ue(v.keys[D],m[O])===0&&(_.push(w?Vt(v.values[D]):v.values[D]),++O);return _.length===m.length?_:null}catch{return null}}var pu={stack:"dbcore",level:-1,create:function(m){return{table:function(v){var w=m.table(v);return i(i({},w),{getMany:function(_){var D;return _.cache?(D=Hl(_.keys,_.trans._cache,_.cache==="clone"))?kt.resolve(D):w.getMany(_).then(function(O){return _.trans._cache={keys:_.keys,values:_.cache==="clone"?Vt(O):O},O}):w.getMany(_)},mutate:function(_){return _.type!=="add"&&(_.trans._cache=null),w.mutate(_)}})}}}};function $s(m,v){return m.trans.mode==="readonly"&&!!m.subscr&&!m.trans.explicit&&m.trans.db._options.cache!=="disabled"&&!v.schema.primaryKey.outbound}function mu(m,v){switch(m){case"query":return v.values&&!v.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Md={stack:"dbcore",level:0,name:"Observability",create:function(m){var v=m.schema.name,w=new Dn(m.MIN_KEY,m.MAX_KEY);return i(i({},m),{transaction:function(_,D,O){if(Bt.subscr&&D!=="readonly")throw new Tt.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Bt.querier));return m.transaction(_,D,O)},table:function(_){function D(st){var Y,st=st.query;return[Y=st.index,new Dn((Y=(st=st.range).lower)!=null?Y:m.MIN_KEY,(Y=st.upper)!=null?Y:m.MAX_KEY)]}var O=m.table(_),P=O.schema,j=P.primaryKey,V=P.indexes,et=j.extractKey,$=j.outbound,K=j.autoIncrement&&V.filter(function(X){return X.compound&&X.keyPath.includes(j.keyPath)}),Q=i(i({},O),{mutate:function(X){function Y(It){return It="idb://".concat(v,"/").concat(_,"/").concat(It),St[It]||(St[It]=new Dn)}var st,ot,nt,pt=X.trans,St=X.mutatedParts||(X.mutatedParts={}),Dt=Y(""),Nt=Y(":dels"),Et=X.type,Lt=X.type==="deleteRange"?[X.range]:X.type==="delete"?[X.keys]:X.values.length<50?[Co(j,X).filter(function(It){return It}),X.values]:[],Ft=Lt[0],Lt=Lt[1],_t=X.trans._cache;return u(Ft)?(Dt.addKeys(Ft),(Et=Et==="delete"||Ft.length===Lt.length?Hl(Ft,_t):null)||Nt.addKeys(Ft),(Et||Lt)&&(st=Y,ot=Et,nt=Lt,P.indexes.forEach(function(It){var ee=st(It.name||"");function fe(se){return se!=null?It.extractKey(se):null}function Xt(se){It.multiEntry&&u(se)?se.forEach(function(Fe){return ee.addKey(Fe)}):ee.addKey(se)}(ot||nt).forEach(function(se,ke){var Wn=ot&&fe(ot[ke]),ke=nt&&fe(nt[ke]);ue(Wn,ke)!==0&&(Wn!=null&&Xt(Wn),ke!=null)&&Xt(ke)})}))):Ft?(Lt={from:(_t=Ft.lower)!=null?_t:m.MIN_KEY,to:(Et=Ft.upper)!=null?Et:m.MAX_KEY},Nt.add(Lt),Dt.add(Lt)):(Dt.add(w),Nt.add(w),P.indexes.forEach(function(It){return Y(It.name).add(w)})),O.mutate(X).then(function(It){return!Ft||X.type!=="add"&&X.type!=="put"||(Dt.addKeys(It.results),K&&K.forEach(function(ee){for(var fe=X.values.map(function(Wn){return ee.extractKey(Wn)}),Xt=ee.keyPath.findIndex(function(Wn){return Wn===j.keyPath}),se=0,Fe=It.results.length;se<Fe;++se)fe[se][Xt]=It.results[se];Y(ee.name).addKeys(fe)})),pt.mutatedParts=Ao(pt.mutatedParts||{},St),It})}}),Z={get:function(X){return[j,new Dn(X.key)]},getMany:function(X){return[j,new Dn().addKeys(X.keys)]},count:D,query:D,openCursor:D};return c(Z).forEach(function(X){Q[X]=function(Y){var st=Bt.subscr,ot=!!st,nt=$s(Bt,O)&&mu(X,Y)?Y.obsSet={}:st;if(ot){var pt,st=function(Lt){return Lt="idb://".concat(v,"/").concat(_,"/").concat(Lt),nt[Lt]||(nt[Lt]=new Dn)},St=st(""),Dt=st(":dels"),ot=Z[X](Y),Nt=ot[0],ot=ot[1];if((X==="query"&&Nt.isPrimaryKey&&!Y.values?Dt:st(Nt.name||"")).add(ot),!Nt.isPrimaryKey){if(X!=="count")return pt=X==="query"&&$&&Y.values&&O.query(i(i({},Y),{values:!1})),O[X].apply(this,arguments).then(function(Lt){if(X==="query"){if($&&Y.values)return pt.then(function(fe){return fe=fe.result,St.addKeys(fe),Lt});var _t=Y.values?Lt.result.map(et):Lt.result;(Y.values?St:Dt).addKeys(_t)}else{var It,ee;if(X==="openCursor")return ee=Y.values,(It=Lt)&&Object.create(It,{key:{get:function(){return Dt.addKey(It.primaryKey),It.key}},primaryKey:{get:function(){var fe=It.primaryKey;return Dt.addKey(fe),fe}},value:{get:function(){return ee&&St.addKey(It.primaryKey),It.value}}})}return Lt});Dt.add(w)}}return O[X].apply(this,arguments)}}),Q}})}};function gu(m,v,w){var _;return w.numFailures===0?v:v.type==="deleteRange"||(_=v.keys?v.keys.length:"values"in v&&v.values?v.values.length:1,w.numFailures===_)?null:(_=i({},v),u(_.keys)&&(_.keys=_.keys.filter(function(D,O){return!(O in w.failures)})),"values"in _&&u(_.values)&&(_.values=_.values.filter(function(D,O){return!(O in w.failures)})),_)}function To(m,v){return w=m,((_=v).lower===void 0||(_.lowerOpen?0<ue(w,_.lower):0<=ue(w,_.lower)))&&(w=m,(_=v).upper===void 0||(_.upperOpen?ue(w,_.upper)<0:ue(w,_.upper)<=0));var w,_}function ql(m,v,w,_,D,O){var P,j,V,et,$,K;return!w||w.length===0||(P=v.query.index,j=P.multiEntry,V=v.query.range,et=_.schema.primaryKey.extractKey,$=P.extractKey,K=(P.lowLevelIndex||P).extractKey,(_=w.reduce(function(Q,Z){var X=Q,Y=[];if(Z.type==="add"||Z.type==="put")for(var st=new Dn,ot=Z.values.length-1;0<=ot;--ot){var nt,pt=Z.values[ot],St=et(pt);!st.hasKey(St)&&(nt=$(pt),j&&u(nt)?nt.some(function(Lt){return To(Lt,V)}):To(nt,V))&&(st.addKey(St),Y.push(pt))}switch(Z.type){case"add":var Dt=new Dn().addKeys(v.values?Q.map(function(_t){return et(_t)}):Q),X=Q.concat(v.values?Y.filter(function(_t){return _t=et(_t),!Dt.hasKey(_t)&&(Dt.addKey(_t),!0)}):Y.map(function(_t){return et(_t)}).filter(function(_t){return!Dt.hasKey(_t)&&(Dt.addKey(_t),!0)}));break;case"put":var Nt=new Dn().addKeys(Z.values.map(function(_t){return et(_t)}));X=Q.filter(function(_t){return!Nt.hasKey(v.values?et(_t):_t)}).concat(v.values?Y:Y.map(function(_t){return et(_t)}));break;case"delete":var Et=new Dn().addKeys(Z.keys);X=Q.filter(function(_t){return!Et.hasKey(v.values?et(_t):_t)});break;case"deleteRange":var Ft=Z.range;X=Q.filter(function(_t){return!To(et(_t),Ft)})}return X},m))===m)?m:(_.sort(function(Q,Z){return ue(K(Q),K(Z))||ue(et(Q),et(Z))}),v.limit&&v.limit<1/0&&(_.length>v.limit?_.length=v.limit:m.length===v.limit&&_.length<v.limit&&(D.dirty=!0)),O?Object.freeze(_):_)}function Na(m,v){return ue(m.lower,v.lower)===0&&ue(m.upper,v.upper)===0&&!!m.lowerOpen==!!v.lowerOpen&&!!m.upperOpen==!!v.upperOpen}function Mr(m,v){return((w,_,D,O)=>{if(w===void 0)return _!==void 0?-1:0;if(_===void 0)return 1;if((w=ue(w,_))===0){if(D&&O)return 0;if(D)return 1;if(O)return-1}return w})(m.lower,v.lower,m.lowerOpen,v.lowerOpen)<=0&&0<=((w,_,D,O)=>{if(w===void 0)return _!==void 0?1:0;if(_===void 0)return-1;if((w=ue(w,_))===0){if(D&&O)return 0;if(D)return-1;if(O)return 1}return w})(m.upper,v.upper,m.upperOpen,v.upperOpen)}function Dd(m,v,w,_){m.subscribers.add(w),_.addEventListener("abort",function(){var D,O;m.subscribers.delete(w),m.subscribers.size===0&&(D=m,O=v,setTimeout(function(){D.subscribers.size===0&&vt(O,D)},3e3))})}var Ro={stack:"dbcore",level:0,name:"Cache",create:function(m){var v=m.schema.name;return i(i({},m),{transaction:function(w,_,D){var O,P,j=m.transaction(w,_,D);return _==="readwrite"&&(D=(O=new AbortController).signal,j.addEventListener("abort",(P=function(V){return function(){if(O.abort(),_==="readwrite"){for(var et=new Set,$=0,K=w;$<K.length;$++){var Q=K[$],Z=Vs["idb://".concat(v,"/").concat(Q)];if(Z){var X=m.table(Q),Y=Z.optimisticOps.filter(function(It){return It.trans===j});if(j._explicit&&V&&j.mutatedParts)for(var st=0,ot=Object.values(Z.queries.query);st<ot.length;st++)for(var nt=0,pt=(Nt=ot[st]).slice();nt<pt.length;nt++)Fl((Et=pt[nt]).obsSet,j.mutatedParts)&&(vt(Nt,Et),Et.subscribers.forEach(function(It){return et.add(It)}));else if(0<Y.length){Z.optimisticOps=Z.optimisticOps.filter(function(It){return It.trans!==j});for(var St=0,Dt=Object.values(Z.queries.query);St<Dt.length;St++)for(var Nt,Et,Ft,Lt=0,_t=(Nt=Dt[St]).slice();Lt<_t.length;Lt++)(Et=_t[Lt]).res!=null&&j.mutatedParts&&(V&&!Et.dirty?(Ft=Object.isFrozen(Et.res),Ft=ql(Et.res,Et.req,Y,X,Et,Ft),Et.dirty?(vt(Nt,Et),Et.subscribers.forEach(function(It){return et.add(It)})):Ft!==Et.res&&(Et.res=Ft,Et.promise=kt.resolve({result:Ft}))):(Et.dirty&&vt(Nt,Et),Et.subscribers.forEach(function(It){return et.add(It)})))}}}et.forEach(function(It){return It()})}}})(!1),{signal:D}),j.addEventListener("error",P(!1),{signal:D}),j.addEventListener("complete",P(!0),{signal:D})),j},table:function(w){var _=m.table(w),D=_.schema.primaryKey;return i(i({},_),{mutate:function(O){var P,j=Bt.trans;return!D.outbound&&j.db._options.cache!=="disabled"&&!j.explicit&&j.idbtrans.mode==="readwrite"&&(P=Vs["idb://".concat(v,"/").concat(w)])?(j=_.mutate(O),O.type!=="add"&&O.type!=="put"||!(50<=O.values.length||Co(D,O).some(function(V){return V==null}))?(P.optimisticOps.push(O),O.mutatedParts&&Eo(O.mutatedParts),j.then(function(V){0<V.numFailures&&(vt(P.optimisticOps,O),(V=gu(0,O,V))&&P.optimisticOps.push(V),O.mutatedParts)&&Eo(O.mutatedParts)}),j.catch(function(){vt(P.optimisticOps,O),O.mutatedParts&&Eo(O.mutatedParts)})):j.then(function(V){var et=gu(0,i(i({},O),{values:O.values.map(function($,K){var Q;return V.failures[K]?$:(H(Q=(Q=D.keyPath)!=null&&Q.includes(".")?Vt($):i({},$),D.keyPath,V.results[K]),Q)})}),V);P.optimisticOps.push(et),queueMicrotask(function(){return O.mutatedParts&&Eo(O.mutatedParts)})}),j):_.mutate(O)},query:function(O){var P,j,V,et,$,K,Q;return $s(Bt,_)&&mu("query",O)?(P=((V=Bt.trans)==null?void 0:V.db._options.cache)==="immutable",j=(V=Bt).requery,V=V.signal,K=((Z,X,Y,st)=>{var ot=Vs["idb://".concat(Z,"/").concat(X)];if(!ot)return[];if(!(Z=ot.queries[Y]))return[null,!1,ot,null];var nt=Z[(st.query?st.query.index.name:null)||""];if(!nt)return[null,!1,ot,null];switch(Y){case"query":var pt=nt.find(function(St){return St.req.limit===st.limit&&St.req.values===st.values&&Na(St.req.query.range,st.query.range)});return pt?[pt,!0,ot,nt]:[nt.find(function(St){return("limit"in St.req?St.req.limit:1/0)>=st.limit&&(!st.values||St.req.values)&&Mr(St.req.query.range,st.query.range)}),!1,ot,nt];case"count":return pt=nt.find(function(St){return Na(St.req.query.range,st.query.range)}),[pt,!!pt,ot,nt]}})(v,w,"query",O),Q=K[0],et=K[2],$=K[3],Q&&K[1]?Q.obsSet=O.obsSet:(K=_.query(O).then(function(Z){var X=Z.result;if(Q&&(Q.res=X),P){for(var Y=0,st=X.length;Y<st;++Y)Object.freeze(X[Y]);Object.freeze(X)}else Z.result=Vt(X);return Z}).catch(function(Z){return $&&Q&&vt($,Q),Promise.reject(Z)}),Q={obsSet:O.obsSet,promise:K,subscribers:new Set,type:"query",req:O,dirty:!1},$?$.push(Q):($=[Q],(et=et||(Vs["idb://".concat(v,"/").concat(w)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[O.query.index.name||""]=$)),Dd(Q,$,j,V),Q.promise.then(function(Z){return{result:ql(Z.result,O,et?.optimisticOps,_,Q,P)}})):_.query(O)}})}})}};function Dr(m,v){return new Proxy(m,{get:function(w,_,D){return _==="db"?v:Reflect.get(w,_,D)}})}$e.prototype.version=function(m){if(isNaN(m)||m<.1)throw new Tt.Type("Given version is not a positive number");if(m=Math.round(10*m)/10,this.idbdb||this._state.isBeingOpened)throw new Tt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,m);var v=this._versions,w=v.filter(function(_){return _._cfg.version===m})[0];return w||(w=new this.Version(m),v.push(w),v.sort(Ol),w.stores({}),this._state.autoSchema=!1),w},$e.prototype._whenReady=function(m){var v=this;return this.idbdb&&(this._state.openComplete||Bt.letThrough||this._vip)?m():new kt(function(w,_){if(v._state.openComplete)return _(new Tt.DatabaseClosed(v._state.dbOpenError));if(!v._state.isBeingOpened){if(!v._state.autoOpen)return void _(new Tt.DatabaseClosed);v.open().catch(Wt)}v._state.dbReadyPromise.then(w,_)}).then(m)},$e.prototype.use=function(D){var v=D.stack,w=D.create,_=D.level,D=D.name,O=(D&&this.unuse({stack:v,name:D}),this._middlewares[v]||(this._middlewares[v]=[]));return O.push({stack:v,create:w,level:_??10,name:D}),O.sort(function(P,j){return P.level-j.level}),this},$e.prototype.unuse=function(m){var v=m.stack,w=m.name,_=m.create;return v&&this._middlewares[v]&&(this._middlewares[v]=this._middlewares[v].filter(function(D){return _?D.create!==_:!!w&&D.name!==w})),this},$e.prototype.open=function(){var m=this;return bi(jn,function(){return Td(m)})},$e.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var m=this._state,v=Fs.indexOf(this);if(0<=v&&Fs.splice(v,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}m.isBeingOpened||(m.dbReadyPromise=new kt(function(w){m.dbReadyResolve=w}),m.openCanceller=new kt(function(w,_){m.cancelOpen=_}))},$e.prototype.close=function(v){var v=(v===void 0?{disableAutoOpen:!0}:v).disableAutoOpen,w=this._state;v?(w.isBeingOpened&&w.cancelOpen(new Tt.DatabaseClosed),this._close(),w.autoOpen=!1,w.dbOpenError=new Tt.DatabaseClosed):(this._close(),w.autoOpen=this._options.autoOpen||w.isBeingOpened,w.openComplete=!1,w.dbOpenError=null)},$e.prototype.delete=function(m){var v=this,w=(m===void 0&&(m={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),_=this._state;return new kt(function(D,O){function P(){v.close(m);var j=v._deps.indexedDB.deleteDatabase(v.name);j.onsuccess=qe(function(){var V,et,$;V=v._deps,et=v.name,wo($=V.indexedDB)||et===br||Ll($,V.IDBKeyRange).delete(et).catch(Wt),D()}),j.onerror=xi(O),j.onblocked=v._fireOnBlocked}if(w)throw new Tt.InvalidArgument("Invalid closeOptions argument to db.delete()");_.isBeingOpened?_.dbReadyPromise.then(P):P()})},$e.prototype.backendDB=function(){return this.idbdb},$e.prototype.isOpen=function(){return this.idbdb!==null},$e.prototype.hasBeenClosed=function(){var m=this._state.dbOpenError;return m&&m.name==="DatabaseClosed"},$e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},$e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty($e.prototype,"tables",{get:function(){var m=this;return c(this._allTables).map(function(v){return m._allTables[v]})},enumerable:!1,configurable:!0}),$e.prototype.transaction=function(){var m=(function(v,w,_){var D=arguments.length;if(D<2)throw new Tt.InvalidArgument("Too few arguments");for(var O=new Array(D-1);--D;)O[D-1]=arguments[D];return _=O.pop(),[v,At(O),_]}).apply(this,arguments);return this._transaction.apply(this,m)},$e.prototype._transaction=function(m,v,w){var _,D,O=this,P=Bt.trans,j=(P&&P.db===this&&m.indexOf("!")===-1||(P=null),m.indexOf("?")!==-1);m=m.replace("!","").replace("?","");try{if(D=v.map(function(et){if(et=et instanceof O.Table?et.name:et,typeof et!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return et}),m=="r"||m===Yi)_=Yi;else{if(m!="rw"&&m!=hs)throw new Tt.InvalidArgument("Invalid transaction mode: "+m);_=hs}if(P){if(P.mode===Yi&&_===hs){if(!j)throw new Tt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");P=null}P&&D.forEach(function(et){if(P&&P.storeNames.indexOf(et)===-1){if(!j)throw new Tt.SubTransaction("Table "+et+" not included in parent transaction.");P=null}}),j&&P&&!P.active&&(P=null)}}catch(et){return P?P._promise(null,function($,K){K(et)}):Be(et)}var V=(function et($,K,Q,Z,X){return kt.resolve().then(function(){var nt=Bt.transless||Bt,Y=$._createTransaction(K,Q,$._dbSchema,Z),nt=(Y.explicit=!0,{trans:Y,transless:nt});if(Z)Y.idbtrans=Z.idbtrans;else try{Y.create(),Y.idbtrans._explicit=!0,$._state.PR1398_maxLoop=3}catch(pt){return pt.name===he.InvalidState&&$.isOpen()&&0<--$._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),$.close({disableAutoOpen:!1}),$.open().then(function(){return et($,K,Q,null,X)})):Be(pt)}var st,ot=B(X),nt=(ot&&cn(),kt.follow(function(){var pt;(st=X.call(Y,Y))&&(ot?(pt=ti.bind(null,null),st.then(pt,pt)):typeof st.next=="function"&&typeof st.throw=="function"&&(st=Rr(st)))},nt));return(st&&typeof st.then=="function"?kt.resolve(st).then(function(pt){return Y.active?pt:Be(new Tt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):nt.then(function(){return st})).then(function(pt){return Z&&Y._resolve(),Y._completion.then(function(){return pt})}).catch(function(pt){return Y._reject(pt),Be(pt)})})}).bind(null,this,_,D,P,w);return P?P._promise(_,V,"lock"):Bt.trans?bi(Bt.transless,function(){return O._whenReady(V)}):this._whenReady(V)},$e.prototype.table=function(m){if(y(this._allTables,m))return this._allTables[m];throw new Tt.InvalidTable("Table ".concat(m," does not exist"))};var Pi=$e;function $e(m,v){var w,_,D,O,P,j=this,V=(this._middlewares={},this.verno=0,$e.dependencies),V=(this._options=v=i({addons:$e.addons,autoOpen:!0,indexedDB:V.indexedDB,IDBKeyRange:V.IDBKeyRange,cache:"cloned"},v),this._deps={indexedDB:v.indexedDB,IDBKeyRange:v.IDBKeyRange},v.addons),et=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Wt,dbReadyPromise:null,cancelOpen:Wt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:v.autoOpen}),$=(et.dbReadyPromise=new kt(function(K){et.dbReadyResolve=K}),et.openCanceller=new kt(function(K,Q){et.cancelOpen=Q}),this._state=et,this.name=m,this.on=wr(this,"populate","blocked","versionchange","close",{ready:[nn,Wt]}),this.once=function(K,Q){var Z=function(){for(var X=[],Y=0;Y<arguments.length;Y++)X[Y]=arguments[Y];j.on(K).unsubscribe(Z),Q.apply(j,X)};return j.on(K,Z)},this.on.ready.subscribe=N(this.on.ready.subscribe,function(K){return function(Q,Z){$e.vip(function(){var X,Y=j._state;Y.openComplete?(Y.dbOpenError||kt.resolve().then(Q),Z&&K(Q)):Y.onReadyBeingFired?(Y.onReadyBeingFired.push(Q),Z&&K(Q)):(K(Q),X=j,Z||K(function st(){X.on.ready.unsubscribe(Q),X.on.ready.unsubscribe(st)}))})}}),this.Collection=(w=this,Rn(Ed.prototype,function(st,Y){this.db=w;var Z=Cl,X=null;if(Y)try{Z=Y()}catch(nt){X=nt}var Y=st._ctx,st=Y.table,ot=st.hook.reading.fire;this._ctx={table:st,index:Y.index,isPrimKey:!Y.index||st.schema.primKey.keyPath&&Y.index===st.schema.primKey.name,range:Z,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:X,or:Y.or,valueMapper:ot!==Ee?ot:null}})),this.Table=(_=this,Rn(Tl.prototype,function(K,Q,Z){this.db=_,this._tx=Z,this.name=K,this.schema=Q,this.hook=_._allTables[K]?_._allTables[K].hook:wr(null,{creating:[pe,Wt],reading:[Pt,Ee],updating:[Ln,Wt],deleting:[Le,Wt]})})),this.Transaction=(D=this,Rn(Nl.prototype,function(K,Q,Z,X,Y){var st=this;K!=="readonly"&&Q.forEach(function(ot){ot=(ot=Z[ot])==null?void 0:ot.yProps,ot&&(Q=Q.concat(ot.map(function(nt){return nt.updatesTable})))}),this.db=D,this.mode=K,this.storeNames=Q,this.schema=Z,this.chromeTransactionDurability=X,this.idbtrans=null,this.on=wr(this,"complete","error","abort"),this.parent=Y||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new kt(function(ot,nt){st._resolve=ot,st._reject=nt}),this._completion.then(function(){st.active=!1,st.on.complete.fire()},function(ot){var nt=st.active;return st.active=!1,st.on.error.fire(ot),st.parent?st.parent._reject(ot):nt&&st.idbtrans&&st.idbtrans.abort(),Be(ot)})})),this.Version=(O=this,Rn(Cd.prototype,function(K){this.db=O,this._cfg={version:K,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(P=this,Rn(zs.prototype,function(K,Q,Z){if(this.db=P,this._ctx={table:K,index:Q===":id"?null:Q,or:Z},this._cmp=this._ascending=ue,this._descending=function(X,Y){return ue(Y,X)},this._max=function(X,Y){return 0<ue(X,Y)?X:Y},this._min=function(X,Y){return ue(X,Y)<0?X:Y},this._IDBKeyRange=P._deps.IDBKeyRange,!this._IDBKeyRange)throw new Tt.MissingAPI})),this.on("versionchange",function(K){0<K.newVersion?console.warn("Another connection wants to upgrade database '".concat(j.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(j.name,"'. Closing db now to resume the delete request.")),j.close({disableAutoOpen:!1})}),this.on("blocked",function(K){!K.newVersion||K.newVersion<K.oldVersion?console.warn("Dexie.delete('".concat(j.name,"') was blocked")):console.warn("Upgrade '".concat(j.name,"' blocked by other connection holding version ").concat(K.oldVersion/10))}),this._maxKey=Ta(v.IDBKeyRange),this._createTransaction=function(K,Q,Z,X){return new j.Transaction(K,Q,Z,j._options.chromeTransactionDurability,X)},this._fireOnBlocked=function(K){j.on("blocked").fire(K),Fs.filter(function(Q){return Q.name===j.name&&Q!==j&&!Q._state.vcFired}).map(function(Q){return Q.on("versionchange").fire(K)})},this.use(pu),this.use(Ro),this.use(Md),this.use(Rd),this.use(fu),new Proxy(this,{get:function(K,Q,Z){var X;return Q==="_vip"||(Q==="table"?function(Y){return Dr(j.table(Y),$)}:(X=Reflect.get(K,Q,Z))instanceof Tl?Dr(X,$):Q==="tables"?X.map(function(Y){return Dr(Y,$)}):Q==="_createTransaction"?function(){return Dr(X.apply(this,arguments),$)}:X)}}));this.vip=$,V.forEach(function(K){return K(j)})}var Oa,Xs=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",yu=(Mo.prototype.subscribe=function(m,v,w){return this._subscribe(m&&typeof m!="function"?m:{next:m,error:v,complete:w})},Mo.prototype[Xs]=function(){return this},Mo);function Mo(m){this._subscribe=m}try{Oa={indexedDB:l.indexedDB||l.mozIndexedDB||l.webkitIndexedDB||l.msIndexedDB,IDBKeyRange:l.IDBKeyRange||l.webkitIDBKeyRange}}catch{Oa={indexedDB:null,IDBKeyRange:null}}function bu(m){var v,w=!1,_=new yu(function(D){var O=B(m),P,j=!1,V={},et={},$={get closed(){return j},unsubscribe:function(){j||(j=!0,P&&P.abort(),K&&Mn.storagemutated.unsubscribe(Z))}},K=(D.start&&D.start($),!1),Q=function(){return us(X)},Z=function(Y){Ao(V,Y),Fl(et,V)&&Q()},X=function(){var Y,st,ot;!j&&Oa.indexedDB&&(V={},Y={},P&&P.abort(),P=new AbortController,ot=(nt=>{var pt=os();try{O&&cn();var St=Ke(m,nt);return St=O?St.finally(ti):St}finally{pt&&Ni()}})(st={subscr:Y,signal:P.signal,requery:Q,querier:m,trans:null}),Promise.resolve(ot).then(function(nt){w=!0,v=nt,j||st.signal.aborted||(V={},(pt=>{for(var St in pt)if(y(pt,St))return;return 1})(et=Y)||K||(Mn(_a,Z),K=!0),us(function(){return!j&&D.next&&D.next(nt)}))},function(nt){w=!1,["DatabaseClosedError","AbortError"].includes(nt?.name)||j||us(function(){j||D.error&&D.error(nt)})}))};return setTimeout(Q,0),$});return _.hasValue=function(){return w},_.getValue=function(){return v},_}var Ys=Pi;function Gl(m){var v=ms;try{ms=!0,Mn.storagemutated.fire(m),zl(m,!0)}finally{ms=v}}x(Ys,i(i({},J),{delete:function(m){return new Ys(m,{addons:[]}).delete()},exists:function(m){return new Ys(m,{addons:[]}).open().then(function(v){return v.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(m){try{return v=Ys.dependencies,w=v.indexedDB,v=v.IDBKeyRange,(wo(w)?Promise.resolve(w.databases()).then(function(_){return _.map(function(D){return D.name}).filter(function(D){return D!==br})}):Ll(w,v).toCollection().primaryKeys()).then(m)}catch{return Be(new Tt.MissingAPI)}var v,w},defineClass:function(){return function(m){d(this,m)}},ignoreTransaction:function(m){return Bt.trans?bi(Bt.transless,m):m()},vip:Pl,async:function(m){return function(){try{var v=Rr(m.apply(this,arguments));return v&&typeof v.then=="function"?v:kt.resolve(v)}catch(w){return Be(w)}}},spawn:function(m,v,w){try{var _=Rr(m.apply(w,v||[]));return _&&typeof _.then=="function"?_:kt.resolve(_)}catch(D){return Be(D)}},currentTransaction:{get:function(){return Bt.trans||null}},waitFor:function(m,v){return m=kt.resolve(typeof m=="function"?Ys.ignoreTransaction(m):m).timeout(v||6e4),Bt.trans?Bt.trans.waitFor(m):m},Promise:kt,debug:{get:function(){return Tn},set:function(m){iu(m)}},derive:E,extend:d,props:x,override:N,Events:wr,on:Mn,liveQuery:bu,extendObservabilitySet:Ao,getByKeyPath:z,setByKeyPath:H,delByKeyPath:function(m,v){typeof v=="string"?H(m,v,void 0):"length"in v&&[].map.call(v,function(w){H(m,w,void 0)})},shallowClone:ct,deepClone:Vt,getObjectDiff:_o,cmp:ue,asap:I,minKey:-1/0,addons:[],connections:Fs,errnames:he,dependencies:Oa,cache:Vs,semVer:"4.3.0",version:"4.3.0".split(".").map(function(m){return parseInt(m)}).reduce(function(m,v,w){return m+v/Math.pow(10,2*w)})})),Ys.maxKey=Ta(Ys.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Mn(_a,function(m){ms||(m=new CustomEvent(qs,{detail:m}),ms=!0,dispatchEvent(m),ms=!1)}),addEventListener(qs,function(m){m=m.detail,ms||Gl(m)}));var ka,ms=!1,Qn=function(){};return typeof BroadcastChannel<"u"&&((Qn=function(){(ka=new BroadcastChannel(qs)).onmessage=function(m){return m.data&&Gl(m.data)}})(),typeof ka.unref=="function"&&ka.unref(),Mn(_a,function(m){ms||ka.postMessage(m)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(m){if(!Pi.disableBfCache&&m.persisted){Tn&&console.debug("Dexie: handling persisted pagehide"),ka?.close();for(var v=0,w=Fs;v<w.length;v++)w[v].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(m){!Pi.disableBfCache&&m.persisted&&(Tn&&console.debug("Dexie: handling persisted pageshow"),Qn(),Gl({all:new Dn(-1/0,[[]])}))})),kt.rejectionMapper=function(m,v){return!m||m instanceof wt||m instanceof TypeError||m instanceof SyntaxError||!m.name||!de[m.name]?m:(v=new de[m.name](v||m.message,m),"stack"in m&&A(v,"stack",{get:function(){return this.inner.stack}}),v)},iu(Tn),i(Pi,Object.freeze({__proto__:null,Dexie:Pi,Entity:au,PropModification:Ea,RangeSet:Dn,add:function(m){return new Ea({add:m})},cmp:ue,default:Pi,liveQuery:bu,mergeRanges:Ks,rangesOverlap:uu,remove:function(m){return new Ea({remove:m})},replacePrefix:function(m,v){return new Ea({replacePrefix:[m,v]})}}),{default:Pi}),Pi})})(Ih)),Ih.exports}var DC=MC();const em=Dv(DC),Z0=Symbol.for("Dexie"),Yh=globalThis[Z0]||(globalThis[Z0]=em);if(em.semVer!==Yh.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${em.semVer} and ${Yh.semVer}`);const{liveQuery:xR,mergeRanges:wR,rangesOverlap:SR,RangeSet:AR,cmp:ER,Entity:_R,PropModification:CR,replacePrefix:TR,add:RR,remove:MR,DexieYProvider:DR}=Yh,Bm=new Yh("WiseMarkDB");Bm.version(1).stores({pdfs:"hash, filename, size, blob"});async function Dx(r){const t=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(t)).map(e=>e.toString(16).padStart(2,"0")).join("")}async function Fm(r,t,e,i){await Bm.pdfs.put({hash:r,filename:t,size:e,blob:i})}async function NC(r){const t=await Bm.pdfs.get(r);return t?{data:t.blob,filename:t.filename,size:t.size}:null}async function OC(r){if(!r?.pdf_hash)return null;try{const{data:t}=await Gn.getPdf(r.id),e=(t instanceof ArrayBuffer,t),i=r.file_size??e?.byteLength??0;return await Fm(r.pdf_hash,r.filename||"",i,e),{data:e,filename:r.filename||"",size:i}}catch{const t=await NC(r.pdf_hash);return t||null}}const As=["#f59e0b","#3b82f6","#10b981","#ef4444","#8b5cf6","#ec4899","#06b6d4","#f97316"];function Mp(r){if(!r)return null;const t=new Date(r);return Number.isNaN(t.getTime())?null:t.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}function kC(){const{projectId:r}=wm(),t=ba(),e=io(),[i,a]=U.useState(!1),[l,c]=U.useState(""),[u,d]=U.useState(null),[f,p]=U.useState(""),[y,x]=U.useState(!1),[S,A]=U.useState(""),[E,T]=U.useState(null),[M,k]=U.useState(""),[N,F]=U.useState(null),[I,z]=U.useState(As[0]),H=U.useRef(null),ct=U.useRef(null),ut=U.useRef(null),[At,Ct]=U.useState(0),{data:Rt,isLoading:Vt}=es({queryKey:["project",r],queryFn:async()=>{const{data:Pt}=await Xh.get(r);return Pt},enabled:!!r}),{data:xt,isLoading:zt}=es({queryKey:["documents",r],queryFn:async()=>{const{data:Pt}=await Gn.list({project:r});return Pt},enabled:!!r}),G=Array.isArray(xt)?xt:xt?.results??[],it=Os({mutationFn:({id:Pt,name:gt})=>Xh.update(Pt,{name:gt}),onSuccess:()=>{e.invalidateQueries({queryKey:["project",r]}),e.invalidateQueries({queryKey:["projects"]}),x(!1)}}),vt=Os({mutationFn:({id:Pt,filename:gt})=>Gn.update(Pt,{filename:gt}),onSuccess:()=>{e.invalidateQueries({queryKey:["documents",r]}),d(null),p("")}}),Ht=Os({mutationFn:Pt=>Gn.delete(Pt),onSuccess:()=>e.invalidateQueries({queryKey:["documents",r]})}),Ot=async Pt=>{const gt=Pt.target.files?.[0];if(!gt||!gt.type.includes("pdf"))return;c(""),T(gt);const pe=gt.name.replace(/\.pdf$/i,"")||gt.name;k(pe),z(As[G.length%As.length]),F(null),H.current=null;try{const Le=await gt.arrayBuffer(),Ln=await Dx(Le),Cn={arrayBuffer:Le,hash:Ln,size:gt.size};F(Cn),H.current={...Cn,suggestedName:pe}}catch(Le){c(Le.message||"Could not read file"),T(null),k("")}},B=()=>{T(null),k(""),F(null),z(As[0]),c(""),H.current=null,Ct(Pt=>Pt+1)},J=()=>{ut.current?.click()},ft=async Pt=>{Pt.preventDefault();const gt=r,Le=ct.current?.value?.trim()||M?.trim()||H.current?.suggestedName?.trim()||"",Ln=H.current||N;if(!gt){c("Project not found.");return}if(!Le){c("Please enter a name for the PDF.");return}if(!Ln||!Ln.hash||!Ln.arrayBuffer){c("File data missing. Please close and select the file again.");return}const Cn=Le.toLowerCase().endsWith(".pdf")?Le:`${Le}.pdf`;c(""),a(!0);try{const nn=new FormData;nn.append("project",String(gt)),nn.append("filename",Cn),nn.append("color",I),nn.append("file",new Blob([Ln.arrayBuffer]),Cn),await Gn.createWithFile(nn),await Fm(Ln.hash,Cn,Ln.size,Ln.arrayBuffer),e.invalidateQueries({queryKey:["documents",gt]}),T(null),k(""),F(null),H.current=null,Ct(Tn=>Tn+1)}catch(nn){const Tn=nn.response?.data?.detail||typeof nn.response?.data=="object"&&Object.values(nn.response?.data||{}).flat().join(" ")||nn.message||"Upload failed";c(String(Tn))}finally{a(!1)}},wt=Pt=>{d(Pt.id),p(Pt.filename||"")},Mt=()=>{if(u==null||!f.trim()){d(null);return}vt.mutate({id:u,filename:f.trim()})},qt=()=>{d(null),p("")},jt=()=>{A(Rt?.name??""),x(!0)},he=()=>{const Pt=S.trim();if(!Pt||Pt===Rt?.name){x(!1);return}it.mutate({id:r,name:Pt})},re=()=>{x(!1),A("")},Tt=va(Pt=>Pt.logout),{data:de}=es({queryKey:["me"],queryFn:async()=>{const{data:Pt}=await gl.me();return Pt}}),Wt=(de?.email?.[0]||de?.username?.[0]||"?").toUpperCase(),Ee=Rt?.color&&As.includes(Rt.color)?Rt.color:Rt?As[Rt.id%As.length]:As[0];return Vt||!Rt?R.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:R.jsx(Ns,{className:"w-8 h-8 animate-spin text-slate-400"})}):R.jsxs("div",{className:"min-h-screen bg-slate-50 antialiased",style:{fontFamily:"'DM Sans', sans-serif",color:"#1e293b"},children:[R.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=DM+Sans:ital,wght@0,400;0,500;0,600;1,400&family=JetBrains+Mono:wght@400;500&display=swap",rel:"stylesheet"}),R.jsxs("header",{className:"bg-white/92 backdrop-blur-md border-b border-slate-200 py-4 px-10 flex items-center justify-between",children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("button",{type:"button",onClick:()=>t("/app"),className:"p-2 rounded-lg text-slate-500 hover:text-slate-700 hover:bg-slate-100",title:"Back to projects",children:R.jsx(ld,{className:"w-4 h-4"})}),R.jsx("div",{className:"w-6 h-6 rounded-md bg-slate-700 flex items-center justify-center text-white text-xs font-semibold",style:{fontFamily:"'DM Sans', sans-serif"},children:"W"}),R.jsx("span",{className:"text-[1.05rem] font-semibold text-slate-900",style:{fontFamily:"'Instrument Serif', serif"},children:"WiseMark"})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("button",{type:"button",onClick:()=>{Tt(),t("/login",{replace:!0})},className:"p-2 rounded-lg text-slate-500 hover:text-slate-700 hover:bg-slate-100",title:"Sign out",children:R.jsx(jm,{className:"w-4 h-4"})}),R.jsx("button",{type:"button",onClick:()=>t("/app/settings"),className:"w-8 h-8 rounded-full bg-slate-700 text-white flex items-center justify-center text-[13px] font-semibold hover:bg-slate-600 transition-colors cursor-pointer",title:"Account settings",children:Wt})]})]}),R.jsxs("div",{className:"max-w-[720px] mx-auto px-6 py-10",style:{fontFamily:"'DM Sans', sans-serif"},children:[R.jsxs("div",{className:"flex items-start justify-between mb-2",children:[R.jsx("div",{className:"flex items-center gap-2 min-w-0",children:y?R.jsxs(R.Fragment,{children:[R.jsx("input",{type:"text",value:S,onChange:Pt=>A(Pt.target.value),className:"border border-slate-200 rounded-lg px-3 py-2 text-slate-900 min-w-0 flex-1 max-w-md text-[28px]",style:{fontFamily:"'Instrument Serif', serif",fontWeight:700,letterSpacing:"0.01em"},autoFocus:!0,onKeyDown:Pt=>{Pt.key==="Enter"&&he(),Pt.key==="Escape"&&re()}}),R.jsx("button",{type:"button",onClick:he,className:"p-2 text-green-600 hover:bg-slate-100 rounded-lg shrink-0",title:"Save",children:R.jsx(Q0,{className:"w-5 h-5"})}),R.jsx("button",{type:"button",onClick:re,className:"p-2 text-slate-500 hover:bg-slate-100 rounded-lg shrink-0",title:"Cancel",children:R.jsx(tm,{className:"w-5 h-5"})})]}):R.jsxs(R.Fragment,{children:[R.jsx("h1",{className:"m-0 text-[28px] text-slate-950 truncate",style:{fontFamily:"'Instrument Serif', serif",fontWeight:700,letterSpacing:"0.01em"},children:Rt.name}),R.jsx("button",{type:"button",onClick:jt,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg shrink-0",title:"Edit project name",children:R.jsx(Wp,{className:"w-4 h-4"})})]})}),R.jsxs("button",{type:"button",onClick:J,disabled:i,className:"flex items-center gap-1.5 px-4 py-2 text-sm font-medium rounded-lg text-white transition-colors hover:bg-slate-700 shrink-0 disabled:opacity-70",style:{background:"#1e293b",fontFamily:"'DM Sans', sans-serif"},children:[R.jsx(Jp,{className:"w-4 h-4"}),"Add PDF"]})]}),R.jsx("div",{className:"flex items-center gap-3 text-xs text-slate-400 mb-6 uppercase",style:{fontFamily:"'JetBrains Mono', monospace",letterSpacing:"0.08em"},children:R.jsxs("span",{children:[G.length," document",G.length!==1?"s":""]})}),R.jsx("input",{ref:ut,type:"file",accept:".pdf",onChange:Ot,className:"hidden","aria-hidden":"true",tabIndex:-1},At),l&&R.jsx("p",{className:"text-sm text-red-600 mb-4",children:l}),i&&R.jsxs("p",{className:"flex items-center gap-2 text-sm text-slate-600 mb-4",children:[R.jsx(Ns,{className:"w-4 h-4 animate-spin"})," Uploading..."]}),zt?R.jsxs("div",{className:"flex items-center gap-2 text-slate-500 py-12",style:{fontFamily:"'DM Sans', sans-serif"},children:[R.jsx(Ns,{className:"w-5 h-5 animate-spin"})," Loading PDFs"]}):G.length===0?R.jsxs("div",{className:"rounded-xl border border-slate-200 p-8 text-center text-slate-500",style:{fontFamily:"'DM Sans', sans-serif"},children:[R.jsx(Mx,{className:"w-12 h-12 mx-auto mb-3 text-slate-400"}),R.jsx("p",{children:"No PDFs in this project yet. Add a PDF above."})]}):R.jsx("ul",{className:"space-y-2",children:G.map(Pt=>R.jsx("li",{className:"rounded-xl border border-slate-200 bg-white overflow-hidden transition-all duration-200 hover:shadow-[0_4px_12px_rgba(71,85,105,0.08)] hover:-translate-y-px cursor-pointer",children:u===Pt.id?R.jsxs("div",{className:"flex items-center gap-2 px-5 py-3",children:[R.jsx("input",{type:"text",value:f,onChange:gt=>p(gt.target.value),className:"flex-1 min-w-0 border border-slate-200 rounded-lg px-3 py-2 text-slate-900",autoFocus:!0,onKeyDown:gt=>{gt.key==="Enter"&&Mt(),gt.key==="Escape"&&qt()}}),R.jsx("button",{type:"button",onClick:Mt,className:"p-2.5 text-green-600 hover:bg-slate-100 rounded-lg shrink-0",title:"Save",children:R.jsx(Q0,{className:"w-4 h-4"})}),R.jsx("button",{type:"button",onClick:qt,className:"p-2.5 text-slate-500 hover:bg-slate-100 rounded-lg shrink-0",title:"Cancel",children:R.jsx(tm,{className:"w-4 h-4"})})]}):R.jsxs("div",{className:"flex items-center gap-4 px-5 py-3 cursor-pointer",onClick:()=>t(`/document/${Pt.id}`),children:[R.jsx("div",{className:"shrink-0 rounded-sm",style:{width:4,height:40,background:Pt.color&&As.includes(Pt.color)?Pt.color:Ee}}),R.jsxs("div",{className:"flex-1 min-w-0 py-1 flex flex-col items-start gap-0.5",children:[R.jsx("span",{className:"text-base font-normal text-slate-900 truncate block w-full",style:{fontFamily:"'Instrument Serif', serif"},children:Pt.filename}),R.jsxs("span",{className:"text-xs text-slate-400 block",style:{fontFamily:"'JetBrains Mono', monospace"},children:[Pt.file_size!=null&&`${(Pt.file_size/1024).toFixed(1)} KB`,Pt.file_size!=null&&Mp(Pt.created_at)&&"  ",Mp(Pt.created_at)?`Uploaded ${Mp(Pt.created_at)}`:null]})]}),R.jsx("button",{type:"button",onClick:gt=>{gt.stopPropagation(),wt(Pt)},className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg shrink-0",title:"Rename",children:R.jsx(Wp,{className:"w-4 h-4"})}),R.jsx("button",{type:"button",onClick:gt=>{gt.stopPropagation(),confirm("Delete this PDF?")&&Ht.mutate(Pt.id)},className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg shrink-0",title:"Delete",children:R.jsx(cd,{className:"w-4 h-4"})})]})},Pt.id))})]}),E&&R.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4 bg-slate-950/40 backdrop-blur-sm",onClick:B,children:R.jsxs("div",{className:"rounded-xl bg-white border border-slate-200 shadow-xl w-full max-w-md p-6",onClick:Pt=>Pt.stopPropagation(),children:[R.jsx("h2",{className:"m-0 text-xl font-normal text-slate-900 mb-4",style:{fontFamily:"'Instrument Serif', serif"},children:"Name this PDF"}),N?R.jsxs("div",{className:"space-y-4",children:[l&&R.jsx("p",{className:"text-sm text-red-600 bg-red-50 rounded-lg px-3 py-2",children:l}),R.jsx("input",{ref:ct,type:"text",value:M,onChange:Pt=>k(Pt.target.value),placeholder:"Document name",className:"w-full border border-slate-200 rounded-lg px-3 py-2.5 text-slate-900",autoFocus:!0,disabled:i}),R.jsx("label",{className:"block text-[13px] font-medium text-slate-600 mb-2 uppercase tracking-wider",style:{fontFamily:"'JetBrains Mono', monospace"},children:"Colour"}),R.jsx("div",{className:"flex gap-2",children:As.map(Pt=>R.jsx("button",{type:"button",onClick:()=>z(Pt),disabled:i,className:"w-7 h-7 rounded-full shrink-0 transition-all border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:opacity-60",style:{background:Pt,borderColor:I===Pt?"#1e293b":"transparent",outline:I===Pt?"2px solid #fff":"none",outlineOffset:-4}},Pt))}),R.jsxs("div",{className:"flex justify-end gap-3 pt-2",style:{fontFamily:"'DM Sans', sans-serif"},children:[R.jsx("button",{type:"button",onClick:B,disabled:i,className:"px-4 py-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg",children:"Cancel"}),R.jsx("button",{type:"button",onClick:Pt=>{Pt.preventDefault(),ft(Pt)},disabled:i||!M.trim(),className:"px-4 py-2 text-sm font-medium rounded-lg text-white hover:bg-slate-700",style:{background:"#1e293b"},children:i?R.jsxs("span",{className:"inline-flex items-center gap-2",children:[R.jsx(Ns,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Upload & save"})]})]}):R.jsxs("div",{className:"flex items-center gap-2 text-slate-600 py-4",children:[R.jsx(Ns,{className:"w-5 h-5 animate-spin shrink-0"}),R.jsx("span",{children:"Reading file..."})]})]})})]})}const mi={yellow:{key:"yellow",label:"Yellow",name:"Key Metrics",hex:"#EAB308",rgba:"rgba(254, 243, 199, 0.5)",rgbaSoft:"rgba(234,179,8,0.18)",rgbaHover:"rgba(234,179,8,0.38)",solid:"#fbbf24"},green:{key:"green",label:"Green",name:"Competitive Advantages",hex:"#22C55E",rgba:"rgba(209, 250, 229, 0.5)",rgbaSoft:"rgba(34,197,94,0.18)",rgbaHover:"rgba(34,197,94,0.38)",solid:"#10b981"},blue:{key:"blue",label:"Blue",name:"Management Questions",hex:"#3B82F6",rgba:"rgba(219, 234, 254, 0.5)",rgbaSoft:"rgba(59,130,246,0.18)",rgbaHover:"rgba(59,130,246,0.38)",solid:"#3b82f6"},pink:{key:"pink",label:"Pink",name:"Investment Risks",hex:"#EC4899",rgba:"rgba(252, 231, 243, 0.5)",rgbaSoft:"rgba(236,72,153,0.18)",rgbaHover:"rgba(236,72,153,0.38)",solid:"#ec4899"},orange:{key:"orange",label:"Orange",name:"Commercial DD",hex:"#F97316",rgba:"rgba(254, 215, 170, 0.5)",rgbaSoft:"rgba(249,115,22,0.18)",rgbaHover:"rgba(249,115,22,0.38)",solid:"#f59e0b"}},cl=Object.keys(mi);function J0(r,t=1){if(!r||!r.startsWith("#"))return`rgba(148,163,184,${t})`;const e=parseInt(r.slice(1),16),i=e>>16&255,a=e>>8&255,l=e&255;return`rgba(${i},${a},${l},${t})`}function Ms(r,t={},e){if(t&&typeof t[r]=="string"&&t[r].trim())return t[r].trim();if(e?.length){const i=e.find(a=>a.key===r);if(i?.display_name)return i.display_name}return mi[r]&&mi[r].name||r}const ii=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),nm=[.001,0,0,.001,0,0],Dp=1.35,Ti={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ir={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Uc="pdfjs_internal_editor_",oe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},we={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},LC={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},im={TRIANGLES:1,LATTICE:2},An={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Uh={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},wn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},il={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},ud={ERRORS:0,WARNINGS:1,INFOS:5},zc={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Tc={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},PC={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let hd=ud.WARNINGS;function jC(r){Number.isInteger(r)&&(hd=r)}function BC(){return hd}function dd(r){hd>=ud.INFOS&&console.info(`Info: ${r}`)}function ne(r){hd>=ud.WARNINGS&&console.warn(`Warning: ${r}`)}function Oe(r){throw new Error(r)}function Ne(r,t){r||Oe(t)}function FC(r){switch(r?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Nx(r,t=null,e=null){if(!r)return null;if(e&&typeof r=="string"&&(e.addDefaultProtocol&&r.startsWith("www.")&&r.match(/\./g)?.length>=2&&(r=`http://${r}`),e.tryConvertEncoding))try{r=GC(r)}catch{}const i=t?URL.parse(r,t):URL.parse(r);return FC(i)?i:null}function Ox(r,t,e=!1){const i=URL.parse(r);return i?(i.hash=t,i.href):e&&Nx(r,"http://example.com")?r.split("#",1)[0]+`${t?`#${t}`:""}`:""}function ie(r,t,e,i=!1){return Object.defineProperty(r,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const so=(function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t})();class tv extends so{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Np extends so{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class sm extends so{constructor(t){super(t,"InvalidPDFException")}}class Qh extends so{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class IC extends so{constructor(t){super(t,"FormatError")}}class rr extends so{constructor(t){super(t,"AbortException")}}function UC(r){(typeof r!="object"||r?.length===void 0)&&Oe("Invalid argument for bytesToString");const t=r.length,e=8192;if(t<e)return String.fromCharCode.apply(null,r);const i=[];for(let a=0;a<t;a+=e){const l=Math.min(a+e,t),c=r.subarray(a,l);i.push(String.fromCharCode.apply(null,c))}return i.join("")}function fd(r){typeof r!="string"&&Oe("Invalid argument for stringToBytes");const t=r.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=r.charCodeAt(i)&255;return e}function zC(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function HC(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function qC(){try{return new Function(""),!0}catch{return!1}}class _n{static get isLittleEndian(){return ie(this,"isLittleEndian",HC())}static get isEvalSupported(){return ie(this,"isEvalSupported",qC())}static get isOffscreenCanvasSupported(){return ie(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ie(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return ie(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return ie(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return ie(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return ie(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Op=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));class Ut{static makeHexColor(t,e,i){return`#${Op[t]}${Op[e]}${Op[i]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,i=0){const a=t[i],l=t[i+1];t[i]=a*e[0]+l*e[2]+e[4],t[i+1]=a*e[1]+l*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const a=e[0],l=e[1],c=e[2],u=e[3],d=e[4],f=e[5];for(let p=0;p<6;p+=2){const y=t[i+p],x=t[i+p+1];t[i+p]=y*a+x*c+d,t[i+p+1]=y*l+x*u+f}}static applyInverseTransform(t,e){const i=t[0],a=t[1],l=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/l,t[1]=(-i*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/l}static axialAlignedBoundingBox(t,e,i){const a=e[0],l=e[1],c=e[2],u=e[3],d=e[4],f=e[5],p=t[0],y=t[1],x=t[2],S=t[3];let A=a*p+d,E=A,T=a*x+d,M=T,k=u*y+f,N=k,F=u*S+f,I=F;if(l!==0||c!==0){const z=l*p,H=l*x,ct=c*y,ut=c*S;A+=ct,M+=ct,T+=ut,E+=ut,k+=z,I+=z,F+=H,N+=H}i[0]=Math.min(i[0],A,T,E,M),i[1]=Math.min(i[1],k,F,N,I),i[2]=Math.max(i[2],A,T,E,M),i[3]=Math.max(i[3],k,F,N,I)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],a=t[1],l=t[2],c=t[3],u=i**2+a**2,d=i*l+a*c,f=l**2+c**2,p=(u+f)/2,y=Math.sqrt(p**2-(u*f-d**2));e[0]=Math.sqrt(p+y||1),e[1]=Math.sqrt(p-y||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>a)return null;const l=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return l>c?null:[i,l,a,c]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,a,l){l[0]=Math.min(l[0],t,i),l[1]=Math.min(l[1],e,a),l[2]=Math.max(l[2],t,i),l[3]=Math.max(l[3],e,a)}static#t(t,e,i,a,l,c,u,d,f,p){if(f<=0||f>=1)return;const y=1-f,x=f*f,S=x*f,A=y*(y*(y*t+3*f*e)+3*x*i)+S*a,E=y*(y*(y*l+3*f*c)+3*x*u)+S*d;p[0]=Math.min(p[0],A),p[1]=Math.min(p[1],E),p[2]=Math.max(p[2],A),p[3]=Math.max(p[3],E)}static#e(t,e,i,a,l,c,u,d,f,p,y,x){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&this.#t(t,e,i,a,l,c,u,d,-y/p,x);return}const S=p**2-4*y*f;if(S<0)return;const A=Math.sqrt(S),E=2*f;this.#t(t,e,i,a,l,c,u,d,(-p+A)/E,x),this.#t(t,e,i,a,l,c,u,d,(-p-A)/E,x)}static bezierBoundingBox(t,e,i,a,l,c,u,d,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,d),this.#e(t,i,l,u,e,a,c,d,3*(-t+3*(i-l)+u),6*(t-2*i+l),3*(i-t),f),this.#e(t,i,l,u,e,a,c,d,3*(-e+3*(a-c)+d),6*(e-2*a+c),3*(a-e),f)}}function GC(r){return decodeURIComponent(escape(r))}let kp=null,ev=null;function KC(r){return kp||(kp=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ev=new Map([["","t"]])),r.replaceAll(kp,(t,e,i)=>e?e.normalize("NFKC"):ev.get(i))}function kx(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),UC(r)}const rl="pdfjs_internal_id_";function VC(r,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,a,...l]=e;if(!r(i)&&!Number.isInteger(i)||!t(a))return!1;const c=l.length;let u=!0;switch(a.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;u=!1;break;default:return!1}for(const d of l)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function qn(r,t,e){return Math.min(Math.max(r,t),e)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((t,e)=>t+e,0)});class Hc{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function a(l){if(!l)return;let c=null;const u=l.name;if(u==="#text")c=l.value;else if(Hc.shouldBuildText(u))l?.attributes?.textContent?c=l.attributes.textContent:l.value&&(c=l.value);else return;if(c!==null&&e.push({str:c}),!!l.children)for(const d of l.children)a(d)}return a(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class Lx{static setupStorage(t,e,i,a,l){const c=a.getValue(e,{value:null});switch(i.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),l==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(c.value===i.attributes.xfaOn?t.setAttribute("checked",!0):c.value===i.attributes.xfaOff&&t.removeAttribute("checked"),l==="print")break;t.addEventListener("change",u=>{a.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),l==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const u of i.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:a,linkService:l}){const{attributes:c}=e,u=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${a}`);for(const[d,f]of Object.entries(c))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}u&&l.addLinkAttributes(t,c.href,c.newWindow),i&&c.dataId&&this.setupStorage(t,c.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,a=t.xfaHtml,l=t.intent||"display",c=document.createElement(a.name);a.attributes&&this.setAttributes({html:c,element:a,intent:l,linkService:i});const u=l!=="richText",d=t.div;if(d.append(c),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=y}u&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const y=document.createTextNode(a.value);c.append(y),u&&Hc.shouldBuildText(a.name)&&f.push(y)}return{textDivs:f}}const p=[[a,-1,c]];for(;p.length>0;){const[y,x,S]=p.at(-1);if(x+1===y.children.length){p.pop();continue}const A=y.children[++p.at(-1)[1]];if(A===null)continue;const{name:E}=A;if(E==="#text"){const M=document.createTextNode(A.value);f.push(M),S.append(M);continue}const T=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,E):document.createElement(E);if(S.append(T),A.attributes&&this.setAttributes({html:T,element:A,storage:e,intent:l,linkService:i}),A.children?.length>0)p.push([A,-1,T]);else if(A.value){const M=document.createTextNode(A.value);u&&Hc.shouldBuildText(E)&&f.push(M),T.append(M)}}for(const y of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const ha="http://www.w3.org/2000/svg";class yl{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Zc(r,t="text"){if(Lc(r,document.baseURI)){const e=await fetch(r);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const a=new XMLHttpRequest;a.open("GET",r,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}i(new Error(a.statusText))}},a.send(null)})}class Jc{constructor({viewBox:t,userUnit:e,scale:i,rotation:a,offsetX:l=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=a,this.offsetX=l,this.offsetY=c,i*=e;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let p,y,x,S;switch(a%=360,a<0&&(a+=360),a){case 180:p=-1,y=0,x=0,S=1;break;case 90:p=0,y=1,x=1,S=0;break;case 270:p=0,y=-1,x=-1,S=0;break;case 0:p=1,y=0,x=0,S=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(x=-x,S=-S);let A,E,T,M;p===0?(A=Math.abs(f-t[1])*i+l,E=Math.abs(d-t[0])*i+c,T=(t[3]-t[1])*i,M=(t[2]-t[0])*i):(A=Math.abs(d-t[0])*i+l,E=Math.abs(f-t[1])*i+c,T=(t[2]-t[0])*i,M=(t[3]-t[1])*i),this.transform=[p*i,y*i,x*i,S*i,A-p*i*d-x*i*f,E-y*i*d-S*i*f],this.width=T,this.height=M}get rawDims(){const t=this.viewBox;return ie(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:a=this.offsetY,dontFlip:l=!1}={}){return new Jc({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:a,dontFlip:l})}convertToViewportPoint(t,e){const i=[t,e];return Ut.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];Ut.applyTransform(e,this.transform);const i=[t[2],t[3]];return Ut.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return Ut.applyInverseTransform(i,this.transform),i}}class Im extends so{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function pd(r){const t=r.length;let e=0;for(;e<t&&r[e].trim()==="";)e++;return r.substring(e,e+5).toLowerCase()==="data:"}function Um(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function $C(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function XC(r,t="document.pdf"){if(typeof r!="string")return t;if(pd(r))return ne('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(r);if(!i)return t;const a=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},l=/\.pdf$/i,c=i.pathname.split("/").at(-1);if(l.test(c))return a(c);if(i.searchParams.size>0){const u=Array.from(i.searchParams.values()).reverse();for(const f of u)if(l.test(f))return a(f);const d=Array.from(i.searchParams.keys()).reverse();for(const f of d)if(l.test(f))return a(f)}if(i.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(d)return a(d[0])}return t}class nv{started=Object.create(null);times=[];time(t){t in this.started&&ne(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||ne(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:a,end:l}of this.times)t.push(`${i.padEnd(e)} ${l-a}ms
`);return t.join("")}}function Lc(r,t){const e=t?URL.parse(r,t):URL.parse(r);return e?.protocol==="http:"||e?.protocol==="https:"}function $i(r){r.preventDefault()}function rn(r){r.preventDefault(),r.stopPropagation()}function YC(r){console.log("Deprecated API usage: "+r)}class am{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const i=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let l=parseInt(e[3],10);l=l>=1&&l<=31?l:1;let c=parseInt(e[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(c+=p,u+=y):f==="+"&&(c-=p,u-=y),new Date(Date.UTC(i,a,l,c,u,d))}}function QC(r,{scale:t=1,rotation:e=0}){const{width:i,height:a}=r.attributes.style,l=[0,0,parseInt(i),parseInt(a)];return new Jc({viewBox:l,userUnit:1,scale:t,rotation:e})}function tu(r){if(r.startsWith("#")){const t=parseInt(r.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(t=>parseInt(t)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(ne(`Not a valid color format: "${r}"`),[0,0,0])}function WC(r){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of r.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;r.set(e,tu(i))}t.remove()}function tn(r){const{a:t,b:e,c:i,d:a,e:l,f:c}=r.getTransform();return[t,e,i,a,l,c]}function Es(r){const{a:t,b:e,c:i,d:a,e:l,f:c}=r.getTransform().invertSelf();return[t,e,i,a,l,c]}function eo(r,t,e=!1,i=!0){if(t instanceof Jc){const{pageWidth:a,pageHeight:l}=t.rawDims,{style:c}=r,u=_n.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,f=`var(--total-scale-factor) * ${l}px`,p=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,y=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(c.width=p,c.height=y):(c.width=y,c.height=p)}i&&r.setAttribute("data-main-rotation",t.rotation)}class Ls{constructor(){const{pixelRatio:t}=Ls;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,a,l=-1){let c=1/0,u=1/0,d=1/0;i=Ls.capPixels(i,l),i>0&&(c=Math.sqrt(i/(t*e))),a!==-1&&(u=a/t,d=a/e);const f=Math.min(c,u,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const rm=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class ZC{static get isDarkMode(){return ie(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class JC{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:i}=window.getComputedStyle(t);return t.remove(),ie(this,"commentForegroundColor",tu(i))}}function tT(r,t,e,i){i=Math.min(Math.max(i??1,0),1);const a=255*(1-i);return r=Math.round(r*i+a),t=Math.round(t*i+a),e=Math.round(e*i+a),[r,t,e]}function iv(r,t){const e=r[0]/255,i=r[1]/255,a=r[2]/255,l=Math.max(e,i,a),c=Math.min(e,i,a),u=(l+c)/2;if(l===c)t[0]=t[1]=0;else{const d=l-c;switch(t[1]=u<.5?d/(l+c):d/(2-l-c),l){case e:t[0]=((i-a)/d+(i<a?6:0))*60;break;case i:t[0]=((a-e)/d+2)*60;break;case a:t[0]=((e-i)/d+4)*60;break}}t[2]=u}function om(r,t){const e=r[0],i=r[1],a=r[2],l=(1-Math.abs(2*a-1))*i,c=l*(1-Math.abs(e/60%2-1)),u=a-l/2;switch(Math.floor(e/60)){case 0:t[0]=l+u,t[1]=c+u,t[2]=u;break;case 1:t[0]=c+u,t[1]=l+u,t[2]=u;break;case 2:t[0]=u,t[1]=l+u,t[2]=c+u;break;case 3:t[0]=u,t[1]=c+u,t[2]=l+u;break;case 4:t[0]=c+u,t[1]=u,t[2]=l+u;break;case 5:case 6:t[0]=l+u,t[1]=u,t[2]=c+u;break}}function sv(r){return r<=.03928?r/12.92:((r+.055)/1.055)**2.4}function av(r,t,e){om(r,e),e.map(sv);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];om(t,e),e.map(sv);const a=.2126*e[0]+.7152*e[1]+.0722*e[2];return i>a?(i+.05)/(a+.05):(a+.05)/(i+.05)}const rv=new Map;function eT(r,t){const e=r[0]+r[1]*256+r[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let i=rv.get(e);if(i)return i;const a=new Float32Array(9),l=a.subarray(0,3),c=a.subarray(3,6);iv(r,c);const u=a.subarray(6,9);iv(t,u);const d=u[2]<.5,f=d?12:4.5;if(c[2]=d?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),av(c,u,l)<f){let p,y;d?(p=c[2],y=1):(p=0,y=c[2]);const x=.005;for(;y-p>x;){const S=c[2]=(p+y)/2;d===av(c,u,l)<f?p=S:y=S}c[2]=d?y:p}return om(c,l),i=Ut.makeHexColor(Math.round(l[0]*255),Math.round(l[1]*255),Math.round(l[2]*255)),rv.set(e,i),i}function Px({html:r,dir:t,className:e},i){const a=document.createDocumentFragment();if(typeof r=="string"){const l=document.createElement("p");l.dir=t||"auto";const c=r.split(/(?:\r\n?|\n)/);for(let u=0,d=c.length;u<d;++u){const f=c[u];l.append(document.createTextNode(f)),u<d-1&&l.append(document.createElement("br"))}a.append(l)}else Lx.render({xfaHtml:r,div:a,intent:"richText"});a.firstElementChild.classList.add("richText",e),i.append(a)}function jx(r){const t=new Path2D;if(!r)return t;for(let e=0,i=r.length;e<i;)switch(r[e++]){case Tc.moveTo:t.moveTo(r[e++],r[e++]);break;case Tc.lineTo:t.lineTo(r[e++],r[e++]);break;case Tc.curveTo:t.bezierCurveTo(r[e++],r[e++],r[e++],r[e++],r[e++],r[e++]);break;case Tc.quadraticCurveTo:t.quadraticCurveTo(r[e++],r[e++],r[e++],r[e++]);break;case Tc.closePath:t.closePath();break;default:ne(`Unrecognized drawing path operator: ${r[e-1]}`);break}return t}class Re{static#t=null;static#e=null;static#i=null;static#n=0;static#s=[];get pagesNumber(){return Re.#n}set pagesNumber(t){Re.#n!==t&&(Re.#n=t,t===0&&(Re.#e=null,Re.#t=null))}addListener(t){Re.#s.push(t)}removeListener(t){const e=Re.#s.indexOf(t);e>=0&&Re.#s.splice(e,1)}#r(){for(const t of Re.#s)t()}#a(t){if(Re.#e)return;const e=Re.#n,i=new Uint32Array(3*e),a=Re.#e=i.subarray(0,e),l=Re.#t=i.subarray(e,2*e);if(t)for(let c=0;c<e;c++)a[c]=l[c]=c+1;Re.#i=i.subarray(2*e)}movePages(t,e,i){this.#a(!0);const a=Re.#e,l=Re.#t;Re.#i.set(l);const c=e.length,u=new Uint32Array(c);let d=0;for(let S=0;S<c;S++){const A=e[S]-1;u[S]=a[A],A<i&&(d+=1)}const f=Re.#n;let p=i-d;const y=f-c;p=qn(p,0,y);for(let S=0,A=0;S<f;S++)t.has(S+1)||(a[A++]=a[S]);a.copyWithin(p+c,p,y),a.set(u,p);let x=!1;for(let S=0,A=f;S<A;S++){const E=a[S];x||=E!==S+1,l[E-1]=S+1}this.#r(),x||(this.pagesNumber=0)}hasBeenAltered(){return Re.#e!==null}getPageMappingForSaving(){return{pageIndices:Re.#t?Re.#t.map(t=>t-1):null}}getPrevPageNumber(t){return Re.#i[Re.#e[t-1]-1]}getPageNumber(t){return Re.#t?.[t-1]??t}getPageId(t){return Re.#e?.[t-1]??t}static get instance(){return ie(this,"instance",new Re)}getMapping(){return Re.#e.subarray(0,this.pagesNumber)}}class Bc{#t=null;#e=null;#i;#n=null;#s=null;#r=null;#a=null;#o=null;static#c=null;constructor(t){this.#i=t,Bc.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#i._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",$i,{signal:e}),t.addEventListener("pointerdown",Bc.#l,{signal:e}));const i=this.#n=document.createElement("div");i.className="buttons",t.append(i);const a=this.#i.toolbarPosition;if(a){const{style:l}=t,c=this.#i._uiManager.direction==="ltr"?1-a[0]:a[0];l.insetInlineEnd=`${100*c}%`,l.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#i._focusEventsAllowed=!1,rn(t)}#h(t){this.#i._focusEventsAllowed=!0,rn(t)}#f(t){const e=this.#i._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",$i,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#s?.shown(),this.#r?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#i,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",Bc.#c[t]),this.#f(i)&&i.addEventListener("click",a=>{e.delete()},{signal:e._signal}),this.#n.append(i)}get#g(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#n.append(e,this.#g),this.#s=t}addComment(t,e=null){if(this.#r)return;const i=t.renderForToolbar();if(!i)return;this.#f(i);const a=this.#a=this.#g;e?(this.#n.insertBefore(i,e),this.#n.insertBefore(a,e)):this.#n.append(i,a),this.#r=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#n.append(e,this.#g)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#i);this.#f(e),this.#n.append(e,this.#g)}removeButton(t){t==="comment"&&(this.#r?.removeToolbarCommentButton(),this.#r=null,this.#a?.remove(),this.#a=null)}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,i){if(!e&&t==="comment")return;const a=this.#n.querySelector(i);a&&t==="comment"&&this.addComment(e,a)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class nT{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#i._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",$i,{signal:e});const i=this.#t=document.createElement("div");return i.className="buttons",t.append(i),this.#i.hasCommentManager()&&this.#r("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#r("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),t}#s(t,e){let i=0,a=0;for(const l of t){const c=l.y+l.height;if(c<i)continue;const u=l.x+(e?l.width:0);if(c>i){a=u,i=c;continue}e?u>a&&(a=u):u<a&&(a=u)}return[e?1-a:a,i]}show(t,e,i){const[a,l]=this.#s(e,i),{style:c}=this.#e||=this.#n();t.append(this.#e),c.insetInlineEnd=`${100*a}%`,c.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#r(t,e,i,a){const l=document.createElement("button");l.classList.add("basic",t),l.tabIndex=0,l.setAttribute("data-l10n-id",e);const c=document.createElement("span");l.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",i);const u=this.#i._signal;u instanceof AbortSignal&&!u.aborted&&(l.addEventListener("contextmenu",$i,{signal:u}),l.addEventListener("click",a,{signal:u})),this.#t.append(l)}}function Bx(r,t,e){for(const i of e)t.addEventListener(i,r[i].bind(r))}class Me{static#t=NaN;static#e=null;static#i=NaN;static#n=null;static initializeAndAddPointerId(t){(Me.#e||=new Set).add(t)}static setPointer(t,e){Me.#t||=e,Me.#n??=t}static setTimeStamp(t){Me.#i=t}static isSamePointerId(t){return Me.#t===t}static isSamePointerIdOrRemove(t){return Me.#t===t?!0:(Me.#e?.delete(t),!1)}static isSamePointerType(t){return Me.#n===t}static isInitializedAndDifferentPointerType(t){return Me.#n!==null&&!Me.isSamePointerType(t)}static isSameTimeStamp(t){return Me.#i===t}static isUsingMultiplePointers(){return Me.#e?.size>=1}static clearPointerType(){Me.#n=null}static clearPointerIds(){Me.#t=NaN,Me.#e=null}static clearTimeStamp(){Me.#i=NaN}}class iT{#t=0;get id(){return`${Uc}${this.#t++}`}}class zm{#t=kx();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const l=a.decode().then(()=>(i.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return ie(this,"_isSVGFittingCanvas",l)}async#n(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof e=="string"?(i.url=e,a=await Zc(e,"blob")):e instanceof File?a=i.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const l=zm._isSVGFittingCanvas,c=new FileReader,u=new Image,d=new Promise((f,p)=>{u.onload=()=>{i.bitmap=u,i.isSvg=!0,f()},c.onload=async()=>{const y=i.svgUrl=c.result;u.src=await l?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=c.onerror=p});c.readAsDataURL(a),await d}else i.bitmap=await createImageBitmap(a);i.refCounter=1}catch(a){ne(a),i=null}return this.#i.set(t,i),i&&this.#i.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:a,type:l}=t;return this.#n(`${e}_${i}_${a}_${l}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const i=await e;return this.#n(t,i)}async getFromId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i?.bitmap)return i.refCounter+=1,i;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),i={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,i),this.#i.set(i.id,i),i}getSvgUrl(t){const e=this.#i.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(i.width,i.height);a.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=a.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class sT{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:e,post:i,mustExec:a,type:l=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(a&&t(),this.#e)return;const d={cmd:t,undo:e,post:i,type:l};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(d);return}if(c&&this.#t[this.#n].type===l){u&&(d.undo=this.#t[this.#n].undo),this.#t[this.#n]=d;return}const f=this.#n+1;f===this.#i?this.#t.splice(0,1):(this.#n=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class eu{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=_n.platform;for(const[i,a,l={}]of t)for(const c of i){const u=c.startsWith("mac+");e&&u?(this.callbacks.set(c.slice(4),{callback:a,options:l}),this.allKeys.add(c.split("+").at(-1))):!e&&!u&&(this.callbacks.set(c,{callback:a,options:l}),this.allKeys.add(c.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#t(e));if(!i)return;const{callback:a,options:{bubbles:l=!1,args:c=[],checker:u=null}}=i;u&&!u(t,e)||(a.bind(t,...c,e)(),l||rn(e))}}class Hm{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return WC(t),ie(this,"_colors",t)}convert(t){const e=tu(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,a]of this._colors)if(a.every((l,c)=>l===e[c]))return Hm._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?Ut.makeHexColor(...e):t}}class or{#t=new AbortController;#e=null;#i=null;#n=new Map;#s=new Map;#r=null;#a=null;#o=null;#c=new sT;#l=null;#d=null;#h=null;#f=0;#g=new Set;#m=null;#u=null;#p=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#E=null;#A=null;#x=null;#C=null;#w=!1;#_=null;#D=new iT;#R=!1;#M=!1;#B=!1;#O=null;#L=null;#F=null;#P=null;#G=null;#T=oe.NONE;#S=new Set;#k=null;#I=null;#z=null;#$=null;#V=null;#X={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#j=null;#K=null;#Z=null;#J=null;#U=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=or.prototype,e=c=>c.#K.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),i=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return ie(this,"_keyboardManager",new eu([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#K.contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#K.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-l,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[l,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-l],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,l],checker:e}]]))}constructor(t,e,i,a,l,c,u,d,f,p,y,x,S,A,E,T){const M=this._signal=this.#t.signal;this.#K=t,this.#Z=e,this.#J=i,this.#r=a,this.#l=l,this.#I=c,this.#V=d,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:M}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:M}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:M}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:M}),u._on("setpreference",this.onSetPreference.bind(this),{signal:M}),u._on("switchannotationeditorparams",k=>this.updateParams(k.type,k.value),{signal:M}),u._on("pagesedited",this.onPagesEdited.bind(this),{signal:M}),window.addEventListener("pointerdown",()=>{this.#M=!0},{capture:!0,signal:M}),window.addEventListener("pointerup",()=>{this.#M=!1},{capture:!0,signal:M}),this.#rt(),this.#dt(),this.#et(),this.#a=d.annotationStorage,this.#E=d.filterFactory,this.#z=f,this.#C=p||null,this.#y=y,this.#v=x,this.#b=S,this.#G=A||null,this.viewParameters={realScale:yl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=E||null,this._supportsPinchToZoom=T!==!1,l?.setSidebarUiManager(this)}destroy(){this.#U?.resolve(),this.#U=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#s.values())t.destroy();this.#s.clear(),this.#n.clear(),this.#p.clear(),this.#P?.clear(),this.#e=null,this.#S.clear(),this.#c.destroy(),this.#r?.destroy(),this.#l?.destroy(),this.#I?.destroy(),this.#_?.hide(),this.#_=null,this.#F?.destroy(),this.#F=null,this.#i=null,this.#A&&(clearTimeout(this.#A),this.#A=null),this.#j&&(clearTimeout(this.#j),this.#j=null),this._editorUndoBar?.destroy(),this.#V=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#G}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return ie(this,"hcmFilter",this.#z?this.#E.addHCMFilter(this.#z.foreground,this.#z.background):"none")}get direction(){return ie(this,"direction",getComputedStyle(this.#K).direction)}get _highlightColors(){return ie(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return ie(this,"highlightColors",null);const e=new Map,i=!!this.#z;for(const[a,l]of t){const c=a.endsWith("_HCM");if(i&&c){e.set(a.replace("_HCM",""),l);continue}!i&&!c&&e.set(a,l)}return ie(this,"highlightColors",e)}get highlightColorNames(){return ie(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,e=!1){this.#r?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,i,a){this.#l?.showDialog(this,t,e,i,a)}selectComment(t,e){this.#s.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}deleteComment(t,e){const i=()=>{t.comment=e},a=()=>{this._editorUndoBar?.show(i,"comment"),this.toggleComment(null),t.comment=null};this.addCommands({cmd:a,undo:i,mustExec:!0})}toggleComment(t,e,i=void 0){this.#l?.toggleCommentPopup(t,e,i)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#s.has(t-1))return;const{resolve:e,promise:i}=Promise.withResolvers(),a=l=>{l.pageNumber===t&&(this._eventBus._off("editorsrendered",a),e())};this._eventBus.on("editorsrendered",a),await i}getSignature(t){this.#I?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#I}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){t==="enableNewAltTextWhenAddingImage"&&(this.#b=e)}onPagesEdited({pagesMapper:t}){for(const a of this.#n.values())a.updatePageIndex(t.getPrevPageNumber(a.pageIndex+1)-1);const e=this.#s,i=this.#s=new Map;for(const[a,l]of e){const c=t.getPrevPageNumber(a+1)-1;if(c===-1){l.destroy();continue}i.set(c,l),l.updatePageIndex(c)}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#K.focus()}findParent(t,e){for(const i of this.#s.values()){const{x:a,y:l,width:c,height:u}=i.div.getBoundingClientRect();if(t>=a&&t<=a+c&&e>=l&&e<=l+u)return i}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*yl.PDF_TO_CSS_UNITS;for(const e of this.#p)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#W({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of this.#s.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t="",e=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:a,anchorOffset:l,focusNode:c,focusOffset:u}=i,d=i.toString(),p=this.#W(i).closest(".textLayer"),y=this.getSelectionBoxes(p);if(!y)return;i.empty();const x=this.#tt(p),S=this.#T===oe.NONE,A=()=>{const E=x?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:a,anchorOffset:l,focusNode:c,focusOffset:u,text:d});S&&this.showAllEditors("highlight",!0,!0),e&&E?.editComment()};if(S){this.switchToMode(oe.HIGHLIGHT,A);return}A()}commentSelection(t=""){this.highlightSelection(t,!0)}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#W(t).closest(".textLayer"),a=this.getSelectionBoxes(i);a&&(this.#_||=new nT(this),this.#_.show(i,a,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#a)return null;const e=`${Uc}${t}`,i=this.#a.getRawValue(e);return i&&this.#a.remove(e),i}addToAnnotationStorage(t){!t.isEmpty()&&this.#a&&!this.#a.has(t.id)&&this.#a.setValue(t.id,t)}a11yAlert(t,e=null){const i=this.#J;i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}#at(){const t=document.getSelection();if(!t||t.isCollapsed){this.#k&&(this.#_?.hide(),this.#k=null,this.#N({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#k)return;const a=this.#W(t).closest(".textLayer");if(!a){this.#k&&(this.#_?.hide(),this.#k=null,this.#N({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#k=e,this.#N({hasSelectedText:!0}),!(this.#T!==oe.HIGHLIGHT&&this.#T!==oe.NONE)&&(this.#T===oe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#w=this.isShiftKeyDown,!this.isShiftKeyDown)){const l=this.#T===oe.HIGHLIGHT?this.#tt(a):null;if(l?.toggleDrawing(),this.#M){const c=new AbortController,u=this.combinedSignal(c),d=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),l?.toggleDrawing(!0),f.type==="pointerup"&&this.#Y("main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}else l?.toggleDrawing(!0),this.#Y("main_toolbar")}}#Y(t=""){this.#T===oe.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#st()}#rt(){document.addEventListener("selectionchange",this.#at.bind(this),{signal:this._signal})}#ot(){if(this.#x)return;this.#x=new AbortController;const t=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#lt(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#Y("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#S)if(e.div.contains(t)){this.#L=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#L)return;const[t,e]=this.#L;this.#L=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#O)return;this.#O=new AbortController;const t=this.combinedSignal(this.#O);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ct(){this.#O?.abort(),this.#O=null}#ut(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#ht(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ct(),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#S){const a=i.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const l of e.items)for(const c of this.#u)if(c.isHandlingMimeForPasting(l.type)){c.paste(l,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(l){ne(`paste: "${l.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const a=this.currentLayer;try{const l=[];for(const d of i){const f=await a.deserialize(d);if(!f)return;l.push(f)}const c=()=>{for(const d of l)this.#nt(d);this.#it(l)},u=()=>{for(const d of l)d.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(l){ne(`paste: "${l.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==oe.NONE&&!this.isEditorHandlingKeyboard&&or._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#Y("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#N(t){Object.entries(t).some(([i,a])=>this.#X[i]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#X,t)}),this.#T===oe.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#q([[we.HIGHLIGHT_FREE,!0]]))}#q(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ot(),this.#ut(),this.#N({isEditing:this.#T!==oe.NONE,isEmpty:this.#Q(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#lt(),this.#ht(),this.#N({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#q(e.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#s.get(this.#f)}getLayer(t){return this.#s.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#s.set(t.pageIndex,t),this.#R?t.enable():t.disable()}removeLayer(t){this.#s.delete(t.pageIndex)}async updateMode(t,e=null,i=!1,a=!1,l=!1,c=!1){if(this.#T!==t&&!(this.#U&&(await this.#U.promise,!this.#U))){if(this.#U=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#T===oe.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=t,t===oe.NONE){this.setEditingState(!1),this.#pt();for(const u of this.#n.values())u.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#U.resolve();return}for(const u of this.#n.values())u.addStandaloneCommentButton();t===oe.SIGNATURE&&await this.#I?.loadSignatures(),i&&Me.clearPointerType(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const u of this.#s.values())u.updateMode(t);if(t===oe.POPUP){this.#i||=await this.#V.getAnnotationsByType(new Set(this.#u.map(f=>f._editorType)));const u=new Set,d=[];for(const f of this.#n.values()){const{annotationElementId:p,hasComment:y,deleted:x}=f;p&&u.add(p),y&&!x&&d.push(f.getData())}for(const f of this.#i){const{id:p,popupRef:y,contentsObj:x}=f;y&&x?.str&&!u.has(p)&&!this.#g.has(p)&&d.push(f)}this.#l?.showSidebar(d)}if(!e){a&&this.addNewEditorFromKeyboard(),this.#U.resolve();return}for(const u of this.#n.values())u.uid===e?(this.setSelected(u),c?u.editComment():l?u.enterInEditMode():u.focus()):u.unselect();this.#U.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case we.CREATE:this.currentLayer.addNewEditor(e);return;case we.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#$||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const i of this.#S)i.updateParams(t,e);else for(const i of this.#u)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const l of this.#n.values())l.editorType===t&&l.show(e);(this.#$?.get(we.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#q([[we.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#B!==t){this.#B=t;for(const e of this.#s.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#R){this.#R=!0;const t=[];for(const e of this.#s.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#pt(){if(this.unselectAll(),this.#R){this.#R=!1;for(const t of this.#s.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#A&&clearTimeout(this.#A),this.#A=setTimeout(()=>{this.focusMainContainer(),this.#A=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#P?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#g.has(t.annotationElementId))&&this.#a?.remove(t.id)}addDeletedAnnotationElement(t){this.#g.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#g.has(t)}removeDeletedAnnotationElement(t){this.#g.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#nt(t){const e=this.#s.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#q(t.propertiesToUpdate))}get#mt(){let t=null;for(t of this.#S);return t}updateUI(t){this.#mt===t&&this.#q(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#q(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#S.has(t)){this.#S.delete(t),t.unselect(),this.#N({hasSelectedEditor:this.hasSelection});return}this.#S.add(t),t.select(),this.#q(t.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#h?.commitOrRemove();for(const e of this.#S)e!==t&&e.unselect();this.#S.clear(),this.#S.add(t),t.select(),this.#q(t.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}isSelected(t){return this.#S.has(t)}get firstSelectedEditor(){return this.#S.values().next().value}unselect(t){t.unselect(),this.#S.delete(t),this.#N({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#S.size!==0}get isEnterHandled(){return this.#S.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#N({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Q()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#Q()})}addCommands(t){this.#c.add(t),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Q()})}cleanUndoStack(t){this.#c.cleanType(t)}#Q(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#S],i=()=>{this._editorUndoBar?.show(a,e.length===1?e[0].editorType:e.length);for(const l of e)l.remove()},a=()=>{for(const l of e)this.#nt(l)};this.addCommands({cmd:i,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#it(t){for(const e of this.#S)e.unselect();this.#S.clear();for(const e of t)e.isEmpty()||(this.#S.add(e),e.select());this.#N({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#S)t.commit();this.#it(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==oe.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#S)t.unselect();this.#S.clear(),this.#N({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=t,this.#H[1]+=e;const[a,l]=this.#H,c=[...this.#S],u=1e3;this.#j&&clearTimeout(this.#j),this.#j=setTimeout(()=>{this.#j=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const d of c)this.#n.has(d.id)&&(d.translateInPage(a,l),d.translationDone())},undo:()=>{for(const d of c)this.#n.has(d.id)&&(d.translateInPage(-a,-l),d.translationDone())},mustExec:!1})},u);for(const d of c)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const t of this.#S)this.#m.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const t=this.#m;this.#m=null;let e=!1;for(const[{x:a,y:l,pageIndex:c},u]of t)u.newX=a,u.newY=l,u.newPageIndex=c,e||=a!==u.savedX||l!==u.savedY||c!==u.savedPageIndex;if(!e)return!1;const i=(a,l,c,u)=>{if(this.#n.has(a.id)){const d=this.#s.get(u);d?a._setParentAndPosition(d,l,c):(a.pageIndex=u,a.x=l,a.y=c)}};return this.addCommands({cmd:()=>{for(const[a,{newX:l,newY:c,newPageIndex:u}]of t)i(a,l,c,u)},undo:()=>{for(const[a,{savedX:l,savedY:c,savedPageIndex:u}]of t)i(a,l,c,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#m)for(const i of this.#m.keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#S.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}isEditingMode(){return this.#T!==oe.NONE}get imageManager(){return ie(this,"imageManager",new zm)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,p=e.rangeCount;f<p;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:i,y:a,width:l,height:c}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,p,y,x)=>({x:(p-a)/c,y:1-(f+y-i)/l,width:x/c,height:y/l});break;case"180":u=(f,p,y,x)=>({x:1-(f+y-i)/l,y:1-(p+x-a)/c,width:y/l,height:x/c});break;case"270":u=(f,p,y,x)=>({x:1-(p+x-a)/c,y:(f-i)/l,width:x/c,height:y/l});break;default:u=(f,p,y,x)=>({x:(f-i)/l,y:(p-a)/c,width:y/l,height:x/c});break}const d=[];for(let f=0,p=e.rangeCount;f<p;f++){const y=e.getRangeAt(f);if(!y.collapsed)for(const{x,y:S,width:A,height:E}of y.getClientRects())A===0||E===0||d.push(u(x,S,A,E))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const i=this.#a.getRawValue(e);i&&(this.#T===oe.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){const a=this.#P?.get(t);a&&(a.setCanvas(e,i),this.#P.delete(t))}addMissingCanvas(t,e){(this.#P||=new Map).set(t,e)}}class Ds{#t=null;#e=!1;#i=null;#n=null;#s=null;#r=null;#a=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,Ds.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Ds._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Ds.#f.missing),e.setAttribute("data-l10n-id",Ds.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#c._uiManager._signal;t.addEventListener("contextmenu",$i,{signal:i}),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:i});const a=l=>{l.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",a,{capture:!0,signal:i}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(this.#a=!0,a(l))},{signal:i}),await this.#m(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Ds._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#m())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:a,cancel:l=!1}){i&&(this.#l=i,this.#d=a),!(this.#t===t&&this.#e===e)&&(l||(this.#t=t,this.#e=e),this.#m())}toggle(t=!1){this.#i&&(!t&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#i.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#s=null,this.#o?.remove(),this.#o=null}async#m(){const t=this.#i;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Ds.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",Ds.#f[`${this.#g}-label`]),!this.#t){this.#s?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#s?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#s;if(!e){this.#s=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const a=100,l=this.#c._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#s.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:l}),t.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#s?.classList.remove("show")},{signal:l})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class wh{#t=null;#e=null;#i=!1;#n=null;#s=null;#r=null;#a=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#n.commentButtonPosition;if(e){const{style:i}=t;i.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const a=this.#n.commentButtonColor;a&&(i.backgroundColor=a)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:i}=this.#t.getBoundingClientRect(),{x:a,y:l,width:c,height:u}=this.#n.parent.boundingClientRect;return[(t-a)/c,(e+i-l)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const i=this.#n._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return t;t.addEventListener("contextmenu",$i,{signal:i}),e&&(t.addEventListener("focusin",l=>{this.#n._focusEventsAllowed=!1,rn(l)},{capture:!0,signal:i}),t.addEventListener("focusout",l=>{this.#n._focusEventsAllowed=!0,rn(l)},{capture:!0,signal:i})),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:i});const a=l=>{l.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",a,{capture:!0,signal:i}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(this.#i=!0,a(l))},{signal:i}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:i}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:i}),t}edit(t){const e=this.commentPopupPositionInLayer;let i,a;if(e)[i,a]=e;else{[i,a]=this.#n.commentButtonPosition;const{width:p,height:y,x,y:S}=this.#n;i=x+i*p,a=S+a*y}const l=this.#n.parent.boundingClientRect,{x:c,y:u,width:d,height:f}=l;this.#n._uiManager.editComment(this.#n,c+i*d,u+a*f,{...t,parentDimensions:l})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#s}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#r,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#a&&(this.#r=null),t===null){this.#a="",this.#c=!0;return}this.#a=t,this.#o=new Date,this.#c=!1}restoreData({text:t,richText:e,date:i}){this.#a=t,this.#r=e,this.#o=i,this.#c=!1}setInitialText(t,e=null){this.#s=t,this.data=t,this.#o=null,this.#r=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#a="",this.#r=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class md{#t;#e=!1;#i=null;#n;#s;#r;#a;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:a=null,onPinching:l=null,onPinchEnd:c=null,signal:u}){this.#t=t,this.#i=i,this.#n=e,this.#s=a,this.#r=l,this.#a=c,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ls.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const a=this.#o=new AbortController,l=AbortSignal.any([this.#c,a.signal]),c=this.#t,u={capture:!0,signal:l,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(rn(f),d(f))},u),c.addEventListener("pointerup",d,u),c.addEventListener("pointercancel",d,u);return}if(!this.#h){this.#h=new AbortController;const a=AbortSignal.any([this.#c,this.#h.signal]),l=this.#t,c={signal:a,capture:!1,passive:!1};l.addEventListener("touchmove",this.#g.bind(this),c);const u=this.#m.bind(this);l.addEventListener("touchend",u,c),l.addEventListener("touchcancel",u,c),c.capture=!0,l.addEventListener("pointerdown",rn,c),l.addEventListener("pointermove",rn,c),l.addEventListener("pointercancel",rn,c),l.addEventListener("pointerup",rn,c),this.#s?.()}if(rn(t),t.touches.length!==2||this.#i?.()){this.#l=null;return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#g(t){if(!this.#l||t.touches.length!==2)return;rn(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:a,screenY:l}=e,{screenX:c,screenY:u}=i,d=this.#l,{touch0X:f,touch0Y:p,touch1X:y,touch1Y:x}=d,S=y-f,A=x-p,E=c-a,T=u-l,M=Math.hypot(E,T)||1,k=Math.hypot(S,A)||1;if(!this.#e&&Math.abs(k-M)<=md.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=l,d.touch1X=c,d.touch1Y=u,!this.#e){this.#e=!0;return}const N=[(a+c)/2,(l+u)/2];this.#r?.(N,k,M)}#m(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#a?.()),this.#l&&(rn(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class Qt{#t=null;#e=null;#i=null;#n=null;#s=null;#r=!1;#a=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#g="";#m=!1;#u=null;#p=!1;#y=!1;#v=!1;#b=null;#E=0;#A=0;#x=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#w=!1;#_=Qt._zIndex++;static _borderLineWidth=-1;static _colorManager=new Hm;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=Qt.prototype._resizeWithKeyboard,e=or.TRANSLATE_SMALL,i=or.TRANSLATE_BIG;return ie(this,"_resizerKeyboardManager",new eu([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],Qt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,a],this.pageTranslation=[l,c];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}updatePageIndex(t){this.pageIndex=t}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return ie(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new aT({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Qt._l10n??=t,Qt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Qt._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Qt._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Oe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#w}set _isDraggable(t){this.#w=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#j(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,a){const[l,c]=this.parentDimensions;[i,a]=this.screenToPageTranslation(i,a),this.x=(t+i)/l,this.y=(e+a)/c,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,a]=this.parentDimensions;this.setAt(t*i,e*a,this.width*i,this.height*a),this._onTranslated()}#D([t,e],i,a){[i,a]=this.screenToPageTranslation(i,a),this.x+=i/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#D(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[a,l]}=this;if(this.x+=t/a,this.y+=e/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:x}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,x)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[d,f]=this.getBaseTranslation();c+=d,u+=f;const{style:p}=i;p.left=`${(100*c).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(c,u),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=Qt,a=i/t,l=i/e;switch(this.rotation){case 90:return[-a,l];case 180:return[a,l];case 270:return[a,-l];default:return[-a,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,a]}=this;let{x:l,y:c,width:u,height:d}=this;if(u*=i,d*=a,l*=i,c*=a,this._mustFixPosition)switch(t){case 0:l=qn(l,0,i-u),c=qn(c,0,a-d);break;case 90:l=qn(l,0,i-d),c=qn(c,u,a);break;case 180:l=qn(l,u,i),c=qn(c,d,a);break;case 270:l=qn(l,d,i),c=qn(c,0,a-u);break}this.x=l/=i,this.y=c/=a;const[f,p]=this.getBaseTranslation();l+=f,c+=p,e.left=`${(100*l).toFixed(2)}%`,e.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#R(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return Qt.#R(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return Qt.#R(t,e,360-this.parentRotation)}#M(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(){const{div:{style:t},width:e,height:i}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#B(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const a=document.createElement("div");this.#c.append(a),a.classList.add("resizer",i),a.setAttribute("data-resizer-name",i),a.addEventListener("pointerdown",this.#O.bind(this,i),{signal:e}),a.addEventListener("contextmenu",$i,{signal:e}),a.tabIndex=-1}this.div.prepend(this.#c)}#O(t,e){e.preventDefault();const{isMac:i}=_n.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#i?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const l=new AbortController,c=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#P.bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",rn,{passive:!1,signal:c}),window.addEventListener("contextmenu",$i,{signal:c}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{l.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=u,this.div.style.cursor=d,this.#F()};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})}#L(t,e,i,a){this.width=i,this.height=a,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:a}=this.#d;this.#d=null;const l=this.x,c=this.y,u=this.width,d=this.height;l===t&&c===e&&u===i&&d===a||this.addCommands({cmd:this.#L.bind(this,l,c,u,d),undo:this.#L.bind(this,t,e,i,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#P(t,e){const[i,a]=this.parentDimensions,l=this.x,c=this.y,u=this.width,d=this.height,f=Qt.MIN_SIZE/i,p=Qt.MIN_SIZE/a,y=this.#M(this.rotation),x=(G,it)=>[y[0]*G+y[2]*it,y[1]*G+y[3]*it],S=this.#M(360-this.rotation),A=(G,it)=>[S[0]*G+S[2]*it,S[1]*G+S[3]*it];let E,T,M=!1,k=!1;switch(t){case"topLeft":M=!0,E=(G,it)=>[0,0],T=(G,it)=>[G,it];break;case"topMiddle":E=(G,it)=>[G/2,0],T=(G,it)=>[G/2,it];break;case"topRight":M=!0,E=(G,it)=>[G,0],T=(G,it)=>[0,it];break;case"middleRight":k=!0,E=(G,it)=>[G,it/2],T=(G,it)=>[0,it/2];break;case"bottomRight":M=!0,E=(G,it)=>[G,it],T=(G,it)=>[0,0];break;case"bottomMiddle":E=(G,it)=>[G/2,it],T=(G,it)=>[G/2,0];break;case"bottomLeft":M=!0,E=(G,it)=>[0,it],T=(G,it)=>[G,0];break;case"middleLeft":k=!0,E=(G,it)=>[0,it/2],T=(G,it)=>[G,it/2];break}const N=E(u,d),F=T(u,d);let I=x(...F);const z=Qt._round(l+I[0]),H=Qt._round(c+I[1]);let ct=1,ut=1,At,Ct;if(e.fromKeyboard)({deltaX:At,deltaY:Ct}=e);else{const{screenX:G,screenY:it}=e,[vt,Ht]=this.#l;[At,Ct]=this.screenToPageTranslation(G-vt,it-Ht),this.#l[0]=G,this.#l[1]=it}if([At,Ct]=A(At/i,Ct/a),M){const G=Math.hypot(u,d);ct=ut=Math.max(Math.min(Math.hypot(F[0]-N[0]-At,F[1]-N[1]-Ct)/G,1/u,1/d),f/u,p/d)}else k?ct=qn(Math.abs(F[0]-N[0]-At),f,1)/u:ut=qn(Math.abs(F[1]-N[1]-Ct),p,1)/d;const Rt=Qt._round(u*ct),Vt=Qt._round(d*ut);I=x(...T(Rt,Vt));const xt=z-I[0],zt=H-I[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=Rt,this.height=Vt,this.x=xt,this.y=zt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new Bc(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(Ds.initialize(Qt._l10n),this.#i=new Ds(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.canAddComment?this.#n||=new wh(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#s){this._uiManager.isEditingMode()&&this.#s.classList.remove("hidden");return}this.hasComment&&(this.#s=this.#n.renderForStandalone(),this.div.append(this.#s))}}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#s=null}hideStandaloneCommentButton(){this.#s?.classList.add("hidden")}get comment(){if(!this.#n)return null;const{data:{richText:t,text:e,date:i,deleted:a}}=this.#n;return{text:e,richText:t,date:i,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new wh(this),typeof t=="object"&&t!==null?this.#n.restoreData(t):this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:i}){if(!e||(this.#n||=new wh(this),this.#n.setInitialText(t,i),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new wh(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[l]=this.pageDimensions,[c]=this.pageTranslation,u=c+l+1,d=a-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,d,f,a]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#r?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#z();const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[a,l]=this.getInitialTranslation();return this.translate(a,l),Bx(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new md({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#G.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#S.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#G(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(t,e,i){let l=.7*(i/e)+1-.7;if(l===1)return;const c=this.#M(this.rotation),u=(z,H)=>[c[0]*z+c[2]*H,c[1]*z+c[3]*H],[d,f]=this.parentDimensions,p=this.x,y=this.y,x=this.width,S=this.height,A=Qt.MIN_SIZE/d,E=Qt.MIN_SIZE/f;l=Math.max(Math.min(l,1/x,1/S),A/x,E/S);const T=Qt._round(x*l),M=Qt._round(S*l);if(T===x&&M===S)return;this.#u||=[p,y,x,S];const k=u(x/2,S/2),N=Qt._round(p+k[0]),F=Qt._round(y+k[1]),I=u(T/2,M/2);this.x=N-I[0],this.y=F-I[1],this.width=T,this.height=M,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#S(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(t){const{isMac:e}=_n.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#I(t);return}this.#k(t)}#k(t){const{isMac:e}=_n.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#I(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const a=new AbortController,l=this._uiManager.combinedSignal(a),c={capture:!0,passive:!1,signal:l},u=f=>{a.abort(),this.#a=null,this.#m=!1,this._uiManager.endDragSession()||this.#k(f),i&&this._onStopDragging()};e&&(this.#E=t.clientX,this.#A=t.clientY,this.#a=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:y,pointerId:x}=f;if(x!==this.#a){rn(f);return}const[S,A]=this.screenToPageTranslation(p-this.#E,y-this.#A);this.#E=p,this.#A=y,this._uiManager.dragSelectedEditors(S,A)},c),window.addEventListener("touchmove",rn,c),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#C||f.isPrimary)&&u(f),rn(f)},c));const d=f=>{if(!this.#a||this.#a===f.pointerId){u(f);return}rn(f)};window.addEventListener("pointerup",d,{signal:l}),window.addEventListener("blur",d,{signal:l})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const a=this.parentScale,[l,c]=this.pageDimensions,[u,d]=this.pageTranslation,f=t/a,p=e/a,y=this.x*l,x=this.y*c,S=this.width*l,A=this.height*c;switch(i){case 0:return[y+f+u,c-x-p-A+d,y+f+S+u,c-x-p+d];case 90:return[y+p+u,c-x+f+d,y+p+A+u,c-x+f+S+d];case 180:return[y-f-S+u,c-x+p+d,y-f+u,c-x+p+A+d];case 270:return[y-p-A+u,c-x-f-S+d,y-p+u,c-x-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,a,l,c]=t,u=l-i,d=c-a;switch(this.rotation){case 0:return[i,e-c,u,d];case 90:return[i,e-a,d,u];case 180:return[l,e-a,u,d];case 270:return[l,e-c,d,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Qt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:i,opacity:a,deleted:l,richText:c},uid:u,pageIndex:d,creationDate:f,modificationDate:p}=this;return{id:u,pageIndex:d,rect:this.getPDFRect(),richText:c,contentsObj:{str:t},creationDate:f,modificationDate:i||p,popupRef:!l,color:e,opacity:a}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:a}=this.getClientDimensions(),{innerHeight:l,innerWidth:c}=window;return e<c&&a>0&&t<l&&i>0}#z(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#z()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,i){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[l,c]=a.pageDimensions,[u,d,f,p]=a.getRectInCurrentCoords(t.rect,c);return a.x=u/l,a.y=d/c,a.width=f/l,a.height=p/c,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#j(),this.removeEditToolbar(),this.#x){for(const t of this.#x.values())clearTimeout(t);this.#x=null}this.parent=null,this.#C?.destroy(),this.#C=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#B(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[i,a,l,c]=this.getPDFRect();return[Qt._round(i+(l-i)*t),Qt._round(a+(c-a)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const c=this.#$.bind(this),u=this.#V.bind(this),d=this._uiManager._signal;for(const f of this.#e){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:d}),f.addEventListener("blur",u,{signal:d}),f.addEventListener("focus",this.#X.bind(this,p),{signal:d}),f.setAttribute("data-l10n-id",Qt._l10nResizer[p])}}const i=this.#e[0];let a=0;for(const c of e){if(c===i)break;a++}const l=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(l!==a){if(l<a)for(let u=0;u<a-l;u++)this.#c.append(this.#c.firstElementChild);else if(l>a)for(let u=0;u<l-a;u++)this.#c.firstElementChild.before(this.#c.lastElementChild);let c=0;for(const u of e){const f=this.#e[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Qt._l10nResizer[f])}}this.#H(0),this.#v=!0,this.#c.firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#$(t){Qt._resizerKeyboardManager.exec(this,t)}#V(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#j()}#X(t){this.#g=this.#v?t:""}#H(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#v&&this.#P(this.#g,{deltaX:t,deltaY:e,fromKeyboard:!0})}#j(){this.#v=!1,this.#H(-1),this.#F()}_stopResizingWithKeyboard(){this.#j(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#x||=new Map;const{action:i}=t;let a=this.#x.get(i);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#x.delete(i),this.#x.size===0&&(this.#x=null)},Qt._telemetryTimeout),this.#x.set(i,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class aT extends Qt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const ov=3285377520,Gi=4294901760,_s=65535;class Fx{constructor(t){this.h1=t?t&4294967295:ov,this.h2=t?t&4294967295:ov}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let E=0,T=t.length;E<T;E++){const M=t.charCodeAt(E);M<=255?e[i++]=M:(e[i++]=M>>>8,e[i++]=M&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=i>>2,l=i-a*4,c=new Uint32Array(e.buffer,0,a);let u=0,d=0,f=this.h1,p=this.h2;const y=3432918353,x=461845907,S=y&_s,A=x&_s;for(let E=0;E<a;E++)E&1?(u=c[E],u=u*y&Gi|u*S&_s,u=u<<15|u>>>17,u=u*x&Gi|u*A&_s,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(d=c[E],d=d*y&Gi|d*S&_s,d=d<<15|d>>>17,d=d*x&Gi|d*A&_s,p^=d,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,l){case 3:u^=e[a*4+2]<<16;case 2:u^=e[a*4+1]<<8;case 1:u^=e[a*4],u=u*y&Gi|u*S&_s,u=u<<15|u>>>17,u=u*x&Gi|u*A&_s,a&1?f^=u:p^=u}this.h1=f,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Gi|t*36045&_s,e=e*4283543511&Gi|((e<<16|t>>>16)*2950163797&Gi)>>>16,t^=e>>>1,t=t*444984403&Gi|t*60499&_s,e=e*3301882366&Gi|((e<<16|t>>>16)*3120437893&Gi)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const lm=Object.freeze({map:null,hash:"",transfer:void 0});class qm{#t=!1;#e=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#n.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#n.get(t)}remove(t){const e=this.#n.get(t);if(e!==void 0&&(e instanceof Qt&&this.#i.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of this.#n.values())if(i instanceof Qt)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#n.get(t);let a=!1;if(i!==void 0)for(const[l,c]of Object.entries(e))i[l]!==c&&(a=!0,i[l]=c);else a=!0,this.#n.set(t,e);a&&this.#s(),e instanceof Qt&&((this.#i||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#s(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Ix(this)}get serializable(){if(this.#n.size===0)return lm;const t=new Map,e=new Fx,i=[],a=Object.create(null);let l=!1;for(const[c,u]of this.#n){const d=u instanceof Qt?u.serialize(!1,a):u;u.page&&(u.pageIndex=u.page._pageIndex,delete u.page),d&&(t.set(c,d),e.update(`${c}:${JSON.stringify(d)}`),l||=!!d.bitmap)}if(l)for(const c of t.values())c.bitmap&&i.push(c.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:lm}get editorStats(){let t=null;const e=new Map;let i=0,a=0;for(const l of this.#n.values()){if(!(l instanceof Qt)){l.popup&&(l.popup.deleted?a+=1:i+=1);continue}l.isCommentDeleted?a+=1:l.hasEditedComment&&(i+=1);const c=l.telemetryFinalData;if(!c)continue;const{type:u}=c;e.has(u)||e.set(u,Object.getPrototypeOf(l).constructor),t||=Object.create(null);const d=t[u]||=new Map;for(const[f,p]of Object.entries(c)){if(f==="type")continue;let y=d.get(f);y||(y=new Map,d.set(f,y));const x=y.get(p)??0;y.set(p,x+1)}}if((a>0||i>0)&&(t||=Object.create(null),t.comments={deleted:a,edited:i}),!t)return null;for(const[l,c]of e)t[l]=c.computeTelemetryFinalData(t[l]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const i=this.#i?.get(t);return i?(i.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#i?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#i)for(const e of this.#i.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class Ix extends qm{#t;constructor(t){super();const{map:e,hash:i,transfer:a}=t.serializable,l=structuredClone(e,a?{transfer:a}:null);this.#t={map:l,hash:i,transfer:a}}get print(){Oe("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return ie(this,"modifiedIds",{ids:new Set,hash:""})}}class rT{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||this.#t.has(t.loadedName))){if(Ne(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:l,style:c}=t,u=new FontFace(a,l,c);this.addNativeFontFace(u);try{await u.load(),this.#t.add(a),i?.(t)}catch{ne(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Oe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(a){throw ne(`Failed to load font '${i.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const a=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return ie(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return ie(this,"isSyncFontLoadingSupported",ii||_n.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Ne(!a.done,"completeRequest() cannot be called twice."),a.done=!0;i.length>0&&i[0].done;){const l=i.shift();setTimeout(l.callback,0)}}const{loadingRequests:i}=this,a={done:!1,complete:e,callback:t};return i.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ie(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(F,I){return F.charCodeAt(I)<<24|F.charCodeAt(I+1)<<16|F.charCodeAt(I+2)<<8|F.charCodeAt(I+3)&255}function a(F,I,z,H){const ct=F.substring(0,I),ut=F.substring(I+z);return ct+H+ut}let l,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let f=0;function p(F,I){if(++f>30){ne("Load test font never loaded."),I();return}if(d.font="30px "+F,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){I();return}setTimeout(p.bind(null,F,I))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=a(x,976,y.length,y);const A=16,E=1482184792;let T=i(x,A);for(l=0,c=y.length-3;l<c;l+=4)T=T-E+i(y,l)|0;l<y.length&&(T=T-E+i(y+"XXX",l)|0),x=a(x,A,4,zC(T));const M=`url(data:font/opentype;base64,${btoa(x)});`,k=`@font-face {font-family:"${y}";src:${M}}`;this.insertRule(k);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const F of[t.loadedName,y]){const I=this._document.createElement("span");I.textContent="Hi",I.style.fontFamily=F,N.append(I)}this._document.body.append(N),p(y,()=>{N.remove(),e.complete()})}}class oT{#t;constructor(t,e=null,i,a){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,i&&Object.assign(this,i),a&&(this.charProcOperatorList=a)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let a;try{a=t.get(i)}catch(c){ne(`getPathGenerator - ignoring character: "${c}".`)}const l=jx(a?.path);return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=l}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}set disableFontFace(t){ie(this,"disableFontFace",!!t)}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}set bbox(t){ie(this,"bbox",t)}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class ul{#t;#e;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,i={};let a=0;for(const f of ul.strings){const p=e.encode(t[f]);i[f]=p,a+=4+p.length}const l=new ArrayBuffer(a),c=new Uint8Array(l),u=new DataView(l);let d=0;for(const f of ul.strings){const p=i[f],y=p.length;u.setUint32(d,y),c.set(p,d+4),d+=4+y}return Ne(d===l.byteLength,"CssFontInfo.write: Buffer overflow"),l}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}#n(t){Ne(t<ul.strings.length,"Invalid string index");let e=0;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,i))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class hl{#t;#e;#i;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,i={};let a=0;for(const x of hl.strings){const S=e.encode(t[x]);i[x]=S,a+=4+S.length}a+=4;let l,c,u=1+a;t.style&&(l=e.encode(t.style.style),c=e.encode(t.style.weight),u+=4+l.length+4+c.length);const d=new ArrayBuffer(u),f=new Uint8Array(d),p=new DataView(d);let y=0;p.setUint8(y++,t.guessFallback?1:0),p.setUint32(y,0),y+=4,a=0;for(const x of hl.strings){const S=i[x],A=S.length;a+=4+A,p.setUint32(y,A),f.set(S,y+4),y+=4+A}return p.setUint32(y-a-4,a),t.style&&(p.setUint32(y,l.length),f.set(l,y+4),y+=4+l.length,p.setUint32(y,c.length),f.set(c,y+4),y+=4+c.length),Ne(y<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(y)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){Ne(t<hl.strings.length,"Invalid string index");let e=5;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,i))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),i=this.#i.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const a=this.#e.getUint32(t),l=this.#i.decode(new Uint8Array(this.#t,t+4,a));return{style:i,weight:l}}}class He{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#i=this.#e+1+8;static#n=this.#i+1+48;static#s=this.#n+1+6;#r;#a;#o;constructor({data:t,extra:e}){this.#r=t,this.#a=new TextDecoder,this.#o=new DataView(this.#r),e&&Object.assign(this,e)}#c(t){Ne(t<He.bools.length,"Invalid boolean index");const e=Math.floor(t/4),i=t*2%8,a=this.#o.getUint8(e)>>i&3;return a===0?void 0:a===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Ne(t<He.numbers.length,"Invalid number index"),this.#o.getFloat64(He.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=He.#e;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let a=0;a<4;a++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}get fontMatrix(){let t=He.#i;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let a=0;a<6;a++)i.push(this.#o.getFloat64(t,!0)),t+=8;return i}get defaultVMetrics(){let t=He.#n;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let a=0;a<3;a++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}#d(t){Ne(t<He.strings.length,"Invalid string index");let e=He.#s+4;for(let l=0;l<t;l++)e+=this.#o.getUint32(e)+4;const i=this.#o.getUint32(e),a=new Uint8Array(i);return a.set(new Uint8Array(this.#r,e+4,i)),this.#a.decode(a)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=He.#s;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);t+=4+a;const l=this.#o.getUint32(t);if(l!==0)return new Uint8Array(this.#r,t+4,l)}clearData(){let t=He.#s;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);t+=4+a;const l=this.#o.getUint32(t);new Uint8Array(this.#r,t+4,l).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=He.#s;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);if(a===0)return null;const l=new Uint8Array(a);return l.set(new Uint8Array(this.#r,t+4,a)),new ul(l.buffer)}get systemFontInfo(){let t=He.#s;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);if(i===0)return null;const a=new Uint8Array(i);return a.set(new Uint8Array(this.#r,t+4,i)),new hl(a.buffer)}static write(t){const e=t.systemFontInfo?hl.write(t.systemFontInfo):null,i=t.cssFontInfo?ul.write(t.cssFontInfo):null,a=new TextEncoder,l={};let c=0;for(const E of He.strings)l[E]=a.encode(t[E]),c+=4+l[E].length;const u=He.#s+4+c+4+(e?e.byteLength:0)+4+(i?i.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(u),f=new Uint8Array(d),p=new DataView(d);let y=0;const x=He.bools.length;let S=0,A=0;for(let E=0;E<x;E++){const T=t[He.bools[E]];S|=(T===void 0?0:T?2:1)<<A,A+=2,(A===8||E===x-1)&&(p.setUint8(y++,S),S=0,A=0)}Ne(y===He.#t,"FontInfo.write: Boolean properties offset mismatch");for(const E of He.numbers)p.setFloat64(y,t[E]),y+=8;if(Ne(y===He.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){p.setUint8(y++,4);for(const E of t.bbox)p.setInt16(y,E,!0),y+=2}else p.setUint8(y++,0),y+=8;if(Ne(y===He.#i,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){p.setUint8(y++,6);for(const E of t.fontMatrix)p.setFloat64(y,E,!0),y+=8}else p.setUint8(y++,0),y+=48;if(Ne(y===He.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){p.setUint8(y++,1);for(const E of t.defaultVMetrics)p.setInt16(y,E,!0),y+=2}else p.setUint8(y++,0),y+=6;Ne(y===He.#s,"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(He.#s,0),y+=4;for(const E of He.strings){const T=l[E],M=T.length;p.setUint32(y,M),f.set(T,y+4),y+=4+M}if(p.setUint32(He.#s,y-He.#s-4),!e)p.setUint32(y,0),y+=4;else{const E=e.byteLength;p.setUint32(y,E),Ne(y+4+E<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),y+4),y+=4+E}if(!i)p.setUint32(y,0),y+=4;else{const E=i.byteLength;p.setUint32(y,E),Ne(y+4+E<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(i),y+4),y+=4+E}return t.data===void 0?(p.setUint32(y,0),y+=4):(p.setUint32(y,t.data.length),f.set(t.data,y+4),y+=4+t.data.length),Ne(y<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(y)}}class On{static#t=0;static#e=1;static#i=2;static#n=3;static#s=4;static#r=8;static#a=12;static#o=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,i=null,a=[],l=[],c=[],u=[],d=null,f=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,i=t[2],c=t[3],e===1?a.push(...t[4],...t[5]):a.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,d=t[1],a=t[2],l=t[3],u=t[4]||[],i=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const p=Math.floor(a.length/2),y=Math.floor(l.length/3),x=c.length,S=u.length;let A=0;for(const I of u)A+=1,A=Math.ceil(A/4)*4,A+=4+I.coords.length*4,A+=4+I.colors.length*4,I.verticesPerRow!==void 0&&(A+=4);const E=20+p*8+y*3+x*8+(i?16:0)+(f?3:0)+A,T=new ArrayBuffer(E),M=new DataView(T),k=new Uint8Array(T);M.setUint8(On.#t,e),M.setUint8(On.#e,i?1:0),M.setUint8(On.#i,f?1:0),M.setUint8(On.#n,d),M.setUint32(On.#s,p,!0),M.setUint32(On.#r,y,!0),M.setUint32(On.#a,x,!0),M.setUint32(On.#o,S,!0);let N=20;new Float32Array(T,N,p*2).set(a),N+=p*8,k.set(l,N),N+=y*3;for(const[I,z]of c)M.setFloat32(N,I,!0),N+=4,M.setUint32(N,parseInt(z.slice(1),16),!0),N+=4;if(i)for(const I of i)M.setFloat32(N,I,!0),N+=4;f&&(k.set(f,N),N+=3);for(let I=0;I<u.length;I++){const z=u[I];M.setUint8(N,z.type),N+=1,N=Math.ceil(N/4)*4,M.setUint32(N,z.coords.length,!0),N+=4,new Int32Array(T,N,z.coords.length).set(z.coords),N+=z.coords.length*4,M.setUint32(N,z.colors.length,!0),N+=4,new Int32Array(T,N,z.colors.length).set(z.colors),N+=z.colors.length*4,z.verticesPerRow!==void 0&&(M.setUint32(N,z.verticesPerRow,!0),N+=4)}return T}getIR(){const t=this.view,e=this.data[On.#t],i=!!this.data[On.#e],a=!!this.data[On.#i],l=t.getUint32(On.#s,!0),c=t.getUint32(On.#r,!0),u=t.getUint32(On.#a,!0),d=t.getUint32(On.#o,!0);let f=20;const p=new Float32Array(this.buffer,f,l*2);f+=l*8;const y=new Uint8Array(this.buffer,f,c*3);f+=c*3;const x=[];for(let T=0;T<u;++T){const M=t.getFloat32(f,!0);f+=4;const k=t.getUint32(f,!0);f+=4,x.push([M,`#${k.toString(16).padStart(6,"0")}`])}let S=null;if(i){S=[];for(let T=0;T<4;++T)S.push(t.getFloat32(f,!0)),f+=4}let A=null;a&&(A=new Uint8Array(this.buffer,f,3),f+=3);const E=[];for(let T=0;T<d;++T){const M=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const k=t.getUint32(f,!0);f+=4;const N=new Int32Array(this.buffer,f,k);f+=k*4;const F=t.getUint32(f,!0);f+=4;const I=new Int32Array(this.buffer,f,F);f+=F*4;const z={type:M,coords:N,colors:I};M===im.LATTICE&&(z.verticesPerRow=t.getUint32(f,!0),f+=4),E.push(z)}if(e===1)return["RadialAxial","axial",S,x,Array.from(p.slice(0,2)),Array.from(p.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",S,x,[p[0],p[1]],[p[3],p[4]],p[2],p[5]];if(e===3){const T=this.data[On.#n];let M=null;if(p.length>0){let k=p[0],N=p[0],F=p[1],I=p[1];for(let z=0;z<p.length;z+=2){const H=p[z],ct=p[z+1];k=k>H?H:k,F=F>ct?ct:F,N=N<H?H:N,I=I<ct?ct:I}M=[k,F,N,I]}return["Mesh",T,p,y,E,M,S,A]}throw new Error(`Unsupported pattern kind: ${e}`)}}class lT{static write(t){let e,i;return _n.isFloat16ArraySupported?(i=new ArrayBuffer(t.length*2),e=new Float16Array(i)):(i=new ArrayBuffer(t.length*4),e=new Float32Array(i)),e.set(t),i}#t;constructor(t){this.#t=t}get path(){return _n.isFloat16ArraySupported?new Float16Array(this.#t):new Float32Array(this.#t)}}function cT(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(ii)return r;const t=URL.parse(r,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function uT(r){if(ii&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return fd(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r?.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Sh(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const cm=r=>typeof r=="object"&&Number.isInteger(r?.num)&&r.num>=0&&Number.isInteger(r?.gen)&&r.gen>=0,hT=r=>typeof r=="object"&&typeof r?.name=="string",dT=VC.bind(null,cm,hT);class fT{#t=new Map;#e=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,i)})}addEventListener(t,e,i=null){let a=null;if(i?.signal instanceof AbortSignal){const{signal:l}=i;if(l.aborted){ne("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,e);a=()=>l.removeEventListener("abort",c),l.addEventListener("abort",c)}this.#t.set(e,a)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const Ah={DATA:1,ERROR:2},xn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function lv(){}function fi(r){if(r instanceof rr||r instanceof sm||r instanceof tv||r instanceof Qh||r instanceof Np)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||Oe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new rr(r.message);case"InvalidPDFException":return new sm(r.message);case"PasswordException":return new tv(r.message,r.code);case"ResponseException":return new Qh(r.message,r.status,r.missing);case"UnknownErrorException":return new Np(r.message,r.details)}return new Np(r.message,r.toString())}class Pc{#t=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const i=t.callbackId,a=this.callbackCapabilities[i];if(!a)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===Ah.DATA)a.resolve(t.data);else if(t.callback===Ah.ERROR)a.reject(fi(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,a=t.sourceName,l=this.comObj;Promise.try(e,t.data).then(function(c){l.postMessage({sourceName:i,targetName:a,callback:Ah.DATA,callbackId:t.callbackId,data:c})},function(c){l.postMessage({sourceName:i,targetName:a,callback:Ah.ERROR,callbackId:t.callbackId,reason:fi(c)})});return}if(t.streamId){this.#i(t);return}e(t.data)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const a=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[a]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},i)}catch(c){l.reject(c)}return l.promise}sendWithStream(t,e,i,a){const l=this.streamId++,c=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[l]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:u,action:t,streamId:l,data:e,desiredSize:f.desiredSize},a),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[l].pullCall=p,d.postMessage({sourceName:c,targetName:u,stream:xn.PULL,streamId:l,desiredSize:f.desiredSize}),p.promise},cancel:f=>{Ne(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[l].cancelCall=p,this.streamControllers[l].isClosed=!0,d.postMessage({sourceName:c,targetName:u,stream:xn.CANCEL,streamId:l,reason:fi(f)}),p.promise}},i)}#i(t){const e=t.streamId,i=this.sourceName,a=t.sourceName,l=this.comObj,c=this,u=this.actionHandler[t.action],d={enqueue(f,p=1,y){if(this.isCancelled)return;const x=this.desiredSize;this.desiredSize-=p,x>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:i,targetName:a,stream:xn.ENQUEUE,streamId:e,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:i,targetName:a,stream:xn.CLOSE,streamId:e}),delete c.streamSinks[e])},error(f){Ne(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:i,targetName:a,stream:xn.ERROR,streamId:e,reason:fi(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(u,t.data,d).then(function(){l.postMessage({sourceName:i,targetName:a,stream:xn.START_COMPLETE,streamId:e,success:!0})},function(f){l.postMessage({sourceName:i,targetName:a,stream:xn.START_COMPLETE,streamId:e,reason:fi(f)})})}#n(t){const e=t.streamId,i=this.sourceName,a=t.sourceName,l=this.comObj,c=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case xn.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(fi(t.reason));break;case xn.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(fi(t.reason));break;case xn.PULL:if(!u){l.postMessage({sourceName:i,targetName:a,stream:xn.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||lv).then(function(){l.postMessage({sourceName:i,targetName:a,stream:xn.PULL_COMPLETE,streamId:e,success:!0})},function(f){l.postMessage({sourceName:i,targetName:a,stream:xn.PULL_COMPLETE,streamId:e,reason:fi(f)})});break;case xn.ENQUEUE:if(Ne(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case xn.CLOSE:if(Ne(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#s(c,e);break;case xn.ERROR:Ne(c,"error should have stream controller"),c.controller.error(fi(t.reason)),this.#s(c,e);break;case xn.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(fi(t.reason)),this.#s(c,e);break;case xn.CANCEL:if(!u)break;const d=fi(t.reason);Promise.try(u.onCancel||lv,d).then(function(){l.postMessage({sourceName:i,targetName:a,stream:xn.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){l.postMessage({sourceName:i,targetName:a,stream:xn.CANCEL_COMPLETE,streamId:e,reason:fi(f)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#s(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class Ux{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Oe("Abstract method `_createCanvas` called.")}}class pT extends Ux{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class zx{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Oe("Abstract method `_fetch` called.")}}class cv extends zx{async _fetch(t){const e=await Zc(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):fd(e)}}class Hx{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,a,l){return"none"}destroy(t=!1){}}class mT extends Hx{#t;#e;#i;#n;#s;#r;#a=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#s=e}get#o(){return this.#e||=new Map}get#c(){return this.#r||=new Map}get#l(){if(!this.#i){const t=this.#s.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#s.createElementNS(ha,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#i=this.#s.createElementNS(ha,"defs"),t.append(i),i.append(this.#i),this.#s.body.append(t)}return this.#i}#d(t){if(t.length===1){const d=t[0],f=new Array(256);for(let y=0;y<256;y++)f[y]=d[y]/255;const p=f.join(",");return[p,p,p]}const[e,i,a]=t,l=new Array(256),c=new Array(256),u=new Array(256);for(let d=0;d<256;d++)l[d]=e[d]/255,c[d]=i[d]/255,u[d]=a[d]/255;return[l.join(","),c.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#s.URL;e!==this.#s.baseURI&&(pd(e)?ne('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Ox(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[i,a,l]=this.#d(t),c=t.length===1?i:`${i}${a}${l}`;if(e=this.#o.get(c),e)return this.#o.set(t,e),e;const u=`g_${this.#n}_transfer_map_${this.#a++}`,d=this.#h(u);this.#o.set(t,d),this.#o.set(c,d);const f=this.#m(u);return this.#p(i,a,l,f),d}addHCMFilter(t,e){const i=`${t}-${e}`,a="base";let l=this.#c.get(a);if(l?.key===i||(l?(l.filter?.remove(),l.key=i,l.url="none",l.filter=null):(l={key:i,url:"none",filter:null},this.#c.set(a,l)),!t||!e))return l.url;const c=this.#v(t);t=Ut.makeHexColor(...c);const u=this.#v(e);if(e=Ut.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return l.url;const d=new Array(256);for(let S=0;S<=255;S++){const A=S/255;d[S]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const f=d.join(","),p=`g_${this.#n}_hcm_filter`,y=l.filter=this.#m(p);this.#p(f,f,f,y),this.#g(y);const x=(S,A)=>{const E=c[S]/255,T=u[S]/255,M=new Array(A+1);for(let k=0;k<=A;k++)M[k]=E+k/A*(T-E);return M.join(",")};return this.#p(x(0,5),x(1,5),x(2,5),y),l.url=this.#h(p),l.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[i]=this.#d([t]),a=`alpha_${i}`;if(e=this.#o.get(a),e)return this.#o.set(t,e),e;const l=`g_${this.#n}_alpha_map_${this.#a++}`,c=this.#h(l);this.#o.set(t,c),this.#o.set(a,c);const u=this.#m(l);return this.#y(i,u),c}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let i,a;if(t?([i]=this.#d([t]),a=`luminosity_${i}`):a="luminosity",e=this.#o.get(a),e)return this.#o.set(t,e),e;const l=`g_${this.#n}_luminosity_map_${this.#a++}`,c=this.#h(l);this.#o.set(t,c),this.#o.set(a,c);const u=this.#m(l);return this.#f(u),t&&this.#y(i,u),c}addHighlightHCMFilter(t,e,i,a,l){const c=`${e}-${i}-${a}-${l}`;let u=this.#c.get(t);if(u?.key===c||(u?(u.filter?.remove(),u.key=c,u.url="none",u.filter=null):(u={key:c,url:"none",filter:null},this.#c.set(t,u)),!e||!i))return u.url;const[d,f]=[e,i].map(this.#v.bind(this));let p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[x,S]=[a,l].map(this.#v.bind(this));y<p&&([p,y,x,S]=[y,p,S,x]),this.#l.style.color="";const A=(M,k,N)=>{const F=new Array(256),I=(y-p)/N,z=M/255,H=(k-M)/(255*N);let ct=0;for(let ut=0;ut<=N;ut++){const At=Math.round(p+ut*I),Ct=z+ut*H;for(let Rt=ct;Rt<=At;Rt++)F[Rt]=Ct;ct=At+1}for(let ut=ct;ut<256;ut++)F[ut]=F[ct-1];return F.join(",")},E=`g_${this.#n}_hcm_${t}_filter`,T=u.filter=this.#m(E);return this.#g(T),this.#p(A(x[0],S[0],5),A(x[1],S[1],5),A(x[2],S[2],5),T),u.url=this.#h(E),u.url}destroy(t=!1){t&&this.#r?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#r?.clear(),this.#r=null,this.#a=0)}#f(t){const e=this.#s.createElementNS(ha,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#s.createElementNS(ha,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#m(t){const e=this.#s.createElementNS(ha,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,i){const a=this.#s.createElementNS(ha,e);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),t.append(a)}#p(t,e,i,a){const l=this.#s.createElementNS(ha,"feComponentTransfer");a.append(l),this.#u(l,"feFuncR",t),this.#u(l,"feFuncG",e),this.#u(l,"feFuncB",i)}#y(t,e){const i=this.#s.createElementNS(ha,"feComponentTransfer");e.append(i),this.#u(i,"feFuncA",t)}#v(t){return this.#l.style.color=t,tu(getComputedStyle(this.#l).getPropertyValue("color"))}}class qx{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Oe("Abstract method `_fetch` called.")}}class uv extends qx{async _fetch(t){const e=await Zc(t,"arraybuffer");return new Uint8Array(e)}}class Gx{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Oe("Abstract method `_fetch` called.")}}class hv extends Gx{async _fetch(t){const e=await Zc(t,"arraybuffer");return new Uint8Array(e)}}ii&&ne("Please use the `legacy` build in Node.js environments.");async function Gm(r){const e=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(e)}class gT extends Hx{}class yT extends Ux{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class bT extends zx{async _fetch(t){return Gm(t)}}class vT extends qx{async _fetch(t){return Gm(t)}}class xT extends Gx{async _fetch(t){return Gm(t)}}const el="__forcedDependency",{floor:dv,ceil:fv}=Math;function Eh(r,t,e,i,a,l){r[t*4+0]=Math.min(r[t*4+0],e),r[t*4+1]=Math.min(r[t*4+1],i),r[t*4+2]=Math.max(r[t*4+2],a),r[t*4+3]=Math.max(r[t*4+3],l)}const um=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class wT{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===um}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const _h=(r,t)=>{if(!r)return;let e=r.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},r.set(t,e)),e};class ST{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[el]:[]};#i=new Map;#n=[];#s=[];#r=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#g;#m;#u;#p;constructor(t,e,i=!1){this.#f=t.width,this.#g=t.height,this.#y(e),i&&(this.#p=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,e){const i=new ArrayBuffer(t*4);this.#m=new Uint8ClampedArray(i),this.#u=new Uint32Array(i),e&&e.length>0?(this.#u.set(e),this.#u.fill(um,e.length)):this.#u.fill(um)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[el]:{__proto__:this.#e[el]}},this.#a={__proto__:this.#a},this.#n.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#a=Object.getPrototypeOf(this.#a);const i=this.#n.pop();return i!==void 0&&(_h(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(_h(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#s.push(t),this}endMarkedContent(t){const e=this.#s.pop();return e!==void 0&&(_h(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#r.push(Ut.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform())),this}popBaseTransform(){return this.#r.length>1&&this.#r.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#i.set(t,e),this}recordSimpleDataFromNamed(t,e,i){this.#t[t]=this.#i.get(e)??i}recordFutureForcedDependency(t,e){return this.recordIncrementalData(el,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(el,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,i,a,l,c){const u=Ut.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform()),d=[1/0,1/0,-1/0,-1/0];Ut.axialAlignedBoundingBox([i,l,a,c],u,d);const f=Ut.intersect(this.#a,d);return f?(this.#a[0]=f[0],this.#a[1]=f[1],this.#a[2]=f[2],this.#a[3]=f[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(t,e,i,a,l,c){const u=this.#a;if(u[0]===1/0)return this;const d=Ut.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform());if(u[0]===-1/0)return Ut.axialAlignedBoundingBox([i,l,a,c],d,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return Ut.axialAlignedBoundingBox([i,l,a,c],d,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,e,i,a=1,l=0,c=0,u){const d=i.bbox;let f,p;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(i),f!==!1&&(p=[0,0,0,0],Ut.axialAlignedBoundingBox(d,i.fontMatrix,p),(a!==1||l!==0||c!==0)&&Ut.scaleMinMax([a,0,0,-a,l,c],p),f)))return this.recordBBox(t,e,p[0],p[2],p[1],p[3]);if(!u)return this.recordFullPageBBox(t);const y=u();return d&&p&&f===void 0&&(f=p[0]<=l-y.actualBoundingBoxLeft&&p[2]>=l+y.actualBoundingBoxRight&&p[1]<=c-y.actualBoundingBoxAscent&&p[3]>=c+y.actualBoundingBoxDescent,this.#h.set(i,f),f)?this.recordBBox(t,e,p[0],p[2],p[1],p[3]):this.recordBBox(t,e,l-y.actualBoundingBoxLeft,l+y.actualBoundingBoxRight,c-y.actualBoundingBoxAscent,c+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#g,this.#a[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const i=this.#l,a=this.#t,l=this.#e;for(const c of e)c in this.#t?i.add(a[c]):c in l&&l[c].forEach(i.add,i);return this}recordNamedDependency(t,e){return this.#i.has(e)&&this.#l.add(this.#i.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[el]),this.#p){const i=_h(this.#p,t),{dependencies:a}=i;this.#l.forEach(a.add,a),this.#n.forEach(a.add,a),this.#s.forEach(a.add,a),a.delete(t),i.isRenderingOperation=!0}if(this.#c===t){const i=dv(this.#o[0]*256/this.#f),a=dv(this.#o[1]*256/this.#g),l=fv(this.#o[2]*256/this.#f),c=fv(this.#o[3]*256/this.#g);Eh(this.#m,t,i,a,l,c);for(const u of this.#l)u!==t&&Eh(this.#m,u,i,a,l,c);for(const u of this.#n)u!==t&&Eh(this.#m,u,i,a,l,c);for(const u of this.#s)u!==t&&Eh(this.#m,u,i,a,l,c);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const i=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const a of i)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new wT(this.#u,this.#m)}takeDebugMetadata(){return this.#p}}class Wh{#t;#e;#i;#n=0;#s=0;constructor(t,e,i){if(t instanceof Wh&&t.#i===!!i)return t;this.#t=t,this.#e=e,this.#i=!!i}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#s++,this.#t.save(this.#e),this}restore(t){return this.#s>0&&(this.#t.restore(this.#e),this.#s--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,i){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#i||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,i,a,l,c){return this.#i||this.#t.recordClipBox(this.#e,e,i,a,l,c),this}recordBBox(t,e,i,a,l,c){return this.#i||this.#t.recordBBox(this.#e,e,i,a,l,c),this}recordCharacterBBox(t,e,i,a,l,c,u){return this.#i||this.#t.recordCharacterBBox(this.#e,e,i,a,l,c,u),this}recordFullPageBBox(t){return this.#i||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#i||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Ki={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Kn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function hm(r,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,i),r.clip(a)}class Km{isModifyingCurrentTransform(){return!1}getPattern(){Oe("Abstract method `getPattern` called.")}}class AT extends Km{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let i,a=this._p0,l=this._p1;if(e&&(a=a.slice(),l=l.slice(),Ut.applyTransform(a,e),Ut.applyTransform(l,e)),this._type==="axial")i=t.createLinearGradient(a[0],a[1],l[0],l[1]);else if(this._type==="radial"){let c=this._r0,u=this._r1;if(e){const d=new Float32Array(2);Ut.singularValueDecompose2dScale(e,d),c*=d[0],u*=d[0]}i=t.createRadialGradient(a[0],a[1],c,l[0],l[1],u)}for(const c of this._colorStops)i.addColorStop(c[0],c[1]);return i}getPattern(t,e,i,a){let l;if(a===Kn.STROKE||a===Kn.FILL){if(this.isOriginBased()){let x=Ut.transform(i,e.baseTransform);this.matrix&&(x=Ut.transform(x,this.matrix));const S=.001,A=Math.hypot(x[0],x[1]),E=Math.hypot(x[2],x[3]),T=(x[0]*x[2]+x[1]*x[3])/(A*E);if(Math.abs(T)<S)if(this.isRadial()){if(Math.abs(A-E)<S)return this._createGradient(t,x)}else return this._createGradient(t,x)}const c=e.current.getClippedPathBoundingBox(a,tn(t))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,d),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-c[0],-c[1]),i=Ut.transform(i,[1,0,0,1,c[0],c[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),hm(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),l=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(i);l.setTransform(y)}else hm(t,this._bbox),l=this._createGradient(t);return l}}function Lp(r,t,e,i,a,l,c,u){const d=t.coords,f=t.colors,p=r.data,y=r.width*4;let x;d[e+1]>d[i+1]&&(x=e,e=i,i=x,x=l,l=c,c=x),d[i+1]>d[a+1]&&(x=i,i=a,a=x,x=c,c=u,u=x),d[e+1]>d[i+1]&&(x=e,e=i,i=x,x=l,l=c,c=x);const S=(d[e]+t.offsetX)*t.scaleX,A=(d[e+1]+t.offsetY)*t.scaleY,E=(d[i]+t.offsetX)*t.scaleX,T=(d[i+1]+t.offsetY)*t.scaleY,M=(d[a]+t.offsetX)*t.scaleX,k=(d[a+1]+t.offsetY)*t.scaleY;if(A>=k)return;const N=f[l],F=f[l+1],I=f[l+2],z=f[c],H=f[c+1],ct=f[c+2],ut=f[u],At=f[u+1],Ct=f[u+2],Rt=Math.round(A),Vt=Math.round(k);let xt,zt,G,it,vt,Ht,Ot,B;for(let J=Rt;J<=Vt;J++){if(J<T){const jt=J<A?0:(A-J)/(A-T);xt=S-(S-E)*jt,zt=N-(N-z)*jt,G=F-(F-H)*jt,it=I-(I-ct)*jt}else{let jt;J>k?jt=1:T===k?jt=0:jt=(T-J)/(T-k),xt=E-(E-M)*jt,zt=z-(z-ut)*jt,G=H-(H-At)*jt,it=ct-(ct-Ct)*jt}let ft;J<A?ft=0:J>k?ft=1:ft=(A-J)/(A-k),vt=S-(S-M)*ft,Ht=N-(N-ut)*ft,Ot=F-(F-At)*ft,B=I-(I-Ct)*ft;const wt=Math.round(Math.min(xt,vt)),Mt=Math.round(Math.max(xt,vt));let qt=y*J+wt*4;for(let jt=wt;jt<=Mt;jt++)ft=(xt-jt)/(xt-vt),ft<0?ft=0:ft>1&&(ft=1),p[qt++]=zt-(zt-Ht)*ft|0,p[qt++]=G-(G-Ot)*ft|0,p[qt++]=it-(it-B)*ft|0,p[qt++]=255}}function ET(r,t,e){const i=t.coords,a=t.colors;let l,c;switch(t.type){case im.LATTICE:const u=t.verticesPerRow,d=Math.floor(i.length/u)-1,f=u-1;for(l=0;l<d;l++){let p=l*u;for(let y=0;y<f;y++,p++)Lp(r,e,i[p],i[p+1],i[p+u],a[p],a[p+1],a[p+u]),Lp(r,e,i[p+u+1],i[p+1],i[p+u],a[p+u+1],a[p+1],a[p+u])}break;case im.TRIANGLES:for(l=0,c=i.length;l<c;l+=3)Lp(r,e,i[l],i[l+1],i[l+2],a[l],a[l+1],a[l+2]);break;default:throw new Error("illegal figure")}}class _T extends Km{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),x=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),S=f/y,A=p/x,E={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/S,scaleY:1/A},T=y+4,M=x+4,k=i.getCanvas("mesh",T,M),N=k.context,F=N.createImageData(y,x);if(e){const z=F.data;for(let H=0,ct=z.length;H<ct;H+=4)z[H]=e[0],z[H+1]=e[1],z[H+2]=e[2],z[H+3]=255}for(const z of this._figures)ET(F,z,E);return N.putImageData(F,2,2),{canvas:k.canvas,offsetX:u-2*S,offsetY:d-2*A,scaleX:S,scaleY:A}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,a){hm(t,this._bbox);const l=new Float32Array(2);if(a===Kn.SHADING)Ut.singularValueDecompose2dScale(tn(t),l);else if(this.matrix){Ut.singularValueDecompose2dScale(this.matrix,l);const[u,d]=l;Ut.singularValueDecompose2dScale(e.baseTransform,l),l[0]*=u,l[1]*=d}else Ut.singularValueDecompose2dScale(e.baseTransform,l);const c=this._createMeshCanvas(l,a===Kn.SHADING?null:this._background,e.cachedCanvases);return a!==Kn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class CT extends Km{getPattern(){return"hotpink"}}function TT(r){switch(r[0]){case"RadialAxial":return new AT(r);case"Mesh":return new _T(r);case"Dummy":return new CT}throw new Error(`Unknown IR type: ${r[0]}`)}const pv={COLORED:1,UNCOLORED:2};class Vm{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=a}createPatternCanvas(t,e){const{bbox:i,operatorList:a,paintType:l,tilingType:c,color:u,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),dd("TilingType: "+c);const y=i[0],x=i[1],S=i[2],A=i[3],E=S-y,T=A-x,M=new Float32Array(2);Ut.singularValueDecompose2dScale(this.matrix,M);const[k,N]=M;Ut.singularValueDecompose2dScale(this.baseTransform,M);const F=k*M[0],I=N*M[1];let z=E,H=T,ct=!1,ut=!1;const At=Math.ceil(f*F),Ct=Math.ceil(p*I),Rt=Math.ceil(E*F),Vt=Math.ceil(T*I);At>=Rt?z=f:ct=!0,Ct>=Vt?H=p:ut=!0;const xt=this.getSizeAndScale(z,this.ctx.canvas.width,F),zt=this.getSizeAndScale(H,this.ctx.canvas.height,I),G=t.cachedCanvases.getCanvas("pattern",xt.size,zt.size),it=G.context,vt=d.createCanvasGraphics(it,e);if(vt.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(vt,l,u),it.translate(-xt.scale*y,-zt.scale*x),vt.transform(0,xt.scale,0,0,zt.scale,0,0),it.save(),vt.dependencyTracker?.save(),this.clipBbox(vt,y,x,S,A),vt.baseTransform=tn(vt.ctx),vt.executeOperatorList(a),vt.endDrawing(),vt.dependencyTracker?.restore(),it.restore(),ct||ut){const Ht=G.canvas;ct&&(z=f),ut&&(H=p);const Ot=this.getSizeAndScale(z,this.ctx.canvas.width,F),B=this.getSizeAndScale(H,this.ctx.canvas.height,I),J=Ot.size,ft=B.size,wt=t.cachedCanvases.getCanvas("pattern-workaround",J,ft),Mt=wt.context,qt=ct?Math.floor(E/f):0,jt=ut?Math.floor(T/p):0;for(let he=0;he<=qt;he++)for(let re=0;re<=jt;re++)Mt.drawImage(Ht,J*he,ft*re,J,ft,0,0,J,ft);return{canvas:wt.canvas,scaleX:Ot.scale,scaleY:B.scale,offsetX:y,offsetY:x}}return{canvas:G.canvas,scaleX:xt.scale,scaleY:zt.scale,offsetX:y,offsetY:x}}getSizeAndScale(t,e,i){const a=Math.max(Vm.MAX_PATTERN_SIZE,e);let l=Math.ceil(t*i);return l>=a?l=a:i=l/t,{scale:i,size:l}}clipBbox(t,e,i,a,l){const c=a-e,u=l-i;t.ctx.rect(e,i,c,u),Ut.axialAlignedBoundingBox([e,i,a,l],tn(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const a=t.ctx,l=t.current;switch(e){case pv.COLORED:const{fillStyle:c,strokeStyle:u}=this.ctx;a.fillStyle=l.fillColor=c,a.strokeStyle=l.strokeColor=u;break;case pv.UNCOLORED:a.fillStyle=a.strokeStyle=i,l.fillColor=l.strokeColor=i;break;default:throw new IC(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,a,l){let c=i;a!==Kn.SHADING&&(c=Ut.transform(c,e.baseTransform),this.matrix&&(c=Ut.transform(c,this.matrix)));const u=this.createPatternCanvas(e,l);let d=new DOMMatrix(c);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(d),f}}function RT({src:r,srcPos:t=0,dest:e,width:i,height:a,nonBlackColor:l=4294967295,inverseDecode:c=!1}){const u=_n.isLittleEndian?4278190080:255,[d,f]=c?[l,u]:[u,l],p=i>>3,y=i&7,x=r.length;e=new Uint32Array(e.buffer);let S=0;for(let A=0;A<a;A++){for(const T=t+p;t<T;t++){const M=t<x?r[t]:255;e[S++]=M&128?f:d,e[S++]=M&64?f:d,e[S++]=M&32?f:d,e[S++]=M&16?f:d,e[S++]=M&8?f:d,e[S++]=M&4?f:d,e[S++]=M&2?f:d,e[S++]=M&1?f:d}if(y===0)continue;const E=t<x?r[t++]:255;for(let T=0;T<y;T++)e[S++]=E&1<<7-T?f:d}return{srcPos:t,destPos:S}}const mv=16,gv=100,MT=15,yv=10,pi=16,Pp=new DOMMatrix,Mi=new Float32Array(2),ol=new Float32Array([1/0,1/0,-1/0,-1/0]);function DT(r,t){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){t.save(),this.__originalSave()},r.restore=function(){t.restore(),this.__originalRestore()},r.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},r.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},r.transform=function(e,i,a,l,c,u){t.transform(e,i,a,l,c,u),this.__originalTransform(e,i,a,l,c,u)},r.setTransform=function(e,i,a,l,c,u){t.setTransform(e,i,a,l,c,u),this.__originalSetTransform(e,i,a,l,c,u)},r.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},r.rotate=function(e){t.rotate(e),this.__originalRotate(e)},r.clip=function(e){t.clip(e),this.__originalClip(e)},r.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},r.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},r.bezierCurveTo=function(e,i,a,l,c,u){t.bezierCurveTo(e,i,a,l,c,u),this.__originalBezierCurveTo(e,i,a,l,c,u)},r.rect=function(e,i,a,l){t.rect(e,i,a,l),this.__originalRect(e,i,a,l)},r.closePath=function(){t.closePath(),this.__originalClosePath()},r.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class NT{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,i)):(a=this.canvasFactory.create(e,i),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Ch(r,t,e,i,a,l,c,u,d,f){const[p,y,x,S,A,E]=tn(r);if(y===0&&x===0){const k=c*p+A,N=Math.round(k),F=u*S+E,I=Math.round(F),z=(c+d)*p+A,H=Math.abs(Math.round(z)-N)||1,ct=(u+f)*S+E,ut=Math.abs(Math.round(ct)-I)||1;return r.setTransform(Math.sign(p),0,0,Math.sign(S),N,I),r.drawImage(t,e,i,a,l,0,0,H,ut),r.setTransform(p,y,x,S,A,E),[H,ut]}if(p===0&&S===0){const k=u*x+A,N=Math.round(k),F=c*y+E,I=Math.round(F),z=(u+f)*x+A,H=Math.abs(Math.round(z)-N)||1,ct=(c+d)*y+E,ut=Math.abs(Math.round(ct)-I)||1;return r.setTransform(0,Math.sign(y),Math.sign(x),0,N,I),r.drawImage(t,e,i,a,l,0,0,ut,H),r.setTransform(p,y,x,S,A,E),[ut,H]}r.drawImage(t,e,i,a,l,c,u,d,f);const T=Math.hypot(p,y),M=Math.hypot(x,S);return[T*d,M*f]}class bv{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=nm;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=An.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,i){i?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=ol.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Kn.FILL,e=null){const i=this.minMax.slice();if(t===Kn.STROKE){e||Oe("Stroke bounding box must include transform."),Ut.singularValueDecompose2dScale(e,Mi);const a=Mi[0]*this.lineWidth/2,l=Mi[1]*this.lineWidth/2;i[0]-=a,i[1]-=l,i[2]+=a,i[3]+=l}return i}updateClipFromPath(){const t=Ut.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ol,0)}getClippedPathBoundingBox(t=Kn.FILL,e=null){return Ut.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function vv(r,t){if(t instanceof ImageData){r.putImageData(t,0,0);return}const e=t.height,i=t.width,a=e%pi,l=(e-a)/pi,c=a===0?l:l+1,u=r.createImageData(i,pi);let d=0,f;const p=t.data,y=u.data;let x,S,A,E;if(t.kind===Uh.GRAYSCALE_1BPP){const T=p.byteLength,M=new Uint32Array(y.buffer,0,y.byteLength>>2),k=M.length,N=i+7>>3,F=4294967295,I=_n.isLittleEndian?4278190080:255;for(x=0;x<c;x++){for(A=x<l?pi:a,f=0,S=0;S<A;S++){const z=T-d;let H=0;const ct=z>N?i:z*8-7,ut=ct&-8;let At=0,Ct=0;for(;H<ut;H+=8)Ct=p[d++],M[f++]=Ct&128?F:I,M[f++]=Ct&64?F:I,M[f++]=Ct&32?F:I,M[f++]=Ct&16?F:I,M[f++]=Ct&8?F:I,M[f++]=Ct&4?F:I,M[f++]=Ct&2?F:I,M[f++]=Ct&1?F:I;for(;H<ct;H++)At===0&&(Ct=p[d++],At=128),M[f++]=Ct&At?F:I,At>>=1}for(;f<k;)M[f++]=0;r.putImageData(u,0,x*pi)}}else if(t.kind===Uh.RGBA_32BPP){for(S=0,E=i*pi*4,x=0;x<l;x++)y.set(p.subarray(d,d+E)),d+=E,r.putImageData(u,0,S),S+=pi;x<c&&(E=i*a*4,y.set(p.subarray(d,d+E)),r.putImageData(u,0,S))}else if(t.kind===Uh.RGB_24BPP)for(A=pi,E=i*A,x=0;x<c;x++){for(x>=l&&(A=a,E=i*A),f=0,S=E;S--;)y[f++]=p[d++],y[f++]=p[d++],y[f++]=p[d++],y[f++]=255;r.putImageData(u,0,x*pi)}else throw new Error(`bad image kind: ${t.kind}`)}function xv(r,t){if(t.bitmap){r.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,a=e%pi,l=(e-a)/pi,c=a===0?l:l+1,u=r.createImageData(i,pi);let d=0;const f=t.data,p=u.data;for(let y=0;y<c;y++){const x=y<l?pi:a;({srcPos:d}=RT({src:f,srcPos:d,dest:p,width:i,height:x,nonBlackColor:0})),r.putImageData(u,0,y*pi)}}function Rc(r,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)r[i]!==void 0&&(t[i]=r[i]);r.setLineDash!==void 0&&(t.setLineDash(r.getLineDash()),t.lineDashOffset=r.lineDashOffset)}function Th(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:t}=r;t!=="none"&&t!==""&&(r.filter="none")}function wv(r,t){if(t)return!0;Ut.singularValueDecompose2dScale(r,Mi);const e=Math.fround(Ls.pixelRatio*yl.PDF_TO_CSS_UNITS);return Mi[0]<=e&&Mi[1]<=e}const OT=["butt","round","square"],kT=["miter","round","bevel"],LT={},Sv={};class dl{constructor(t,e,i,a,l,{optionalContentConfig:c,markedContentStack:u=null},d,f,p){this.ctx=t,this.current=new bv(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=a,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new NT(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(t,e,i=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):i}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:a=null}){const l=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,l,c),this.ctx.fillStyle=u,i){const d=this.cachedCanvases.getCanvas("transparent",l,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...tn(this.compositeCtx))}this.ctx.save(),Th(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=tn(this.ctx)}executeOperatorList(t,e,i,a,l){const c=t.argsArray,u=t.fnArray;let d=e||0;const f=c.length;if(f===d)return d;const p=f-d>yv&&typeof i=="function",y=p?Date.now()+MT:0;let x=0;const S=this.commonObjs,A=this.objs;let E,T;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,i),d;if(!l||l(d))if(E=u[d],T=c[d]??null,E!==zc.dependency)T===null?this[E](d):this[E](d,...T);else for(const M of T){this.dependencyTracker?.recordNamedData(M,d);const k=M.startsWith("g_")?S:A;if(!k.has(M))return k.get(M,i),d}if(d++,d===f)return d;if(p&&++x>yv){if(Date.now()>y)return i(),d;x=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width??t.displayWidth,a=t.height??t.displayHeight;let l=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),u=i,d=a,f="prescale1",p,y;for(;l>2&&u>1||c>2&&d>1;){let x=u,S=d;l>2&&u>1&&(x=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),l/=u/x),c>2&&d>1&&(S=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/S),p=this.cachedCanvases.getCanvas(f,x,S),y=p.context,y.clearRect(0,0,x,S),y.drawImage(t,0,0,u,d,0,0,x,S),t=p.canvas,u=x,d=S,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t,e){const i=this.ctx,{width:a,height:l}=e,c=this.current.fillColor,u=this.current.patternFill,d=tn(i);let f,p,y,x;if((e.bitmap||e.data)&&e.count>1){const At=e.bitmap||e.data.buffer;p=JSON.stringify(u?d:[d.slice(0,4),c]),f=this._cachedBitmapsMap.get(At),f||(f=new Map,this._cachedBitmapsMap.set(At,f));const Ct=f.get(p);if(Ct&&!u){const Rt=Math.round(Math.min(d[0],d[2])+d[4]),Vt=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,Ki.transformAndFill),{canvas:Ct,offsetX:Rt,offsetY:Vt}}y=Ct}y||(x=this.cachedCanvases.getCanvas("maskCanvas",a,l),xv(x.context,e));let S=Ut.transform(d,[1/a,0,0,-1/l,0,0]);S=Ut.transform(S,[1,0,0,1,0,-l]);const A=ol.slice();Ut.axialAlignedBoundingBox([0,0,a,l],S,A);const[E,T,M,k]=A,N=Math.round(M-E)||1,F=Math.round(k-T)||1,I=this.cachedCanvases.getCanvas("fillCanvas",N,F),z=I.context,H=E,ct=T;z.translate(-H,-ct),z.transform(...S),y||(y=this._scaleImage(x.canvas,Es(z)),y=y.img,f&&u&&f.set(p,y)),z.imageSmoothingEnabled=wv(tn(z),e.interpolate),Ch(z,y,0,0,y.width,y.height,0,0,a,l),z.globalCompositeOperation="source-in";const ut=Ut.transform(Es(z),[1,0,0,1,-H,-ct]);return z.fillStyle=u?c.getPattern(i,this,ut,Kn.FILL,t):c,z.fillRect(0,0,a,l),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,I.canvas)),this.dependencyTracker?.recordDependencies(t,Ki.transformAndFill),{canvas:I.canvas,offsetX:Math.round(H),offsetY:Math.round(ct)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=OT[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=kT[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,i){this.dependencyTracker?.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(e),a.lineDashOffset=i)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[i,a]of e)switch(i){case"LW":this.setLineWidth(t,a);break;case"LC":this.setLineCap(t,a);break;case"LJ":this.setLineJoin(t,a);break;case"ML":this.setMiterLimit(t,a);break;case"D":this.setDash(t,a[0],a[1]);break;case"RI":this.setRenderingIntent(t,a);break;case"FL":this.setFlatness(t,a);break;case"Font":this.setFont(t,a[0],a[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=a;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=a;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,i=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,l=this.cachedCanvases.getCanvas(a,e,i);this.suspendedCtx=this.ctx;const c=this.ctx=l.context;c.setTransform(this.suspendedCtx.getTransform()),Rc(this.suspendedCtx,c),DT(c,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Rc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,a){const l=a[0],c=a[1],u=a[2]-l,d=a[3]-c;u===0||d===0||(this.genericComposeSMask(e.context,i,u,d,e.subtype,e.backdrop,e.transferMap,l,c,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,a,l,c,u,d,f,p,y){let x=t.canvas,S=d-p,A=f-y;if(c)if(S<0||A<0||S+i>x.width||A+a>x.height){const T=this.cachedCanvases.getCanvas("maskExtension",i,a),M=T.context;M.drawImage(x,-S,-A),M.globalCompositeOperation="destination-atop",M.fillStyle=c,M.fillRect(0,0,i,a),M.globalCompositeOperation="source-over",x=T.canvas,S=A=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(S,A,i,a),t.clip(T),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(S,A,i,a),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),l==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):l==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const E=new Path2D;E.rect(d,f,i,a),e.clip(E),e.globalCompositeOperation="destination-in",e.drawImage(x,S,A,i,a,d,f,i,a),e.restore()}save(t){this.inSMaskMode&&Rc(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Rc(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,a,l,c,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,i,a,l,c,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i,a){let[l]=i;if(!a){l||=i[0]=new Path2D,this[e](t,l);return}if(this.dependencyTracker!==null){const c=e===zc.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-c,a[2]+c,a[1]-c,a[3]+c).recordDependencies(t,["transform"])}l instanceof Path2D||(l=i[0]=jx(l)),Ut.axialAlignedBoundingBox(a,tn(this.ctx),this.current.minMax),this[e](t,l),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,i=!0){const a=this.ctx,l=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof l=="object"&&l?.getPattern){const c=l.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=l.getPattern(a,this,Es(a),Kn.STROKE,t),c){const u=new Path2D;u.addPath(e,a.getTransform().invertSelf().multiplySelf(c)),e=u}this.rescaleAndStroke(e,!1),a.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,Ki.stroke),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Kn.STROKE,tn(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,i=!0){const a=this.ctx,l=this.current.fillColor,c=this.current.patternFill;let u=!1;if(c){const f=l.isModifyingCurrentTransform()?a.getTransform():null;if(this.dependencyTracker?.save(t),a.save(),a.fillStyle=l.getPattern(a,this,Es(a),Kn.FILL,t),f){const p=new Path2D;p.addPath(e,a.getTransform().invertSelf().multiplySelf(f)),e=p}u=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(a.fill(e,"evenodd"),this.pendingEOFill=!1):a.fill(e)),this.dependencyTracker?.recordDependencies(t,Ki.fill),u&&(a.restore(),this.dependencyTracker?.restore(t)),i&&this.consumePath(t,e,d)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,Ki.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=LT}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Sv}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;e!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(e!==void 0){const a=new Path2D,l=i.getTransform().invertSelf();for(const{transform:c,x:u,y:d,fontSize:f,path:p}of e)p&&a.addPath(p,new DOMMatrix(c).preMultiplySelf(l).translate(u,d).scale(f,-f));i.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,i){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const a=this.commonObjs.get(e),l=this.current;if(!a)throw new Error(`Can't find font for ${e}`);if(l.fontMatrix=a.fontMatrix||nm,(l.fontMatrix[0]===0||l.fontMatrix[3]===0)&&ne("Invalid font matrix for font "+e),i<0?(i=-i,l.fontDirection=-1):l.fontDirection=1,this.current.font=a,this.current.fontSize=i,a.isType3Font)return;const c=a.loadedName||"sans-serif",u=a.systemFontInfo?.css||`"${c}", ${a.fallbackName}`;let d="normal";a.black?d="900":a.bold&&(d="bold");const f=a.italic?"italic":"normal";let p=i;i<mv?p=mv:i>gv&&(p=gv),this.current.fontSizeScale=i/p,this.ctx.font=`${f} ${d} ${p}px ${u}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,e,i){this.setLeading(t,-i),this.moveText(t,e,i)}setTextMatrix(t,e){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#i(t,e,i){const a=new Path2D;return a.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),a}paintChar(t,e,i,a,l,c){const u=this.ctx,d=this.current,f=d.font,p=d.textRenderingMode,y=d.fontSize/d.fontSizeScale,x=p&An.FILL_STROKE_MASK,S=!!(p&An.ADD_TO_PATH_FLAG),A=d.patternFill&&!f.missingFile,E=d.patternStroke&&!f.missingFile;let T;if((f.disableFontFace||S||A||E)&&!f.missingFile&&(T=f.getPathGenerator(this.commonObjs,e)),T&&(f.disableFontFace||A||E)){u.save(),u.translate(i,a),u.scale(y,-y),this.dependencyTracker?.recordCharacterBBox(t,u,f);let M;if(x===An.FILL||x===An.FILL_STROKE)if(l){M=u.getTransform(),u.setTransform(...l);const k=this.#i(T,M,l);u.fill(k)}else u.fill(T);if(x===An.STROKE||x===An.FILL_STROKE)if(c){M||=u.getTransform(),u.setTransform(...c);const{a:k,b:N,c:F,d:I}=M,z=Ut.inverseTransform(c),H=Ut.transform([k,N,F,I,0,0],z);Ut.singularValueDecompose2dScale(H,Mi),u.lineWidth*=Math.max(Mi[0],Mi[1])/y,u.stroke(this.#i(T,M,c))}else u.lineWidth/=y,u.stroke(T);u.restore()}else(x===An.FILL||x===An.FILL_STROKE)&&(u.fillText(e,i,a),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,i,a,()=>u.measureText(e))),(x===An.STROKE||x===An.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,y,i,a,()=>u.measureText(e)).recordDependencies(t,Ki.stroke),u.strokeText(e,i,a));S&&((this.pendingTextPaths||=[]).push({transform:tn(u),x:i,y:a,fontSize:y,path:T}),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,i,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){i=!0;break}return ie(this,"isFontSubpixelAAEnabled",i)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Ki.showText).resetBBox(t),this.current.textRenderingMode&An.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,a=i.font;if(a.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const l=i.fontSize;if(l===0){this.dependencyTracker?.recordOperation(t);return}const c=this.ctx,u=i.fontSizeScale,d=i.charSpacing,f=i.wordSpacing,p=i.fontDirection,y=i.textHScale*p,x=e.length,S=a.vertical,A=S?1:-1,E=a.defaultVMetrics,T=l*i.fontMatrix[0],M=i.textRenderingMode===An.FILL&&!a.disableFontFace&&!i.patternFill;c.save(),i.textMatrix&&c.transform(...i.textMatrix),c.translate(i.x,i.y+i.textRise),p>0?c.scale(y,-1):c.scale(y,1);let k,N;const F=i.textRenderingMode&An.FILL_STROKE_MASK,I=F===An.FILL||F===An.FILL_STROKE,z=F===An.STROKE||F===An.FILL_STROKE;if(I&&i.patternFill){c.save();const Ct=i.fillColor.getPattern(c,this,Es(c),Kn.FILL,t);k=tn(c),c.restore(),c.fillStyle=Ct}if(z&&i.patternStroke){c.save();const Ct=i.strokeColor.getPattern(c,this,Es(c),Kn.STROKE,t);N=tn(c),c.restore(),c.strokeStyle=Ct}let H=i.lineWidth;const ct=i.textMatrixScale;if(ct===0||H===0?z&&(H=this.getSinglePixelWidth()):H/=ct,u!==1&&(c.scale(u,u),H/=u),c.lineWidth=H,a.isInvalidPDFjsFont){const Ct=[];let Rt=0;for(const xt of e)Ct.push(xt.unicode),Rt+=xt.width;const Vt=Ct.join("");if(c.fillText(Vt,0,0),this.dependencyTracker!==null){const xt=c.measureText(Vt);this.dependencyTracker.recordBBox(t,this.ctx,-xt.actualBoundingBoxLeft,xt.actualBoundingBoxRight,-xt.actualBoundingBoxAscent,xt.actualBoundingBoxDescent).recordShowTextOperation(t)}i.x+=Rt*T*y,c.restore(),this.compose();return}let ut=0,At;for(At=0;At<x;++At){const Ct=e[At];if(typeof Ct=="number"){ut+=A*Ct*l/1e3;continue}let Rt=!1;const Vt=(Ct.isSpace?f:0)+d,xt=Ct.fontChar,zt=Ct.accent;let G,it,vt=Ct.width;if(S){const B=Ct.vmetric||E,J=-(Ct.vmetric?B[1]:vt*.5)*T,ft=B[2]*T;vt=B?-B[0]:vt,G=J/u,it=(ut+ft)/u}else G=ut/u,it=0;let Ht;if(a.remeasure&&vt>0){Ht=c.measureText(xt);const B=Ht.width*1e3/l*u;if(vt<B&&this.isFontSubpixelAAEnabled){const J=vt/B;Rt=!0,c.save(),c.scale(J,1),G/=J}else vt!==B&&(G+=(vt-B)/2e3*l/u)}if(this.contentVisible&&(Ct.isInFont||a.missingFile)){if(M&&!zt)c.fillText(xt,G,it),this.dependencyTracker?.recordCharacterBBox(t,c,Ht?{bbox:null}:a,l/u,G,it,()=>Ht??c.measureText(xt));else if(this.paintChar(t,xt,G,it,k,N),zt){const B=G+l*zt.offset.x/u,J=it-l*zt.offset.y/u;this.paintChar(t,zt.fontChar,B,J,k,N)}}const Ot=S?vt*T-Vt*p:vt*T+Vt*p;ut+=Ot,Rt&&c.restore()}S?i.y-=ut:i.x+=ut*y,c.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const i=this.ctx,a=this.current,l=a.font,c=a.fontSize,u=a.fontDirection,d=l.vertical?1:-1,f=a.charSpacing,p=a.wordSpacing,y=a.textHScale*u,x=a.fontMatrix||nm,S=e.length,A=a.textRenderingMode===An.INVISIBLE;let E,T,M,k;if(A||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),a.textMatrix&&i.transform(...a.textMatrix),i.translate(a.x,a.y+a.textRise),i.scale(y,u);const N=this.dependencyTracker;for(this.dependencyTracker=N?new Wh(N,t):null,E=0;E<S;++E){if(T=e[E],typeof T=="number"){k=d*T*c/1e3,this.ctx.translate(k,0),a.x+=k*y;continue}const F=(T.isSpace?p:0)+f,I=l.charProcOperatorList[T.operatorListId];I?this.contentVisible&&(this.save(),i.scale(c,c),i.transform(...x),this.executeOperatorList(I),this.restore()):ne(`Type3 character "${T.operatorListId}" is not available.`);const z=[T.width,0];Ut.applyTransform(z,x),M=z[0]*c+F,i.translate(M,0),a.x+=M*y}i.restore(),N&&(this.dependencyTracker=N)}setCharWidth(t,e,i){}setCharWidthAndBounds(t,e,i,a,l,c,u){const d=new Path2D;d.rect(a,l,c-a,u-l),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,a,c,l,u).recordClipBox(t,this.ctx,a,c,l,u),this.endPath(t)}getColorN_Pattern(t,e){let i;if(e[0]==="TilingPattern"){const a=this.baseTransform||tn(this.ctx),l={createCanvasGraphics:(c,u)=>new dl(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Wh(this.dependencyTracker,u,!0):null)};i=new Vm(e,this.ctx,l,a)}else i=this._getPattern(t,e[1],e[2]);return i}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,i=null){let a;return this.cachedPatterns.has(e)?a=this.cachedPatterns.get(e):(a=TT(this.getObject(t,e)),this.cachedPatterns.set(e,a)),i&&(a.matrix=i),a}shadingFill(t,e){if(!this.contentVisible)return;const i=this.ctx;this.save(t);const a=this._getPattern(t,e);i.fillStyle=a.getPattern(i,this,Es(i),Kn.SHADING,t);const l=Es(i);if(l){const{width:c,height:u}=i.canvas,d=ol.slice();Ut.axialAlignedBoundingBox([0,0,c,u],l,d);const[f,p,y,x]=d;this.ctx.fillRect(f,p,y-f,x-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Ki.transform).recordDependencies(t,Ki.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Oe("Should not call beginInlineImage")}beginImageData(){Oe("Should not call beginImageData")}paintFormXObjectBegin(t,e,i){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=tn(this.ctx),i)){Ut.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[a,l,c,u]=i,d=new Path2D;d.rect(a,l,c-a,u-l),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,a,c,l,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||dd("TODO: Support non-isolated groups."),e.knockout&&ne("Knockout groups not supported.");const a=tn(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let l=ol.slice();Ut.axialAlignedBoundingBox(e.bbox,tn(i),l);const c=[0,0,i.canvas.width,i.canvas.height];l=Ut.intersect(l,c)||[0,0,0,0];const u=Math.floor(l[0]),d=Math.floor(l[1]),f=Math.max(Math.ceil(l[2])-u,1),p=Math.max(Math.ceil(l[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,p]);let y="groupAt"+this.groupLevel;e.smask&&(y+="_smask_"+this.smaskCounter++%2);const x=this.cachedCanvases.getCanvas(y,f,p),S=x.context;S.translate(-u,-d),S.transform(...a);let A=new Path2D;const[E,T,M,k]=e.bbox;if(A.rect(E,T,M-E,k-T),e.matrix){const N=new Path2D;N.addPath(A,new DOMMatrix(e.matrix)),A=N}S.clip(A),e.smask&&this.smaskStack.push({canvas:x.canvas,context:S,offsetX:u,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(u,d),i.save()),Rc(i,S),this.ctx=S,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const l=tn(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...l);const c=ol.slice();Ut.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],l,c),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(t,e,i,a,l,c){if(this.#t(),Th(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const u=i[2]-i[0],d=i[3]-i[1];if(c&&this.annotationCanvasMap){a=a.slice(),a[4]-=i[0],a[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=u,i[3]=d,Ut.singularValueDecompose2dScale(tn(this.ctx),Mi);const{viewportScale:f}=this,p=Math.ceil(u*this.outputScaleX*f),y=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,y);const{canvas:x,context:S}=this.annotationCanvas;this.annotationCanvasMap.set(e,x),this.annotationCanvas.savedCtx=this.ctx,this.ctx=S,this.ctx.save(),this.ctx.setTransform(Mi[0],0,0,-Mi[1],0,d*Mi[1]),Th(this.ctx)}else{Th(this.ctx),this.endPath(t);const f=new Path2D;f.rect(i[0],i[1],u,d),this.ctx.clip(f)}}this.current=new bv(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...l)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const i=e.count;e=this.getObject(t,e.data,e),e.count=i;const a=this.ctx,l=this._createMaskCanvas(t,e),c=l.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(c,l.offsetX,l.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,l.offsetX,l.offsetX+c.width,l.offsetY,l.offsetY+c.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i,a=0,l=0,c,u){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const d=this.ctx;d.save();const f=tn(d);d.transform(i,a,l,c,0,0);const p=this._createMaskCanvas(t,e);d.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let y=0,x=u.length;y<x;y+=2){const S=Ut.transform(f,[i,a,l,c,u[y],u[y+1]]);d.drawImage(p.canvas,S[4],S[5]),this.dependencyTracker?.recordBBox(t,this.ctx,S[4],S[4]+p.canvas.width,S[5],S[5]+p.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx,a=this.current.fillColor,l=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,Ki.transformAndFill);for(const c of e){const{data:u,width:d,height:f,transform:p}=c,y=this.cachedCanvases.getCanvas("maskCanvas",d,f),x=y.context;x.save();const S=this.getObject(t,u,c);xv(x,S),x.globalCompositeOperation="source-in",x.fillStyle=l?a.getPattern(x,this,Es(i),Kn.FILL,t):a,x.fillRect(0,0,d,f),x.restore(),i.save(),i.transform(...p),i.scale(1,-1),Ch(i,y.canvas,0,0,d,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,d,0,f),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const i=this.getObject(t,e);if(!i){ne("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,i)}paintImageXObjectRepeat(t,e,i,a,l){if(!this.contentVisible)return;const c=this.getObject(t,e);if(!c){ne("Dependent image isn't ready yet");return}const u=c.width,d=c.height,f=[];for(let p=0,y=l.length;p<y;p+=2)f.push({transform:[i,0,0,a,l[p],l[p+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(t,c,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:a}=t,l=this.cachedCanvases.getCanvas("inlineImage",i,a),c=l.context;return c.filter=this.current.transferMaps,c.drawImage(e,0,0),c.filter="none",l.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const i=e.width,a=e.height,l=this.ctx;this.save(t);const{filter:c}=l;c!=="none"&&c!==""&&(l.filter="none"),l.scale(1/i,-1/a);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const p=this.cachedCanvases.getCanvas("inlineImage",i,a).context;vv(p,e),u=this.applyTransferMapsToCanvas(p)}const d=this._scaleImage(u,Es(l));l.imageSmoothingEnabled=wv(tn(l),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,l,0,i,-a,0).recordDependencies(t,Ki.imageXObject).recordOperation(t),Ch(l,d.img,0,0,d.paintWidth,d.paintHeight,0,-a,i,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,i){if(!this.contentVisible)return;const a=this.ctx;let l;if(e.bitmap)l=e.bitmap;else{const c=e.width,u=e.height,f=this.cachedCanvases.getCanvas("inlineImage",c,u).context;vv(f,e),l=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const c of i)a.save(),a.transform(...c.transform),a.scale(1,-1),Ch(a,l,c.x,c.y,c.w,c.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,a,0,1,-1,0),a.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Ki.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,i){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,i){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,i){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const l=this.ctx;this.pendingClip?(a||(this.pendingClip===Sv?l.clip(e,"evenodd"):l.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=tn(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:a,d:l}=this.ctx.getTransform();let c,u;if(i===0&&a===0){const d=Math.abs(e),f=Math.abs(l);if(d===f)if(t===0)c=u=1/d;else{const p=d*t;c=u=p<1?1/p:1}else if(t===0)c=1/d,u=1/f;else{const p=d*t,y=f*t;c=p<1?1/p:1,u=y<1?1/y:1}}else{const d=Math.abs(e*l-i*a),f=Math.hypot(e,i),p=Math.hypot(a,l);if(t===0)c=p/d,u=f/d;else{const y=t*d;c=p>y?p/y:1,u=f>y?f/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:a}}=this,[l,c]=this.getScaleForStroking();if(l===c){i.lineWidth=(a||1)*l,i.stroke(t);return}const u=i.getLineDash();e&&i.save(),i.scale(l,c),Pp.a=1/l,Pp.d=1/c;const d=new Path2D;if(d.addPath(t,Pp),u.length>0){const f=Math.max(l,c);i.setLineDash(u.map(p=>p/f)),i.lineDashOffset/=f}i.lineWidth=a||1,i.stroke(d),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const r in zc)dl.prototype[r]!==void 0&&(dl.prototype[zc[r]]=dl.prototype[r]);class fl{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class PT{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const sl=Symbol("INTERNAL");class jT{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:e,intent:i,usage:a,rbGroups:l}){this.#t=!!(t&Ti.DISPLAY),this.#e=!!(t&Ti.PRINT),this.name=e,this.intent=i,this.usage=a,this.rbGroups=l}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==sl&&Oe("Internal method `_setVisible` called."),this.#i=i,this.#n=e}}class BT{#t=null;#e=new Map;#i=null;#n=null;constructor(t,e=Ti.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const i of t.groups)this.#e.set(i.id,new jT(e,i));if(t.baseState==="OFF")for(const i of this.#e.values())i._setVisible(sl,!1);for(const i of t.on)this.#e.get(i)._setVisible(sl,!0);for(const i of t.off)this.#e.get(i)._setVisible(sl,!1);this.#i=this.getHash()}}#s(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let a=1;a<e;a++){const l=t[a];let c;if(Array.isArray(l))c=this.#s(l);else if(this.#e.has(l))c=this.#e.get(l).visible;else return ne(`Optional content group not found: ${l}`),!0;switch(i){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return dd("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(ne(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#s(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return ne(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return ne(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return ne(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return ne(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return ne(`Unknown optional content policy ${t.policy}.`),!0}return ne(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){const a=this.#e.get(t);if(!a){ne(`Optional content group not found: ${t}`);return}if(i&&e&&a.rbGroups.length)for(const l of a.rbGroups)for(const c of l)c!==t&&this.#e.get(c)?._setVisible(sl,!1,!0);a._setVisible(sl,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":i=a;continue}const l=this.#e.get(a);if(l)switch(i){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!l.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new Fx;for(const[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class gd{#t=null;#e=null;_fullReader=null;_rangeReaders=new Set;_source=null;constructor(t,e,i){this._source=t,this.#t=e,this.#e=i}get _progressiveDataLength(){return this._fullReader?._loaded??0}getFullReader(){return Ne(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new this.#t(this)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new this.#e(this,t,e);return this._rangeReaders.add(i),i}cancelAllRequests(t){this._fullReader?.cancel(t);for(const e of new Set(this._rangeReaders))e.cancel(t)}}class yd{onProgress=null;_contentLength=0;_filename=null;_headersCapability=Promise.withResolvers();_isRangeSupported=!1;_isStreamingSupported=!1;_loaded=0;_stream=null;constructor(t){this._stream=t}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){Oe("Abstract method `read` called")}cancel(t){Oe("Abstract method `cancel` called")}}class bd{_stream=null;constructor(t,e,i){this._stream=t}async read(){Oe("Abstract method `read` called")}cancel(t){Oe("Abstract method `cancel` called")}}function Av(r){return r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer}class FT extends gd{_progressiveDone=!1;_queuedChunks=[];constructor(t){super(t,IT,UT);const{pdfDataRangeTransport:e}=t,{initialData:i,progressiveDone:a}=e;if(i?.length>0){const l=Av(i);this._queuedChunks.push(l)}this._progressiveDone=a,e.addRangeListener((l,c)=>{this.#t(l,c)}),e.addProgressListener((l,c)=>{c!==void 0&&this._fullReader?.onProgress?.({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this.#t(void 0,l)}),e.addProgressiveDoneListener(()=>{this._fullReader?.progressiveDone(),this._progressiveDone=!0}),e.transportReady()}#t(t,e){const i=Av(e);if(t===void 0)this._fullReader?this._fullReader._enqueue(i):this._queuedChunks.push(i);else{const a=this._rangeReaders.keys().find(l=>l._begin===t);Ne(a,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),a._enqueue(i)}}getFullReader(){const t=super.getFullReader();return this._queuedChunks=null,t}getRangeReader(t,e){const i=super.getRangeReader(t,e);return i&&(i.onDone=()=>this._rangeReaders.delete(i),this._source.pdfDataRangeTransport.requestDataRange(t,e)),i}cancelAllRequests(t){super.cancelAllRequests(t),this._source.pdfDataRangeTransport.abort()}}class IT extends yd{_done=!1;_queuedChunks=null;_requests=[];constructor(t){super(t);const{pdfDataRangeTransport:e,disableRange:i,disableStream:a}=t._source,{length:l,contentDispositionFilename:c}=e;this._queuedChunks=t._queuedChunks||[];for(const u of this._queuedChunks)this._loaded+=u.byteLength;this._done=t._progressiveDone,this._contentLength=l,this._isStreamingSupported=!a,this._isRangeSupported=!i,Um(c)&&(this._filename=c),this._headersCapability.resolve()}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||=!0}}class UT extends bd{onDone=null;_begin=-1;_done=!1;_queuedChunk=null;_requests=[];constructor(t,e,i){super(t,e,i),this._begin=e}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this.onDone?.()}}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this.onDone?.()}}function zT(r){let t=!0,e=i("filename\\*","i").exec(r);if(e){e=e[1];let p=u(e);return p=unescape(p),p=d(p),p=f(p),l(p)}if(e=c(r),e){const p=f(e);return l(p)}if(e=i("filename","i").exec(r),e){e=e[1];let p=u(e);return p=f(p),l(p)}function i(p,y){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function a(p,y){if(p){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const x=new TextDecoder(p,{fatal:!0}),S=fd(y);y=x.decode(S),t=!1}catch{}}return y}function l(p){return t&&/[\x80-\xff]/.test(p)&&(p=a("utf-8",p),t&&(p=a("iso-8859-1",p))),p}function c(p){const y=[];let x;const S=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(x=S.exec(p))!==null;){let[,E,T,M]=x;if(E=parseInt(E,10),E in y){if(E===0)break;continue}y[E]=[T,M]}const A=[];for(let E=0;E<y.length&&E in y;++E){let[T,M]=y[E];M=u(M),T&&(M=unescape(M),E===0&&(M=d(M))),A.push(M)}return A.join("")}function u(p){if(p.startsWith('"')){const y=p.slice(1).split('\\"');for(let x=0;x<y.length;++x){const S=y[x].indexOf('"');S!==-1&&(y[x]=y[x].slice(0,S),y.length=x+1),y[x]=y[x].replaceAll(/\\(.)/g,"$1")}p=y.join('"')}return p}function d(p){const y=p.indexOf("'");if(y===-1)return p;const x=p.slice(0,y),A=p.slice(y+1).replace(/^[^']*'/,"");return a(x,A)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,x,S,A){if(S==="q"||S==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(E,T){return String.fromCharCode(parseInt(T,16))}),a(x,A);try{A=atob(A)}catch{}return a(x,A)})}return""}function Kx(r,t){const e=new Headers;if(!r||!t||typeof t!="object")return e;for(const i in t){const a=t[i];a!==void 0&&e.append(i,a)}return e}function vd(r){return URL.parse(r)?.origin??null}function Vx({responseHeaders:r,isHttp:t,rangeChunkSize:e,disableRange:i}){const a={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(r.get("Content-Length"),10);return!Number.isInteger(l)||(a.suggestedLength=l,l<=2*e)||i||!t||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function $x(r){const t=r.get("Content-Disposition");if(t){let e=zT(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Um(e))return e}return null}function xd(r,t){return new Qh(`Unexpected server response (${r}) while retrieving PDF "${t}".`,r,r===404||r===0&&t.startsWith("file:"))}function Xx(r,t){if(r!==t)throw new Error(`Expected range response-origin "${r}" to match "${t}".`)}function Yx(r,t,e,i){return fetch(r,{method:"GET",headers:t,signal:i.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"})}function Qx(r,t){if(r!==200&&r!==206)throw xd(r,t)}function Wx(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(ne(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class HT extends gd{_responseOrigin=null;constructor(t){super(t,qT,GT),this.isHttp=/^https?:/i.test(t.url),this.headers=Kx(this.isHttp,t.httpHeaders)}}class qT extends yd{_abortController=new AbortController;_reader=null;constructor(t){super(t);const{disableRange:e,disableStream:i,length:a,rangeChunkSize:l,url:c,withCredentials:u}=t._source;this._contentLength=a,this._isStreamingSupported=!i,this._isRangeSupported=!e;const d=new Headers(t.headers);Yx(c,d,u,this._abortController).then(f=>{t._responseOrigin=vd(f.url),Qx(f.status,c),this._reader=f.body.getReader();const p=f.headers,{allowRangeRequests:y,suggestedLength:x}=Vx({responseHeaders:p,isHttp:t.isHttp,rangeChunkSize:l,disableRange:e});this._isRangeSupported=y,this._contentLength=x||this._contentLength,this._filename=$x(p),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new rr("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Wx(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class GT extends bd{_abortController=new AbortController;_readCapability=Promise.withResolvers();_reader=null;constructor(t,e,i){super(t,e,i);const{url:a,withCredentials:l}=t._source,c=new Headers(t.headers);c.append("Range",`bytes=${e}-${i-1}`),Yx(a,c,l,this._abortController).then(u=>{const d=vd(u.url);Xx(d,t._responseOrigin),Qx(u.status,a),this._reader=u.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:{value:Wx(t),done:!1}}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const jp=200,Ev=206;function KT(r){return typeof r!="string"?r:fd(r).buffer}class VT extends gd{#t=new WeakMap;_responseOrigin=null;constructor(t){super(t,$T,XT),this.url=t.url,this.isHttp=/^https?:/i.test(this.url),this.headers=Kx(this.isHttp,t.httpHeaders)}_request(t){const e=new XMLHttpRequest,i={validateStatus:null,onHeadersReceived:t.onHeadersReceived,onDone:t.onDone,onError:t.onError,onProgress:t.onProgress};this.#t.set(e,i),e.open("GET",this.url),e.withCredentials=this._source.withCredentials;for(const[a,l]of this.headers)e.setRequestHeader(a,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.validateStatus=a=>a===Ev||a===jp):i.validateStatus=a=>a===jp,e.responseType="arraybuffer",Ne(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>t.onError(e.status),e.onreadystatechange=this.#i.bind(this,e),e.onprogress=this.#e.bind(this,e),e.send(null),e}#e(t,e){this.#t.get(t)?.onProgress?.(e)}#i(t,e){const i=this.#t.get(t);if(!i||(t.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),t.readyState!==4)||!this.#t.has(t))return;if(this.#t.delete(t),t.status===0&&this.isHttp){i.onError(t.status);return}const a=t.status||jp;if(!i.validateStatus(a)){i.onError(t.status);return}const l=KT(t.response);if(a===Ev){const c=t.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(c)?i.onDone(l):(ne('Missing or invalid "Content-Range" header.'),i.onError(0))}else l?i.onDone(l):i.onError(t.status)}_abortRequest(t){this.#t.has(t)&&(this.#t.delete(t),t.abort())}getRangeReader(t,e){const i=super.getRangeReader(t,e);return i&&(i.onClosed=()=>this._rangeReaders.delete(i)),i}}class $T extends yd{_cachedChunks=[];_done=!1;_requests=[];_storedError=null;constructor(t){super(t);const{length:e}=t._source;this._contentLength=e,this._fullRequestXhr=t._request({onHeadersReceived:this.#t.bind(this),onDone:this.#e.bind(this),onError:this.#i.bind(this),onProgress:this.#n.bind(this)})}#t(){const t=this._stream,{disableRange:e,rangeChunkSize:i}=t._source,a=this._fullRequestXhr;t._responseOrigin=vd(a.responseURL);const l=a.getAllResponseHeaders(),c=new Headers(l?l.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(f=>{const[p,...y]=f.split(": ");return[p,y.join(": ")]}):[]),{allowRangeRequests:u,suggestedLength:d}=Vx({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:i,disableRange:e});u&&(this._isRangeSupported=!0),this._contentLength=d||this._contentLength,this._filename=$x(c),this._isRangeSupported&&t._abortRequest(a),this._headersCapability.resolve()}#e(t){if(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._cachedChunks.push(t),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}#i(t){this._storedError=xd(t,this._stream.url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}#n(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}class XT extends bd{onClosed=null;_done=!1;_queuedChunk=null;_requests=[];_storedError=null;constructor(t,e,i){super(t,e,i),this._requestXhr=t._request({begin:e,end:i,onHeadersReceived:this.#t.bind(this),onDone:this.#e.bind(this),onError:this.#i.bind(this),onProgress:null})}#t(){const t=vd(this._requestXhr?.responseURL);try{Xx(t,this._stream._responseOrigin)}catch(e){this._storedError=e,this.#i(0)}}#e(t){this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this.onClosed?.()}#i(t){this._storedError??=xd(t,this._stream.url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),this.onClosed?.()}}const YT=/^[a-z][a-z0-9\-+.]+:/i;function QT(r){if(YT.test(r))return new URL(r);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(r))}function Zx(r){const{Readable:t}=process.getBuiltinModule("stream");return typeof t.toWeb=="function"?t.toWeb(r):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(r)}function Jx(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(ne(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class WT extends gd{constructor(t){super(t,ZT,JT),this.url=QT(t.url),Ne(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class ZT extends yd{_reader=null;constructor(t){super(t);const{disableRange:e,disableStream:i,length:a,rangeChunkSize:l}=t._source;this._contentLength=a,this._isStreamingSupported=!i,this._isRangeSupported=!e;const c=t.url,u=process.getBuiltinModule("fs");u.promises.lstat(c).then(d=>{const f=u.createReadStream(c),p=Zx(f);this._reader=p.getReader();const{size:y}=d;y<=2*l&&(this._isRangeSupported=!1),this._contentLength=y,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new rr("Streaming is disabled.")),this._headersCapability.resolve()}).catch(d=>{d.code==="ENOENT"&&(d=xd(0,c.href)),this._headersCapability.reject(d)})}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Jx(t),done:!1})}cancel(t){this._reader?.cancel(t)}}class JT extends bd{_readCapability=Promise.withResolvers();_reader=null;constructor(t,e,i){super(t,e,i);const a=t.url,l=process.getBuiltinModule("fs");try{const c=l.createReadStream(a,{start:e,end:i-1}),u=Zx(c);this._reader=u.getReader(),this._readCapability.resolve()}catch(c){this._readCapability.reject(c)}}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:{value:Jx(t),done:!1}}cancel(t){this._reader?.cancel(t)}}const Mc=Symbol("INITIAL_DATA");class tw{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Mc}}get(t,e=null){if(e){const a=this.#e(t);return a.promise.then(()=>e(a.data)),null}const i=this.#t[t];if(!i||i.data===Mc)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#t[t];return!!e&&e.data!==Mc}delete(t){const e=this.#t[t];return!e||e.data===Mc?!1:(delete this.#t[t],!0)}resolve(t,e=null){const i=this.#e(t);i.data=e,i.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Mc&&(yield[t,e])}}}const t2=1e5,_v=30;class Ri{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#s=null;#r=null;#a=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#g=[];#m=null;#u=[];#p=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#E=new WeakMap;static#A=null;static#x=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#m=t;else if(typeof t=="object")this.#m=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=i.scale*Ls.pixelRatio,this.#d=i.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:l,pageX:c,pageY:u}=i.rawDims;this.#y=[1,0,0,-1,-c,u+l],this.#o=a,this.#a=l,Ri.#M(),e.style.setProperty("--min-font-size",Ri.#A),eo(e,i),this.#t.promise.finally(()=>{Ri.#x.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=_n.platform;return ie(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#s??=e.lang,Object.assign(this.#f,e.styles),this.#C(e.items),t()},this.#t.reject)};return this.#c=this.#m.getReader(),Ri.#x.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*Ls.pixelRatio,a=t.rotation;if(a!==this.#d&&(e?.(),this.#d=a,eo(this.#l,{rotation:a})),i!==this.#h){e?.(),this.#h=i;const l={div:null,properties:null,ctx:Ri.#D(this.#s)};for(const c of this.#u)l.properties=this.#p.get(c),l.div=c,this.#_(l)}}cancel(){const t=new rr("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#C(t){if(this.#i)return;this.#r.ctx??=Ri.#D(this.#s);const e=this.#u,i=this.#g;for(const a of t){if(e.length>t2){ne("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const l=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id&&this.#e.setAttribute("id",`${a.id}`),a.tag==="Artifact"&&(this.#e.ariaHidden=!0),l.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(a.str),this.#w(a)}}#w(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const a=Ut.transform(this.#y,t.transform);let l=Math.atan2(a[1],a[0]);const c=this.#f[t.fontName];c.vertical&&(l+=Math.PI/2);let u=this.#n&&c.fontSubstitution||c.fontFamily;u=Ri.fontFamilyMap.get(u)||u;const d=Math.hypot(a[2],a[3]),f=d*Ri.#B(u,c,this.#s);let p,y;l===0?(p=a[4],y=a[5]-f):(p=a[4]+f*Math.sin(l),y=a[5]-f*Math.cos(l));const x=e.style;x.left=`${(100*p/this.#o).toFixed(2)}%`,x.top=`${(100*y/this.#a).toFixed(2)}%`,x.setProperty("--font-height",`${d.toFixed(2)}px`),x.fontFamily=u,i.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),l!==0&&(i.angle=l*(180/Math.PI));let S=!1;if(t.str.length>1)S=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const A=Math.abs(t.transform[0]),E=Math.abs(t.transform[3]);A!==E&&Math.max(A,E)/Math.min(A,E)>1.5&&(S=!0)}if(S&&(i.canvasWidth=c.vertical?t.height:t.width),this.#p.set(e,i),this.#r.div=e,this.#r.properties=i,this.#_(this.#r),i.hasText&&this.#e.append(e),i.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),this.#e.append(A)}}#_(t){const{div:e,properties:i,ctx:a}=t,{style:l}=e;if(i.canvasWidth!==0&&i.hasText){const{fontFamily:c}=l,{canvasWidth:u,fontSize:d}=i;Ri.#R(a,d*this.#h,c);const{width:f}=a.measureText(e.textContent);f>0&&l.setProperty("--scale-x",u*this.#h/f)}i.angle!==0&&l.setProperty("--rotate",`${i.angle}deg`)}static cleanup(){if(!(this.#x.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#D(t=null){let e=this.#b.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,e),this.#E.set(e,{size:0,family:""})}return e}static#R(t,e,i){const a=this.#E.get(t);e===a.size&&i===a.family||(t.font=`${e}px ${i}`,a.size=e,a.family=i)}static#M(){if(this.#A!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#A=t.getBoundingClientRect().height,t.remove()}static#B(t,e,i){const a=this.#v.get(t);if(a)return a;const l=this.#D(i);l.canvas.width=l.canvas.height=_v,this.#R(l,_v,t);const c=l.measureText(""),u=c.fontBoundingBoxAscent,d=Math.abs(c.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let f=.8;return u?f=u/(u+d):(_n.platform.isFirefox&&ne("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),this.#v.set(t,f),f}}const e2=100;function ew(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const t=new $m,{docId:e}=t,i=r.url?cT(r.url):null,a=r.data?uT(r.data):null,l=r.httpHeaders||null,c=r.withCredentials===!0,u=r.password??null,d=r.range instanceof nw?r.range:null,f=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let p=r.worker instanceof qc?r.worker:null;const y=r.verbosity,x=typeof r.docBaseUrl=="string"&&!pd(r.docBaseUrl)?r.docBaseUrl:null,S=Sh(r.cMapUrl),A=r.cMapPacked!==!1,E=r.CMapReaderFactory||(ii?bT:cv),T=Sh(r.iccUrl),M=Sh(r.standardFontDataUrl),k=r.StandardFontDataFactory||(ii?vT:uv),N=Sh(r.wasmUrl),F=r.WasmFactory||(ii?xT:hv),I=r.stopAtErrors!==!0,z=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,H=r.isEvalSupported!==!1,ct=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!ii,ut=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!ii&&(_n.platform.isFirefox||!globalThis.chrome),At=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,Ct=typeof r.disableFontFace=="boolean"?r.disableFontFace:ii,Rt=r.fontExtraProperties===!0,Vt=r.enableXfa===!0,xt=r.ownerDocument||globalThis.document,zt=r.disableRange===!0,G=r.disableStream===!0,it=r.disableAutoFetch===!0,vt=r.pdfBug===!0,Ht=r.CanvasFactory||(ii?yT:pT),Ot=r.FilterFactory||(ii?gT:mT),B=r.enableHWA===!0,J=r.useWasm!==!1,ft=d?d.length:r.length??NaN,wt=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!ii&&!Ct,Mt=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(E===cv&&k===uv&&F===hv&&S&&M&&N&&Lc(S,document.baseURI)&&Lc(M,document.baseURI)&&Lc(N,document.baseURI)),qt=null;jC(y);const jt={canvasFactory:new Ht({ownerDocument:xt,enableHWA:B}),filterFactory:new Ot({docId:e,ownerDocument:xt}),cMapReaderFactory:Mt?null:new E({baseUrl:S,isCompressed:A}),standardFontDataFactory:Mt?null:new k({baseUrl:M}),wasmFactory:Mt?null:new F({baseUrl:N})};p||(p=qc.create({verbosity:y,port:fl.workerPort}),t._worker=p);const he={docId:e,apiVersion:"5.4.624",data:a,password:u,disableAutoFetch:it,rangeChunkSize:f,length:ft,docBaseUrl:x,enableXfa:Vt,evaluatorOptions:{maxImageSize:z,disableFontFace:Ct,ignoreErrors:I,isEvalSupported:H,isOffscreenCanvasSupported:ct,isImageDecoderSupported:ut,canvasMaxAreaInBytes:At,fontExtraProperties:Rt,useSystemFonts:wt,useWasm:J,useWorkerFetch:Mt,cMapUrl:S,iccUrl:T,standardFontDataUrl:M,wasmUrl:N}},re={ownerDocument:xt,pdfBug:vt,styleElement:qt,enableHWA:B,loadingParams:{disableAutoFetch:it,enableXfa:Vt}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Tt=p.messageHandler.sendWithPromise("GetDocRequest",he,a?[a.buffer]:null);let de;if(d)de=new FT({pdfDataRangeTransport:d,disableRange:zt,disableStream:G});else if(!a){if(!i)throw new Error("getDocument - no `url` parameter provided.");const Wt=Lc(i)?HT:ii?WT:VT;de=new Wt({url:i,length:ft,httpHeaders:l,withCredentials:c,rangeChunkSize:f,disableRange:zt,disableStream:G})}return Tt.then(Wt=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Ee=new Pc(e,Wt,p.port),Pt=new s2(Ee,t,de,re,jt);t._transport=Pt,Ee.send("Ready",null)})}).catch(t._capability.reject),t}class $m{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${$m.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class nw{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#s=[];constructor(t,e,i=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=a}addRangeListener(t){this.#s.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const i of this.#s)i(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const i of this.#n)i(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#i)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Oe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class n2{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ie(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class i2{#t=!1;#e=Re.instance;constructor(t,e,i,a=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=a?new nv:null,this._pdfBug=a,this.commonObjs=i.commonObjs,this.objs=new tw,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(t){this._pageIndex=t-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:a=0,dontFlip:l=!1}={}){return new Jc({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:a,dontFlip:l})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ie(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:a="display",annotationMode:l=ir.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:y=null,isEditing:x=!1,recordOperations:S=!1,operationsFilter:A=null}){this._stats?.time("Overall");const E=this._transport.getRenderingIntent(a,l,y,x),{renderingIntent:T,cacheKey:M}=E;this.#t=!1,d||=this._transport.getOptionalContentConfig(T);let k=this._intentStates.get(M);k||(k=Object.create(null),this._intentStates.set(M,k)),k.streamReaderCancelTimeout&&(clearTimeout(k.streamReaderCancelTimeout),k.streamReaderCancelTimeout=null);const N=!!(T&Ti.PRINT);k.displayReadyCapability||(k.displayReadyCapability=Promise.withResolvers(),k.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(E));const F=!!(this._pdfBug&&globalThis.StepperManager?.enabled),I=!this.recordedBBoxes&&(S||F),z=ut=>{if(k.renderTasks.delete(H),I){const At=H.gfx?.dependencyTracker.take();At&&(H.stepper&&H.stepper.setOperatorBBoxes(At,H.gfx.dependencyTracker.takeDebugMetadata()),S&&(this.recordedBBoxes=At))}N&&(this.#t=!0),this.#i(),ut?(H.capability.reject(ut),this._abortOperatorList({intentState:k,reason:ut instanceof Error?ut:new Error(ut)})):H.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},H=new ll({callback:z,params:{canvas:e,canvasContext:t,dependencyTracker:I?new ST(e,k.operatorList.length,F):null,viewport:i,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:k.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!N,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:A});(k.renderTasks||=new Set).add(H);const ct=H.task;return Promise.all([k.displayReadyCapability.promise,d]).then(([ut,At])=>{if(this.destroyed){z();return}if(this._stats?.time("Rendering"),!(At.renderingIntent&T))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");H.initializeGraphics({transparency:ut,optionalContentConfig:At}),H.operatorListChanged()}).catch(z),ct}getOperatorList({intent:t="display",annotationMode:e=ir.ENABLE,printAnnotationStorage:i=null,isEditing:a=!1}={}){function l(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const c=this._transport.getRenderingIntent(t,e,i,a,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=l,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:this.#e.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Hc.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,a){function l(){c.read().then(function({value:d,done:f}){if(f){i(u);return}u.lang??=d.lang,Object.assign(u.styles,d.styles),u.items.push(...d.items),l()},a)}const c=e.getReader(),u={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#i();return t&&e&&(this._stats&&=new nv),e}#i(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,a=t.length;i<a;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#i()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:a}){const{map:l,transfer:c}=i,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:this.#e.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:l,modifiedIds:a},c).getReader(),f=this._intentStates.get(e);f.streamReader=d;const p=()=>{d.read().then(({value:y,done:x})=>{if(x){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),p())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const x of f.renderTasks)x.operatorListChanged();this.#i()}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};p()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Im){let a=e2;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new rr(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,l]of this._intentStates)if(l===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var sr,ts,fa,Vr,Jh,$r,Xr,ai,zh,iw,sw,jc,pl,Hh;const Ze=class Ze{constructor({name:t=null,port:e=null,verbosity:i=BC()}={}){ws(this,ai);ws(this,sr,Promise.withResolvers());ws(this,ts,null);ws(this,fa,null);ws(this,Vr,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(We(Ze,Xr).has(e))throw new Error("Cannot use more than one PDFWorker per port.");We(Ze,Xr).set(e,this),Ss(this,ai,iw).call(this,e)}else Ss(this,ai,sw).call(this)}get promise(){return We(this,sr).promise}get port(){return We(this,fa)}get messageHandler(){return We(this,ts)}destroy(){this.destroyed=!0,We(this,Vr)?.terminate(),di(this,Vr,null),We(Ze,Xr).delete(We(this,fa)),di(this,fa,null),We(this,ts)?.destroy(),di(this,ts,null)}static create(t){const e=We(this,Xr).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ze(t)}static get workerSrc(){if(fl.workerSrc)return fl.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ie(this,"_setupFakeWorkerGlobal",(async()=>We(this,pl,Hh)?We(this,pl,Hh):(await import(this.workerSrc)).WorkerMessageHandler)())}};sr=new WeakMap,ts=new WeakMap,fa=new WeakMap,Vr=new WeakMap,Jh=new WeakMap,$r=new WeakMap,Xr=new WeakMap,ai=new WeakSet,zh=function(){We(this,sr).resolve(),We(this,ts).send("configure",{verbosity:this.verbosity})},iw=function(t){di(this,fa,t),di(this,ts,new Pc("main","worker",t)),We(this,ts).on("ready",()=>{}),Ss(this,ai,zh).call(this)},sw=function(){if(We(Ze,$r)||We(Ze,pl,Hh)){Ss(this,ai,jc).call(this);return}let{workerSrc:t}=Ze;try{Ze._isSameOrigin(window.location,t)||(t=Ze._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new Pc("main","worker",e),a=()=>{l.abort(),i.destroy(),e.terminate(),this.destroyed?We(this,sr).reject(new Error("Worker was destroyed")):Ss(this,ai,jc).call(this)},l=new AbortController;e.addEventListener("error",()=>{We(this,Vr)||a()},{signal:l.signal}),i.on("test",u=>{if(l.abort(),this.destroyed||!u){a();return}di(this,ts,i),di(this,fa,e),di(this,Vr,e),Ss(this,ai,zh).call(this)}),i.on("ready",u=>{if(l.abort(),this.destroyed){a();return}try{c()}catch{Ss(this,ai,jc).call(this)}});const c=()=>{const u=new Uint8Array;i.send("test",u,[u.buffer])};c();return}catch{dd("The worker has been disabled.")}Ss(this,ai,jc).call(this)},jc=function(){We(Ze,$r)||(ne("Setting up fake worker."),di(Ze,$r,!0)),Ze._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){We(this,sr).reject(new Error("Worker was destroyed"));return}const e=new fT;di(this,fa,e);const i=`fake${n0(Ze,Jh)._++}`,a=new Pc(i+"_worker",i,e);t.setup(a,e),di(this,ts,new Pc(i,i+"_worker",e)),Ss(this,ai,zh).call(this)}).catch(t=>{We(this,sr).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},pl=new WeakSet,Hh=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},ws(Ze,pl),ws(Ze,Jh,0),ws(Ze,$r,!1),ws(Ze,Xr,new WeakMap),ii&&(di(Ze,$r,!0),fl.workerSrc||="./pdf.worker.mjs"),Ze._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!i?.origin||i.origin==="null")return!1;const a=new URL(e,i);return i.origin===a.origin},Ze._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Ze.fromPort=t=>{if(YC("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Ze.create(t)};let qc=Ze;class s2{downloadInfoCapability=Promise.withResolvers();#t=null;#e=new Map;#i=null;#n=new Map;#s=new Map;#r=new Map;#a=null;#o=Re.instance;constructor(t,e,i,a,l){this.messageHandler=t,this.loadingTask=e,this.#i=i,this.commonObjs=new tw,this.fontLoader=new rT({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.enableHWA=a.enableHWA,this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),this.#o.addListener(this.#c.bind(this))}#c(){const t=new Map,e=new Map;for(let i=0,a=this.#o.pagesNumber;i<a;i++){const l=this.#o.getPrevPageNumber(i+1)-1,c=this.#n.get(l);c&&t.set(i,c);const u=this.#s.get(l);u&&e.set(i,u)}this.#n=t,this.#s=e}#l(t,e=null){const i=this.#e.get(t);if(i)return i;const a=this.messageHandler.sendWithPromise(t,e);return this.#e.set(t,a),a}#d({loaded:t,total:e}){this.loadingTask.onProgress?.({loaded:t,total:e,percent:qn(Math.round(t/e*100),0,100)})}get annotationStorage(){return ie(this,"annotationStorage",new qm)}getRenderingIntent(t,e=ir.ENABLE,i=null,a=!1,l=!1){let c=Ti.DISPLAY,u=lm;switch(t){case"any":c=Ti.ANY;break;case"display":break;case"print":c=Ti.PRINT;break;default:ne(`getRenderingIntent - invalid intent: ${t}`)}const d=c&Ti.PRINT&&i instanceof Ix?i:this.annotationStorage;switch(e){case ir.DISABLE:c+=Ti.ANNOTATIONS_DISABLE;break;case ir.ENABLE:break;case ir.ENABLE_FORMS:c+=Ti.ANNOTATIONS_FORMS;break;case ir.ENABLE_STORAGE:c+=Ti.ANNOTATIONS_STORAGE,u=d.serializable;break;default:ne(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(c+=Ti.IS_EDITING),l&&(c+=Ti.OPLIST);const{ids:f,hash:p}=d.modifiedIds,y=[c,u.hash,p];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#n.values())t.push(i._destroy());this.#n.clear(),this.#s.clear(),this.#r.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Ri.cleanup(),this.#i?.cancelAllRequests(new rr("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,a)=>{Ne(this.#i,"GetReader - no `BasePDFStream` instance available."),this.#t=this.#i.getFullReader(),this.#t.onProgress=l=>this.#d(l),a.onPull=()=>{this.#t.read().then(function({value:l,done:c}){if(c){a.close();return}Ne(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{this.#t.cancel(l),a.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async i=>{await this.#t.headersReady;const{isStreamingSupported:a,isRangeSupported:l,contentLength:c}=this.#t;return a&&l&&(this.#t.onProgress=null),{isStreamingSupported:a,isRangeSupported:l,contentLength:c}}),t.on("GetRangeReader",(i,a)=>{Ne(this.#i,"GetRangeReader - no `BasePDFStream` instance available.");const l=this.#i.getRangeReader(i.begin,i.end);if(!l){a.close();return}a.onPull=()=>{l.read().then(function({value:c,done:u}){if(u){a.close();return}Ne(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{a.error(c)})},a.onCancel=c=>{l.cancel(c),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:i})=>{this.#o.pagesNumber=i.numPages,this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new n2(i,this))}),t.on("DocException",i=>{e._capability.reject(fi(i))}),t.on("PasswordRequest",i=>{this.#a=Promise.withResolvers();try{if(!e.onPassword)throw fi(i);const a=l=>{l instanceof Error?this.#a.reject(l):this.#a.resolve({password:l})};e.onPassword(a,i.code)}catch(a){this.#a.reject(a)}return this.#a.promise}),t.on("DataLoaded",i=>{this.#d({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#n.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,a,l])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(a){case"Font":if("error"in l){const y=l.error;ne(`Error during font loading: ${y}`),this.commonObjs.resolve(i,y);break}const c=new He(l),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(y,x)=>globalThis.FontInspector.fontAdded(y,x):null,d=new oT(c,u,l.extra,l.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(i,d)});break;case"CopyLocalImage":const{imageRef:f}=l;Ne(f,"The imageRef must be defined.");for(const y of this.#n.values())for(const[,x]of y.objs)if(x?.ref===f)return x.dataLen?(this.commonObjs.resolve(i,structuredClone(x)),x.dataLen):null;break;case"FontPath":this.commonObjs.resolve(i,new lT(l));break;case"Image":this.commonObjs.resolve(i,l);break;case"Pattern":const p=new On(l);this.commonObjs.resolve(i,p.getIR());break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([i,a,l,c])=>{if(this.destroyed)return;const u=this.#n.get(a);if(!u.objs.has(i)){if(u._intentStates.size===0){c?.bitmap?.close();return}switch(l){case"Image":case"Pattern":u.objs.resolve(i,c);break;default:throw new Error(`Got unknown object type ${l}`)}}}),t.on("DocProgress",i=>{this.destroyed||this.#d(i)}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[i.type];if(!a)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&ne("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this.#t?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this.#o.pagesNumber)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#o.getPageId(t)-1,a=this.#s.get(e);if(a)return a;const l=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(c=>{if(this.destroyed)throw new Error("Transport destroyed");c.refStr&&this.#r.set(c.refStr,i);const u=new i2(e,c,this,this._params.pdfBug);return this.#n.set(e,u),u});return this.#s.set(e,l),l}async getPageIndex(t){if(!cm(t))throw new Error("Invalid pageIndex request.");const e=await this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen});return this.#o.getPageNumber(e+1)-1}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:this.#o.getPageId(t+1)-1,intent:e})}getFieldObjects(){return this.#l("GetFieldObjects")}hasJSActions(){return this.#l("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#l("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:this.#o.getPageId(t+1)-1})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:this.#o.getPageId(t+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#l("GetOptionalContentConfig").then(e=>new BT(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#e.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new PT(a[1]):null,contentDispositionFilename:this.#t?.filename??null,contentLength:this.#t?.contentLength??null,hasStructTree:a[2]}));return this.#e.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#n.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),Ri.cleanup()}}cachedPageNumber(t){if(!cm(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`,i=this.#r.get(e);return i>=0?this.#o.getPageNumber(i+1):null}}class a2{_internalRenderTask=null;onContinue=null;onError=null;constructor(t){this._internalRenderTask=t}get promise(){return this._internalRenderTask.capability.promise}cancel(t=0){this._internalRenderTask.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this._internalRenderTask.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this._internalRenderTask;return t.form||t.canvas&&e?.size>0}}class ll{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:a,annotationCanvasMap:l,operatorList:c,pageIndex:u,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:y=!1,pageColors:x=null,enableHWA:S=!1,operationsFilter:A=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=a,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=y,this.pageColors=x,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new a2(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=S,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=A}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(ll.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ll.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:a,background:l,dependencyTracker:c}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new dl(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:a,viewport:i,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ll.#e.delete(this._canvas),t||=new Im(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ll.#e.delete(this._canvas),this.callback())))}}const r2="5.4.624",o2="384c6208b";let aw=class Ts{#t=null;#e=null;#i;#n=null;#s=!1;#r=!1;#a=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return ie(this,"_keyboardManager",new eu([[["Escape","mac+Escape"],Ts.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ts.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ts.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ts.prototype._moveToPrevious],[["Home","mac+Home"],Ts.prototype._moveToBeginning],[["End","mac+End"],Ts.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#r=!1,this.#a=t):this.#r=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#i=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Ts.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#a&&(t.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#m.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const i=this.#e=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#i,t.append(i),t}renderMainDropdown(){const t=this.#n=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",$i,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(t.id=`${this.#a.id}_colorpicker_dropdown`);for(const[i,a]of this.#l.highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",a),l.title=i,l.setAttribute("data-l10n-id",Ts.#d[i]);const c=document.createElement("span");l.append(c),c.className="swatch",c.style.backgroundColor=a,l.ariaSelected=a===this.#i,l.addEventListener("click",this.#f.bind(this,a),{signal:e}),t.append(l)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:we.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#m(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#p){this.#m(t);return}if(t.target===this.#t){this.#n.firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstElementChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#m(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#m(t);return}this.#n.firstElementChild?.focus()}_moveToEnd(t){if(!this.#p){this.#m(t);return}this.#n.lastElementChild?.focus()}#g(t){Ts._keyboardManager.exec(this,t)}#m(t){if(this.#p){this.hideDropdown();return}if(this.#s=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#h();this.#t.append(e)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#p){this.#a?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#s})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#l.highlightColors.values();for(const i of this.#n.children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}};class Gc{#t=null;#e=null;#i=null;static#n=null;constructor(t){this.#e=t,this.#i=t._uiManager,Gc.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,color:i}=this.#e,a=this.#t=document.createElement("input");return a.type="color",a.value=i||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",Gc.#n[t]),a.addEventListener("input",()=>{this.#i.updateParams(e,a.value)},{signal:this.#i._signal}),a}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function Cv(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function Dc(r){return Math.max(0,Math.min(255,255*r))}class Tv{static CMYK_G([t,e,i,a]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Dc(t),[t,t,t]}static G_HTML([t]){const e=Cv(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(Dc)}static RGB_HTML(t){return`#${t.map(Cv).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,i+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,i,a]){return[Dc(1-Math.min(1,t+a)),Dc(1-Math.min(1,i+a)),Dc(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const a=1-t,l=1-e,c=1-i,u=Math.min(a,l,c);return["CMYK",a,l,c,u]}}class l2{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),i||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Oe("Abstract method `_createSVG` called.")}}class Zh extends l2{_createSVG(t){return document.createElementNS(ha,t)}}const c2=9,no=new WeakSet,u2=new Date().getTimezoneOffset()*60*1e3;class Bp{static create(t){switch(t.data.annotationType){case wn.LINK:return new Xm(t);case wn.TEXT:return new d2(t);case wn.WIDGET:switch(t.data.fieldType){case"Tx":return new f2(t);case"Btn":return t.data.radioButton?new rw(t):t.data.checkBox?new m2(t):new g2(t);case"Ch":return new y2(t);case"Sig":return new p2(t)}return new ao(t);case wn.POPUP:return new dm(t);case wn.FREETEXT:return new ow(t);case wn.LINE:return new v2(t);case wn.SQUARE:return new x2(t);case wn.CIRCLE:return new w2(t);case wn.POLYLINE:return new lw(t);case wn.CARET:return new A2(t);case wn.INK:return new Ym(t);case wn.POLYGON:return new S2(t);case wn.HIGHLIGHT:return new cw(t);case wn.UNDERLINE:return new E2(t);case wn.SQUIGGLY:return new _2(t);case wn.STRIKEOUT:return new C2(t);case wn.STAMP:return new uw(t);case wn.FILEATTACHMENT:return new T2(t);default:return new en(t)}}}class en{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(i)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return en._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:i,rect:a}=this.data;let l=-1/0,c=-1/0;if(e?.length>=8){for(let u=0;u<e.length;u+=8)e[u+1]>c?(c=e[u+1],l=e[u+2]):e[u+1]===c&&(l=Math.max(l,e[u+2]));return[l,c]}if(i?.length>=1){for(const u of i)for(let d=0,f=u.length;d<f;d+=2)u[d+1]>c?(c=u[d+1],l=u[d]):u[d+1]===c&&(l=Math.max(l,u[d]));if(l!==1/0)return[l,c]}return a?[a[2],a[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-l)/i,t[1]=100*(t[1]-c)/a,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${Uc}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,i={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:i})||this.annotationStorage.setValue(`${Uc}${e.id}`,{id:e.id,annotationType:e.annotationType,page:this.parent.page,popup:i,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:i}=t;e&&this.#n(e);let a=this.#i?.popup||this.popup;!a&&i?.text&&(this._createPopup(i),a=this.#i.popup),a&&(a.updateEdited(t),i?.deleted&&(a.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:i,rotation:a},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:c,pageX:u,pageY:d}}}}=this;i?.splice(0,4,...t),e.left=`${100*(t[0]-u)/l}%`,e.top=`${100*(c-t[3]+d)/c}%`,a===0?(e.width=`${100*(t[2]-t[0])/l}%`,e.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(a)}_createContainer(t){const{data:e,parent:{page:i,viewport:a}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",e.id),!(this instanceof ao)&&!(this instanceof Xm)&&(l.tabIndex=0);const{style:c}=l;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(l.title=e.alternativeText),e.noRotate&&l.classList.add("norotate"),!e.rect||this instanceof dm){const{rotation:E}=e;return!e.hasOwnCanvas&&E!==0&&this.setRotation(E,l),l}const{width:u,height:d}=this;if(!t&&e.borderStyle.width>0){c.borderWidth=`${e.borderStyle.width}px`;const E=e.borderStyle.horizontalCornerRadius,T=e.borderStyle.verticalCornerRadius;if(E>0||T>0){const k=`calc(${E}px * var(--total-scale-factor)) / calc(${T}px * var(--total-scale-factor))`;c.borderRadius=k}else if(this instanceof rw){const k=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;c.borderRadius=k}switch(e.borderStyle.style){case il.SOLID:c.borderStyle="solid";break;case il.DASHED:c.borderStyle="dashed";break;case il.BEVELED:ne("Unimplemented border style: beveled");break;case il.INSET:ne("Unimplemented border style: inset");break;case il.UNDERLINE:c.borderBottomStyle="solid";break}const M=e.borderColor||null;M?(this.#e=!0,c.borderColor=Ut.makeHexColor(M[0]|0,M[1]|0,M[2]|0)):c.borderWidth=0}const f=Ut.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:p,pageHeight:y,pageX:x,pageY:S}=a.rawDims;c.left=`${100*(f[0]-x)/p}%`,c.top=`${100*(f[1]-S)/y}%`;const{rotation:A}=e;return e.hasOwnCanvas||A===0?(c.width=`${100*u/p}%`,c.height=`${100*d/y}%`):this.setRotation(A,l),l}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:a}=this.parent.viewport.rawDims;let{width:l,height:c}=this;t%180!==0&&([l,c]=[c,l]),e.style.width=`${100*l/i}%`,e.style.height=`${100*c/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,a)=>{const l=a.detail[e],c=l[0],u=l.slice(1);a.target.style[i]=Tv[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[i]:Tv[`${c}_rgb`](u)})};return ie(this,"_commonActions",{display:e=>{const{display:i}=e.detail,a=i%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const a of Object.keys(e.detail))(t[a]||i[a])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[a,l]of Object.entries(e)){const c=i[a];if(c){const u={detail:{[a]:l},target:t};c(u),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,a,l]=this.data.rect.map(E=>Math.fround(E));if(t.length===8){const[E,T,M,k]=t.subarray(2,6);if(a===E&&l===T&&e===M&&i===k)return}const{style:c}=this.container;let u;if(this.#e){const{borderColor:E,borderWidth:T}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${E}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const d=a-e,f=l-i,{svgFactory:p}=this,y=p.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const x=p.createElement("defs");y.append(x);const S=p.createElement("clipPath"),A=`clippath_${this.data.id}`;S.setAttribute("id",A),S.setAttribute("clipPathUnits","objectBoundingBox"),x.append(S);for(let E=2,T=t.length;E<T;E+=8){const M=t[E],k=t[E+1],N=t[E+2],F=t[E+3],I=p.createElement("rect"),z=(N-e)/d,H=(l-k)/f,ct=(M-N)/d,ut=(k-F)/f;I.setAttribute("x",z),I.setAttribute("y",H),I.setAttribute("width",ct),I.setAttribute("height",ut),S.append(I),u?.push(`<rect vector-effect="non-scaling-stroke" x="${z}" y="${H}" width="${ct}" height="${ut}"/>`)}this.#e&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${A})`}_createPopup(t=null){const{data:e}=this;let i,a;t?(i={str:t.text},a=t.date):(i=e.contentsObj,a=e.modificationDate),this.#i=new dm({data:{color:e.color,titleObj:e.titleObj,modificationDate:a,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){Oe("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:l,id:c,exportValues:u}of a){if(l===-1||c===e)continue;const d=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!no.has(f)){ne(`_getElementsByName - element not allowed: ${c}`);continue}i.push({id:c,exportValue:d,domElement:f})}return i}for(const a of document.getElementsByName(t)){const{exportValue:l}=a,c=a.getAttribute("data-element-id");c!==e&&no.has(a)&&i.push({id:c,exportValue:l,domElement:a})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class h2 extends en{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class Xm extends en{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let a=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),a=!0):t.attachment?(this.#e(i,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?(this.#i(i,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),a=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&(this.contentElement=i,this.container.append(i)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,i=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),i&&(t.title=i)}_bindNamedAction(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),i&&(t.title=i),this.#t()}#e(t,e,i="",a=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:i&&(t.title=i),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,a),!1),this.#t()}#i(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),i&&(t.title=i),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(e.actions)){const l=i.get(a);l&&(t[l]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:a}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){ne('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();const{fields:a,refs:l,include:c}=e,u=[];if(a.length!==0||l.length!==0){const p=new Set(l);for(const y of a){const x=this._fieldObjects[y]||[];for(const{id:S}of x)p.add(S)}for(const y of Object.values(this._fieldObjects))for(const x of y)p.has(x.id)===c&&u.push(x)}else for(const p of Object.values(this._fieldObjects))u.push(...p);const d=this.annotationStorage,f=[];for(const p of u){const{id:y}=p;switch(f.push(y),p.type){case"text":{const S=p.defaultValue||"";d.setValue(y,{value:S});break}case"checkbox":case"radiobutton":{const S=p.defaultValue===p.exportValues;d.setValue(y,{value:S});break}case"combobox":case"listbox":{const S=p.defaultValue||"";d.setValue(y,{value:S});break}default:continue}const x=document.querySelector(`[data-element-id="${y}"]`);if(x){if(!no.has(x)){ne(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;x.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class d2 extends en{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class ao extends en{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return _n.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,a,l){i.includes("mouse")?t.addEventListener(i,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:l(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(i,c=>{if(i==="blur"){if(!e.focused||!c.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}l&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:l(c)}})})}_setEventListeners(t,e,i,a){for(const[l,c]of i)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,l,c,a),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Ut.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||c2,l=t.style;let c;const u=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(f/(Dp*a))||1,y=f/p;c=Math.min(a,d(y/Dp))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(a,d(f/Dp))}l.fontSize=`calc(${c}px * var(--total-scale-factor))`,l.color=Ut.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(l.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class f2 extends ao{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,a){const l=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[e]=i),l.setValue(c.id,{[a]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let l=a.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let u=a.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??l,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",u??l),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),no.add(i),this.contentElement=i,i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:f,datetimeType:p,timeStep:y}=this.data,x=!!p&&this.enableScripting;f&&(i.title=f),this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",A=>{t.setValue(e,{value:A.target.value}),this.setPropertyOnSiblings(i,"value",A.target.value,"value"),d.formattedValue=null}),i.addEventListener("resetform",A=>{const E=this.data.defaultFieldValue??"";i.value=d.userValue=E,d.formattedValue=null});let S=A=>{const{formattedValue:E}=d;E!=null&&(A.target.value=E),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",E=>{if(d.focused)return;const{target:T}=E;if(x&&(T.type=p,y&&(T.step=y)),d.userValue){const M=d.userValue;if(x)if(p==="time"){const k=new Date(M),N=[k.getHours(),k.getMinutes(),k.getSeconds()];T.value=N.map(F=>F.toString().padStart(2,"0")).join(":")}else T.value=new Date(M-u2).toISOString().split(p==="date"?"T":".",1)[0];else T.value=M}d.lastCommittedValue=T.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),i.addEventListener("updatefromsandbox",E=>{this.showElementAndHideCanvas(E.target);const T={value(M){d.userValue=M.detail.value??"",x||t.setValue(e,{value:d.userValue.toString()}),M.target.value=d.userValue},formattedValue(M){const{formattedValue:k}=M.detail;d.formattedValue=k,k!=null&&M.target!==document.activeElement&&(M.target.value=k);const N={formattedValue:k};x&&(N.value=k),t.setValue(e,N)},selRange(M){M.target.setSelectionRange(...M.detail.selRange)},charLimit:M=>{const{charLimit:k}=M.detail,{target:N}=M;if(k===0){N.removeAttribute("maxLength");return}N.setAttribute("maxLength",k);let F=d.userValue;!F||F.length<=k||(F=F.slice(0,k),N.value=d.userValue=F,t.setValue(e,{value:F}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:F,willCommit:!0,commitKey:1,selStart:N.selectionStart,selEnd:N.selectionEnd}}))}};this._dispatchEventFromSandbox(T,E)}),i.addEventListener("keydown",E=>{d.commitKey=1;let T=-1;if(E.key==="Escape"?T=0:E.key==="Enter"&&!this.data.multiLine?T=2:E.key==="Tab"&&(d.commitKey=3),T===-1)return;const{value:M}=E.target;d.lastCommittedValue!==M&&(d.lastCommittedValue=M,d.userValue=M,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:M,willCommit:!0,commitKey:T,selStart:E.target.selectionStart,selEnd:E.target.selectionEnd}}))});const A=S;S=null,i.addEventListener("blur",E=>{if(!d.focused||!E.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:T}=E;let{value:M}=T;if(x){if(M&&p==="time"){const k=M.split(":").map(N=>parseInt(N,10));M=new Date(2e3,0,1,k[0],k[1],k[2]||0).valueOf(),T.step=""}else M.includes("T")||(M=`${M}T00:00`),M=new Date(M).valueOf();T.type="text"}d.userValue=M,d.lastCommittedValue!==M&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:M,willCommit:!0,commitKey:d.commitKey,selStart:E.target.selectionStart,selEnd:E.target.selectionEnd}}),A(E)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",E=>{d.lastCommittedValue=null;const{data:T,target:M}=E,{value:k,selectionStart:N,selectionEnd:F}=M;let I=N,z=F;switch(E.inputType){case"deleteWordBackward":{const H=k.substring(0,N).match(/\w*[^\w]*$/);H&&(I-=H[0].length);break}case"deleteWordForward":{const H=k.substring(N).match(/^[^\w]*\w*/);H&&(z+=H[0].length);break}case"deleteContentBackward":N===F&&(I-=1);break;case"deleteContentForward":N===F&&(z+=1);break}E.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:k,change:T||"",willCommit:!1,selStart:I,selEnd:z}})}),this._setEventListeners(i,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],E=>E.target.value)}if(S&&i.addEventListener("blur",S),this.data.comb){const E=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing=`calc(${E}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class p2 extends ao{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class m2 extends ao{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let a=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(i,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return no.add(l),l.setAttribute("data-element-id",i),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=e.fieldName,a&&l.setAttribute("checked",!0),l.setAttribute("exportValue",e.exportValue),l.tabIndex=0,l.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const f of this._getElementsByName(u,i)){const p=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}t.setValue(i,{value:d})}),l.addEventListener("resetform",c=>{const u=e.defaultFieldValue||"Off";c.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",c=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(i,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class rw extends ao{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let a=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(i,{value:a})),a)for(const c of this._getElementsByName(e.fieldName,i))t.setValue(c.id,{value:!1});const l=document.createElement("input");if(no.add(l),l.setAttribute("data-element-id",i),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=e.fieldName,a&&l.setAttribute("checked",!0),l.tabIndex=0,l.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const f of this._getElementsByName(u,i))t.setValue(f.id,{value:!1});t.setValue(i,{value:d})}),l.addEventListener("resetform",c=>{const u=e.defaultFieldValue;c.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const c=e.buttonValue;l.addEventListener("updatefromsandbox",u=>{const d={value:f=>{const p=c===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const x=p&&y.id===i;y.domElement&&(y.domElement.checked=x),t.setValue(y.id,{value:x})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class g2 extends Xm{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class y2 extends ao{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");no.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",p=>{const y=this.data.defaultFieldValue;for(const x of a.options)x.selected=x.value===y});for(const p of this.data.options){const y=document.createElement("option");y.textContent=p.displayValue,y.value=p.exportValue,i.value.includes(p.exportValue)&&(y.setAttribute("selected",!0),l=!1),a.append(y)}let c=null;if(l){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),a.prepend(p),c=()=>{p.remove(),a.removeEventListener("input",c),c=null},a.addEventListener("input",c)}const u=p=>{const y=p?"value":"textContent",{options:x,multiple:S}=a;return S?Array.prototype.filter.call(x,A=>A.selected).map(A=>A[y]):x.selectedIndex===-1?null:x[x.selectedIndex][y]};let d=u(!1);const f=p=>{const y=p.target.options;return Array.prototype.map.call(y,x=>({displayValue:x.textContent,exportValue:x.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",p=>{const y={value(x){c?.();const S=x.detail.value,A=new Set(Array.isArray(S)?S:[S]);for(const E of a.options)E.selected=A.has(E.value);t.setValue(e,{value:u(!0)}),d=u(!1)},multipleSelection(x){a.multiple=!0},remove(x){const S=a.options,A=x.detail.remove;S[A].selected=!1,a.remove(A),S.length>0&&Array.prototype.findIndex.call(S,T=>T.selected)===-1&&(S[0].selected=!0),t.setValue(e,{value:u(!0),items:f(x)}),d=u(!1)},clear(x){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),d=u(!1)},insert(x){const{index:S,displayValue:A,exportValue:E}=x.detail.insert,T=a.children[S],M=document.createElement("option");M.textContent=A,M.value=E,T?T.before(M):a.append(M),t.setValue(e,{value:u(!0),items:f(x)}),d=u(!1)},items(x){const{items:S}=x.detail;for(;a.length!==0;)a.remove(0);for(const A of S){const{displayValue:E,exportValue:T}=A,M=document.createElement("option");M.textContent=E,M.value=T,a.append(M)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(x)}),d=u(!1)},indices(x){const S=new Set(x.detail.indices);for(const A of x.target.options)A.selected=S.has(A.index);t.setValue(e,{value:u(!0)}),d=u(!1)},editable(x){x.target.disabled=!x.detail.editable}};this._dispatchEventFromSandbox(y,p)}),a.addEventListener("input",p=>{const y=u(!0),x=u(!1);t.setValue(e,{value:y}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:x,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):a.addEventListener("input",function(p){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class dm extends en{constructor(t){const{data:e,elements:i,parent:a}=t,l=!!a._commentManager;if(super(t,{isRenderable:!l&&en._hasPopupData(e)}),this.elements=i,l&&en._hasPopupData(e)){const c=this.popup=this.#t();for(const u of i)u.popup=c}else this.popup=null}#t(){return new b2({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),i=[];for(const a of this.elements)a.popup=e,a.container.ariaHasPopup="dialog",i.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(a=>`${rl}${a}`).join(",")),this.container}}class b2{#t=null;#e=this.#G.bind(this);#i=this.#I.bind(this);#n=this.#k.bind(this);#s=this.#S.bind(this);#r=null;#a=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#g=null;#m=null;#u=null;#p=null;#y=null;#v=null;#b=null;#E=null;#A=null;#x=null;#C=!1;#w=null;#_=null;constructor({container:t,color:e,elements:i,titleObj:a,modificationDate:l,contentsObj:c,richText:u,parent:d,rect:f,parentRect:p,open:y,commentManager:x=null}){this.#a=t,this.#A=a,this.#o=c,this.#E=u,this.#d=d,this.#r=e,this.#b=f,this.#h=p,this.#l=i,this.#t=x,this.#w=i[0],this.#c=am.toDateObject(l),this.trigger=i.flatMap(S=>S.getElementsToTriggerPopup()),x||(this.#D(),this.#a.hidden=!0,y&&this.#S())}#D(){if(this.#m)return;this.#m=new AbortController;const{signal:t}=this.#m;for(const e of this.trigger)e.addEventListener("click",this.#s,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#i,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#R(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#w.container.after(this.#p);return}if(this.#y||this.#R(),!this.#y)return;const{signal:t}=this.#m=new AbortController,e=this.#w.hasOwnCommentButton,i=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},a=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},l=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#p=this.#w.container;for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",i,{signal:t}),c.addEventListener("pointerenter",a,{signal:t}),c.addEventListener("pointerleave",l,{signal:t}),c.classList.add("popupTriggerArea")}else{const c=this.#p=document.createElement("button");c.className="annotationCommentButton";const u=this.#w.container;c.style.zIndex=u.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#B(),this.#M(),c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",i,{signal:t}),c.addEventListener("pointerenter",a,{signal:t}),c.addEventListener("pointerleave",l,{signal:t}),u.after(c)}}#M(){if(this.#w.extraPopupElement&&!this.#w.editor)return;this.#p||this.renderCommentButton();const[t,e]=this.#y,{style:i}=this.#p;i.left=`calc(${t}%)`,i.top=`calc(${e}% - var(--comment-button-dim))`}#B(){this.#w.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#w.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:e,opacity:i,creationDate:a,modificationDate:l}=this.#w.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:i,creationDate:a,modificationDate:l}}get elementBeforePopup(){return this.#p}get comment(){return this.#_||=this.#w.commentText,this.#_}set comment(t){t!==this.comment&&(this.#w.commentText=this.#_=t)}focus(){this.#w.container?.focus()}get parentBoundingClientRect(){return this.#w.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=e)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:e,height:i}=this.#p.getBoundingClientRect(),{x:a,y:l,width:c,height:u}=this.#w.layer.getBoundingClientRect();return[(t-a)/c,(e+i-l)/u]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,i]=this.#v||this.commentButtonPosition.map(f=>f/100),a=this.parentBoundingClientRect,{x:l,y:c,width:u,height:d}=a;this.#t.showDialog(null,this,l+e*u,c+i*d,{...t,parentDimensions:a})}render(){if(this.#g)return;const t=this.#g=document.createElement("div");if(t.className="popup",this.#r){const i=t.style.outlineColor=Ut.makeHexColor(...this.#r);t.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#A?.str){const i=document.createElement("span");i.className="title",e.append(i),{dir:i.dir,str:i.textContent}=this.#A}if(t.append(e),this.#c){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),i.dateTime=this.#c.toISOString(),e.append(i)}Px({html:this.#O||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#a.append(t)}get#O(){const t=this.#E,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#E.html||null}get#L(){return this.#O?.attributes?.style?.fontSize||0}get#F(){return this.#O?.attributes?.style?.color||null}#P(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:this.#F,fontSize:this.#L?`calc(${this.#L}px * var(--total-scale-factor))`:""}};for(const l of t.split(`
`))e.push({name:"span",value:l,attributes:a});return i}#G(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#S()}updateEdited({rect:t,popup:e,deleted:i}){if(this.#t){i?(this.remove(),this.#_=null):e&&(e.deleted?this.remove():(this.#B(),this.#_=e.text)),t&&(this.#y=null,this.#R(),this.#M());return}if(i||e?.deleted){this.remove();return}this.#D(),this.#x||={contentsObj:this.#o,richText:this.#E},t&&(this.#u=null),e&&e.text&&(this.#E=this.#P(e.text),this.#c=am.toDateObject(e.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#x&&({contentsObj:this.#o,richText:this.#E}=this.#x,this.#x=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#g?.remove(),this.#g=null,this.#C=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:a,pageY:l}}}=this.#d;let c=!!this.#h,u=c?this.#h:this.#b;for(const A of this.#l)if(!u||Ut.intersect(A.data.rect,u)!==null){u=A.data.rect,c=!0;break}const d=Ut.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),p=c?u[2]-u[0]+5:0,y=d[0]+p,x=d[1];this.#u=[100*(y-a)/e,100*(x-l)/i];const{style:S}=this.#a;S.left=`${this.#u[0]}%`,S.top=`${this.#u[1]}%`}#S(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#k(),this.#a.addEventListener("click",this.#s),this.#a.addEventListener("keydown",this.#e)):(this.#I(),this.#a.removeEventListener("click",this.#s),this.#a.removeEventListener("keydown",this.#e))}#k(){this.#g||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#T(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#I(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#a.hidden=!0)}maybeShow(){this.#t||(this.#D(),this.#C&&(this.#g||this.#k(),this.#C=!1,this.#a.hidden=!1))}get isVisible(){return this.#t?!1:this.#a.hidden===!1}}class ow extends en{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=oe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class v2 extends en{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),l=this.#t=this.svgFactory.createElement("svg:line");return l.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),l.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),l.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),l.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class x2 extends en{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),l=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",l/2),c.setAttribute("y",l/2),c.setAttribute("width",e-l),c.setAttribute("height",i-l),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class w2 extends en{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),l=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",e/2),c.setAttribute("cy",i/2),c.setAttribute("rx",e/2-l/2),c.setAttribute("ry",i/2-l/2),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class lw extends en{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:a},width:l,height:c}=this;if(!e)return this.container;const u=this.svgFactory.create(l,c,!0);let d=[];for(let p=0,y=e.length;p<y;p+=2){const x=e[p]-t[0],S=t[3]-e[p+1];d.push(`${x},${S}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class S2 extends lw{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class A2 extends en{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class Ym extends en{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?oe.HIGHLIGHT:oe.INK}#i(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:i,borderStyle:a,popupRef:l}}=this,{transform:c,width:u,height:d}=this.#i(e,t),f=this.svgFactory.create(u,d,!0),p=this.#t=this.svgFactory.createElement("svg:g");f.append(p),p.setAttribute("stroke-width",a.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",c);for(let y=0,x=i.length;y<x;y++){const S=this.svgFactory.createElement(this.svgElementName);this.#e.push(S),S.setAttribute("points",i[y].join(",")),p.append(S)}return!l&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:i,rect:a}=t,l=this.#t;if(e>=0&&l.setAttribute("stroke-width",e||1),i)for(let c=0,u=this.#e.length;c<u;c++)this.#e[c].setAttribute("points",i[c].join(","));if(a){const{transform:c,width:u,height:d}=this.#i(this.data.rotation,a);l.parentElement.setAttribute("viewBox",`0 0 ${u} ${d}`),l.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class cw extends en{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=oe.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class E2 extends en{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class _2 extends en{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class C2 extends en{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class uw extends en{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=oe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class T2 extends en{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;const{isMac:a}=_n.platform;return t.addEventListener("keydown",l=>{l.key==="Enter"&&(a?l.metaKey:l.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Qm{#t=null;#e=null;#i=null;#n=new Map;#s=null;#r=null;#a=[];#o=!1;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:a,page:l,viewport:c,structTreeLayer:u,commentManager:d,linkService:f,annotationStorage:p}){this.div=t,this.#t=e,this.#e=i,this.#s=u||null,this.#r=f||null,this.#i=p||new qm,this.page=l,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=d||null}hasEditableAnnotations(){return this.#n.size>0}async render(t){const{annotations:e}=t,i=this.div;eo(i,this.viewport);const a=new Map,l=[],c={data:null,layer:i,linkService:this.#r,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Zh,annotationStorage:this.#i,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of e){if(u.noHTML)continue;const d=u.annotationType===wn.POPUP;if(d){const y=a.get(u.id);if(!y)continue;if(!this._commentManager){l.push(u);continue}c.elements=y}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;c.data=u;const f=Bp.create(c);if(!f.isRenderable)continue;if(!d&&(this.#a.push(f),u.popupRef)){const y=a.get(u.popupRef);y?y.push(f):a.set(u.popupRef,[f])}const p=f.render();u.hidden&&(p.style.visibility="hidden"),f._isEditable&&(this.#n.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await this.#c();for(const u of l){const d=c.elements=a.get(u.id);c.data=u;const f=Bp.create(c);if(!f.isRenderable)continue;const p=f.render();f.contentElement.id=`${rl}${u.id}`,u.hidden&&(p.style.visibility="hidden"),d.at(-1).container.after(p)}this.#l()}async#c(){if(this.#a.length===0)return;this.div.replaceChildren();const t=[];if(!this.#o){this.#o=!0;for(const{contentElement:i,data:{id:a}}of this.#a){const l=i.id=`${rl}${a}`;t.push(this.#s?.getAriaAttributes(l).then(c=>{if(c)for(const[u,d]of c)i.setAttribute(u,d)}))}}this.#a.sort(({data:{rect:[i,a,l,c]}},{data:{rect:[u,d,f,p]}})=>{if(i===l&&a===c)return 1;if(u===f&&d===p)return-1;const y=c,x=a,S=(a+c)/2,A=p,E=d,T=(d+p)/2;if(S>=A&&T<=x)return-1;if(T>=y&&S<=E)return 1;const M=(i+l)/2,k=(u+f)/2;return M-k});const e=document.createDocumentFragment();for(const i of this.#a)e.append(i.container),this._commentManager?(i.extraPopupElement?.popup||i.popup)?.renderCommentButton():i.extraPopupElement&&e.append(i.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),this.#t)for(const i of this.#a)this.#t.addPointerInTextLayer(i.contentElement,!1)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#r,svgFactory:new Zh,parent:this};for(const i of t){i.borderStyle||=Qm._defaultBorderStyle,e.data=i;const a=Bp.create(e);a.isRenderable&&(a.render(),a.contentElement.id=`${rl}${i.id}`,this.#a.push(a))}await this.#c()}update({viewport:t}){const e=this.div;this.viewport=t,eo(e,{rotation:t.rotation}),this.#l(),e.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[e,i]of this.#e){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:l}=a;l?l.nodeName==="CANVAS"?l.replaceWith(i):l.classList.contains("annotationContent")?l.after(i):l.before(i):a.append(i);const c=this.#n.get(e);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,a.id,i),c._hasNoCanvas=!1):c.canvas=i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:i,rotation:a}=t,l=new h2({data:{id:i,rect:t.getPDFRect(),rotation:a},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#r,annotationStorage:this.#i});return l.render(),l.contentElement.id=`${rl}${i}`,l.createOrUpdatePopup(),this.#a.push(l),l}removeAnnotation(t){const e=this.#a.findIndex(a=>a.data.id===t);if(e<0)return;const[i]=this.#a.splice(e,1);this.#t?.removePointerInTextLayer(i.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return ie(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:il.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Rh=/\r\n?|\n/g;class kn extends Qt{#t="";#e=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=kn.prototype,e=l=>l.isEmpty(),i=or.TRANSLATE_SMALL,a=or.TRANSLATE_BIG;return ie(this,"_keyboardManager",new eu([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:e}]]))}static _type="freetext";static _editorType=oe.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||kn._defaultColor||Qt._defaultLineColor,this.#n=t.fontSize||kn._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,e){Qt.initialize(t,e);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case we.FREETEXT_SIZE:kn._defaultFontSize=e;break;case we.FREETEXT_COLOR:kn._defaultColor=e;break}}updateParams(t,e){switch(t){case we.FREETEXT_SIZE:this.#s(e);break;case we.FREETEXT_COLOR:this.#r(e);break}}static get defaultPropertiesToUpdate(){return[[we.FREETEXT_SIZE,kn._defaultFontSize],[we.FREETEXT_COLOR,kn._defaultColor||Qt._defaultLineColor]]}get propertiesToUpdate(){return[[we.FREETEXT_SIZE,this.#n],[we.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Gc(this),[["colorPicker",this._colorPicker]]}get colorType(){return we.FREETEXT_COLOR}#s(t){const e=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#n)*this.parentScale),this.#n=a,this.#o()},i=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:we.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#r(t){const e=a=>{this.color=a,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:we.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-kn._internalPadding*t,-(kn._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(kn.#c(i)),e=i);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:l}=this,c=l.style.display,u=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",a.div.append(this.div),i=l.getBoundingClientRect(),l.remove(),l.style.display=c,l.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#a().trimEnd();if(t===e)return;const i=a=>{if(this.#t=a,!a){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){kn._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,l]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[f,p]=this.pageDimensions,[y,x]=this.pageTranslation;let S,A;switch(this.rotation){case 0:S=t+(c[0]-y)/f,A=e+this.height-(c[1]-x)/p;break;case 90:S=t+(c[0]-y)/f,A=e-(c[1]-x)/p,[u,d]=[d,-u];break;case 180:S=t-this.width+(c[0]-y)/f,A=e-(c[1]-x)/p,[u,d]=[-u,-d];break;case 270:S=t+(c[0]-y-this.height*p)/f,A=e+(c[1]-x-this.width*f)/p,[u,d]=[-d,u];break}this.setAt(S*a,A*l,u,d)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Rh,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const a=kn.#h(e.getData("text")||"").replaceAll(Rh,`
`);if(!a)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const c=l.getRangeAt(0);if(!a.includes(`
`)){c.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:u,startOffset:d}=c,f=[],p=[];if(u.nodeType===Node.TEXT_NODE){const S=u.parentElement;if(p.push(u.nodeValue.slice(d).replaceAll(Rh,"")),S!==this.editorDiv){let A=f;for(const E of this.editorDiv.childNodes){if(E===S){A=p;continue}A.push(kn.#c(E))}}f.push(u.nodeValue.slice(0,d).replaceAll(Rh,""))}else if(u===this.editorDiv){let S=f,A=0;for(const E of this.editorDiv.childNodes)A++===d&&(S=p),S.push(kn.#c(E))}this.#t=`${f.join(`
`)}${a}${p.join(`
`)}`,this.#l();const y=new Range;let x=Math.sumPrecise(f.map(S=>S.length));for(const{firstChild:S}of this.editorDiv.childNodes)if(S.nodeType===Node.TEXT_NODE){const A=S.nodeValue.length;if(x<=A){y.setStart(S,x),y.setEnd(S,x);break}x-=A}l.removeAllRanges(),l.addRange(y)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=kn._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,i){let a=null;if(t instanceof ow){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:d,rotation:f,id:p,popupRef:y,richText:x,contentsObj:S,creationDate:A,modificationDate:E},textContent:T,textPosition:M,parent:{page:{pageNumber:k}}}=t;if(!T||T.length===0)return null;a=t={annotationType:oe.FREETEXT,color:Array.from(u),fontSize:c,value:T.join(`
`),position:M,pageIndex:k-1,rect:d.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:y,comment:S?.str||null,richText:x,creationDate:A,modificationDate:E}}const l=await super.deserialize(t,e,i);return l.#n=t.fontSize,l.color=Ut.makeHexColor(...t.color),l.#t=kn.#h(t.value),l._initialData=a,t.comment&&l.setCommentData(t),l}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=Qt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#d()});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!this.#f(i)?null:(i.id=this.annotationElementId,i)}#f(t){const{value:e,fontSize:i,color:a,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((c,u)=>c!==a[u])||t.pageIndex!==l}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:i}=e;i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,e.replaceChildren();for(const a of this.#t.split(`
`)){const l=document.createElement("div");l.append(a?document.createTextNode(a):document.createElement("br")),e.append(l)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class Gt{static PRECISION=1e-4;toSVGPath(){Oe("Abstract method `toSVGPath` must be implemented.")}get box(){Oe("Abstract getter `box` must be implemented.")}serialize(t,e){Oe("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,a,l,c){c||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)c[u]=e+t[u]*a,c[u+1]=i+t[u+1]*l;return c}static _rescaleAndSwap(t,e,i,a,l,c){c||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)c[u]=e+t[u+1]*a,c[u+1]=i+t[u]*l;return c}static _translate(t,e,i,a){a||=new Float32Array(t.length);for(let l=0,c=t.length;l<c;l+=2)a[l]=e+t[l],a[l+1]=i+t[l+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,a,l){switch(l){case 90:return[1-e/i,t/a];case 180:return[1-t/i,1-e/a];case 270:return[e/i,1-t/a];default:return[t/i,e/a]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,a,l,c){return[(t+5*i)/6,(e+5*a)/6,(5*i+l)/6,(5*a+c)/6,(i+l)/2,(a+c)/2]}}class Kr{#t;#e=[];#i;#n;#s=[];#r=new Float32Array(18);#a;#o;#c;#l;#d;#h;#f=[];static#g=8;static#m=2;static#u=Kr.#g+Kr.#m;constructor({x:t,y:e},i,a,l,c,u=0){this.#t=i,this.#h=l*a,this.#n=c,this.#r.set([NaN,NaN,NaN,NaN,t,e],6),this.#i=u,this.#l=Kr.#g*a,this.#c=Kr.#u*a,this.#d=a,this.#f.push(t,e)}isEmpty(){return isNaN(this.#r[8])}#p(){const t=this.#r.subarray(4,6),e=this.#r.subarray(16,18),[i,a,l,c]=this.#t;return[(this.#a+(t[0]-e[0])/2-i)/l,(this.#o+(t[1]-e[1])/2-a)/c,(this.#a+(e[0]-t[0])/2-i)/l,(this.#o+(e[1]-t[1])/2-a)/c]}add({x:t,y:e}){this.#a=t,this.#o=e;const[i,a,l,c]=this.#t;let[u,d,f,p]=this.#r.subarray(8,12);const y=t-f,x=e-p,S=Math.hypot(y,x);if(S<this.#c)return!1;const A=S-this.#l,E=A/S,T=E*y,M=E*x;let k=u,N=d;u=f,d=p,f+=T,p+=M,this.#f?.push(t,e);const F=-M/A,I=T/A,z=F*this.#h,H=I*this.#h;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([f+z,p+H],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([f-z,p-H],16),isNaN(this.#r[6])?(this.#s.length===0&&(this.#r.set([u+z,d+H],2),this.#s.push(NaN,NaN,NaN,NaN,(u+z-i)/l,(d+H-a)/c),this.#r.set([u-z,d-H],14),this.#e.push(NaN,NaN,NaN,NaN,(u-z-i)/l,(d-H-a)/c)),this.#r.set([k,N,u,d,f,p],6),!this.isEmpty()):(this.#r.set([k,N,u,d,f,p],6),Math.abs(Math.atan2(N-d,k-u)-Math.atan2(M,T))<Math.PI/2?([u,d,f,p]=this.#r.subarray(2,6),this.#s.push(NaN,NaN,NaN,NaN,((u+f)/2-i)/l,((d+p)/2-a)/c),[u,d,k,N]=this.#r.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((k+u)/2-i)/l,((N+d)/2-a)/c),!0):([k,N,u,d,f,p]=this.#r.subarray(0,6),this.#s.push(((k+5*u)/6-i)/l,((N+5*d)/6-a)/c,((5*u+f)/6-i)/l,((5*d+p)/6-a)/c,((u+f)/2-i)/l,((d+p)/2-a)/c),[f,p,u,d,k,N]=this.#r.subarray(12,18),this.#e.push(((k+5*u)/6-i)/l,((N+5*d)/6-a)/c,((5*u+f)/6-i)/l,((5*d+p)/6-a)/c,((u+f)/2-i)/l,((d+p)/2-a)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#s,e=this.#e;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#y();const i=[];i.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?i.push(`L${t[a+4]} ${t[a+5]}`):i.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#b(i);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?i.push(`L${e[a+4]} ${e[a+5]}`):i.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return this.#v(i),i.join(" ")}#y(){const[t,e,i,a]=this.#t,[l,c,u,d]=this.#p();return`M${(this.#r[2]-t)/i} ${(this.#r[3]-e)/a} L${(this.#r[4]-t)/i} ${(this.#r[5]-e)/a} L${l} ${c} L${u} ${d} L${(this.#r[16]-t)/i} ${(this.#r[17]-e)/a} L${(this.#r[14]-t)/i} ${(this.#r[15]-e)/a} Z`}#v(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#b(t){const[e,i,a,l]=this.#t,c=this.#r.subarray(4,6),u=this.#r.subarray(16,18),[d,f,p,y]=this.#p();t.push(`L${(c[0]-e)/a} ${(c[1]-i)/l} L${d} ${f} L${p} ${y} L${(u[0]-e)/a} ${(u[1]-i)/l}`)}newFreeDrawOutline(t,e,i,a,l,c){return new hw(t,e,i,a,l,c)}getOutlines(){const t=this.#s,e=this.#e,i=this.#r,[a,l,c,u]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let y=0,x=d.length-2;y<x;y+=2)d[y]=(this.#f[y]-a)/c,d[y+1]=(this.#f[y+1]-l)/u;if(d[d.length-2]=(this.#a-a)/c,d[d.length-1]=(this.#o-l)/u,isNaN(i[6])&&!this.isEmpty())return this.#E(d);const f=new Float32Array(this.#s.length+24+this.#e.length);let p=t.length;for(let y=0;y<p;y+=2){if(isNaN(t[y])){f[y]=f[y+1]=NaN;continue}f[y]=t[y],f[y+1]=t[y+1]}p=this.#x(f,p);for(let y=e.length-6;y>=6;y-=6)for(let x=0;x<6;x+=2){if(isNaN(e[y+x])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=e[y+x],f[p+1]=e[y+x+1],p+=2}return this.#A(f,p),this.newFreeDrawOutline(f,d,this.#t,this.#d,this.#i,this.#n)}#E(t){const e=this.#r,[i,a,l,c]=this.#t,[u,d,f,p]=this.#p(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-i)/l,(e[3]-a)/c,NaN,NaN,NaN,NaN,(e[4]-i)/l,(e[5]-a)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(e[16]-i)/l,(e[17]-a)/c,NaN,NaN,NaN,NaN,(e[14]-i)/l,(e[15]-a)/c],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#i,this.#n)}#A(t,e){const i=this.#e;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#x(t,e){const i=this.#r.subarray(4,6),a=this.#r.subarray(16,18),[l,c,u,d]=this.#t,[f,p,y,x]=this.#p();return t.set([NaN,NaN,NaN,NaN,(i[0]-l)/u,(i[1]-c)/d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,y,x,NaN,NaN,NaN,NaN,(a[0]-l)/u,(a[1]-c)/d],e),e+=24}}class hw extends Gt{#t;#e=new Float32Array(4);#i;#n;#s;#r;#a;constructor(t,e,i,a,l,c){super(),this.#a=t,this.#s=e,this.#t=i,this.#r=a,this.#i=l,this.#n=c,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(c);const[u,d,f,p]=this.#e;for(let y=0,x=t.length;y<x;y+=2)t[y]=(t[y]-u)/f,t[y+1]=(t[y+1]-d)/p;for(let y=0,x=e.length;y<x;y+=2)e[y]=(e[y]-u)/f,e[y+1]=(e[y+1]-d)/p}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let e=6,i=this.#a.length;e<i;e+=6){if(isNaN(this.#a[e])){t.push(`L${this.#a[e+4]} ${this.#a[e+5]}`);continue}t.push(`C${this.#a[e]} ${this.#a[e+1]} ${this.#a[e+2]} ${this.#a[e+3]} ${this.#a[e+4]} ${this.#a[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,a],l){const c=i-t,u=a-e;let d,f;switch(l){case 0:d=Gt._rescale(this.#a,t,a,c,-u),f=Gt._rescale(this.#s,t,a,c,-u);break;case 90:d=Gt._rescaleAndSwap(this.#a,t,e,c,u),f=Gt._rescaleAndSwap(this.#s,t,e,c,u);break;case 180:d=Gt._rescale(this.#a,i,e,-c,u),f=Gt._rescale(this.#s,i,e,-c,u);break;case 270:d=Gt._rescaleAndSwap(this.#a,i,a,-c,-u),f=Gt._rescaleAndSwap(this.#s,i,a,-c,-u);break}return{outline:Array.from(d),points:[Array.from(f)]}}#o(t){const e=this.#a;let i=e[4],a=e[5];const l=[i,a,i,a];let c=i,u=a,d=i,f=a;const p=t?Math.max:Math.min,y=new Float32Array(4);for(let S=6,A=e.length;S<A;S+=6){const E=e[S+4],T=e[S+5];isNaN(e[S])?(Ut.pointBoundingBox(E,T,l),u>T?(c=E,u=T):u===T&&(c=p(c,E)),f<T?(d=E,f=T):f===T&&(d=p(d,E))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,Ut.bezierBoundingBox(i,a,...e.slice(S,S+6),y),Ut.rectBoundingBox(y[0],y[1],y[2],y[3],l),u>y[1]?(c=y[0],u=y[1]):u===y[1]&&(c=p(c,y[0])),f<y[3]?(d=y[2],f=y[3]):f===y[3]&&(d=p(d,y[2]))),i=E,a=T}const x=this.#e;x[0]=l[0]-this.#i,x[1]=l[1]-this.#i,x[2]=l[2]-l[0]+2*this.#i,x[3]=l[3]-l[1]+2*this.#i,this.firstPoint=[c,u],this.lastPoint=[d,f]}get box(){return this.#e}newOutliner(t,e,i,a,l,c=0){return new Kr(t,e,i,a,l,c)}getNewOutline(t,e){const[i,a,l,c]=this.#e,[u,d,f,p]=this.#t,y=l*f,x=c*p,S=i*f+u,A=a*p+d,E=this.newOutliner({x:this.#s[0]*y+S,y:this.#s[1]*x+A},this.#t,this.#r,t,this.#n,e??this.#i);for(let T=2;T<this.#s.length;T+=2)E.add({x:this.#s[T]*y+S,y:this.#s[T+1]*x+A});return E.getOutlines()}}class fm{#t;#e;#i;#n=[];#s=[];constructor(t,e=0,i=0,a=!0){const l=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:E,y:T,width:M,height:k}of t){const N=Math.floor((E-e)/c)*c,F=Math.ceil((E+M+e)/c)*c,I=Math.floor((T-e)/c)*c,z=Math.ceil((T+k+e)/c)*c,H=[N,I,z,!0],ct=[F,I,z,!1];this.#n.push(H,ct),Ut.rectBoundingBox(N,I,F,z,l)}const u=l[2]-l[0]+2*i,d=l[3]-l[1]+2*i,f=l[0]-i,p=l[1]-i;let y=a?-1/0:1/0,x=1/0;const S=this.#n.at(a?-1:-2),A=[S[0],S[2]];for(const E of this.#n){const[T,M,k,N]=E;!N&&a?M<x?(x=M,y=T):M===x&&(y=Math.max(y,T)):N&&!a&&(M<x?(x=M,y=T):M===x&&(y=Math.min(y,T))),E[0]=(T-f)/u,E[1]=(M-p)/d,E[2]=(k-p)/d}this.#t=new Float32Array([f,p,u,d]),this.#e=[y,x],this.#i=A}getOutlines(){this.#n.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#r(t)}#r(t){const e=[],i=new Set;for(const c of t){const[u,d,f]=c;e.push([u,d,c],[u,f,c])}e.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=e.length;c<u;c+=2){const d=e[c][2],f=e[c+1][2];d.push(f),f.push(d),i.add(d),i.add(f)}const a=[];let l;for(;i.size>0;){const c=i.values().next().value;let[u,d,f,p,y]=c;i.delete(c);let x=u,S=d;for(l=[u,f],a.push(l);;){let A;if(i.has(p))A=p;else if(i.has(y))A=y;else break;i.delete(A),[u,d,f,p,y]=A,x!==u&&(l.push(x,S,u,S===d?d:f),x=u),S=S===d?f:d}l.push(x,S)}return new R2(a,this.#t,this.#e,this.#i)}#a(t){const e=this.#s;let i=0,a=e.length-1;for(;i<=a;){const l=i+a>>1,c=e[l][0];if(c===t)return l;c<t?i=l+1:a=l-1}return a+1}#o([,t,e]){const i=this.#a(t);this.#s.splice(i,0,[t,e])}#c([,t,e]){const i=this.#a(t);for(let a=i;a<this.#s.length;a++){const[l,c]=this.#s[a];if(l!==t)break;if(l===t&&c===e){this.#s.splice(a,1);return}}for(let a=i-1;a>=0;a--){const[l,c]=this.#s[a];if(l!==t)break;if(l===t&&c===e){this.#s.splice(a,1);return}}}#l(t){const[e,i,a]=t,l=[[e,i,a]],c=this.#a(a);for(let u=0;u<c;u++){const[d,f]=this.#s[u];for(let p=0,y=l.length;p<y;p++){const[,x,S]=l[p];if(!(f<=x||S<=d)){if(x>=d){if(S>f)l[p][1]=f;else{if(y===1)return[];l.splice(p,1),p--,y--}continue}l[p][2]=d,S>f&&l.push([e,f,S])}}}return l}}class R2 extends Gt{#t;#e;constructor(t,e,i,a){super(),this.#e=t,this.#t=e,this.firstPoint=i,this.lastPoint=a}toSVGPath(){const t=[];for(const e of this.#e){let[i,a]=e;t.push(`M${i} ${a}`);for(let l=2;l<e.length;l+=2){const c=e[l],u=e[l+1];c===i?(t.push(`V${u}`),a=u):u===a&&(t.push(`H${c}`),i=c)}t.push("Z")}return t.join(" ")}serialize([t,e,i,a],l){const c=[],u=i-t,d=a-e;for(const f of this.#e){const p=new Array(f.length);for(let y=0;y<f.length;y+=2)p[y]=t+f[y]*u,p[y+1]=a-f[y+1]*d;c.push(p)}return c}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class pm extends Kr{newFreeDrawOutline(t,e,i,a,l,c){return new M2(t,e,i,a,l,c)}}class M2 extends hw{newOutliner(t,e,i,a,l,c=0){return new pm(t,e,i,a,l,c)}}class fn extends Qt{#t=null;#e=0;#i;#n=null;#s=null;#r=null;#a=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#g=null;#m=null;#u="";#p;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=oe.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=fn.prototype;return ie(this,"_keyboardManager",new eu([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||fn._defaultColor,this.#p=t.thickness||fn._defaultThickness,this.opacity=t.opacity||fn._defaultOpacity,this.#i=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#b(t),this.#w()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#w(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new fm(this.#i,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new fm(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#r=e.getOutlines();const{firstPoint:i}=this.#l;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height];const{lastPoint:a}=this.#r;this.#g=[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#l=t;const a=1.5;if(this.#r=t.getNewOutline(this.#p/2+a,.0025),e>=0)this.#d=e,this.#n=i,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:fn.#_(this.#l.box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:fn.#_(this.#r.box,y),path:{d:this.#r.toSVGPath()}})}const[l,c,u,d]=t.box;switch(this.rotation){case 0:this.x=l,this.y=c,this.width=u,this.height=d;break;case 90:{const[y,x]=this.parentDimensions;this.x=c,this.y=1-l,this.width=u*x/y,this.height=d*y/x;break}case 180:this.x=1-l,this.y=1-c,this.width=u,this.height=d;break;case 270:{const[y,x]=this.parentDimensions;this.x=1-c,this.y=l,this.width=u*x/y,this.height=d*y/x;break}}const{firstPoint:f}=t;this.#f=[(f[0]-l)/u,(f[1]-c)/d];const{lastPoint:p}=this.#r;this.#g=[(p[0]-l)/u,(p[1]-c)/d]}static initialize(t,e){Qt.initialize(t,e),fn._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case we.HIGHLIGHT_COLOR:fn._defaultColor=e;break;case we.HIGHLIGHT_THICKNESS:fn._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case we.HIGHLIGHT_COLOR:this.#E(e);break;case we.HIGHLIGHT_THICKNESS:this.#A(e);break}}static get defaultPropertiesToUpdate(){return[[we.HIGHLIGHT_COLOR,fn._defaultColor],[we.HIGHLIGHT_THICKNESS,fn._defaultThickness]]}get propertiesToUpdate(){return[[we.HIGHLIGHT_COLOR,this.color||fn._defaultColor],[we.HIGHLIGHT_THICKNESS,this.#p||fn._defaultThickness],[we.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#s?.updateColor(this.color),super.onUpdatedColor()}#E(t){const e=(l,c)=>{this.color=l,this.opacity=c,this.onUpdatedColor()},i=this.color,a=this.opacity;this.addCommands({cmd:e.bind(this,t,fn._defaultOpacity),undo:e.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:we.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#A(t){const e=this.#p,i=a=>{this.#p=a,this.#x(a)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:we.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#s=new aw({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#M())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#w(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#C():t&&(this.#w(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#x(t){this.#h&&(this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#w(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#_([t,e,i,a],l){switch(l){case 90:return[1-e-a,t,a,i];case 180:return[1-t-i,1-e-a,i,a];case 270:return[e,1-t-i,a,i]}return[t,e,i,a]}rotate(t){const{drawLayer:e}=this.parent;let i;this.#h?(t=(t-this.rotation+360)%360,i=fn.#_(this.#l.box,t)):i=fn.#_([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:i,root:{"data-main-rotation":t}}),e.updateProperties(this.#m,{bbox:fn.#_(this.#r.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(),Bx(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#D(t){fn._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#a,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#h||this.#R(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!t}}))}#M(){return this.#h?this.rotation:0}#B(){if(this.#h)return null;const[t,e]=this.pageDimensions,[i,a]=this.pageTranslation,l=this.#i,c=new Float32Array(l.length*8);let u=0;for(const{x:d,y:f,width:p,height:y}of l){const x=d*t+i,S=(1-f)*e+a;c[u]=c[u+4]=x,c[u+1]=c[u+3]=S,c[u+2]=c[u+6]=x+p*t,c[u+5]=c[u+7]=S-y*e,u+=8}return c}#O(t){return this.#l.serialize(t,this.#M())}static startHighlighting(t,e,{target:i,x:a,y:l}){const{x:c,y:u,width:d,height:f}=i.getBoundingClientRect(),p=new AbortController,y=t.combinedSignal(p),x=S=>{p.abort(),this.#F(t,S)};window.addEventListener("blur",x,{signal:y}),window.addEventListener("pointerup",x,{signal:y}),window.addEventListener("pointerdown",rn,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",$i,{signal:y}),i.addEventListener("pointermove",this.#L.bind(this,t),{signal:y}),this._freeHighlight=new pm({x:a,y:l},[c,u,d,f],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#L(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,i){let a=null;if(t instanceof cw){const{data:{quadPoints:A,rect:E,rotation:T,id:M,color:k,opacity:N,popupRef:F,richText:I,contentsObj:z,creationDate:H,modificationDate:ct},parent:{page:{pageNumber:ut}}}=t;a=t={annotationType:oe.HIGHLIGHT,color:Array.from(k),opacity:N,quadPoints:A,boxes:null,pageIndex:ut-1,rect:E.slice(0),rotation:T,annotationElementId:M,id:M,deleted:!1,popupRef:F,richText:I,comment:z?.str||null,creationDate:H,modificationDate:ct}}else if(t instanceof Ym){const{data:{inkLists:A,rect:E,rotation:T,id:M,color:k,borderStyle:{rawWidth:N},popupRef:F,richText:I,contentsObj:z,creationDate:H,modificationDate:ct},parent:{page:{pageNumber:ut}}}=t;a=t={annotationType:oe.HIGHLIGHT,color:Array.from(k),thickness:N,inkLists:A,boxes:null,pageIndex:ut-1,rect:E.slice(0),rotation:T,annotationElementId:M,id:M,deleted:!1,popupRef:F,richText:I,comment:z?.str||null,creationDate:H,modificationDate:ct}}const{color:l,quadPoints:c,inkLists:u,opacity:d}=t,f=await super.deserialize(t,e,i);f.color=Ut.makeHexColor(...l),f.opacity=d||1,u&&(f.#p=t.thickness),f._initialData=a,t.comment&&f.setCommentData(t);const[p,y]=f.pageDimensions,[x,S]=f.pageTranslation;if(c){const A=f.#i=[];for(let E=0;E<c.length;E+=8)A.push({x:(c[E]-x)/p,y:1-(c[E+1]-S)/y,width:(c[E+2]-c[E])/p,height:(c[E+1]-c[E+5])/y});f.#v(),f.#w(),f.rotate(f.rotation)}else if(u){f.#h=!0;const A=u[0],E={x:A[0]-x,y:y-(A[1]-S)},T=new pm(E,[0,0,p,y],1,f.#p/2,!0,.001);for(let N=0,F=A.length;N<F;N+=2)E.x=A[N]-x,E.y=y-(A[N+1]-S),T.add(E);const{id:M,clipPathId:k}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);f.#b({highlightOutlines:T.getOutlines(),highlightId:M,clipPathId:k}),f.#w(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=Qt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:e,opacity:this.opacity,thickness:this.#p,quadPoints:this.#B(),outlines:this.#O(i.rect)}),this.addComment(i),this.annotationElementId&&!this.#P(i)?null:(i.id=this.annotationElementId,i)}#P(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((i,a)=>i!==e[a])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class dw{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Oe("Not implemented")}}class Te extends Qt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#s=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#r(t),this.#c())}#r({drawOutlines:t,drawId:e,drawingOptions:i}){this.#t=t,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#a(t,this.parent),this.#h(t.box)}#a(t,e){const{id:i}=e.drawLayer.draw(Te._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,e){const i=new Set(Object.keys(t));for(const[a,l]of Object.entries(e))i.has(a)?Object.assign(t[a],l):t[a]=l;return t}static getDefaultDrawingOptions(t){Oe("Not implemented")}static get typesMap(){Oe("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,e),this._currentParent&&(Te.#i.updateProperty(i,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)t.push([i,e[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[i,a]of this.constructor.typesMap)t.push([i,e[a]]);return t}_updateProperty(t,e,i){const a=this._drawingOptions,l=a[e],c=u=>{a.updateProperty(e,u);const d=this.#t.updateProperty(e,u);d&&this.#h(d),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:c.bind(this,i),undo:c.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Te._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#d()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Te._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#d()),{bbox:this.#f()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Te._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#d(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#o()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#a(this.#t,t)}}#l([t,e,i,a]){const{parentDimensions:[l,c],rotation:u}=this;switch(u){case 90:return[e,1-t,i*(c/l),a*(l/c)];case 180:return[1-t,1-e,i,a];case 270:return[1-e,t,i*(c/l),a*(l/c)];default:return[t,e,i,a]}}#d(){const{x:t,y:e,width:i,height:a,parentDimensions:[l,c],rotation:u}=this;switch(u){case 90:return[1-e,t,i*(l/c),a*(c/l)];case 180:return[1-t,1-e,i,a];case 270:return[e,1-t,i*(l/c),a*(c/l)];default:return[t,e,i,a]}}#h(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:e,width:i,height:a,rotation:l,parentRotation:c,parentDimensions:[u,d]}=this;switch((l*4+c)/90){case 1:return[1-e-a,t,a,i];case 2:return[1-t-i,1-e-a,i,a];case 3:return[e,1-t-i,a,i];case 4:return[t,e-i*(u/d),a*(d/u),i*(u/d)];case 5:return[1-e,t,i*(u/d),a*(d/u)];case 6:return[1-t-a*(d/u),1-e,a*(d/u),i*(u/d)];case 7:return[e-i*(u/d),1-t-a*(d/u),i*(u/d),a*(d/u)];case 8:return[t-i,e-a,i,a];case 9:return[1-e,t-i,a,i];case 10:return[1-t,1-e,i,a];case 11:return[e-a,1-t,a,i];case 12:return[t-a*(d/u),e,a*(d/u),i*(u/d)];case 13:return[1-e-i*(u/d),t-a*(d/u),i*(u/d),a*(d/u)];case 14:return[1-t,1-e-i*(u/d),a*(d/u),i*(u/d)];case 15:return[e,1-t,i*(u/d),a*(d/u)];default:return[t,e,i,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Te._mergeSVGProperties({bbox:this.#f()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");return i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),i}static createDrawerInstance(t,e,i,a,l){Oe("Not implemented")}static startDrawing(t,e,i,a){const{target:l,offsetX:c,offsetY:u,pointerId:d,pointerType:f}=a;if(Me.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:p}}=t,{width:y,height:x}=l.getBoundingClientRect(),S=Te.#n=new AbortController,A=t.combinedSignal(S);if(Me.setPointer(f,d),window.addEventListener("pointerup",E=>{Me.isSamePointerIdOrRemove(E.pointerId)&&this._endDraw(E)},{signal:A}),window.addEventListener("pointercancel",E=>{Me.isSamePointerIdOrRemove(E.pointerId)&&this._currentParent.endDrawingSession()},{signal:A}),window.addEventListener("pointerdown",E=>{Me.isSamePointerType(E.pointerType)&&(Me.initializeAndAddPointerId(E.pointerId),Te.#i.isCancellable()&&(Te.#i.removeLastElement(),Te.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",$i,{signal:A}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),l.addEventListener("touchmove",E=>{Me.isSameTimeStamp(E.timeStamp)&&rn(E)},{signal:A}),t.toggleDrawing(),e._editorUndoBar?.hide(),Te.#i){t.drawLayer.updateProperties(this._currentDrawId,Te.#i.startNew(c,u,y,x,p));return}e.updateUIForDefaultProperties(this),Te.#i=this.createDrawerInstance(c,u,y,x,p),Te.#s=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(Te.#s.toSVGProperties(),Te.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(Me.isSameTimeStamp(t.timeStamp),!Te.#i)return;const{offsetX:e,offsetY:i,pointerId:a}=t;if(Me.isSamePointerId(a)){if(Me.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Te.#i.add(e,i)),Me.setTimeStamp(t.timeStamp),rn(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,Te.#i=null,Te.#s=null,Me.clearTimeStamp()),Te.#n&&(Te.#n.abort(),Te.#n=null,Me.clearPointerIds())}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,Te.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=Te.#i,a=this._currentDrawId,l=i.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(a,i.setLastElement(l))},undo:()=>{e.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:we.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(we.DRAW_STEP),!Te.#i.isEmpty()){const{pageDimensions:[i,a],scale:l}=e,c=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Te.#i.getOutlines(i*l,a*l,l,this._INNER_MARGIN),drawingOptions:Te.#s,mustBeCommitted:!t});return this._cleanup(!0),c}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,i,a,l,c){Oe("Not implemented")}static async deserialize(t,e,i){const{rawDims:{pageWidth:a,pageHeight:l,pageX:c,pageY:u}}=e.viewport,d=this.deserializeDraw(c,u,a,l,this._INNER_MARGIN,t),f=await super.deserialize(t,e,i);return f.createDrawingOptions(t),f.#r({drawOutlines:d}),f.#c(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[e,i]=this.pageTranslation,[a,l]=this.pageDimensions;return this.#t.serialize([e,i,a,l],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class D2{#t=new Float64Array(6);#e;#i;#n;#s;#r;#a="";#o=0;#c=new nu;#l;#d;constructor(t,e,i,a,l,c){this.#l=i,this.#d=a,this.#n=l,this.#s=c,[t,e]=this.#h(t,e);const u=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#r=[t,e],this.#i=[{line:u,points:this.#r}],this.#t.set(u,0)}updateProperty(t,e){t==="stroke-width"&&(this.#s=e)}#h(t,e){return Gt._normalizePoint(t,e,this.#l,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#r.length<=10}add(t,e){[t,e]=this.#h(t,e);const[i,a,l,c]=this.#t.subarray(2,6),u=t-l,d=e-c;return Math.hypot(this.#l*u,this.#d*d)<=2?null:(this.#r.push(t,e),isNaN(i)?(this.#t.set([l,c,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,a,l,c,t,e],0),this.#e.push(...Gt.createBezierPoints(i,a,l,c,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,a,l){this.#l=i,this.#d=a,this.#n=l,[t,e]=this.#h(t,e);const c=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#r=[t,e];const u=this.#i.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#i.push({line:c,points:this.#r}),this.#t.set(c,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#r=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#a="";for(let t=0,e=this.#i.length;t<e;t++){const{line:i,points:a}=this.#i[t];this.#e=i,this.#r=a,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const t=Gt.svgRound(this.#e[4]),e=Gt.svgRound(this.#e[5]);if(this.#r.length===2)return this.#a=`${this.#a} M ${t} ${e} Z`,this.#a;if(this.#r.length<=6){const a=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,a)} M ${t} ${e}`,this.#o=6}if(this.#r.length===4){const a=Gt.svgRound(this.#e[10]),l=Gt.svgRound(this.#e[11]);return this.#a=`${this.#a} L ${a} ${l}`,this.#o=12,this.#a}const i=[];this.#o===0&&(i.push(`M ${t} ${e}`),this.#o=6);for(let a=this.#o,l=this.#e.length;a<l;a+=6){const[c,u,d,f,p,y]=this.#e.slice(a,a+6).map(Gt.svgRound);i.push(`C${c} ${u} ${d} ${f} ${p} ${y}`)}return this.#a+=i.join(" "),this.#o=this.#e.length,this.#a}getOutlines(t,e,i,a){const l=this.#i.at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),this.#c.build(this.#i,t,e,i,this.#n,this.#s,a),this.#t=null,this.#e=null,this.#i=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class nu extends Gt{#t;#e=0;#i;#n;#s;#r;#a;#o;#c;build(t,e,i,a,l,c,u){this.#s=e,this.#r=i,this.#a=a,this.#o=l,this.#c=c,this.#i=u??0,this.#n=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${Gt.svgRound(e[4])} ${Gt.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${Gt.svgRound(e[10])} ${Gt.svgRound(e[11])}`);continue}for(let i=6,a=e.length;i<a;i+=6){const[l,c,u,d,f,p]=e.subarray(i,i+6).map(Gt.svgRound);t.push(`C${l} ${c} ${u} ${d} ${f} ${p}`)}}return t.join("")}serialize([t,e,i,a],l){const c=[],u=[],[d,f,p,y]=this.#d();let x,S,A,E,T,M,k,N,F;switch(this.#o){case 0:F=Gt._rescale,x=t,S=e+a,A=i,E=-a,T=t+d*i,M=e+(1-f-y)*a,k=t+(d+p)*i,N=e+(1-f)*a;break;case 90:F=Gt._rescaleAndSwap,x=t,S=e,A=i,E=a,T=t+f*i,M=e+d*a,k=t+(f+y)*i,N=e+(d+p)*a;break;case 180:F=Gt._rescale,x=t+i,S=e,A=-i,E=a,T=t+(1-d-p)*i,M=e+f*a,k=t+(1-d)*i,N=e+(f+y)*a;break;case 270:F=Gt._rescaleAndSwap,x=t+i,S=e+a,A=-i,E=-a,T=t+(1-f-y)*i,M=e+(1-d-p)*a,k=t+(1-f)*i,N=e+(1-d)*a;break}for(const{line:I,points:z}of this.#n)c.push(F(I,x,S,A,E,l?new Array(I.length):null)),u.push(F(z,x,S,A,E,l?new Array(z.length):null));return{lines:c,points:u,rect:[T,M,k,N]}}static deserialize(t,e,i,a,l,{paths:{lines:c,points:u},rotation:d,thickness:f}){const p=[];let y,x,S,A,E;switch(d){case 0:E=Gt._rescale,y=-t/i,x=e/a+1,S=1/i,A=-1/a;break;case 90:E=Gt._rescaleAndSwap,y=-e/a,x=-t/i,S=1/a,A=1/i;break;case 180:E=Gt._rescale,y=t/i+1,x=-e/a,S=-1/i,A=1/a;break;case 270:E=Gt._rescaleAndSwap,y=e/a+1,x=t/i+1,S=-1/a,A=-1/i;break}if(!c){c=[];for(const M of u){const k=M.length;if(k===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1]]));continue}if(k===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1],NaN,NaN,NaN,NaN,M[2],M[3]]));continue}const N=new Float32Array(3*(k-2));c.push(N);let[F,I,z,H]=M.subarray(0,4);N.set([NaN,NaN,NaN,NaN,F,I],0);for(let ct=4;ct<k;ct+=2){const ut=M[ct],At=M[ct+1];N.set(Gt.createBezierPoints(F,I,z,H,ut,At),(ct-2)*3),[F,I,z,H]=[z,H,ut,At]}}}for(let M=0,k=c.length;M<k;M++)p.push({line:E(c[M].map(N=>N??NaN),y,x,S,A),points:E(u[M].map(N=>N??NaN),y,x,S,A)});const T=new this.prototype.constructor;return T.build(p,i,a,1,d,f,l),T}#l(t=this.#c){const e=this.#i+t/2*this.#a;return this.#o%180===0?[e/this.#s,e/this.#r]:[e/this.#r,e/this.#s]}#d(){const[t,e,i,a]=this.#t,[l,c]=this.#l(0);return[t+l,e+c,i-2*l,a-2*c]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#n){if(a.length<=12){for(let u=4,d=a.length;u<d;u+=6)Ut.pointBoundingBox(a[u],a[u+1],t);continue}let l=a[4],c=a[5];for(let u=6,d=a.length;u<d;u+=6){const[f,p,y,x,S,A]=a.subarray(u,u+6);Ut.bezierBoundingBox(l,c,f,p,y,x,S,A,t),l=S,c=A}}const[e,i]=this.#l();t[0]=qn(t[0]-e,0,1),t[1]=qn(t[1]-i,0,1),t[2]=qn(t[2]+e,0,1),t[3]=qn(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,i]=this.#l();this.#c=t;const[a,l]=this.#l(),[c,u]=[a-e,l-i],d=this.#t;return d[0]-=c,d[1]-=u,d[2]+=2*c,d[3]+=2*u,d}updateParentDimensions([t,e],i){const[a,l]=this.#l();this.#s=t,this.#r=e,this.#a=i;const[c,u]=this.#l(),d=c-a,f=u-l,p=this.#t;return p[0]-=d,p[1]-=f,p[2]+=2*d,p[3]+=2*f,p}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(Gt.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Gt.svgRound(t)} ${Gt.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let i=0,a=0,l=0,c=0,u=0,d=0;switch(this.#e){case 90:a=e/t,l=-t/e,u=t;break;case 180:i=-1,c=-1,u=t,d=e;break;case 270:a=-e/t,l=t/e,d=e;break;default:return""}return`matrix(${i} ${a} ${l} ${c} ${Gt.svgRound(u)} ${Gt.svgRound(d)})`}getPathResizingSVGProperties([t,e,i,a]){const[l,c]=this.#l(),[u,d,f,p]=this.#t;if(Math.abs(f-l)<=Gt.PRECISION||Math.abs(p-c)<=Gt.PRECISION){const E=t+i/2-(u+f/2),T=e+a/2-(d+p/2);return{path:{"transform-origin":`${Gt.svgRound(t)} ${Gt.svgRound(e)}`,transform:`${this.rotationTransform} translate(${E} ${T})`}}}const y=(i-2*l)/(f-2*l),x=(a-2*c)/(p-2*c),S=f/i,A=p/a;return{path:{"transform-origin":`${Gt.svgRound(u)} ${Gt.svgRound(d)}`,transform:`${this.rotationTransform} scale(${S} ${A}) translate(${Gt.svgRound(l)} ${Gt.svgRound(c)}) scale(${y} ${x}) translate(${Gt.svgRound(-l)} ${Gt.svgRound(-c)})`}}}getPathResizedSVGProperties([t,e,i,a]){const[l,c]=this.#l(),u=this.#t,[d,f,p,y]=u;if(u[0]=t,u[1]=e,u[2]=i,u[3]=a,Math.abs(p-l)<=Gt.PRECISION||Math.abs(y-c)<=Gt.PRECISION){const T=t+i/2-(d+p/2),M=e+a/2-(f+y/2);for(const{line:k,points:N}of this.#n)Gt._translate(k,T,M,k),Gt._translate(N,T,M,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Gt.svgRound(t)} ${Gt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const x=(i-2*l)/(p-2*l),S=(a-2*c)/(y-2*c),A=-x*(d+l)+t+l,E=-S*(f+c)+e+c;if(x!==1||S!==1||A!==0||E!==0)for(const{line:T,points:M}of this.#n)Gt._rescale(T,A,E,x,S,T),Gt._rescale(M,A,E,x,S,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Gt.svgRound(t)} ${Gt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){const[a,l]=i,c=this.#t,u=t-c[0],d=e-c[1];if(this.#s===a&&this.#r===l)for(const{line:f,points:p}of this.#n)Gt._translate(f,u,d,f),Gt._translate(p,u,d,p);else{const f=this.#s/a,p=this.#r/l;this.#s=a,this.#r=l;for(const{line:y,points:x}of this.#n)Gt._rescale(y,u,d,f,p,y),Gt._rescale(x,u,d,f,p,x);c[2]*=f,c[3]*=p}return c[0]=t,c[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Gt.svgRound(t)} ${Gt.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Gt.svgRound(t[0])} ${Gt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class wd extends dw{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Qt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new wd(this._viewParameters);return t.updateAll(this),t}}class Wm extends Te{static _type="ink";static _editorType=oe.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){Qt.initialize(t,e),this._defaultDrawingOptions=new wd(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return ie(this,"typesMap",new Map([[we.INK_THICKNESS,"stroke-width"],[we.INK_COLOR,"stroke"],[we.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,a,l){return new D2(t,e,i,a,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,a,l,c){return nu.deserialize(t,e,i,a,l,c)}static async deserialize(t,e,i){let a=null;if(t instanceof Ym){const{data:{inkLists:c,rect:u,rotation:d,id:f,color:p,opacity:y,borderStyle:{rawWidth:x},popupRef:S,richText:A,contentsObj:E,creationDate:T,modificationDate:M},parent:{page:{pageNumber:k}}}=t;a=t={annotationType:oe.INK,color:Array.from(p),thickness:x,opacity:y,paths:{points:c},boxes:null,pageIndex:k-1,rect:u.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:S,richText:A,comment:E?.str||null,creationDate:T,modificationDate:M}}const l=await super.deserialize(t,e,i);return l._initialData=a,t.comment&&l.setCommentData(t),l}get toolbarButtons(){return this._colorPicker||=new Gc(this),[["colorPicker",this._colorPicker]]}get colorType(){return we.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:i}){this._drawingOptions=Wm.getDefaultDrawingOptions({stroke:Ut.makeHexColor(...t),"stroke-width":e,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":l,"stroke-width":c}}=this,u=Object.assign(super.serialize(t),{color:Qt._colorManager.convert(a),opacity:l,thickness:c,paths:{lines:e,points:i}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:e,thickness:i,opacity:a,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((c,u)=>c!==e[u])||t.thickness!==i||t.opacity!==a||t.pageIndex!==l}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class mm extends nu{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Mh=8,Nc=3;class al{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,i,a){return i-=t,a-=e,i===0?a>0?0:4:i===1?a+6:2-a}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,i,a,l,c,u){const d=this.#e(i,a,l,c);for(let f=0;f<8;f++){const p=(-f+d-u+16)%8,y=this.#i[2*p],x=this.#i[2*p+1];if(t[(i+y)*e+(a+x)]!==0)return p}return-1}static#s(t,e,i,a,l,c,u){const d=this.#e(i,a,l,c);for(let f=0;f<8;f++){const p=(f+d+u+16)%8,y=this.#i[2*p],x=this.#i[2*p+1];if(t[(i+y)*e+(a+x)]!==0)return p}return-1}static#r(t,e,i,a){const l=t.length,c=new Int32Array(l);for(let p=0;p<l;p++)c[p]=t[p]<=a?1:0;for(let p=1;p<i-1;p++)c[p*e]=c[p*e+e-1]=0;for(let p=0;p<e;p++)c[p]=c[e*i-1-p]=0;let u=1,d;const f=[];for(let p=1;p<i-1;p++){d=1;for(let y=1;y<e-1;y++){const x=p*e+y,S=c[x];if(S===0)continue;let A=p,E=y;if(S===1&&c[x-1]===0)u+=1,E-=1;else if(S>=1&&c[x+1]===0)u+=1,E+=1,S>1&&(d=S);else{S!==1&&(d=Math.abs(S));continue}const T=[y,p],M=E===y+1,k={isHole:M,points:T,id:u,parent:0};f.push(k);let N;for(const Ct of f)if(Ct.id===d){N=Ct;break}N?N.isHole?k.parent=M?N.parent:d:k.parent=M?d:N.parent:k.parent=M?d:0;const F=this.#n(c,e,p,y,A,E,0);if(F===-1){c[x]=-u,c[x]!==1&&(d=Math.abs(c[x]));continue}let I=this.#i[2*F],z=this.#i[2*F+1];const H=p+I,ct=y+z;A=H,E=ct;let ut=p,At=y;for(;;){const Ct=this.#s(c,e,ut,At,A,E,1);I=this.#i[2*Ct],z=this.#i[2*Ct+1];const Rt=ut+I,Vt=At+z;T.push(Vt,Rt);const xt=ut*e+At;if(c[xt+1]===0?c[xt]=-u:c[xt]===1&&(c[xt]=u),Rt===p&&Vt===y&&ut===H&&At===ct){c[x]!==1&&(d=Math.abs(c[x]));break}else A=ut,E=At,ut=Rt,At=Vt}}}return f}static#a(t,e,i,a){if(i-e<=4){for(let H=e;H<i-2;H+=2)a.push(t[H],t[H+1]);return}const l=t[e],c=t[e+1],u=t[i-4]-l,d=t[i-3]-c,f=Math.hypot(u,d),p=u/f,y=d/f,x=p*c-y*l,S=d/u,A=1/f,E=Math.atan(S),T=Math.cos(E),M=Math.sin(E),k=A*(Math.abs(T)+Math.abs(M)),N=A*(1-k+k**2),F=Math.max(Math.atan(Math.abs(M+T)*N),Math.atan(Math.abs(M-T)*N));let I=0,z=e;for(let H=e+2;H<i-2;H+=2){const ct=Math.abs(x-p*t[H+1]+y*t[H]);ct>I&&(z=H,I=ct)}I>(f*F)**2?(this.#a(t,e,z+2,a),this.#a(t,z,i,a)):a.push(l,c)}static#o(t){const e=[],i=t.length;return this.#a(t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e}static#c(t,e,i,a,l,c){const u=new Float32Array(c**2),d=-2*a**2,f=c>>1;for(let E=0;E<c;E++){const T=(E-f)**2;for(let M=0;M<c;M++)u[E*c+M]=Math.exp((T+(M-f)**2)/d)}const p=new Float32Array(256),y=-2*l**2;for(let E=0;E<256;E++)p[E]=Math.exp(E**2/y);const x=t.length,S=new Uint8Array(x),A=new Uint32Array(256);for(let E=0;E<i;E++)for(let T=0;T<e;T++){const M=E*e+T,k=t[M];let N=0,F=0;for(let z=0;z<c;z++){const H=E+z-f;if(!(H<0||H>=i))for(let ct=0;ct<c;ct++){const ut=T+ct-f;if(ut<0||ut>=e)continue;const At=t[H*e+ut],Ct=u[z*c+ct]*p[Math.abs(At-k)];N+=At*Ct,F+=Ct}}const I=S[M]=Math.round(N/F);A[I]++}return[S,A]}static#l(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e}static#d(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let a=-1/0,l=1/0;for(let u=0,d=i.length;u<d;u++){const f=i[u]=t[u<<2];a=Math.max(a,f),l=Math.min(l,f)}const c=255/(a-l);for(let u=0,d=i.length;u<d;u++)i[u]=(i[u]-l)*c;return i}static#h(t){let e,i=-1/0,a=-1/0;const l=t.findIndex(d=>d!==0);let c=l,u=l;for(e=l;e<256;e++){const d=t[e];d>i&&(e-c>a&&(a=e-c,u=e-1),i=d,c=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:i,height:a}=t,{maxDim:l}=this.#t;let c=i,u=a;if(i>l||a>l){let x=i,S=a,A=Math.log2(Math.max(i,a)/l);const E=Math.floor(A);A=A===E?E-1:E;for(let M=0;M<A;M++){c=Math.ceil(x/2),u=Math.ceil(S/2);const k=new OffscreenCanvas(c,u);k.getContext("2d").drawImage(t,0,0,x,S,0,0,c,u),x=c,S=u,t!==e&&t.close(),t=k.transferToImageBitmap()}const T=Math.min(l/c,l/u);c=Math.round(c*T),u=Math.round(u*T)}const f=new OffscreenCanvas(c,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,c,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,c,u);const p=f.getImageData(0,0,c,u).data;return[this.#d(p),c,u]}static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:a},l,c,u,d){let f=new OffscreenCanvas(1,1),p=f.getContext("2d",{alpha:!1});const y=200,x=p.font=`${i} ${a} ${y}px ${e}`,{actualBoundingBoxLeft:S,actualBoundingBoxRight:A,actualBoundingBoxAscent:E,actualBoundingBoxDescent:T,fontBoundingBoxAscent:M,fontBoundingBoxDescent:k,width:N}=p.measureText(t),F=1.5,I=Math.ceil(Math.max(Math.abs(S)+Math.abs(A)||0,N)*F),z=Math.ceil(Math.max(Math.abs(E)+Math.abs(T)||y,Math.abs(M)+Math.abs(k)||y)*F);f=new OffscreenCanvas(I,z),p=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=x,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,I,z),p.fillStyle="black",p.fillText(t,I*(F-1)/2,z*(3-F)/2);const H=this.#d(p.getImageData(0,0,I,z).data),ct=this.#l(H),ut=this.#h(ct),At=this.#r(H,I,z,ut);return this.processDrawnLines({lines:{curves:At,width:I,height:z},pageWidth:l,pageHeight:c,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,i,a,l){const[c,u,d]=this.#f(t),[f,p]=this.#c(c,u,d,Math.hypot(u,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#h(p),x=this.#r(f,u,d,y);return this.processDrawnLines({lines:{curves:x,width:u,height:d},pageWidth:e,pageHeight:i,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:a,innerMargin:l,mustSmooth:c,areContours:u}){a%180!==0&&([e,i]=[i,e]);const{curves:d,width:f,height:p}=t,y=t.thickness??0,x=[],S=Math.min(e/f,i/p),A=S/e,E=S/i,T=[];for(const{points:k}of d){const N=c?this.#o(k):k;if(!N)continue;T.push(N);const F=N.length,I=new Float32Array(F),z=new Float32Array(3*(F===2?2:F-2));if(x.push({line:z,points:I}),F===2){I[0]=N[0]*A,I[1]=N[1]*E,z.set([NaN,NaN,NaN,NaN,I[0],I[1]],0);continue}let[H,ct,ut,At]=N;H*=A,ct*=E,ut*=A,At*=E,I.set([H,ct,ut,At],0),z.set([NaN,NaN,NaN,NaN,H,ct],0);for(let Ct=4;Ct<F;Ct+=2){const Rt=I[Ct]=N[Ct]*A,Vt=I[Ct+1]=N[Ct+1]*E;z.set(Gt.createBezierPoints(H,ct,ut,At,Rt,Vt),(Ct-2)*3),[H,ct,ut,At]=[ut,At,Rt,Vt]}}if(x.length===0)return null;const M=u?new mm:new nu;return M.build(x,e,i,1,a,u?0:y,l),{outline:M,newCurves:T,areContours:u,thickness:y,width:f,height:p}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:a,height:l}){let c=1/0,u=-1/0,d=0;for(const N of t){d+=N.length;for(let F=2,I=N.length;F<I;F++){const z=N[F]-N[F-2];c=Math.min(c,z),u=Math.max(u,z)}}let f;c>=-128&&u<=127?f=Int8Array:c>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const p=t.length,y=Mh+Nc*p,x=new Uint32Array(y);let S=0;x[S++]=y*Uint32Array.BYTES_PER_ELEMENT+(d-2*p)*f.BYTES_PER_ELEMENT,x[S++]=0,x[S++]=a,x[S++]=l,x[S++]=e?0:1,x[S++]=Math.max(0,Math.floor(i??0)),x[S++]=p,x[S++]=f.BYTES_PER_ELEMENT;for(const N of t)x[S++]=N.length-2,x[S++]=N[0],x[S++]=N[1];const A=new CompressionStream("deflate-raw"),E=A.writable.getWriter();await E.ready,E.write(x);const T=f.prototype.constructor;for(const N of t){const F=new T(N.length-2);for(let I=2,z=N.length;I<z;I++)F[I-2]=N[I]-N[I-2];E.write(F)}E.close();const M=await new Response(A.readable).arrayBuffer();return new Uint8Array(M).toBase64()}static async decompressSignature(t){try{const e=Uint8Array.fromBase64(t),{readable:i,writable:a}=new DecompressionStream("deflate-raw"),l=a.getWriter();await l.ready,l.write(e).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let c=null,u=0;for await(const N of i)c||=new Uint8Array(new Uint32Array(N.buffer,0,4)[0]),c.set(N,u),u+=N.length;const d=new Uint32Array(c.buffer,0,c.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const p=d[2],y=d[3],x=d[4]===0,S=d[5],A=d[6],E=d[7],T=[],M=(Mh+Nc*A)*Uint32Array.BYTES_PER_ELEMENT;let k;switch(E){case Int8Array.BYTES_PER_ELEMENT:k=new Int8Array(c.buffer,M);break;case Int16Array.BYTES_PER_ELEMENT:k=new Int16Array(c.buffer,M);break;case Int32Array.BYTES_PER_ELEMENT:k=new Int32Array(c.buffer,M);break}u=0;for(let N=0;N<A;N++){const F=d[Nc*N+Mh],I=new Float32Array(F+2);T.push(I);for(let z=0;z<Nc-1;z++)I[z]=d[Nc*N+Mh+z+1];for(let z=0;z<F;z++)I[z+2]=I[z]+k[u++]}return{areContours:x,thickness:S,outlines:T,width:p,height:y}}catch(e){return ne(`decompressSignature: ${e}`),null}}}class Zm extends dw{constructor(){super(),super.updateProperties({fill:Qt._defaultLineColor,"stroke-width":0})}clone(){const t=new Zm;return t.updateAll(this),t}}class Jm extends wd{constructor(t){super(t),super.updateProperties({stroke:Qt._defaultLineColor,"stroke-width":1})}clone(){const t=new Jm(this._viewParameters);return t.updateAll(this),t}}class Rs extends Te{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=oe.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){Qt.initialize(t,e),this._defaultDrawingOptions=new Zm,this._defaultDrawnSignatureOptions=new Jm(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return ie(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:a,mustSmooth:l,areContours:c,description:u,uuid:d,heightInPage:f}=this.#i,{rawDims:{pageWidth:p,pageHeight:y},rotation:x}=this.parent.viewport,S=al.processDrawnLines({lines:a,pageWidth:p,pageHeight:y,rotation:x,innerMargin:Rs._INNER_MARGIN,mustSmooth:l,areContours:c});this.addSignature(S,f,u,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:i,width:a,height:l}=this.#i,c=Math.max(a,l),u=al.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:i,width:a,height:l},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,i,a){const{x:l,y:c}=this,{outline:u}=this.#i=t;this.#t=u instanceof mm,this.description=i;let d;this.#t?d=Rs.getDefaultDrawingOptions():(d=Rs._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:d});const[,f]=this.pageDimensions;let p=e/f;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(),this.x=l,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:a}=this.parent.viewport;return al.process(t,e,i,a,Rs._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:i,pageHeight:a},rotation:l}=this.parent.viewport;return al.extractContoursFromText(t,e,i,a,l,Rs._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:a}=this.parent.viewport;return al.processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:a,innerMargin:Rs._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=Rs.getDefaultDrawingOptions():(this._drawingOptions=Rs._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,l=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:a});return this.addComment(l),t?(l.paths={lines:e,points:i},l.uuid=this.#n,l.isCopy=!0):l.lines=e,this.#e&&(l.accessibilityData={type:"Figure",alt:this.#e}),l}static deserializeDraw(t,e,i,a,l,c){return c.areContours?mm.deserialize(t,e,i,a,l,c):nu.deserialize(t,e,i,a,l,c)}static async deserialize(t,e,i){const a=await super.deserialize(t,e,i);return a.#t=t.areContours,a.description=t.accessibilityData?.alt||"",a.#n=t.uuid,a}}class N2 extends Qt{#t=null;#e=null;#i=null;#n=null;#s=null;#r="";#a=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=oe.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#s=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){Qt.initialize(t,e)}static isHandlingMimeForPasting(t){return rm.includes(t)}static paste(t,e){e.pasteEditor({mode:oe.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#r=t.file.name),this.#m()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:l,height:c}=t||this.copyCanvas(null,null,!0).imageData,u=await i.guess({name:"altText",request:{data:a,width:l,height:c,channels:a.length/(l*c)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),e&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#h(i,!0)).finally(()=>this.#f());return}if(this.#n){const i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(a=>this.#h(a)).finally(()=>this.#f());return}if(this.#s){const i=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(a=>this.#h(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=rm.join(",");const e=this._uiManager._signal;this.#i=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(a)}i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#s||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#m():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#e=i,a&&(this.#t=a),this.#o=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#m(){const{div:t}=this;let{width:e,height:i}=this.#t;const[a,l]=this.pageDimensions,c=.75;if(this.width)e=this.width*a,i=this.height*l;else if(e>c*a||i>c*l){const d=Math.min(c*a/e,c*l/i);e*=d,i*=d}this._uiManager.enableWaiting(!1);const u=this.#a=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=e/a,this.height=i/l,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&this.div.setAttribute("aria-description",this.#r),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,i=!1){t||(t=224);const{width:a,height:l}=this.#t,c=new Ls;let u=this.#t,d=a,f=l,p=null;if(e){if(a>e||l>e){const z=Math.min(e/a,e/l);d=Math.floor(a*z),f=Math.floor(l*z)}p=document.createElement("canvas");const x=p.width=Math.ceil(d*c.sx),S=p.height=Math.ceil(f*c.sy);this.#l||(u=this.#u(x,S));const A=p.getContext("2d");A.filter=this._uiManager.hcmFilter;let E="white",T="#cfcfd8";this._uiManager.hcmFilter!=="none"?T="black":ZC.isDarkMode&&(E="#8f8f9d",T="#42414d");const M=15,k=M*c.sx,N=M*c.sy,F=new OffscreenCanvas(k*2,N*2),I=F.getContext("2d");I.fillStyle=E,I.fillRect(0,0,k*2,N*2),I.fillStyle=T,I.fillRect(0,0,k,N),I.fillRect(k,N,k,N),A.fillStyle=A.createPattern(F,"repeat"),A.fillRect(0,0,x,S),A.drawImage(u,0,0,u.width,u.height,0,0,x,S)}let y=null;if(i){let x,S;if(c.symmetric&&u.width<t&&u.height<t)x=u.width,S=u.height;else if(u=this.#t,a>t||l>t){const T=Math.min(t/a,t/l);x=Math.floor(a*T),S=Math.floor(l*T),this.#l||(u=this.#u(x,S))}const E=new OffscreenCanvas(x,S).getContext("2d",{willReadFrequently:!0});E.drawImage(u,0,0,u.width,u.height,0,0,x,S),y={width:x,height:S,data:E.getImageData(0,0,x,S).data}}return{canvas:p,width:d,height:f,imageData:y}}#u(t,e){const{width:i,height:a}=this.#t;let l=i,c=a,u=this.#t;for(;l>2*t||c>2*e;){const d=l,f=c;l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const p=new OffscreenCanvas(l,c);p.getContext("2d").drawImage(u,0,0,d,f,0,0,l,c),u=p.transferToImageBitmap()}return u}#p(){const[t,e]=this.parentDimensions,{width:i,height:a}=this,l=new Ls,c=Math.ceil(i*t*l.sx),u=Math.ceil(a*e*l.sy),d=this.#a;if(!d||d.width===c&&d.height===u)return;d.width=c,d.height=u;const f=this.#l?this.#t:this.#u(c,u),p=d.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(f,0,0,f.width,f.height,0,0,c,u)}#y(t){if(t){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,i]=this.pageDimensions,a=Math.round(this.width*e*yl.PDF_TO_CSS_UNITS),l=Math.round(this.height*i*yl.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(a,l);return c.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,l),c.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,i){let a=null,l=!1;if(t instanceof uw){const{data:{rect:E,rotation:T,id:M,structParent:k,popupRef:N,richText:F,contentsObj:I,creationDate:z,modificationDate:H},container:ct,parent:{page:{pageNumber:ut}},canvas:At}=t;let Ct,Rt;At?(delete t.canvas,{id:Ct,bitmap:Rt}=i.imageManager.getFromCanvas(ct.id,At),At.remove()):(l=!0,t._hasNoCanvas=!0);const Vt=(await e._structTree.getAriaAttributes(`${rl}${M}`))?.get("aria-label")||"";a=t={annotationType:oe.STAMP,bitmapId:Ct,bitmap:Rt,pageIndex:ut-1,rect:E.slice(0),rotation:T,annotationElementId:M,id:M,deleted:!1,accessibilityData:{decorative:!1,altText:Vt},isSvg:!1,structParent:k,popupRef:N,richText:F,comment:I?.str||null,creationDate:z,modificationDate:H}}const c=await super.deserialize(t,e,i),{rect:u,bitmap:d,bitmapUrl:f,bitmapId:p,isSvg:y,accessibilityData:x}=t;l?(i.addMissingCanvas(t.id,c),c.#o=!0):p&&i.imageManager.isValidId(p)?(c.#e=p,d&&(c.#t=d)):c.#n=f,c.#l=y;const[S,A]=c.pageDimensions;return c.width=(u[2]-u[0])/S,c.height=(u[3]-u[1])/A,x&&(c.altTextData=x),c._initialData=a,t.comment&&c.setCommentData(t),c.#d=!!a,c}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(i),t)return i.bitmapUrl=this.#y(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:l}=this.serializeAltText(!1);if(!a&&l&&(i.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const u=this.#v(i);return u.isSame?null:(u.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(e===null)return i;e.stamps||=new Map;const c=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:c,serialized:i}),i.bitmap=this.#y(!1);else if(this.#l){const u=e.stamps.get(this.#e);c>u.area&&(u.area=c,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return i}#v(t){const{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,a=t.pageIndex===e,l=(t.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&l,isSameAltText:l}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class da{#t;#e=!1;#i=null;#n=null;#s=null;#r=new Map;#a=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#g=null;#m=-1;#u;static _initialized=!1;static#p=new Map([kn,Wm,N2,fn,Rs].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:a,accessibilityManager:l,annotationLayer:c,drawLayer:u,textLayer:d,viewport:f,l10n:p}){const y=[...da.#p.values()];if(!da._initialized){da._initialized=!0;for(const x of y)x.initialize(p,t)}t.registerEditorTypes(y),this.#u=t,this.pageIndex=e,this.div=i,this.#t=l,this.#i=c,this.viewport=f,this.#h=d,this.drawLayer=u,this._structTree=a,this.#u.addLayer(this)}updatePageIndex(t){this.pageIndex=t}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===oe.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#x(),t){case oe.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case oe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case oe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===oe.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const i of da.#p.values())e.toggle(`${i._type}Editing`,t===i._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.togglePointerEvents(t)}get#y(){return this.#r.size!==0?this.#r.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const t=new Set;for(const i of this.#y)i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#u.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));const e=this.#i;if(e)for(const i of e.getEditableAnnotations()){if(i.hide(),this.#u.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const a=await this.deserialize(i);a&&(this.addOrRebuild(a),a.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#g){this.#g=new AbortController;const a=this.#u.combinedSignal(this.#g);this.#h.div.addEventListener("pointerdown",l=>{const{clientX:u,clientY:d,timeStamp:f}=l,p=this.#m;if(f-p>500){this.#m=f;return}this.#m=-1;const{classList:y}=this.div;y.toggle("getElements",!0);const x=document.elementsFromPoint(u,d);if(y.toggle("getElements",!1),!this.div.contains(x[0]))return;let S;const A=new RegExp(`^${Uc}[0-9]+$`);for(const T of x)if(A.test(T.id)){S=T.id;break}if(!S)return;const E=this.#r.get(S);E?.annotationElementId===null&&(l.stopPropagation(),l.preventDefault(),E.dblclick(l))},{signal:a,capture:!0})}const t=this.#i,e=[];if(t){const a=new Map,l=new Map;for(const u of this.#y){if(u.disableEditing(),!u.annotationElementId){e.push(u);continue}if(u.serialize()!==null){a.set(u.annotationElementId,u);continue}else l.set(u.annotationElementId,u);this.getEditableAnnotation(u.annotationElementId)?.show(),u.remove()}const c=t.getEditableAnnotations();for(const u of c){const{id:d}=u.data;if(this.#u.isDeletedAnnotationElement(d)){u.updateEdited({deleted:!0});continue}let f=l.get(d);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=a.get(d),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}this.#x(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const a of da.#p.values())i.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(e),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:i}=_n.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),fn.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#r.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#r.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t),Qt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#s&&(t._focusEventsAllowed=!1,this.#s=setTimeout(()=>{this.#s=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getEditorByUID(t){for(const e of this.#r.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#b(){return da.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#E(t){const e=this.#b;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:i,offsetY:a}=this.#A(),l=this.getNextId(),c=this.#E({parent:this,id:l,x:i,y:a,uiManager:this.#u,isCentered:!0,...e});c&&this.add(c)}async deserialize(t){return await da.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,i={}){const a=this.getNextId(),l=this.#E({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...i});return l&&this.add(l),l}get boundingClientRect(){return this.div.getBoundingClientRect()}#A(){const{x:t,y:e,width:i,height:a}=this.boundingClientRect,l=Math.max(0,t),c=Math.max(0,e),u=Math.min(window.innerWidth,t+i),d=Math.min(window.innerHeight,e+a),f=(l+u)/2-t,p=(c+d)/2-e,[y,x]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:y,offsetY:x}}addNewEditor(t={}){this.createAndAddNewEditor(this.#A(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=_n.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#a||(this.#a=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const i=this.#u.getMode();if(i===oe.STAMP||i===oe.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===oe.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:e}=_n.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#a=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const i=this.#u.getActive();this.#e=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#b.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,e,i){const a=this.#u.findParent(e,i);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#s&&(clearTimeout(this.#s),this.#s=null);for(const t of this.#r.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#r.clear(),this.#u.removeLayer(this)}#x(){for(const t of this.#r.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,eo(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#x();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,eo(this.div,{rotation:i}),e!==i)for(const a of this.#r.values())a.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class Hn{#t=null;#e=new Map;#i=new Map;static#n=0;setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return ie(this,"_svgFactory",new Zh)}static#s(t,[e,i,a,l]){const{style:c}=t;c.top=`${100*i}%`,c.left=`${100*e}%`,c.width=`${100*a}%`,c.height=`${100*l}%`}#r(){const t=Hn._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#a(t,e){const i=Hn._svgFactory.createElement("clipPath");t.append(i);const a=`clip_${e}`;i.setAttribute("id",a),i.setAttribute("clipPathUnits","objectBoundingBox");const l=Hn._svgFactory.createElement("use");return i.append(l),l.setAttribute("href",`#${e}`),l.classList.add("clip"),a}#o(t,e){for(const[i,a]of Object.entries(e))a===null?t.removeAttribute(i):t.setAttribute(i,a)}draw(t,e=!1,i=!1){const a=Hn.#n++,l=this.#r(),c=Hn._svgFactory.createElement("defs");l.append(c);const u=Hn._svgFactory.createElement("path");c.append(u);const d=`path_${a}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#i.set(a,u);const f=i?this.#a(c,d):null,p=Hn._svgFactory.createElement("use");return l.append(p),p.setAttribute("href",`#${d}`),this.updateProperties(l,t),this.#e.set(a,l),{id:a,clipPathId:`url(#${f})`}}drawOutline(t,e){const i=Hn.#n++,a=this.#r(),l=Hn._svgFactory.createElement("defs");a.append(l);const c=Hn._svgFactory.createElement("path");l.append(c);const u=`path_${i}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const y=Hn._svgFactory.createElement("mask");l.append(y),d=`mask_${i}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const x=Hn._svgFactory.createElement("rect");y.append(x),x.setAttribute("width","1"),x.setAttribute("height","1"),x.setAttribute("fill","white");const S=Hn._svgFactory.createElement("use");y.append(S),S.setAttribute("href",`#${u}`),S.setAttribute("stroke","none"),S.setAttribute("fill","black"),S.setAttribute("fill-rule","nonzero"),S.classList.add("mask")}const f=Hn._svgFactory.createElement("use");a.append(f),f.setAttribute("href",`#${u}`),d&&f.setAttribute("mask",`url(#${d})`);const p=f.cloneNode();return a.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(i,a),i}finalizeDraw(t,e){this.#i.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:i,bbox:a,rootClass:l,path:c}=e,u=typeof t=="number"?this.#e.get(t):t;if(u){if(i&&this.#o(u,i),a&&Hn.#s(u,a),l){const{classList:d}=u;for(const[f,p]of Object.entries(l))d.toggle(f,p)}if(c){const f=u.firstElementChild.firstElementChild;this.#o(f,c)}}}updateParent(t,e){if(e===this)return;const i=this.#e.get(t);i&&(e.#t.append(i),this.#e.delete(t),e.#e.set(t,i))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:fm};globalThis.pdfjsLib={AbortException:rr,AnnotationEditorLayer:da,AnnotationEditorParamsType:we,AnnotationEditorType:oe,AnnotationEditorUIManager:or,AnnotationLayer:Qm,AnnotationMode:ir,AnnotationType:wn,applyOpacity:tT,build:o2,ColorPicker:aw,createValidAbsoluteUrl:Nx,CSSConstants:JC,DOMSVGFactory:Zh,DrawLayer:Hn,FeatureTest:_n,fetchData:Zc,findContrastColor:eT,getDocument:ew,getFilenameFromUrl:$C,getPdfFilenameFromUrl:XC,getRGB:tu,getUuid:kx,getXfaPageViewport:QC,GlobalWorkerOptions:fl,ImageKind:Uh,InvalidPDFException:sm,isDataScheme:pd,isPdfFile:Um,isValidExplicitDest:dT,MathClamp:qn,noContextMenu:$i,normalizeUnicode:KC,OPS:zc,OutputScale:Ls,PagesMapper:Re,PasswordResponses:PC,PDFDataRangeTransport:nw,PDFDateString:am,PDFWorker:qc,PermissionFlag:LC,PixelsPerInch:yl,RenderingCancelledException:Im,renderRichText:Px,ResponseException:Qh,setLayerDimensions:eo,shadow:ie,SignatureExtractor:al,stopEvent:rn,SupportedImageMimeTypes:rm,TextLayer:Ri,TouchManager:md,updateUrlHash:Ox,Util:Ut,VerbosityLevel:ud,version:r2,XfaLayer:Lx};fl.workerSrc=new URL("/static/frontend/assets/pdf.worker-BA9kU3Pw.mjs",import.meta.url).toString();const O2=()=>typeof window<"u"&&window.devicePixelRatio||1;function k2(r,t){const e=Math.sqrt(t[2]*t[2]+t[3]*t[3]),i=Math.sqrt(t[0]*t[0]+t[1]*t[1]),a=e,l=a,c=typeof r.width=="number"&&r.width>0?r.width*i:(r.str?.length||1)*l*.5,u=t[4],d=t[5]-a*.85;return{x:u,y:d,w:c,h:l}}function L2(r,t,e){const a=(typeof document<"u"?document.createElement("canvas"):null)?.getContext("2d"),l=[];let c=0,u=-999;const d=4;let f=0;return r.items.forEach(p=>{if(!p.str||p.str.trim()==="")return;const y=Ut.transform(t.transform,p.transform),x=k2(p,y);Math.abs(x.y-u)>d&&(c+=1,u=x.y);const S=x.h,A=typeof p.width=="number"&&p.width>0?p.width*e:x.w,E=p.str.split(/(\s+)/);if(!a||E.length===0){l.push({id:f++,text:p.str,x:x.x,y:x.y,w:x.w,h:x.h,fontSize:x.h,lineIndex:c});return}a.font=`${S}px sans-serif`;const T=E.map(F=>({text:F,measured:a.measureText(F).width,isSpace:/^\s+$/.test(F)||F===""})),M=T.reduce((F,I)=>F+I.measured,0),k=M>0?A/M:1;let N=0;T.forEach(F=>{const I=F.measured*k;if(F.text===""||F.isSpace){N+=I;return}l.push({id:f,text:F.text,x:x.x+N,y:x.y,w:I,h:S,fontSize:S,lineIndex:c}),f+=1,N+=I})}),l}function fw(r){const t={};return r.forEach(e=>{const i=e.lineIndex??Math.round(e.y/4)*4;t[i]||(t[i]=[]),t[i].push(e)}),Object.values(t)}function Rv(r,t,e){let l=null,c=1/0;for(const u of r){if(!(e>=u.y-6&&e<=u.y+u.h+6))continue;if(t>=u.x-4&&t<=u.x+u.w+4)return u;const p=t<u.x?u.x-t:t-(u.x+u.w);p<c&&p<40&&(c=p,l=u)}return l}function P2(r){if(!r.length)return"";let t="";for(let e=0;e<r.length;e++){const i=r[e];if(e>0){const a=r[e-1];Math.abs(i.y-a.y)<6?i.x-(a.x+a.w)>1&&(t+=" "):t+=" "}t+=i.text}return t.trim()}function j2(r,t){return r.length?fw(r).map(i=>{const a=Math.min(...i.map(y=>y.x)),l=Math.max(...i.map(y=>y.x+y.w)),c=i.map(y=>y.y),u=c.sort((y,x)=>y-x)[Math.floor(c.length/2)],d=Math.max(...i.map(y=>y.h)),f=2;return{x:(a-1)/t,y:(u-f)/t,width:(l-a+2)/t,height:(d+f+3)/t}}):[]}function B2({pdfData:r,scale:t,highlights:e=[],hoveredHighlightId:i=null,activeHighlightId:a=null,selectionForPicker:l=null,presetColors:c=[],onSelectionComplete:u,onNumPages:d,onHighlightHover:f,onHighlightHoverEnd:p,onHighlightEdit:y,onHighlightDelete:x}){const[S,A]=U.useState(null),[E,T]=U.useState(0),[M,k]=U.useState(!0);return U.useEffect(()=>{if(!r)return;let N=!1;return(async()=>{k(!0);try{const I=r.slice(0),z=await ew({data:I}).promise;N||(A(z),T(z.numPages),d?.(z.numPages))}catch(I){console.error("Failed to load PDF",I)}N||k(!1)})(),()=>{N=!0}},[r,d]),M?R.jsx("div",{className:"flex items-center justify-center h-full",children:R.jsx(Ns,{className:"w-6 h-6 text-slate-400 animate-spin"})}):S?R.jsx("div",{className:"flex flex-col items-center py-6 gap-4",children:Array.from({length:E},(N,F)=>R.jsx(F2,{pdf:S,pageNumber:F+1,scale:t,pageHighlights:e.filter(I=>I.page_number===F+1),hoveredHighlightId:i,activeHighlightId:a,selectionForPicker:l,presetColors:c,onSelectionComplete:u,onHighlightHover:f,onHighlightHoverEnd:p,onHighlightEdit:y,onHighlightDelete:x},F))}):null}function F2({pdf:r,pageNumber:t,scale:e,pageHighlights:i,hoveredHighlightId:a,activeHighlightId:l,selectionForPicker:c,presetColors:u=[],onSelectionComplete:d,onHighlightHover:f,onHighlightHoverEnd:p,onHighlightEdit:y,onHighlightDelete:x}){const S=U.useRef(null),A=U.useRef(null),E=U.useRef(null),T=U.useRef(null),[M,k]=U.useState({width:0,height:0}),[N,F]=U.useState([]),[I,z]=U.useState(null),[H,ct]=U.useState(null),[ut,At]=U.useState(!1),Ct=U.useRef(null),Rt=U.useRef(null),Vt=U.useCallback(()=>{Rt.current&&clearTimeout(Rt.current),Rt.current=setTimeout(()=>{p?.(),Rt.current=null},1e3)},[p]),xt=U.useCallback(B=>{Rt.current&&(clearTimeout(Rt.current),Rt.current=null),f?.(B)},[f]);U.useEffect(()=>()=>{Rt.current&&clearTimeout(Rt.current)},[]),U.useEffect(()=>{let B=!1;return(async()=>{const ft=await r.getPage(t),wt=O2(),Mt=ft.getViewport({scale:e}),qt=ft.getViewport({scale:e*wt}),jt=A.current;if(!jt||B)return;const he=jt.getContext("2d",{alpha:!1});he.imageSmoothingEnabled=!0,he.imageSmoothingQuality="high",jt.width=qt.width,jt.height=qt.height,jt.style.width=`${Mt.width}px`,jt.style.height=`${Mt.height}px`,k({width:Mt.width,height:Mt.height}),await ft.render({canvasContext:he,viewport:qt}).promise;const re=await ft.getTextContent();if(B)return;const Tt=L2(re,Mt,e);F(Tt);const de=E.current;!de||B||(de.innerHTML="",de.style.width=`${Mt.width}px`,de.style.height=`${Mt.height}px`,Tt.forEach(Wt=>{const Ee=document.createElement("span");Ee.textContent=Wt.text,Ee.style.position="absolute",Ee.style.left=`${Wt.x}px`,Ee.style.top=`${Wt.y}px`,Ee.style.width=`${Wt.w}px`,Ee.style.height=`${Wt.h}px`,Ee.style.fontSize=`${Wt.fontSize}px`,Ee.style.fontFamily="sans-serif",Ee.style.color="transparent",Ee.style.whiteSpace="pre",Ee.style.pointerEvents="none",Ee.style.lineHeight="1",de.appendChild(Ee)}))})(),()=>{B=!0}},[r,t,e]);const zt=U.useMemo(()=>{if(c&&c.pageNumber===t){const ft=Math.min(c.spanStart,c.spanEnd),wt=Math.max(c.spanStart,c.spanEnd);return N.filter(Mt=>Mt.id>=ft&&Mt.id<=wt)}if(I==null||H==null)return[];const B=Math.min(I,H),J=Math.max(I,H);return N.filter(ft=>ft.id>=B&&ft.id<=J)},[N,c,t,I,H]);U.useEffect(()=>{c===null&&Ct.current?.pageNumber===t&&(z(null),ct(null)),Ct.current=c},[c,t]);const G=U.useCallback((B,J)=>{const ft=S.current?.getBoundingClientRect();return ft?{x:B-ft.left,y:J-ft.top}:{x:0,y:0}},[]),it=U.useCallback(B=>{if(B.button!==0||!N.length)return;const{x:J,y:ft}=G(B.clientX,B.clientY),wt=Rv(N,J,ft);wt?(z(wt.id),ct(wt.id),At(!0)):(z(null),ct(null))},[N,G]),vt=U.useCallback(B=>{if(!ut)return;const{x:J,y:ft}=G(B.clientX,B.clientY),wt=Rv(N,J,ft);wt&&ct(wt.id)},[ut,N,G]),Ht=U.useCallback(B=>{if(B.button!==0||!ut)return;if(At(!1),zt.length<2){z(null),ct(null);return}if(!d)return;const J=S.current?.getBoundingClientRect();if(!J)return;const ft={rects:j2(zt,e)},wt=P2(zt),Mt=zt[zt.length-1],qt={x:J.left+(Mt.x+Mt.w/2),y:J.top+(Mt.y-8)};d({pageNumber:t,position_data:ft,highlighted_text:wt,spanStart:Math.min(I,H),spanEnd:Math.max(I,H),pickerPosition:qt})},[ut,zt,I,H,e,t,d]);U.useEffect(()=>{const B=T.current||S.current;if(B)return B.addEventListener("mousedown",it),B.addEventListener("mousemove",vt),B.addEventListener("mouseup",Ht),B.addEventListener("mouseleave",Ht),()=>{B.removeEventListener("mousedown",it),B.removeEventListener("mousemove",vt),B.removeEventListener("mouseup",Ht),B.removeEventListener("mouseleave",Ht)}},[it,vt,Ht]);const Ot=U.useMemo(()=>fw(zt),[zt]);return R.jsxs("div",{ref:S,"data-page":t,className:"relative shadow-lg bg-white overflow-hidden select-none",style:{width:M.width||0,height:M.height||0,cursor:"text"},title:"Drag to highlight text",children:[R.jsx("canvas",{ref:A,className:"block w-full h-full",style:{display:"block"}}),R.jsxs("div",{ref:T,className:"absolute inset-0",style:{pointerEvents:"auto"},children:[i.map(B=>{const J=B.position_data?.rects||[],ft=(u??[]).find(de=>de.key===B.color),wt=mi[B.color]||mi.yellow,Mt=ft?.hex??wt?.hex??wt?.solid,qt=a!=null&&String(B.id)===String(a),jt=l!=null&&String(B.id)===String(l),he=qt||jt?J0(Mt,.38):J0(Mt,.18),re=y||x;let Tt=null;if(J.length>0){const de=Math.min(...J.map(gt=>gt.x))*e,Wt=Math.min(...J.map(gt=>gt.y))*e,Ee=Math.max(...J.map(gt=>(gt.x||0)+(gt.width||0)))*e,Pt=Math.max(...J.map(gt=>(gt.y||0)+(gt.height||4)))*e;Tt={left:de,top:Wt,width:Ee-de,height:Pt-Wt}}return Tt?R.jsxs("div",{className:"absolute rounded-sm transition-colors duration-150 group",style:{left:Tt.left,top:Tt.top,width:Tt.width,height:Tt.height,pointerEvents:"auto"},onMouseEnter:()=>xt(B.id),onMouseLeave:Vt,children:[J.map((de,Wt)=>R.jsx("div",{className:"absolute rounded-sm transition-colors duration-150",style:{left:(de.x||0)*e-Tt.left,top:(de.y||0)*e-Tt.top,width:Math.max(0,(de.width||0)*e),height:Math.max(4,(de.height||0)*e),backgroundColor:he,pointerEvents:"none"}},Wt)),re&&qt&&Tt&&R.jsxs("div",{className:"absolute flex items-center gap-0.5 rounded-md border border-slate-200 bg-white shadow-sm z-10",style:{left:0,bottom:"100%",marginBottom:4},onMouseEnter:()=>xt(B.id),onMouseLeave:Vt,children:[y&&R.jsx("button",{type:"button",onClick:de=>{de.stopPropagation(),y(B.id,de)},className:"p-1.5 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-l-md transition-colors",title:"Edit note","aria-label":"Edit note",children:R.jsx(Wp,{className:"w-3.5 h-3.5",strokeWidth:2})}),x&&R.jsx("button",{type:"button",onClick:de=>{de.stopPropagation(),x(B.id)},className:"p-1.5 text-slate-600 hover:text-red-600 hover:bg-red-50 rounded-r-md transition-colors",title:"Delete highlight","aria-label":"Delete highlight",children:R.jsx(cd,{className:"w-3.5 h-3.5",strokeWidth:2})})]})]},B.id):null}),Ot.map((B,J)=>{const ft=Math.min(...B.map(Tt=>Tt.x)),wt=Math.max(...B.map(Tt=>Tt.x+Tt.w)),Mt=B.map(Tt=>Tt.y).sort((Tt,de)=>Tt-de),qt=Mt[Math.floor(Mt.length/2)],jt=Math.max(...B.map(Tt=>Tt.h)),he=2;return R.jsx("div",{className:"absolute rounded-sm pointer-events-none",style:{left:`${ft-1}px`,top:`${qt-he}px`,width:`${wt-ft+2}px`,height:`${jt+he+3}px`,backgroundColor:"rgba(59, 130, 246, 0.2)"}},J)})]}),R.jsx("div",{ref:E,className:"absolute inset-0 overflow-hidden pointer-events-none","aria-hidden":!0})]})}function I2({highlights:r,colorLabels:t,presetColors:e=[],documentColorKeys:i,activeHighlightId:a,onScrollToPage:l,onHighlightClick:c,onHighlightHover:u,onHighlightHoverEnd:d,onClearActive:f,documentId:p,onHighlightNoteUpdate:y,onHighlightDelete:x,openEditForHighlightId:S,onClearOpenEditForHighlightId:A}){const E=i?.length>0?i:cl,[T,M]=U.useState("all"),[k,N]=U.useState(!1),[F,I]=U.useState(""),[z,H]=U.useState(null),[ct,ut]=U.useState("");U.useEffect(()=>{if(S==null||!r?.length)return;const xt=r.find(zt=>String(zt.id)===String(S));xt&&(H(xt.id),ut(xt.note?.content??"")),A?.()},[S,r,A]);const At=U.useMemo(()=>{let xt=r||[];if(T!=="all"&&(xt=xt.filter(zt=>zt.color===T)),F.trim()){const zt=F.trim().toLowerCase();xt=xt.filter(G=>G.highlighted_text&&G.highlighted_text.toLowerCase().includes(zt)||G.note?.content&&G.note.content.toLowerCase().includes(zt))}return xt},[r,T,F]),Ct=xt=>{H(xt.id),ut(xt.note?.content??"")},Rt=async()=>{if(z==null||!p||!y){H(null);return}await y(z,ct.trim()||""),H(null)},Vt=()=>{H(null),ut("")};return R.jsxs("div",{className:`w-80 shrink-0 flex flex-col border-l ${ma.default} ${ks.surface}`,children:[R.jsxs("div",{className:`px-4 pt-5 pb-0 border-b ${ma.default}`,children:[R.jsx("h2",{className:`text-[15px] font-semibold ${Jt.heading} mb-1`,children:"Annotations"}),R.jsxs("p",{className:`text-xs ${Jt.muted} mb-4`,children:[At.length," highlight",At.length!==1?"s":"",r?.length!==At.length&&` of ${r?.length||0}`]}),R.jsxs("div",{className:"space-y-2 mb-4",children:[R.jsx("div",{children:R.jsx("button",{type:"button",onClick:()=>{M("all"),f?.()},className:`text-[11px] font-semibold px-3 py-1 rounded-full border cursor-pointer transition-colors ${T==="all"?"bg-slate-900 text-white border-slate-900":`border-slate-200 ${Jt.secondary} hover:bg-slate-50`}`,children:"All"})}),R.jsxs("div",{children:[R.jsxs("button",{type:"button",onClick:()=>N(xt=>!xt),className:`flex items-center gap-1.5 text-[11px] font-semibold ${Jt.secondary} hover:text-slate-800 transition-colors`,children:[k?R.jsx(Y_,{className:"w-3.5 h-3.5 shrink-0"}):R.jsx($_,{className:"w-3.5 h-3.5 shrink-0"}),"Categories"]}),!k&&R.jsx("div",{className:"flex flex-wrap gap-1.5 mt-1.5",children:E.map(xt=>{const zt=(r||[]).filter(B=>B.color===xt).length,G=mi[xt],vt=e?.find(B=>B.key===xt)?.hex??G?.hex??G?.solid??"#94a3b8",Ht=Ms(xt,t,e),Ot=T===xt;return R.jsxs("button",{type:"button",onClick:()=>{M(Ot?"all":xt),f?.()},className:`text-[11px] font-semibold px-2.5 py-1 rounded-full border cursor-pointer transition-colors flex items-center gap-1.5 ${Ot?"border-transparent":`border-slate-200 ${Jt.secondary} hover:bg-slate-50`}`,style:Ot?{backgroundColor:`${vt}25`,color:vt}:void 0,children:[R.jsx("span",{className:"w-2 h-2 rounded-full shrink-0",style:{backgroundColor:vt,opacity:1}}),R.jsx("span",{children:Ht}),R.jsxs("span",{className:Ot?"opacity-80":Jt.muted,children:["(",zt,")"]})]},xt)})})]})]}),R.jsxs("div",{className:"relative mb-4",children:[R.jsx(pC,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-400",strokeWidth:2}),R.jsx("input",{type:"text",placeholder:"Search highlights...",value:F,onChange:xt=>I(xt.target.value),className:`w-full pl-8 pr-3 py-1.5 text-xs border ${ma.default} rounded-lg bg-slate-50 outline-none ${Jt.body} placeholder:${Jt.muted}`})]})]}),R.jsx("div",{className:"flex-1 overflow-auto px-3 pb-5",children:r?.length?At.length?R.jsx("ul",{className:"space-y-1.5",children:At.map(xt=>{const zt=mi[xt.color]||mi.yellow,it=e?.find(Ot=>Ot.key===xt.color)?.hex??zt?.hex??zt?.solid??"#94a3b8",vt=xt.note?.content,Ht=a!=null&&String(xt.id)===String(a);return R.jsx("li",{children:R.jsxs("div",{role:"button",tabIndex:0,className:`w-full text-left rounded-[10px] p-3 transition-all cursor-pointer border ${Ht?"border-slate-300":"border-transparent hover:border-slate-200"} hover:bg-slate-50`,onClick:()=>{c?.(xt.id),l?.(xt.page_number)},onKeyDown:Ot=>{Ot.target.tagName==="TEXTAREA"||Ot.target.tagName==="INPUT"||Ot.target.isContentEditable||(Ot.key==="Enter"||Ot.key===" ")&&(Ot.preventDefault(),c?.(xt.id),l?.(xt.page_number))},onMouseEnter:()=>u?.(xt.id),onMouseLeave:d,children:[R.jsxs("div",{className:"flex gap-2.5",children:[R.jsx("div",{className:"w-0.5 min-h-9 shrink-0 rounded-full transition-opacity",style:{backgroundColor:it,opacity:Ht?1:.6}}),R.jsx("div",{className:"flex-1 min-w-0",children:R.jsx("p",{className:`text-xs leading-snug ${Jt.body} line-clamp-3`,children:xt.highlighted_text||"(No text captured)"})})]}),z===xt.id?R.jsxs("div",{className:"mt-2 pl-3.5 space-y-1.5",children:[R.jsx("textarea",{value:ct,onChange:Ot=>ut(Ot.target.value),placeholder:"Add a comment...",rows:2,className:`w-full text-[11.5px] border ${ma.default} rounded-lg px-2 py-1.5 resize-none outline-none focus:ring-1 focus:ring-slate-300 ${Jt.body}`}),R.jsxs("div",{className:"flex gap-1.5",children:[R.jsx("button",{type:"button",onClick:Rt,className:"text-[11px] font-medium px-2 py-1 rounded bg-slate-800 text-white hover:bg-slate-700",children:"Save"}),R.jsx("button",{type:"button",onClick:Vt,className:"text-[11px] font-medium px-2 py-1 rounded text-slate-600 hover:bg-slate-100",children:"Cancel"})]})]}):R.jsxs(R.Fragment,{children:[vt&&R.jsx("p",{className:`text-[11.5px] ${Jt.muted} mt-2 pl-3.5 leading-snug italic`,children:vt}),p&&y&&R.jsx("button",{type:"button",onClick:()=>Ct(xt),className:"mt-1.5 pl-3.5 text-[11px] text-slate-500 hover:text-slate-700",children:vt?"Edit comment":"Add comment"})]}),R.jsxs("div",{className:"mt-2 pl-3.5 flex items-center gap-2 flex-wrap",children:[R.jsx("span",{className:"text-[10px] font-semibold px-2 py-0.5 rounded",style:{color:it,backgroundColor:`${it}12`},children:Ms(xt.color,t,e)}),R.jsxs("span",{className:"text-[10px] text-slate-400",children:["p.",xt.page_number]}),p&&x&&R.jsx("button",{type:"button",onClick:Ot=>{Ot.stopPropagation(),x(xt.id)},className:"ml-auto p-1 rounded text-slate-400 hover:text-red-600 hover:bg-red-50 transition-colors",title:"Delete highlight","aria-label":"Delete highlight",children:R.jsx(cd,{className:"w-3.5 h-3.5",strokeWidth:2})})]})]})},xt.id)})}):R.jsx("div",{className:`py-6 text-center ${Jt.muted} text-sm`,children:"No matching highlights."}):R.jsxs("div",{className:`py-8 text-center ${Jt.muted} text-sm`,children:[R.jsx(Mx,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),R.jsx("p",{children:"No highlights yet."}),R.jsx("p",{className:"mt-1 text-xs",children:"Select text on the document to create your first highlight."})]})})]})}const gm=[{colorKey:"yellow",color:"#FBBF24",shortcut:"1"},{colorKey:"green",color:"#34D399",shortcut:"2"},{colorKey:"blue",color:"#60A5FA",shortcut:"3"},{colorKey:"pink",color:"#F472B6",shortcut:"4"},{colorKey:"orange",color:"#FB923C",shortcut:"5"}];function U2(r,t){return r?.length?[...r].sort((i,a)=>(i.sort_order??0)-(a.sort_order??0)).map((i,a)=>({colorKey:i.key,color:i.hex,shortcut:String(a+1)})):t?.length>0?t.map(e=>gm.find(i=>i.colorKey===e)).filter(Boolean):gm}function z2({position:r,onSelect:t,onClose:e,colorLabels:i,documentColorKeys:a,presetColors:l=[]}){const c=U.useRef(null),u=U.useRef(null),[d,f]=U.useState(null),[p,y]=U.useState(""),[x,S]=U.useState(!1),[A,E]=U.useState(!1),T=U.useMemo(()=>U2(l,a),[l,a]),M=T.length>0?T:gm,k=U.useCallback(z=>Ms(z,i,l),[i,l]);U.useEffect(()=>{x&&u.current&&u.current.focus()},[x]);const N=U.useCallback(z=>{f(z.colorKey),x||(t(z.colorKey,""),E(!0),setTimeout(()=>e(),400))},[x,t,e]),F=U.useCallback(()=>{d&&(t(d,p.trim()||void 0),E(!0),setTimeout(()=>e(),400))},[d,p,t,e]);if(U.useEffect(()=>{const z=H=>{if(H.key==="Escape"){e();return}if(!x){const ct=parseInt(H.key,10);if(ct>=1&&ct<=M.length){const ut=M[ct-1];ut&&N(ut)}}x&&H.key==="Enter"&&(H.metaKey||H.ctrlKey)&&(H.preventDefault(),F())};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[x,d,p,e,N,F,M]),U.useEffect(()=>{const z=H=>{c.current&&!c.current.contains(H.target)&&e()};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[e]),U.useEffect(()=>{y(""),f(null),S(!1),E(!1)},[r]),!r)return null;const I=d?M.find(z=>z.colorKey===d):null;return R.jsx("div",{ref:c,className:"fixed z-[1000]",style:{left:r.x,top:r.y-48,transform:"translateX(-50%)",animation:"pickerIn 0.15s cubic-bezier(0.16, 1, 0.3, 1)"},children:A?R.jsxs("div",{className:"flex items-center gap-2 rounded-[10px] px-3.5 py-2 bg-white border border-slate-200 shadow-md",children:[R.jsx("div",{className:"flex h-[18px] w-[18px] items-center justify-center rounded-full",style:{background:I?.color??"#64748b"},children:R.jsx("svg",{width:"10",height:"10",viewBox:"0 0 12 12",fill:"none",children:R.jsx("path",{d:"M2 6L5 9L10 3",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),R.jsx("span",{className:"text-[13px] font-medium text-slate-800",children:"Saved"})]}):R.jsxs("div",{className:"overflow-hidden rounded-xl bg-white border border-slate-200 shadow-lg",style:{width:x?280:"auto",transition:"width 0.2s cubic-bezier(0.16, 1, 0.3, 1)"},children:[R.jsxs("div",{className:"flex items-center gap-0.5 p-1.5",children:[M.map((z,H)=>R.jsx("button",{type:"button",onClick:()=>N(z),className:"flex h-7 w-7 shrink-0 items-center justify-center rounded-lg border-0 transition-colors duration-150 hover:bg-slate-100",style:{background:d===z.colorKey?`${z.color}25`:"transparent"},children:R.jsx("div",{className:"h-4 w-4 rounded-full transition-[box-shadow,transform] duration-150",style:{background:z.color,boxShadow:d===z.colorKey?`0 0 0 2px ${z.color}80`:"none",transform:d===z.colorKey?"scale(1.15)":"scale(1)"}})},z.colorKey)),R.jsx("div",{className:"mx-0.5 h-4 w-px bg-slate-200"}),R.jsx("button",{type:"button",onClick:()=>S(!x),title:"Add note",className:`flex h-7 w-7 shrink-0 items-center justify-center rounded-lg border-0 transition-colors duration-150 ${x?"bg-slate-100":"hover:bg-slate-100"}`,children:R.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",children:[R.jsx("path",{d:"M13 2.5H3C2.72386 2.5 2.5 2.72386 2.5 3V13C2.5 13.2761 2.72386 13.5 3 13.5H10L13.5 10V3C13.5 2.72386 13.2761 2.5 13 2.5Z",stroke:x?"#475569":"#64748b",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),R.jsx("path",{d:"M5.5 6H10.5",stroke:x?"#475569":"#64748b",strokeWidth:"1.2",strokeLinecap:"round"}),R.jsx("path",{d:"M5.5 8.5H8.5",stroke:x?"#475569":"#64748b",strokeWidth:"1.2",strokeLinecap:"round"}),R.jsx("path",{d:"M10 13.5V10H13.5",stroke:x?"#475569":"#64748b",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),R.jsx("button",{type:"button",onClick:e,className:"flex h-7 w-7 shrink-0 items-center justify-center rounded-lg border-0 bg-transparent text-slate-500 hover:bg-slate-100 hover:text-slate-700 transition-colors duration-150",children:R.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:R.jsx("path",{d:"M9 3L3 9M3 3L9 9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})})]}),x&&R.jsxs("div",{className:"px-2 pb-2 border-t border-slate-100 pt-2",style:{animation:"expandIn 0.15s cubic-bezier(0.16, 1, 0.3, 1)"},children:[!I&&R.jsx("div",{className:"px-1.5 pb-2 pt-1 text-[11px] text-slate-500",children:"Pick a category above, then add your note"}),I&&R.jsxs("div",{className:"flex items-center gap-1.5 px-1.5 pb-2 pt-0.5",children:[R.jsx("div",{className:"h-2 w-2 rounded-full shrink-0",style:{background:I.color}}),R.jsx("span",{className:"text-[11px] font-medium text-slate-600",children:k(I.colorKey)})]}),R.jsx("textarea",{ref:u,value:p,onChange:z=>y(z.target.value),placeholder:"Add a note...",rows:2,className:"w-full resize-none rounded-lg border border-slate-200 bg-slate-50 px-2.5 py-2 text-[13px] leading-relaxed text-slate-800 placeholder:text-slate-400 outline-none focus:border-slate-300 focus:ring-1 focus:ring-slate-200"}),R.jsx("div",{className:"mt-1.5 flex items-center justify-end",children:R.jsx("button",{type:"button",onClick:F,disabled:!I,className:"rounded-lg border-0 px-3 py-1.5 text-xs font-medium bg-slate-800 text-white hover:bg-slate-700 disabled:opacity-50 disabled:cursor-default transition-colors",children:"Save"})})]})]})})}const Dh="color_label_";function H2(r,t){return t?.length?[...r].sort((e,i)=>t.indexOf(e)-t.indexOf(i)):r}function q2({colorLabels:r={},presetColors:t=[],documentId:e,onSave:i,onClose:a}){const l=io(),c=U.useRef(null),u=t?.map(N=>N.key)??cl,[d,f]=U.useState(()=>{const N=Object.keys(r||{});return N.length>0?N:u.length>0?[...u]:[...cl]});U.useEffect(()=>{const N=Object.keys(r||{}),F=t?.length?t.map(I=>I.key):cl;f(N.length>0?N:[...F])},[e,r]);const p=Os({mutationFn:N=>Gn.update(e,N),onSuccess:()=>{l.invalidateQueries({queryKey:["document",e]}),i?.()},onError:N=>{console.error("Failed to save color labels",N?.response?.data??N)}}),y=N=>{f(F=>F.filter(I=>I!==N))},x=N=>{d.includes(N)||f(F=>H2([...F,N],u))},S=u.filter(N=>!d.includes(N)),A=t?.length??5,E=d.length<A&&S.length>0,T=N=>{if(N.preventDefault(),!e)return;const F=c.current;if(!F)return;const I={};d.forEach(z=>{const H=F.elements.namedItem(Dh+z),ct=H&&"value"in H?String(H.value).trim():"";I[z]=ct}),p.mutate({color_labels:I})},M=N=>{N.target===N.currentTarget&&a()},k=R.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/40",onClick:M,children:R.jsxs("div",{role:"dialog","aria-modal":"true",className:`relative z-10 ${ks.surface} rounded-xl shadow-xl border ${ma.default} w-full max-w-md mx-4 overflow-hidden max-h-[90vh] flex flex-col`,onClick:N=>N.stopPropagation(),onMouseDown:N=>N.stopPropagation(),children:[R.jsx("div",{className:"px-5 pt-5 pb-2 border-b border-slate-200 shrink-0",children:R.jsx("h3",{className:`text-base font-semibold ${Jt.heading}`,children:"Colours in this document"})}),R.jsxs("form",{ref:c,onSubmit:T,className:"p-5 space-y-4 overflow-auto flex-1 min-h-0",children:[d.map(N=>{const F=mi[N],I=t?.find(ut=>ut.key===N),z=I?.display_name??F?.name??N,H=I?.hex??F?.hex??F?.solid??"#94a3b8",ct=(r&&r[N])??"";return R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx("div",{className:"h-8 w-8 rounded-full shrink-0 border-2 border-slate-200",style:{backgroundColor:H}}),R.jsxs("div",{className:"flex-1 min-w-0",children:[R.jsxs("label",{className:`text-xs ${Jt.muted} block mb-0.5`,htmlFor:Dh+N,children:[N," (default: ",z,")"]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("input",{id:Dh+N,name:Dh+N,type:"text",defaultValue:ct,placeholder:z,className:`w-full rounded-lg border ${ma.default} px-3 py-2 text-sm ${Jt.body} placeholder:${Jt.muted} outline-none focus:ring-2 focus:ring-slate-300`}),R.jsx("button",{type:"button",onMouseDown:ut=>{ut.preventDefault(),ut.stopPropagation(),y(N)},onClick:ut=>{ut.preventDefault(),ut.stopPropagation(),y(N)},className:"shrink-0 p-2 rounded-lg text-slate-400 hover:text-red-600 hover:bg-red-50 transition-colors select-none",title:"Remove this colour from the document","aria-label":"Remove colour",children:R.jsx(tm,{className:"w-4 h-4 pointer-events-none",strokeWidth:2})})]})]})]},N)}),E&&R.jsxs("div",{className:"pt-2 border-t border-slate-200",children:[R.jsx("p",{className:`text-xs ${Jt.muted} mb-2`,children:"Add a colour"}),R.jsx("div",{className:"flex flex-wrap gap-2",children:S.map(N=>{const F=mi[N],I=t?.find(ct=>ct.key===N),z=I?.hex??F?.hex??F?.solid??"#94a3b8",H=I?.display_name??F?.label??N;return R.jsxs("button",{type:"button",onClick:()=>x(N),className:"flex items-center gap-2 rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-700 hover:bg-slate-50 transition-colors",children:[R.jsx("span",{className:"h-5 w-5 rounded-full border border-slate-200 shrink-0",style:{backgroundColor:z}}),R.jsx("span",{children:H}),R.jsx(Zp,{className:"w-4 h-4 text-slate-400",strokeWidth:2})]},N)})})]}),d.length===0&&R.jsx("p",{className:`text-sm ${Jt.muted}`,children:"No colours in this document. Add one above to use for highlights."}),p.isError&&R.jsx("p",{className:"text-sm text-red-600",children:p.error?.response?.data?.detail??p.error?.message??"Failed to save. Try again."}),R.jsxs("div",{className:"flex justify-end gap-2 pt-2 shrink-0",children:[R.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm text-slate-600 hover:bg-slate-100 rounded-lg",children:"Cancel"}),R.jsx("button",{type:"submit",className:to,disabled:p.isPending,children:p.isPending?"Saving":"Save"})]})]})]})});return typeof document>"u"||!document.body?k:yA.createPortal(k,document.body)}function G2({position:r,initialValue:t="",onSave:e,onClose:i}){const[a,l]=U.useState(t),c=U.useRef(null),u=U.useRef(null);return U.useEffect(()=>{l(t)},[t,r]),U.useEffect(()=>{u.current?.focus()},[r]),U.useEffect(()=>{const d=f=>{f.key==="Escape"&&i(),f.key==="Enter"&&(f.metaKey||f.ctrlKey)&&(f.preventDefault(),e(a.trim()))};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[a,e,i]),U.useEffect(()=>{const d=f=>{c.current&&!c.current.contains(f.target)&&i()};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[i]),r?R.jsxs("div",{ref:c,className:"fixed z-[1001] w-64 rounded-xl border border-slate-200 bg-white p-3 shadow-lg",style:{left:r.x,top:r.y+6,transform:"translateX(-50%)",animation:"pickerIn 0.15s cubic-bezier(0.16, 1, 0.3, 1)"},children:[R.jsx("textarea",{ref:u,value:a,onChange:d=>l(d.target.value),placeholder:"Add a note...",rows:3,className:"w-full resize-none rounded-lg border border-slate-200 bg-slate-50 px-2.5 py-2 text-[13px] leading-relaxed text-slate-800 placeholder:text-slate-400 outline-none focus:border-slate-300 focus:ring-1 focus:ring-slate-200 mb-2"}),R.jsxs("div",{className:"flex items-center justify-end gap-2",children:[R.jsx("button",{type:"button",onClick:i,className:"rounded-lg px-2.5 py-1.5 text-xs font-medium text-slate-600 hover:bg-slate-100 transition-colors",children:"Cancel"}),R.jsx("button",{type:"button",onClick:()=>e(a.trim()),className:"rounded-lg px-3 py-1.5 text-xs font-medium bg-slate-800 text-white hover:bg-slate-700 transition-colors",children:"Save"})]})]}):null}function K2(){const{id:r}=wm(),t=ba(),e=io(),[i,a]=U.useState(null),[l,c]=U.useState(!1),[u,d]=U.useState(!0),[f,p]=U.useState(1.3),[y,x]=U.useState(!0),[S,A]=U.useState(null),[E,T]=U.useState(null),[M,k]=U.useState(null),[N,F]=U.useState(null),[I,z]=U.useState(null),[H,ct]=U.useState(0),[ut,At]=U.useState(1),[Ct,Rt]=U.useState(!1),[Vt,xt]=U.useState(null),[zt,G]=U.useState(null),{data:it,isLoading:vt,isError:Ht}=es({queryKey:["document",r],queryFn:async()=>{const{data:gt}=await Gn.get(r);return gt},enabled:!!r}),Ot=U.useMemo(()=>it?.highlight_preset_detail?.colors??[],[it?.highlight_preset_detail?.colors]),B=U.useMemo(()=>{if(Ot?.length)return Ot.map(pe=>pe.key);const gt=Object.keys(it?.color_labels||{});return gt.length>0?gt:[...cl]},[Ot,it?.color_labels]);U.useEffect(()=>{if(!it||!r)return;let gt=!1;return(async()=>{d(!0);try{const Le=await OC(it);gt||(Le?a(Le.data):c(!0))}finally{gt||d(!1)}})(),()=>{gt=!0}},[it,r]);const{data:J=[]}=es({queryKey:["highlights",r],queryFn:async()=>{const{data:gt}=await Gn.highlights(r);return gt},enabled:!!r}),{data:ft=[]}=es({queryKey:["presets"],queryFn:async()=>{const{data:gt}=await nl.list();return gt}}),wt=Os({mutationFn:({documentId:gt,payload:pe})=>Gn.update(gt,pe),onSuccess:(gt,{documentId:pe})=>{e.invalidateQueries({queryKey:["document",pe]})}}),Mt=U.useCallback(async gt=>{if(r)try{await Gn.createHighlight(r,gt),e.invalidateQueries({queryKey:["highlights",r]}),k(null),F(null),z(null)}catch(pe){console.error("Failed to save highlight",pe)}},[r,e]),qt=U.useCallback(gt=>{k({page_number:gt.pageNumber,position_data:gt.position_data,highlighted_text:gt.highlighted_text}),F(gt.pickerPosition),z({pageNumber:gt.pageNumber,spanStart:gt.spanStart,spanEnd:gt.spanEnd})},[]),jt=U.useCallback((gt,pe)=>{M&&Mt({...M,color:gt,comment:pe})},[M,Mt]),he=U.useCallback(()=>{k(null),F(null),z(null)},[]),re=U.useCallback(gt=>{At(gt),window.document.getElementById("pdf-scroll-container")?.querySelector(`[data-page="${gt}"]`)?.scrollIntoView({behavior:"smooth",block:"start"})},[]),Tt=U.useCallback(gt=>{T(pe=>pe!=null&&String(pe)===String(gt)?null:gt)},[]),de=U.useCallback(gt=>ct(gt??0),[]),Wt=U.useCallback(()=>{if(ut<=1)return;const gt=ut-1;At(gt),re(gt)},[ut,re]),Ee=U.useCallback(()=>{if(ut>=H)return;const gt=ut+1;At(gt),re(gt)},[ut,H,re]),Pt=async gt=>{const pe=gt.target.files?.[0];if(!pe||!it||!r)return;const Le=await pe.arrayBuffer(),Ln=await Dx(Le);if(Ln!==it.pdf_hash){alert("This file does not match the original document.");return}try{const Cn=new FormData;Cn.append("file",new Blob([Le],{type:"application/pdf"}),pe.name||it.filename||"document.pdf"),await Gn.uploadPdf(r,Cn)}catch(Cn){const nn=Cn.response?.data?.detail??Cn.message??"Upload failed";alert(typeof nn=="string"?nn:JSON.stringify(nn));return}await Fm(Ln,it.filename||pe.name,pe.size,Le),a(Le),c(!1)};return r?vt||u?R.jsx("div",{className:`${Qr} flex items-center justify-center min-h-[50vh]`,children:R.jsx(Ns,{className:`w-8 h-8 ${Jt.muted} animate-spin`})}):Ht||!it&&!vt?R.jsxs("div",{className:`${Qr} flex flex-col items-center justify-center min-h-[50vh]`,children:[R.jsx("h2",{className:`text-lg font-semibold ${Jt.heading} mb-2`,children:"Document not found"}),R.jsx("p",{className:`text-sm ${Jt.secondary} mb-4`,children:"It may have been deleted or you dont have access to it."}),R.jsx("button",{type:"button",onClick:()=>t(it?.project?`/project/${it.project}`:"/"),className:to,children:"Back to project"})]}):l?R.jsxs("div",{className:`${Qr} flex flex-col items-center justify-center`,children:[R.jsx(Jp,{className:`w-12 h-12 ${Jt.muted} mb-4`}),R.jsx("h2",{className:`text-lg font-semibold ${Jt.heading} mb-2`,children:"PDF needed on this device"}),R.jsxs("p",{className:`text-sm ${Jt.secondary} mb-4 text-center max-w-sm`,children:["Upload the same file to open ",R.jsx("strong",{children:it?.filename}),"."]}),R.jsxs("label",{className:`${to} inline-flex items-center gap-2`,children:[R.jsx(Jp,{className:"w-4 h-4"})," Upload PDF",R.jsx("input",{type:"file",accept:".pdf",onChange:Pt,className:"hidden"})]}),R.jsx("button",{type:"button",onClick:()=>t(it?.project?`/project/${it.project}`:"/"),className:`mt-4 text-sm ${Jt.muted} hover:underline`,children:"Back to project"})]}):R.jsxs("div",{className:`h-screen flex flex-col ${ks.page} overflow-hidden`,children:[R.jsxs("header",{className:`${Tx} px-4 py-2.5 flex items-center justify-between shrink-0`,children:[R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx("button",{type:"button",onClick:()=>t(it?.project?`/project/${it.project}`:"/"),className:kc,title:"Back to project",children:R.jsx(ld,{className:"w-4 h-4"})}),R.jsx("p",{className:`text-sm font-medium ${Jt.heading} truncate max-w-xs`,children:it?.filename})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[ft.length>0&&R.jsxs("select",{value:it?.highlight_preset!=null?String(it.highlight_preset):"",onChange:gt=>{const pe=gt.target.value,Le=pe===""?null:Number(pe);r&&wt.mutate({documentId:r,payload:{highlight_preset:Le}})},className:`text-xs rounded-lg border ${ma.default} ${ks.surface} py-1.5 pl-2 pr-7 ${Jt.body} cursor-pointer max-w-[11rem]`,title:"Highlight colour preset",children:[R.jsx("option",{value:"",children:"Default"}),ft.map(gt=>R.jsx("option",{value:gt.id,children:gt.name},gt.id))]}),R.jsx("button",{type:"button",onClick:()=>Rt(!0),className:kc,title:"Customise topic names",children:R.jsx(gC,{className:"w-4 h-4"})}),R.jsx("button",{type:"button",onClick:()=>t(`/document/${r}/summary`),className:kc,title:"Summary",children:R.jsx(W_,{className:"w-4 h-4"})}),R.jsx("div",{className:X0}),R.jsxs("div",{className:`flex items-center gap-1 ${ks.muted} rounded-lg px-1 py-0.5`,children:[R.jsx("button",{type:"button",onClick:()=>p(gt=>Math.max(.5,gt-.1)),className:`p-1.5 ${Jt.secondary} hover:text-slate-700 rounded cursor-pointer`,children:R.jsx(AC,{className:"w-3.5 h-3.5"})}),R.jsxs("span",{className:`text-xs ${Jt.secondary} w-12 text-center`,children:[Math.round(f*100),"%"]}),R.jsx("button",{type:"button",onClick:()=>p(gt=>Math.min(3,gt+.1)),className:`p-1.5 ${Jt.secondary} hover:text-slate-700 rounded cursor-pointer`,children:R.jsx(wC,{className:"w-3.5 h-3.5"})})]}),R.jsx("div",{className:X0}),R.jsx("button",{type:"button",onClick:()=>x(gt=>!gt),className:kc,title:y?"Close annotations":"Open annotations",children:y?R.jsx(lC,{className:"w-4 h-4"}):R.jsx(uC,{className:"w-4 h-4"})})]})]}),R.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[R.jsxs("div",{className:"flex-1 overflow-auto flex flex-col relative pb-14",id:"pdf-scroll-container",children:[i&&R.jsx(B2,{pdfData:i,scale:f,highlights:J,hoveredHighlightId:S,activeHighlightId:E,selectionForPicker:I,presetColors:Ot,onSelectionComplete:qt,onNumPages:de,onHighlightHover:A,onHighlightHoverEnd:()=>A(null),onHighlightEdit:(gt,pe)=>{const Le=pe?.target?.getBoundingClientRect?.();Le?G({highlightId:gt,x:Le.left+Le.width/2,y:Le.bottom}):(xt(gt),x(!0))},onHighlightDelete:async gt=>{r&&(await Gn.deleteHighlight(r,gt),e.invalidateQueries({queryKey:["highlights",r]}),String(E)===String(gt)&&T(null),String(S)===String(gt)&&A(null))}}),N&&R.jsx(z2,{position:N,onSelect:jt,onClose:he,colorLabels:it?.color_labels,documentColorKeys:B,presetColors:Ot}),zt&&R.jsx(G2,{position:{x:zt.x,y:zt.y},initialValue:(J||[]).find(gt=>String(gt.id)===String(zt.highlightId))?.note?.content??"",onSave:async gt=>{r&&(await Gn.updateHighlight(r,zt.highlightId,{note:gt}),e.invalidateQueries({queryKey:["highlights",r]}),G(null))},onClose:()=>G(null)}),Ct&&R.jsx(q2,{colorLabels:it?.color_labels||{},presetColors:Ot,documentId:r,onSave:()=>{e.invalidateQueries({queryKey:["document",r]}),Rt(!1)},onClose:()=>Rt(!1)})]}),y&&R.jsx(I2,{highlights:J,colorLabels:it?.color_labels,presetColors:Ot,documentColorKeys:B,activeHighlightId:E,onScrollToPage:re,onHighlightClick:Tt,onHighlightHover:A,onHighlightHoverEnd:()=>A(null),onClearActive:()=>T(null),documentId:r,openEditForHighlightId:Vt,onClearOpenEditForHighlightId:()=>xt(null),onHighlightNoteUpdate:async(gt,pe)=>{r&&(await Gn.updateHighlight(r,gt,{note:pe}),e.invalidateQueries({queryKey:["highlights",r]}))},onHighlightDelete:async gt=>{r&&(await Gn.deleteHighlight(r,gt),e.invalidateQueries({queryKey:["highlights",r]}),String(E)===String(gt)&&T(null),String(S)===String(gt)&&A(null))}})]}),H>0&&R.jsxs("div",{className:`fixed bottom-0 left-0 z-10 flex items-center justify-center gap-2 border-t border-slate-200 bg-white py-2.5 shadow-[0_-2px_8px_rgba(0,0,0,0.06)] ${y?"right-80":"right-0"}`,children:[R.jsx("button",{type:"button",onClick:Wt,disabled:ut<=1,className:"flex h-8 w-8 items-center justify-center rounded-md border border-slate-200 bg-white text-slate-600 disabled:opacity-30 disabled:cursor-default cursor-pointer hover:bg-slate-50 text-sm",children:""}),R.jsxs("span",{className:"min-w-[80px] text-center text-xs text-slate-500",children:["Page ",ut," of ",H]}),R.jsx("button",{type:"button",onClick:Ee,disabled:ut>=H,className:"flex h-8 w-8 items-center justify-center rounded-md border border-slate-200 bg-white text-slate-600 disabled:opacity-30 disabled:cursor-default cursor-pointer hover:bg-slate-50 text-sm",children:""})]})]}):(t("/",{replace:!0}),null)}const Nh="sequence",Oh="topic";function V2(){const{id:r}=wm(),t=ba(),[e,i]=U.useState(Nh),{data:a,isLoading:l,isError:c}=es({queryKey:["document",r],queryFn:async()=>{const{data:x}=await Gn.get(r);return x},enabled:!!r}),{data:u=[]}=es({queryKey:["highlights",r],queryFn:async()=>{const{data:x}=await Gn.highlights(r);return x},enabled:!!r}),d=a?.color_labels||{},f=U.useMemo(()=>a?.highlight_preset_detail?.colors??[],[a?.highlight_preset_detail?.colors]),p=U.useMemo(()=>{const x=[...u||[]];return e===Nh?(x.sort((S,A)=>S.page_number!==A.page_number?S.page_number-A.page_number:new Date(S.created_at)-new Date(A.created_at)),x):(x.sort((S,A)=>{const E=Ms(S.color,d,f),T=Ms(A.color,d,f);return E!==T?E.localeCompare(T):S.page_number!==A.page_number?S.page_number-A.page_number:new Date(S.created_at)-new Date(A.created_at)}),x)},[u,e,d,f]),y=U.useMemo(()=>{if(e!==Oh)return[];const x=f?.length?f.map(A=>A.key):cl,S={};return(u||[]).forEach(A=>{const E=Ms(A.color,d,f);S[E]||(S[E]=[]),S[E].push(A)}),x.forEach(A=>{const E=Ms(A,d,f);S[E]&&S[E].sort((T,M)=>T.page_number!==M.page_number?T.page_number-M.page_number:new Date(T.created_at)-new Date(M.created_at))}),x.map(A=>({topic:Ms(A,d,f),colorKey:A,items:S[Ms(A,d,f)]||[]})).filter(A=>A.items.length>0)},[u,e,d,f]);return r?l?R.jsx("div",{className:`${Qr} flex items-center justify-center min-h-[50vh]`,children:R.jsx(Ns,{className:`w-8 h-8 ${Jt.muted} animate-spin`})}):c||!a?R.jsxs("div",{className:`${Qr} flex flex-col items-center justify-center min-h-[50vh]`,children:[R.jsx("h2",{className:`text-lg font-semibold ${Jt.heading} mb-2`,children:"Document not found"}),R.jsx("button",{type:"button",onClick:()=>t(a?.project?`/project/${a.project}`:"/"),className:to,children:"Back to project"})]}):R.jsxs("div",{className:`min-h-screen flex flex-col ${ks.page}`,children:[R.jsxs("header",{className:`${Tx} px-4 py-2.5 flex items-center justify-between shrink-0`,children:[R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx("button",{type:"button",onClick:()=>t(`/document/${r}`),className:kc,children:R.jsx(ld,{className:"w-4 h-4"})}),R.jsxs("div",{children:[R.jsx("h1",{className:`text-sm font-semibold ${Jt.heading}`,children:"Summary"}),R.jsx("p",{className:`text-xs ${Jt.muted} truncate max-w-[200px]`,children:a.filename})]})]}),R.jsxs("div",{className:"flex items-center gap-1 rounded-lg border border-slate-200 p-0.5 bg-slate-50",children:[R.jsxs("button",{type:"button",onClick:()=>i(Nh),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium transition-colors ${e===Nh?"bg-white text-slate-800 shadow-sm":"text-slate-600 hover:text-slate-800"}`,children:[R.jsx(nC,{className:"w-3.5 h-3.5"}),"Sequence"]}),R.jsxs("button",{type:"button",onClick:()=>i(Oh),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium transition-colors ${e===Oh?"bg-white text-slate-800 shadow-sm":"text-slate-600 hover:text-slate-800"}`,children:[R.jsx(tC,{className:"w-3.5 h-3.5"}),"Topic"]})]})]}),R.jsx("main",{className:"flex-1 overflow-auto p-6 max-w-3xl mx-auto w-full",children:u?.length?e===Oh&&y.length>0?R.jsx("div",{className:"space-y-8",children:y.map(({topic:x,colorKey:S,items:A})=>{const E=f?.find(k=>k.key===S),T=mi[S]||mi.yellow,M=E?.hex??T?.hex??T?.solid??"#94a3b8";return R.jsxs("section",{children:[R.jsxs("h2",{className:"text-sm font-semibold text-slate-800 mb-3 pb-2 border-b border-slate-200 flex items-center gap-2",children:[R.jsx("span",{className:"w-2.5 h-2.5 rounded-full shrink-0",style:{backgroundColor:M}}),x,R.jsxs("span",{className:"text-slate-400 font-normal text-xs",children:["(",A.length,")"]})]}),R.jsx("ul",{className:"space-y-3",children:A.map(k=>R.jsxs("li",{className:`rounded-lg border ${ma.default} ${ks.surface} p-4`,children:[R.jsx("p",{className:`text-sm ${Jt.body} leading-snug`,children:k.highlighted_text||"(No text captured)"}),k.note?.content&&R.jsx("p",{className:`text-xs ${Jt.muted} mt-2 italic`,children:k.note.content}),R.jsxs("p",{className:`text-[11px] ${Jt.muted} mt-2`,children:["p.",k.page_number]})]},k.id))})]},x)})}):R.jsx("ul",{className:"space-y-3",children:p.map(x=>{const S=f?.find(M=>M.key===x.color),A=mi[x.color]||mi.yellow,E=S?.hex??A?.hex??A?.solid??"#94a3b8",T=Ms(x.color,d,f);return R.jsxs("li",{className:`rounded-lg border ${ma.default} ${ks.surface} p-4 flex gap-3`,children:[R.jsx("div",{className:"w-1 min-h-8 rounded-full shrink-0",style:{backgroundColor:E}}),R.jsxs("div",{className:"min-w-0 flex-1",children:[R.jsx("p",{className:`text-sm ${Jt.body} leading-snug`,children:x.highlighted_text||"(No text captured)"}),x.note?.content&&R.jsx("p",{className:`text-xs ${Jt.muted} mt-2 italic`,children:x.note.content}),R.jsxs("div",{className:"mt-2 flex items-center gap-2 flex-wrap",children:[R.jsx("span",{className:"text-[10px] font-semibold px-2 py-0.5 rounded",style:{color:A.hex??A.solid,backgroundColor:`${A.hex??A.solid}18`},children:T}),R.jsxs("span",{className:`text-[11px] ${Jt.muted}`,children:["p.",x.page_number]})]})]})]},x.id)})}):R.jsxs("div",{className:`py-12 text-center ${Jt.muted} text-sm`,children:[R.jsx("p",{children:"No highlights yet."}),R.jsx("p",{className:"mt-1",children:"Select text in the document to create highlights, then return here for a summary."}),R.jsx("button",{type:"button",onClick:()=>t(`/document/${r}`),className:`${to} mt-4`,children:"Open document"})]})})]}):(t("/",{replace:!0}),null)}const $2=[{key:"yellow",display_name:"Key Metrics",hex:"#FBBF24"},{key:"green",display_name:"Competitive Advantages",hex:"#34D399"},{key:"blue",display_name:"Management Questions",hex:"#60A5FA"},{key:"pink",display_name:"Investment Risks",hex:"#F472B6"},{key:"orange",display_name:"Commercial DD",hex:"#FB923C"}],kh=["#f59e0b","#3b82f6","#10b981","#ef4444","#8b5cf6","#ec4899","#06b6d4","#f97316","#84cc16","#14b8a6"];function X2(){const r=io(),[t,e]=U.useState(!1),[i,a]=U.useState(""),[l,c]=U.useState(null),[u,d]=U.useState(""),[f,p]=U.useState(""),[y,x]=U.useState(kh[0]),{data:S=[]}=es({queryKey:["presets"],queryFn:async()=>{const{data:M}=await nl.list();return M}}),A=Os({mutationFn:M=>nl.create(M),onSuccess:()=>{r.invalidateQueries({queryKey:["presets"]}),e(!1),a("")}}),E=Os({mutationFn:M=>nl.delete(M),onSuccess:()=>r.invalidateQueries({queryKey:["presets"]})}),T=Os({mutationFn:({presetId:M,data:k})=>nl.addColor(M,k),onSuccess:(M,{presetId:k})=>{r.invalidateQueries({queryKey:["presets"]}),c(null),d(""),p(""),x(kh[0])}});return Os({mutationFn:({presetId:M,colorId:k})=>nl.removeColor(M,k),onSuccess:()=>r.invalidateQueries({queryKey:["presets"]})}),R.jsxs("section",{className:"mt-8 p-6 bg-white border border-slate-200 rounded-xl",children:[R.jsxs("h2",{className:"text-base font-semibold text-slate-800 mb-1 flex items-center gap-2",children:[R.jsx(rC,{className:"w-4 h-4 text-slate-500"}),"Highlight presets"]}),R.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Create custom colour presets for documents. System presets (Private Equity, Public Markets) are available to everyone."}),R.jsx("ul",{className:"space-y-2 mb-4",children:S.map(M=>R.jsxs("li",{className:"flex items-center justify-between gap-2 py-2 px-3 rounded-lg bg-slate-50 border border-slate-100",children:[R.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[R.jsx("span",{className:"font-medium text-slate-800 truncate",children:M.name}),M.is_system&&R.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 rounded bg-slate-200 text-slate-600 shrink-0",children:"System"}),R.jsxs("span",{className:"text-xs text-slate-500 shrink-0",children:[M.colors?.length??0," colour",M.colors?.length!==1?"s":""]})]}),R.jsx("div",{className:"flex items-center gap-1 shrink-0",children:!M.is_system&&(M.colors?.length??0)<10&&R.jsxs(R.Fragment,{children:[R.jsx("button",{type:"button",onClick:()=>{c(M.id),d(""),p(""),x(kh[0])},className:"p-1.5 rounded text-slate-500 hover:text-slate-700 hover:bg-slate-200",title:"Add colour",children:R.jsx(Zp,{className:"w-4 h-4"})}),R.jsx("button",{type:"button",onClick:()=>{window.confirm(`Delete preset "${M.name}"?`)&&E.mutate(M.id)},className:"p-1.5 rounded text-slate-500 hover:text-red-600 hover:bg-red-50",title:"Delete preset",children:R.jsx(cd,{className:"w-4 h-4"})})]})})]},M.id))}),R.jsxs("button",{type:"button",onClick:()=>e(!0),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg border border-slate-200 bg-white text-slate-700 hover:bg-slate-50",children:[R.jsx(Zp,{className:"w-4 h-4"}),"Create preset"]}),t&&R.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/40",onClick:()=>!A.isPending&&e(!1),children:R.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-slate-200 w-full max-w-sm mx-4 p-5",onClick:M=>M.stopPropagation(),children:[R.jsx("h3",{className:"text-base font-semibold text-slate-800 mb-3",children:"New preset"}),R.jsx("input",{type:"text",value:i,onChange:M=>a(M.target.value),placeholder:"Preset name",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-800 placeholder:text-slate-400 outline-none focus:ring-2 focus:ring-slate-300 mb-4"}),R.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Starts with 5 default colours. You can add more after creating."}),R.jsxs("div",{className:"flex justify-end gap-2",children:[R.jsx("button",{type:"button",onClick:()=>e(!1),disabled:A.isPending,className:"px-4 py-2 text-sm text-slate-600 hover:bg-slate-100 rounded-lg",children:"Cancel"}),R.jsx("button",{type:"button",onClick:()=>{i.trim()&&A.mutate({name:i.trim(),colors:$2})},disabled:!i.trim()||A.isPending,className:"px-4 py-2 text-sm font-medium rounded-lg bg-slate-800 text-white hover:bg-slate-700 disabled:opacity-50",children:A.isPending?"Creating":"Create"})]})]})}),l&&R.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/40",onClick:()=>!T.isPending&&c(null),children:R.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-slate-200 w-full max-w-sm mx-4 p-5",onClick:M=>M.stopPropagation(),children:[R.jsx("h3",{className:"text-base font-semibold text-slate-800 mb-3",children:"Add colour"}),R.jsxs("div",{className:"space-y-3",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-[13px] font-medium text-slate-600 mb-1.5 uppercase tracking-wider",children:"Colour"}),R.jsx("div",{className:"flex flex-wrap gap-2",children:kh.map(M=>R.jsx("button",{type:"button",onClick:()=>x(M),className:"w-7 h-7 rounded-full shrink-0 transition-all border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2",style:{background:M,borderColor:y===M?"#1e293b":"transparent",outline:y===M?"2px solid #fff":"none",outlineOffset:-4}},M))})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Display name"}),R.jsx("input",{type:"text",value:f,onChange:M=>p(M.target.value),placeholder:"e.g. Key metrics",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm text-slate-800 placeholder:text-slate-400 outline-none focus:ring-2 focus:ring-slate-300"})]})]}),R.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[R.jsx("button",{type:"button",onClick:()=>c(null),disabled:T.isPending,className:"px-4 py-2 text-sm text-slate-600 hover:bg-slate-100 rounded-lg",children:"Cancel"}),R.jsx("button",{type:"button",onClick:()=>{const M=`custom_${Date.now()}`,k=f.trim()||"Custom",N=y.startsWith("#")?y:`#${y}`;T.mutate({presetId:l,data:{key:M,display_name:k,hex:N}})},disabled:!f.trim()||T.isPending,className:"px-4 py-2 text-sm font-medium rounded-lg bg-slate-800 text-white hover:bg-slate-700 disabled:opacity-50",children:T.isPending?"Adding":"Add"})]})]})})]})}function Y2({onClose:r,onConfirm:t,isDeleting:e}){return R.jsx("div",{className:"fixed inset-0 bg-slate-950/40 backdrop-blur-sm flex items-center justify-center z-[1000]",onClick:r,children:R.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-[400px] mx-4 shadow-xl",onClick:i=>i.stopPropagation(),children:[R.jsx("h3",{className:"m-0 text-lg font-semibold text-slate-900",style:{fontFamily:"'Instrument Serif', serif"},children:"Delete account?"}),R.jsx("p",{className:"mt-2 mb-6 text-sm text-slate-600",style:{fontFamily:"'DM Sans', sans-serif"},children:"This will permanently delete your account and all your data. This cannot be undone."}),R.jsxs("div",{className:"flex justify-end gap-2",children:[R.jsx("button",{type:"button",onClick:r,disabled:e,className:"px-4 py-2 text-sm font-medium border border-slate-200 rounded-lg bg-white text-slate-600 hover:bg-slate-50",children:"Cancel"}),R.jsx("button",{type:"button",onClick:t,disabled:e,className:"px-4 py-2 text-sm font-medium rounded-lg text-white bg-red-600 hover:bg-red-700 disabled:opacity-70",children:e?R.jsxs(R.Fragment,{children:[R.jsx(Ns,{className:"w-4 h-4 animate-spin inline-block mr-1.5 align-middle"}),"Deleting"]}):"Delete account"})]})]})})}function Q2(){const r=ba(),t=va(p=>p.logout),[e,i]=U.useState(!1),[a,l]=U.useState(!1),[c,u]=U.useState(""),d=()=>{t(),r("/login",{replace:!0})},f=async()=>{u(""),l(!0);try{await gl.deleteAccount(),t(),r("/",{replace:!0})}catch(p){u(p.response?.data?.detail||p.message||"Something went wrong."),l(!1)}};return R.jsxs("div",{className:"min-h-screen bg-slate-50 antialiased",style:{fontFamily:"'DM Sans', sans-serif"},children:[R.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=DM+Sans:ital,wght@0,400;0,500;0,600;1,400&display=swap",rel:"stylesheet"}),R.jsxs("header",{className:"bg-white/92 backdrop-blur-md border-b border-slate-200 py-4 px-10 flex items-center justify-between",children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("button",{type:"button",onClick:()=>r("/app"),className:"p-2 rounded-lg text-slate-500 hover:text-slate-700 hover:bg-slate-100",title:"Back to projects",children:R.jsx(ld,{className:"w-4 h-4"})}),R.jsx("span",{className:"text-[1.05rem] font-semibold text-slate-900",style:{fontFamily:"'Instrument Serif', serif"},children:"WiseMark"})]}),R.jsx("button",{type:"button",onClick:d,className:"p-2 rounded-lg text-slate-500 hover:text-slate-700 hover:bg-slate-100",title:"Sign out",children:R.jsx(jm,{className:"w-4 h-4"})})]}),R.jsxs("div",{className:"max-w-[560px] mx-auto px-6 py-10",children:[R.jsx("h1",{className:"m-0 text-[28px] font-normal text-slate-950 tracking-tight",style:{fontFamily:"'Instrument Serif', serif"},children:"Account settings"}),R.jsx(X2,{}),R.jsxs("section",{className:"mt-8 p-6 bg-white border border-slate-200 rounded-xl",children:[R.jsx("h2",{className:"text-base font-semibold text-slate-800 mb-1",children:"Delete account"}),R.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Permanently delete your account and all your projects and documents."}),R.jsx("button",{type:"button",onClick:()=>i(!0),className:"px-4 py-2 text-sm font-medium rounded-lg text-red-600 border border-red-200 bg-white hover:bg-red-50",children:"Delete account"})]}),c&&R.jsx("p",{className:"mt-4 text-sm text-red-600",children:c})]}),e&&R.jsx(Y2,{onClose:()=>!a&&i(!1),onConfirm:f,isDeleting:a})]})}const W2=new zA({defaultOptions:{queries:{staleTime:3e4,retry:1}}});function Oc({children:r}){return va(e=>e.token)?r:R.jsx(Gh,{to:"/login",replace:!0})}function Mv({children:r}){return va(e=>e.token)?R.jsx(Gh,{to:"/app",replace:!0}):r}function Z2(){return R.jsx(HA,{client:W2,children:R.jsx(oA,{children:R.jsxs(BS,{children:[R.jsx(Cs,{path:"/login",element:R.jsx(Mv,{children:R.jsx(B_,{})})}),R.jsx(Cs,{path:"/register",element:R.jsx(Mv,{children:R.jsx(F_,{})})}),R.jsx(Cs,{path:"/",element:R.jsx(Gh,{to:"/app",replace:!0})}),R.jsx(Cs,{path:"/app",element:R.jsx(Oc,{children:R.jsx(TC,{})})}),R.jsx(Cs,{path:"/app/settings",element:R.jsx(Oc,{children:R.jsx(Q2,{})})}),R.jsx(Cs,{path:"/project/:projectId",element:R.jsx(Oc,{children:R.jsx(kC,{})})}),R.jsx(Cs,{path:"/document/:id",element:R.jsx(Oc,{children:R.jsx(K2,{})})}),R.jsx(Cs,{path:"/document/:id/summary",element:R.jsx(Oc,{children:R.jsx(V2,{})})}),R.jsx(Cs,{path:"*",element:R.jsx(Gh,{to:"/app",replace:!0})})]})})})}U1.createRoot(document.getElementById("root")).render(R.jsx(U.StrictMode,{children:R.jsx(Z2,{})}));
